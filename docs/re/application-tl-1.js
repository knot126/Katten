if(typeof(console)==="undefined"){console={log:(typeof __underscore_SysLog=="function")?__underscore_SysLog:function(a){}}}function NgAssertError(a){this.why=a;if(Error&&Error.captureStackTrace){Error.captureStackTrace(this,NgAssertError);console.log(a+"\n"+this.stack)}}var assert=typeof assert!=="undefined"?assert:function(a,b){if(!a){throw new NgAssertError(b?b:"Assertion Failed")}};var __ngs=typeof __ngs!=="undefined"?__ngs:{};__ngs.r_=function(a){if(!a._c){if(!a.hasOwnProperty("_c")||!a.hasOwnProperty("_d")){console.log('bad module object, missing _c or _d; got "'+JSON.stringify(a)+'"')}a._d()}return a._c.exports};var require=function(b){if(typeof(b)!=="string"){b=""+b}var a=__ngs[b];if(!a.hasOwnProperty("_c")||!a.hasOwnProperty("_d")){console.log('bad require fallthrough, missing _c or _d; got "'+JSON.stringify(a)+'"');return undefined}return __ngs.r_(a)};__ngs._g2={_c:null,_d:function(){var d={exports:{}};var a=d.exports;this._c=d;var e={};e.uidGenerator=0;var b=function(h){var k=e.uidGenerator++;e[k]=h;return k};var g=function(k){if(e.hasOwnProperty(k)){var h=e[k];delete e[k];return h}return null};var c=function(h){if(typeof h=="object"){if(h.hasOwnProperty("callbackFunc")){h.callbackId=b(h.callbackFunc);delete h.callbackFunc}else{if(h.hasOwnProperty("callbackId")){h.callbackFunc=g(h.callbackId);delete h.callbackId}}return h}NgLogD("Error: invalid or non-object passed to gsCmdConvert.");return null};a.makeSafe=function(h){if(h&&typeof h=="object"&&h.hasOwnProperty("callbackFunc")){return c(h)}return h};a.makeExecutable=function(h){if(h&&typeof h=="object"&&h.hasOwnProperty("callbackId")){return c(h)}return h}}};__ngs._g3={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.Social={}}};__ngs._g4={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.BackCardDefinition={images:[{name:"background",pos_x:0,pos_y:0,size_x:640,size_y:960,asset:"Content/Images8x/UI/BG/card_back.jpg",depth:3,alpha:1,anchor_x:0.5,anchor_y:0.5},{name:"dismissIcon",pos_x:240,pos_y:437,anchor_x:0.5,anchor_y:0,size_x:46,size_y:46,depth:1001,asset:"Content/Images8x/UI/icon/icon_0_dismiss.png"}],labels:[{name:"transformerDescription",anchor_x:0.5,anchor_y:0,pos_x:5,pos_y:145,size_x:450,size_y:245,font_size:24,color:[200,200,225],depth:3,horizontalAlign:"left",verticalAlign:"top",fontType:"Content/Fonts/text.otf",text:""}],progressBar:[{name:"cardXP",pos_x:0,pos_y:-299,emptyImage:"Content/Images8x/misc/1pxblack.png",fillImage:"Content/Images8x/misc/1pxlightblue.png",glowImage:"Content/Images8x/misc/1pxclear.png",size_x:512,size_y:15,depth:4,value:60}],buttons:[{name:"flipBackCardButton",pos_x:-195,pos_y:425,anchor_x:0.5,anchor_y:0,size_x:230,size_y:70,text:"ui_back",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",depth:1000,asset:"./Content/Images8x/UI/button/btn_card_blue.png",action:"onFlipBackCard",sound:["Card_Slide_Up_02"],flip_y:false,info:{id:1},multiAsset:{onAsset:"./Content/Images8x/UI/button/btn_card_blue.png",offAsset:"./Content/Images8x/UI/button/btn_card_gray.png"}},{name:"card",pos_x:0,pos_y:0,size_x:600,size_y:780,anchor_x:0.5,anchor_y:0.5,asset:"",action:"onTap",sound:[""],info:{}},{name:"closeButton",pos_x:310,pos_y:425,anchor_x:1,anchor_y:0,size_x:140,size_y:70,font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",asset:"./Content/Images8x/UI/button/btn_card_blue2.png",depth:1000,action:"onDismiss",sound:["click_low"]}],groupDefinitions:{bonus:{labels:[{name:"staticBonusLabel",anchor_x:0.5,anchor_y:0.5,pos_x:0,pos_y:-130,size_x:250,size_y:100,font_size:24,color:[240,240,255],depth:3,horizontalAlign:"center",fontType:"Content/Fonts/SFElectrotome.ttf",text:"ui_transscanbonus_uc"},{name:"bonusStatus",anchor_x:0.5,anchor_y:0.5,pos_x:0,pos_y:-105,size_x:250,size_y:100,font_size:28,color:[240,240,255],depth:3,horizontalAlign:"center",fontType:"Content/Fonts/SFElectrotome.ttf",text:"ui_inactive_uc"},{name:"bonusDescription",anchor_x:0.5,anchor_y:0.5,pos_x:0,pos_y:70,size_x:260,size_y:150,font_size:24,color:[240,240,255],depth:3,horizontalAlign:"middle",verticalAlign:"middle",fontType:"Content/Fonts/text.otf",text:""}],images:[{name:"bonusImage",pos_x:0,pos_y:-34,size_x:100,size_y:120,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/icon/icon_1_bonus_transforming.png"}]},maxLevel:{labels:[{name:"staticBonusLabel",anchor_x:0.5,anchor_y:0.5,pos_x:0,pos_y:-130,size_x:250,size_y:100,font_size:24,color:[240,240,255],depth:3,horizontalAlign:"center",fontType:"Content/Fonts/SFElectrotome.ttf",text:"ui_maxlvlbonus_uc"},{name:"maxLevelStatus",anchor_x:0.5,anchor_y:0.5,pos_x:0,pos_y:-100,size_x:250,size_y:100,font_size:32,color:[240,240,255],depth:3,horizontalAlign:"center",fontType:"Content/Fonts/SFElectrotome.ttf",text:"ui_inactive_uc"},{name:"maxLevelDescription",anchor_x:0.5,anchor_y:0.5,pos_x:0,pos_y:70,size_x:240,size_y:150,font_size:24,color:[240,240,255],depth:3,horizontalAlign:"middle",verticalAlign:"middle",fontType:"Content/Fonts/text.otf",text:"",colorType:"level"}],images:[{name:"MaxLevelImage",pos_x:0,pos_y:-34,size_x:100,size_y:120,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/icon/icon_1_bonus_max_level.png"}]},cardData:{labels:[{name:"transformersName",anchor_x:0.5,anchor_y:1,pos_x:0,pos_y:-400,size_x:320,size_y:50,font_size:34,color:[240,240,255],horizontalAlign:"middle",verticalAlign:"middle",depth:3,fontType:"Content/Fonts/SFElectrotome.ttf",text:""},{name:"specialization",anchor_x:0,anchor_y:0.5,pos_x:-180,pos_y:-255,size_x:380,size_y:96,font_size:20,color:[240,240,255],horizontalAlign:"left",verticalAlign:"middle",depth:3,fontType:"Content/Fonts/SFElectrotome.ttf",text:"ui_specialization_uc"},{name:"specializationName",anchor_x:0,anchor_y:0.5,pos_x:-180,pos_y:-230,size_x:380,size_y:96,font_size:28,color:[240,240,255],horizontalAlign:"left",verticalAlign:"middle",depth:3,fontType:"Content/Fonts/SFElectrotome.ttf",text:""},{name:"classLb",anchor_x:0,anchor_y:0.5,pos_x:80,pos_y:-255,size_x:180,size_y:96,font_size:20,color:[240,240,255],horizontalAlign:"left",verticalAlign:"middle",depth:3,fontType:"Content/Fonts/SFElectrotome.ttf",text:"ui_class_uc"},{name:"className",anchor_x:0,anchor_y:0.5,pos_x:80,pos_y:-230,size_x:180,size_y:96,font_size:28,color:[240,240,255],horizontalAlign:"left",verticalAlign:"middle",depth:3,fontType:"Content/Fonts/SFElectrotome.ttf",text:""},{name:"transformerLevel",anchor_x:0.5,anchor_y:0.5,pos_x:0,pos_y:-348,size_x:300,size_y:60,font_size:34,color:[240,240,255],depth:3,horizontalAlign:"middle",verticalAlign:"top",fontType:"Content/Fonts/SFElectrotome.ttf",text:"",colorType:"level"},{name:"transformerMaxLevel",anchor_x:0.5,anchor_y:0.5,pos_x:0,pos_y:-300,size_x:300,size_y:40,font_size:20,color:[200,200,200],depth:3,horizontalAlign:"middle",verticalAlign:"top",fontType:"Content/Fonts/SFElectrotome.ttf",text:"",colorType:"level"}],images:[{name:"specializationIcon",anchor_x:0,anchor_y:0.5,pos_x:-240,pos_y:-238,size_x:46,size_y:46,asset:"",depth:4,info:{asset1:"Content/Images8x/UI/icon/icon_0_atk_melee.png",asset2:"Content/Images8x/UI/icon/icon_0_atk_range.png",asset3:"Content/Images8x/UI/icon/icon_0_atk_special.png"}},{name:"classIcon",anchor_x:0,anchor_y:0.5,pos_x:16,pos_y:-238,size_x:46,size_y:46,asset:"Content/Images8x/UI/icon/icon_0_atk_melee.png",depth:4,info:{asset1:"Content/Images8x/UI/icon/icon_0_assault.png",asset2:"Content/Images8x/UI/icon/icon_0_command.png",asset3:"Content/Images8x/UI/icon/icon_0_infiltration.png",asset4:"Content/Images8x/UI/icon/icon_0_spec_ops.png"}},{name:"logo",pos_x:-238,pos_y:-438,size_x:118.5,size_y:65,anchor_x:0.5,anchor_y:0.5,asset:"",depth:7,info:{asset1:"Content/Images8x/UI/card_frames/badge_autobot.png",asset2:"Content/Images8x/UI/card_frames/badge_decepticon.png"}}]}},groups:[{name:"cardData",groupDefinition:"cardData",pos_x:0,pos_y:30,depth:3},{name:"maxLevel",groupDefinition:"maxLevel",pos_x:-130,pos_y:-20,horizontalAlign:"middle",depth:3},{name:"bonus",groupDefinition:"bonus",pos_x:130,pos_y:-20,horizontalAlign:"middle",depth:3}]}}};__ngs._fi={_c:null,_d:function(){var e={exports:{}};var b=e.exports;this._c=e;var a=__ngs.r_(__ngs._69).Class;var g=__ngs.r_(__ngs._6).Proc;var c=__ngs.r_(__ngs._g2);var d=false;b.Router=a.subclass({classname:"Router",initialize:function(){var h=__ngs.r_(__ngs._19).ObjectRegistry;h.register(this);this._createSendGen(this.__objectRegistryId)},zone:-2,Zone:{Public:-2,GameService:-1},_classId:346,_sendToOtherProcessRecvGen:function(k){if((k.length-k.idx)!==1){NgLogE("Could not parse due to wrong argument count in Router.sendToOtherProcess from command: "+k);return false}var h=g.parseObject(k[k.idx++]);if(h===undefined){NgLogE("Could not parse gsCommand in Router.sendToOtherProcess from command: "+k);return false}return this._sendToOtherProcessRecv(h)},_onCreateRecvGen:function(k){if((k.length-k.idx)!==1){NgLogE("Could not parse due to wrong argument count in Router.onCreate from command: "+k);return false}var h=g.parseInt(k[k.idx++]);if(h===undefined){NgLogE("Could not parse zone in Router.onCreate from command: "+k);return false}return this._onCreateRecv(h)},$_createSendGen:function(h){g.appendToCommandString(22740991,[+h])},_sendToOtherProcessSendGen:function(h){g.appendToCommandString(22675458,this,[g.encodeObject(h)])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[346]=this._instance||this;PROC_METHOD_TABLE[22675458]=this.prototype._sendToOtherProcessRecvGen;PROC_METHOD_TABLE[22675459]=this.prototype._onCreateRecvGen},_onCreateRecv:function(h){this.zone=h;NgLogD("_Router/_onCreateRecv: "+h)},_sendToOtherProcessRecv:function(h){if(this.zone==this.Zone.Public){if(d){NgLogD("_Router/_sendToOtherProcessRecv - in public")}this.dispatchGameCommand(h)}else{if(this.zone==this.Zone.GameService){if(d){NgLogD("_Router/ _sendToOtherProcessRecv - not in public")}this.dispatchGameServiceCommand(h)}else{NgLogE("Unknown Command Zone for the GameService Router.");this.dispatchGameCommand(h)}}},sendToOtherProcess:function(h){var k=c.makeSafe(h);if(!k){NgLogD("Couldn't prep GSCommand message for sending!");return}if(d){NgLogD("_Router.js/sendToOtherProcess: "+JSON.stringify(k))}this._sendToOtherProcessSendGen(k)},sendCommandToGameService:function(h){if(this.zone==this.Zone.Public){if(d){NgLogD("_Router: sendCommandToGameService - in public")}this.sendToOtherProcess(h)}else{if(this.zone==this.Zone.GameService){if(d){NgLogD("_Router: sendCommandToGameService - not in public")}this.dispatchGameServiceCommand(h)}else{NgLogE("Unknown Command Zone for the GameService Router.");this.sendToOtherProcess(h)}}},sendCommandToGame:function(h){if(this.zone==this.Zone.GameService){this.sendToOtherProcess(h)}else{if(this.zone==this.Zone.Public){this.dispatchGameCommand(h)}else{NgLogE("Unknown Command Zone for the GameService Router.");this.sendToOtherProcess(h)}}},dispatchGameCommand:function(n){var o=c.makeExecutable(n);if(o&&o.hasOwnProperty("callbackFunc")){if(typeof o.callbackFunc=="function"){var l=null;var k=null;if(o.hasOwnProperty("error")){k=o.error}if(o.hasOwnProperty("callbackData")){l=o.callbackData}o.callbackFunc(k,l)}}else{if(o){var q=null;if(o&&o.hasOwnProperty("apiURL")){q=o.apiURL;var m=q.split(".");var p=__ngs.r_(__ngs._3x).Social;var h=p;b._dispatchHelper(h,m,n)}}}},dispatchGameServiceCommand:function(l){var m=null;if(l&&l.hasOwnProperty("apiURL")){m=l.apiURL;var k=m.split(".");var h=__ngs.r_(__ngs._g3).Social;b._dispatchHelper(h,k,l)}else{NgLogE("Someone called GameService without the proper parameters.\n")}},setVerboseLogging:function(h){d=h}});b._dispatchHelper=function(k,n,m){var l;var o=false;while(n.length&&!o){if(k.dispatchCommand){k.dispatchCommand(n,m);o=true}else{if(k.hasOwnProperty((l=n.shift()))){try{k=k[l]}catch(p){NgLogException(p)}}else{NgLogE("Cannot find namespace "+m.apiURL+" in GameService");k=null;break}}}if(!o&&k&&typeof k=="function"){try{k(m)}catch(h){NgLogException(h)}return}}}};__ngs._fj={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.ComboBoxButtonViewDefinition={labels:[{name:"comboSelectedOption",anchor_x:0,anchor_y:0,pos_x:10,pos_y:0,size_x:190,size_y:70,text:"",font_size:20,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[236,243,255]}],buttons:[{name:"comboButton",anchor_x:0,anchor_y:0,pos_x:0,pos_y:0,size_x:210,size_y:70,action:"onTouch",asset:"Content/Images8x/UI/button/button_sort.png",sound:["click_flat"]}]}}};__ngs._fk={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.ComboBoxGridCellDefinition={images:[{name:"background",pos_x:0,pos_y:0,size_x:540,size_y:100,asset:"Content/Images8x/UI/Overlay/block_black.png",alpha:0.5}]}}};__ngs._fl={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.ComboBoxCellDefinition={buttons:[{name:"sortButton",pos_x:0,pos_y:0,size_x:230,size_y:80,action:"onCellTouch",sound:["click_flat"]}],labels:[{name:"optionLabel",anchor_x:0,anchor_y:0.5,pos_x:20,pos_y:35,size_x:180,size_y:60,text:"",font_size:46,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[236,243,255],overflowMode:"shrink"}],images:[{name:"arrowIcon",anchor_x:0.5,anchor_y:0.5,pos_x:200,pos_y:35,size_x:30,size_y:30,asset:"Content/Images8x/UI/icon/icon_arrows_single_white.png",rotation:90,depth:10},{name:"buttonBg",pos_x:0,pos_y:0,size_x:115,size_y:80,asset:"Content/Images8x/UI/button/button_sort_list.png",info:{asset1:"Content/Images8x/UI/button/button_sort_list.png",asset2:"Content/Images8x/UI/button/button_sort_list_selected.png"}},{name:"buttonBgFlip",pos_x:230,pos_y:80,size_x:115,size_y:80,asset:"Content/Images8x/UI/button/button_sort_list.png",rotation:180,flip_y:true,info:{asset1:"Content/Images8x/UI/button/button_sort_list.png",asset2:"Content/Images8x/UI/button/button_sort_list_selected.png"}}]}}};__ngs._fm={_c:null,_d:function(){var e={exports:{}};var c=e.exports;this._c=e;var a=__ngs.r_(__ngs._d2).DialogView;var b=__ngs.r_(__ngs._g4).BackCardDefinition;var d=__ngs.r_(__ngs._45).AnimationQueue;c.BackCardView=a.subclass({classname:"BackCardView",initialize:function($super,p,l){$super(p,b);var v;if(p._otherData.usercard||p._otherData.CardDefinition){var w=__ngs.r_(__ngs._r).TFCardsManager;if(p._otherData.CardDefinition){v=w.getCardDefinition(p._otherData.CardDefinition)}else{v=w.getCardDefinition(p._otherData.usercard.definitionId)}this.cardData.transformersName.setText(Localization.getString(v.name).toUpperCase());if(p._otherData.usercard&&p._otherData.usercard.xp!==undefined){var h=w.getCardLevel(p._otherData.usercard);this.cardData.transformerLevel.setText(Localization.getString("ui_level")+"  "+h)}else{this.cardData.transformerLevel.setVisible(false)}this.cardData.transformerMaxLevel.setText(Localization.getString("ui_maxlevel")+" "+v.maxLevel);this.cardData.className.setText(Localization.getString(w.getTransformerClass(v.classId).toUpperCase()));this.transformerDescription.setText(Localization.getString(v.tfDescription));if(v.speciality==TFGlobals.stats.status1){TFUtils.changeImageOnSprite(this.cardData.specializationIcon,this.cardData.specializationIcon.info.asset1)}else{if(v.speciality==TFGlobals.stats.status2){TFUtils.changeImageOnSprite(this.cardData.specializationIcon,this.cardData.specializationIcon.info.asset2)}else{if(v.speciality==TFGlobals.stats.status3){TFUtils.changeImageOnSprite(this.cardData.specializationIcon,this.cardData.specializationIcon.info.asset3)}}}this.cardData.specializationName.setText(Localization.getString(v.speciality.toUpperCase()));if(v.factionId==TFGameData.FACTION.DECEPTICONS){TFUtils.changeImageOnSprite(this.cardData.logo,this.cardData.logo.info.asset2)}else{TFUtils.changeImageOnSprite(this.cardData.logo,this.cardData.logo.info.asset1)}if((h)&&(h>=v.maxLevel)){this.maxLevel.maxLevelStatus.setVisible(false);this.maxLevel.setAlpha(1);this.maxLevel.maxLevelDescription.setText(Localization.getString("ui_attack")+" +"+v.maxLevelBonus*100+"%")}else{this.maxLevel.maxLevelStatus.setVisible(true);this.maxLevel.setAlpha(0.4);this.maxLevel.maxLevelDescription.setText(Localization.getString("ui_reachmaxforbonus"))}if(this.cardXP){console.log("User card "+JSON.stringify(p._otherData.usercard));if(p._otherData.usercard&&p._otherData.usercard.xp!==undefined){this.cardXP.setProgress(w.getXpPercentage(p._otherData.usercard)*100)}else{this.cardXP.setVisible(false)}}var m="";var r="";if(v.classId==1){m="Content/Images8x/UI/icon/icon_0_assault.png"}else{if(v.classId==2){m="Content/Images8x/UI/icon/icon_0_command.png"}else{if(v.classId==3){m="Content/Images8x/UI/icon/icon_0_infiltration.png"}else{if(v.classId==4){m="Content/Images8x/UI/icon/icon_0_spec_ops.png"}}}}console.log(" config "+JSON.stringify(TFGameData._configJSON));r=Localization.getString(TFGameData._configJSON.classIds[v.classId+""].name);TFUtils.changeImageOnSprite(this.cardData.classIcon,m);this.cardData.className.setText(Localization.getString(r))}this.flipBackCardButton.info=p._otherData;var t=w.checkEvolutionCard(v.id);if(t){this.bonus.bonusStatus.setVisible(true);this.bonus.setAlpha(0.4);var s=(t._bonus)?Math.floor(100*t._bonus):0;var g=__ngs.r_(__ngs._89).CardThumbnailView;var u=new g(this,t.id,80,100,{anchor:[0.5,0.5],showSpinner:true});u.disableTap();u.setPosition(this.bonus.bonusImage._position);this.bonus.bonusImage.setAlpha(0);this.bonus.addChild(u);this.bonus.bonusDescription.setText(Localization.getString("ui_findthiscard"))}else{this.bonus.bonusStatus.setVisible(false);var s=(v.tfBonus)?Math.floor(100*v.tfBonus):0;this.bonus.bonusDescription.setText(Localization.getString("ui_attack")+" +"+s+"% ")}var o=100;var q=p.createAnimationQueue();q.pushAnimation(o,d.Curve.Linear);var k=new Core.Point(0,this._definitions.background.size_y);var n=new Core.Point(0,0);q.tween(d.Interpolate.point(k,n),function(x){if(!this){return}this.setPosition(x.getX(),x.getY())}.bind(this));q.start()},destroy:function($super){if(this.parallaxer){this.parallaxer.destroy()}$super()}})}};__ngs._fn={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.OverLimitCardsDefinition={images:[{name:"regpaneltopImage",anchor_x:0.5,anchor_y:0.5,pos_x:-160,pos_y:-85,size_x:320,size_y:245,asset:"Content/Images8x/UI/Prompt/reg_panel_top.png"},{name:"regpanelbottomImage",anchor_x:0.5,anchor_y:0.5,pos_x:-160,pos_y:129,size_x:320,size_y:245,asset:"Content/Images8x/UI/Prompt/reg_panel_bottom.png"},{name:"regpaneltopImage2",anchor_x:0.5,anchor_y:0.5,pos_x:160,pos_y:-85,size_x:320,size_y:245,asset:"Content/Images8x/UI/Prompt/reg_panel_top.png",flip_x:true},{name:"regpanelbottomImage2",anchor_x:0.5,anchor_y:0.5,pos_x:160,pos_y:129,size_x:320,size_y:245,asset:"Content/Images8x/UI/Prompt/reg_panel_bottom.png",flip_x:true},{name:"upgradeImage",pos_x:-200,pos_y:150,size_x:80,size_y:80,asset:"Content/Images8x/UI/icon/icon_0_upgrade.png",anchor_x:0.5,anchor_y:0.5,depth:5}],labels:[{name:"realTitle",anchor_x:0.5,anchor_y:0.5,pos_x:0,pos_y:-140,size_x:580,size_y:200,font_size:38,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:"ui_basefull_uc"},{name:"Title",anchor_x:0.5,anchor_y:0.5,pos_x:0,pos_y:-75,size_x:605,size_y:200,font_size:30,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:"ui_maxcardcap"},{name:"timeHeader",anchor_x:0.5,anchor_y:0.5,pos_x:0,pos_y:-5,size_x:580,size_y:200,font_size:32,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:"ui_cardsovercapdeleted"},{name:"Time",anchor_x:0.5,anchor_y:0.5,pos_x:0,pos_y:50,size_x:410,size_y:130,font_size:42,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:""},{name:"timeHeader2",anchor_x:0.5,anchor_y:0.5,pos_x:0,pos_y:37,size_x:580,size_y:200,font_size:32,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:"ui_cardsovercapdeleted",visible:false,horizontalAlign:"center"},{name:"Time2",anchor_x:0.5,anchor_y:0.5,pos_x:0,pos_y:75,size_x:410,size_y:130,font_size:42,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:"",visible:false}],tfbuttons:[{name:"cancelButton",anchor_x:0.5,anchor_y:0.5,pos_x:247,pos_y:-180,size_x:100,size_y:100,font_size:50,action:"onDismiss",text:"ui_x_uc",fontType:"Content/Fonts/SFElectrotome.ttf",type:8,sound:["click_low"]},{name:"fuseButton",anchor_x:0.5,anchor_y:0.5,pos_x:-200,pos_y:150,size_x:180,size_y:100,font_size:50,action:"onFuseCards",text:"",fontType:"Content/Fonts/SFElectrotome.ttf",type:8,sound:["click_high"]},{name:"limboButton",anchor_x:0.5,anchor_y:0.5,pos_x:-10,pos_y:150,size_x:180,size_y:100,font_size:36,action:"onLimboCards",text:"ui_viewoverflow",fontType:"Content/Fonts/SFElectrotome.ttf",type:8,sound:["click_high"]},{name:"sellButton",anchor_x:0.5,anchor_y:0.5,pos_x:184,pos_y:150,size_x:180,size_y:100,font_size:38,action:"onSellCards",text:"ui_sell",fontType:"Content/Fonts/SFElectrotome.ttf",type:5,sound:["click_high"]}],buttons:[]}}};__ngs._fo={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.FullScreenWeaponCardDefinition={images:[{name:"logo",pos_x:-238,pos_y:-418,size_x:118.5,size_y:65,anchor_x:0.5,anchor_y:0.5,asset:"",depth:7,info:{asset1:"Content/Images8x/UI/card_frames/badge_autobot.png",asset2:"Content/Images8x/UI/card_frames/badge_decepticon.png"}},{name:"dismissIcon",pos_x:200,pos_y:437,anchor_x:0.5,anchor_y:0,size_x:46,size_y:46,depth:1001,asset:"Content/Images8x/UI/icon/icon_0_dismiss.png"},{name:"rarity",pos_x:240,pos_y:-426,size_x:137.5,size_y:70,anchor_x:0.5,anchor_y:0.5,asset:"",depth:3,info:{asset1:"Content/Images8x/UI/card_frames/card_rarity_1.png",asset2:"Content/Images8x/UI/card_frames/card_rarity_2.png",asset3:"Content/Images8x/UI/card_frames/card_rarity_3.png",asset4:"Content/Images8x/UI/card_frames/card_rarity_4.png"}},{name:"darkDrop",pos_x:0,pos_y:0,size_x:616.25,size_y:825,anchor_x:0.5,anchor_y:0.5,depth:1,asset:"Content/Images8x/misc/1pxblack.png"},{name:"waponPanelRight",pos_x:0,pos_y:250,size_x:300.5,size_y:328,anchor_x:0,anchor_y:0.5,flip_x:true,asset:"",depth:3,info:{asset1:"Content/Images8x/UI/card_frames/frame_weapon_autobot.png",asset2:"Content/Images8x/UI/card_frames/frame_weapon_decepticon.png"}},{name:"waponPanelLeft",pos_x:0,pos_y:250,size_x:300.5,size_y:328,anchor_x:1,anchor_y:0.5,asset:"",depth:3,info:{asset1:"Content/Images8x/UI/card_frames/frame_weapon_autobot.png",asset2:"Content/Images8x/UI/card_frames/frame_weapon_decepticon.png"}},{name:"specializationIcon",anchor_x:0,anchor_y:0.5,pos_x:-280,pos_y:-335,size_x:46,size_y:46,asset:"",depth:4,info:{asset1:"Content/Images8x/UI/icon/icon_0_atk_melee.png",asset2:"Content/Images8x/UI/icon/icon_0_atk_range.png",asset3:"Content/Images8x/UI/icon/icon_0_atk_special.png"}},{name:"classAIcon",anchor_x:0,anchor_y:0.5,pos_x:-80,pos_y:-335,size_x:46,size_y:46,asset:"Content/Images8x/UI/icon/icon_0_atk_melee.png",depth:4,info:{asset1:"Content/Images8x/UI/icon/icon_0_assault.png",asset2:"Content/Images8x/UI/icon/icon_0_command.png",asset3:"Content/Images8x/UI/icon/icon_0_infiltration.png",asset4:"Content/Images8x/UI/icon/icon_0_spec_ops.png"}},{name:"classBIcon",anchor_x:0,anchor_y:0.5,pos_x:108,pos_y:-335,size_x:46,size_y:46,asset:"Content/Images8x/UI/icon/icon_0_atk_range.png",depth:4,info:{asset1:"Content/Images8x/UI/icon/icon_0_assault.png",asset2:"Content/Images8x/UI/icon/icon_0_command.png",asset3:"Content/Images8x/UI/icon/icon_0_infiltration.png",asset4:"Content/Images8x/UI/icon/icon_0_spec_ops.png"}},{name:"eliteBannerImage",pos_x:-132,pos_y:-462,size_x:120,size_y:26,anchor_x:0,anchor_y:0,asset:"Content/Images8x/UI/card_frames/elite_badge.png",depth:3,visible:false},{name:"newBannerImage",pos_x:-200,pos_y:-250,size_x:250,size_y:250,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/card_frames/badge_new.png",depth:3,visible:false}],labels:[{name:"new",anchor_x:0.5,anchor_y:0.5,pos_x:-200,pos_y:-250,size_x:180,size_y:180,font_size:70,color:[255,255,255],depth:5,alpha:1,horizontalAlign:"center",visible:false,fontType:"Content/Fonts/SFElectrotome.ttf",text:"ui_new_uc"},{name:"LevelLabel",anchor_x:0.5,anchor_y:0.5,pos_x:-8,pos_y:162,size_x:180,size_y:100,font_size:24,color:[240,240,255],depth:4,alpha:1,horizontalAlign:"middle",fontType:"Content/Fonts/SFElectrotome.ttf",text:"ui_level_uc"},{name:"level",anchor_x:0.5,anchor_y:0.5,pos_x:31,pos_y:162,size_x:180,size_y:100,font_size:24,color:[240,240,255],depth:4,alpha:1,horizontalAlign:"middle",fontType:"Content/Fonts/SFElectrotome.ttf",text:""},{name:"SPECIALIZATION",anchor_x:0,anchor_y:0.5,pos_x:-228,pos_y:-350,size_x:380,size_y:96,font_size:22,color:[240,240,255],horizontalAlign:"left",verticalAlign:"middle",depth:3,fontType:"Content/Fonts/SFElectrotome.ttf",text:"ui_specialization_uc"},{name:"CLASSA",anchor_x:0,anchor_y:0.5,pos_x:-30,pos_y:-350,size_x:180,size_y:96,font_size:22,color:[240,240,255],horizontalAlign:"left",verticalAlign:"middle",depth:3,fontType:"Content/Fonts/SFElectrotome.ttf",text:"ui_classa_uc"},{name:"CLASSB",anchor_x:0,anchor_y:0.5,pos_x:160,pos_y:-350,size_x:180,size_y:96,font_size:22,color:[240,240,255],horizontalAlign:"left",verticalAlign:"middle",depth:3,fontType:"Content/Fonts/SFElectrotome.ttf",text:"ui_classb_uc"},{name:"SPECIALIZATIONNAME",anchor_x:0,anchor_y:0.5,pos_x:-228,pos_y:-324,size_x:380,size_y:96,font_size:30,color:[240,240,255],horizontalAlign:"left",verticalAlign:"middle",depth:3,fontType:"Content/Fonts/SFElectrotome.ttf",text:""},{name:"CLASSANAME",anchor_x:0,anchor_y:0.5,pos_x:-30,pos_y:-324,size_x:180,size_y:96,font_size:30,color:[240,240,255],horizontalAlign:"left",verticalAlign:"middle",depth:3,fontType:"Content/Fonts/SFElectrotome.ttf",text:""},{name:"CLASSBNAME",anchor_x:0,anchor_y:0.5,pos_x:160,pos_y:-324,size_x:180,size_y:96,font_size:30,color:[240,240,255],horizontalAlign:"left",verticalAlign:"middle",depth:3,fontType:"Content/Fonts/SFElectrotome.ttf",text:""},{name:"MELEE",anchor_x:0.5,anchor_y:0.5,pos_x:-195,pos_y:90,size_x:180,size_y:100,font_size:32,color:[240,240,255],depth:30,alpha:1,horizontalAlign:"middle",fontType:"Content/Fonts/TransformersMovie.ttf",text:"ui_attack_uc"},{name:"RANGE",anchor_x:0.5,anchor_y:0.5,pos_x:0,pos_y:70,size_x:180,size_y:100,font_size:32,color:[240,240,255],depth:30,alpha:1,horizontalAlign:"middle",fontType:"Content/Fonts/TransformersMovie.ttf",text:"ui_health_uc"},{name:"SPECIAL",anchor_x:0.5,anchor_y:0.5,pos_x:195,pos_y:90,size_x:180,size_y:100,font_size:32,color:[240,240,255],depth:30,alpha:1,horizontalAlign:"middle",fontType:"Content/Fonts/TransformersMovie.ttf",text:"ui_defense_uc"},{name:"stat2",anchor_x:0.5,anchor_y:0.5,pos_x:-195,pos_y:127,size_x:180,size_y:100,font_size:50,color:[250,250,255],depth:30,alpha:0.85,horizontalAlign:"middle",fontType:"Content/Fonts/TransformersMovie.ttf",text:""},{name:"stat1",anchor_x:0.5,anchor_y:0.5,pos_x:0,pos_y:107,size_x:180,size_y:100,font_size:50,color:[250,250,255],depth:30,alpha:0.85,horizontalAlign:"middle",fontType:"Content/Fonts/TransformersMovie.ttf",text:""},{name:"stat3",anchor_x:0.5,anchor_y:0.5,pos_x:195,pos_y:127,size_x:180,size_y:100,font_size:50,color:[250,250,255],depth:30,alpha:0.85,horizontalAlign:"middle",fontType:"Content/Fonts/TransformersMovie.ttf",text:""},{name:"skillA",anchor_x:0,anchor_y:0.5,pos_x:-270,pos_y:205,size_x:180,size_y:100,font_size:32,color:[240,240,255],depth:3,alpha:1,horizontalAlign:"left",fontType:"Content/Fonts/SFElectrotome.ttf",text:"ui_inbattle"},{name:"skillB",anchor_x:1,anchor_y:0.5,pos_x:270,pos_y:205,size_x:180,size_y:100,font_size:32,color:[240,240,255],depth:3,alpha:1,horizontalAlign:"right",fontType:"Content/Fonts/SFElectrotome.ttf",text:"ui_prebattle"},{name:"skillNameA",anchor_x:0,anchor_y:0.5,pos_x:-270,pos_y:255,size_x:250,size_y:100,font_size:46,color:[240,240,15],depth:3,alpha:1,horizontalAlign:"left",fontType:"Content/Fonts/SFElectrotome.ttf",overflowMode:"shrink",text:""},{name:"skillNameB",anchor_x:1,anchor_y:0.5,pos_x:260,pos_y:270,size_x:260,size_y:100,font_size:46,color:[240,240,15],depth:3,alpha:1,horizontalAlign:"right",verticalAlign:"top",fontType:"Content/Fonts/SFElectrotome.ttf",overflowMode:"shrink",text:""},{name:"skillDescriptionA",anchor_x:0,anchor_y:0.5,pos_x:-270,pos_y:345,size_x:250,size_y:200,font_size:32,color:[200,200,200],depth:3,alpha:1,horizontalAlign:"left",fontType:"Content/Fonts/text.otf",text:""},{name:"skillDescriptionB",anchor_x:1,anchor_y:0.5,pos_x:270,pos_y:345,size_x:250,size_y:200,font_size:32,color:[200,200,200],depth:3,alpha:1,horizontalAlign:"right",fontType:"Content/Fonts/text.otf",text:""},{name:"prefixLabel",anchor_x:0.5,anchor_y:0.5,pos_x:-72,pos_y:-446,size_x:120,size_y:50,font_size:20,color:[0,0,0],depth:4,horizontalAlign:"middle",fontType:"Content/Fonts/TransformersMovie.ttf",text:"",visible:false}],buttons:[{name:"card",pos_x:0,pos_y:-100,size_x:616.25,size_y:616.25,anchor_x:0.5,anchor_y:0.5,feedback:false,asset:"",depth:2,action:"onTap",sound:[""],info:{}},{name:"actionButton",visible:false,pos_x:-200,pos_y:200,size_x:100,size_y:100,anchor_x:0,anchor_y:0,action:"onActionSelected",info:{id:1}},{name:"closeButton",pos_x:200,pos_y:425,anchor_x:0.5,anchor_y:0,size_x:140,size_y:70,font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",asset:"Content/Images8x/UI/button/btn_card_blue2.png",depth:1000,action:"onDismiss",sound:["click_low"]}],groupDefinitions:{name:{labels:[{name:"transformersPrefixName",anchor_x:1,anchor_y:1,pos_x:-10,pos_y:-5,size_x:380,size_y:90,font_size:30,color:[250,250,255],horizontalAlign:"right",verticalAlign:"bottom",depth:3,fontType:"Content/Fonts/SFElectrotome.ttf",text:""},{name:"transformersName",anchor_x:0.5,anchor_y:1,pos_x:0,pos_y:4,size_x:325,size_y:50,font_size:34,color:[240,240,255],horizontalAlign:"center",verticalAlign:"middle",depth:3,fontType:"Content/Fonts/SFElectrotome.ttf",text:""}]},nontransformFrame:{images:[{name:"frame",pos_x:0,pos_y:0,size_x:640,size_y:888,anchor_x:0,anchor_y:0,asset:"Content/Images8x/UI/card_frames/frame_nontransform.png"}]}},groups:[{name:"name",groupDefinition:"name",pos_x:0,pos_y:-400,depth:3},{name:"nontransformFrame",groupDefinition:"nontransformFrame",pos_x:-320,pos_y:-460,depth:2}],progressBar:[{name:"expBar",pos_x:0,pos_y:192,size_x:152,size_y:30,anchor_x:0.5,anchor_y:0.5,depth:4,emptyImage:"Content/Images8x/UI/bar/progressbar_empty.png",fillImage:"Content/Images8x/UI/bar/progressbar_fill.png",glowImage:"Content/Images8x/UI/bar/progressbar_glow.png"}]}}};__ngs._fp={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.BossFightViewDefinition={groups:[{name:"bossBlock",groupDefinition:"bossBlock",pos_x:320,pos_y:300,info:{card_w:240,card_h:360}},{name:"playerBlock",groupDefinition:"playerBlock",pos_x:120,pos_y:730,info:{card_w:150,card_h:225}}],groupDefinitions:{bossBlock:{},playerBlock:{}},images:[{name:"background",pos_x:0,pos_y:0,size_x:640,size_y:960,anchor_x:0,anchor_y:0,depth:-10000,alpha:0.3,asset:"Content/Images8x/UI/BG/bg_mission_map_02.jpg"}],progressBar:[{name:"opponentHPBar",pos_x:960,pos_y:80,anchor_x:0.5,anchor_y:0,emptyImage:"Content/Images8x/misc/1pxwhite.png",fillImage:"Content/Images8x/misc/1pxwhite.png",size_x:620,size_y:30,value:100,middleImage:"Content/Images8x/misc/1pxwhite.png"},{name:"playerHPBar",pos_x:-320,pos_y:900,anchor_x:0.5,anchor_y:0,emptyImage:"Content/Images8x/misc/1pxwhite.png",fillImage:"Content/Images8x/misc/1pxwhite.png",size_x:620,size_y:30,value:100,middleImage:"Content/Images8x/misc/1pxwhite.png"}],labels:[{name:"opponentName",pos_x:20,pos_y:20,size_x:400,size_y:60,font_size:45,anchor_x:0,anchor_y:0,horizontalAlign:"left",depth:3,fontType:"Content/Fonts/SFElectrotome.ttf",visible:false,text:"",colorType:"playerName"},{name:"playerName",pos_x:620,pos_y:890,size_x:400,size_y:60,font_size:45,horizontalAlign:"right",anchor_x:1,anchor_y:1,text:"",visible:false,depth:3,fontType:"Content/Fonts/SFElectrotome.ttf",colorType:"playerName"}],buttons:[],tfbuttons:[{name:"fightButton",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:520,size_x:320,size_y:80,fontType:"Content/Fonts/SFElectrotome.ttf",font_size:46,text:"ui_fight_uc",action:"onFightButton",sound:["click_high"]}],lists:[]}}};__ngs._fq={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.FullScreenMissionDefinition={images:[],labels:[{name:"message",anchor_x:0.5,anchor_y:0.5,pos_x:0,pos_y:0,size_x:560,size_y:100,font_size:36,color:[240,240,255],depth:3,alpha:0.6,horizontalAlign:"center",fontType:"Content/Fonts/SFElectrotome.ttf",text:""}],buttons:[{name:"textfield",pos_x:0,pos_y:0,size_x:640,size_y:320,anchor_x:0.5,anchor_y:0.5,feedback:false,asset:"",action:"onOk",info:{}},{name:"card",pos_x:0,pos_y:320,size_x:640,size_y:320,anchor_x:0.5,anchor_y:0.5,feedback:false,asset:"",action:"onOk",info:{}}],}}};__ngs._fr={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.LevelUpDefinition={groupDefinitions:{frame1:{images:[{name:"fancy_prompt_topleft",anchor_x:0,anchor_y:0,pos_x:-320,pos_y:-480,size_x:320,size_y:320,asset:"Content/Images8x/UI/Prompt/fancy_top.png"},{name:"fancy_prompt_topright",anchor_x:1,anchor_y:0,pos_x:320,pos_y:-480,size_x:320,size_y:320,flip_x:"true",asset:"Content/Images8x/UI/Prompt/fancy_top.png"},{name:"fancy_prompt_midleft",anchor_x:0.5,anchor_y:0.5,pos_x:-160,pos_y:0,size_x:320,size_y:320,asset:"Content/Images8x/UI/Prompt/fancy_mid.png"},{name:"fancy_prompt_midright",anchor_x:0.5,anchor_y:0.5,pos_x:160,pos_y:0,size_x:320,size_y:320,flip_x:"true",asset:"Content/Images8x/UI/Prompt/fancy_mid.png"},{name:"fancy_prompt_bottomleft",anchor_x:0,anchor_y:1,pos_x:-320,pos_y:480,size_x:320,size_y:320,asset:"Content/Images8x/UI/Prompt/fancy_bottom.png"},{name:"fancy_prompt_bottomright",anchor_x:1,anchor_y:1,pos_x:320,pos_y:480,size_x:320,size_y:320,flip_x:"true",asset:"Content/Images8x/UI/Prompt/fancy_bottom.png"}]},levelUpLabelGrp:{labels:[{name:"levelUpLabel2",text:"ui_level_uc",horizontalAlign:"center",verticalAlign:"center",fontType:"Content/Fonts/SFElectrotome.ttf",pos_x:0,pos_y:0,size_x:242,size_y:200,font_size:108,color:[240,240,255],depth:3}]},oldLevelLabelGrp:{labels:[{name:"oldLevelLabel2",text:"",horizontalAlign:"center",verticalAlign:"center",fontType:"Content/Fonts/TransformersMovie.ttf",pos_x:0,pos_y:-0,font_size:140,size_x:250,size_y:140,color:[255,255,0],depth:3,anchor_x:0.5,anchor_y:0.5}]},newLevelLabelGrp:{labels:[{name:"newLevelLabel2",text:"",horizontalAlign:"center",verticalAlign:"center",fontType:"Content/Fonts/TransformersMovie.ttf",pos_x:0,pos_y:-0,font_size:140,size_x:250,size_y:140,color:[255,255,0],depth:3,anchor_x:0.5,anchor_y:0.5}]}},groups:[{name:"frame",groupDefinition:"frame1",pos_x:320,pos_y:480,anchor_x:0.5,anchor_y:0.5,depth:2,alpha:0.3},{name:"levelUpLabel",groupDefinition:"levelUpLabelGrp",pos_x:320,pos_y:480,depth:2,alpha:0.1},{name:"oldLevelLabel",groupDefinition:"oldLevelLabelGrp",pos_x:320,pos_y:480,depth:2,alpha:0.1},{name:"newLevelLabel",groupDefinition:"newLevelLabelGrp",pos_x:320,pos_y:480,depth:2,alpha:0.1}],images:[{name:"flare1",pos_x:-210,pos_y:50,size_x:256,size_y:256,depth:100,asset:"Content/Images8x/UI/Overlay/fx_flare_a.png"},{name:"flare2",pos_x:-200,pos_y:140,size_x:256,size_y:126,depth:101,asset:"Content/Images8x/UI/Overlay/fx_flare_b.png"},{name:"flare3",pos_x:-175,pos_y:140,size_x:43,size_y:64,depth:100,asset:"Content/Images8x/UI/Overlay/fx_flare_c.png"},{name:"flare4",pos_x:-150,pos_y:140,size_x:128,size_y:128,depth:100,asset:"Content/Images8x/UI/Overlay/fx_flare_d.png"},{name:"flare5",pos_x:-150,pos_y:140,size_x:128,size_y:128,depth:100,asset:"Content/Images8x/UI/Overlay/fx_flare_d.png"},{name:"glow1",pos_x:-150,pos_y:140,size_x:40,size_y:40,depth:1,asset:"Content/Images8x/UI/Prompt/fancy_glow.png"},{name:"glow2",pos_x:-150,pos_y:140,size_x:40,size_y:40,depth:1,asset:"Content/Images8x/UI/Prompt/fancy_glow.png"},{name:"glow3",pos_x:-150,pos_y:140,size_x:40,size_y:40,depth:1,asset:"Content/Images8x/UI/Prompt/fancy_glow.png"},{name:"glow4",pos_x:-150,pos_y:140,size_x:40,size_y:40,depth:1,asset:"Content/Images8x/UI/Prompt/fancy_glow.png"},{name:"overlay",pos_x:0,pos_y:-100,size_x:1100,size_y:1100,depth:0,asset:"Content/Images8x/misc/1pxwhite.png",alpha:0.3,color:[0,0,0]},{name:"blackTop",pos_x:0,pos_y:-200,size_x:1000,size_y:200,anchor_x:0,anchor_y:0,depth:200,asset:"Content/Images8x/misc/1pxwhite.png",alpha:1,color:[0,0,0]},{name:"blackL",pos_x:0,pos_y:-100,size_x:60,size_y:1100,anchor_x:0,anchor_y:0,depth:0,asset:"Content/Images8x/misc/1pxwhite.png",alpha:1,color:[0,0,0]},{name:"blackR",pos_x:640,pos_y:-100,size_x:60,size_y:1100,anchor_x:1,anchor_y:0,depth:0,asset:"Content/Images8x/misc/1pxwhite.png",alpha:1,color:[0,0,0]},{name:"bar",pos_x:-210,pos_y:50,size_x:32,size_y:32,depth:10,asset:"Content/Images8x/UI/bar/fullscr_progressbar.png",anchor_x:0,anchor_y:0},{name:"barHead",pos_x:-150,pos_y:255,size_x:116,size_y:66,depth:20,asset:"Content/Images8x/UI/Overlay/fx_glow_head.png"}],labels:[],tfbuttons:[]}}};__ngs._fs={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.MissionCompleteDefinition={groupDefinitions:{frame1:{images:[{name:"fancy_prompt_topleft",anchor_x:0,anchor_y:0,pos_x:-320,pos_y:-480,size_x:320,size_y:320,asset:"Content/Images8x/UI/Prompt/fancy_top.png"},{name:"fancy_prompt_topright",anchor_x:1,anchor_y:0,pos_x:320,pos_y:-480,size_x:320,size_y:320,flip_x:"true",asset:"Content/Images8x/UI/Prompt/fancy_top.png"},{name:"fancy_prompt_midleft",anchor_x:0.5,anchor_y:0.5,pos_x:-160,pos_y:0,size_x:320,size_y:320,asset:"Content/Images8x/UI/Prompt/fancy_mid.png"},{name:"fancy_prompt_midright",anchor_x:0.5,anchor_y:0.5,pos_x:160,pos_y:0,size_x:320,size_y:320,flip_x:"true",asset:"Content/Images8x/UI/Prompt/fancy_mid.png"},{name:"fancy_prompt_bottomleft",anchor_x:0,anchor_y:1,pos_x:-320,pos_y:480,size_x:320,size_y:320,asset:"Content/Images8x/UI/Prompt/fancy_bottom.png"},{name:"fancy_prompt_bottomright",anchor_x:1,anchor_y:1,pos_x:320,pos_y:480,size_x:320,size_y:320,flip_x:"true",asset:"Content/Images8x/UI/Prompt/fancy_bottom.png"}]},missionCompleteLabelTop:{labels:[{name:"missionCompleteLabelTop2",text:"ui_mission_uc",horizontalAlign:"center",verticalAlign:"center",fontType:"Content/Fonts/TransformersMovie.ttf",size_x:400,size_y:160,pos_x:0,pos_y:0,font_size:100,color:[240,240,255]}]},missionCompleteLabelBottom:{labels:[{name:"missionCompleteLabelBottom2",text:"ui_complete_uc",horizontalAlign:"center",verticalAlign:"center",fontType:"Content/Fonts/TransformersMovie.ttf",size_x:400,size_y:134,pos_x:0,pos_y:0,font_size:74,color:[255,255,0]}]},},groups:[{name:"frame",groupDefinition:"frame1",pos_x:320,pos_y:480,anchor_x:0.5,anchor_y:0.5,depth:2,alpha:0.3},{name:"missionCompleteLabelTop",groupDefinition:"missionCompleteLabelTop",pos_x:320,pos_y:480,depth:10,alpha:0.1},{name:"missionCompleteLabelBottom",groupDefinition:"missionCompleteLabelBottom",pos_x:320,pos_y:480,depth:10,alpha:0.1},],images:[{name:"flare1",pos_x:-210,pos_y:50,size_x:256,size_y:256,depth:100,asset:"Content/Images8x/UI/Overlay/fx_flare_a.png"},{name:"flare2",pos_x:-200,pos_y:140,size_x:256,size_y:126,depth:101,asset:"Content/Images8x/UI/Overlay/fx_flare_b.png"},{name:"flare3",pos_x:-175,pos_y:140,size_x:43,size_y:64,depth:100,asset:"Content/Images8x/UI/Overlay/fx_flare_c.png"},{name:"flare4",pos_x:-150,pos_y:140,size_x:128,size_y:128,depth:100,asset:"Content/Images8x/UI/Overlay/fx_flare_d.png"},{name:"flare5",pos_x:-150,pos_y:140,size_x:128,size_y:128,depth:100,asset:"Content/Images8x/UI/Overlay/fx_flare_d.png"},{name:"glow1",pos_x:-150,pos_y:140,size_x:40,size_y:40,depth:1,asset:"Content/Images8x/UI/Prompt/fancy_glow.png"},{name:"glow2",pos_x:-150,pos_y:140,size_x:40,size_y:40,depth:1,asset:"Content/Images8x/UI/Prompt/fancy_glow.png"},{name:"glow3",pos_x:-150,pos_y:140,size_x:40,size_y:40,depth:1,asset:"Content/Images8x/UI/Prompt/fancy_glow.png"},{name:"glow4",pos_x:-150,pos_y:140,size_x:40,size_y:40,depth:1,asset:"Content/Images8x/UI/Prompt/fancy_glow.png"},{name:"blackTop",pos_x:0,pos_y:-200,size_x:1000,size_y:200,anchor_x:0,anchor_y:0,depth:200,asset:"Content/Images8x/misc/1pxwhite.png",alpha:1,color:[0,0,0]},{name:"blackL",pos_x:0,pos_y:-100,size_x:60,size_y:1100,anchor_x:0,anchor_y:0,depth:0,asset:"Content/Images8x/misc/1pxwhite.png",alpha:1,color:[0,0,0]},{name:"blackR",pos_x:640,pos_y:-100,size_x:60,size_y:1100,anchor_x:1,anchor_y:0,depth:0,asset:"Content/Images8x/misc/1pxwhite.png",alpha:1,color:[0,0,0]},{name:"bar",pos_x:-210,pos_y:50,size_x:32,size_y:32,depth:10,asset:"Content/Images8x/UI/bar/fullscr_progressbar_b.png",anchor_x:0,anchor_y:0},{name:"barHead",pos_x:-150,pos_y:255,size_x:116,size_y:66,depth:20,asset:"Content/Images8x/UI/Overlay/fx_glow_head.png"}]}}};__ngs._ft={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.LuckyChanceViewDefinition={images:[{name:"backgroundImage",pos_x:0,pos_y:0,size_x:640,size_y:960,asset:"Content/Images8x/UI/BG/bg_deck.jpg"}],labels:[{name:"titleLabel",pos_x:320,pos_y:100,anchor_x:0.5,anchor_y:0.5,size_x:600,size_y:100,text:"ui_combatcachediscovered_uc",font_size:44,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255]},{name:"pickCardLabel",pos_x:320,pos_y:140,anchor_x:0.5,anchor_y:0.5,size_x:400,size_y:100,text:"ui_choosereward",font_size:24,fontType:"Content/Fonts/text.otf",color:[255,255,255]}],groups:[{name:"card1",groupDefinition:"card1",pos_x:120,pos_y:320,info:{card_w:150,card_h:210}},{name:"card2",groupDefinition:"card2",pos_x:320,pos_y:320,info:{card_w:150,card_h:210}},{name:"card3",groupDefinition:"card2",pos_x:520,pos_y:320,info:{card_w:150,card_h:210}},{name:"card4",groupDefinition:"card2",pos_x:200,pos_y:640,info:{card_w:150,card_h:210}},{name:"card5",groupDefinition:"card5",pos_x:400,pos_y:640,info:{card_w:150,card_h:210}}],groupDefinitions:{card1:{},card2:{},card3:{},card4:{},card5:{}},tfbuttons:[{name:"shuffleButton",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:830,size_x:444,size_y:100,fontType:"Content/Fonts/SFElectrotome.ttf",font_size:45,visible:false,text:"ui_shuffle_uc",action:"shuffle",type:3,depth:4}],progressBar:[],lists:[]}}};__ngs._fu={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.EventBossPopUpDefinition={images:[{name:"regpaneltopImage",anchor_x:0.5,anchor_y:0.5,pos_x:-160,pos_y:-15,size_x:320,size_y:245,asset:"Content/Images8x/UI/Prompt/reg_panel_top.png"},{name:"regpanelbottomImage",anchor_x:0.5,anchor_y:0.5,pos_x:-160,pos_y:199,size_x:320,size_y:183,asset:"Content/Images8x/UI/Prompt/reg_panel_bottom.png"},{name:"regpaneltopImage2",anchor_x:0.5,anchor_y:0.5,pos_x:160,pos_y:-15,size_x:320,size_y:245,asset:"Content/Images8x/UI/Prompt/reg_panel_top.png",flip_x:true},{name:"regpanelbottomImage2",anchor_x:0.5,anchor_y:0.5,pos_x:160,pos_y:199,size_x:320,size_y:183,asset:"Content/Images8x/UI/Prompt/reg_panel_bottom.png",flip_x:true},{name:"bossImageLeft",anchor_x:0.5,anchor_y:0.5,pos_x:-160,pos_y:-265,size_x:320,size_y:400,asset:"Content/Images8x/event_raidboss/prompt_header_raidboss_01_.png"},{name:"bossImageRight",anchor_x:0.5,anchor_y:0.5,pos_x:160,pos_y:-265,size_x:320,size_y:400,asset:"Content/Images8x/event_raidboss/prompt_header_raidboss_01_.png",flip_x:true},{name:"bgColor",anchor_x:0.5,anchor_y:0.5,pos_x:0,pos_y:0,size_x:650,size_y:970,asset:"Content/Images8x/misc2/1pxwhite.png",color:[255,129,5],alpha:0.4,depth:-5}],labels:[{name:"Title",anchor_x:0.5,anchor_y:0.5,pos_x:0,pos_y:-40,size_x:500,size_y:120,font_size:46,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:""},{name:"Title2",anchor_x:0.5,anchor_y:0.5,pos_x:0,pos_y:14,size_x:500,size_y:170,font_size:64,fontType:"Content/Fonts/TransformersMovie.ttf",color:[245,255,0],text:""},{name:"Text",anchor_x:0.5,anchor_y:0,pos_x:0,pos_y:80,size_x:540,size_y:280,horizontalAlign:"middle",verticalAlign:"top",font_size:28,fontType:"Content/Fonts/text.otf",color:[183,226,240],text:"ui_cost"}],tfbuttons:[{name:"cancelButton",anchor_x:0.5,anchor_y:0.5,pos_x:-150,pos_y:285,size_x:280,size_y:110,font_size:46,action:"onDismiss",text:"ui_cancel",fontType:"Content/Fonts/SFElectrotome.ttf",info:{alt_pos_x:0,alt_size_x:230,buttontype:"cancel"},type:8},{name:"okButton",anchor_x:0.5,anchor_y:0.5,pos_x:150,pos_y:285,size_x:280,size_y:110,font_size:46,action:"onOk",text:"ui_confirm",fontType:"Content/Fonts/SFElectrotome.ttf",type:5}]}}};__ngs._fv={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.FusionRewardDefinition={images:[{name:"level_up_overlay",pos_x:-320,pos_y:173,size_x:320,size_y:256,anchor_x:0,anchor_y:0,depth:1,asset:"Content/Images8x/UI/Overlay/level_up_overlay.png"},{name:"level_up_overlay",pos_x:0,pos_y:173,size_x:320,size_y:256,anchor_x:0,anchor_y:0,depth:1,flip_x:"true",asset:"Content/Images8x/UI/Overlay/level_up_overlay.png"},{name:"ui_leveluptxtoverlay",pos_x:-140,pos_y:233,size_x:140,size_y:26,anchor_x:0,anchor_y:0,depth:1,asset:"Content/Images8x/UI/Overlay/level_up_text_overlay.png"},{name:"ui_leveluptxtoverlay",pos_x:0,pos_y:233,size_x:140,size_y:26,anchor_x:0,anchor_y:0,depth:1,flip_x:"true",asset:"Content/Images8x/UI/Overlay/level_up_text_overlay.png"}],labels:[{name:"levelUp",anchor_x:0.5,anchor_y:0.5,horizontalAlign:"center",pos_x:0,pos_y:300,visible:false,size_x:400,size_y:100,font_size:68,fontType:"Content/Fonts/SFElectrotome.ttf",color:[235,256,200],depth:3,text:"ui_levelup_uc",dropShadowVisible:true,dropShadowPosition:[3,3],dropShadowColor:[0,0,0]}],progressBar:[{name:"levelBar",pos_x:0,pos_y:300,size_x:510,size_y:9,depth:2,anchor_x:0,anchor_y:0,emptyImage:"Content/Images8x/misc/1pxclear.png",fillImage:"Content/Images8x/misc/1pxlightblue.png",glowImage:"Content/Images8x/UI/bar/progressbar_glow.png"}]}}};__ngs._fw={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.FusionRewardCardDefinition={images:[{name:"level_up_overlay",pos_x:-320,pos_y:90,size_x:320,size_y:256,anchor_x:0,anchor_y:0,depth:1,asset:"Content/Images8x/UI/Overlay/level_up_overlay.png"},{name:"level_up_overlay_2",pos_x:0,pos_y:90,size_x:320,size_y:256,anchor_x:0,anchor_y:0,depth:1,flip_x:"true",asset:"Content/Images8x/UI/Overlay/level_up_overlay.png"},{name:"blackBG",pos_x:0,pos_y:213,size_x:640,size_y:400,anchor_x:0.5,anchor_y:0,depth:0.5,asset:"Content/Images8x/misc/1pxblack.png",visible:false},{name:"levelArrow",pos_x:-88,pos_y:192,size_x:15,size_y:20,anchor_x:0.5,anchor_y:0.5,depth:1,asset:"Content/Images8x/UI/icon/yellow_arrow.png"},{name:"attackArrow",pos_x:-195,pos_y:355,size_x:15,size_y:20,anchor_x:0.5,anchor_y:0.5,depth:1,asset:"Content/Images8x/UI/icon/yellow_arrow.png",rotation:-90},{name:"healthArrow",pos_x:0,pos_y:355,size_x:15,size_y:20,anchor_x:0.5,anchor_y:0.5,depth:1,asset:"Content/Images8x/UI/icon/yellow_arrow.png",rotation:-90},{name:"defenseArrow",pos_x:195,pos_y:355,size_x:15,size_y:20,anchor_x:0.5,anchor_y:0.5,depth:1,asset:"Content/Images8x/UI/icon/yellow_arrow.png",rotation:-90}],progressBar:[{name:"levelBar",pos_x:0,pos_y:217,size_x:510,size_y:9,depth:2,anchor_x:0,anchor_y:0,emptyImage:"Content/Images8x/misc/1pxclear.png",fillImage:"Content/Images8x/misc/1pxlightblue.png",glowImage:"Content/Images8x/UI/bar/progressbar_glow.png"}],labels:[{name:"xpIncr",anchor_x:0.5,anchor_y:0.5,pos_x:0,pos_y:240,size_x:400,size_y:50,font_size:32,color:[255,255,255],depth:10,alpha:1,horizontalAlign:"center",fontType:"Content/Fonts/SFElectrotome.ttf",text:"",dropShadowVisible:true,visible:true},{name:"oldLevel",anchor_x:1,anchor_y:0.5,pos_x:-110,pos_y:190,size_x:250,size_y:100,font_size:42,color:[255,255,255],depth:3,alpha:1,horizontalAlign:"right",visible:true,fontType:"Content/Fonts/SFElectrotome.ttf",text:"",dropShadowVisible:true},{name:"newLevel",anchor_x:0,anchor_y:0.5,pos_x:-75,pos_y:190,size_x:250,size_y:100,font_size:42,color:[234,255,0],depth:3,alpha:1,horizontalAlign:"left",visible:true,fontType:"Content/Fonts/SFElectrotome.ttf",text:"",dropShadowVisible:true},{name:"transformerMaxLevel",anchor_x:0.5,anchor_y:0.5,pos_x:100,pos_y:190,size_x:300,size_y:100,font_size:24,color:[240,240,255],depth:3,horizontalAlign:"right",fontType:"Content/Fonts/SFElectrotome.ttf",text:"",visible:true,dropShadowVisible:true},{name:"newStat2",anchor_x:0.5,anchor_y:0.5,pos_x:-195,pos_y:325,size_x:180,size_y:200,font_size:56,color:[234,255,0],depth:3,alpha:1,visible:true,fontType:"Content/Fonts/TransformersMovie.ttf",text:"",dropShadowVisible:true},{name:"newStat1",anchor_x:0.5,anchor_y:0.5,pos_x:0,pos_y:325,size_x:180,size_y:200,font_size:56,color:[234,255,0],depth:3,alpha:1,visible:true,fontType:"Content/Fonts/TransformersMovie.ttf",text:"",dropShadowVisible:true},{name:"newStat3",anchor_x:0.5,anchor_y:0.5,pos_x:195,pos_y:325,size_x:180,size_y:200,font_size:56,color:[234,255,0],depth:3,alpha:1,visible:true,fontType:"Content/Fonts/TransformersMovie.ttf",text:"",dropShadowVisible:true}]}}};__ngs._fx={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.FusionRewardWeaponCardDefinition={images:[{name:"level_up_overlay",pos_x:-320,pos_y:-111,size_x:320,size_y:256,anchor_x:0,anchor_y:0,depth:3,asset:"Content/Images8x/UI/Overlay/level_up_overlay.png"},{name:"level_up_overlay_2",pos_x:0,pos_y:-111,size_x:320,size_y:256,anchor_x:0,anchor_y:0,depth:3,flip_x:"true",asset:"Content/Images8x/UI/Overlay/level_up_overlay.png"},{name:"levelArrow",pos_x:-88,pos_y:-20,size_x:15,size_y:20,anchor_x:0.5,anchor_y:0.5,depth:3,asset:"Content/Images8x/UI/icon/yellow_arrow.png"}],labels:[{name:"xpIncr",anchor_x:0.5,anchor_y:0.5,pos_x:0,pos_y:100,size_x:400,size_y:50,font_size:40,color:[255,255,255],depth:5,alpha:1,horizontalAlign:"center",visible:false,fontType:"Content/Fonts/SFElectrotome.ttf",text:""},{name:"oldLevel",anchor_x:1,anchor_y:0.5,pos_x:-110,pos_y:-20,size_x:250,size_y:100,font_size:48,color:[255,255,255],depth:3,alpha:1,horizontalAlign:"right",visible:true,fontType:"Content/Fonts/SFElectrotome.ttf",text:""},{name:"newLevel",anchor_x:0,anchor_y:0.5,pos_x:-75,pos_y:-20,size_x:250,size_y:100,font_size:48,color:[245,255,0],depth:3,alpha:1,horizontalAlign:"left",visible:true,fontType:"Content/Fonts/SFElectrotome.ttf",text:""},{name:"transformerMaxLevel",anchor_x:1,anchor_y:0.5,pos_x:250,pos_y:-10,size_x:300,size_y:75,font_size:24,color:[240,240,255],depth:3,horizontalAlign:"right",fontType:"Content/Fonts/SFElectrotome.ttf",text:"",visible:true},{name:"newStat2",anchor_x:0.5,anchor_y:0.5,pos_x:-195,pos_y:110,size_x:180,size_y:200,font_size:48,color:[245,255,0],depth:3,alpha:1,horizontalAlign:"center",visible:true,fontType:"Content/Fonts/TransformersMovie.ttf",text:""},{name:"newStat1",anchor_x:0.5,anchor_y:0.5,pos_x:0,pos_y:90,size_x:180,size_y:200,font_size:48,color:[245,255,0],depth:3,alpha:1,horizontalAlign:"center",visible:true,fontType:"Content/Fonts/TransformersMovie.ttf",text:""},{name:"newStat3",anchor_x:0.5,anchor_y:0.5,pos_x:195,pos_y:110,size_x:180,size_y:200,font_size:48,color:[245,255,0],depth:3,alpha:1,horizontalAlign:"center",visible:true,fontType:"Content/Fonts/TransformersMovie.ttf",text:""}],progressBar:[{name:"levelBar",pos_x:0,pos_y:15,emptyImage:"Content/Images8x/UI/bar/progressbar_empty.png",fillImage:"Content/Images8x/UI/bar/progressbar_fill.png",glowImage:"Content/Images8x/UI/bar/progressbar_glow.png",size_x:510,size_y:9,depth:4,value:60,visible:true}]}}};__ngs._fy={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.BattleViewDefinition={images:[{name:"background",pos_x:-64,pos_y:-50,size_x:720,size_y:1136,depth:-10000,alpha:0.2,asset:"Content/Images8x/UI/BG/location_bg_03.jpg"},{name:"topBg",pos_x:320,pos_y:180,size_x:768,size_y:768,anchor_x:0.5,anchor_y:0.5,depth:10001,asset:"Content/Images8x/UI/12_battle/battle_gate.png"},{name:"botBg",pos_x:320,pos_y:870,anchor_x:0.5,anchor_y:0.5,size_x:768,size_y:768,depth:10000,asset:"Content/Images8x/UI/12_battle/battle_gate.png"},{name:"stat1PlayerMain",anchor_x:0.5,anchor_y:0.5,pos_x:-500,pos_y:745,size_x:110,size_y:143,depth:100,asset:"Content/Images8x/misc/1pxclear.png"},{name:"stat1PlayerLeft",anchor_x:0.5,anchor_y:0.5,pos_x:-500,pos_y:610,size_x:70,size_y:91,depth:10,asset:"Content/Images8x/misc/1pxclear.png"},{name:"stat1PlayerRight",anchor_x:0.5,anchor_y:0.5,pos_x:-500,pos_y:610,size_x:70,size_y:91,depth:10,asset:"Content/Images8x/misc/1pxclear.png"},{name:"stat2PlayerMain",anchor_x:0.5,anchor_y:0.5,pos_x:-500,pos_y:745,size_x:110,size_y:143,depth:100,asset:"Content/Images8x/misc/1pxclear.png"},{name:"stat2PlayerLeft",anchor_x:0.5,anchor_y:0.5,pos_x:-500,pos_y:610,size_x:70,size_y:91,depth:10,asset:"Content/Images8x/misc/1pxclear.png"},{name:"stat2PlayerRight",anchor_x:0.5,anchor_y:0.5,pos_x:-500,pos_y:610,size_x:70,size_y:91,depth:10,asset:"Content/Images8x/misc/1pxclear.png"},{name:"stat3PlayerMain",anchor_x:0.5,anchor_y:0.5,pos_x:-500,pos_y:745,size_x:110,size_y:143,depth:100,asset:"Content/Images8x/misc/1pxclear.png"},{name:"stat3PlayerLeft",anchor_x:0.5,anchor_y:0.5,pos_x:-500,pos_y:610,size_x:70,size_y:91,depth:10,asset:"Content/Images8x/misc/1pxclear.png"},{name:"stat3PlayerRight",anchor_x:0.5,anchor_y:0.5,pos_x:-500,pos_y:610,size_x:70,size_y:91,depth:10,asset:"Content/Images8x/misc/1pxclear.png"},{name:"stat1OpponentMain",anchor_x:0.5,anchor_y:0.5,pos_x:1200,pos_y:200,size_x:110,size_y:143,depth:-100,asset:"Content/Images8x/misc/1pxclear.png"},{name:"stat1OpponentLeft",anchor_x:0.5,anchor_y:0.5,pos_x:1200,pos_y:335,size_x:70,size_y:91,depth:-10,asset:"Content/Images8x/misc/1pxclear.png"},{name:"stat1OpponentRight",anchor_x:0.5,anchor_y:0.5,pos_x:1200,pos_y:335,size_x:70,size_y:91,depth:-10,asset:"Content/Images8x/misc/1pxclear.png"},{name:"stat2OpponentMain",anchor_x:0.5,anchor_y:0.5,pos_x:1200,pos_y:200,size_x:110,size_y:143,depth:-100,asset:"Content/Images8x/misc/1pxclear.png"},{name:"stat2OpponentLeft",anchor_x:0.5,anchor_y:0.5,pos_x:1200,pos_y:335,size_x:70,size_y:91,depth:-10,asset:"Content/Images8x/misc/1pxclear.png"},{name:"stat2OpponentRight",anchor_x:0.5,anchor_y:0.5,pos_x:1200,pos_y:335,size_x:70,size_y:91,depth:-10,asset:"Content/Images8x/misc/1pxclear.png"},{name:"stat3OpponentMain",anchor_x:0.5,anchor_y:0.5,pos_x:1200,pos_y:200,size_x:110,size_y:143,depth:-100,asset:"Content/Images8x/misc/1pxclear.png"},{name:"stat3OpponentLeft",anchor_x:0.5,anchor_y:0.5,pos_x:1200,pos_y:335,size_x:70,size_y:91,depth:-10,asset:"Content/Images8x/misc/1pxclear.png"},{name:"stat3OpponentRight",anchor_x:0.5,anchor_y:0.5,pos_x:1200,pos_y:335,size_x:70,size_y:91,depth:-10,asset:"Content/Images8x/misc/1pxclear.png"},{name:"abilityIcon",anchor_x:0.5,anchor_y:0.5,pos_x:-540,pos_y:480,size_x:128,size_y:128,depth:-10,asset:"Content/Images8x/UI/icon/icon_0_convergence.png"}],labels:[{name:"abilityDescription",pos_x:-412,pos_y:480,size_x:400,size_y:128,font_size:70,anchor_x:0,anchor_y:0.5,horizontalAlign:"left",depth:3,fontType:"Content/Fonts/SFElectrotome.ttf",visible:true,text:"ui_specialattack_uc"},{name:"specialAttackDescription",pos_x:94,pos_y:480,size_x:400,size_y:128,font_size:45,anchor_x:0,anchor_y:0.5,horizontalAlign:"left",dropShadowVisible:true,dropShadowPosition:[2,2],dropShadowColor:[0,0,0],depth:3,fontType:"Content/Fonts/SFElectrotome.ttf",visible:false,text:"ui_ability_uc"},{name:"opponentName",pos_x:660,pos_y:25,size_x:400,size_y:60,font_size:34,anchor_x:0,anchor_y:0,horizontalAlign:"left",depth:3,fontType:"Content/Fonts/SFElectrotome.ttf",color:[170,224,255],visible:false,text:"",colorType:"playerName"},{name:"playerName",pos_x:-20,pos_y:895,size_x:400,size_y:60,font_size:34,anchor_x:1,anchor_y:1,horizontalAlign:"right",depth:3,fontType:"Content/Fonts/SFElectrotome.ttf",color:[170,224,255],visible:false,text:"",colorType:"playerName"},{name:"staticTransformingText",pos_x:-250,pos_y:455,size_x:500,size_y:80,font_size:50,horizontalAlign:"center",anchor_x:0.5,anchor_y:0.5,text:"ui_transforming_uc",color:[250,250,255],depth:3,fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"staticBonusText",pos_x:890,pos_y:500,size_x:500,size_y:80,font_size:50,horizontalAlign:"center",anchor_x:0.5,anchor_y:0.5,text:"ui_bonus_uc",color:[250,250,255],depth:3,fontType:"Content/Fonts/SFElectrotome.ttf"}],buttons:[],progressBar:[{name:"opponentHPBar",pos_x:960,pos_y:80,anchor_x:0.5,anchor_y:0,emptyImage:"Content/Images8x/misc/1pxwhite.png",fillImage:"Content/Images8x/misc/1pxwhite.png",size_x:620,size_y:18,value:100,middleImage:"Content/Images8x/misc/1pxwhite.png",visible:false},{name:"playerHPBar",pos_x:-320,pos_y:900,anchor_x:0.5,anchor_y:0,emptyImage:"Content/Images8x/misc/1pxwhite.png",fillImage:"Content/Images8x/misc/1pxwhite.png",size_x:620,size_y:18,value:100,middleImage:"Content/Images8x/misc/1pxwhite.png",visible:false}],groupDefinitions:{yellowBanner:{images:[{name:"yellowBannerLeft",pos_x:-133,pos_y:0,size_x:433,size_y:140,asset:"Content/Images8x/UI/12_battle/banner_yellow_left.png"},{name:"yellowBannerMiddle",pos_x:300,pos_y:0,size_x:40,size_y:140,asset:"Content/Images8x/UI/12_battle/banner_yellow_middle.png"},{name:"yellowBannerRight",pos_x:340,pos_y:0,size_x:433,size_y:140,asset:"Content/Images8x/UI/12_battle/banner_yellow_left.png",flip_x:true}]},blueBanner:{images:[{name:"yellowBannerLeft",pos_x:-133,pos_y:0,size_x:433,size_y:140,asset:"Content/Images8x/UI/12_battle/banner_blue_left.png"},{name:"yellowBannerMiddle",pos_x:300,pos_y:0,size_x:40,size_y:140,asset:"Content/Images8x/UI/12_battle/banner_blue_middle.png"},{name:"yellowBannerRight",pos_x:340,pos_y:0,size_x:433,size_y:140,asset:"Content/Images8x/UI/12_battle/banner_blue_left.png",flip_x:true}]},redBanner:{images:[{name:"yellowBannerLeft",pos_x:-133,pos_y:0,size_x:433,size_y:140,asset:"Content/Images8x/UI/12_battle/banner_red_left.png"},{name:"yellowBannerMiddle",pos_x:300,pos_y:0,size_x:40,size_y:140,asset:"Content/Images8x/UI/12_battle/banner_red_middle.png"},{name:"yellowBannerRight",pos_x:340,pos_y:0,size_x:433,size_y:140,asset:"Content/Images8x/UI/12_battle/banner_red_left.png",flip_x:true}]},energonpinkBanner:{images:[{name:"yellowBannerLeft",pos_x:-133,pos_y:0,size_x:433,size_y:140,asset:"Content/Images8x/UI/12_battle/banner_energonpink_left.png"},{name:"yellowBannerMiddle",pos_x:300,pos_y:0,size_x:40,size_y:140,asset:"Content/Images8x/UI/12_battle/banner_energonpink_middle.png"},{name:"yellowBannerRight",pos_x:340,pos_y:0,size_x:433,size_y:140,asset:"Content/Images8x/UI/12_battle/banner_energonpink_left.png",flip_x:true}]},greenBanner:{images:[{name:"yellowBannerLeft",pos_x:-133,pos_y:0,size_x:433,size_y:140,asset:"Content/Images8x/UI/12_battle/banner_green_left.png"},{name:"yellowBannerMiddle",pos_x:300,pos_y:0,size_x:40,size_y:140,asset:"Content/Images8x/UI/12_battle/banner_green_middle.png"},{name:"yellowBannerRight",pos_x:340,pos_y:0,size_x:433,size_y:140,asset:"Content/Images8x/UI/12_battle/banner_green_left.png",flip_x:true}]},specialAttack:{images:[{name:"specialAttackIcon",anchor_x:0,anchor_y:0.5,pos_x:0,pos_y:0,size_x:60,size_y:60,depth:-10,asset:"Content/Images8x/UI/icon/icon_0_convergence.png",visible:false}],labels:[{name:"specialAttackDescription",pos_x:70,pos_y:0,size_x:400,size_y:128,font_size:30,anchor_x:0,anchor_y:0.5,horizontalAlign:"left",dropShadowVisible:true,dropShadowPosition:[2,2],dropShadowColor:[0,0,0],depth:3,fontType:"Content/Fonts/SFElectrotome.ttf",visible:false,text:"ui_ability"}]}},groups:[{name:"yellowBanner",groupDefinition:"yellowBanner",pos_x:840,pos_y:405},{name:"redBanner",groupDefinition:"redBanner",pos_x:840,pos_y:405},{name:"energonpinkBanner",groupDefinition:"energonpinkBanner",pos_x:840,pos_y:405},{name:"blueBanner",groupDefinition:"blueBanner",pos_x:840,pos_y:405},{name:"greenBanner",groupDefinition:"greenBanner",pos_x:840,pos_y:405},{name:"specialAttack",groupDefinition:"specialAttack",pos_x:10,pos_y:480,visible:false}],tfbuttons:[{name:"skipButton",anchor_x:1,anchor_y:0,pos_x:630,pos_y:10,size_x:100,size_y:60,type:8,visible:false,action:"onSkip",sound:["click_high"],text:"ui_skip_uc",fontType:"Content/Fonts/SFElectrotome.ttf",font_size:34}]}}};__ngs._fz={_c:null,_d:function(){this._c={exports:{motions:{gridpiece11:{source:[{x:160,y:147,scaleY:1,frameRate:30,offsetX:0,offsetY:0,scaleX:1}],Keyframe:[{index:0,scaleX:1,scaleY:1},{y:-304,index:1,x:0,scaleX:1,scaleY:1},{index:6,x:0,y:-304,scaleX:1,scaleY:1},{y:-192,scaleY:0.724,index:7,x:0,scaleX:1},{y:-59,index:8,x:0,scaleX:1,scaleY:0.724},{y:42,index:9,x:0,scaleX:1,scaleY:0.724},{y:80,index:10,x:0,scaleX:1,scaleY:0.724},{y:77,scaleY:0.727,index:12,x:0,scaleX:1},{y:66,scaleY:0.753,index:13,x:0,scaleX:1},{y:51,scaleY:0.807,index:14,x:0,scaleX:1},{y:17,scaleY:0.945,index:16,x:0,scaleX:1},{y:5,scaleY:0.995,index:17,x:0,scaleX:1},{y:5,scaleY:1,index:18,x:0,scaleX:1},{index:33,x:0,y:0,scaleX:1,scaleY:1}]},gridpiece12:{source:[{x:480,y:147,scaleX:1,frameRate:30,offsetX:0,offsetY:0,scaleY:1}],Keyframe:[{index:0,scaleX:1,scaleY:1},{x:-1,y:-304,scaleX:0.578,index:1,scaleY:1},{index:7,x:-1,y:-304,scaleX:0.578,scaleY:1},{y:-224,index:8,x:-1,scaleX:0.578,scaleY:1},{y:-134,index:9,x:-1,scaleX:0.578,scaleY:1},{y:-59,index:10,x:-1,scaleX:0.578,scaleY:1},{y:-22,index:11,x:-1,scaleX:0.578,scaleY:1},{y:-22,index:14,x:-1,scaleX:0.578,scaleY:1},{index:17,x:-1,y:-22,scaleX:0.578,scaleY:1},{x:-1,scaleX:0.525,index:18,y:-22,scaleY:1},{x:0,scaleX:0.407,index:19,y:-22,scaleY:1},{x:0,scaleX:0.231,index:20,y:-22,scaleY:1},{x:0,scaleX:0.028,index:21,y:-22,scaleY:1},{scaleX:0.214,rotation:0,index:22,x:0,y:-22,scaleY:1},{x:0,scaleX:0.465,index:23,y:-22,scaleY:1},{x:1,scaleX:0.67,index:24,y:-22,scaleY:1},{x:0,scaleX:0.839,index:25,y:-22,scaleY:1},{x:0,scaleX:0.963,index:26,y:-22,scaleY:1},{x:1,scaleX:1,index:27,y:-22,scaleY:1},{x:0,index:33,y:0,scaleX:1,scaleY:1}]},gridpiece13:{source:[{x:800,y:147,scaleX:1,scaleY:1,frameRate:30,offsetX:0,offsetY:0}],Keyframe:[{index:0,scaleX:1,scaleY:1},{x:-152,y:-250,scaleX:1.266,scaleY:0.695,index:1},{index:7,x:-152,y:-250,scaleX:1.266,scaleY:0.695},{y:-226,index:8,x:-152,scaleX:1.266,scaleY:0.695},{x:-152,y:-135,index:9,scaleX:1.266,scaleY:0.695},{y:-58,index:10,x:-152,scaleX:1.266,scaleY:0.695},{y:-26,index:11,x:-152,scaleX:1.266,scaleY:0.695},{y:-17,index:12,x:-152,scaleX:1.266,scaleY:0.695},{y:-10,index:13,x:-152,scaleX:1.266,scaleY:0.695},{x:-152,y:-10,index:16,scaleX:1.266,scaleY:0.695},{index:17,x:-152,y:-10,scaleX:1.266,scaleY:0.695},{x:-150,index:18,y:-10,scaleX:1.266,scaleY:0.695},{x:-141,index:19,y:-10,scaleX:1.266,scaleY:0.695},{x:-121,index:20,y:-10,scaleX:1.266,scaleY:0.695},{x:-30,index:23,y:-10,scaleX:1.266,scaleY:0.695},{x:-10,index:24,y:-10,scaleX:1.266,scaleY:0.695},{x:-6,index:25,y:-10,scaleX:1.266,scaleY:0.695},{y:0,scaleX:1.167,scaleY:0.722,index:28,x:-6},{x:-6,y:0,scaleX:1.067,scaleY:0.932,index:31},{x:0,scaleX:1,scaleY:1,index:33,y:0}]},gridpiece14:{source:[{x:1120,y:147,scaleX:1,scaleY:1,frameRate:30,offsetX:0,offsetY:0}],Keyframe:[{index:0,scaleX:1,scaleY:1},{x:-409,y:-456,index:1,scaleX:1,scaleY:1},{x:-316,y:-300,scaleX:1.201,scaleY:1.102,index:7},{y:-210,index:8,x:-316,scaleX:1.201,scaleY:1.102},{y:-120,index:9,x:-316,scaleX:1.201,scaleY:1.102},{y:-48,index:10,x:-316,scaleX:1.201,scaleY:1.102},{y:-11,index:11,x:-316,scaleX:1.201,scaleY:1.102},{y:4,index:13,x:-316,scaleX:1.201,scaleY:1.102},{y:14,index:17,x:-316,scaleX:1.201,scaleY:1.102},{x:-316,index:18,y:14,scaleX:1.201,scaleY:1.102},{x:-297,index:19,y:14,scaleX:1.201,scaleY:1.102},{x:-251,index:20,y:14,scaleX:1.201,scaleY:1.102},{x:-190,index:21,y:14,scaleX:1.201,scaleY:1.102},{x:-121,index:22,y:14,scaleX:1.201,scaleY:1.102},{x:-61,index:23,y:14,scaleX:1.201,scaleY:1.102},{x:-17,index:24,y:14,scaleX:1.201,scaleY:1.102},{x:2,index:25,y:14,scaleX:1.201,scaleY:1.102},{x:0,y:0,scaleX:1,scaleY:1,index:33}]},gridpiece21:{source:[{x:160,y:440,scaleX:1,scaleY:1,rotation:0,frameRate:30,offsetX:0,offsetY:0}],Keyframe:[{index:0,rotation:0,scaleX:1,scaleY:1},{x:-2,y:-598,scaleY:1.044,rotation:-90,index:1,scaleX:1},{y:-428,index:6,x:-2,rotation:-90,scaleX:1,scaleY:1.044},{y:-279,index:7,x:-2,rotation:-90,scaleX:1,scaleY:1.044},{y:-138,index:8,x:-2,rotation:-90,scaleX:1,scaleY:1.044},{y:-41,index:9,x:-2,rotation:-90,scaleX:1,scaleY:1.044},{y:-41,index:10,x:-2,rotation:-90,scaleX:1,scaleY:1.044},{index:14,x:-2,y:-41,rotation:-90,scaleX:1,scaleY:1.044},{x:-2,scaleX:0.998,scaleY:1.035,rotation:-83,index:15,y:-41},{x:-1,y:0,scaleY:1.027,rotation:-66,index:16,scaleX:0.998},{x:0,y:0,scaleX:0.999,scaleY:1.006,rotation:-6,index:19},{x:0,scaleX:1,scaleY:1,rotation:0,index:20,y:0},{index:33,x:0,y:0,rotation:0,scaleX:1,scaleY:1}]},gridpiece22:{source:[{x:480,y:440,scaleX:1,scaleY:1,rotation:0,frameRate:30,offsetX:0,offsetY:0}],Keyframe:[{index:0,rotation:0,scaleX:1,scaleY:1},{y:-552,scaleX:0.831,scaleY:0.884,rotation:-90,index:1,x:0},{index:9,x:0,y:-552,rotation:-90,scaleX:0.831,scaleY:0.884},{y:-496,index:10,x:0,rotation:-90,scaleX:0.831,scaleY:0.884},{y:-318,index:12,x:0,rotation:-90,scaleX:0.831,scaleY:0.884},{y:-223,index:13,x:0,rotation:-90,scaleX:0.831,scaleY:0.884},{y:-137,index:14,x:0,rotation:-90,scaleX:0.831,scaleY:0.884},{y:-68,index:15,x:0,rotation:-90,scaleX:0.831,scaleY:0.884},{y:-20,index:16,x:0,rotation:-90,scaleX:0.831,scaleY:0.884},{y:-3,index:17,x:0,rotation:-90,scaleX:0.831,scaleY:0.884},{y:-3,index:19,x:0,rotation:-90,scaleX:0.831,scaleY:0.884},{x:0,y:0,scaleX:0.87,scaleY:0.908,rotation:-82,index:20},{y:0,scaleX:0.911,scaleY:0.933,rotation:-58,index:21,x:0},{y:0,scaleX:0.993,scaleY:0.985,rotation:-9,index:23,x:0},{x:0,y:0,scaleX:1,scaleY:1,rotation:0,index:24},{index:33,x:0,y:0,rotation:0,scaleX:1,scaleY:1}]},gridpiece23:{source:[{x:800,y:440,scaleX:1,scaleY:1,frameRate:30,offsetX:0,offsetY:0}],Keyframe:[{index:0,scaleX:1,scaleY:1},{x:-910,scaleX:0.728,scaleY:1.436,index:1,y:0},{index:7,x:-910,y:0,scaleX:0.728,scaleY:1.436},{x:-874,index:8,y:0,scaleX:0.728,scaleY:1.436},{x:-523,y:0,index:11,scaleX:0.728,scaleY:1.436},{x:-276,index:13,y:0,scaleX:0.728,scaleY:1.436},{x:-173,index:14,y:0,scaleX:0.728,scaleY:1.436},{x:-87,y:0,index:15,scaleX:0.728,scaleY:1.436},{x:-33,index:16,y:0,scaleX:0.728,scaleY:1.436},{x:-8,index:17,y:0,scaleX:0.728,scaleY:1.436},{x:-5,y:0,scaleX:0.621,index:19,scaleY:1.436},{x:-5,y:0,scaleX:0.234,index:22,scaleY:1.436},{scaleX:0.078,rotation:0,index:23,x:-5,y:0,scaleY:1.436},{scaleX:0.1,scaleY:1.424,index:24,x:-5,y:0},{y:0,scaleX:0.582,scaleY:1.387,index:27,x:-5},{y:0,scaleX:0.892,scaleY:1.247,index:30,x:-5},{scaleX:1,scaleY:1,index:33,x:0,y:0}]},gridpiece24:{source:[{x:1120,y:440,scaleX:1,scaleY:1,frameRate:30,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{index:0,scaleX:1,scaleY:1},{y:-532,scaleX:0.987,scaleY:0.563,index:1,x:0},{index:4,x:0,y:-532,scaleX:0.987,scaleY:0.563},{y:-398,index:5,x:0,scaleX:0.987,scaleY:0.563},{y:-228,index:6,x:0,scaleX:0.987,scaleY:0.563},{y:-81,index:7,x:0,scaleX:0.987,scaleY:0.563},{y:26,index:8,x:0,scaleX:0.987,scaleY:0.563},{y:64,index:9,x:0,scaleX:0.987,scaleY:0.563},{y:46,scaleX:0.839,scaleY:0.597,index:11,x:0},{y:6,scaleX:0.26,scaleY:0.738,index:14,x:0},{index:15,alpha:0,x:0,y:6,scaleX:0.26,scaleY:0.738},{y:6,scaleX:0.246,scaleY:0.84,rotation:0,index:16,x:0},{y:0,scaleX:0.691,scaleY:0.933,index:18,x:0},{scaleX:0.962,scaleY:0.978,index:20,x:0,y:0},{y:0,scaleX:1,scaleY:1,index:21,x:0},{index:33,x:0,y:0,scaleX:1,scaleY:1}]},gridpiece31:{source:[{x:160,y:733,scaleX:1,scaleY:1,rotation:0,frameRate:30,offsetX:0,offsetY:0}],Keyframe:[{index:0,rotation:0,scaleX:1,scaleY:1},{x:-2,y:-890,scaleX:1.162,scaleY:0.673,rotation:90,index:1},{index:3,x:-2,y:-890,rotation:90,scaleX:1.162,scaleY:0.673},{y:-852,index:4,x:-2,rotation:90,scaleX:1.162,scaleY:0.673},{y:-744,index:5,x:-2,rotation:90,scaleX:1.162,scaleY:0.673},{y:-438,index:7,x:-2,rotation:90,scaleX:1.162,scaleY:0.673},{y:-290,index:8,x:-2,rotation:90,scaleX:1.162,scaleY:0.673},{y:-182,index:9,x:-2,rotation:90,scaleX:1.162,scaleY:0.673},{y:-138,index:10,x:-2,rotation:90,scaleX:1.162,scaleY:0.673},{y:-138,index:11,x:-2,rotation:90,scaleX:1.162,scaleY:0.673},{x:1,y:-139,scaleX:1.15,scaleY:0.668,rotation:83,index:12},{x:6,y:-141,scaleX:1.128,scaleY:0.66,rotation:45,index:14},{x:12,y:-143,scaleX:1.107,scaleY:0.654,rotation:7,index:16},{x:15,y:-144,scaleX:1.097,scaleY:0.651,rotation:0,index:17},{x:14,y:-133,scaleX:1.089,scaleY:0.687,index:18,rotation:0},{x:12,y:-115,scaleX:1.08,scaleY:0.723,index:19,rotation:0},{x:3,y:-33,scaleX:1.021,scaleY:0.958,index:22,rotation:0},{x:2,y:-9,scaleX:1.011,scaleY:0.979,index:23,rotation:0},{x:2,y:-9,scaleX:1,scaleY:1,index:24,rotation:0},{index:33,x:0,y:0,rotation:0,scaleX:1,scaleY:1}]},gridpiece32:{source:[{x:480,y:733,scaleY:1,frameRate:30,offsetX:0,offsetY:0,scaleX:1}],Keyframe:[{index:0,scaleX:1,scaleY:1},{x:-632,scaleY:0.659,index:1,y:0,scaleX:1},{index:12,x:-632,y:0,scaleX:1,scaleY:0.659},{x:-558,index:13,y:0,scaleX:1,scaleY:0.659},{x:-317,y:2,index:16,scaleX:1,scaleY:0.659},{x:-239,y:2,index:17,scaleX:1,scaleY:0.659},{x:-98,index:19,y:2,scaleX:1,scaleY:0.659},{x:-47,index:20,y:2,scaleX:1,scaleY:0.659},{x:-47,index:22,y:2,scaleX:1,scaleY:0.659},{y:0,scaleY:0.637,index:23,x:-47,scaleX:1},{y:0,scaleY:0.527,index:24,x:-47,scaleX:1},{scaleY:0.164,index:26,x:-47,y:0,scaleX:1},{scaleY:0.058,rotation:0,index:27,x:-47,y:0,scaleX:1},{scaleY:0.704,index:30,x:-47,y:0,scaleX:1},{y:-1,scaleY:0.854,index:31,x:-47,scaleX:1},{y:0,scaleY:0.985,index:32,x:-47,scaleX:1},{y:0,scaleY:1,index:33,x:0,scaleX:1}]},gridpiece33:{source:[{x:800,y:733,scaleX:1,scaleY:1,rotation:0,frameRate:30,offsetX:0,offsetY:0}],Keyframe:[{index:0,rotation:0,scaleX:1,scaleY:1},{x:320,y:-896,scaleX:1.247,scaleY:0.651,rotation:90,index:1},{y:-891,index:2,x:320,rotation:90,scaleX:1.247,scaleY:0.651},{y:-802,index:3,x:320,rotation:90,scaleX:1.247,scaleY:0.651},{y:-650,index:4,x:320,rotation:90,scaleX:1.247,scaleY:0.651},{y:-311,index:6,x:320,rotation:90,scaleX:1.247,scaleY:0.651},{y:-167,index:7,x:320,rotation:90,scaleX:1.247,scaleY:0.651},{y:-58,index:8,x:320,rotation:90,scaleX:1.247,scaleY:0.651},{y:-16,index:9,x:320,rotation:90,scaleX:1.247,scaleY:0.651},{y:-10,scaleX:1.245,scaleY:0.65,rotation:60,index:11,x:320},{x:320,y:-6,scaleX:1.243,scaleY:0.649,rotation:31,index:12},{x:320,y:-6,scaleX:1.247,scaleY:0.651,rotation:0,index:14},{x:257,index:16,y:-6,rotation:0,scaleX:1.247,scaleY:0.651},{x:195,index:17,y:-6,rotation:0,scaleX:1.247,scaleY:0.651},{x:71,index:19,y:-6,rotation:0,scaleX:1.247,scaleY:0.651},{x:20,index:20,y:-6,rotation:0,scaleX:1.247,scaleY:0.651},{x:20,index:21,y:-6,rotation:0,scaleX:1.247,scaleY:0.651},{scaleX:1,scaleY:1,index:26,x:20,y:-6,rotation:0},{index:33,x:0,y:0,rotation:0,scaleX:1,scaleY:1}]},gridpiece34:{source:[{x:1120,y:733,scaleX:1,scaleY:1,rotation:0,frameRate:30,offsetX:0,offsetY:0}],Keyframe:[{index:0,rotation:0,scaleX:1,scaleY:1},{y:-858,scaleX:0.922,scaleY:1.058,rotation:90,index:1,x:0},{index:2,x:0,y:-858,rotation:90,scaleX:0.922,scaleY:1.058},{y:-788,index:3,x:0,rotation:90,scaleX:0.922,scaleY:1.058},{y:-298,index:6,x:0,rotation:90,scaleX:0.922,scaleY:1.058},{y:-148,index:7,x:0,rotation:90,scaleX:0.922,scaleY:1.058},{y:-43,index:8,x:0,rotation:90,scaleX:0.922,scaleY:1.058},{y:-43,index:9,x:0,rotation:90,scaleX:0.922,scaleY:1.058},{x:0,scaleX:0.952,scaleY:1.033,rotation:61,index:11,y:-43},{x:0,y:0,scaleX:0.966,scaleY:1.021,rotation:32,index:12},{x:0,scaleX:0.982,scaleY:1.009,rotation:10,index:13,y:0},{y:0,scaleX:1,scaleY:1,rotation:0,index:14,x:0},{index:33,x:0,y:0,rotation:0,scaleX:1,scaleY:1}]},gridpiece41:{source:[{x:160,y:1026,scaleX:1,frameRate:30,offsetX:0,offsetY:0,scaleY:1}],Keyframe:[{index:0,scaleX:1,scaleY:1},{x:-61,y:848,scaleX:0.37,index:1,scaleY:1},{index:9,x:-61,y:848,scaleX:0.37,scaleY:1},{y:792,index:10,x:-61,scaleX:0.37,scaleY:1},{y:531,index:12,x:-61,scaleX:0.37,scaleY:1},{y:237,index:14,x:-61,scaleX:0.37,scaleY:1},{y:114,index:15,x:-61,scaleX:0.37,scaleY:1},{y:31,index:16,x:-61,scaleX:0.37,scaleY:1},{y:31,index:17,x:-61,scaleX:0.37,scaleY:1},{x:-57,scaleX:0.444,index:18,y:31,scaleY:1},{x:-22,scaleX:0.774,index:20,y:31,scaleY:1},{x:-8,scaleX:0.906,index:21,y:31,scaleY:1},{x:-8,scaleX:1,index:22,y:31,scaleY:1},{index:33,x:0,y:0,scaleX:1,scaleY:1}]},gridpiece42:{source:[{x:480,y:1026,scaleX:1,frameRate:30,offsetX:0,offsetY:0,scaleY:1}],Keyframe:[{index:0,scaleX:1,scaleY:1},{x:-242,y:854,index:1,scaleX:1,scaleY:1},{index:7,x:-242,y:854,scaleX:1,scaleY:1},{y:794,index:8,x:-242,scaleX:1,scaleY:1},{y:671,index:9,x:-242,scaleX:1,scaleY:1},{y:528,index:10,x:-242,scaleX:1,scaleY:1},{y:234,index:12,x:-242,scaleX:1,scaleY:1},{y:113,index:13,x:-242,scaleX:1,scaleY:1},{y:32,index:14,x:-242,scaleX:1,scaleY:1},{y:32,index:15,x:-242,scaleX:1,scaleY:1},{x:-218,index:16,y:32,scaleX:1,scaleY:1},{x:-26,index:19,y:32,scaleX:1,scaleY:1},{x:-26,index:20,y:32,scaleX:1,scaleY:1},{scaleX:0.675,index:22,x:-26,y:32,scaleY:1},{scaleX:0.377,index:23,x:-26,y:32,scaleY:1},{rotation:0,index:25,x:-26,y:32,scaleX:0.377,scaleY:1},{scaleX:0.909,index:27,x:-26,y:32,scaleY:1},{scaleX:1,index:28,x:-26,y:32,scaleY:1},{index:33,x:0,y:0,scaleX:1,scaleY:1}]},gridpiece43:{source:[{x:800,y:1026,scaleX:1,scaleY:1,frameRate:30,offsetX:0,offsetY:0}],Keyframe:[{index:0,scaleX:1,scaleY:1},{x:618,y:260,scaleX:0.883,scaleY:0.898,index:1},{index:7,x:618,y:260,scaleX:0.883,scaleY:0.898},{x:564,index:8,y:260,scaleX:0.883,scaleY:0.898},{x:373,index:10,y:260,scaleX:0.883,scaleY:0.898},{x:171,index:12,y:260,scaleX:0.883,scaleY:0.898},{x:92,index:13,y:260,scaleX:0.883,scaleY:0.898},{x:30,index:14,y:260,scaleX:0.883,scaleY:0.898},{x:4,index:15,y:260,scaleX:0.883,scaleY:0.898},{x:4,index:17,y:260,scaleX:0.883,scaleY:0.898},{y:248,index:18,x:4,scaleX:0.883,scaleY:0.898},{y:212,index:19,x:4,scaleX:0.883,scaleY:0.898},{y:50,index:22,x:4,scaleX:0.883,scaleY:0.898},{y:14,index:23,x:4,scaleX:0.883,scaleY:0.898},{y:14,index:24,x:4,scaleX:0.883,scaleY:0.898},{scaleX:1,scaleY:1,index:33,x:0,y:0}]},gridpiece44:{source:[{x:1120,y:1026,scaleX:1,scaleY:1,rotation:0,frameRate:30,offsetX:0,offsetY:0}],Keyframe:[{index:0,rotation:0,scaleX:1,scaleY:1},{x:298,y:268,scaleX:0.974,scaleY:0.869,rotation:90,index:1},{index:10,x:298,y:268,rotation:90,scaleX:0.974,scaleY:0.869},{x:264,index:11,y:268,rotation:90,scaleX:0.974,scaleY:0.869},{x:165,index:12,y:268,rotation:90,scaleX:0.974,scaleY:0.869},{x:29,y:268,index:14,rotation:90,scaleX:0.974,scaleY:0.869},{x:6,y:268,index:16,rotation:90,scaleX:0.974,scaleY:0.869},{x:6,index:17,y:268,rotation:90,scaleX:0.974,scaleY:0.869},{index:20,x:6,y:268,rotation:90,scaleX:0.974,scaleY:0.869},{y:266,index:21,x:6,rotation:90,scaleX:0.974,scaleY:0.869},{y:193,index:23,x:6,rotation:90,scaleX:0.974,scaleY:0.869},{y:20,index:26,x:6,rotation:90,scaleX:0.974,scaleY:0.869},{y:20,index:27,x:6,rotation:90,scaleX:0.974,scaleY:0.869},{scaleX:1,scaleY:1,rotation:0,index:33,x:0,y:0}]},gridpiece51:{source:[{x:160,y:1319,scaleX:1,scaleY:1,rotation:0,frameRate:30,offsetX:0,offsetY:0}],Keyframe:[{index:0,rotation:0,scaleX:1,scaleY:1},{x:1195,y:259,scaleX:1.117,scaleY:0.695,rotation:-90,index:1},{index:7,x:1195,y:259,rotation:-90,scaleX:1.117,scaleY:0.695},{x:1083,index:8,y:259,rotation:-90,scaleX:1.117,scaleY:0.695},{x:577,index:11,y:259,rotation:-90,scaleX:1.117,scaleY:0.695},{x:249,y:259,index:13,rotation:-90,scaleX:1.117,scaleY:0.695},{x:122,index:14,y:259,rotation:-90,scaleX:1.117,scaleY:0.695},{x:33,index:15,y:259,rotation:-90,scaleX:1.117,scaleY:0.695},{x:5,index:16,y:259,rotation:-90,scaleX:1.117,scaleY:0.695},{x:4,y:259,index:17,rotation:-90,scaleX:1.117,scaleY:0.695},{x:1,y:259,index:20,rotation:-90,scaleX:1.117,scaleY:0.695},{x:-1,y:259,index:21,rotation:-90,scaleX:1.117,scaleY:0.695},{x:4,y:261,scaleX:1.109,scaleY:0.684,rotation:-66,index:23},{x:10,y:264,scaleX:1.101,scaleY:0.674,rotation:-24,index:25},{x:12,y:265,scaleX:1.099,scaleY:0.669,rotation:-7,index:26},{x:15,y:266,scaleX:1.097,scaleY:0.665,rotation:0,index:27},{x:10,y:195,scaleX:1.065,scaleY:0.748,index:29,rotation:0},{x:5,y:64,scaleX:1.032,scaleY:0.874,index:31,rotation:0},{x:0,y:0,scaleX:1,scaleY:1,index:33,rotation:0}]},gridpiece52:{source:[{x:480,y:1319,scaleX:1,scaleY:1,frameRate:30,offsetX:0,offsetY:0}],Keyframe:[{index:0,scaleX:1,scaleY:1},{x:-668,y:-546,scaleX:1.247,scaleY:0.796,index:1},{index:10,x:-668,y:-546,scaleX:1.247,scaleY:0.796},{x:-552,index:11,y:-546,scaleX:1.247,scaleY:0.796},{x:-429,index:12,y:-546,scaleX:1.247,scaleY:0.796},{x:-203,index:14,y:-546,scaleX:1.247,scaleY:0.796},{x:-49,index:16,y:-546,scaleX:1.247,scaleY:0.796},{x:-9,index:17,y:-546,scaleX:1.247,scaleY:0.796},{x:-9,index:18,y:-546,scaleX:1.247,scaleY:0.796},{y:-505,index:19,x:-9,scaleX:1.247,scaleY:0.796},{y:-404,index:20,x:-9,scaleX:1.247,scaleY:0.796},{y:-143,index:22,x:-9,scaleX:1.247,scaleY:0.796},{y:-41,index:23,x:-9,scaleX:1.247,scaleY:0.796},{y:-41,index:24,x:-9,scaleX:1.247,scaleY:0.796},{index:27,x:-9,y:-41,scaleX:1.247,scaleY:0.796},{scaleX:1,scaleY:1,index:33,x:0,y:0}]},gridpiece53:{source:[{x:800,y:1319,scaleX:1,scaleY:1,frameRate:30,offsetX:0,offsetY:0}],Keyframe:[{index:0,scaleX:1,scaleY:1},{x:658,scaleX:1.078,scaleY:0.629,index:1,y:0},{index:7,x:658,y:0,scaleX:1.078,scaleY:0.629},{x:566,index:8,y:0,scaleX:1.078,scaleY:0.629},{x:370,index:10,y:0,scaleX:1.078,scaleY:0.629},{x:177,index:12,y:0,scaleX:1.078,scaleY:0.629},{x:93,index:13,y:0,scaleX:1.078,scaleY:0.629},{x:37,index:14,y:0,scaleX:1.078,scaleY:0.629},{x:7,index:15,y:0,scaleX:1.078,scaleY:0.629},{x:1,index:16,y:0,scaleX:1.078,scaleY:0.629},{x:1,index:17,y:0,scaleX:1.078,scaleY:0.629},{y:1,scaleY:0.52,index:18,x:1,scaleX:1.078},{y:1,scaleY:0.28,index:19,x:1,scaleX:1.078},{y:-6,scaleX:1.039,scaleY:0.418,rotation:0,index:21,x:1},{y:-2,scaleX:1.013,scaleY:0.893,index:23,x:1},{y:-2,scaleX:1,scaleY:1,index:24,x:1},{index:33,x:0,y:0,scaleX:1,scaleY:1}]},gridpiece54:{source:[{x:1120,y:1319,frameRate:30,offsetX:0,offsetY:0}],Keyframe:[{index:0},{x:348,index:1,y:0},{index:10,x:348,y:0},{x:256,index:11,y:0},{x:79,index:13,y:0},{x:30,index:14,y:0},{x:8,index:15,y:0},{x:6,index:16,y:0},{x:6,index:25,y:0},{index:33,x:0,y:0}]},gridpiece61:{source:[{x:160,y:1612,scaleX:1,scaleY:1,rotation:0,frameRate:30,offsetX:0,offsetY:0}],Keyframe:[{index:0,rotation:0,scaleX:1,scaleY:1},{x:1276,scaleX:0.766,scaleY:1.276,rotation:-90,index:1,y:0},{index:6,x:1276,y:0,rotation:-90,scaleX:0.766,scaleY:1.276},{x:1220,index:7,y:0,rotation:-90,scaleX:0.766,scaleY:1.276},{x:1094,index:8,y:0,rotation:-90,scaleX:0.766,scaleY:1.276},{x:763,index:10,y:0,rotation:-90,scaleX:0.766,scaleY:1.276},{x:256,y:0,index:13,rotation:-90,scaleX:0.766,scaleY:1.276},{x:48,y:0,index:15,rotation:-90,scaleX:0.766,scaleY:1.276},{x:22,y:0,index:16,rotation:-90,scaleX:0.766,scaleY:1.276},{index:21,x:22,y:0,rotation:-90,scaleX:0.766,scaleY:1.276},{x:15,y:-19,scaleX:0.799,scaleY:1.138,rotation:0,index:27},{x:0,y:0,scaleX:1,scaleY:1,index:33,rotation:0}]},gridpiece62:{source:[{x:480,y:1612,scaleX:1,frameRate:30,offsetX:0,offsetY:0,scaleY:1}],Keyframe:[{index:0,scaleX:1,scaleY:1},{x:874,scaleX:0.558,index:1,y:0,scaleY:1},{index:8,x:874,y:0,scaleX:0.558,scaleY:1},{x:838,index:9,y:0,scaleX:0.558,scaleY:1},{x:482,index:11,y:0,scaleX:0.558,scaleY:1},{x:156,index:13,y:0,scaleX:0.558,scaleY:1},{x:33,index:14,y:0,scaleX:0.558,scaleY:1},{x:-63,index:15,y:0,scaleX:0.558,scaleY:1},{x:-92,index:16,y:0,scaleX:0.558,scaleY:1},{x:-98,index:17,y:0,scaleX:0.558,scaleY:1},{index:20,x:-98,y:0,scaleX:0.558,scaleY:1},{x:-76,scaleX:0.643,index:22,y:0,scaleY:1},{x:-6,scaleX:0.989,index:26,y:0,scaleY:1},{x:-6,scaleX:1,index:27,y:0,scaleY:1},{index:33,x:0,y:0,scaleX:1,scaleY:1}]},gridpiece63:{source:[{x:800,y:1612,scaleY:1,frameRate:30,offsetX:0,offsetY:0,scaleX:1}],Keyframe:[{index:0,scaleX:1,scaleY:1},{x:644,y:-278,scaleY:0.622,index:1,scaleX:1},{index:7,x:644,y:-278,scaleX:1,scaleY:0.622},{x:558,index:8,y:-278,scaleX:1,scaleY:0.622},{x:368,index:10,y:-278,scaleX:1,scaleY:0.622},{x:192,index:12,y:-278,scaleX:1,scaleY:0.622},{x:23,index:15,y:-278,scaleX:1,scaleY:0.622},{x:13,index:16,y:-278,scaleX:1,scaleY:0.622},{x:13,index:17,y:-278,scaleX:1,scaleY:0.622},{index:20,x:13,y:-278,scaleX:1,scaleY:0.622},{y:-247,scaleY:0.639,index:21,x:13,scaleX:1},{y:-95,scaleY:0.849,index:23,x:13,scaleX:1},{y:-26,scaleY:0.924,index:24,x:13,scaleX:1},{y:-26,scaleY:1,index:25,x:13,scaleX:1},{index:33,x:0,y:0,scaleX:1,scaleY:1}]},gridpiece64:{source:[{x:1120,y:1612,frameRate:30,offsetX:0,offsetY:0}],Keyframe:[{index:0},{x:340,index:1,y:0},{index:28,x:340,y:0},{x:274,index:29,y:0},{x:94,index:31,y:0},{x:28,index:32,y:0},{x:0,index:33,y:0}]}}}}}};__ngs._g0={_c:null,_d:function(){this._c={exports:{motions:{gridpiece11:{source:[{x:154,y:138,frameRate:30,offsetX:0,offsetY:0}],Keyframe:[{index:0},{x:-23,index:1,y:0},{x:-344,index:5,y:0},{index:36,x:-344,y:0}]},gridpiece12:{source:[{x:462,y:138,scaleY:1,frameRate:30,offsetX:0,offsetY:0,scaleX:1}],Keyframe:[{index:0,scaleX:1,scaleY:1},{index:8,x:0,y:0,scaleX:1,scaleY:1},{y:25,scaleY:0.921,index:9,x:0,scaleX:1},{y:181,scaleY:0.764,index:11,x:0,scaleX:1},{y:250,scaleY:0.686,index:12,x:0,scaleX:1},{y:276,scaleY:0.607,index:13,x:0,scaleX:1},{index:16,x:0,y:276,scaleX:1,scaleY:0.607},{x:-2,index:17,y:276,scaleX:1,scaleY:0.607},{x:-7,index:18,y:276,scaleX:1,scaleY:0.607},{x:-89,index:20,y:276,scaleX:1,scaleY:0.607},{x:-363,index:23,y:276,scaleX:1,scaleY:0.607},{x:-498,index:24,y:276,scaleX:1,scaleY:0.607},{x:-560,index:25,y:276,scaleX:1,scaleY:0.607},{x:-648,index:26,y:276,scaleX:1,scaleY:0.607},{index:36,x:-648,y:276,scaleX:1,scaleY:0.607}]},gridpiece13:{source:[{x:770,y:138,scaleX:1,frameRate:30,offsetX:0,offsetY:0,scaleY:1}],Keyframe:[{index:0,scaleX:1,scaleY:1},{index:6,x:0,y:0,scaleX:1,scaleY:1},{x:18,scaleX:0.874,index:8,y:0,scaleY:1},{x:90,scaleX:0.117,index:12,y:0,scaleY:1},{x:92,scaleX:0.091,index:13,y:0,scaleY:1},{scaleX:0.497,index:16,x:92,y:0,scaleY:1},{scaleX:0.546,index:17,x:92,y:0,scaleY:1},{x:58,index:18,y:0,scaleX:0.546,scaleY:1},{x:-27,index:19,y:0,scaleX:0.546,scaleY:1},{x:-314,index:21,y:0,scaleX:0.546,scaleY:1},{x:-660,index:23,y:0,scaleX:0.546,scaleY:1},{x:-836,index:24,y:0,scaleX:0.546,scaleY:1},{x:-874,index:25,y:0,scaleX:0.546,scaleY:1},{index:36,x:-874,y:0,scaleX:0.546,scaleY:1}]},gridpiece14:{source:[{x:1078,y:138,scaleX:1,scaleY:1,rotation:0,frameRate:30,offsetX:0,offsetY:0}],Keyframe:[{index:0,rotation:0,scaleX:1,scaleY:1},{x:-15,y:19,scaleX:0.799,scaleY:1.138,index:6,rotation:0},{x:-25,y:-3,scaleY:1.298,rotation:-90,index:12,scaleX:0.799},{index:17,x:-25,y:-3,rotation:-90,scaleX:0.799,scaleY:1.298},{x:-46,index:18,y:-3,rotation:-90,scaleX:0.799,scaleY:1.298},{x:-136,index:19,y:-3,rotation:-90,scaleX:0.799,scaleY:1.298},{x:-265,index:20,y:-3,rotation:-90,scaleX:0.799,scaleY:1.298},{x:-771,index:23,y:-3,rotation:-90,scaleX:0.799,scaleY:1.298},{x:-1102,index:25,y:-3,rotation:-90,scaleX:0.799,scaleY:1.298},{x:-1225,index:26,y:-3,rotation:-90,scaleX:0.799,scaleY:1.298},{x:-1283,index:27,y:-3,rotation:-90,scaleX:0.799,scaleY:1.298},{index:36,x:-1283,y:-3,rotation:-90,scaleX:0.799,scaleY:1.298}]},gridpiece21:{source:[{x:154,y:413,scaleX:1,frameRate:30,offsetX:0,offsetY:0,scaleY:1}],Keyframe:[{index:0,scaleX:1,scaleY:1},{index:10,x:0,y:0,scaleX:1,scaleY:1},{x:-5,scaleX:0.968,index:18,y:0,scaleY:1},{x:-24,index:19,y:0,scaleX:0.968,scaleY:1},{x:-76,index:20,y:0,scaleX:0.968,scaleY:1},{x:-251,index:22,y:0,scaleX:0.968,scaleY:1},{x:-315,index:23,y:0,scaleX:0.968,scaleY:1},{index:36,x:-315,y:0,scaleX:0.968,scaleY:1}]},gridpiece22:{source:[{x:462,y:413,scaleX:1,scaleY:1,frameRate:30,offsetX:0,offsetY:0}],Keyframe:[{index:0,scaleX:1,scaleY:1},{index:9,x:0,y:0,scaleX:1,scaleY:1},{scaleY:0.825,index:11,x:0,y:0,scaleX:1},{scaleY:0.127,index:14,x:0,y:0,scaleX:1},{x:-7,y:-1,scaleX:1.006,scaleY:0.084,index:15},{y:13,scaleY:0.518,index:17,x:-7,scaleX:1.006},{y:9,scaleY:0.549,index:18,x:-7,scaleX:1.006},{x:-89,index:20,y:9,scaleX:1.006,scaleY:0.549},{x:-366,index:23,y:9,scaleX:1.006,scaleY:0.549},{x:-563,index:25,y:9,scaleX:1.006,scaleY:0.549},{x:-629,index:26,y:9,scaleX:1.006,scaleY:0.549},{index:36,x:-629,y:9,scaleX:1.006,scaleY:0.549}]},gridpiece23:{source:[{x:770,y:413,scaleX:1,scaleY:1,frameRate:30,offsetX:0,offsetY:0}],Keyframe:[{index:0,scaleX:1,scaleY:1},{scaleX:1.234,scaleY:0.796,index:6,x:0,y:0},{scaleY:0.287,index:9,x:0,y:0,scaleX:1.234},{y:43,scaleY:0.061,index:10,x:0,scaleX:1.234},{y:141,scaleY:0.142,index:11,x:0,scaleX:1.234},{y:404,scaleY:0.497,index:13,x:0,scaleX:1.234},{y:506,scaleY:0.61,index:14,x:0,scaleX:1.234},{y:546,scaleY:0.659,index:15,x:0,scaleX:1.234},{x:9,index:16,y:546,scaleX:1.234,scaleY:0.659},{x:44,index:17,y:546,scaleX:1.234,scaleY:0.659},{x:111,index:18,y:546,scaleX:1.234,scaleY:0.659},{x:309,index:20,y:546,scaleX:1.234,scaleY:0.659},{x:428,index:21,y:546,scaleX:1.234,scaleY:0.659},{x:550,index:22,y:546,scaleX:1.234,scaleY:0.659},{x:676,index:23,y:546,scaleX:1.234,scaleY:0.659},{index:36,x:676,y:546,scaleX:1.234,scaleY:0.659}]},gridpiece24:{source:[{x:1078,y:413,scaleX:1,scaleY:1,rotation:0,frameRate:30,offsetX:0,offsetY:0}],Keyframe:[{index:0,rotation:0,scaleX:1,scaleY:1},{x:-3,y:-17,scaleX:1.018,scaleY:0.944,index:1,rotation:0},{x:-11,y:-200,scaleX:1.074,scaleY:0.777,index:4,rotation:0},{x:-17,y:-268,scaleX:1.11,scaleY:0.665,index:6,rotation:0},{x:-17,y:-258,scaleY:0.687,rotation:-90,index:12,scaleX:1.11},{x:-2,scaleY:0.542,index:14,y:-258,rotation:-90,scaleX:1.11},{x:-4,scaleY:0.032,index:17,y:-258,rotation:-90,scaleX:1.11},{x:-32,scaleY:0.215,index:18,y:-258,rotation:-90,scaleX:1.11},{x:-121,scaleY:0.352,index:19,y:-258,rotation:-90,scaleX:1.11},{x:-246,scaleY:0.489,index:20,y:-258,rotation:-90,scaleX:1.11},{x:-403,scaleY:0.528,index:21,y:-258,rotation:-90,scaleX:1.11},{x:-1085,index:25,y:-258,rotation:-90,scaleX:1.11,scaleY:0.528},{x:-1157,index:26,y:-258,rotation:-90,scaleX:1.11,scaleY:0.528},{index:36,x:-1157,y:-258,rotation:-90,scaleX:1.11,scaleY:0.528}]},gridpiece31:{source:[{x:154,y:688,scaleX:1,scaleY:1,rotation:0,frameRate:30,offsetX:0,offsetY:0}],Keyframe:[{index:0,rotation:0,scaleX:1,scaleY:1},{x:0,y:0,scaleX:0.999,scaleY:0.978,rotation:6,index:1},{x:-1,y:0,scaleY:0.957,rotation:22,index:2,scaleX:0.999},{x:-2,scaleY:0.896,rotation:83,index:5,y:0,scaleX:0.999},{x:-3,scaleX:1,scaleY:0.876,rotation:90,index:6,y:0},{y:-28,scaleX:1.017,scaleY:0.769,index:7,x:-3,rotation:90},{x:-3,y:-150,scaleX:1.052,scaleY:0.466,index:9,rotation:90},{x:-3,y:-250,scaleX:1,scaleY:0.12,index:11,rotation:90},{y:-268,scaleX:0.961,scaleY:0.07,index:12,x:-3,rotation:90},{x:-4,y:-269,scaleX:0.964,scaleY:0.389,index:14,rotation:90},{x:-5,y:-269,scaleX:0.969,scaleY:0.681,index:17,rotation:90},{x:-7,y:-270,scaleX:0.971,scaleY:0.721,index:18,rotation:90},{x:-33,index:19,y:-270,rotation:90,scaleX:0.971,scaleY:0.721},{x:-88,index:20,y:-270,rotation:90,scaleX:0.971,scaleY:0.721},{x:-166,index:21,y:-270,rotation:90,scaleX:0.971,scaleY:0.721},{x:-284,index:22,y:-270,rotation:90,scaleX:0.971,scaleY:0.721},{index:36,x:-284,y:-270,rotation:90,scaleX:0.971,scaleY:0.721}]},gridpiece32:{source:[{x:462,y:688,scaleX:1,scaleY:1,frameRate:30,offsetX:0,offsetY:0}],Keyframe:[{index:0,scaleX:1,scaleY:1},{index:3,x:0,y:0,scaleX:1,scaleY:1},{scaleX:0.896,scaleY:0.884,index:9,x:0,y:0},{y:-15,index:10,x:0,scaleX:0.896,scaleY:0.884},{y:-210,index:14,x:0,scaleX:0.896,scaleY:0.884},{y:-247,index:15,x:0,scaleX:0.896,scaleY:0.884},{y:-260,index:16,x:0,scaleX:0.896,scaleY:0.884},{index:17,x:0,y:-260,scaleX:0.896,scaleY:0.884},{x:-9,index:18,y:-260,scaleX:0.896,scaleY:0.884},{x:-97,index:20,y:-260,scaleX:0.896,scaleY:0.884},{x:-372,index:23,y:-260,scaleX:0.896,scaleY:0.884},{x:-568,index:25,y:-260,scaleX:0.896,scaleY:0.884},{x:-690,index:26,y:-260,scaleX:0.896,scaleY:0.884},{index:36,x:-690,y:-260,scaleX:0.896,scaleY:0.884}]},gridpiece33:{source:[{x:770,y:688,scaleY:1,frameRate:30,offsetX:0,offsetY:0,scaleX:1}],Keyframe:[{index:0,scaleX:1,scaleY:1},{index:9,x:0,y:0,scaleX:1,scaleY:1},{x:-3,scaleY:0.94,index:10,y:0,scaleX:1},{x:20,scaleY:0.601,index:12,y:0,scaleX:1},{x:154,scaleY:0.141,index:14,y:0,scaleX:1},{x:214,scaleY:0.12,index:15,y:0,scaleX:1},{x:240,scaleY:0.324,index:16,y:0,scaleX:1},{y:-115,scaleY:0.506,index:18,x:240,scaleX:1},{y:-236,index:19,x:240,scaleX:1,scaleY:0.506},{y:-381,index:20,x:240,scaleX:1,scaleY:0.506},{y:-675,index:22,x:240,scaleX:1,scaleY:0.506},{y:-793,index:23,x:240,scaleX:1,scaleY:0.506},{index:36,x:240,y:-793,scaleX:1,scaleY:0.506}]},gridpiece34:{source:[{x:1078,y:688,scaleX:1,frameRate:30,offsetX:0,offsetY:0,scaleY:1}],Keyframe:[{index:0,scaleX:1,scaleY:1},{index:11,x:0,y:0,scaleX:1,scaleY:1},{x:8,scaleX:0.929,index:12,y:0,scaleY:1},{x:55,scaleX:0.456,index:15,y:0,scaleY:1},{x:60,scaleX:0.376,index:16,y:0,scaleY:1},{y:-33,index:17,x:60,scaleX:0.376,scaleY:1},{y:-117,index:18,x:60,scaleX:0.376,scaleY:1},{y:-381,index:20,x:60,scaleX:0.376,scaleY:1},{y:-676,index:22,x:60,scaleX:0.376,scaleY:1},{y:-796,index:23,x:60,scaleX:0.376,scaleY:1},{y:-844,index:24,x:60,scaleX:0.376,scaleY:1},{index:36,x:60,y:-844,scaleX:0.376,scaleY:1}]},gridpiece41:{source:[{x:154,y:963,scaleX:1,scaleY:1,rotation:0,frameRate:30,offsetX:0,offsetY:0}],Keyframe:[{index:0,rotation:0,scaleX:1,scaleY:1},{index:19,x:0,y:0,rotation:0,scaleX:1,scaleY:1},{x:-1,y:5,scaleX:0.998,scaleY:1.016,rotation:31,index:21},{x:-2,y:10,scaleY:1.033,rotation:79,index:23,scaleX:0.998},{x:-2,y:12,scaleX:1,scaleY:1.044,rotation:90,index:24},{y:27,index:25,x:-2,rotation:90,scaleX:1,scaleY:1.044},{y:129,index:27,x:-2,rotation:90,scaleX:1,scaleY:1.044},{y:387,index:30,x:-2,rotation:90,scaleX:1,scaleY:1.044},{y:760,index:34,x:-2,rotation:90,scaleX:1,scaleY:1.044},{y:834,index:35,x:-2,rotation:90,scaleX:1,scaleY:1.044},{y:856,index:36,x:-2,rotation:90,scaleX:1,scaleY:1.044}]},gridpiece42:{source:[{x:462,y:963,scaleX:1,scaleY:1,frameRate:30,offsetX:0,offsetY:0}],Keyframe:[{index:0,scaleX:1,scaleY:1},{index:7,x:0,y:0,scaleX:1,scaleY:1},{scaleX:1.148,scaleY:0.892,index:10,x:0,y:0},{scaleX:1.247,scaleY:0.651,index:12,x:0,y:0},{x:-52,y:-1,scaleX:1.286,scaleY:0.251,index:14},{x:-190,scaleY:0.259,index:16,y:-1,scaleX:1.286},{x:-267,scaleX:1.208,scaleY:0.433,index:17,y:-1},{x:-288,scaleX:1.13,scaleY:0.608,index:18,y:-1},{x:-296,scaleX:1.078,scaleY:0.652,index:19,y:-1},{x:-302,scaleX:1.087,scaleY:0.651,index:20,y:-1},{x:-323,y:4,scaleX:1.219,scaleY:0.65,index:21},{x:-314,y:-3,scaleX:1.211,index:22,scaleY:0.65},{x:-324,y:-1,scaleX:1.13,scaleY:0.651,index:24},{y:53,index:26,x:-324,scaleX:1.13,scaleY:0.651},{y:275,index:29,x:-324,scaleX:1.13,scaleY:0.651},{y:564,index:32,x:-324,scaleX:1.13,scaleY:0.651},{y:817,index:35,x:-324,scaleX:1.13,scaleY:0.651},{y:917,index:36,x:-324,scaleX:1.13,scaleY:0.651}]},gridpiece43:{source:[{x:770,y:963,scaleX:1,frameRate:30,offsetX:0,offsetY:0,scaleY:1}],Keyframe:[{index:0,scaleX:1,scaleY:1},{scaleX:0.957,index:1,x:0,y:0,scaleY:1},{scaleX:0.75,index:3,x:0,y:0,scaleY:1},{scaleX:0.065,index:7,x:0,y:0,scaleY:1},{x:-33,scaleX:0.124,index:8,y:0,scaleY:1},{x:-193,scaleX:0.461,index:10,y:0,scaleY:1},{x:-309,scaleX:0.513,index:12,y:0,scaleY:1},{x:-305,index:16,y:0,scaleX:0.513,scaleY:1},{x:-280,index:17,y:0,scaleX:0.513,scaleY:1},{x:-218,index:18,y:0,scaleX:0.513,scaleY:1},{x:-31,index:20,y:0,scaleX:0.513,scaleY:1},{x:217,index:22,y:0,scaleX:0.513,scaleY:1},{x:457,index:24,y:0,scaleX:0.513,scaleY:1},{x:551,index:25,y:0,scaleX:0.513,scaleY:1},{index:36,x:551,y:0,scaleX:0.513,scaleY:1}]},gridpiece44:{source:[{x:1078,y:963,scaleX:1,scaleY:1,rotation:0,frameRate:30,offsetX:0,offsetY:0}],Keyframe:[{index:0,rotation:0,scaleX:1,scaleY:1},{index:9,x:0,y:0,rotation:0,scaleX:1,scaleY:1},{x:-3,y:4,scaleX:1.017,scaleY:0.947,index:10,rotation:0},{x:-15,y:134,scaleX:1.1,scaleY:0.682,index:15,rotation:0},{x:-18,y:143,scaleX:1.117,scaleY:0.629,index:16,rotation:0},{x:-15,scaleX:1.116,scaleY:0.633,rotation:6,index:17,y:143},{x:-8,scaleX:1.115,scaleY:0.642,rotation:46,index:19,y:143},{x:-1,y:143,scaleY:0.652,rotation:84,index:21,scaleX:1.115},{x:2,y:143,scaleX:1.117,scaleY:0.658,rotation:90,index:22},{y:145,index:23,x:2,rotation:90,scaleX:1.117,scaleY:0.658},{y:189,index:24,x:2,rotation:90,scaleX:1.117,scaleY:0.658},{y:285,index:25,x:2,rotation:90,scaleX:1.117,scaleY:0.658},{y:755,index:28,x:2,rotation:90,scaleX:1.117,scaleY:0.658},{y:875,index:29,x:2,rotation:90,scaleX:1.117,scaleY:0.658},{index:36,x:2,y:875,rotation:90,scaleX:1.117,scaleY:0.658}]},gridpiece51:{source:[{x:154,y:1238,scaleY:1,frameRate:30,offsetX:0,offsetY:0,scaleX:1}],Keyframe:[{index:0,scaleX:1,scaleY:1},{index:12,x:0,y:0,scaleX:1,scaleY:1},{scaleY:0.869,index:14,x:0,y:0,scaleX:1},{scaleY:0.592,index:16,x:0,y:0,scaleX:1},{scaleY:0.214,index:18,x:0,y:0,scaleX:1},{y:-19,scaleY:0.171,index:20,x:0,scaleX:1},{y:-50,scaleY:0.426,index:22,x:0,scaleX:1},{y:-67,scaleY:0.579,index:24,x:0,scaleX:1},{y:-53,index:25,x:0,scaleX:1,scaleY:0.579},{y:-12,index:26,x:0,scaleX:1,scaleY:0.579},{y:44,index:27,x:0,scaleX:1,scaleY:0.579},{y:209,index:29,x:0,scaleX:1,scaleY:0.579},{y:399,index:31,x:0,scaleX:1,scaleY:0.579},{y:531,index:32,x:0,scaleX:1,scaleY:0.579},{index:36,x:0,y:531,scaleX:1,scaleY:0.579}]},gridpiece52:{source:[{x:462,y:1238,scaleX:1,scaleY:1,frameRate:30,offsetX:0,offsetY:0}],Keyframe:[{index:0,scaleX:1,scaleY:1},{scaleX:0.714,scaleY:1.422,index:5,x:0,y:0},{scaleX:0.039,index:8,x:0,y:0,scaleY:1.422},{scaleX:0.208,index:9,x:0,y:0,scaleY:1.422},{scaleX:0.416,index:11,x:0,y:0,scaleY:1.422},{scaleX:0.442,index:12,x:0,y:0,scaleY:1.422},{x:4,index:14,y:0,scaleX:0.442,scaleY:1.422},{x:4,index:16,y:0,scaleX:0.442,scaleY:1.422},{x:28,index:17,y:0,scaleX:0.442,scaleY:1.422},{x:171,index:19,y:0,scaleX:0.442,scaleY:1.422},{x:394,index:21,y:0,scaleX:0.442,scaleY:1.422},{x:766,index:24,y:0,scaleX:0.442,scaleY:1.422},{x:850,index:25,y:0,scaleX:0.442,scaleY:1.422},{index:36,x:850,y:0,scaleX:0.442,scaleY:1.422}]},gridpiece53:{source:[{x:770,y:1238,scaleX:1,scaleY:1,rotation:0,frameRate:30,offsetX:0,offsetY:0}],Keyframe:[{index:0,rotation:0,scaleX:1,scaleY:1},{index:9,x:0,y:0,rotation:0,scaleX:1,scaleY:1},{x:0,y:0,scaleX:0.964,scaleY:0.976,rotation:-10,index:10},{y:-1,scaleX:0.859,scaleY:0.906,rotation:-79,index:13,x:0},{x:0,y:-1,scaleX:0.825,scaleY:0.884,rotation:-90,index:14},{index:16,x:0,y:-1,rotation:-90,scaleX:0.825,scaleY:0.884},{y:20,index:17,x:0,rotation:-90,scaleX:0.825,scaleY:0.884},{y:65,index:18,x:0,rotation:-90,scaleX:0.825,scaleY:0.884},{y:137,index:19,x:0,rotation:-90,scaleX:0.825,scaleY:0.884},{y:493,index:23,x:0,rotation:-90,scaleX:0.825,scaleY:0.884},{y:545,index:24,x:0,rotation:-90,scaleX:0.825,scaleY:0.884},{index:36,x:0,y:545,rotation:-90,scaleX:0.825,scaleY:0.884}]},gridpiece54:{source:[{x:1078,y:1238,scaleX:1,scaleY:1,rotation:0,frameRate:30,offsetX:0,offsetY:0}],Keyframe:[{index:0,rotation:0,scaleX:1,scaleY:1},{index:13,x:0,y:0,rotation:0,scaleX:1,scaleY:1},{scaleX:0.999,scaleY:1.004,rotation:-9,index:14,x:0,y:0},{scaleY:1.023,rotation:-82,index:18,x:0,y:0,scaleX:0.999},{scaleX:1,scaleY:1.029,rotation:-90,index:19,x:0,y:0},{index:23,x:0,y:0,rotation:-90,scaleX:1,scaleY:1.029},{y:42,index:24,x:0,rotation:-90,scaleX:1,scaleY:1.029},{x:0,y:141,index:25,rotation:-90,scaleX:1,scaleY:1.029},{x:0,y:273,index:26,rotation:-90,scaleX:1,scaleY:1.029},{y:422,index:27,x:0,rotation:-90,scaleX:1,scaleY:1.029},{y:598,index:28,x:0,rotation:-90,scaleX:1,scaleY:1.029},{index:36,x:0,y:598,rotation:-90,scaleX:1,scaleY:1.029}]},gridpiece61:{source:[{x:154,y:1512,scaleX:1,scaleY:1,frameRate:30,offsetX:0,offsetY:0}],Keyframe:[{index:0,scaleX:1,scaleY:1},{x:15,y:-14,scaleX:1.097,scaleY:1.102,index:8},{x:20,scaleX:1.165,index:9,y:-14,scaleY:1.102},{x:59,scaleX:1.172,index:10,y:-14,scaleY:1.102},{x:297,scaleX:1.201,index:14,y:-14,scaleY:1.102},{x:314,scaleX:1.208,index:15,y:-14,scaleY:1.102},{index:18,x:314,y:-14,scaleX:1.208,scaleY:1.102},{y:-8,index:19,x:314,scaleX:1.208,scaleY:1.102},{y:-3,index:20,x:314,scaleX:1.208,scaleY:1.102},{y:2,index:21,x:314,scaleX:1.208,scaleY:1.102},{y:10,index:22,x:314,scaleX:1.208,scaleY:1.102},{y:45,index:23,x:314,scaleX:1.208,scaleY:1.102},{y:212,index:25,x:314,scaleX:1.208,scaleY:1.102},{y:316,index:26,x:314,scaleX:1.208,scaleY:1.102},{index:36,x:314,y:316,scaleX:1.208,scaleY:1.102}]},gridpiece62:{source:[{x:462,y:1512,scaleY:1,frameRate:30,offsetX:0,offsetY:0,scaleX:1}],Keyframe:[{index:0,scaleX:1,scaleY:1},{scaleY:0.922,index:2,x:0,y:0,scaleX:1},{scaleY:0.058,index:9,x:0,y:0,scaleX:1},{x:14,scaleY:0.116,index:10,y:0,scaleX:1},{x:86,y:0,scaleY:0.339,index:12,scaleX:1},{x:138,scaleY:0.474,index:14,y:0,scaleX:1},{x:144,y:0,scaleY:0.509,index:15,scaleX:1},{y:7,index:16,x:144,scaleX:1,scaleY:0.509},{y:6,index:18,x:144,scaleX:1,scaleY:0.509},{y:10,index:20,x:144,scaleX:1,scaleY:0.509},{y:24,index:22,x:144,scaleX:1,scaleY:0.509},{y:57,index:23,x:144,scaleX:1,scaleY:0.509},{y:132,index:24,x:144,scaleX:1,scaleY:0.509},{y:272,index:25,x:144,scaleX:1,scaleY:0.509},{index:36,x:144,y:272,scaleX:1,scaleY:0.509}]},gridpiece63:{source:[{x:770,y:1512,scaleX:1,frameRate:30,offsetX:0,offsetY:0,scaleY:1}],Keyframe:[{index:0,scaleX:1,scaleY:1},{index:11,x:0,y:0,scaleX:1,scaleY:1},{scaleX:0.571,index:16,x:0,y:0,scaleY:1},{y:9,index:21,x:0,scaleX:0.571,scaleY:1},{y:61,index:23,x:0,scaleX:0.571,scaleY:1},{y:133,index:24,x:0,scaleX:0.571,scaleY:1},{y:222,index:25,x:0,scaleX:0.571,scaleY:1},{y:286,index:26,x:0,scaleX:0.571,scaleY:1},{index:36,x:0,y:286,scaleX:0.571,scaleY:1}]},gridpiece64:{source:[{x:1078,y:1512,scaleY:1,frameRate:30,offsetX:0,offsetY:0,scaleX:1}],Keyframe:[{index:0,scaleX:1,scaleY:1},{index:15,x:0,y:0,scaleX:1,scaleY:1},{y:-9,scaleY:0.98,index:16,x:0,scaleX:1},{y:-51,scaleY:0.804,index:19,x:0,scaleX:1},{y:-78,scaleY:0.749,index:21,x:0,scaleX:1},{y:-84,scaleY:0.738,index:23,x:0,scaleX:1},{y:-43,index:24,x:0,scaleX:1,scaleY:0.738},{y:59,index:25,x:0,scaleX:1,scaleY:0.738},{y:194,index:26,x:0,scaleX:1,scaleY:0.738},{y:272,index:27,x:0,scaleX:1,scaleY:0.738},{index:36,x:0,y:272,scaleX:1,scaleY:0.738}]}}}}}};__ngs._g1={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.NotificationViewDefinition={images:[{name:"icon",anchor_x:0.5,anchor_y:0.5,pos_x:67,pos_y:40,size_x:50,size_y:50,asset:"Content/Images8x/UI/icon/icon_message.png",depth:1},{name:"arrowIcon",anchor_x:1,anchor_y:0.5,pos_x:570,pos_y:40,size_x:30,size_y:30,asset:"Content/Images8x/UI/icon/icon_arrows_single_white.png",depth:1},{name:"notificationBackground",anchor_x:0,anchor_y:0,pos_x:0,pos_y:0,size_y:90,size_x:306,asset:"Content/Images8x/UI/01_main/bg_messages_middle.png",depth:0},{name:"notificationBackgroundRight",anchor_x:0,anchor_y:0,pos_x:306,pos_y:0,size_y:90,size_x:306,flip_x:true,asset:"Content/Images8x/UI/01_main/bg_messages_middle.png",depth:0}],labels:[{name:"messageLabel",anchor_x:0,anchor_y:0.5,pos_x:130,pos_y:40,size_x:500,size_y:50,text:"",font_size:22,fontType:"Content/Fonts/text.otf",horizontalAlign:"left",verticalAlign:"middle",color:[183,226,240]}],tfbuttons:[{name:"feedButton",anchor_x:0,anchor_y:0.5,pos_x:15,pos_y:40,size_x:585,size_y:108,type:0,info:{id:1},action:"onTouchAction",sound:["click_flat"]}],progressBar:[],lists:[],groupDefinitions:{},groups:[]}}};__ngs._cy={_c:null,_d:function(){var e={exports:{}};var c=e.exports;this._c=e;var g=function(l){if(l&&l.constructor===this.ObjectConstructor){if(this.cursor<this._poolSize){this[this.cursor++]=l;return true}}return false};var b=function(){var l;if(this.cursor>0){l=this[--this.cursor];this[this.cursor]=null}else{l=new this.ObjectConstructor()}l.setAll.apply(l,arguments);return l};var k=function(l){while(this.cursor<l){this[this.cursor++]=new this.ObjectConstructor()}};var d=function(){this.length=this.cursor=0};var h=function(l){this._poolSize=l;if(this.length>l){this.length=l}if(this.cursor>l){this.cursor=l}};var a=function(){return"Pool of "+this.ObjectConstructor.classname+": "+this.cursor+" / "+this.poolSize+" (array size "+this.length+")"};c.Pool={create:function(m,n){var l=new Array();l.ObjectConstructor=m;l._poolSize=n;l.cursor=0;l.reserve=k;l.put=g;l.get=b;l.drain=d;l.setPoolSize=h;l.debugInfo=a;return l}}}};__ngs._cz={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var a=null;b.setRouterInstance=function(d){a=d};b.getRouterInstance=function(){return a}}};__ngs._d0={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var b=__ngs.r_(__ngs._fi).Router;var a=__ngs.r_(__ngs._cz);a.setRouterInstance(new b())}};__ngs._d1={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var a=__ngs.r_(__ngs._7c).Dispatcher;var d={getObjectPublicInterface:function(g,h,k){if(g[k]){return g[k]}var e=Array.apply(null,arguments);if(e&&e.length>3){e.splice(0,3)}else{e=[]}var l={forAll:function(n,m){a.callMethodOnRemoteObject(g,[h,"forAll"],[e,[n,m]])},forRange:function(p,o,n,m){a.callMethodOnRemoteObject(g,[h,"forRange"],[e,[p,o,n,m]])},forItem:function(n,o,m){a.callMethodOnRemoteObject(g,[h,"forItem"],[e,[n,o,m]])}};g[k]=l;return l},getClassPublicInterface:function(e,g,h){if(e[h]){return e[h]}var k={forAll:function(m,l){a.callClassMethodOnRemoteObject(e,[g,"forAll"],[[],[m,l]])},forRange:function(o,n,m,l){a.callClassMethodOnRemoteObject(e,[g,"forRange"],[[],[o,n,m,l]])},forItem:function(m,n,l){a.callClassMethodOnRemoteObject(e,[g,"forItem"],[[],[m,n,l]])}};e[h]=k;return k}};b.OrderedList=d}};__ngs._d2={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._7p).View;var a=__ngs.r_(__ngs._4e).GLButton;b.DialogView=d.subclass({classname:"DialogView",initialize:function($super,g,h,e){this._shade=new a(undefined,"./Content/Images8x/misc/1pxwhite.png");this._shade.setFeedback(false);this._shade.setAnchor(new Core.Point(0.5,0.5));this._shade.setSize(new Core.Size(TFSceneDirector.getScreenWidth()/TFSceneDirector._workingArea.scaleX,TFSceneDirector.getScreenHeight()/TFSceneDirector._workingArea.scaleY));this._shade.setImageColor(0,0,0);this._shade.setAlpha(0);this._shade.setDepth(-1);this._shade.setOnPressCallback(g.onShadeTouched.bind(g));this._shade.setSoundList([]);$super(g,h,e);TFSceneDirector._dialogLayer.addChild(this._shade)},showShade:function(){this._shade.setAlpha(0.7)},destroy:function($super){if(this._shade&&this._shade.__objectRegistryId){this._shade.destroy()}$super()}})}};__ngs._d3={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.PopUpDefinition={images:[{name:"regpaneltopImage",anchor_x:0.5,anchor_y:0.5,pos_x:-160,pos_y:-85,size_x:320,size_y:245,asset:"Content/Images8x/UI/Prompt/reg_panel_top.png"},{name:"regpanelbottomImage",anchor_x:0.5,anchor_y:0.5,pos_x:-160,pos_y:129,size_x:320,size_y:183,asset:"Content/Images8x/UI/Prompt/reg_panel_bottom.png"},{name:"regpaneltopImage2",anchor_x:0.5,anchor_y:0.5,pos_x:160,pos_y:-85,size_x:320,size_y:245,asset:"Content/Images8x/UI/Prompt/reg_panel_top.png",flip_x:true},{name:"regpanelbottomImage2",anchor_x:0.5,anchor_y:0.5,pos_x:160,pos_y:129,size_x:320,size_y:183,asset:"Content/Images8x/UI/Prompt/reg_panel_bottom.png",flip_x:true},{name:"reg1Image",anchor_x:0.5,anchor_y:0.5,pos_x:0,pos_y:-175,size_x:95,size_y:114,asset:"Content/Images8x/UI/Prompt/reg_header_2.png",depth:4,info:{asset2:"Content/Images8x/UI/Prompt/reg_header_1.png"}},{name:"regheaderImage",anchor_x:0.5,anchor_y:0.5,pos_x:2,pos_y:-180,size_x:161,size_y:118,asset:"Content/Images8x/UI/Prompt/reg_header_frame.png",depth:2},{name:"creditsImage",pos_x:10,pos_y:0,size_x:32,size_y:32,asset:"Content/Images8x/UI/icon/icon_currency.png",visible:false}],labels:[{name:"Title",anchor_x:0.5,anchor_y:0.5,pos_x:0,pos_y:-80,size_x:380,size_y:100,font_size:42,fontType:"Content/Fonts/SFElectrotome.ttf",color:[245,255,0],text:""},{name:"Text",anchor_x:0.5,anchor_y:0,pos_x:0,pos_y:-40,size_x:540,size_y:280,horizontalAlign:"middle",verticalAlign:"top",font_size:24,fontType:"Content/Fonts/text.otf",color:[183,226,240],text:"ui_cost"},{name:"Credits",anchor_x:0.5,anchor_y:0,pos_x:-15,pos_y:5,size_x:160,size_y:180,horizontalAlign:"right",verticalAlign:"top",font_size:24,fontType:"Content/Fonts/text.otf",color:[173,255,154],text:"",visible:false},{name:"fusionCost2",anchor_x:0.5,anchor_y:0,pos_x:0,pos_y:-10,size_x:540,size_y:180,horizontalAlign:"middle",verticalAlign:"top",font_size:24,fontType:"Content/Fonts/text.otf",color:[183,226,240],text:"",visible:false}],tfbuttons:[{name:"cancelButton",anchor_x:0.5,anchor_y:0.5,pos_x:-150,pos_y:215,size_x:280,size_y:110,font_size:46,action:"onDismiss",text:"ui_cancel",fontType:"Content/Fonts/SFElectrotome.ttf",info:{alt_pos_x:0,alt_size_x:230,buttontype:"cancel"},type:8,sound:["click_low"]},{name:"okButton",anchor_x:0.5,anchor_y:0.5,pos_x:150,pos_y:215,size_x:280,size_y:110,font_size:46,action:"onOk",text:"ui_confirm",fontType:"Content/Fonts/SFElectrotome.ttf",type:5,sound:["click_high"]}]}}};__ngs._d4={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var d=__ngs.r_(__ngs._5).Core;var c=__ngs.r_(__ngs._6).Proc;a.ActiveEffect=d.Class.subclass({initialize:function(e){this._volume=1;this._loops=false;this._playing=false;this._paused=false;this._playCompleteEmitter=new d.MessageEmitter();d.ObjectRegistry.register(this);this._createSendGen(this.__objectRegistryId);this._setEffect(e)},destroy:function(){this.stop();this._effect=null;this._playCompleteEmitter.destroy();this._destroySendGen();d.ObjectRegistry.unregister(this)},getVolume:function(){return this._volume},setVolume:function(e){if(e<0){e=0}if(e>1){e=1}this._volume=e;this._setVolumeSendGen(e);return this},getLoops:function(){return this._loops},setLoops:function(e){this._loops=e;this._setLoopsSendGen(e);return this},getPlayCompleteEmitter:function(){return this._playCompleteEmitter},getIsPlaying:function(){return this._playing},getIsPaused:function(){return this._paused},play:function(){this._playing=true;this._paused=false;this._playSendGen()},pause:function(){this._playing=false;this._paused=true;this._pauseSendGen()},stop:function(){this._playing=false;this._paused=false;this._stopSendGen()},_classId:328,_playCompleteRecvGen:function(e){if((e.length-e.idx)!==0){NgLogE("Could not parse due to wrong argument count in ActiveEffect.playComplete from command: "+e);return false}return this._playCompleteRecv()},$_createSendGen:function(e){c.appendToCommandString(21561343,[+e])},_destroySendGen:function(){c.appendToCommandString(21495810,this)},_setVolumeSendGen:function(e){c.appendToCommandString(21495811,this,[+e])},_setLoopsSendGen:function(e){c.appendToCommandString(21495812,this,[(e?1:0)])},_playSendGen:function(){c.appendToCommandString(21495813,this)},_pauseSendGen:function(){c.appendToCommandString(21495814,this)},_stopSendGen:function(){c.appendToCommandString(21495815,this)},_setEffectSendGen:function(e){c.appendToCommandString(21495816,this,[+e])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[328]=this._instance||this;PROC_METHOD_TABLE[21495817]=this.prototype._playCompleteRecvGen},_setEffect:function(e){this._effect=e;this._setEffectSendGen(this._effect.__objectRegistryId);return this},_playCompleteRecv:function(){this._playing=false;this._paused=false;this._playCompleteEmitter.emit(this)}})}};__ngs._d5={_c:null,_d:function(){var e={exports:{}};var c=e.exports;this._c=e;var g=__ngs.r_(__ngs._6).Proc;var b=__ngs.r_(__ngs._19).ObjectRegistry;var a=__ngs.r_(__ngs._z).Class;var d=__ngs.r_(__ngs._9).Device;c.Effect=a.subclass({initialize:function(h){b.register(this);this._createSendGen(this.__objectRegistryId);this._setPath(h);d.effectCreated(h)},destroy:function(){this._destroySendGen();b.unregister(this);d.effectDestroyed()},_setPath:function(h){this._path=h;this._setPathSendGen(h);return this},_classId:326,$_createSendGen:function(h){g.appendToCommandString(21430271,[+h])},_destroySendGen:function(){g.appendToCommandString(21364738,this)},_setPathSendGen:function(h){g.appendToCommandString(21364739,this,[g.encodeString(h)])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[326]=this._instance||this}})}};__ngs._d6={_c:null,_d:function(){var e={exports:{}};var c=e.exports;this._c=e;var g=__ngs.r_(__ngs._6).Proc;var b=__ngs.r_(__ngs._z).Class;var d=__ngs.r_(__ngs._12).MessageListener;var a=__ngs.r_(__ngs._1y).MessageEmitter;c.Music=b.singleton({classname:"Music",initialize:function(){var h=__ngs.r_(__ngs._21).UpdateEmitter;var k=__ngs.r_(__ngs._19).ObjectRegistry;k.register(this);this._createSendGen(this.__objectRegistryId);this._path=null;this._playing=false;this._paused=false;this._volume=1;this._currentTimeCode=0;this._stateChangeEmitter=new a();this._timeCodeEmitter=new this._TimeCodeEmitter();this._updateListener=new this._TimeCodeListener(this._timeCodeEmitter);h.addListener(this._updateListener,this._updateListener.onUpdate)},destroy:function(){var h=__ngs.r_(__ngs._21).UpdateEmitter;var k=__ngs.r_(__ngs._19).ObjectRegistry;h.removeListener(this._updateListener);this._stateChangeEmitter.destroy();this._timeCodeEmitter.destroy();this._destroySendGen();k.unregister(this)},getPath:function(){return this._path},setPath:function(h){if(h==null){throw new Error("Audio.Music setPath(): no path was provided")}this._path=h;this._setPathSendGen(h)},getVolume:function(){return this._volume},setVolume:function(h){if(h<0){h=0}if(h>1){h=1}this._volume=h;this._setVolumeSendGen(h);return this},getIsPlaying:function(){return this._playing},getIsPaused:function(){return this._paused},play:function(){this._playing=true;this._paused=false;this._playSendGen()},pause:function(){this._playing=false;this._paused=true;this._pauseSendGen()},stop:function(){this._playing=false;this._paused=false;this._stopSendGen()},setLoop:function(h){this._setLoopSendGen(h)},getStateChangeEmitter:function(){return this._stateChangeEmitter},getTimeCodeEmitter:function(){return this._timeCodeEmitter},getCurrentTimeCode:function(){return this._currentTimeCode},PlayState:{Stop:0,Play:1,Pause:2},_classId:329,_playCompleteRecvGen:function(h){if((h.length-h.idx)!==0){NgLogE("Could not parse due to wrong argument count in Music.playComplete from command: "+h);return false}return this._playCompleteRecv()},_updatePlayStateRecvGen:function(k){if((k.length-k.idx)!==1){NgLogE("Could not parse due to wrong argument count in Music.updatePlayState from command: "+k);return false}var h=g.parseInt(k[k.idx++]);if(h===undefined){NgLogE("Could not parse state in Music.updatePlayState from command: "+k);return false}return this._updatePlayStateRecv(h)},_updateTimeCodeRecvGen:function(k){if((k.length-k.idx)!==1){NgLogE("Could not parse due to wrong argument count in Music.updateTimeCode from command: "+k);return false}var h=g.parseInt(k[k.idx++]);if(h===undefined){NgLogE("Could not parse elapsedMilliSecond in Music.updateTimeCode from command: "+k);return false}return this._updateTimeCodeRecv(h)},$_createSendGen:function(h){g.appendToCommandString(21626879,[+h])},_destroySendGen:function(){g.appendToCommandString(21561346,this)},_setPathSendGen:function(h){g.appendToCommandString(21561347,this,[g.encodeString(h)])},_setVolumeSendGen:function(h){g.appendToCommandString(21561348,this,[+h])},_playSendGen:function(){g.appendToCommandString(21561349,this)},_pauseSendGen:function(){g.appendToCommandString(21561350,this)},_stopSendGen:function(){g.appendToCommandString(21561351,this)},_setLoopSendGen:function(h){g.appendToCommandString(21561355,this,[(h?1:0)])},__startTimeCodeUpdatingSendGen:function(){g.appendToCommandString(21561356,this)},__stopTimeCodeUpdatingSendGen:function(){g.appendToCommandString(21561357,this)},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[329]=this._instance||this;PROC_METHOD_TABLE[21561352]=this.prototype._playCompleteRecvGen;PROC_METHOD_TABLE[21561353]=this.prototype._updatePlayStateRecvGen;PROC_METHOD_TABLE[21561354]=this.prototype._updateTimeCodeRecvGen},_playCompleteRecv:function(){this._playing=false;this._paused=false},_updatePlayStateRecv:function(h){if(this._stateChangeEmitter.getListenerCount()===0){return}this._stateChangeEmitter.emit(h)},_updateTimeCodeRecv:function(h){this._currentTimeCode=h},_TimeCodeListener:d.subclass({classname:"_TimeCodeListener",initialize:function(h){this._emitter=h},onUpdate:function(){var h=c.Music.getCurrentTimeCode();this._emitter.emit(h)}}),_TimeCodeEmitter:a.subclass({classname:"_timeCodeEmitter",addListener:function($super,l,k,h){if(this.getListenerCount()===0){c.Music.__startTimeCodeUpdatingSendGen()}$super(l,k,h)},removeListener:function($super,h){$super(h);if(this.getListenerCount()===0){c.Music.__stopTimeCodeUpdatingSendGen()}}})})}};__ngs._d7={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.TFButtonShine=function(){return{motions:{shine:{Keyframe:[{x:0,index:0,alpha:0,},{x:0,index:1,alpha:0,},{x:0.25,index:15,alpha:1,},{x:0.75,index:45,alpha:1,},{x:1,index:60,alpha:0,},{x:0,index:120,alpha:0,}],source:[{frameRate:30,x:0,alpha:1}]}}}}}};__ngs._d8={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var d=__ngs.r_(__ngs._7p).View;var b=__ngs.r_(__ngs._fj).ComboBoxButtonViewDefinition;a.ComboBoxButtonView=d.subclass({classname:"ComboBoxButtonView",initialize:function($super,g,e){this._buttonSize=e;var h=b;h.labels[0].size_x=this._buttonSize._width-20;h.labels[0].size_y=this._buttonSize._height;h.buttons[0].size_x=this._buttonSize._width;h.buttons[0].size_y=this._buttonSize._height;$super(g,h)},setSelectedOption:function(){return true},destroy:function($super){$super()}})}};__ngs._d9={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var g=__ngs.r_(__ngs._7p).View;var e=__ngs.r_(__ngs._4b).UILoader;var a=__ngs.r_(__ngs._45).AnimationManager;var c=__ngs.r_(__ngs._45).AnimationQueue;b.TFScrollView=g.subclass({classname:"TFScrollView",DEBUG_getNodeHierarchyRect:false,DEBUG_setClippingRect:false,DEBUG_draw:false,DEBUG_touchTarget:false,initialize:function($super,k,l,h){console.log("TFScrollView > initialize");this._scrollable=true;this._scrollVelocity=0;this._nextListItemPos=new Core.Point(0,0);this._am=new a();this._limitClipHeight=0;this._touchTarget=new GL2.TouchTarget();this._touchTarget.setPosition(0,0);this._touchTarget.setSize(this._size);this._touchListener=new Core.MessageListener();this._touchTarget.getTouchEmitter().addListener(this._touchListener,this._onTouch.bind(this));this._touchTarget.spr=new GL2.Sprite();this._touchTarget.spr.setImage("Content/Images8x/misc/1pxwhite.png",new Core.Size(this._touchTarget.getSize().getWidth()-10,this._touchTarget.getSize().getHeight()-10),this._touchTarget.getAnchor(),[0,0,1,1]);this._touchTarget.spr.setPosition(5,5);this._touchTarget.spr.setColor(128/255,0/255,64/255);this._touchTarget.spr.setAlpha(0.5);this._touchTarget.addChild(this._touchTarget.spr);this._touchTarget.spr.setVisible(this.DEBUG_touchTarget);$super(k,l,h)},onViewDoneLoading:function(k){console.log("(DYNAMICJSON) TFScrollView("+this.classname+") > onViewDoneLoading");this._viewData=k;var h=TFSceneDirector.getWorkingArea();this._pos=new Core.Point(-h.offsetX/h.scaleX,-h.offsetY/h.scaleY);this._size=new Core.Size(h.screenWidth,h.screenHeight);this.setPosition(this._pos);this._updateListener=new Core.MessageListener();Core.UpdateEmitter.addListener(this._updateListener,this._onUpdate.bind(this));this.addChild(this._touchTarget);if(this._viewData&&this._viewData.staticBackgroundImages){console.log("(DYNAMICJSON) TFScrollView("+this.classname+") > onViewDoneLoading > static background");e.loadView(this._viewData.staticBackgroundImages,this)}this._scrollArea=new GL2.Node();this._scrollArea._definitions=[];this._scrollArea._totalHeight=0;this._scrollArea._viewData=this._viewData;this._scrollArea.getParentController=function(){return this._parentController}.bind(this);this.addChild(this._scrollArea);if(this._viewData){console.log("(DYNAMICJSON) TFScrollView("+this.classname+") > onViewDoneLoading > normal load");e.loadView(this._viewData,this._scrollArea);this.getNodeHierarchyRect(this._scrollArea)}this._viewIsLoaded=true;for(var l in this._loadDoneCallbacks){console.log("(DYNAMICJSON) TFScrollView("+this.classname+") > onViewDoneLoading > invoking loadDoneCallback "+l);this._loadDoneCallbacks[l]()}},setArea:function(k,h){console.log("TFScrollView > setArea > pos="+JSON.stringify(k)+", size="+JSON.stringify(h));this._pos=k;this._size=h;if(this._sizeTemp){this._sizeTemp.setWidth(h.getWidth())}this.setPosition(k);this._touchTarget.setSize(h);this._touchTarget.spr.setImage("Content/Images8x/misc/1pxwhite.png",new Core.Size(h.getWidth()-10,h.getHeight()-10),this._touchTarget.getAnchor(),[0,0,1,1]);this.setClippingRect()},addListItem:function(k){console.log("TFScrollView > addListItem > Node("+k.classname+")");this._scrollArea.addChild(k);k.setPosition(this._nextListItemPos);var h=this.getNodeHierarchyRect(k).getSize();console.log("TFScrollView > addListItem > nodeSize="+JSON.stringify(h));this._nextListItemPos.setY(this._nextListItemPos.getY()+h.getHeight())},setClippingRect:function(){var l=this._sizeTemp||this._size;if(this._pos&&l){var n=this.localToScreen(new Core.Point(0,0));var o=this.localToScreen(new Core.Point(l.getWidth(),l.getHeight()));if(this.DEBUG_setClippingRect){console.log("TFScrollView > setClippingRect > tl="+JSON.stringify(n)+", br="+JSON.stringify(o)+", size="+JSON.stringify(l))}if(n&&o){var k=TFSceneDirector.getWorkingArea();var m=TFSceneDirector.getScreenHeight()-this._limitClipHeight*k.scaleY;if(this.DEBUG_setClippingRect){console.log("TFScrollView > setClippingRect > maxY="+m)}if(o.getY()>m){if(this.DEBUG_setClippingRect){console.log("TFScrollView > setClippingRect > clamping height to "+m)}var h=this.screenToLocal(new Core.Point(0,m)).getY();if(this.DEBUG_setClippingRect){console.log("TFScrollView > setClippingRect > newHeight="+h)}this._size.setHeight(h);o.setY(m)}this.setClipRectEnabled(true);this.setClipRect(new Core.Rect(n,new Core.Size(o.getX()-n.getX(),o.getY()-n.getY())))}else{this.setClipRectEnabled(false)}}},animateClippingRect:function(k,m){if(this._animatingClippingRect){return}console.log("TFScrollView > animateClippingRect > newHeight="+k+", duration="+m);var l=this._sizeTemp||this._size;var n=l.getHeight();if(!this._sizeTemp){this._sizeTemp=new Core.Size(this._size.getWidth(),this._size.getHeight())}if(m&&this._am){var h=new c(this._am);h.pushCallback(function(){this._animatingClippingRect=true});h.pushAnimation(10,c.Curve.Linear);h.pushAnimation(m,c.Curve.EaseIn);h.tween(c.Interpolate.scalar(n,k),function(o){this._sizeTemp.setHeight(o)}.bind(this));h.pushCallback(function(){this._animatingClippingRect=false});setTimeout(h.start.bind(h),1)}else{this._sizeTemp.setHeight(k)}},show:function(h){this._isHidden=false;this.animateClippingRect(this._size.getHeight(),h)},hide:function(h){this._isHidden=true;this.animateClippingRect(0,h)},isHidden:function(){return this._isHidden},setClipHeightLimit:function(h){console.log("TFScrollView > setClipHeightLimit > value="+h);if(h>this._limitClipHeight){this._limitClipHeight=h}},getNodeHierarchyRect:function(o){var k=o.getParent();if(k){o.getParent().removeChild(o)}GL2.Root.addChild(o);var q=[o];if(this.DEBUG_getNodeHierarchyRect){console.log("TFScrollView > getNodeHierarchyRect > INITIAL NODESTACK="+q.length)}var h,p;var v,m;while(q.length){var n=q.pop();if(this.DEBUG_getNodeHierarchyRect){console.log("TFScrollView > getNodeHierarchyRect > NODE("+n.classname+") "+n.getPosition().getX()+","+n.getPosition().getY())}if(n._children&&n._children.length){if(this.DEBUG_getNodeHierarchyRect){console.log("TFScrollView > getNodeHierarchyRect > ADDING "+n._children.length+" CHILDREN")}}q=q.concat(n._children);if(n.getSize){var x=n.localToScreen(new Core.Point(0,0));var t=n.localToScreen(new Core.Point(n.getSize().getWidth(),0));var l=n.localToScreen(new Core.Point(0,n.getSize().getHeight()));var w=n.localToScreen(new Core.Point(n.getSize().getWidth(),n.getSize().getHeight()));var y=Math.min(x.getX(),t.getX(),l.getX(),w.getX());var s=Math.max(x.getX(),t.getX(),l.getX(),w.getX());var u=Math.min(x.getY(),t.getY(),l.getY(),w.getY());var r=Math.max(x.getY(),t.getY(),l.getY(),w.getY());if(this.DEBUG_getNodeHierarchyRect){console.log("TFScrollView > getNodeHierarchyRect > xMinThis="+u+", xMaxThis="+s)}if(this.DEBUG_getNodeHierarchyRect){console.log("TFScrollView > getNodeHierarchyRect > yMinThis="+u+", yMaxThis="+r)}if((h===undefined)||(y<h)){h=y}if((p===undefined)||(s>p)){p=s}if(this.DEBUG_getNodeHierarchyRect){console.log("TFScrollView > getNodeHierarchyRect > Overall: xMin="+h+", xMax="+p)}if((v===undefined)||(u<v)){v=u}if((m===undefined)||(r>m)){m=r}if(this.DEBUG_getNodeHierarchyRect){console.log("TFScrollView > getNodeHierarchyRect > Overall: yMin="+v+", yMax="+m)}}}if(this.DEBUG_getNodeHierarchyRect){console.log("TFScrollView > getNodeHierarchyRect > Final: xMin="+h+", xMax="+p)}if(this.DEBUG_getNodeHierarchyRect){console.log("TFScrollView > getNodeHierarchyRect > Final: yMin="+v+", yMax="+m)}GL2.Root.removeChild(o);if(k){k.addChild(o)}return new Core.Rect(new Core.Point(h,v),new Core.Size(p-h,m-v))},resizeScrollArea:function(){var h=this.getNodeHierarchyRect(this._scrollArea);this.setArea(this._pos,h.getSize());this._scrollArea._totalHeight=h.getSize().getHeight()},_onUpdate:function(h){this.setClippingRect();this._draw(h)},_draw:function(q){if(!this.viewIsLoaded()){return}var l=q;if(this.DEBUG_draw){console.log("TFScrollView > _draw > dt="+l)}this._scrollVelocity*=0.9;if(Math.abs(this._scrollVelocity)<1){this._scrollVelocity=0}if(this.DEBUG_draw){console.log("TFScrollView > _draw > scrollVelocity="+this._scrollVelocity)}this._scrollArea.setPosition(this._scrollArea.getPosition().getX(),this._scrollArea.getPosition().getY()+this._scrollVelocity*l);if(this.DEBUG_draw){console.log("TFScrollView > _draw > pos="+JSON.stringify(this._scrollArea.getPosition()))}if(!this._dragging){var h=this._scrollArea.getPosition().getY();var o=h+this._scrollArea._totalHeight;var p=0;var m=this._size.getHeight();var k=0;if(this.DEBUG_draw){console.log("TFScrollView > _draw > topY="+h+", botY="+o+", minY="+p+", maxY="+m)}if(h>m){this._scrollVelocity=0;h=m;o=h+this._scrollArea._totalHeight;this._scrollArea.setPosition(this._scrollArea.getPosition().getX(),h)}else{if(o<p){this._scrollVelocity=0;h=p-this._scrollArea._totalHeight;o=p;this._scrollArea.setPosition(this._scrollArea.getPosition().getX(),h)}}if((h>p)&&(o>m)){k=Math.max(p-h,m-o)}else{if((o<m)&&(h<p)){k=Math.min(p-h,m-o)}}if(this.DEBUG_draw){console.log("TFScrollView > _draw > snapAmount(pre)="+k)}k=k*0.2;if(this.DEBUG_draw){console.log("TFScrollView > _draw > snapAmount(post)="+k)}var n=h+((Math.abs(k)<1)?0:k);if(this.DEBUG_draw){console.log("TFScrollView > _draw > newY="+n)}this._scrollArea.setPosition(this._scrollArea.getPosition().getX(),n);if(this.DEBUG_draw){console.log("TFScrollView > _draw > pos="+JSON.stringify(this._scrollArea.getPosition()))}}},redirectTouch:function(h){if(this._scrollable){if(TFUtils.DEBUG_REDIRECTED_TOUCHES){console.log("(TOUCHREDIRECT) Redirecting touch to GLList")}this._ccTouchesBegan(h);return this.onRedirectedTouch.bind(this)}},onRedirectedTouch:function(h){if(TFUtils.DEBUG_REDIRECTED_TOUCHES){console.log("(TOUCHREDIRECT) GLList processing redirected touch")}switch(h.getAction()){case GL2.Touch.Action.Move:if(TFUtils.DEBUG_REDIRECTED_TOUCHES){console.log("(TOUCHREDIRECT) Redirected touch calling _ccTouchesMoved")}this._ccTouchesMoved(h);break;case GL2.Touch.Action.End:if(TFUtils.DEBUG_REDIRECTED_TOUCHES){console.log("(TOUCHREDIRECT) Redirected touch calling _ccTouchesEnded")}this._ccTouchesEnded(h);break}},_onTouch:function(h){switch(h.getAction()){case GL2.Touch.Action.Start:return this._ccTouchesBegan(h);break;case GL2.Touch.Action.Move:this._ccTouchesMoved(h);break;case GL2.Touch.Action.End:this._ccTouchesEnded(h);break}},_ccTouchesBegan:function(h){this._dragging=true;this._scrollVelocity=0;var l=this.screenToLocal(h.getPosition());var k=Core.Time.getRealTime();console.log("TFScrollView > _ccTouchesBegan > touchPoint="+JSON.stringify(l)+", touchTime="+k);var m={y:l.getY(),time:k};this._touchInfo=[m];console.log("TFScrollView > _ccTouchesBegan > touchInfo="+JSON.stringify(this._touchInfo));return this._scrollable},_ccTouchesMoved:function(h){var l=this.screenToLocal(h.getPosition());var k=Core.Time.getRealTime();console.log("TFScrollView > _ccTouchesMoved > touchPoint="+JSON.stringify(l)+", touchTime="+k);var o=this._touchInfo[this._touchInfo.length-1];var m={y:l.getY(),time:k};this._touchInfo.push(m);while(this._touchInfo.length>5){this._touchInfo.shift()}console.log("TFScrollView > _ccTouchesMoved > touchInfo="+JSON.stringify(this._touchInfo));var n=m.y-o.y;this._scrollArea.setPosition(this._scrollArea.getPosition().getX(),this._scrollArea.getPosition().getY()+n)},_ccTouchesEnded:function(h){this._dragging=false;var l=this.screenToLocal(h.getPosition());var k=Core.Time.getRealTime();console.log("TFScrollView > _ccTouchesEnded > touchPoint="+JSON.stringify(l)+", touchTime="+k);var p=this._touchInfo[0];var n={y:l.getY(),time:k};console.log("TFScrollView > _ccTouchesEnded > touchInfo="+JSON.stringify(this._touchInfo));var o=n.y-p.y;var m=Math.abs(n.time-p.time);this._scrollVelocity=o/m;console.log("TFScrollView > _ccTouchesEnded > yOffset="+o);console.log("TFScrollView > _ccTouchesEnded > dt="+m);console.log("TFScrollView > _ccTouchesEnded > scrollVelocity="+this._scrollVelocity+" (raw)");this._scrollVelocity=(this._scrollVelocity<0)?Math.max(this._scrollVelocity,-3):Math.min(this._scrollVelocity,3);console.log("TFScrollView > _ccTouchesEnded > scrollVelocity="+this._scrollVelocity+" (clamped)")},destroy:function($super){console.log("TFScrollView > destroy");this._am.destroy();this._am=undefined;this._updateListener.destroy();this._updateListener=undefined;this._touchListener.destroy();this._touchListener=undefined;this.destroyAllChildren(this);this._parentController=null;this._viewData=null;this._definitions=null;$super()}})}};__ngs._da={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var d=__ngs.r_(__ngs._7p).View;var b=__ngs.r_(__ngs._fk).ComboBoxGridCellDefinition;a.ComboBoxGridCellView=d.subclass({classname:"ComboBoxGridCellView",initialize:function($super,g,e){this._gridSize=e;var h=b;h.images[0].size_x=this._gridSize._width;h.images[0].size_y=this._gridSize._height;$super(g,h)},destroy:function($super){$super()}})}};__ngs._db={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._7p).View;var a=__ngs.r_(__ngs._fl).ComboBoxCellDefinition;b.ComboBoxCellView=d.subclass({classname:"ComboBoxCellView",initialize:function($super,m,e){this._cellSize=e;var g=a;var n=JSON.parse(JSON.stringify(g));var p=e._width/230;var o=e._height/80;for(var l in n){for(var h=0;h<n[l].length;++h){n[l][h].pos_x=n[l][h].pos_x*p;n[l][h].pos_y=n[l][h].pos_y*o;n[l][h].size_x=n[l][h].size_x*p;n[l][h].size_y=n[l][h].size_y*o}}this._state=false;$super(m,n)},setSelected:function(e){if(e===this._state){return}this._state=e;if(e===true){TFUtils.changeImageOnSprite(this.buttonBg,this.buttonBg.info.asset2);TFUtils.changeImageOnSprite(this.buttonBgFlip,this.buttonBg.info.asset2)}else{TFUtils.changeImageOnSprite(this.buttonBg,this.buttonBg.info.asset1);TFUtils.changeImageOnSprite(this.buttonBgFlip,this.buttonBg.info.asset1)}},destroy:function($super){$super()}})}};__ngs._dc={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.SplashScreenViewDefinition={images:[{name:"background",pos_x:320,pos_y:480,size_x:1024,size_y:1024,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/BG/bg_mission_planet.jpg"},{name:"toplogo",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:150,size_x:500,size_y:200,asset:"Content/Images8x/UI/universal/TF_titleImage.png"}],labels:[{name:"loadingLabel",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:850,size_x:500,size_y:105,font_size:32,color:[240,240,255],depth:5,horizontalAlign:"center",verticalAlign:"middle",fontType:"Content/Fonts/SFElectrotome.ttf",text:"ui_loading",visible:true}],buttons:[],tfbuttons:[],progressBar:[{name:"loading",pos_x:320,showText:true,pos_y:900,emptyImage:"Content/Images8x/UI/bar/progressbar_empty.png",fillImage:"Content/Images8x/UI/bar/progressbar_fill.png",color:[38,125,186],size_x:589,size_y:39,depth:4,value:1,visible:false}]}}};__ngs._dd={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.TutorialChooseViewDefinition={images:[{name:"background",pos_x:320,pos_y:480,size_x:960,size_y:960,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/BG/bg_tutorial.jpg"}],labels:[{name:"title2",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:370,size_x:600,size_y:120,font_size:36,fontType:"Content/Fonts/SFElectrotome.ttf",text:""},{name:"name1",pos_x:115,pos_y:705,size_x:180,size_y:300,anchor_x:0.5,anchor_y:0.5,visible:false,fontType:"Content/Fonts/SFElectrotome.ttf",font_size:26},{name:"name2",pos_x:320,pos_y:865,size_x:180,size_y:300,anchor_x:0.5,anchor_y:0.5,visible:false,fontType:"Content/Fonts/SFElectrotome.ttf",font_size:26},{name:"name3",pos_x:525,pos_y:705,size_x:180,size_y:300,anchor_x:0.5,anchor_y:0.5,visible:false,fontType:"Content/Fonts/SFElectrotome.ttf",font_size:26},{name:"selectedCardName",pos_x:320,pos_y:600,size_x:180,size_y:300,anchor_x:0.5,anchor_y:0.5,visible:false,fontType:"Content/Fonts/SFElectrotome.ttf",font_size:26}],buttons:[{name:"card1",pos_x:320,pos_y:200,size_x:220,size_y:220,anchor_x:0.5,anchor_y:0.5,alpha:0.3,action:"onCardClick",sound:["click_high"],visible:false,feedback:false,info:{id:1,new_x:115,new_y:575}},{name:"card2",pos_x:320,pos_y:200,size_x:220,size_y:220,anchor_x:0.5,anchor_y:0.5,alpha:0.3,visible:false,feedback:false,action:"onCardClick",sound:["click_high"],info:{id:2,new_x:320,new_y:725}},{name:"card3",pos_x:320,pos_y:200,size_x:220,size_y:220,anchor_x:0.5,anchor_y:0.5,alpha:0.3,visible:false,feedback:false,action:"onCardClick",sound:["click_high"],info:{id:3,new_x:525,new_y:575}},{name:"factionImage",pos_x:320,pos_y:200,size_x:221,size_y:313,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/17_tutorial/tutorial_faction_autobot.png",depth:4,feedback:false,info:{type:"1",asset2:"Content/Images8x/UI/17_tutorial/tutorial_faction_decepticon.png"}}],tfbuttons:[{name:"continueButton",pos_x:320,pos_y:850,size_x:200,size_y:70,anchor_x:0.5,anchor_y:0.5,action:"onContinue",sound:["click_high"],text:"ui_continue_uc",fontType:"Content/Fonts/SFElectrotome.ttf",visible:false},{name:"back",pos_x:20,pos_y:20,size_x:120,size_y:70,anchor_x:0,anchor_y:0,action:"onBack",sound:["click_low"],text:"ui_back_uc",font_size:32,fontType:"Content/Fonts/SFElectrotome.ttf",visible:false,type:5}],progressBar:[],lists:[],groupDefinitions:{xyz:{images:[],labels:[],buttons:[]}},groups:[]}}};__ngs._de={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var g=__ngs.r_(__ngs._7l).DialogController;var e=__ngs.r_(__ngs._fm).BackCardView;var b=__ngs.r_(__ngs._45).AnimationQueue;var d=__ngs.r_(__ngs._61).TFEventManager;a.BackCardController=g.subclass({classname:"BackCardController",initialize:function($super,k,h){this._otherData={};if(k){this._otherData=k}this._destroyCB=this._otherData.destroyCB;$super(e,false);if(h){this.getView().showShade()}},onFlipBackCard:function(m){if(this._blocked===true){return}this._blocked=true;if(this.getView().parallaxer){this.getView().parallaxer.destroy();this.getView().parallaxer=null}var n=100;var h=this.createAnimationQueue();h.pushAnimation(n,b.Curve.Linear);var o=new Core.Point(0,0);var k=new Core.Point(0,TFSceneDirector.getWorkingArea().screenHeight);h.tween(b.Interpolate.point(o,k),function(p){if(!this.getView()){return}this.getView().setPosition(p.getX(),p.getY())}.bind(this));h.pushAnimation(100,b.Curve.Linear);var l=this;h.pushCallback(function(){this._destroyCB=undefined;var r=m.info;r.noFadeIn=true;if(!r.type){var q=__ngs.r_(__ngs._r).TFCardsManager;r.type=q.getCardType(m.info.usercard.definitionId)}if(r.type==TFGameData.CARD_TYPE.TRANSFORMER){if(!m.info.from){var p=__ngs.r_(__ngs._80).FullScreenCardController;TFSceneDirector._showDialog(new p(r,true))}else{if(m.info.from=="fromFusion"){var s=__ngs.r_(__ngs._ee).FusionRewardCardController;r.cb=function(){console.log("DialogViewController.onFlipBackCard.callback() ignore")}.bind(this);TFSceneDirector._showDialog(new s(r,true))}}}}.bind(this));h.pushCallback(function(){l._blocked=false});h.start();if(this.particleQueue){this.particleQueue.destroy();this.particleQueue=undefined}},dismissDialog:function($super){$super();if(this._destroyCB){this._destroyCB()}},onDismiss:function(){this.dismissDialog()}})}};__ngs._df={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.TutorialBubbleDefinition={images:[{name:"arrow1",pos_x:0,pos_y:0,size_x:120,size_y:70,asset:"Content/Images8x/UI/17_tutorial/arrow.png",visible:false}],groupDefinitions:{bubble:{images:[{name:"backGround",pos_x:0,pos_y:20,size_x:640,size_y:305,asset:"Content/Images8x/UI/17_tutorial/tutorial_prompt_window.png"},{name:"icon",pos_x:-190,pos_y:-12,size_x:228,size_y:285,asset:"Content/Images8x/UI/17_tutorial/tutorial_prompt_autobot.png",transition_in:{type:"slide",duration:200,new_x:5,start_delay:0},info:{asset2:"Content/Images8x/UI/17_tutorial/tutorial_prompt_decepticon.png"}}],labels:[{name:"title",anchor_x:0.5,anchor_y:0.5,pos_x:950,pos_y:56,size_x:394,size_y:52,font_size:34,text:"",color:[250,255,90],fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"middle",verticalAlign:"middle",transition_in:{type:"slide",duration:200,new_x:420,start_delay:300}},{name:"text",anchor_x:0.5,anchor_y:0.5,pos_x:958,pos_y:146,size_x:430,size_y:130,font_size:22,text:"",horizontalAlign:"left",verticalAlign:"top",fontType:"Content/Fonts/text.otf",transition_in:{type:"slide",duration:200,new_x:432,start_delay:220}}],tfbuttons:[{name:"okButton",pos_x:425,pos_y:190,size_x:180,size_y:100,action:"onDismiss",sound:["click_high"],text:"ui_ok_uc",font_size:36,fontType:"Content/Fonts/SFElectrotome.ttf",type:5}]}},groups:[{name:"bubble1",groupDefinition:"bubble",pos_x:-320,pos_y:212},{name:"bubble2",groupDefinition:"bubble",pos_x:-320,pos_y:-500,visible:false}]}}};__ngs._dg={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.SideSelectionDefinition={images:[{name:"transformerImage",pos_x:320,pos_y:500,size_x:600,size_y:860,anchor_x:0.5,anchor_y:0.5,visible:false,asset:"",info:{asset_decepticon:""}},{name:"background",pos_x:320,pos_y:480,size_x:960,size_y:960,anchor_x:0.5,anchor_y:0.5,visible:false,asset:"Content/Images8x/UI/BG/bg_tutorial.jpg"},{name:"scanline",pos_x:320,pos_y:-260,size_x:960,size_y:150,anchor_x:0.5,anchor_y:0.5,alpha:0.3,visible:false,asset:"Content/Images8x/UI/Overlay/scanline_01.png"}],labels:[{name:"selectionLabel",pos_x:320,pos_y:700,size_x:600,size_y:200,anchor_x:0.5,anchor_y:0.5,font_size:40,fontType:"Content/Fonts/SFElectrotome.ttf",visible:false,text:""},{name:"selectionImage",pos_x:320,pos_y:340,size_x:640,size_y:120,anchor_x:0.5,anchor_y:0.5,visible:false,depth:2,font_size:40,fontType:"Content/Fonts/SFElectrotome.ttf",text:""},{name:"autobotLabel",pos_x:155,pos_y:640,size_x:200,size_y:70,anchor_x:0.5,anchor_y:0.5,font_size:30,font_type:"bold",fontType:"Content/Fonts/SFElectrotome.ttf",text:"ui_autobot_uc",visible:false},{name:"decepticonLabel",pos_x:485,pos_y:640,size_x:200,size_y:70,anchor_x:0.5,anchor_y:0.5,font_size:30,fontType:"Content/Fonts/SFElectrotome.ttf",text:"ui_decepticons_uc",visible:false}],buttons:[{name:"card1",pos_x:320,pos_y:545,size_x:221,size_y:313,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/17_tutorial/tutorial_faction_autobot.png",action:"sideClick",sound:["click_flat"],info:{type:"1"},transition_in:{type:"slide",duration:500,new_x:155,start_delay:700}},{name:"card2",pos_x:320,pos_y:545,size_x:221,size_y:313,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/17_tutorial/tutorial_faction_decepticon.png",action:"sideClick",sound:["click_flat"],info:{type:"2"},transition_in:{type:"slide",duration:500,new_x:485,start_delay:700}}],tfbuttons:[{name:"continueButton",pos_x:320,pos_y:904,size_x:200,size_y:70,anchor_x:0.5,anchor_y:0.5,action:"onContinue",sound:["click_high"],text:"ui_continue",visible:false}]}}};__ngs._dh={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.GashaViewDefinition={images:[{name:"bg",pos_x:320,pos_y:520,size_x:800,size_y:1200,asset:"Content/Images8x/UI/BG/bg_spacebridge.jpg",depth:-10,alpha:1,anchor_x:0.5,anchor_y:0.5},{name:"overlay",pos_x:320,pos_y:500,size_x:720,size_y:1080,asset:"Content/Images8x/UI/14_store/overlay_spacebridge.png",depth:-1,alpha:1,anchor_x:0.5,anchor_y:0.5},{name:"topBarLeft",pos_x:120,pos_y:17,size_x:240,size_y:35,asset:"Content/Images8x/UI/10_explore/bar_progress.png",depth:1,alpha:1,anchor_x:0.5,anchor_y:0.5},{name:"topBarRight",pos_x:520,pos_y:17,size_x:240,size_y:35,asset:"Content/Images8x/UI/10_explore/bar_progress.png",depth:1,alpha:1,anchor_x:0.5,anchor_y:0.5,flip_x:true},{name:"bridgeLeft1",pos_x:10,pos_y:780,size_x:253,size_y:300,asset:"Content/Images8x/UI/14_store/bridge_spacebridge.png",depth:2,alpha:0,anchor_x:0.5,anchor_y:0.5},{name:"bridgeRight1",pos_x:630,pos_y:780,size_x:253,size_y:300,asset:"Content/Images8x/UI/14_store/bridge_spacebridge.png",depth:2,alpha:0,anchor_x:0.5,anchor_y:0.5,flip_x:true},{name:"bridgeLeft2",pos_x:130,pos_y:605,size_x:181,size_y:215,asset:"Content/Images8x/UI/14_store/bridge_spacebridge.png",depth:2,alpha:0,anchor_x:0.5,anchor_y:0.5},{name:"bridgeRight2",pos_x:515,pos_y:605,size_x:181,size_y:215,asset:"Content/Images8x/UI/14_store/bridge_spacebridge.png",depth:2,alpha:0,anchor_x:0.5,anchor_y:0.5,flip_x:true},{name:"bridgeLeft3",pos_x:213,pos_y:495,size_x:100,size_y:118,asset:"Content/Images8x/UI/14_store/bridge_spacebridge.png",depth:2,alpha:0,anchor_x:0.5,anchor_y:0.5},{name:"bridgeRight3",pos_x:432,pos_y:495,size_x:100,size_y:118,asset:"Content/Images8x/UI/14_store/bridge_spacebridge.png",depth:2,alpha:0,anchor_x:0.5,anchor_y:0.5,flip_x:true},{name:"bridgeLeft4",pos_x:270,pos_y:405,size_x:46,size_y:55,asset:"Content/Images8x/UI/14_store/bridge_spacebridge.png",depth:2,alpha:0,anchor_x:0.5,anchor_y:0.5},{name:"bridgeRight4",pos_x:375,pos_y:405,size_x:46,size_y:55,asset:"Content/Images8x/UI/14_store/bridge_spacebridge.png",depth:2,alpha:0,anchor_x:0.5,anchor_y:0.5,flip_x:true},{name:"bridgeLeft5",pos_x:305,pos_y:355,size_x:13,size_y:16,asset:"Content/Images8x/UI/14_store/bridge_spacebridge.png",depth:2,alpha:0,anchor_x:0.5,anchor_y:0.5},{name:"bridgeRight5",pos_x:340,pos_y:355,size_x:13,size_y:16,asset:"Content/Images8x/UI/14_store/bridge_spacebridge.png",depth:2,alpha:0,anchor_x:0.5,anchor_y:0.5,flip_x:true},{name:"bridgeLeft6",pos_x:312,pos_y:322,size_x:8,size_y:9,asset:"Content/Images8x/UI/14_store/bridge_spacebridge.png",depth:2,alpha:0,anchor_x:0.5,anchor_y:0.5},{name:"bridgeRight6",pos_x:333,pos_y:322,size_x:8,size_y:9,asset:"Content/Images8x/UI/14_store/bridge_spacebridge.png",depth:2,alpha:0,anchor_x:0.5,anchor_y:0.5,flip_x:true},{name:"bridgeLeft7",pos_x:318,pos_y:290,size_x:6,size_y:7,asset:"Content/Images8x/UI/14_store/bridge_spacebridge.png",depth:2,alpha:0,anchor_x:0.5,anchor_y:0.5},{name:"bridgeRight7",pos_x:329,pos_y:290,size_x:6,size_y:7,asset:"Content/Images8x/UI/14_store/bridge_spacebridge.png",depth:2,alpha:0,anchor_x:0.5,anchor_y:0.5,flip_x:true},{name:"hudTop",asset:"Content/Images8x/UI/10_explore/hud_top.png",anchor_x:0.5,anchor_y:0,pos_x:320,pos_y:0,size_x:166,size_y:51},{name:"hudTopLineLeft",asset:"Content/Images8x/UI/10_explore/hud_line.png",anchor_x:0,anchor_y:0,pos_x:20,pos_y:-5,size_x:217,size_y:12,flip_y:true},{name:"hudTopLineLeftEnd",asset:"Content/Images8x/UI/10_explore/hud_line_end.png",anchor_x:0,anchor_y:0,pos_x:10,pos_y:0,size_x:10,size_y:7,flip_x:true},{name:"hudTopLineRight",asset:"Content/Images8x/UI/10_explore/hud_line.png",anchor_x:1,anchor_y:0,pos_x:620,pos_y:-5,size_x:217,size_y:12,flip_y:true},{name:"hudTopLineRightEnd",asset:"Content/Images8x/UI/10_explore/hud_line_end.png",anchor_x:1,anchor_y:0,pos_x:630,pos_y:0,size_x:10,size_y:7}],labels:[{name:"staticDistance",anchor_x:0.5,anchor_y:0,pos_x:306,pos_y:18,size_x:100,size_y:30,text:"ui_distance_uc",horizontalAlign:"middle",verticalAlign:"middle",font_size:24,fontType:"Content/Fonts/SFElectrotome.ttf",color:[181,227,250]},{name:"distanceNumber",anchor_x:1,anchor_y:0,pos_x:368,pos_y:27,size_x:350,size_y:100,text:"",horizontalAlign:"right",verticalAlign:"middle",font_size:52,fontType:"Content/Fonts/SFElectrotome.ttf",color:[181,227,250]},{name:"staticKM",anchor_x:0.5,anchor_y:0,pos_x:395,pos_y:26,size_x:60,size_y:60,text:"ui_km_uc",horizontalAlign:"middle",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",color:[181,227,250]},{name:"decimalNumber",anchor_x:0.5,anchor_y:0,pos_x:382,pos_y:52,size_x:60,size_y:60,text:"",horizontalAlign:"middle",font_size:32,fontType:"Content/Fonts/SFElectrotome.ttf",color:[181,227,250]}],buttons:[],tfbuttons:[],lists:[],groupDefinitions:{bothud:{images:[{name:"sliderLeft",asset:"Content/Images8x/UI/10_explore/hud_slider.png",anchor_x:0,anchor_y:0.5,pos_x:0,pos_y:690,size_x:100,size_y:256},{name:"sliderLeftIpad",asset:"Content/Images8x/UI/10_explore/hud_slider_b.png",anchor_x:1,anchor_y:0.5,pos_x:0,pos_y:690,size_x:100,size_y:256},{name:"sliderRight",asset:"Content/Images8x/UI/10_explore/hud_slider.png",anchor_x:1,anchor_y:0.5,pos_x:640,pos_y:690,size_x:100,size_y:256,flip_x:true},{name:"sliderRightIpad",asset:"Content/Images8x/UI/10_explore/hud_slider_b.png",anchor_x:0,anchor_y:0.5,pos_x:640,pos_y:690,size_x:100,size_y:256}],tfbuttons:[{name:"activateBridgeButton",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:653,size_x:486,size_y:105,fontType:"Content/Fonts/SFElectrotome.ttf",font_size:38,type:7,color:[183,226,240],text:"ui_activatesb_uc",action:"onOpen",sound:["click_high"]}]}},groups:[{name:"bothud",groupDefinition:"bothud",pos_x:0,pos_y:600,depth:20}]}}};__ngs._di={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var d=__ngs.r_(__ngs._5).Core;var b=__ngs.r_(__ngs._4).Device;a.MotionListener=d.MessageListener.subclass({classname:"MotionListener",initialize:function(g,e){this.delegate=g;this.downDampenAmount=e===undefined?1:e;b.MotionEmitter.addListener(this,this.motionApplied)},motionApplied:function(h){var m=h.getGyroData();var l=h.getAccelData();var k=1;var g=1;var e=1;if((d.Capabilities.getDeviceName()=="iPhone2,1"||(d.Capabilities.getDeviceName()=="iPad1,1"))){k=10}if(l){this.downVector=this.downVector||l;this.downVector={x:this.downVector.x*(this.downDampenAmount)+l.x*(1-this.downDampenAmount)*k,y:this.downVector.y*(this.downDampenAmount)+l.y*(1-this.downDampenAmount)*k,z:this.downVector.z*(this.downDampenAmount)+l.z*(1-this.downDampenAmount)*k};l={x:l.x-this.downVector.x,y:l.y-this.downVector.y,z:l.z-this.downVector.z}}if(this.delegate&&this.delegate.respondToRotation){this.delegate.respondToRotation(m,l)}}})}};__ngs._dj={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.BottomHudMedalViewDefinition={images:[{name:"temporaryUIBackground",anchor_x:0,anchor_y:1,pos_x:0,pos_y:0,size_x:640,size_y:119.5,flip_x:false,flip_y:false,rotation:0,asset:"Content/Images8x/UI/02_mission/bg_hud_bottom.png"}],groups:[],labels:[],tfbuttons:[],buttons:[]}}};__ngs._dk={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.TopHudViewDefinition={groups:[{name:"mainPanel",groupDefinition:"mainPanel",depth:0,pos_x:0,pos_y:0},{name:"cardPanel",groupDefinition:"cardPanel",depth:-1,pos_x:0,pos_y:0},{name:"lgButtonPanel",groupDefinition:"lgButtonPanel",depth:1,pos_x:0,pos_y:0},{name:"smButtonPanel",groupDefinition:"smButtonPanel",depth:-2,pos_x:0,pos_y:0}],groupDefinitions:{mainPanel:{images:[{name:"background",anchor_x:0,anchor_y:0.183,pos_x:0,pos_y:0,size_x:640,size_y:172.5,asset:"Content/Images8x/UI/HUD/hud_top_1.png"},{name:"creditsImage",pos_x:220,pos_y:68,size_x:32,size_y:32,asset:"Content/Images8x/UI/icon/icon_currency.png"},{name:"friendPointsIcon",pos_x:386,pos_y:68,size_x:32,size_y:32,asset:"Content/Images8x/UI/icon/icon_currency_ap.png"},{name:"battlePointsIcon",pos_x:510,pos_y:68,size_x:32,size_y:32,asset:"Content/Images8x/UI/icon/icon_currency_bp.png"}],progressBar:[{name:"xpBar",pos_x:536,pos_y:36,size_x:172,size_y:36,value:50,emptyImage:"Content/Images8x/misc/1pxclear.png",fillImage:"Content/Images8x/UI/bar/hud_xp_bar.png",showText:false}],labels:[{name:"playerNameLabel",anchor_x:0,anchor_y:0,pos_x:219,pos_y:21,size_x:190,size_y:40,text:"",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"top",color:[170,224,255],colorType:"playerName"},{name:"levelLabel",anchor_x:0.5,anchor_y:0,pos_x:536,pos_y:21,size_x:172,size_y:34,text:"",font_size:28,depth:3,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"middle",verticalAlign:"top",color:[250,250,250],colorType:"level"},{name:"creditsLabel",anchor_x:0.5,anchor_y:0.5,pos_x:310,pos_y:84,size_x:120,size_y:40,text:"",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"middle",verticalAlign:"middle",color:[173,255,154],colorType:"credits"},{name:"friendPointsLabel",anchor_x:0.5,anchor_y:0.5,pos_x:450,pos_y:84,size_x:100,size_y:40,text:"",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"middle",verticalAlign:"middle",color:[250,250,250],colorType:"alliesPoints"},{name:"battlePointsLabel",anchor_x:0.5,anchor_y:0.5,pos_x:578,pos_y:84,size_x:100,size_y:40,text:"",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"middle",verticalAlign:"middle",color:[250,250,250],colorType:"battlePoints"}]},cardPanel:{images:[{name:"background_left",pos_x:174,pos_y:92,size_x:204,size_y:80,depth:-1,asset:"Content/Images8x/UI/HUD/hud_top_3.png"},{name:"background_right",pos_x:378,pos_y:92,size_x:204,size_y:80,depth:-1,flip_x:true,asset:"Content/Images8x/UI/HUD/hud_top_3.png"},{name:"tfIcon",pos_x:222,pos_y:122,size_x:36,size_y:28,depth:2,asset:"Content/Images8x/UI/icon/icon_transcard.png"},{name:"wpIcon",pos_x:388,pos_y:122,size_x:36,size_y:28,depth:1,asset:"Content/Images8x/UI/icon/icon_weaponcard.png"}],labels:[{name:"tfCardsLabel",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:135,size_x:200,size_y:40,text:"",font_size:26,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"middle",verticalAlign:"middle",color:[250,250,250],depth:2},{name:"wpCardsLabel",anchor_x:0.5,anchor_y:0.5,pos_x:480,pos_y:135,size_x:200,size_y:40,text:"",font_size:26,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"middle",verticalAlign:"middle",color:[250,250,250]}],buttons:[{name:"discardAlertButton",anchor_x:0.5,anchor_y:0.5,pos_x:400,pos_y:136,size_x:300,size_y:40,text:"",font_size:26,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,0,0],depth:2,action:"onCardsAlertPressed",sound:["click_high"],alpha:0}]},lgButtonPanel:{images:[{name:"background",pos_x:0,pos_y:7,size_x:195,size_y:110,asset:"Content/Images8x/UI/HUD/hud_top_2.png"},{name:"icon",anchor_x:0.5,anchor_y:0.5,pos_x:94,pos_y:62,size_x:80,size_y:64,depth:2,asset:"",info:{asset_team:"Content/Images8x/UI/icon/nav_team.png",asset_home:"Content/Images8x/UI/icon/nav_home.png",asset_back:"Content/Images8x/UI/icon/nav_back.png"}}],buttons:[{name:"button",anchor_x:0.5,anchor_y:0.5,pos_x:94,pos_y:70,size_x:177,size_y:107,depth:1,action:"onLeftButtonPressed",sound:["click_low"],asset:"Content/Images8x/UI/button/btn_mid_a.png",multiAsset:{onAsset:"Content/Images8x/UI/button/btn_mid_a.png",selectedAsset:"Content/Images8x/UI/button/btn_mid_b.png"}}]},smButtonPanel:{images:[{name:"background",anchor_x:0,anchor_y:0.183,pos_x:0,pos_y:0,size_x:175,size_y:175,asset:"Content/Images8x/UI/HUD/hud_top_4.png"},{name:"icon",anchor_x:0.5,anchor_y:0.5,pos_x:69,pos_y:62,size_x:80,size_y:64,depth:2,asset:"",info:{asset_team:"Content/Images8x/UI/icon/nav_team.png",asset_home:"Content/Images8x/UI/icon/nav_home.png",asset_back:"Content/Images8x/UI/icon/nav_back.png"}}],buttons:[{name:"button",anchor_x:0.5,anchor_y:0.5,pos_x:69,pos_y:70,size_x:124,size_y:107,depth:1,action:"onLeftButtonPressed",sound:["click_low"],asset:"Content/Images8x/UI/button/btn_sml_a.png",multiAsset:{onAsset:"Content/Images8x/UI/button/btn_sml_a.png",selectedAsset:"Content/Images8x/UI/button/btn_sml_b.png"}}]}}}}};__ngs._dl={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var a=__ngs.r_(__ngs._d2).DialogView;var c=__ngs.r_(__ngs._fn).OverLimitCardsDefinition;b.OverLimitCardsView=a.subclass({classname:"OverLimitCardsView",initialize:function($super,e){$super(e,c)},destroy:function($super){$super()}})}};__ngs._dm={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.MissionSelectViewDefinition={images:[],labels:[{name:"stageNameLabel",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:200,size_x:450,size_y:70,font_size:34,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"middle",color:[183,226,240]}],buttons:[],lists:[{name:"missionList",width:640,height:650,itemHeight:420,itemWidth:640,pos_x:0,pos_y:220}],staticBackgroundImages:{images:[{name:"backgroundStage",pos_x:320,pos_y:510,anchor_x:0.5,anchor_y:0.5,size_x:720,size_y:1136,asset:"Content/Images8x/misc2/1pxclear.png"},{name:"backgroundDarken",pos_x:320,pos_y:510,anchor_x:0.5,anchor_y:0.5,size_x:720,size_y:1136,asset:"Content/Images8x/UI/Overlay/block_dark_blue_90.png"}]}}}};__ngs._dn={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.CardThumbnailViewDefinition={images:[{name:"frame",pos_x:0,pos_y:0,size_x:678,size_y:880,asset:"Content/Images8x/misc/1pxclear.png",depth:15,info:{asset_autobot:"Content/Images8x/UI/card_frames/deck_screen01.png",asset_decepticon:"Content/Images8x/UI/card_frames/deck_screen01.png",asset_autobot_transformable:"Content/Images8x/UI/card_frames/deck_screen10.png",asset_decepticon_transformable:"Content/Images8x/UI/card_frames/deck_screen10.png",asset_autobot_back:"Content/Images8x/UI/card_frames/thumb_autobot_c.png",asset_decepticon_back:"Content/Images8x/UI/card_frames/thumb_decepticon_c.png",asset_autobot_weapon:"Content/Images8x/UI/card_frames/thumb_wp_autobot.png",asset_autobot_weapon_back:"Content/Images8x/UI/card_frames/thumb_wp_autobot_c.png",asset_decepticon_weapon:"Content/Images8x/UI/card_frames/thumb_wp_autobot.png",asset_decepticon_weapon_back:"Content/Images8x/UI/card_frames/thumb_wp_decepticon_c.png",offset_x:-50,offset_y:-52}},{name:"cardTransformed",pos_x:0,pos_y:0,size_x:598,size_y:800,asset:"",depth:0},{name:"accent",pos_x:0,pos_y:0,size_x:631,size_y:823,asset:"Content/Images8x/UI/card_frames/thumb_autobot_d.png",depth:14,info:{asset_autobot:"Content/Images8x/UI/card_frames/thumb_autobot_d.png",asset_decepticon:"Content/Images8x/UI/card_frames/thumb_decepticon_d.png",asset_autobot_w:"Content/Images8x/UI/card_frames/thumb_wp_autobot_d.png",asset_decepticon_w:"Content/Images8x/UI/card_frames/thumb_wp_decepticon_d.png",offset_x:-20,offset_y:-18}},{name:"glow",pos_x:0,pos_y:0,size_x:631,size_y:823,asset:"Content/Images8x/misc/1pxclear.png",depth:6,visible:false,depth:13,info:{asset_autobot:"Content/Images8x/UI/card_frames/thumb_autobot_d.png",asset_decepticon:"Content/Images8x/UI/card_frames/thumb_decepticon_d.png",asset_autobot_transformable:"Content/Images8x/UI/card_frames/thumb_autobot_d.png",asset_decepticon_transformable:"Content/Images8x/UI/card_frames/thumb_decepticon_d.png",asset_autobot_weapon:"Content/Images8x/UI/card_frames/thumb_wp_autobot_d.png",asset_decepticon_weapon:"Content/Images8x/UI/card_frames/thumb_wp_decepticon_d.png",offset_x:-20,offset_y:-18}},{name:"teamColor",pos_x:0,pos_y:0,size_x:620,size_y:180,asset:"Content/Images8x/UI/card_frames/footer_autobot.png",depth:4,visible:false,info:{offset_x:-14,offset_y:614,asset2:"Content/Images8x/UI/card_frames/footer_decepticon.png"}},{name:"bonus",anchor_x:0,anchor_y:0,pos_x:99999,pos_y:99999,size_x:228,size_y:182,asset:"Content/Images8x/UI/card_frames/badge_bonus_card_thumb.png",depth:3,visible:false},{name:"rarity",anchor_x:1,anchor_y:0,pos_x:663,pos_y:53,size_x:180,size_y:182,asset:"Content/Images8x/misc/1pxclear.png",depth:3,info:{asset_rarity1:"Content/Images8x/UI/card_frames/thumb_rarity_1.png",asset_rarity2:"Content/Images8x/UI/card_frames/thumb_rarity_2.png",asset_rarity3:"Content/Images8x/UI/card_frames/thumb_rarity_3.png",asset_rarity4:"Content/Images8x/UI/card_frames/thumb_rarity_4.png"},visible:false},{name:"leaderBannerL",anchor_x:1,anchor_y:1,pos_x:0,pos_y:0,size_x:308,size_y:96,asset:"Content/Images8x/UI/card_frames/thumb_leader.png",depth:2,visible:false},{name:"leaderBannerR",anchor_x:0,anchor_y:1,pos_x:0,pos_y:0,size_x:308,size_y:96,flip_x:true,asset:"Content/Images8x/UI/card_frames/thumb_leader.png",depth:2,visible:false},{name:"mainDeckDecal",anchor_x:0.5,anchor_y:0.5,pos_x:0,pos_y:0,size_x:52,size_y:50,asset:"Content/Images8x/UI/icon/icon_mainteam.png",depth:3,visible:false},{name:"miniDeckDecal",anchor_x:0.5,anchor_y:0.5,pos_x:0,pos_y:0,size_x:48,size_y:50,depth:3,asset:"Content/Images8x/misc/1pxclear.png",info:{asset_autobot:"Content/Images8x/UI/icon/icon_0_faction_autobot.png",asset_decepticon:"Content/Images8x/UI/icon/icon_0_faction_decepticon.png"},visible:false}],labels:[{name:"leaderLabel",anchor_x:0.5,anchor_y:1,pos_x:0,pos_y:0,size_x:616,size_y:96,text:"ui_leader_uc",font_size:40,verticalAlign:"bottom",fontType:"Content/Fonts/SFElectrotome.ttf",color:[0,31,78],depth:3,visible:false},{name:"bonusText",anchor_x:0.5,anchor_y:0.5,pos_x:99999,pos_y:99999,size_x:150,size_y:150,text:"",font_size:120,horizontalAlign:"center",verticalAlign:"middle",fontType:"Content/Fonts/SFElectrotome.ttf",overflowMode:"shrink",color:[0,0,0],depth:4,visible:false,info:{offset_x:97,offset_y:85,}}],buttons:[{name:"frameBack",pos_x:0,pos_y:0,size_x:668,size_y:870,asset:"",depth:5,visible:false,action:"onCardBackSelected",sound:["click_flat"],info:{asset_autobot:"Content/Images8x/UI/card_frames/thumb_autobot.png",asset_decepticon:"Content/Images8x/UI/card_frames/thumb_decepticon.png",asset_autobot_transformable:"Content/Images8x/UI/card_frames/thumb_autobot_b.png",asset_decepticon_transformable:"Content/Images8x/UI/card_frames/thumb_decepticon_b.png",asset_autobot_back:"Content/Images8x/UI/card_frames/thumb_autobot_c.png",asset_decepticon_back:"Content/Images8x/UI/card_frames/thumb_decepticon_c.png",asset_autobot_weapon:"Content/Images8x/UI/card_frames/thumb_wp_autobot.png",asset_autobot_weapon_back:"Content/Images8x/UI/card_frames/thumb_wp_autobot_c.png",asset_decepticon_weapon:"Content/Images8x/UI/card_frames/thumb_wp_decepticon.png",asset_decepticon_weapon_back:"Content/Images8x/UI/card_frames/thumb_wp_decepticon_c.png",offset_x:-50,offset_y:-46}},{name:"cardImage",pos_x:0,pos_y:0,size_x:598,size_y:800,asset:"",action:"onCardSelected",depth:1,info:{}}],tfbuttons:[],progressBar:[],lists:[]}}};__ngs._do={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var a=__ngs.r_(__ngs._d2).DialogView;var d=__ngs.r_(__ngs._fo).FullScreenWeaponCardDefinition;b.FullScreenWeaponCardView=a.subclass({classname:"FullScreenWeaponCardView",initialize:function($super,e,g){$super(e,d)},hideButtons:function(){this.closeButton.setVisible(false);this.dismissIcon.setVisible(false)},destroy:function($super){if(this.parallaxer){this.parallaxer.destroy()}$super()}})}};__ngs._dp={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.MissionSelectCellViewDefinition={images:[{name:"missionBackground",pos_x:30,pos_y:70,size_x:580,size_y:210,asset:""},{name:"cellBg",pos_x:0,pos_y:0,size_x:320,size_y:400,asset:"Content/Images8x/UI/02_mission/panel_list.png"},{name:"cellBgFlip",pos_x:320,pos_y:0,size_x:320,size_y:400,flip_x:true,asset:"Content/Images8x/UI/02_mission/panel_list.png"},{name:"cellBgEdgeL",anchor_x:0,anchor_y:0,rotation:90,pos_x:0,pos_y:31,size_x:307,size_y:42,color:[23,30,42],asset:"Content/Images8x/UI/Overlay/dropshadow_white.png"},{name:"cellBgEdgeLT",anchor_x:1,anchor_y:1,rotation:270,pos_x:0,pos_y:29,size_x:2,size_y:42,color:[143,189,244],alpha:0.5,asset:"Content/Images8x/UI/card_frames/footer_line.png"},{name:"cellBgEdgeLB",anchor_x:1,anchor_y:1,rotation:270,pos_x:0,pos_y:338,size_x:2,size_y:42,color:[143,189,244],alpha:0.5,asset:"Content/Images8x/UI/card_frames/footer_line.png"},{name:"cellBgEdgeR",anchor_x:1,anchor_y:0,rotation:270,pos_x:640,pos_y:31,size_x:307,size_y:42,color:[23,30,42],asset:"Content/Images8x/UI/Overlay/dropshadow_white.png"},{name:"cellBgEdgeRT",anchor_x:0,anchor_y:1,rotation:90,pos_x:640,pos_y:29,size_x:2,size_y:42,color:[143,189,244],alpha:0.5,asset:"Content/Images8x/UI/card_frames/footer_line.png"},{name:"cellBgEdgeRB",anchor_x:0,anchor_y:1,rotation:90,pos_x:640,pos_y:338,size_x:2,size_y:42,color:[143,189,244],alpha:0.5,asset:"Content/Images8x/UI/card_frames/footer_line.png"}],labels:[{name:"missionName",text:"",fontType:"Content/Fonts/SFElectrotome.ttf",pos_x:100,pos_y:24,anchor_x:0,anchor_y:0,color:[183,226,240],horizontalAlign:"left",font_size:30},{name:"xpReward",text:"",fontType:"Content/Fonts/SFElectrotome.ttf",pos_x:620,pos_y:220,anchor_x:1,anchor_y:0,horizontalAlign:"right",font_size:40,visible:false}],buttons:[{name:"startButton",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:170,size_x:140,size_y:140,action:"onStartButton",sound:["click_high"],asset:"Content/Images8x/UI/button/button_mission_play.png",info:{missionId:0}}],groupDefinitions:{energyConsumeGroup:{labels:[{name:"energyCostLabel",text:"ui_consumes_uc",fontType:"Content/Fonts/SFElectrotome.ttf",pos_x:30,pos_y:10,anchor_x:0,anchor_y:0,horizontalAlign:"left",color:[183,226,240],font_size:20},{name:"energyCost",text:"",fontType:"Content/Fonts/SFElectrotome.ttf",pos_x:-8,pos_y:20,size_x:70,size_y:70,anchor_x:0,anchor_y:0,horizontalAlign:"right",font_size:38}],images:[{name:"icon_Energy",pos_x:58,pos_y:30,size_x:60,size_y:60,depth:1,asset:"Content/Images8x/UI/icon/icon_energy.png"}]},completionGroup:{labels:[{name:"completionLabel",text:"ui_completion_uc",fontType:"Content/Fonts/SFElectrotome.ttf",pos_x:26,pos_y:10,anchor_x:0,anchor_y:0,horizontalAlign:"left",color:[183,226,240],font_size:20},{name:"progressPercent",text:"",fontType:"Content/Fonts/SFElectrotome.ttf",pos_x:85,pos_y:42,anchor_x:1,anchor_y:0,depth:1,horizontalAlign:"right",font_size:36},{name:"percentageLabel",text:"ui_percent",fontType:"Content/Fonts/SFElectrotome.ttf",pos_x:110,pos_y:54,anchor_x:1,anchor_y:0,depth:1,horizontalAlign:"left",font_size:20}],images:[{name:"completionBg",pos_x:70,pos_y:37,size_x:100,size_y:50,anchor_x:0.5,anchor_7:0.5,asset:"Content/Images8x/UI/02_mission/badge_status_a.png",info:{asset2:"Content/Images8x/UI/02_mission/badge_status_b.png"}}]},missionNumberGroup:{images:[{name:"missionNumberBg",pos_x:55,pos_y:90,size_x:80,size_y:60,anchor_x:0.5,anchor_7:0.5,rotation:90,flip_x:"true",asset:"Content/Images8x/UI/02_mission/badge_status_a.png"}],labels:[{name:"missionNumberText",text:"",fontType:"Content/Fonts/SFElectrotome.ttf",pos_x:26,pos_y:88,depth:1,color:[245,255,0],horizontalAlign:"middle",font_size:70}]},rewardCardGroup:{}},groups:[{name:"energyConsumeGroup",groupDefinition:"energyConsumeGroup",pos_x:20,pos_y:290,size_x:260,size_y:150,visible:true},{name:"completionGroup",groupDefinition:"completionGroup",pos_x:480,pos_y:280,size_x:260,size_y:150,visible:true},{name:"missionNumberGroup",groupDefinition:"missionNumberGroup",pos_x:30,pos_y:-25,size_x:260,size_y:150,visible:true},{name:"rewardCardGroup",groupDefinition:"rewardCardGroup",pos_x:150,pos_y:265,size_x:260,size_y:150,visible:true,info:{card_w:72,card_h:100,card_space:8,max_cards:5}}]}}};__ngs._dq={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var d=__ngs.r_(__ngs._7p).View;var c=__ngs.r_(__ngs._fp).BossFightViewDefinition;a.BossFightView=d.subclass({classname:"BossFightView",initialize:function($super,e){$super(e,c)},destroy:function($super){$super()}})}};__ngs._dr={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var a=__ngs.r_(__ngs._d2).DialogView;var e=__ngs.r_(__ngs._fq).FullScreenMissionDefinition;var c=__ngs.r_(__ngs._45).AnimationQueue;b.FullScreenMissionView=a.subclass({classname:"FullScreenMissionView",initialize:function($super,g,h){$super(g,e)},destroy:function($super){$super()}})}};__ngs._ds={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.BottomHudAltViewDefinition={images:[{name:"bottomUIBackground",anchor_x:0,anchor_y:1,pos_x:0,pos_y:0,size_x:640,size_y:120,flip_x:false,flip_y:false,rotation:0,asset:"Content/Images8x/UI/HUD/hud_bottom_3.png"},{name:"energyIcon",anchor_x:0.5,anchor_y:0.5,pos_x:484,pos_y:-128,size_x:64,size_y:64,asset:"Content/Images8x/UI/icon/icon_energy.png",depth:2},{name:"campaignIcon",anchor_x:0.5,anchor_y:0.5,pos_x:120,pos_y:-55,size_x:64,size_y:64,asset:"Content/Images8x/UI/icon/icon_0_campaign.png",depth:1},{name:"battlegroundIcon",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:-55,size_x:64,size_y:64,asset:"Content/Images8x/UI/icon/icon_0_battleground.png",depth:1},{name:"missionsIcon",anchor_x:0.5,anchor_y:0.5,pos_x:515,pos_y:-55,size_x:64,size_y:64,asset:"Content/Images8x/UI/icon/icon_0_mission.png",depth:2},{name:"energyIconBackground",anchor_x:0.5,anchor_y:0.5,pos_x:570,pos_y:-125,size_x:250,size_y:76,depth:-1,asset:"Content/Images8x/UI/HUD/hud_bottom_alt_02.png",},{name:"energyBarBack",anchor_x:0,anchor_y:0.5,pos_x:500,pos_y:-130,size_x:120,size_y:29,asset:"Content/Images8x/UI/bar/energybar_empty.png",depth:1},{name:"energyBarMeter",anchor_x:0,anchor_y:0.5,pos_x:505,pos_y:-130,size_x:112,size_y:21,color:[195,1,209],asset:"Content/Images8x/misc/1pxwhite.png",depth:2},],groups:[],labels:[{name:"energyLabel",anchor_x:0.5,anchor_y:0.5,size_x:200,size_y:40,pos_x:560,pos_y:-129,text:"",font_size:19,fontType:"Content/Fonts/TransformersMovie.ttf",horizontalAlign:"middle",verticalAlign:"middle",color:[236,243,255],depth:3}],buttons:[{name:"getEnergyButton",anchor_x:0.5,anchor_y:0.5,pos_x:520,pos_y:-145,size_x:250,size_y:70,text:"",asset:"",font_size:44,color:[236,243,255],fontType:"Content/Fonts/SFElectrotome.ttf",action:"onGetEnergyButtonPressed",sound:["click_high"]},{name:"navButton1",anchor_x:0,anchor_y:1,pos_x:22,pos_y:-10,size_x:210,size_y:83,asset:"",multiAsset:{selectedAsset:"Content/Images8x/UI/HUD/hud_bottom_selected_l1.png"},action:"onWorldNav",sound:["click_flat"]},{name:"navButton2",anchor_x:0,anchor_y:1,pos_x:220,pos_y:-10,size_x:205,size_y:83,asset:"",multiAsset:{selectedAsset:"Content/Images8x/UI/HUD/hud_bottom_selected_l2.png"},action:"onMissionNav"},{name:"navButton3",anchor_x:0,anchor_y:1,pos_x:410,pos_y:-10,size_x:210,size_y:83,asset:"",multiAsset:{selectedAsset:"Content/Images8x/UI/HUD/hud_bottom_selected_l3.png"},action:"onListNav"}]}}};__ngs._dt={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.StageSelectViewDefinition={images:[{name:"stageBackground",pos_x:320,pos_y:510,anchor_x:0.5,anchor_y:0.5,size_x:720,size_y:1136,asset:""}],progressBar:[{name:"stage1ProgressBar",pos_x:70,pos_y:365,anchor_x:0.5,anchor_y:0.5,size_x:100,size_y:34,emptyImage:"Content/Images8x/UI/bar/mission_progress_empty.png",fillImage:"Content/Images8x/UI/bar/mission_progress_fill.png",visible:false,showText:false},{name:"stage2ProgressBar",pos_x:300,pos_y:725,anchor_x:0.5,anchor_y:0.5,size_x:100,size_y:34,emptyImage:"Content/Images8x/UI/bar/mission_progress_empty.png",fillImage:"Content/Images8x/UI/bar/mission_progress_fill.png",visible:false,showText:false},{name:"stage3ProgressBar",pos_x:380,pos_y:355,anchor_x:0.5,anchor_y:0.5,size_x:100,size_y:34,emptyImage:"Content/Images8x/UI/bar/mission_progress_empty.png",fillImage:"Content/Images8x/UI/bar/mission_progress_fill.png",visible:false,showText:false},{name:"stage4ProgressBar",pos_x:550,pos_y:425,anchor_x:0.5,anchor_y:0.5,size_x:100,size_y:34,emptyImage:"Content/Images8x/UI/bar/mission_progress_empty.png",fillImage:"Content/Images8x/UI/bar/mission_progress_fill.png",visible:false,showText:false},{name:"stage5ProgressBar",pos_x:210,pos_y:385,anchor_x:0.5,anchor_y:0.5,size_x:100,size_y:34,emptyImage:"Content/Images8x/UI/bar/mission_progress_empty.png",fillImage:"Content/Images8x/UI/bar/mission_progress_fill.png",visible:false,showText:false},{name:"stage6ProgressBar",pos_x:530,pos_y:745,anchor_x:0.5,anchor_y:0.5,size_x:100,size_y:34,emptyImage:"Content/Images8x/UI/bar/mission_progress_empty.png",fillImage:"Content/Images8x/UI/bar/mission_progress_fill.png",visible:false,showText:false}],labels:[{name:"stage1ProgressLabel",anchor_x:0.5,anchor_y:0.5,pos_x:70,pos_y:370,size_x:100,size_y:50,font_size:34,visible:false,color:[255,255,255],fontType:"Content/Fonts/SFElectrotome.ttf",text:""},{name:"stage2ProgressLabel",anchor_x:0.5,anchor_y:0.5,pos_x:300,pos_y:730,size_x:100,size_y:50,font_size:34,visible:false,color:[255,255,255],fontType:"Content/Fonts/SFElectrotome.ttf",text:""},{name:"stage3ProgressLabel",anchor_x:0.5,anchor_y:0.5,pos_x:380,pos_y:360,size_x:100,size_y:50,font_size:34,visible:false,color:[255,255,255],fontType:"Content/Fonts/SFElectrotome.ttf",text:""},{name:"stage4ProgressLabel",anchor_x:0.5,anchor_y:0.5,pos_x:550,pos_y:430,size_x:100,size_y:50,font_size:34,visible:false,color:[255,255,255],fontType:"Content/Fonts/SFElectrotome.ttf",text:""},{name:"stage5ProgressLabel",anchor_x:0.5,anchor_y:0.5,pos_x:210,pos_y:390,size_x:100,size_y:50,font_size:34,visible:false,color:[255,255,255],fontType:"Content/Fonts/SFElectrotome.ttf",text:""},{name:"stage6ProgressLabel",anchor_x:0.5,anchor_y:0.5,pos_x:530,pos_y:750,size_x:100,size_y:50,font_size:34,visible:false,color:[255,255,255],fontType:"Content/Fonts/SFElectrotome.ttf",text:""},{name:"worldNameLabel",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:800,font_size:38,color:[255,255,255],fontType:"Content/Fonts/SFElectrotome.ttf",text:""}],buttons:[{name:"stage1Button",anchor_x:0.5,anchor_y:0.5,pos_x:70,pos_y:300,size_x:175,size_y:175,asset:"Content/Images8x/UI/02_mission/mission_autobot.png",visible:false,action:"onStageSelected",sound:["ZOOM"],info:{id:-1}},{name:"stage2Button",anchor_x:0.5,anchor_y:0.5,pos_x:300,pos_y:660,size_x:175,size_y:175,visible:false,asset:"Content/Images8x/UI/02_mission/mission_autobot.png",action:"onStageSelected",sound:["ZOOM"],info:{id:-1}},{name:"stage3Button",anchor_x:0.5,anchor_y:0.5,pos_x:380,pos_y:290,size_x:175,size_y:175,visible:false,asset:"Content/Images8x/UI/02_mission/mission_autobot.png",action:"onStageSelected",sound:["ZOOM"],info:{id:-1}},{name:"stage4Button",anchor_x:0.5,anchor_y:0.5,pos_x:550,pos_y:360,size_x:175,size_y:175,visible:false,asset:"Content/Images8x/UI/02_mission/mission_autobot.png",action:"onStageSelected",sound:["ZOOM"],info:{id:-1}},{name:"stage5Button",anchor_x:0.5,anchor_y:0.5,pos_x:210,pos_y:320,size_x:175,size_y:175,visible:false,asset:"Content/Images8x/UI/02_mission/mission_autobot.png",action:"onStageSelected",sound:["ZOOM"],info:{id:-1}},{name:"stage6Button",anchor_x:0.5,anchor_y:0.5,pos_x:530,pos_y:680,size_x:175,size_y:175,visible:false,asset:"Content/Images8x/UI/02_mission/mission_autobot.png",action:"onStageSelected",sound:["ZOOM"],info:{id:-1}}]}}};__ngs._du={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.FullScreenMissionDefinition={images:[],labels:[{name:"message",anchor_x:0.5,anchor_y:0.5,pos_x:0,pos_y:0,size_x:560,size_y:100,font_size:36,color:[240,240,255],depth:3,alpha:0.6,horizontalAlign:"center",fontType:"Content/Fonts/SFElectrotome.ttf",text:""}],buttons:[{name:"textfield",pos_x:0,pos_y:0,size_x:640,size_y:320,anchor_x:0.5,anchor_y:0.5,feedback:false,asset:"",action:"onOk",info:{}},{name:"card",pos_x:0,pos_y:320,size_x:640,size_y:320,anchor_x:0.5,anchor_y:0.5,feedback:false,asset:"",action:"onOk",info:{}}],}}};__ngs._dv={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.WorldSelectViewDefinition={images:[{name:"planetImage",pos_x:320,pos_y:480,size_x:1024,size_y:1024,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/BG/bg_mission_planet.jpg"},{name:"techOverlay",pos_x:15,pos_y:140,size_x:220,size_y:370,asset:"Content/Images8x/UI/Overlay/tech_overlay_01.png"}],labels:[],buttons:[{name:"world1Button",anchor_x:0.5,anchor_y:0.5,pos_x:180,pos_y:550,size_x:175,size_y:175,asset:"Content/Images8x/UI/02_mission/mission_autobot.png",visible:false,action:"onWorldSelected",sound:["ZOOM"],info:{id:-1}},{name:"world2Button",anchor_x:0.5,anchor_y:0.5,pos_x:220,pos_y:330,size_x:175,size_y:175,visible:false,asset:"Content/Images8x/UI/02_mission/mission_autobot.png",action:"onWorldSelected",sound:["ZOOM"],info:{id:-1}},{name:"world3Button",anchor_x:0.5,anchor_y:0.5,pos_x:410,pos_y:700,size_x:175,size_y:175,visible:false,asset:"Content/Images8x/UI/02_mission/mission_autobot.png",action:"onWorldSelected",sound:["ZOOM"],info:{id:-1}},{name:"world4Button",anchor_x:0.5,anchor_y:0.5,pos_x:340,pos_y:500,size_x:175,size_y:175,visible:false,asset:"Content/Images8x/UI/02_mission/mission_autobot.png",action:"onWorldSelected",sound:["ZOOM"],info:{id:-1}},{name:"world5Button",anchor_x:0.5,anchor_y:0.5,pos_x:200,pos_y:300,size_x:175,size_y:175,visible:false,asset:"Content/Images8x/UI/02_mission/mission_autobot.png",action:"onWorldSelected",sound:["ZOOM"],info:{id:-1}},{name:"world6Button",anchor_x:0.5,anchor_y:0.5,pos_x:200,pos_y:350,size_x:175,size_y:175,visible:false,asset:"Content/Images8x/UI/02_mission/mission_autobot.png",action:"onWorldSelected",sound:["ZOOM"],info:{id:-1}}]}}};__ngs._dw={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.UnitDetailViewDefinition={images:[{name:"backgroundImage",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:480,size_x:768,size_y:1024,alpha:0.5,asset:"Content/Images8x/UI/BG/bg_deck.jpg"}],groupDefinitions:{transformerPanel:{labels:[{name:"name",anchor_x:0.5,anchor_y:1,pos_x:50,pos_y:40,size_x:200,size_y:100,color:[170,224,255],text:"",font_size:22,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"middle",verticalAlign:"top"}]},weaponPanel:{labels:[{name:"name",anchor_x:0.5,anchor_y:1,pos_x:55,pos_y:26,size_x:200,size_y:100,color:[170,224,255],text:"",font_size:22,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"middle",verticalAlign:"top"}]},unitdetails:{images:[{name:"backgroundImage",pos_x:0,pos_y:-225,size_x:640,size_y:640,asset:"Content/Images8x/UI/BG/bg_trans_decklist_background.png"},{name:"skillbuttonImage1",pos_x:35,pos_y:214,size_x:59,size_y:59,asset:"Content/Images8x/UI/icon/icon_1_bonus_max_level.png",alpha:0.3},{name:"skillbuttonImage2",pos_x:105,pos_y:214,size_x:59,size_y:59,asset:"Content/Images8x/UI/icon/icon_1_bonus_transforming.png",alpha:0.3},{name:"skillbuttonImage3",pos_x:175,pos_y:214,size_x:59,size_y:59,asset:"Content/Images8x/UI/icon/icon_0_character.png",alpha:0.3},{name:"skillbuttonImage4",pos_x:245,pos_y:214,size_x:59,size_y:59,asset:"Content/Images8x/UI/icon/icon_0_atk_range.png",alpha:0.3},{name:"skillbuttonImage5",pos_x:315,pos_y:214,size_x:59,size_y:59,asset:"Content/Images8x/UI/icon/icon_0_assault.png",alpha:0.3},{name:"skillbuttonImage6",pos_x:385,pos_y:214,size_x:59,size_y:59,asset:"Content/Images8x/UI/icon/icon_0_faction_autobot.png",alpha:0.3},{name:"skillbuttonImage7",pos_x:455,pos_y:214,size_x:59,size_y:59,asset:"Content/Images8x/misc/1pxclear.png",alpha:0.3},{name:"skillbuttonImage8",pos_x:525,pos_y:214,size_x:59,size_y:59,asset:"Content/Images8x/misc/1pxclear.png",alpha:0.3}],labels:[{name:"combatRankLabel",pos_x:640,pos_y:-177,size_x:256,size_y:80,anchor_x:1,anchor_y:0,color:[170,224,255],text:"ui_commander_uc",horizontalAlign:"middle",font_size:24,fontType:"Content/Fonts/TransformersMovie.ttf"},{name:"levelLabel",pos_x:85,pos_y:-55,size_x:160,size_y:50,color:[170,224,255],text:"ui_level_uc",font_size:38,fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"levelnumberLabel",pos_x:85,pos_y:10,size_x:180,size_y:180,color:[255,255,255],text:"",font_size:64,fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"roleBonusFixedLabel",pos_x:560,pos_y:0,size_x:124,size_y:124,color:[50,212,69],text:"ui_rolebonus_uc",font_size:32,fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"roleBonusNumLabel",pos_x:560,pos_y:125,size_x:160,size_y:72,color:[50,212,69],font_size:42,text:"ui_xthree",fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"meeleFixedLabel",pos_x:70,pos_y:110,size_x:160,size_y:60,color:[50,212,69],text:"ui_attack_uc",horizontalAlign:"right",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"rangedFixedLabel",pos_x:70,pos_y:140,size_x:160,size_y:60,color:[50,212,69],text:"ui_hp_uc",horizontalAlign:"right",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"specialFixedLabel",pos_x:70,pos_y:169,size_x:160,size_y:300,color:[170,224,255],text:"ui_defense_uc",horizontalAlign:"right",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"healtFixedLabel",pos_x:320,pos_y:324,size_x:200,size_y:60,color:[170,224,255],text:"ui_health_uc",horizontalAlign:"middle",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"attackFixedLabel",pos_x:120,pos_y:324,size_x:200,size_y:60,color:[170,224,255],text:"ui_attack_uc",horizontalAlign:"middle",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"defenseFixedLabel",pos_x:520,pos_y:324,size_x:200,size_y:60,color:[170,224,255],text:"ui_defense_uc",horizontalAlign:"middle",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"tstatus2Label",pos_x:250,pos_y:110,size_x:160,size_y:60,color:[50,212,69],font_size:32,text:"",fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"tstatus1Label",pos_x:250,pos_y:140,size_x:160,size_y:60,color:[50,212,69],font_size:32,text:"",fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"tstatus3Label",pos_x:250,pos_y:169,size_x:160,size_y:60,color:[255,255,255],font_size:32,text:"",fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"wstatus2Label",pos_x:420,pos_y:110,size_x:160,size_y:40,color:[50,212,69],font_size:32,text:"",fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"wstatus1Label",pos_x:420,pos_y:140,size_x:140,size_y:60,color:[50,212,69],font_size:32,text:"",fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"wstatus3Label",pos_x:420,pos_y:169,size_x:160,size_y:60,color:[255,255,255],font_size:32,text:"",fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"hpLabel",pos_x:320,pos_y:364,size_x:200,size_y:60,color:[251,251,251],font_size:34,horizontalAlign:"middle",text:"",fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"attackLabel",pos_x:120,pos_y:364,size_x:200,size_y:60,color:[251,251,251],font_size:34,horizontalAlign:"middle",text:"",fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"defenseLabel",pos_x:520,pos_y:364,size_x:200,size_y:60,color:[251,251,251],font_size:34,horizontalAlign:"middle",text:"",fontType:"Content/Fonts/SFElectrotome.ttf"}]}},groups:[{name:"transformerPanel",groupDefinition:"transformerPanel",pos_x:192,pos_y:191,depth:1,info:{card_w:100,card_h:134}},{name:"weaponPanel",groupDefinition:"weaponPanel",pos_x:361,pos_y:205,depth:1,info:{card_w:100,card_h:100}},{name:"unitdetails",groupDefinition:"unitdetails",pos_x:0,pos_y:250}],tfbuttons:[{name:"editButton",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:740,size_x:630,size_y:105,type:7,text:"ui_edit_uc",font_size:42,color:[236,243,255],fontType:"Content/Fonts/SFElectrotome.ttf",action:"onEdit",sound:["click_flat"]}],buttons:[{name:"bonusButton",pos_x:0,pos_y:450,size_x:640,size_y:105,type:1,text:"",font_size:50,alpha:0,color:[236,243,255],fontType:"Content/Fonts/SFElectrotome.ttf",action:"onBonusButton",sound:["click_flat"],asset:"Content/Images8x/misc/1pxclear.png"}]}}};__ngs._dx={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.UnitEditViewDefinition={images:[{name:"backgroundImage",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:480,size_x:768,size_y:1024,alpha:0.5,asset:"Content/Images8x/UI/BG/bg_deck.jpg"}],groupDefinitions:{transformerPanel:{labels:[{name:"name",anchor_x:0.5,anchor_y:1,pos_x:50,pos_y:40,size_x:200,size_y:100,color:[170,224,255],text:"",font_size:22,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"middle",verticalAlign:"top"}]},weaponPanel:{labels:[{name:"name",anchor_x:0.5,anchor_y:1,pos_x:55,pos_y:26,size_x:200,size_y:100,color:[170,224,255],text:"",font_size:22,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"middle",verticalAlign:"top"}]},card:{labels:[{name:"name",anchor_x:0.5,anchor_y:1,pos_x:0,pos_y:-41,size_x:180,size_y:100,color:[170,224,255],text:"",font_size:16,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"middle",verticalAlign:"top"}]},unitdetails:{images:[{name:"backgroundImage",pos_x:0,pos_y:-225,size_x:640,size_y:640,asset:"Content/Images8x/UI/BG/bg_trans_decklist_background.png"},{name:"skillbuttonImage1",pos_x:35,pos_y:214,size_x:59,size_y:59,asset:"Content/Images8x/UI/icon/icon_1_bonus_max_level.png",alpha:0.3},{name:"skillbuttonImage2",pos_x:105,pos_y:214,size_x:59,size_y:59,asset:"Content/Images8x/UI/icon/icon_1_bonus_transforming.png",alpha:0.3},{name:"skillbuttonImage3",pos_x:175,pos_y:214,size_x:59,size_y:59,asset:"Content/Images8x/UI/icon/icon_0_character.png",alpha:0.3},{name:"skillbuttonImage4",pos_x:245,pos_y:214,size_x:59,size_y:59,asset:"Content/Images8x/UI/icon/icon_0_atk_range.png",alpha:0.3},{name:"skillbuttonImage5",pos_x:315,pos_y:214,size_x:59,size_y:59,asset:"Content/Images8x/UI/icon/icon_0_assault.png",alpha:0.3},{name:"skillbuttonImage6",pos_x:385,pos_y:214,size_x:59,size_y:59,asset:"Content/Images8x/UI/icon/icon_0_faction_autobot.png",alpha:0.3},{name:"skillbuttonImage7",pos_x:455,pos_y:214,size_x:59,size_y:59,asset:"Content/Images8x/misc/1pxclear.png",alpha:0.3},{name:"skillbuttonImage8",pos_x:525,pos_y:214,size_x:59,size_y:59,asset:"Content/Images8x/misc/1pxclear.png",alpha:0.3}],labels:[{name:"combatRankLabel",pos_x:640,pos_y:-177,size_x:256,size_y:80,anchor_x:1,anchor_y:0,color:[170,224,255],text:"ui_commander_uc",horizontalAlign:"middle",font_size:24,fontType:"Content/Fonts/TransformersMovie.ttf"},{name:"levelLabel",pos_x:85,pos_y:-55,size_x:160,size_y:50,color:[170,224,255],text:"ui_level_uc",font_size:38,fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"levelnumberLabel",pos_x:85,pos_y:10,size_x:180,size_y:180,color:[255,255,255],text:"",font_size:64,fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"roleBonusFixedLabel",pos_x:560,pos_y:0,size_x:124,size_y:124,color:[50,212,69],text:"ui_rolebonus_uc",font_size:32,fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"roleBonusNumLabel",pos_x:560,pos_y:125,size_x:160,size_y:72,color:[50,212,69],font_size:42,text:"ui_xthree",fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"meeleFixedLabel",pos_x:70,pos_y:110,size_x:160,size_y:60,color:[50,212,69],text:"ui_attack_uc",horizontalAlign:"right",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"rangedFixedLabel",pos_x:70,pos_y:140,size_x:160,size_y:60,color:[50,212,69],text:"ui_hp_uc",horizontalAlign:"right",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"specialFixedLabel",pos_x:70,pos_y:169,size_x:160,size_y:300,color:[170,224,255],text:"ui_defense_uc",horizontalAlign:"right",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"healtFixedLabel",pos_x:320,pos_y:324,size_x:200,size_y:60,color:[170,224,255],text:"ui_health_uc",horizontalAlign:"middle",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"attackFixedLabel",pos_x:120,pos_y:324,size_x:200,size_y:60,color:[170,224,255],text:"ui_attack_uc",horizontalAlign:"middle",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"defenseFixedLabel",pos_x:520,pos_y:324,size_x:200,size_y:60,color:[170,224,255],text:"ui_defense_uc",horizontalAlign:"middle",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"tstatus2Label",pos_x:250,pos_y:110,size_x:160,size_y:60,color:[50,212,69],font_size:32,text:"",fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"tstatus1Label",pos_x:250,pos_y:140,size_x:160,size_y:60,color:[50,212,69],font_size:32,text:"",fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"tstatus3Label",pos_x:250,pos_y:169,size_x:160,size_y:60,color:[255,255,255],font_size:32,text:"",fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"wstatus2Label",pos_x:420,pos_y:110,size_x:160,size_y:40,color:[50,212,69],font_size:32,text:"",fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"wstatus1Label",pos_x:420,pos_y:140,size_x:140,size_y:60,color:[50,212,69],font_size:32,text:"",fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"wstatus3Label",pos_x:420,pos_y:169,size_x:160,size_y:60,color:[255,255,255],font_size:32,text:"",fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"hpLabel",pos_x:320,pos_y:364,size_x:200,size_y:60,color:[251,251,251],font_size:34,horizontalAlign:"middle",text:"",fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"attackLabel",pos_x:120,pos_y:364,size_x:200,size_y:60,color:[251,251,251],font_size:34,horizontalAlign:"middle",text:"",fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"defenseLabel",pos_x:520,pos_y:364,size_x:200,size_y:60,color:[251,251,251],font_size:34,horizontalAlign:"middle",text:"",fontType:"Content/Fonts/SFElectrotome.ttf"}]}},groups:[{name:"transformerPanel",groupDefinition:"transformerPanel",pos_x:192,pos_y:191,depth:1,info:{card_w:100,card_h:134}},{name:"weaponPanel",groupDefinition:"weaponPanel",pos_x:361,pos_y:205,depth:1,info:{card_w:100,card_h:100}},{name:"unitdetails",groupDefinition:"unitdetails",pos_x:0,pos_y:250},{name:"card1",groupDefinition:"card",pos_x:135,pos_y:777},{name:"card2",groupDefinition:"card",pos_x:260,pos_y:777},{name:"card3",groupDefinition:"card",pos_x:380,pos_y:777},{name:"card4",groupDefinition:"card",pos_x:505,pos_y:777}],buttons:[{name:"bonusButton",pos_x:0,pos_y:450,size_x:640,size_y:105,type:2,text:"",font_size:50,alpha:0,color:[236,243,255],fontType:"Content/Fonts/SFElectrotome.ttf",action:"onBonusButton",asset:"Content/Images8x/misc/1pxclear.png",sound:["click_flat"]},{name:"leftButton",anchor_x:0,anchor_y:0,pos_x:10,pos_y:727,size_x:70,size_y:80,type:5,text:"ui_arrowleft",font_size:50,color:[236,243,255],fontType:"Content/Fonts/SFElectrotome.ttf",action:"onLeftSelected",sound:["click_flat"],asset:"Content/Images8x/UI/button/btn_sml_blue_a.png",debounce:0},{name:"rightButton",anchor_x:1,anchor_y:0,pos_x:630,pos_y:727,size_x:70,size_y:80,type:8,text:"ui_arrowright",font_size:50,color:[236,243,255],flip_x:true,fontType:"Content/Fonts/SFElectrotome.ttf",action:"onRightSelected",sound:["click_flat"],asset:"Content/Images8x/UI/button/btn_sml_blue_a.png",debounce:0}],tfbuttons:[{name:"editButton",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:910,size_x:630,size_y:105,type:7,text:"ui_apply_uc",font_size:42,color:[236,243,255],fontType:"Content/Fonts/SFElectrotome.ttf",action:"applyChanges",sound:["click_high"]}]}}};__ngs._dy={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.UnitBonusViewDefinition={images:[{name:"leftcell",pos_x:0,pos_y:100,size_x:256,size_y:80,anchor_x:0,anchor_y:0,asset:"Content/Images8x/UI/Cell/store_cell.png"},{name:"middlecell",pos_x:255,pos_y:100,size_x:132,size_y:80,anchor_x:0,anchor_y:0,asset:"Content/Images8x/UI/Cell/store_cell_middle.png"},{name:"rightcell",pos_x:385,pos_y:100,size_x:256,size_y:80,anchor_x:0,anchor_y:0,asset:"Content/Images8x/UI/Cell/store_cell.png",flip_x:true},{name:"leftcell1",pos_x:0,pos_y:320,size_x:256,size_y:80,anchor_x:0,anchor_y:0,asset:"Content/Images8x/UI/Cell/store_cell.png"},{name:"middlecell1",pos_x:255,pos_y:320,size_x:132,size_y:80,anchor_x:0,anchor_y:0,asset:"Content/Images8x/UI/Cell/store_cell_middle.png"},{name:"rightcell1",pos_x:385,pos_y:320,size_x:256,size_y:80,anchor_x:0,anchor_y:0,asset:"Content/Images8x/UI/Cell/store_cell.png",flip_x:true},{name:"leftcell2",pos_x:0,pos_y:680,size_x:256,size_y:80,anchor_x:0,anchor_y:0,asset:"Content/Images8x/UI/Cell/store_cell.png"},{name:"middlecell2",pos_x:255,pos_y:680,size_x:132,size_y:80,anchor_x:0,anchor_y:0,asset:"Content/Images8x/UI/Cell/store_cell_middle.png"},{name:"rightcell2",pos_x:385,pos_y:680,size_x:256,size_y:80,anchor_x:0,anchor_y:0,asset:"Content/Images8x/UI/Cell/store_cell.png",flip_x:true},{name:"skillbuttonImage1",pos_x:50,pos_y:190,size_x:59,size_y:59,asset:"Content/Images8x/UI/icon/icon_1_bonus_max_level.png",alpha:0.3},{name:"skillbuttonImage2",pos_x:50,pos_y:260,size_x:59,size_y:59,asset:"Content/Images8x/UI/icon/icon_1_bonus_transforming.png",alpha:0.3},{name:"skillbuttonImage3",pos_x:50,pos_y:410,size_x:59,size_y:59,asset:"Content/Images8x/UI/icon/icon_0_character.png",alpha:0.3},{name:"skillbuttonImage4",pos_x:50,pos_y:480,size_x:59,size_y:59,asset:"Content/Images8x/UI/icon/icon_0_atk_range.png",alpha:0.3},{name:"skillbuttonImage5",pos_x:50,pos_y:550,size_x:59,size_y:59,asset:"Content/Images8x/UI/icon/icon_0_assault.png",alpha:0.3},{name:"skillbuttonImage6",pos_x:50,pos_y:620,size_x:59,size_y:59,asset:"Content/Images8x/UI/icon/icon_0_faction_autobot.png",alpha:0.3},{name:"skillbuttonImage7",pos_x:50,pos_y:770,size_x:59,size_y:59,asset:"Content/Images8x/UI/icon/icon_0_attack_double.png",alpha:0.3},{name:"skillbuttonImage8",pos_x:50,pos_y:840,size_x:59,size_y:59,asset:"Content/Images8x/UI/icon/icon_0_focus.png",alpha:0.3}],labels:[{name:"title1",pos_x:25,pos_y:120,anchor_x:0,anchor_y:0,size_x:400,size_y:80,text:"ui_characterbonus_uc",font_size:35,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],horizontalAlign:"left",verticalAlign:"top"},{name:"maxLevel",pos_x:150,pos_y:190,anchor_x:0,anchor_y:0,size_x:400,size_y:80,text:"ui_maxlvlbonus",font_size:30,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],horizontalAlign:"left",verticalAlign:"top"},{name:"maxLevelDesc",pos_x:150,pos_y:220,anchor_x:0,anchor_y:0,size_x:400,size_y:80,text:"ui_percenttoatkpower",font_size:25,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],horizontalAlign:"left",verticalAlign:"top"},{name:"changeForm",pos_x:150,pos_y:260,anchor_x:0,anchor_y:0,size_x:400,size_y:80,text:"ui_transscanbonus",font_size:30,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],horizontalAlign:"left",verticalAlign:"top"},{name:"changeFormDesc",pos_x:150,pos_y:290,anchor_x:0,anchor_y:0,size_x:400,size_y:80,text:"ui_percenttoatkpower",font_size:25,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],horizontalAlign:"left",verticalAlign:"top"},{name:"title2",pos_x:25,pos_y:340,anchor_x:0,anchor_y:0,size_x:400,size_y:80,text:"ui_combinedbonus_uc",font_size:35,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],horizontalAlign:"left",verticalAlign:"top"},{name:"charac",pos_x:150,pos_y:410,anchor_x:0,anchor_y:0,size_x:400,size_y:80,text:"ui_signatureweapon",font_size:30,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],horizontalAlign:"left",verticalAlign:"top"},{name:"characDesc",pos_x:150,pos_y:440,anchor_x:0,anchor_y:0,size_x:400,size_y:80,text:"",font_size:25,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],horizontalAlign:"left",verticalAlign:"top"},{name:"special",pos_x:150,pos_y:480,anchor_x:0,anchor_y:0,size_x:400,size_y:80,text:"ui_specialization",font_size:30,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],horizontalAlign:"left",verticalAlign:"top"},{name:"specialDesc",pos_x:150,pos_y:510,anchor_x:0,anchor_y:0,size_x:400,size_y:80,text:"",font_size:25,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],horizontalAlign:"left",verticalAlign:"top"},{name:"classB",pos_x:150,pos_y:550,anchor_x:0,anchor_y:0,size_x:400,size_y:80,text:"ui_class",font_size:30,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],horizontalAlign:"left",verticalAlign:"top"},{name:"classBDesc",pos_x:150,pos_y:580,anchor_x:0,anchor_y:0,size_x:400,size_y:80,text:"",font_size:25,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],horizontalAlign:"left",verticalAlign:"top"},{name:"faction",pos_x:150,pos_y:620,anchor_x:0,anchor_y:0,size_x:400,size_y:80,text:"ui_faction",font_size:30,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],horizontalAlign:"left",verticalAlign:"top"},{name:"factionDesc",pos_x:150,pos_y:650,anchor_x:0,anchor_y:0,size_x:400,size_y:80,text:"",font_size:25,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],horizontalAlign:"left",verticalAlign:"top"},{name:"title3",pos_x:25,pos_y:700,anchor_x:0,anchor_y:0,size_x:400,size_y:80,text:"ui_weaponbonus_uc",font_size:35,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],horizontalAlign:"left",verticalAlign:"top"},{name:"initial",pos_x:150,pos_y:770,anchor_x:0,anchor_y:0,size_x:400,size_y:80,text:"ui_initialability",font_size:30,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],horizontalAlign:"left",verticalAlign:"top"},{name:"initialDesc",pos_x:150,pos_y:800,anchor_x:0,anchor_y:0,size_x:400,size_y:80,text:"ui_percenttriggering",font_size:25,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],horizontalAlign:"left",verticalAlign:"top"},{name:"battle",pos_x:150,pos_y:840,anchor_x:0,anchor_y:0,size_x:400,size_y:80,text:"ui_battleability",font_size:30,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],horizontalAlign:"left",verticalAlign:"top"},{name:"battleDesc",pos_x:150,pos_y:870,anchor_x:0,anchor_y:0,size_x:400,size_y:80,text:"ui_percenttriggering",font_size:25,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],horizontalAlign:"left",verticalAlign:"top"}],tfbuttons:[],groups:[{name:"backgroundImage",groupDefinition:"backgroundImage",pos_x:0,pos_y:0,size_x:768,size_y:1024,depth:-10}],groupDefinitions:{backgroundImage:{images:[{name:"backgroundImage1",pos_x:320,pos_y:480,size_x:384,size_y:512,anchor_x:1,anchor_y:1,asset:"Content/Images8x/UI/BG/bg_store1.png",depth:-10},{name:"backgroundImage2",pos_x:320,pos_y:480,size_x:384,size_y:512,anchor_x:0,anchor_y:1,flip_x:true,asset:"Content/Images8x/UI/BG/bg_store1.png",depth:-10},{name:"backgroundImage3",pos_x:320,pos_y:480,size_x:384,size_y:512,anchor_x:1,anchor_y:0,flip_y:true,asset:"Content/Images8x/UI/BG/bg_store1.png",depth:-10},{name:"backgroundImage4",pos_x:320,pos_y:480,size_x:384,size_y:512,anchor_x:0,anchor_y:0,flip_x:true,flip_y:true,asset:"Content/Images8x/UI/BG/bg_store1.png",depth:-10}]}}}}};__ngs._dz={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.MissionExploreViewDefinition={images:[{name:"backGround",asset:"Content/Images8x/misc2/1pxclear.png",pos_x:-13510,pos_y:0,size_x:23510,size_y:1248,repeat:[10,1]},{name:"backGround2",asset:"Content/Images8x/misc2/1pxclear.png",pos_x:-13510,pos_y:0,size_x:23510,size_y:1248,repeat:[10,1]},{name:"dropshadow",asset:"Content/Images8x/UI/10_explore/dropshadow.png",anchor_x:0.5,anchor_y:0,pos_x:320,pos_y:0,size_x:768,size_y:103,depth:1},{name:"numberContainerLeft",asset:"Content/Images8x/UI/10_explore/container_number.png",anchor_x:1,anchor_y:0,pos_x:320,pos_y:20,size_x:101,size_y:106,depth:1},{name:"numberContainerright",asset:"Content/Images8x/UI/10_explore/container_number.png",anchor_x:0,anchor_y:0,pos_x:320,pos_y:20,size_x:101,size_y:106,flip_x:"true",depth:1},{name:"hudBottom",asset:"Content/Images8x/UI/10_explore/hud_bottom.png",anchor_x:1,anchor_y:1,pos_x:640,pos_y:960,size_x:355,size_y:204,depth:2},{name:"hudBottomIpad",asset:"Content/Images8x/UI/10_explore/hud_bottom.png",anchor_x:0,anchor_y:1,flip_x:true,pos_x:640,pos_y:960,size_x:355,size_y:204,depth:2},{name:"hudBottomLine",asset:"Content/Images8x/UI/10_explore/hud_line.png",anchor_x:0,anchor_y:1,pos_x:-128,pos_y:960,size_x:413,size_y:12.5},{name:"hudTop",asset:"Content/Images8x/UI/10_explore/hud_top.png",anchor_x:0.5,anchor_y:0,pos_x:320,pos_y:0,size_x:166,size_y:51,depth:2},{name:"hudTopLineLeft",asset:"Content/Images8x/UI/10_explore/hud_line.png",anchor_x:0,anchor_y:0,pos_x:20,pos_y:-5,size_x:217,size_y:12,flip_y:true,depth:2},{name:"hudTopLineLeftEnd",asset:"Content/Images8x/UI/10_explore/hud_line_end.png",anchor_x:0,anchor_y:0,pos_x:10,pos_y:0,size_x:10,size_y:7,flip_x:true,depth:2},{name:"hudTopLineRight",asset:"Content/Images8x/UI/10_explore/hud_line.png",anchor_x:1,anchor_y:0,pos_x:620,pos_y:-5,size_x:217,size_y:12,flip_y:true,depth:2},{name:"hudTopLineRightEnd",asset:"Content/Images8x/UI/10_explore/hud_line_end.png",anchor_x:1,anchor_y:0,pos_x:630,pos_y:0,size_x:10,size_y:7,depth:2},{name:"mainCard",pos_x:320,pos_y:-500,anchor_x:0.5,anchor_y:0.5,size_x:240,size_y:300,asset:""}],groupDefinitions:{bonus:{labels:[{name:"staticBonus",pos_x:620,pos_y:30,anchor_x:1,anchor_y:0.5,size_x:150,size_y:40,dropShadowVisible:true,horizontalAlign:"right",fontType:"Content/Fonts/SFElectrotome.ttf",font_size:36,text:"ui_credits",color:[220,220,255]},{name:"bonusCurrency",pos_x:580,pos_y:67,dropShadowVisible:true,anchor_x:1,anchor_y:0.5,size_x:150,size_y:50,horizontalAlign:"right",fontType:"Content/Fonts/SFElectrotome.ttf",font_size:40,text:"",color:[173,255,154]},{name:"centerText",pos_x:320,pos_y:540,size_x:500,size_y:120,font_size:64,horizontalAlign:"center",anchor_x:0.5,anchor_y:0.5,text:"",color:[173,255,154],depth:100,fontType:"Content/Fonts/TransformersMovie.ttf",dropShadowVisible:true,dropShadowPosition:[2,2],dropShadowColor:[0,0,0]}],images:[{name:"energyIcon",pos_x:620,pos_y:45,anchor_x:1,anchor_y:0,size_x:40,size_y:40,asset:"Content/Images8x/UI/icon/icon_currency.png",depth:0.9}]},bothud:{images:[{name:"sliderLeft",asset:"Content/Images8x/UI/10_explore/hud_slider.png",anchor_x:0,anchor_y:0.5,pos_x:0,pos_y:690,size_x:100,size_y:256},{name:"sliderLeftIpad",asset:"Content/Images8x/UI/10_explore/hud_slider_b.png",anchor_x:1,anchor_y:0.5,pos_x:0,pos_y:690,size_x:100,size_y:256},{name:"sliderRight",asset:"Content/Images8x/UI/10_explore/hud_slider.png",anchor_x:1,anchor_y:0.5,pos_x:640,pos_y:690,size_x:100,size_y:256,flip_x:true},{name:"sliderRightIpad",asset:"Content/Images8x/UI/10_explore/hud_slider_b.png",anchor_x:0,anchor_y:0.5,pos_x:640,pos_y:690,size_x:100,size_y:256}],tfbuttons:[{name:"MissionExplore",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:653,size_x:456,size_y:105,fontType:"Content/Fonts/SFElectrotome.ttf",font_size:48,type:7,text:"ui_scan_uc",sound:["ui_fusion_03"],action:"onMissionExplore"}]},bars:{progressBar:[{name:"energyBar",pos_x:352,pos_y:-10,size_x:394,fillImage:"Content/Images8x/misc/1pxwhite.png",color:[195,1,209],size_y:12,anchor_x:0,anchor_y:0,value:100},{name:"xpBar",pos_x:378,pos_y:37,fillImage:"Content/Images8x/UI/10_explore/bar_reg_mid.png",color:[85,102,250],size_x:394,size_y:12,anchor_x:0,anchor_y:0,value:100}],images:[{name:"energyIcon",pos_x:95,pos_y:-16,anchor_x:0.5,anchor_y:0.5,size_x:80,size_y:80,asset:"Content/Images8x/UI/icon/icon_energy.png",depth:0.9},{name:"containerLeft",asset:"Content/Images8x/UI/10_explore/container_left.png",anchor_x:0,anchor_y:0,pos_x:20,pos_y:-50,size_x:200,size_y:128,depth:-1},{name:"containerMid",asset:"Content/Images8x/UI/10_explore/container_mid.png",anchor_x:0,anchor_y:0,pos_x:220,pos_y:-50,size_x:242,size_y:128,depth:-1},{name:"containerRight",asset:"Content/Images8x/UI/10_explore/container_right.png",anchor_x:1,anchor_y:0,pos_x:590,pos_y:-50,size_x:128,size_y:128,depth:-1}],labels:[{name:"xpLabel",pos_x:118,pos_y:22,anchor_x:0.5,anchor_y:0.5,size_x:60,size_y:60,depth:0.9,dropShadowVisible:true,text:"ui_xp_uc",fontType:"Content/Fonts/SFElectrotome.ttf",font_size:38,horizontalAlign:"middle",verticalAlign:"bottom"}]},scope:{images:[{name:"inactiveReticle",pos_x:0,pos_y:0,anchor_x:0.5,anchor_y:0.5,visible:false,size_x:150,size_y:150,color:[255,0,0],asset:"Content/Images8x/UI/10_explore/reticle_inactive.png"},{name:"countdownReticle",pos_x:0,pos_y:0,anchor_x:0.5,anchor_y:0.5,visible:false,size_x:150,size_y:150,color:[255,0,0],asset:"Content/Images8x/UI/10_explore/reticle_countdown.png"},{name:"activeReticle",pos_x:0,pos_y:0,anchor_x:0.5,anchor_y:0.5,visible:false,size_x:150,size_y:150,color:[0,255,0],asset:"Content/Images8x/UI/10_explore/reticle_active.png"}],buttons:[{name:"missile",pos_x:0,pos_y:0,anchor_x:0.5,anchor_y:0.5,size_x:20,size_y:20,visible:false,asset:"Content/Images8x/UI/02_mission/missile_front_small.png",relaxedDebounce:true,action:"targetClick",relaxedDebounce:true,sound:[],depth:-1,info:{id:"target2"}}],labels:[{name:"resultLabel",pos_x:0,pos_y:-150,anchor_x:0.5,anchor_y:0.5,dropShadowVisible:true,size_x:150,size_y:100,alpha:0.8,fontType:"Content/Fonts/TransformersMovie.ttf",font_size:28,visible:true,text:"",color:[234,255,0]},{name:"scoreLabel",pos_x:0,pos_y:-200,anchor_x:0.5,anchor_y:0.5,dropShadowVisible:true,size_x:150,size_y:80,alpha:0.8,font_size:48,fontType:"Content/Fonts/SFElectrotome.ttf",visible:true,text:"",color:[173,255,154]}]},unknownSignatureScreen:{labels:[{name:"title",pos_x:320,pos_y:300,anchor_x:0.5,anchor_y:0.5,dropShadowVisible:true,size_x:600,size_y:300,alpha:1,fontType:"Content/Fonts/TransformersMovie.ttf",font_size:50,visible:true,text:"ui_unknownsigdetected_uc",color:[255,255,255]},{name:"instruction",pos_x:320,pos_y:700,anchor_x:0.5,anchor_y:0.5,dropShadowVisible:true,size_x:400,size_y:150,alpha:1,fontType:"Content/Fonts/TransformersMovie.ttf",font_size:35,visible:true,text:"ui_taptoinvestigate_uc",color:[255,255,255]}],images:[{name:"signatureImage",pos_x:320,pos_y:500,anchor_x:0.5,anchor_y:0.5,visible:true,size_x:256,size_y:256,asset:"Content/Images2x/UI/10_explore/hud_detected03.png"},{name:"detectedHudTop",pos_x:320,pos_y:500,anchor_x:0.5,anchor_y:0.5,visible:true,size_x:256,size_y:256,asset:"Content/Images8x/UI/10_explore/hud_detected04.png"},{name:"detectedHud1",pos_x:320,pos_y:500,anchor_x:0.5,anchor_y:0.5,visible:true,size_x:256,size_y:256,asset:"Content/Images8x/UI/10_explore/hud_detected02.png"},{name:"detectedHud2",pos_x:320,pos_y:500,anchor_x:0.5,anchor_y:0.5,visible:true,size_x:256,size_y:256,asset:"Content/Images8x/UI/10_explore/hud_detected01.png"}],buttons:[{name:"tapArea",pos_x:0,pos_y:0,anchor_x:0,anchor_y:0,size_x:640,size_y:960,visible:true,action:"onTapToInvestigate",sound:[],depth:100,enabled:false}]}},groups:[{name:"bars",groupDefinition:"bars",pos_x:0,pos_y:840,depth:1},{name:"bothud",groupDefinition:"bothud",pos_x:0,pos_y:550},{name:"scope1",groupDefinition:"scope",pos_x:0,pos_y:0},{name:"scope2",groupDefinition:"scope",pos_x:0,pos_y:0},{name:"scope3",groupDefinition:"scope",pos_x:0,pos_y:0},{name:"bonus",groupDefinition:"bonus",pos_x:0,pos_y:0,visible:true,depth:2},{name:"scope4",groupDefinition:"scope",pos_x:0,pos_y:0,info:{special:true}},{name:"unknownSignature",groupDefinition:"unknownSignatureScreen",pos_x:0,pos_y:0,visible:false}],progressBar:[],labels:[{name:"missionProgress",anchor_x:0.5,anchor_y:0,pos_x:306,pos_y:18,size_x:100,size_y:30,dropShadowVisible:true,text:"ui_progress_uc",horizontalAlign:"middle",verticalAlign:"middle",font_size:24,fontType:"Content/Fonts/SFElectrotome.ttf",color:[220,220,255],depth:2},{name:"missionProgressNumber",anchor_x:1,anchor_y:0.5,pos_x:350,pos_y:87,size_x:150,size_y:120,text:"",dropShadowVisible:true,horizontalAlign:"right",verticalAlign:"middle",font_size:64,fontType:"Content/Fonts/TransformersMovie.ttf",color:[220,220,255],depth:2},{name:"missionProgressPercent",anchor_x:0.5,anchor_y:0,pos_x:369,pos_y:36,dropShadowVisible:true,size_x:60,size_y:60,text:"ui_percent",horizontalAlign:"middle",font_size:32,fontType:"Content/Fonts/SFElectrotome.ttf",color:[220,220,255],depth:2},{name:"missionName",anchor_x:0.5,anchor_y:0,pos_x:320,pos_y:150,fontType:"Content/Fonts/SFElectrotome.ttf",size_x:550,size_y:300,dropShadowVisible:true,font_size:40,text:"ui_mission_uc",horizontalAlign:"center",verticalAlign:"top",color:[220,220,255],depth:2}]}}};__ngs._e0={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var a=__ngs.r_(__ngs._d2).DialogView;var c=__ngs.r_(__ngs._fr).LevelUpDefinition;b.LevelUpView=a.subclass({classname:"LevelUpView",initialize:function($super,e){$super(e,c);this._shade.setAnchor(new Core.Point(0.5,0.5))},destroy:function($super){$super()}})}};__ngs._e1={_c:null,_d:function(){this._c={exports:{motions:{"16":{source:[{x:430,y:450,scaleX:0.8,scaleY:0.8,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0,scaleX:1,scaleY:1},{alpha:0,index:6,x:0,y:0,scaleX:1,scaleY:1},{x:20,alpha:0,index:7,y:0,scaleX:1,scaleY:1},{alpha:1,index:11,x:20,y:0,scaleX:1,scaleY:1},{index:33,x:20,y:0,scaleX:1,scaleY:1},{scaleX:2.511,scaleY:2.511,alpha:0,index:41,x:20,y:0},{alpha:0,index:99,x:20,y:0,scaleX:2.511,scaleY:2.511}]},"17":{source:[{x:450,y:450,scaleX:0.8,scaleY:0.8,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0,x:0,y:0,scaleX:1,scaleY:1},{alpha:0,index:35,x:0,y:0,scaleX:3.066,scaleY:3.066},{scaleX:3.066,scaleY:3.066,alpha:0.29,index:36,x:0,y:0},{scaleX:1,scaleY:1,alpha:1,index:44,x:0,y:0},{index:99,x:0,y:0,scaleX:1,scaleY:1}]},White:{source:[{x:0,y:0,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0},{alpha:0,index:13,x:0,y:0},{alpha:0.51,index:23,x:0,y:0},{alpha:0.4,index:33,x:0,y:0},{alpha:0,index:45,x:0,y:0},{alpha:0,index:99,x:0,y:0}]},D2:{source:[{x:535,y:179,scaleX:1,scaleY:1,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0,scaleX:1,scaleY:1},{alpha:0,index:8,x:0,y:0,scaleX:1,scaleY:1},{scaleX:2.22,scaleY:2.22,alpha:0,index:9,x:0,y:0},{x:-102,y:16,alpha:1,index:13,scaleX:2.22,scaleY:2.22},{x:-823,y:32,alpha:1,index:40,scaleX:2.22,scaleY:2.22},{x:-931,alpha:0,index:45,y:32,scaleX:2.22,scaleY:2.22},{alpha:0,index:99,x:-931,y:32,scaleX:2.22,scaleY:2.22}]},D:{source:[{x:329,y:355,scaleX:1,scaleY:1,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0,scaleX:1,scaleY:1},{alpha:0,index:10,x:0,y:0,scaleX:1,scaleY:1},{x:-83,y:-395,scaleX:8.345,scaleY:8.345,alpha:0.33,index:11},{x:-1037,y:-422,alpha:0,index:50,scaleX:8.345,scaleY:8.345},{alpha:0,index:99,x:-1037,y:-422,scaleX:8.345,scaleY:8.345}]},C:{source:[{x:334,y:430,scaleX:1,scaleY:1,rotation:0,frameRate:24,offsetX:-20.399999999999977,offsetY:-30.94999999999999,alpha:1}],Keyframe:[{alpha:0,index:0,rotation:0,scaleX:1,scaleY:1},{alpha:0,index:10,x:0,y:0,rotation:0,scaleX:1,scaleY:1},{x:83,y:298,scaleX:2.176,scaleY:2.189,rotation:-81,alpha:1,index:11},{x:-57,y:229,scaleX:1.981,scaleY:1.994,rotation:-21,alpha:1,index:22},{x:-60,y:199,rotation:31,index:31,scaleX:1.981,scaleY:1.994},{x:-167,y:194,scaleX:2.635,scaleY:2.651,rotation:42,alpha:0.53,index:40},{x:-257,scaleX:2.634,rotation:49,alpha:0,index:51,y:194,scaleY:2.651},{alpha:0,index:99,x:-257,y:194,rotation:49,scaleX:2.634,scaleY:2.651}]},B:{source:[{x:382,y:689,scaleX:1,scaleY:1,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0,scaleX:1,scaleY:1},{alpha:0,index:10,x:0,y:0,scaleX:1,scaleY:1},{scaleX:1.634,scaleY:1.634,alpha:0,index:11,x:0,y:0},{x:-98,alpha:1,index:14,y:0,scaleX:1.634,scaleY:1.634},{x:-274,index:22,y:0,scaleX:1.634,scaleY:1.634},{x:-520,alpha:0.57,index:34,y:0,scaleX:1.634,scaleY:1.634},{x:-629,y:4,alpha:0,index:40,scaleX:1.634,scaleY:1.634},{y:-16,alpha:0,index:99,x:-629,scaleX:1.634,scaleY:1.634}]},A:{source:[{x:0,y:0,scaleX:1,scaleY:1,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0,scaleX:1,scaleY:1},{x:-178,y:371,scaleX:1.613,scaleY:1.613,alpha:0,index:7},{x:-99,y:371,alpha:1,index:11,scaleX:1.613,scaleY:1.613},{x:-47,index:14,y:371,scaleX:1.613,scaleY:1.613},{x:92,index:22,y:371,scaleX:1.613,scaleY:1.613},{x:298,y:373,index:34,scaleX:1.613,scaleY:1.613},{alpha:0,index:40,x:298,y:373,scaleX:1.613,scaleY:1.613},{alpha:0,index:99,x:298,y:373,scaleX:1.613,scaleY:1.613}]},LEVEL:{source:[{x:221,y:450,scaleY:1,frameRate:24,offsetX:0,offsetY:0,alpha:1,scaleX:1}],Keyframe:[{index:0,scaleX:1,scaleY:1},{index:6,x:0,y:0,scaleX:1,scaleY:1},{index:7,x:0,y:0,scaleX:1,scaleY:1},{scaleY:0.997,alpha:1,index:11,x:0,y:0,scaleX:1},{alpha:1,index:99,x:0,y:0,scaleX:1,scaleY:0.997}]},"Bar head":{source:[{x:79,y:492,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0},{alpha:0,index:10,x:0,y:0},{alpha:1,index:11,x:0,y:0},{x:397,y:2,index:34},{alpha:0,index:49,x:397,y:2},{alpha:0,index:99,x:397,y:2}]},Bar:{source:[{x:106,y:511,scaleX:1,frameRate:24,offsetX:0,offsetY:0,alpha:1,scaleY:1}],Keyframe:[{alpha:0,index:0,scaleX:1,scaleY:1},{alpha:0,index:10,x:0,y:0,scaleX:1,scaleY:1},{y:6,alpha:1,index:11,x:0,scaleX:1,scaleY:1},{scaleX:13.30618556701031,index:34,x:0,y:6,scaleY:1},{index:99,x:0,y:6,scaleX:13.30618556701031,scaleY:1}]},Frame:{source:[{x:320,y:480,scaleX:1,scaleY:1,frameRate:24,offsetX:0.30000000000001137,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0,scaleX:1,scaleY:1},{x:0,y:-20,scaleX:1.492,scaleY:1.492,alpha:0,index:5},{x:0,y:0,scaleX:0.994,scaleY:1,alpha:1,index:11},{index:99,x:0,y:0,scaleX:0.994,scaleY:1}]},glow4:{source:[{x:638,y:80,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0},{alpha:0,index:12,x:0,y:0},{x:0,y:72,alpha:1,index:18},{x:0,y:728,index:73},{y:800,alpha:0,index:79,x:0}]},glow3:{source:[{x:2,y:80,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0},{alpha:0,index:12,x:0,y:0},{x:0,y:72,alpha:1,index:18},{x:0,y:728,index:73},{y:800,alpha:0,index:79,x:0}]},glow2:{source:[{x:638,y:880,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0},{alpha:0,index:12,x:0,y:0},{x:0,y:-72,alpha:1,index:18},{x:0,y:-728,index:73},{y:-800,alpha:0,index:79,x:0}]},glow1:{source:[{x:2,y:880,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0},{alpha:0,index:12,x:0,y:0},{x:0,y:-72,alpha:1,index:18},{x:0,y:-728,index:73},{y:-800,alpha:0,index:79,x:0}]},overlay:{source:[{x:320,y:480,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0},{alpha:0.3,index:11,x:0,y:0},{alpha:0.3,index:99,x:0,y:0}]}}}}}};__ngs._e2={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var b=__ngs.r_(__ngs._d2).DialogView;var a=__ngs.r_(__ngs._fs).MissionCompleteDefinition;c.MissionCompleteView=b.subclass({classname:"MissionCompleteView",initialize:function($super,e){$super(e,a);this._shade.setAnchor(new Core.Point(0.5,0.5))},destroy:function($super){$super()}})}};__ngs._e3={_c:null,_d:function(){this._c={exports:{motions:{White:{source:[{x:0,y:0,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0},{alpha:0,index:13,x:0,y:0},{alpha:0.51,index:23,x:0,y:0},{alpha:0.4,index:33,x:0,y:0},{alpha:0,index:45,x:0,y:0},{alpha:0,index:99,x:0,y:0}]},D2:{source:[{x:535,y:179,scaleX:1,scaleY:1,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0,scaleX:1,scaleY:1},{alpha:0,index:8,x:0,y:0,scaleX:1,scaleY:1},{scaleX:2.22,scaleY:2.22,alpha:0,index:9,x:0,y:0},{x:-102,y:16,alpha:1,index:13,scaleX:2.22,scaleY:2.22},{x:-823,y:32,index:40,scaleX:2.22,scaleY:2.22},{x:-931,alpha:0,index:45,y:32,scaleX:2.22,scaleY:2.22},{alpha:0,index:99,x:-931,y:32,scaleX:2.22,scaleY:2.22}]},D:{source:[{x:329,y:355,scaleX:1,scaleY:1,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0,scaleX:1,scaleY:1},{alpha:0,index:10,x:0,y:0,scaleX:1,scaleY:1},{x:-83,y:-395,scaleX:8.345,scaleY:8.345,alpha:0.33,index:11},{x:-1037,y:-422,alpha:0,index:50,scaleX:8.345,scaleY:8.345},{alpha:0,index:99,x:-1037,y:-422,scaleX:8.345,scaleY:8.345}]},C:{source:[{x:334,y:430,scaleX:1,scaleY:1,rotation:0,frameRate:24,offsetX:-20.399999999999977,offsetY:-30.94999999999999,alpha:1}],Keyframe:[{alpha:0,index:0,rotation:0,scaleX:1,scaleY:1},{alpha:0,index:10,x:0,y:0,rotation:0,scaleX:1,scaleY:1},{x:83,y:298,scaleX:2.176,scaleY:2.189,rotation:-81,alpha:1,index:11},{x:-57,y:229,scaleX:1.981,scaleY:1.994,rotation:-21,index:22},{x:-60,y:199,rotation:31,index:31,scaleX:1.981,scaleY:1.994},{x:-167,y:194,scaleX:2.635,scaleY:2.651,rotation:42,alpha:0.53,index:40},{x:-257,scaleX:2.634,rotation:49,alpha:0,index:51,y:194,scaleY:2.651},{alpha:0,index:99,x:-257,y:194,rotation:49,scaleX:2.634,scaleY:2.651}]},B:{source:[{x:382,y:689,scaleX:1,scaleY:1,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0,scaleX:1,scaleY:1},{alpha:0,index:10,x:0,y:0,scaleX:1,scaleY:1},{scaleX:1.634,scaleY:1.634,alpha:0,index:11,x:0,y:0},{x:-98,alpha:1,index:14,y:0,scaleX:1.634,scaleY:1.634},{x:-274,index:22,y:0,scaleX:1.634,scaleY:1.634},{x:-520,alpha:0.57,index:34,y:0,scaleX:1.634,scaleY:1.634},{x:-629,y:4,alpha:0,index:40,scaleX:1.634,scaleY:1.634},{y:-16,alpha:0,index:99,x:-629,scaleX:1.634,scaleY:1.634}]},A:{source:[{x:0,y:0,scaleX:1,scaleY:1,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0,scaleX:1,scaleY:1},{x:-178,y:371,scaleX:1.613,scaleY:1.613,alpha:0,index:7},{x:-99,y:371,alpha:1,index:11,scaleX:1.613,scaleY:1.613},{x:-47,index:14,y:371,scaleX:1.613,scaleY:1.613},{x:92,index:22,y:371,scaleX:1.613,scaleY:1.613},{x:298,y:373,index:34,scaleX:1.613,scaleY:1.613},{alpha:0,index:40,x:298,y:373,scaleX:1.613,scaleY:1.613},{alpha:0,index:99,x:298,y:373,scaleX:1.613,scaleY:1.613}]},yellow2:{source:[{x:2,y:465,scaleY:1,frameRate:24,offsetX:0,offsetY:0,alpha:1,scaleX:1}],Keyframe:[{alpha:0,index:0,scaleX:1,scaleY:1},{alpha:0,index:36,x:0,y:0,scaleX:1,scaleY:1},{alpha:1,index:37,x:0,y:0,scaleX:1,scaleY:1},{y:-491,scaleY:20.653846153846157,alpha:0,index:42,x:0,scaleX:1},{alpha:0,index:99,x:0,y:-491,scaleX:1,scaleY:20.653846153846157}]},yellow:{source:[{x:2,y:490,scaleY:1,frameRate:24,offsetX:0,offsetY:0,alpha:1,scaleX:1}],Keyframe:[{alpha:0,index:0,scaleX:1,scaleY:1},{alpha:0,index:36,x:0,y:0,scaleX:1,scaleY:1},{alpha:1,index:37,x:0,y:0,scaleX:1,scaleY:1},{scaleY:19.153846153846153,alpha:0,index:42,x:0,y:0,scaleX:1},{alpha:0,index:99,x:0,y:0,scaleX:1,scaleY:19.153846153846153}]},COMPLETE:{source:[{x:120,y:465,frameRate:24,offsetX:199.10000000000002,offsetY:67.19999999999999,alpha:1}],Keyframe:[{alpha:0,index:0},{alpha:0,index:37,x:0,y:0},{y:-60,alpha:1,index:40,x:0},{alpha:1,index:99,x:0,y:-60}]},MISSION:{source:[{x:120,y:383,frameRate:24,offsetX:197.50000000000003,offsetY:82.75,alpha:1}],Keyframe:[{alpha:0,index:0},{alpha:0,index:6,x:0,y:0},{alpha:0,index:7,x:0,y:0},{alpha:1,index:11,x:0,y:0},{alpha:1,index:37,x:0,y:0},{y:-60,alpha:1,index:40,x:0},{alpha:1,index:99,x:0,y:-60}]},"Bar head":{source:[{x:79,y:492,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0},{alpha:0,index:10,x:0,y:0},{alpha:1,index:11,x:0,y:0},{x:397,y:2,index:34},{alpha:0,index:49,x:397,y:2},{alpha:0,index:99,x:397,y:2}]},Bar:{source:[{x:106,y:511,scaleX:1,frameRate:24,offsetX:0,offsetY:0,alpha:1,scaleY:1}],Keyframe:[{alpha:0,index:0,scaleX:1,scaleY:1},{alpha:0,index:10,x:0,y:0,scaleX:1,scaleY:1},{y:6,alpha:1,index:11,x:0,scaleX:1,scaleY:1},{x:0,scaleX:10.095876288659793,index:28,y:6,scaleY:1},{x:0,scaleX:13.30618556701031,index:34,y:6,scaleY:1},{index:99,x:0,y:6,scaleX:13.30618556701031,scaleY:1}]},Frame:{source:[{x:320,y:480,scaleX:1,scaleY:1,frameRate:24,offsetX:0.30000000000001137,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0,scaleX:1,scaleY:1},{x:0,y:-20,scaleX:1.492,scaleY:1.492,alpha:0,index:5},{x:0,y:0,scaleX:0.994,scaleY:1,alpha:1,index:11},{index:99,x:0,y:0,scaleX:0.994,scaleY:1}]},glow4:{source:[{x:638,y:80,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0},{alpha:0,index:12,x:0,y:0},{x:0,y:72,alpha:1,index:18},{x:0,y:728,index:73},{y:800,alpha:0,index:79,x:0}]},glow3:{source:[{x:2,y:80,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0},{alpha:0,index:12,x:0,y:0},{x:0,y:72,alpha:1,index:18},{x:0,y:728,index:73},{y:800,alpha:0,index:79,x:0}]},glow2:{source:[{x:638,y:880,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0},{alpha:0,index:12,x:0,y:0},{x:0,y:-72,alpha:1,index:18},{x:0,y:-728,index:73},{y:-800,alpha:0,index:79,x:0}]},glow1:{source:[{x:2,y:880,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0},{alpha:0,index:12,x:0,y:0},{x:0,y:-72,alpha:1,index:18},{x:0,y:-728,index:73},{y:-800,alpha:0,index:79,x:0}]},overlay:{source:[{x:320,y:480,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0},{alpha:0.3,index:11,x:0,y:0},{alpha:0.3,index:99,x:0,y:0}]}}}}}};__ngs._e4={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._7p).View;var a=__ngs.r_(__ngs._ft).LuckyChanceViewDefinition;b.LuckyChanceView=d.subclass({classname:"LuckyChanceView",initialize:function($super,e){$super(e,a);this._controller=e},destroy:function($super){$super()}})}};__ngs._e5={_c:null,_d:function(){var e={exports:{}};var c=e.exports;this._c=e;var a=__ngs.r_(__ngs._d2).DialogView;var b=__ngs.r_(__ngs._fu).EventBossPopUpDefinition;var d=__ngs.r_(__ngs._45).AnimationQueue;c.EventBossPopUpView=a.subclass({classname:"EventBossPopUpView",initialize:function($super,h,k){$super(h,b);this._otherData=h._otherData;var m="none";if(this._otherData.id){m=this._otherData.id}TFAnalytics.reportGameEvent("POPUP",{popupid:m,popupname:this._otherData.title});if(this._otherData.buttons=="one"){this.cancelButton.setVisible(false);this.okButton.setPosition(this._definitions.cancelButton.info.alt_pos_x,this._definitions.okButton.pos_y)}if(this._otherData.newPosText){this.Text.setPosition(this._otherData.newPosText)}if(this._otherData.newSizeText){this.Text.setSize(this._otherData.newSizeText)}if(this._otherData.fontSize){this.Text.setFontSize(this._otherData.fontSize)}if(this._otherData.title&&this._otherData.title.length>1){this.Title.setText(Localization.getString(this._otherData.title))}else{this.Text.setPosition(this._definitions.Text.pos_x,0)}if(this._otherData.title2&&this._otherData.title2.length>1){this.Title2.setText(Localization.getString(this._otherData.title2))}this.Text.setText(Localization.getString(this._otherData.text));if(this._otherData.textOffsetY){this.Text.setPosition(this.Text.getPosition().getX(),this.Text.getPosition().getY()+this._otherData.textOffsetY)}if(this._otherData.text){this.Text.setText(this._otherData.text)}if(this._otherData.cancelButtonText){this.cancelButton.setText(this._otherData.cancelButtonText)}if(this._otherData.okButtonText){this.okButton.setText(this._otherData.okButtonText)}var l=this._definitions.bgColor.alpha;var g=h.createAnimationQueue();g.pushAnimation(1000,d.Curve.EaseIn).tween(d.Interpolate.scalar(l,0),function(n){if(this&&this.bgColor){this.bgColor.setAlpha(n)}}.bind(this));g.pushAnimation(1000,d.Curve.EaseOut).tween(d.Interpolate.scalar(0,l),function(n){if(this&&this.bgColor){this.bgColor.setAlpha(n)}}.bind(this));g.startLooped()},destroy:function($super){$super()}})}};__ngs._e6={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.Bank=__ngs.r_(__ngs._7k).Bank}};__ngs._e7={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.BottomHudStoresInventoryViewDefinition={images:[{name:"bottomUIBackground",anchor_x:1,anchor_y:1,pos_x:320,pos_y:5,size_x:320,size_y:143,flip_x:true,asset:"Content/Images8x/UI/HUD/hud_bottom_4.png"},{name:"bottomUIBackground2",anchor_x:0,anchor_y:1,pos_x:320,pos_y:5,size_x:320,size_y:143,asset:"Content/Images8x/UI/HUD/hud_bottom_4.png"},{name:"eventSpaceBridgeIcon",anchor_x:0.5,anchor_y:1,pos_x:100,pos_y:-40,size_x:58,size_y:58,depth:3,asset:"Content/Images8x/UI/icon/icon_0_event_space_bridge.png"},{name:"spaceBridgeIcon",anchor_x:0.5,anchor_y:1,pos_x:250,pos_y:-40,size_x:58,size_y:58,depth:3,asset:"Content/Images8x/UI/icon/icon_0_space_bridge.png"},{name:"storeIcon",anchor_x:0.5,anchor_y:1,pos_x:390,pos_y:-40,size_x:58,size_y:58,depth:3,asset:"Content/Images8x/UI/icon/icon_0_store.png"},{name:"inventoryIcon",anchor_x:0.5,anchor_y:1,pos_x:540,pos_y:-40,size_x:58,size_y:58,depth:3,asset:"Content/Images8x/UI/icon/icon_0_inventory.png"},{name:"tabSelectedEventSpaceBridge",anchor_x:0.5,anchor_y:1,pos_x:100,pos_y:-6,size_x:139,size_y:98,depth:2,asset:"Content/Images8x/UI/HUD/hud_bottom_selected_m1.png",visible:false},{name:"tabSelectedSpaceBridge",anchor_x:0.5,anchor_y:1,pos_x:246,pos_y:-6,size_x:143,size_y:98,depth:2,asset:"Content/Images8x/UI/HUD/hud_bottom_selected_m2.png",visible:false},{name:"tabSelectedStore",anchor_x:0.5,anchor_y:1,pos_x:394,pos_y:-6,size_x:143,size_y:98,depth:2,asset:"Content/Images8x/UI/HUD/hud_bottom_selected_m2.png",visible:false},{name:"tabSelectedInventory",anchor_x:0.5,anchor_y:1,pos_x:540,pos_y:-6,size_x:139,size_y:98,depth:2,asset:"Content/Images8x/UI/HUD/hud_bottom_selected_m1.png",flip_x:true,visible:false}],labels:[{name:"eventSpaceBridge",anchor_x:0.5,anchor_y:0.5,pos_x:100,pos_y:-25,depth:3,text:"ui_eventspecial",font_size:18,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"center",verticalAlign:"middle",color:[170,224,255]},{name:"storeLabel",anchor_x:0.5,anchor_y:0.5,pos_x:390,pos_y:-25,depth:3,text:"ui_store",font_size:22,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"center",verticalAlign:"middle",color:[170,224,255]},{name:"spaceBridgeLabel",anchor_x:0.5,anchor_y:0.5,pos_x:250,pos_y:-25,depth:3,text:"ui_sb",font_size:22,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"center",verticalAlign:"middle",color:[170,224,255]},{name:"inventoryLabel",anchor_x:0.5,anchor_y:0.5,pos_x:540,pos_y:-25,depth:3,text:"ui_inventory",font_size:22,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"center",verticalAlign:"middle",color:[170,224,255]}],buttons:[{name:"storeButton",anchor_x:0.5,anchor_y:1,pos_x:394,pos_y:-6,size_x:139,size_y:98,depth:2,multiAsset:{selectedAsset:"Content/Images8x/UI/HUD/hud_bottom_selected_m2.png"},action:"onStoreButtonPressed",sound:["click_high"]},{name:"eventSpaceBridgeButton",anchor_x:0.5,anchor_y:1,pos_x:100,pos_y:-6,size_x:139,size_y:98,depth:2,multiAsset:{selectedAsset:"Content/Images8x/UI/HUD/hud_bottom_selected_m1.png"},action:"onEventGachaButtonPressed",sound:["click_high"]},{name:"spaceBridgeButton",anchor_x:0.5,anchor_y:1,pos_x:246,pos_y:-6,size_x:139,size_y:98,depth:2,multiAsset:{selectedAsset:"Content/Images8x/UI/HUD/hud_bottom_selected_m2.png"},action:"onSpaceBridgeButtonPressed",sound:["click_high"]},{name:"inventoryButton",anchor_x:0.5,anchor_y:1,pos_x:540,pos_y:-6,size_x:139,size_y:98,depth:2,flip_x:true,multiAsset:{selectedAsset:"Content/Images8x/UI/HUD/hud_bottom_selected_m1.png"},action:"onInventoryButtonPressed",sound:["click_high"]}]}}};__ngs._e8={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.GiftInboxViewDefinition={groups:[{name:"backgroundImage",groupDefinition:"backgroundImage",pos_x:0,pos_y:0,size_x:768,size_y:1024,depth:-10}],groupDefinitions:{backgroundImage:{images:[{name:"backgroundImage1",pos_x:320,pos_y:480,size_x:384,size_y:512,anchor_x:1,anchor_y:1,asset:"Content/Images8x/UI/BG/bg_store1.png",depth:-10},{name:"backgroundImage2",pos_x:320,pos_y:480,size_x:384,size_y:512,anchor_x:0,anchor_y:1,flip_x:true,asset:"Content/Images8x/UI/BG/bg_store1.png",depth:-10},{name:"backgroundImage3",pos_x:320,pos_y:480,size_x:384,size_y:512,anchor_x:1,anchor_y:0,flip_y:true,asset:"Content/Images8x/UI/BG/bg_store1.png",depth:-10},{name:"backgroundImage4",pos_x:320,pos_y:480,size_x:384,size_y:512,anchor_x:0,anchor_y:0,flip_x:true,flip_y:true,asset:"Content/Images8x/UI/BG/bg_store1.png",depth:-10}]}},images:[],lists:[{name:"giftInboxList",width:640,height:700,itemHeight:160,itemWidth:640,pos_x:0,pos_y:100}],labels:[{name:"message",anchor_x:0.5,anchor_y:0,pos_x:320,pos_y:300,size_x:300,size_y:200,font_size:32,color:[240,240,255],depth:3,horizontalAlign:"center",fontType:"Content/Fonts/SFElectrotome.ttf",text:"ui_allrewardscollected",visible:false}],tfbuttons:[{name:"inventoryButton",text:"ui_gotoinv",font_size:32,fontType:"Content/Fonts/SFElectrotome.ttf",pos_x:320,pos_y:500,size_x:580,size_y:75,anchor_x:0.5,anchor_y:0.5,action:"onGoInventory",sound:["click_high"],visible:false,enabled:true,depth:100},{name:"spaceBridgeButton",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:590,size_x:580,size_y:75,font_size:32,fontType:"Content/Fonts/SFElectrotome.ttf",action:"onSpaceBridge",sound:["click_high"],visible:false,text:"ui_sb",enabled:true,depth:100}]}}};__ngs._e9={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.CollectionViewDefinition={images:[{name:"backgroundImage",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:480,size_x:640,size_y:960,asset:"Content/Images8x/UI/BG/card_back.jpg"},{name:"arrowLeft",anchor_x:0,anchor_y:0.5,pos_x:18,pos_y:445,size_x:30,size_y:40,flip_x:true,depth:100,asset:"Content/Images8x/UI/icon/icon_arrows_single_white.png"},{name:"arrowRight",anchor_x:1,anchor_y:0.5,pos_x:626,pos_y:445,size_x:30,size_y:40,depth:100,asset:"Content/Images8x/UI/icon/icon_arrows_single_white.png"},{name:"arrowLeft2",anchor_x:0,anchor_y:0.5,pos_x:18,pos_y:590,size_x:30,size_y:30,flip_x:true,depth:100,color:[126,242,255],asset:"Content/Images8x/UI/icon/icon_arrows_b_white.png"},{name:"arrowRight2",anchor_x:1,anchor_y:0.5,pos_x:626,pos_y:590,size_x:30,size_y:30,depth:100,color:[126,242,255],asset:"Content/Images8x/UI/icon/icon_arrows_b_white.png"}],labels:[{name:"pageTitleLabel",pos_x:535,pos_y:65,anchor_x:0.5,anchor_y:0.5,size_x:160,size_y:60,text:"ui_page_uc",font_size:24,fontType:"Content/Fonts/SFElectrotome.ttf",color:[210,255,255],visible:false,depth:2},{name:"pageLabel",pos_x:514,pos_y:90,anchor_x:1,anchor_y:0.5,size_x:160,size_y:60,text:"1",font_size:32,fontType:"Content/Fonts/SFElectrotome.ttf",color:[210,255,255],horizontalAlign:"right",depth:2},{name:"pageMaxLabel",pos_x:514,pos_y:90,anchor_x:0,anchor_y:0.5,size_x:160,size_y:60,text:"",font_size:32,fontType:"Content/Fonts/SFElectrotome.ttf",color:[210,255,255],horizontalAlign:"left",depth:2}],buttons:[{name:"fusetype1",pos_x:320,pos_y:72,anchor_x:0.5,anchor_y:0.5,size_x:250,size_y:137,asset:"Content/Images8x/UI/button/toggle_wp.png",action:"fuseType",sound:["click_flat"],info:{type:1},visible:false,enable:false},{name:"fusetype2",pos_x:320,pos_y:72,anchor_x:0.5,anchor_y:0.5,size_x:250,size_y:137,asset:"Content/Images8x/UI/button/toggle_tf.png",action:"fuseType",sound:["click_flat"],info:{type:2}}],tfbuttons:[{name:"firstPageButton",anchor_x:0.5,anchor_y:0,pos_x:60,pos_y:590,size_x:120,size_y:60,text:"",font_size:30,color:[236,243,255],rotation:90,fontType:"Content/Fonts/SFElectrotome.ttf",action:"updateCardList",sound:["click_flat"],type:5,info:{id:-99}},{name:"prevPageButton",anchor_x:0.5,anchor_y:0,pos_x:60,pos_y:440,size_x:160,size_y:60,text:"",font_size:30,color:[236,243,255],rotation:90,fontType:"Content/Fonts/SFElectrotome.ttf",action:"updateCardList",sound:["click_flat"],type:8,info:{id:-1}},{name:"nextPageButton",anchor_x:0.5,anchor_y:1,pos_x:580,pos_y:440,size_x:160,size_y:60,text:"",font_size:30,color:[236,243,255],rotation:90,fontType:"Content/Fonts/SFElectrotome.ttf",action:"updateCardList",sound:["click_flat"],type:5,info:{id:1}},{name:"lastPageButton",anchor_x:0.5,anchor_y:0,pos_x:640,pos_y:590,size_x:120,size_y:60,text:"",font_size:30,color:[236,243,255],rotation:90,fontType:"Content/Fonts/SFElectrotome.ttf",action:"updateCardList",sound:["click_flat"],type:8,info:{id:99}}],progressBar:[],lists:[],groupDefinitions:{cardArea:{}},groups:[{name:"cardArea",groupDefinition:"cardArea",pos_x:70,pos_y:145,info:{num_rows:3,num_cols:3,card_w:150,card_h:210}}]}}};__ngs._ea={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.InventoryViewDefinition={groupDefinitions:{backgroundImage:{images:[{name:"backgroundImage1",pos_x:320,pos_y:480,size_x:384,size_y:512,anchor_x:1,anchor_y:1,asset:"Content/Images8x/UI/BG/bg_store1.png",depth:-10},{name:"backgroundImage2",pos_x:320,pos_y:480,size_x:384,size_y:512,anchor_x:0,anchor_y:1,flip_x:true,asset:"Content/Images8x/UI/BG/bg_store1.png",depth:-10},{name:"backgroundImage3",pos_x:320,pos_y:480,size_x:384,size_y:512,anchor_x:1,anchor_y:0,flip_y:true,asset:"Content/Images8x/UI/BG/bg_store1.png",depth:-10},{name:"backgroundImage4",pos_x:320,pos_y:480,size_x:384,size_y:512,anchor_x:0,anchor_y:0,flip_x:true,flip_y:true,asset:"Content/Images8x/UI/BG/bg_store1.png",depth:-10}]},navButtons:{buttons:[{name:"prevPageButton",anchor_x:1,anchor_y:0.5,pos_x:320,pos_y:0,size_x:160,size_y:64,text:"ui_items_uc",font_size:32,fontType:"Content/Fonts/SFElectrotome.ttf",action:"onPrevPage",sound:["click_flat"],depth:10,asset:"./Content/Images8x/UI/button/btn_switch_b.png",multiAsset:{onAsset:"./Content/Images8x/UI/button/btn_switch_a.png",offAsset:"./Content/Images8x/UI/button/btn_switch_b.png"}},{name:"nextPageButton",anchor_x:0,anchor_y:0.5,pos_x:320,pos_y:0,size_x:160,size_y:64,text:"ui_medals_uc",font_size:32,fontType:"Content/Fonts/SFElectrotome.ttf",action:"onNextPage",sound:["click_flat"],depth:10,asset:"./Content/Images8x/UI/button/btn_switch_a.png",flip_x:true,multiAsset:{onAsset:"./Content/Images8x/UI/button/btn_switch_a.png",offAsset:"./Content/Images8x/UI/button/btn_switch_b.png"}}]},items:{},usePanel:{images:[{name:"overLay",pos_x:0,pos_y:30,anchor_x:0,anchor_y:0,size_x:540,size_y:150,alpha:0.6,asset:"Content/Images8x/UI/Overlay/block_black.png",depth:5}],labels:[{name:"benefitLabel",pos_x:40,pos_y:70,anchor_x:0,anchor_y:0.5,size_x:460,size_y:60,text:"",font_size:32,horizontalAlign:"left",fontType:"Content/Fonts/SFElectrotome.ttf",overflowMode:"shrink",color:[255,255,255],depth:6},{name:"descriptionLabel",pos_x:40,pos_y:120,anchor_x:0,anchor_y:0.5,size_x:400,size_y:80,text:"",font_size:20,horizontalAlign:"left",color:[215,215,215],depth:6}],tfbuttons:[{name:"useButton",pos_x:390,pos_y:73,size_x:120,size_y:70,anchor:[0.5,0.5],action:"onUseItemSelected",sound:["click_flat"],text:"ui_use_uc",fontType:"Content/Fonts/SFElectrotome.ttf",font_size:38,depth:6,type:5}]},titlePanel:{images:[{name:"inventoryIcon",pos_x:185,pos_y:100,anchor_x:0.5,anchor_y:0.5,size_x:60,size_y:60,asset:"Content/Images8x/UI/icon/icon_0_inventory.png",depth:1}],labels:[{name:"staticInventoryLabel",pos_x:410,pos_y:100,anchor_x:0.5,anchor_y:0.5,size_x:320,size_y:80,text:"ui_myinv_uc",font_size:40,horizontalAlign:"left",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],depth:1}],buttons:[]}},groups:[{name:"backgroundImage",groupDefinition:"backgroundImage",pos_x:0,pos_y:0,size_x:768,size_y:1024},{name:"titlePanel",groupDefinition:"titlePanel",pos_x:0,pos_y:100},{name:"items",groupDefinition:"items",pos_x:0,pos_y:270,info:{layout:[[{type:30,id:101},{type:30,id:102},{type:30,id:201}],[{type:30,id:202},{type:30,id:301}],"newpage",[{type:50,id:"medal_1"},{type:50,id:"medal_2"},{type:50,id:"medal_3"},{type:50,id:"medal_5"}],[{type:50,id:"defaultEventSilverTFMedal"},{type:50,id:"defaultEventGoldTFMedal"}]]}},{name:"navButtons",groupDefinition:"navButtons",pos_x:0,pos_y:580,visible:false},{name:"usePanel",groupDefinition:"usePanel",pos_x:50,pos_y:620,visible:false,depth:5}]}}};__ngs._eb={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.InventoryCellViewDefinition={buttons:[{name:"button",pos_x:50,pos_y:60,size_x:125,size_y:125,anchor_x:0.5,anchor_y:0.5,text:"",font_size:20,action:"onItemSelected",sound:["click_flat"],setSelectOnTouch:true,asset:"Content/Images8x/UI/16_inventory/item_slot.png",multiAsset:{onAsset:"Content/Images8x/UI/16_inventory/item_slot.png",selectedAsset:"Content/Images8x/UI/16_inventory/item_slot_selected.png"}}],images:[{name:"image",pos_x:50,pos_y:60,size_x:100,size_y:100,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/misc/1pxclear.png",depth:4}],labels:[{name:"count",pos_x:100,pos_y:110,anchor_x:1,anchor_y:1,size_x:100,size_y:40,text:"",font_size:30,horizontalAlign:"right",verticalAlign:"bottom",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],dropShadowVisible:true,overflowMode:"shrink",depth:5}]}}};__ngs._ec={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.FusionViewDefinition={groupDefinitions:{mainPanel:{},fusePanel:{}},groups:[{name:"mainPanel",groupDefinition:"mainPanel",info:{card_w:140,card_h:190}},{name:"fusePanel",groupDefinition:"fusePanel",info:{card_w:75,card_h:105}}],images:[{name:"backgroundImage",anchor_x:0,anchor_y:0.5,pos_x:-160,pos_y:480,size_x:960,size_y:960,asset:"Content/Images8x/UI/BG/bg_fusion_tileable_background.jpg",depth:-10},{name:"fusionoverlay",pos_x:30,pos_y:200,size_x:580,size_y:580,anchor:[0.5,0.5],asset:"Content/Images8x/UI/Overlay/fusion_interface_overlay.png",depth:-10},{name:"fusionoverlay1",pos_x:220,pos_y:390,size_x:215,size_y:280,anchor:[0.5,0.5],asset:"Content/Images8x/UI/Overlay/fusion_centercard_panel_overlay.png",visible:false,depth:-10},{name:"mainCardIcon",pos_x:325,pos_y:524,size_x:50,size_y:50,anchor_x:0.5,anchor_y:0.5,visible:false,asset:"Content/Images8x/UI/icon/icon_plus.png",depth:1},{name:"fuseCardIcon1",pos_x:252,pos_y:288,size_x:50,size_y:50,anchor_x:0.5,anchor_y:0.5,visible:false,asset:"Content/Images8x/UI/icon/icon_plus.png",depth:1},{name:"fuseCardIcon2",pos_x:387,pos_y:288,size_x:50,size_y:50,anchor_x:0.5,anchor_y:0.5,visible:false,asset:"Content/Images8x/UI/icon/icon_plus.png",depth:1},{name:"fuseCardIcon3",pos_x:102,pos_y:367,size_x:50,size_y:50,anchor_x:0.5,anchor_y:0.5,visible:false,asset:"Content/Images8x/UI/icon/icon_plus.png",depth:1},{name:"fuseCardIcon4",pos_x:537,pos_y:368,size_x:50,size_y:50,anchor_x:0.5,anchor_y:0.5,visible:false,asset:"Content/Images8x/UI/icon/icon_plus.png",depth:1},{name:"fuseCardIcon5",pos_x:102,pos_y:528,size_x:50,size_y:50,anchor_x:0.5,anchor_y:0.5,visible:false,asset:"Content/Images8x/UI/icon/icon_plus.png",depth:1},{name:"fuseCardIcon6",pos_x:537,pos_y:528,size_x:50,size_y:50,anchor_x:0.5,anchor_y:0.5,visible:false,asset:"Content/Images8x/UI/icon/icon_plus.png",depth:1},{name:"fuseCardIcon7",pos_x:102,pos_y:693,size_x:50,size_y:50,anchor_x:0.5,anchor_y:0.5,visible:false,asset:"Content/Images8x/UI/icon/icon_plus.png",depth:1},{name:"fuseCardIcon8",pos_x:537,pos_y:693,size_x:50,size_y:50,anchor_x:0.5,anchor_y:0.5,visible:false,asset:"Content/Images8x/UI/icon/icon_plus.png",depth:1}],buttons:[{name:"fusetype1",pos_x:320,pos_y:660,anchor_x:0.5,anchor_y:0,size_x:250,size_y:137,asset:"Content/Images8x/UI/button/toggle_wp.png",enabled:false,action:"fuseType",sound:["click_flat"],info:{type:1}},{name:"fusetype2",pos_x:320,pos_y:660,anchor_x:0.5,anchor_y:0,size_x:250,size_y:137,asset:"Content/Images8x/UI/button/toggle_tf.png",action:"fuseType",sound:["click_flat"],info:{type:2}},{name:"mainCard",pos_x:325,pos_y:524,anchor_x:0.5,anchor_y:0.5,size_x:140,size_y:190,text:"",fontType:"Content/Fonts/SFElectrotome.ttf",data:"mainCard",action:"gotoMainSelectView",sound:["click_high"],info:{}},{name:"fuseCard1",pos_x:252,pos_y:287,size_x:75,size_y:105,anchor_x:0.5,anchor_y:0.5,action:"gotoSelectView",sound:["click_flat"],enabled:false,info:{}},{name:"fuseCard2",pos_x:387,pos_y:287,size_x:75,size_y:105,anchor_x:0.5,anchor_y:0.5,action:"gotoSelectView",sound:["click_flat"],enabled:false,info:{}},{name:"fuseCard3",pos_x:102,pos_y:367,size_x:75,size_y:105,anchor_x:0.5,anchor_y:0.5,action:"gotoSelectView",sound:["click_flat"],enabled:false,info:{}},{name:"fuseCard5",pos_x:102,pos_y:527,size_x:75,size_y:105,anchor_x:0.5,anchor_y:0.5,action:"gotoSelectView",sound:["click_flat"],enabled:false,info:{}},{name:"fuseCard4",pos_x:537,pos_y:367,size_x:75,size_y:105,anchor_x:0.5,anchor_y:0.5,action:"gotoSelectView",sound:["click_flat"],enabled:false,info:{}},{name:"fuseCard6",pos_x:537,pos_y:527,size_x:75,size_y:105,anchor_x:0.5,anchor_y:0.5,action:"gotoSelectView",sound:["click_flat"],enabled:false,info:{}},{name:"fuseCard7",pos_x:102,pos_y:692,size_x:75,size_y:105,anchor_x:0.5,anchor_y:0.5,action:"gotoSelectView",sound:["click_flat"],enabled:false,info:{}},{name:"fuseCard8",pos_x:537,pos_y:692,size_x:75,size_y:105,anchor_x:0.5,anchor_y:0.5,action:"gotoSelectView",sound:["click_flat"],enabled:false,info:{}}],tfbuttons:[{name:"refreshButton",pos_x:20,pos_y:150,size_x:160,size_y:90,type:8,flip_x:true,fontType:"Content/Fonts/SFElectrotome.ttf",font_size:36,asset:"Content/Images8x/UI/button/button_tab_on.png",text:"ui_reset_uc",action:"refreshButton",sound:["click_flat"]},{name:"fuseButton",pos_x:250,pos_y:716,size_x:154,size_y:60,asset:"Content/Images8x/button.png",text:"ui_start_uc",font_size:32,fontType:"Content/Fonts/SFElectrotome.ttf",action:"fuseButton",sound:["click_high"],visible:false}],groupDefinitions:{cost:{images:[{name:"creditsImage",pos_x:390,pos_y:670,size_x:40,size_y:40,asset:"Content/Images8x/UI/icon/icon_currency.png"}],labels:[{name:"currencyLabel",pos_x:330,pos_y:690,size_x:160,size_y:64,text:"",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",color:[251,251,251]},{name:"costLabel",pos_x:240,pos_y:690,size_x:160,size_y:64,text:"ui_cost",font_size:24,fontType:"Content/Fonts/SFElectrotome.ttf",color:[251,251,251]}]}},groups:[{name:"cost",groupDefinition:"cost",pos_x:0,pos_y:0,visible:false}]}}};__ngs._ed={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var b=__ngs.r_(__ngs._d2).DialogView;var a=__ngs.r_(__ngs._fv).FusionRewardDefinition;c.FusionRewardView=b.subclass({classname:"FusionRewardView",initialize:function($super,e,g){$super(e,a)},destroy:function(){}})}};__ngs._ee={_c:null,_d:function(){var a={exports:{}};var d=a.exports;this._c=a;var e=__ngs.r_(__ngs._7l).DialogController;var h=__ngs.r_(__ngs._ad).FullScreenCardView;var k=__ngs.r_(__ngs._fw).FusionRewardCardDefinition;var b=__ngs.r_(__ngs._45).AnimationQueue;var m=__ngs.r_(__ngs._61).TFEventManager;var g=__ngs.r_(__ngs._48).TFSoundManager;var l=__ngs.r_(__ngs._r).TFCardsManager;var c=__ngs.r_(__ngs._4b).UILoader;d.FusionRewardCardController=e.subclass({classname:"FusionRewardCardController",initialize:function($super,F,B){this._otherData={};if(F){this._otherData=F}this.callbacksToCollect=0;$super(h,false);c.loadView(k,this.getView());if(B){this.getView().showShade()}var G;var t=TFUserData._lastFusionResult;var y=t.incr_level;if(this._otherData.usercard){TFUserData._selectedFullScreenCard=this._otherData.usercard;var w=this.createAnimationQueue();var p=this.createAnimationQueue();var C=0.7;var o=0;var n=300;this.getView().setAlpha(o);this.getView().setScale(C);w.pushAnimation(n,b.Curve.EaseOut);w.tween(b.Interpolate.scalar(C,1),function(H){if(this&&this.getView()){this.getView().setScale(H)}}.bind(this));w.pushCallback(function(){if(this.getView()&&this.getView().clipCards){this.getView().clipCards()}}.bind(this));p.pushAnimation(n,b.Curve.EaseIn);p.tween(b.Interpolate.scalar(o,1),function(H){if(this&&this.getView()){this.getView().setAlpha(H)}}.bind(this));setTimeout(w.start.bind(w),10);setTimeout(p.start.bind(p),10);G=l.getCardDefinition(this._otherData.usercard.definitionId);var E=function(I){if(!this.getView()){return}if(!this.getView().name){return}if(this.getView()._prefixWidth==undefined||this.getView()._nameWidth==undefined){return}var H;if(this.getView()._prefixWidth===0){H=this.getView()._nameWidth}else{H=(this.getView()._prefixWidth+this.getView()._nameWidth)/2}if(I){this.getView().name.setPosition(-H/2,this.getView().name.getPosition().getY())}else{this.getView().name.setPosition(-H/2,this.getView().name.getPosition().getY())}this.getView().name.setVisible(true)}.bind(this,G.transformable);this.getView().name.transformersName.setText(Localization.getString(G.name).toUpperCase());this.getView().name.setVisible(false);if(G.prefix&&(G.prefix.length>0)){this.getView().prefix.transformersPrefixName.setText(Localization.getString(G.prefix).toUpperCase());this.getView().prefix.transformersPrefixName.setVisible(true);this.getView().prefix.eliteBannerImage.setVisible(true)}this.getView()._prefixWidth=0;this.getView().name.transformersName.measureArea(function(H){this._nameWidth=H.totalWidth;E()}.bind(this.getView()));var r;var q=null;if(G.transformable){r=G.evolution[0][0];this.getView().setTransformable(true,G.rarity);this.getView().transformButton.info.transformCardId=G.evolution[0][1];q=G.evolution[0][1]}else{r=G.id;this.getView().setTransformable(false,G.rarity)}this.getView().transformButton.info.currentCardId=r;this.getView().transformButton.info.rarity=G.rarity;if(G.factionId==TFGameData.FACTION.DECEPTICONS){TFUtils.changeImageOnSprite(this.getView().logo,this.getView()._definitions.logo.info.asset2);TFUtils.changeImageOnSprite(this.getView().nontransformFrame.footer,"Content/Images8x/UI/card_frames/footer_decepticon.png");TFUtils.changeImageOnSprite(this.getView().transformFrame.footer,"Content/Images8x/UI/card_frames/footer_decepticon.png")}else{TFUtils.changeImageOnSprite(this.getView().logo,this.getView()._definitions.logo.info.asset1);TFUtils.changeImageOnSprite(this.getView().nontransformFrame.footer,"Content/Images8x/UI/card_frames/footer_autobot.png");TFUtils.changeImageOnSprite(this.getView().transformFrame.footer,"Content/Images8x/UI/card_frames/footer_autobot.png")}this.getView().createParallaxer(G.rarity,r,q,this._otherData.forceParallax);if(G.transformable){this.getView().createAltFormParallaxer(G.rarity,r,q,this._otherData.forceParallax)}var s=m.cardBonusInRunningEvent(G.id);if(s){this.getView().eventBonus.setVisible(true);this.getView().eventBonus.bonusAmount.setText(Math.floor(s.attackBonus/100)+"x")}}var x=l.getCardStatus(this._otherData.usercard);var A=t.oldStats;this.getView().stat1.setText(A.status1);this.getView().stat2.setText(A.status2);this.getView().stat3.setText(A.status3);this._otherData.type=G.type;this.getView().flipCardButton.info=this._otherData;var z=l.getCardLevel(this._otherData.usercard);var v=l._getXPForLevel(z,TFGameData.CARD_TYPE.TRANSFORMER);var D=l.getXpPercentage(this._otherData.usercard)*100;console.log("FusionRewardCardController > XP CALCULATION > obj.lastXp : "+JSON.stringify(t.lastXp)+" | obj.newXp : "+JSON.stringify(t.newXp)+" | levelXP : "+JSON.stringify(v));var u=((t.lastXp-v)*100)/(((t.newXp-v)*100)/D);this.getView().transformerMaxLevel.setText(Localization.getString("ui_maxlevel")+" "+G.maxLevel);this.getView().levelBar.setProgress(D);if((y>0)||(z>=G.maxLevel)){this.getView().stat1.setScale(0.8,0.8);this.getView().stat2.setScale(0.8,0.8);this.getView().stat3.setScale(0.8,0.8);this.getView().stat2.setPosition(-195,386);this.getView().stat1.setPosition(0,386);this.getView().stat3.setPosition(195,386);this.getView().RANGE.setPosition(0,280);this.getView().MELEE.setPosition(-170,280);this.getView().SPECIAL.setPosition(215,280);this.getView().newStat1.setText(x.status1);this.getView().newStat2.setText(x.status2);this.getView().newStat3.setText(x.status3);this.getView().newStat1.setVisible(true);this.getView().newStat2.setVisible(true);this.getView().newStat3.setVisible(true);this.getView().xpIncr.setText("XP "+(Math.floor(D))+" %");this.getView().oldLevel.setText(Localization.getString("ui_level_uc")+" "+(z-y));this.getView().newLevel.setText(z);if(z>=G.maxLevel){this.getView().xpIncr.setText(Localization.getString("ui_maxlevel_uc")+"! "+z);this.getView().xpIncr.setScale(2,2);this.getView().xpIncr.setPosition(0,200);this.getView().levelBar.setVisible(false);this.getView().transformerMaxLevel.setVisible(false);this.getView().oldLevel.setVisible(false);this.getView().newLevel.setVisible(false);this.getView().levelArrow.setVisible(false);this.getView().attackArrow.setVisible(false);this.getView().healthArrow.setVisible(false);this.getView().defenseArrow.setVisible(false)}}else{this.getView().oldLevel.setText(Localization.getString("ui_level")+" "+z);this.getView().xpIncr.setText("XP "+(Math.floor(u))+"%  ->  "+(Math.floor(D))+"%");this.getView().levelArrow.setVisible(false);this.getView().attackArrow.setVisible(false);this.getView().healthArrow.setVisible(false);this.getView().defenseArrow.setVisible(false)}this.getView().flipCardButton.info=this._otherData;this.getView().flipCardButton.info.from="fromFusion";this.startParticles();this._sparksSound=g.playSound("Upgrade_Spark");if(this._sparksSound){this._sparksSound.setLoops(true)}},startParticles:function(){var o=__ngs.r_(__ngs._62).TFParticleManager;o.instantiate();this.emitter=o.createEmitter("sparkle");this.emitter.setPosition(0,0);this.emitter.setDepth(30);this.emitter.setScale(2.2,1.5);this.emitter2=o.createEmitter("sparkle");this.emitter2.setPosition(0,0);this.emitter2.setDepth(30);this.emitter2.setScale(2.2,1.5);if(this.getView()){this.getView().addChild(this.emitter);this.getView().addChild(this.emitter2)}else{if(this.emitter){this.emitter.destoy();this.emitter2.destroy()}}this.particleQueue=this.createAnimationQueue();this.particleQueue.pushCallback(function(){this.emitter.play();this.emitter2.play()}.bind(this));this.particleQueue.pushAnimation(1500,b.Curve.Linear);var p=new Core.Point(-this.getView()._definitions.card.size_x*0.9,this.getView()._definitions.card.size_y/2-50);var n=new Core.Point(-this.getView()._definitions.card.size_x*0.9,0);this.particleQueue.tween(b.Interpolate.point(p,n),function(q){this.emitter.setPosition(this.getView()._definitions.card.pos_x,q.getY()-25);this.emitter2.setPosition(this.getView()._definitions.card.pos_x,q.getY()+50)}.bind(this));this.particleQueue.pushCallback(function(){this.emitter.play();this.emitter2.play()}.bind(this));this.particleQueue.pushAnimation(1000,b.Curve.Linear);p=n;n=new Core.Point(-this.getView()._definitions.card.size_x*0.9,-this.getView()._definitions.card.size_y/2);this.particleQueue.tween(b.Interpolate.point(p,n),function(q){this.emitter.setPosition(this.getView()._definitions.card.pos_x,q.getY()-25);this.emitter2.setPosition(this.getView()._definitions.card.pos_x,q.getY()+50)}.bind(this));this.particleQueue.pushCallback(function(){this.emitter.stop();this.emitter2.stop()}.bind(this));this.particleQueue.pushAnimation(1000);this.particleQueue.startLooped()},onFlipCard:function(q){if(this._blocked===true){return}this._blocked=true;if(this.getView().parallaxer){this.getView().parallaxer.destroy();this.getView().parallaxer=null}if(this._sparksSound){this._sparksSound.setLoops(false);g.setMusicEnabled(true);g.playMusic()}var r=100;var n=this.createAnimationQueue();var p=this;n.pushAnimation(r,b.Curve.Linear);var s=new Core.Point(0,0);var o=new Core.Point(0,-(TFSceneDirector.getWorkingArea().screenHeight+this.getView()._definitions.flipCardButton.size_y));n.tween(b.Interpolate.point(s,o),function(t){if(!this.getView()){return}this.getView().setPosition(t.getX(),t.getY())}.bind(this));n.pushAnimation(100,b.Curve.Linear);n.pushCallback(function(){this._destroyCB=undefined;if(q.info){var t=q.info;if(!t.type){t.type=l.getCardType(q.info.usercard.definitionId)}if(t.type==TFGameData.CARD_TYPE.TRANSFORMER){var u=__ngs.r_(__ngs._de).BackCardController;TFSceneDirector._showDialog(new u(t,true))}}}.bind(this));n.pushCallback(function(){p._blocked=false});n.start();if(this.particleQueue){this.particleQueue.destroy();this.particleQueue=undefined}},onTransform:function(p){if(this._blocked){return}this._blocked=true;var o;o=p.info.transformCardId;p.info.transformCardId=p.info.currentCardId;p.info.currentCardId=o;var n=function(){this._blocked=false};if(this.emitter){this.getView().animateTransform(p.info.rarity,o,n.bind(this),this.emitter,this.emitter2)}else{this.getView().animateTransform(p.info.rarity,o,n.bind(this))}},dismissDialog:function($super){if(this._sparksSound){console.log("FusionWeaponRewardController > onDismiss > stopping loopedSound");this._sparksSound.setLoops(false);g.setMusicEnabled(true);g.playMusic()}if(this.particleQueue){this.particleQueue.destroy();this.particleQueue=undefined}this.emitter.destroy();this.emitter2.destroy();$super()},onDismiss:function(){if(this._otherData&&this._otherData.cb){console.log("FusionRewardCardController > onDismiss > this._otherData.cb"+JSON.stringify(this._otherData.cb));this._otherData.cb()}this.dismissDialog()}})}};__ngs._ef={_c:null,_d:function(){var a={exports:{}};var e=a.exports;this._c=a;var g=__ngs.r_(__ngs._7l).DialogController;var k=__ngs.r_(__ngs._do).FullScreenWeaponCardView;var b=__ngs.r_(__ngs._fx).FusionRewardWeaponCardDefinition;var c=__ngs.r_(__ngs._45).AnimationQueue;var m=__ngs.r_(__ngs._61).TFEventManager;var h=__ngs.r_(__ngs._48).TFSoundManager;var l=__ngs.r_(__ngs._r).TFCardsManager;var d=__ngs.r_(__ngs._4b).UILoader;e.FusionRewardWeaponCardController=g.subclass({classname:"FusionRewardWeaponCardController",initialize:function($super,I,F){this._otherData={};if(I){this._otherData=I}this.callbacksToCollect=0;$super(k,false);d.loadView(b,this.getView());if(F){this.getView().showShade()}var J;var v=TFUserData._lastFusionResult;if(v&&v.success===true){var u=v.newXp;var C=v.incr_level}if(this._otherData.usercard){TFUserData._selectedFullScreenCard=this._otherData.usercard;var z=this.createAnimationQueue();var q=this.createAnimationQueue();var G=0.7;var p=0.6;var n=340;this.getView().setAlpha(p);this.getView().setScale(G);z.pushAnimation(n,c.Curve.EaseOut);z.tween(c.Interpolate.scalar(G,1),function(K){if(this&&this.getView()){this.getView().setScale(K)}}.bind(this));q.pushAnimation(n,c.Curve.Linear);q.tween(c.Interpolate.scalar(p,1),function(K){if(this&&this.getView()){this.getView().setAlpha(K)}}.bind(this));setTimeout(z.start.bind(z),10);setTimeout(q.start.bind(q),10);if(this._otherData.CardDefinition){J=l.getCardDefinition(this._otherData.CardDefinition)}else{J=l.getCardDefinition(this._otherData.usercard.definitionId)}if(this._otherData.usercard){var o=l.getCardLevel(this._otherData.usercard);this.getView().level.setText(o)}else{this.getView().expBar.setVisible(false);this.getView().level.setVisible(false);this.getView().LevelLabel.setVisible(false)}this.getView().name.setVisible(true);this.getView().name.transformersName.setOverflowMode(GL2.Text.OverflowMode.ReduceFontSize);this.getView().name.transformersName.setText(Localization.getString(J.name).toUpperCase());if(J.prefix&&(J.prefix.length>0)){this.getView().prefixLabel.setText(Localization.getString(J.prefix).toUpperCase());this.getView().prefixLabel.setVisible(true);this.getView().eliteBannerImage.setVisible(true)}if(J.factionId==TFGameData.FACTION.DECEPTICONS){TFUtils.changeImageOnSprite(this.getView().logo,this.getView()._definitions.logo.info.asset2);TFUtils.changeImageOnSprite(this.getView().waponPanelRight,this.getView()._definitions.waponPanelRight.info.asset2);TFUtils.changeImageOnSprite(this.getView().waponPanelLeft,this.getView()._definitions.waponPanelLeft.info.asset2)}else{TFUtils.changeImageOnSprite(this.getView().logo,this.getView()._definitions.logo.info.asset1);TFUtils.changeImageOnSprite(this.getView().waponPanelRight,this.getView()._definitions.waponPanelRight.info.asset1);TFUtils.changeImageOnSprite(this.getView().waponPanelLeft,this.getView()._definitions.waponPanelLeft.info.asset1)}if(J.speciality==TFGlobals.stats.status1){TFUtils.changeImageOnSprite(this.getView().specializationIcon,this.getView()._definitions.specializationIcon.info.asset1);this.getView().SPECIALIZATIONNAME.setText(Localization.getString(TFGlobals.stats.status1))}else{if(J.speciality==TFGlobals.stats.status2){TFUtils.changeImageOnSprite(this.getView().specializationIcon,this.getView()._definitions.specializationIcon.info.asset2);this.getView().SPECIALIZATIONNAME.setText(Localization.getString(TFGlobals.stats.status2))}else{if(J.speciality==TFGlobals.stats.status3){TFUtils.changeImageOnSprite(this.getView().specializationIcon,this.getView()._definitions.specializationIcon.info.asset3);this.getView().SPECIALIZATIONNAME.setText(Localization.getString(TFGlobals.stats.status3))}}}var s=J.id;this.prepareSpinner();this.callbacksToCollect+=1;TFUtils.setRemoteImageOnSprite(this.getView().card,TFUtils.getCardFullImagePath(s),this.collectCallbacks.bind(this));if(J.rarity==TFGameData.RARITY.UNCOMMON){TFUtils.changeImageOnSprite(this.getView().rarity,this.getView()._definitions.rarity.info.asset2)}else{if(J.rarity==TFGameData.RARITY.RARE){TFUtils.changeImageOnSprite(this.getView().rarity,this.getView()._definitions.rarity.info.asset3)}else{if(J.rarity==TFGameData.RARITY.SUPERRARE){TFUtils.changeImageOnSprite(this.getView().rarity,this.getView()._definitions.rarity.info.asset4)}else{TFUtils.changeImageOnSprite(this.getView().rarity,this.getView()._definitions.rarity.info.asset1)}}}var r=l.getBonusFromUnit(undefined,J.id);this.getView().skillNameA.setText(Localization.getString("ui_noability"));this.getView().skillNameB.setText(Localization.getString("ui_noability"));for(var A in r.abilities){if(r.abilities[A].type=="initial"){this.getView().skillNameA.setText(Localization.getString(r.abilities[A].name));this.getView().skillDescriptionA.setText(Localization.getString(r.abilities[A].desc))}else{if(r.abilities[A].type=="battle"){this.getView().skillNameB.setText(Localization.getString(r.abilities[A].name));this.getView().skillDescriptionB.setText(Localization.getString(r.abilities[A].desc))}}}var t="";var x="";if(J.affinity[0]==1){t=this.getView()._definitions.classAIcon.info.asset1}else{if(J.affinity[0]==2){t=this.getView()._definitions.classAIcon.info.asset2}else{if(J.affinity[0]==3){t=this.getView()._definitions.classAIcon.info.asset3}else{if(J.affinity[0]==4){t=this.getView()._definitions.classAIcon.info.asset4}}}}x=Localization.getString(TFGameData._configJSON.classIds[J.affinity[0]+""].name);TFUtils.changeImageOnSprite(this.getView().classAIcon,t);this.getView().CLASSANAME.setText(Localization.getString(x));if(J.affinity[1]==1){t=this.getView()._definitions.classBIcon.info.asset1}else{if(J.affinity[1]==2){t=this.getView()._definitions.classBIcon.info.asset2}else{if(J.affinity[1]==3){t=this.getView()._definitions.classBIcon.info.asset3}else{if(J.affinity[1]==4){t=this.getView()._definitions.classBIcon.info.asset4}}}}x=Localization.getString(TFGameData._configJSON.classIds[J.affinity[1]+""].name);TFUtils.changeImageOnSprite(this.getView().classBIcon,t);this.getView().CLASSBNAME.setText(Localization.getString(x));var B=l.getCardStatus(this._otherData.usercard);var E=v.oldStats;this.getView().stat1.setText(Math.floor((E.status1)*100)+"%");this.getView().stat2.setText(Math.floor((E.status2)*100)+"%");this.getView().stat3.setText(Math.floor((E.status3)*100)+"%");var D=l.getCardLevel(this._otherData.usercard);var y=l._getXPForLevel(D,TFGameData.CARD_TYPE.WEAPON);var H=l.getXpPercentage(this._otherData.usercard)*100;console.log("FusionRewardWeaponCardController > XP CALCULATION > obj.lastXp : "+JSON.stringify(v.lastXp)+" | obj.newXp : "+JSON.stringify(v.newXp)+" | levelXP : "+JSON.stringify(y));var w=((v.lastXp-y)*100)/(((v.newXp-y)*100)/H);this.getView().transformerMaxLevel.setText(Localization.getString("ui_maxlevel")+" "+J.maxLevel);this.getView().levelBar.setProgress(H);this.getView().expBar.setProgress(H);if((C>0)||(D>=J.maxLevel)){this.getView().stat1.setScale(0.8,0.8);this.getView().stat2.setScale(0.8,0.8);this.getView().stat3.setScale(0.8,0.8);this.getView().stat2.setPosition(-195,this.getView()._definitions.levelBar.pos_y+130);this.getView().stat1.setPosition(0,this.getView()._definitions.levelBar.pos_y+110);this.getView().stat3.setPosition(195,this.getView()._definitions.levelBar.pos_y+130);this.getView().RANGE.setPosition(0,this.getView()._definitions.levelBar.pos_y+40);this.getView().MELEE.setPosition(-195,this.getView()._definitions.levelBar.pos_y+60);this.getView().SPECIAL.setPosition(195,this.getView()._definitions.levelBar.pos_y+60);this.getView().newStat1.setText(Math.floor(B.status1*100)+"%");this.getView().newStat2.setText(Math.floor(B.status2*100)+"%");this.getView().newStat3.setText(Math.floor(B.status3*100)+"%");this.getView().newStat1.setVisible(true);this.getView().newStat2.setVisible(true);this.getView().newStat3.setVisible(true);this.getView().xpIncr.setPosition(0,this.getView()._definitions.levelBar.pos_y);this.getView().xpIncr.setText("XP "+(Math.floor(H))+" %");this.getView().oldLevel.setText(Localization.getString("ui_level_uc")+" "+(D-C));this.getView().newLevel.setText(D);if(D>=J.maxLevel){this.getView().level_up_overlay.setVisible(false);this.getView().level_up_overlay_2.setVisible(false);this.getView().xpIncr.setVisible(true);this.getView().xpIncr.setText(Localization.getString("ui_maxlevelexcl_uc")+" "+J.maxLevel);this.getView().xpIncr.setScale(2,2);this.getView().xpIncr.setPosition(0,0);this.getView().levelBar.setVisible(false);this.getView().transformerMaxLevel.setVisible(false);this.getView().oldLevel.setVisible(false);this.getView().newLevel.setVisible(false);this.getView().levelArrow.setVisible(false)}}else{this.getView().levelBar.setPosition(0,15);this.getView().oldLevel.setText(Localization.getString("ui_level")+" "+D);this.getView().xpIncr.setText("XP "+(Math.floor(w))+"%  ->  "+(Math.floor(H))+"%");this.getView().xpIncr.setPosition(0,this.getView()._definitions.levelBar.pos_y+10);this.getView().levelArrow.setVisible(false)}}this._sparksSound=h.playSound("Upgrade_Spark");if(this._sparksSound){this._sparksSound.setLoops(true)}this.startParticles()},startParticles:function(){var o=__ngs.r_(__ngs._62).TFParticleManager;o.instantiate();this.emitter=o.createEmitter("sparkle");this.emitter.setPosition(0,0);this.emitter.setDepth(30);this.emitter.setScale(2.2,1.5);this.emitter2=o.createEmitter("sparkle");this.emitter2.setPosition(0,0);this.emitter2.setDepth(30);this.emitter2.setScale(2.2,1.5);if(this.getView()){this.getView().addChild(this.emitter);this.getView().addChild(this.emitter2)}else{if(this.emitter){this.emitter.destoy();this.emitter2.destroy()}}this.particleQueue=this.createAnimationQueue();this.particleQueue.pushCallback(function(){this.emitter.play();this.emitter2.play()}.bind(this));this.particleQueue.pushAnimation(1500,c.Curve.Linear);var p=new Core.Point(-this.getView()._definitions.card.size_x*0.9,this.getView()._definitions.card.size_y/2-50);var n=new Core.Point(-this.getView()._definitions.card.size_x*0.9,0);this.particleQueue.tween(c.Interpolate.point(p,n),function(q){this.emitter.setPosition(this.getView()._definitions.card.pos_x,q.getY()-25);this.emitter2.setPosition(this.getView()._definitions.card.pos_x,q.getY()+50)}.bind(this));this.particleQueue.pushCallback(function(){this.emitter.play();this.emitter2.play()}.bind(this));this.particleQueue.pushAnimation(1000,c.Curve.Linear);p=n;n=new Core.Point(-this.getView()._definitions.card.size_x*0.9,-this.getView()._definitions.card.size_y/2);this.particleQueue.tween(c.Interpolate.point(p,n),function(q){this.emitter.setPosition(this.getView()._definitions.card.pos_x,q.getY()-25);this.emitter2.setPosition(this.getView()._definitions.card.pos_x,q.getY()+50)}.bind(this));this.particleQueue.pushCallback(function(){this.emitter.stop();this.emitter2.stop()}.bind(this));this.particleQueue.pushAnimation(1000);this.particleQueue.startLooped()},prepareSpinner:function(){if(this.spinnerRemoved==false||!this.getView()){return}this.spinnerRemoved=false;var n=[100*1.5,141.5*1.5];var p=616.25;var o=616.25;this._auto=new GL2.Sprite();this._auto.setImage("Content/Images8x/UI/17_tutorial/tutorial_faction_autobot.png",n,[0.5,0.5],[0,0,1,1]);this._decep=new GL2.Sprite();this._decep.setImage("Content/Images8x/UI/17_tutorial/tutorial_faction_decepticon.png",n,[0.5,0.5],[0,0,1,1]);this._decep.setScale(0,1);this._spinnersprite=new GL2.Sprite();this._spinnersprite.setImage("Content/Images8x/misc2/1pxclear.png",[o,p],[0.5,0.5],[0,0,1,1]);this._spinnersprite.setAlpha(0);this._spinnershade=new GL2.Sprite();this._spinnershade.setImage("Content/Images8x/misc2/1pxblack.png",[o,p],[0.5,0.5],[0,0,1,1]);this._spinnershade.setDepth(2);this._spinnersprite.addChild(this._auto);this._spinnersprite.addChild(this._decep);this._spinnershade.addChild(this._spinnersprite);this.getView().card.addChild(this._spinnershade);this._spinnerStartQueue=new c(this._am);this._spinnerStartQueue.pushAnimation(50,c.Curve.EaseOut);this._spinnerStartQueue.tween(c.Interpolate.scalar(0,1),function(q){}.bind(this));this._spinnerStartQueue.pushAnimation(100,c.Curve.EaseIn);this._spinnerStartQueue.tween(c.Interpolate.scalar(0,1),function(q){if(this.spinnerRemoved==true){console.log("FusionRewardWeaponCardController > prepareSpinner > ignoring spinner, already removed");return}console.log("FusionRewardWeaponCardController > prepareSpinner > alpha : "+q);this._spinnersprite.setAlpha(q)}.bind(this));this._spinnerStartQueue.start();md=new GL2.MotionData();md.initFromJSONFile("Content/AnimationData/spinner_anim.json",GL2.MotionData.DataFormat.FlashClassicTween,function(q,r){if(q){console.log("SPINNER error :"+JSON.stringify(q))}else{if(this.spinnerRemoved==true){return}mc=new GL2.MotionController(r);syncFlags=GL2.MotionController.SyncFlags.Scale;mc.bind("decepticon",this._decep,syncFlags);mc.bind("autobot",this._auto,syncFlags);mc.syncFrames("autobot",[30,-1],GL2.MotionController.SyncFlags.Position,function(s,t){}.bind(this));this._mc=mc;mc.play(GL2.MotionController.PlayMode.Loop)}}.bind(this))},collectCallbacks:function(){this.callbacksToCollect--;if(this.callbacksToCollect<=0){this.removeSpinner()}},removeSpinner:function(){if(!this._spinnersprite){return}if(this._spinnersprite._alpha==0&&this.spinnerRemoved==false){this.destroySpinner();this.spinnerRemoved=true;return}this._spinnerAnimationQueue=new c(this._am);this._spinnerAnimationQueue.pushAnimation(1000,c.Curve.EaseOut);this._spinnerAnimationQueue.tween(c.Interpolate.scalar(1,2),function(n){this._spinnersprite.setScale(n,n);this._spinnershade.setAlpha((1-(n-1)))}.bind(this));this._spinnerAnimationQueue.pushCallback(function(){this.destroySpinner();this.spinnerRemoved=true}.bind(this));this._spinnerAnimationQueue.start()},destroySpinner:function(){if(this._auto&&this._auto.__objectRegistryId){this._auto.destroy()}if(this._decep&&this._decep.__objectRegistryId){this._decep.destroy()}if(this._spinnersprite&&this._spinnersprite.__objectRegistryId){this._spinnersprite.destroy()}if(this._spinnershade&&this._spinnershade.__objectRegistryId){console.log("FusionRewardWeaponCardController > destroySpinner > this._spinnershade.destroy()");this._spinnershade.destroy()}if(this._mc&&this._mc.__objectRegistryId){this._mc.stop();this._mc.destroy()}},dismissDialog:function($super){if(this._sparksSound){console.log("FusionRewardWeaponCardController > onDismiss > stopping loopedSound");this._sparksSound.setLoops(false);h.setMusicEnabled(true);h.playMusic()}this.particleQueue.destroy();this.emitter.destroy();this.emitter2.destroy();$super()},onDismiss:function(){if(this._otherData&&this._otherData.cb){this._otherData.cb()}this.dismissDialog()}})}};__ngs._eg={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.TransformViewDefinition={images:[{name:"backgroundImage",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:480,size_x:768,size_y:1024,depth:-11,asset:"Content/Images8x/UI/BG/bg_deck.jpg"},{name:"transformoverlay",pos_x:205,pos_y:320,size_x:220,size_y:280,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/Overlay/fusion_centercard_panel_overlay.png"},{name:"transformoverlay1",pos_x:435,pos_y:320,size_x:220,size_y:280,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/Overlay/fusion_centercard_panel_overlay.png",flip_x:true},{name:"panel",pos_x:190,pos_y:567,size_x:260,size_y:350,anchor_x:0.5,anchor_y:0.5,alpha:0.8,asset:"Content/Images8x/UI/13_transform/panel_transform.png",depth:-10},{name:"panelflip",pos_x:450,pos_y:567,size_x:260,size_y:350,anchor_x:0.5,anchor_y:0.5,alpha:0.8,asset:"Content/Images8x/UI/13_transform/panel_transform.png",depth:-10,flip_x:true},{name:"darkLayer",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:480,size_x:768,size_y:1024,alpha:0,asset:"Content/Images8x/misc/1pxblack.png",depth:50}],labels:[{name:"title",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:90,size_x:600,size_y:120,font_size:36,color:[255,255,0],text:"",visible:false},{name:"stat11",anchor_x:0.5,anchor_y:0.5,pos_x:53,pos_y:567,size_x:280,size_y:60,font_size:38,horizontalAlign:"right",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:""},{name:"stat21",anchor_x:0.5,anchor_y:0.5,pos_x:53,pos_y:622,size_x:280,size_y:60,font_size:38,horizontalAlign:"right",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:""},{name:"stat31",anchor_x:0.5,anchor_y:0.5,pos_x:53,pos_y:677,size_x:280,size_y:60,font_size:38,horizontalAlign:"right",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:""},{name:"stat12",anchor_x:0.5,anchor_y:0.5,pos_x:395,pos_y:567,size_x:280,size_y:60,font_size:38,horizontalAlign:"right",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:""},{name:"stat22",anchor_x:0.5,anchor_y:0.5,pos_x:395,pos_y:622,size_x:280,size_y:60,font_size:38,horizontalAlign:"right",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:""},{name:"stat32",anchor_x:0.5,anchor_y:0.5,pos_x:395,pos_y:677,size_x:280,size_y:60,font_size:38,horizontalAlign:"right",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:""},{name:"statMid1",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:545,size_x:150,size_y:60,font_size:38,horizontalAlign:"middle",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:""},{name:"statMid2",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:601,size_x:150,size_y:60,font_size:38,horizontalAlign:"middle",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:""},{name:"statMid3",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:657,size_x:150,size_y:60,font_size:38,horizontalAlign:"middle",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:""},{name:"staticRobotFormText",anchor_x:0.5,anchor_y:0.5,pos_x:200,pos_y:220,size_x:220,size_y:30,font_size:26,fontType:"Content/Fonts/SFElectrotome.ttf",color:[183,226,240],depth:5,text:"ui_robotmode_uc"},{name:"staticAltFormText",anchor_x:0.5,anchor_y:0.5,pos_x:440,pos_y:220,size_x:220,size_y:30,font_size:26,fontType:"Content/Fonts/SFElectrotome.ttf",color:[183,226,240],depth:5,text:"ui_altform_uc"},{name:"staticTotalText",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:492,size_x:150,size_y:60,font_size:38,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:"ui_bonus_uc"},{name:"staticMaxLevelInputTextRight",anchor_x:0.5,anchor_y:0.5,pos_x:500,pos_y:525,size_x:170,size_y:40,font_size:20,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:"ui_basicinput_uc"},{name:"staticMaxLevelInputTextLeft",anchor_x:0.5,anchor_y:0.5,pos_x:140,pos_y:525,size_x:170,size_y:40,font_size:20,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:"ui_basicinput_uc"},{name:"percentageRight",anchor_x:1,anchor_y:0.5,pos_x:522,pos_y:488,size_x:200,size_y:80,font_size:60,horizontalAlign:"right",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:""},{name:"percentageLeft",anchor_x:1,anchor_y:0.5,pos_x:152,pos_y:488,size_x:200,size_y:80,font_size:60,horizontalAlign:"right",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:""},{name:"staticPercentageLeft",anchor_x:0,anchor_y:0.5,pos_x:140,pos_y:495,size_x:60,size_y:60,font_size:35,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:"ui_percent"},{name:"staticPercentageRight",anchor_x:0,anchor_y:0.5,pos_x:510,pos_y:495,size_x:60,size_y:60,font_size:35,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:"ui_percent"}],buttons:[{name:"card1",pos_x:198,pos_y:316,size_x:150,size_y:212,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/13_transform/icon_robotform.png",alpha:0.3,depth:4,action:"baseCardClick",sound:["click_flat"]},{name:"card2",pos_x:442,pos_y:316,size_x:150,size_y:212,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/13_transform/icon_altform.png",action:"materialCardClick",sound:["click_flat"],alpha:0.3,depth:4,enabled:false},{name:"overlay",pos_x:320,pos_y:480,size_x:640,size_y:960,anchor_x:0.5,anchor_y:0.5,color:[0,0,0],depth:4,visible:false}],tfbuttons:[{name:"transformButton",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:775,size_x:444,size_y:100,fontType:"Content/Fonts/SFElectrotome.ttf",font_size:45,enabled:false,text:"ui_transscan_uc",action:"transform",sound:["click_high"],type:3,depth:4},{name:"refreshView",anchor_x:0.5,anchor_y:0.5,pos_x:100,pos_y:130,size_x:150,size_y:80,fontType:"Content/Fonts/SFElectrotome.ttf",font_size:28,enabled:false,text:"ui_clear",action:"refreshView",sound:["click_flat"],type:5}],groupDefinitions:{costBox:{images:[{name:"costBoxBG",pos_x:0,pos_y:0,size_x:260,size_y:70,anchor_x:0,anchor_y:0,asset:"Content/Images8x/UI/Overlay/block_black.png",depth:10,alpha:0,flip_x:true},{name:"creditsIcon",pos_x:240,pos_y:24,size_x:41,size_y:41,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/icon/icon_currency.png",depth:10,alpha:1,flip_x:true}],labels:[{name:"staticCostText",anchor_x:0.5,anchor_y:0.5,pos_x:80,pos_y:24,size_x:260,size_y:60,font_size:30,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],horizontalAlign:"middle",text:"ui_costcolon_uc",depth:14,alpha:1},{name:"costText",anchor_x:0.5,anchor_y:0.5,pos_x:172,pos_y:24,size_x:120,size_y:60,font_size:30,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],horizontalAlign:"middle",text:"",depth:14,alpha:1}]}},groups:[{name:"costBox",groupDefinition:"costBox",pos_x:170,pos_y:684,size_x:260,size_y:150,depth:14,alpha:0,visible:true}]}}};__ngs._eh={_c:null,_d:function(){this._c={exports:{staticBackgroundImages:{images:[{name:"background",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:480,size_x:640,size_y:960,asset:"Content/Images8x/misc/1pxclear.png",alpha:0.3,depth:-3,info:{event_asset_dir:"Content/Images8x/event_raidboss",event_image_E01RB01:"Event1_banner3.jpg",event_image:"Event_banner.jpg"}},{name:"bgCard1",anchor_x:0.5,anchor_y:0,pos_x:320,pos_y:77,size_x:640,size_y:857,asset:"Content/Images8x/misc/1pxclear.png",alpha:0},{name:"bgCard2",anchor_x:0.5,anchor_y:0,pos_x:320,pos_y:77,size_x:640,size_y:857,asset:"Content/Images8x/misc/1pxclear.png",alpha:0},{name:"bgCardReflection1",anchor_x:0.5,anchor_y:0,pos_x:0,pos_y:857,size_x:640,size_y:857,flip_y:true,asset:"Content/Images8x/misc/1pxclear.png"},{name:"bgCardReflection2",anchor_x:0.5,anchor_y:0,pos_x:0,pos_y:857,size_x:640,size_y:857,flip_y:true,asset:"Content/Images8x/misc/1pxclear.png"},{name:"dim1",anchor_x:0.5,anchor_y:0,pos_x:0,pos_y:857,size_x:640,size_y:857,alpha:0.3,asset:"Content/Images8x/misc/1pxblack.png"},{name:"dim2",anchor_x:0.5,anchor_y:0,pos_x:0,pos_y:857,size_x:640,size_y:857,alpha:0.3,asset:"Content/Images8x/misc/1pxblack.png"},{name:"techOverlay",pos_x:15,pos_y:140,size_x:220,size_y:370,asset:"Content/Images8x/UI/Overlay/tech_overlay_01.png",depth:0},{name:"dropshadow",anchor_x:0.5,anchor_y:1,pos_x:320,pos_y:960,size_x:640,size_y:280,flip_y:true,asset:"Content/Images8x/UI/Overlay/dropshadow_black.png"},{name:"topBlack",anchor_x:0.5,anchor_y:0,pos_x:320,pos_y:0,size_x:640,size_y:80,depth:1,asset:"Content/Images8x/misc/1pxblack.png"},{name:"dropshadow2",anchor_x:0.5,anchor_y:0,pos_x:320,pos_y:77,size_x:640,size_y:50,depth:1,asset:"Content/Images8x/UI/Overlay/dropshadow_black.png"}]},images:[{name:"bg_message_top_left",pos_x:14,pos_y:850,size_x:306,size_y:64,depth:0,asset:"Content/Images8x/UI/01_main/bg_messages_top.png"},{name:"bg_message_top_right",pos_x:320,pos_y:850,size_x:306,size_y:64,flip_x:true,flip_y:true,depth:0,asset:"Content/Images8x/UI/01_main/bg_messages_bottom.png"},{name:"bg_messages_bottom_left",pos_x:14,pos_y:914,size_x:306,size_y:64,asset:"Content/Images8x/UI/01_main/bg_messages_bottom.png"},{name:"bg_messages_bottom_right",pos_x:320,pos_y:914,size_x:306,size_y:64,flip_x:true,asset:"Content/Images8x/UI/01_main/bg_messages_bottom.png"},{name:"buttons_background",pos_x:0,pos_y:500,size_x:640,size_y:362,depth:-1,asset:"Content/Images8x/UI/01_main/bg_buttons.png"},{name:"dim2",anchor_x:0.5,anchor_y:0,pos_x:320,pos_y:600,size_x:640,size_y:2000,alpha:0.4,color:[0,14,36],depth:-2,asset:"Content/Images8x/misc/1pxwhite.png"},{name:"energyBarBack",anchor_x:0.5,anchor_y:0.5,pos_x:454,pos_y:558,size_x:120,size_y:29,asset:"Content/Images8x/UI/bar/energybar_empty.png",depth:1},{name:"energyBarMeter",anchor_x:0,anchor_y:0.5,pos_x:398,pos_y:558,size_x:112,size_y:21,color:[195,1,209],asset:"Content/Images8x/misc/1pxwhite.png",depth:2},{name:"energyIcon",anchor_x:0.5,anchor_y:0.5,pos_x:385,pos_y:560,size_x:64,size_y:64,asset:"Content/Images8x/UI/icon/icon_energy.png",depth:3},{name:"missionArrow",anchor_x:0.5,anchor_y:0.5,pos_x:580,pos_y:558,size_x:31,size_y:31,asset:"Content/Images8x/UI/icon/icon_arrow.png",depth:3},{name:"battleEnergyIcon1",anchor_x:0.5,anchor_y:0.5,pos_x:416,pos_y:660,size_x:34,size_y:34,asset:"Content/Images8x/UI/icon/icon_energy_battle.png",depth:2,info:{asset_filled:"Content/Images8x/UI/icon/icon_energy_battle.png",asset_empty:"Content/Images8x/UI/icon/icon_energy_battle.png"}},{name:"battleEnergyIcon2",anchor_x:0.5,anchor_y:0.5,pos_x:444,pos_y:660,size_x:34,size_y:34,asset:"Content/Images8x/UI/icon/icon_energy_battle.png",depth:3,info:{asset_filled:"Content/Images8x/UI/icon/icon_energy_battle.png",asset_empty:"Content/Images8x/UI/icon/icon_energy_battle.png"}},{name:"battleEnergyIcon3",anchor_x:0.5,anchor_y:0.5,pos_x:472,pos_y:660,size_x:34,size_y:34,asset:"Content/Images8x/UI/icon/icon_energy_battle.png",depth:4,info:{asset_filled:"Content/Images8x/UI/icon/icon_energy_battle.png",asset_empty:"Content/Images8x/UI/icon/icon_energy_battle.png"}},{name:"battleArrow",anchor_x:0.5,anchor_y:0.5,pos_x:580,pos_y:662,size_x:31,size_y:31,asset:"Content/Images8x/UI/icon/icon_arrow.png",depth:3},{name:"iconUpgrade",anchor_x:0,anchor_y:0.5,pos_x:235,pos_y:770,size_x:46,size_y:46,asset:"Content/Images8x/UI/icon/icon_0_upgrade.png",depth:3},{name:"iconSpacebridge",anchor_x:0,anchor_y:0.5,pos_x:547,pos_y:770,size_x:46,size_y:46,asset:"Content/Images8x/UI/icon/icon_0_space_bridge.png",depth:3},{name:"messageIcon",anchor_x:0,anchor_y:0.5,pos_x:40,pos_y:884,size_x:36,size_y:36,asset:"Content/Images8x/UI/icon/icon_message.png"}],labels:[{name:"energyLabel",anchor_x:0.5,anchor_y:0.5,pos_x:456,pos_y:559,size_x:160,size_y:40,text:"",font_size:19,fontType:"Content/Fonts/TransformersMovie.ttf",horizontalAlign:"middle",verticalAlign:"middle",color:[236,243,255],depth:3},{name:"staticMissionLabel",anchor_x:0,anchor_y:0.5,pos_x:78,pos_y:565,size_x:300,size_y:60,text:"ui_mission_uc",font_size:40,color:[130,237,247],fontType:"Content/Fonts/TransformersMovie.ttf",horizontalAlign:"left",verticalAlign:"top"},{name:"staticBattleLabel",anchor_x:0,anchor_y:0.5,pos_x:78,pos_y:668,size_x:300,size_y:60,text:"ui_battle_uc",font_size:40,color:[130,237,247],fontType:"Content/Fonts/TransformersMovie.ttf",horizontalAlign:"left",verticalAlign:"top"},{name:"staticUpgradeLabel",anchor_x:0,anchor_y:0.5,pos_x:65,pos_y:787,size_x:200,size_y:60,text:"ui_upgrade_uc",font_size:28,color:[130,237,247],fontType:"Content/Fonts/TransformersMovie.ttf",horizontalAlign:"left",verticalAlign:"top"},{name:"staticSpaceBridgeLabel1",anchor_x:0,anchor_y:0.5,pos_x:367,pos_y:784,size_x:300,size_y:60,text:"ui_spacebridge_uc",font_size:24,color:[130,237,247],fontType:"Content/Fonts/TransformersMovie.ttf",horizontalAlign:"left",verticalAlign:"top"},{name:"noMessagesLabel",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:925,size_x:640,size_y:80,text:"ui_nomessages",font_size:22,fontType:"Content/Fonts/texe.otf",horizontalAlign:"middle",verticalAlign:"middle",color:[130,237,247],depth:10},{name:"inboxLabel",anchor_x:0,anchor_y:0.5,pos_x:42,pos_y:882,size_x:200,size_y:40,text:"ui_mymessages",font_size:28,color:[240,208,29],fontType:"Content/Fonts/SFElectrotome.ttf",info:{msg_x:14,msg_y_start:914,msg_y_inc:90}}],buttons:[{name:"eventIntroButton",anchor_x:0.5,anchor_y:0.5,pos_x:590,pos_y:350,size_x:100,size_y:100,setSelectOnTouch:true,visible:false,asset:"Content/Images8x/UI/button/btn_sml_blue_a.png",multiAsset:{onAsset:"Content/Images8x/UI/button/btn_sml_blue_a.png",selectedAsset:"Content/Images8x/UI/button/btn_sml_blue_b.png"},action:"onEventIntroButtonPressed",sound:["click_high"]}],groupDefinitions:{bottomButtons:{images:[{name:"iconInventory",anchor_x:0,anchor_y:0.5,pos_x:552,pos_y:2,size_x:40,size_y:40,asset:"Content/Images8x/UI/icon/icon_0_inventory.png",depth:3},{name:"iconFriends",anchor_x:0,anchor_y:0.5,pos_x:230,pos_y:2,size_x:46,size_y:46,asset:"Content/Images8x/UI/icon/icon_0_friends.png",depth:3},{name:"buttonFrame1",anchor_x:0,anchor_y:0.5,pos_x:0,pos_y:0,size_x:320,size_y:116,asset:"Content/Images8x/UI/01_main/bg_buttons_b.png",depth:-1},{name:"buttonFrame2",anchor_x:0,anchor_y:0.5,pos_x:320,pos_y:0,size_x:320,size_y:116,asset:"Content/Images8x/UI/01_main/bg_buttons_b.png",depth:-1},{name:"buttonFrame3",anchor_x:0,anchor_y:0.5,pos_x:0,pos_y:105,size_x:320,size_y:116,asset:"Content/Images8x/UI/01_main/bg_buttons_b.png",depth:-2},{name:"buttonFrame4",anchor_x:0,anchor_y:0.5,pos_x:320,pos_y:105,size_x:320,size_y:116,asset:"Content/Images8x/UI/01_main/bg_buttons_b.png",depth:-2},{name:"buttonFrame5",anchor_x:0,anchor_y:0.5,pos_x:320,pos_y:205,size_x:320,size_y:116,asset:"Content/Images8x/UI/01_main/bg_buttons_b.png",depth:-2}],labels:[{name:"labelAllies",anchor_x:0,anchor_y:0.5,pos_x:60,pos_y:5,size_x:300,size_y:60,text:"ui_allies_uc",font_size:28,color:[130,237,247],fontType:"Content/Fonts/TransformersMovie.ttf",horizontalAlign:"left",verticalAlign:"middle"},{name:"labelInventory",anchor_x:0,anchor_y:0.5,pos_x:372,pos_y:5,size_x:300,size_y:60,text:"ui_inventory_uc",font_size:28,color:[130,237,247],fontType:"Content/Fonts/TransformersMovie.ttf",horizontalAlign:"left",verticalAlign:"middle"},{name:"labelHelp",anchor_x:0,anchor_y:0.5,pos_x:367,pos_y:135,size_x:300,size_y:60,text:"",font_size:28,color:[130,237,247],fontType:"Content/Fonts/TransformersMovie.ttf",horizontalAlign:"left",verticalAlign:"middle"}],tfbuttons:[{name:"inventoryButton",anchor_x:0,anchor_y:0.5,pos_x:328,pos_y:10,size_x:300,size_y:105,text:"",font_size:28,color:[236,243,255],fontType:"Content/Fonts/TransformersMovie.ttf",action:"onInventoryButtonPressed",sound:["click_high"]},{name:"friendsButton",anchor_x:0,anchor_y:0.5,pos_x:10,pos_y:10,size_x:300,size_y:105,text:"",font_size:28,color:[130,237,247],fontType:"Content/Fonts/TransformersMovie.ttf",action:"onFriendsButtonPressed",sound:["click_high"]},{name:"helpButton",anchor_x:0,anchor_y:0.5,pos_x:328,pos_y:110,size_x:300,size_y:105,text:"ui_help_uc",font_size:28,color:[130,237,247],fontType:"Content/Fonts/TransformersMovie.ttf",action:"onHelpPressed",sound:["click_high"]},{name:"profileButton",anchor_x:0,anchor_y:0.5,pos_x:10,pos_y:110,size_x:300,size_y:105,text:"ui_profile_uc",font_size:28,color:[236,243,255],fontType:"Content/Fonts/TransformersMovie.ttf",action:"onProfilePressed",sound:["click_high"]},{name:"feedBackButton",anchor_x:0,anchor_y:0.5,pos_x:328,pos_y:210,size_x:300,size_y:105,text:"ui_feedback_uc",font_size:28,color:[236,243,255],fontType:"Content/Fonts/TransformersMovie.ttf",action:"onFeedbackPressed",sound:["click_high"]}]},eventButton:{tfbuttons:[{name:"button",anchor_x:0.5,anchor_y:0.5,pos_x:0,pos_y:0,size_x:320,size_y:120,text:"ui_specialevent_uc",type:5,font_size:32,color:[255,255,255],fontType:"Content/Fonts/SFElectrotome.ttf",textOffsetY:-13,action:"onEventButtonPressed",sound:["click_high"]}],labels:[{name:"eventTimeLeft",anchor_x:0.5,anchor_y:0,pos_x:0,pos_y:-2,size_x:300,size_y:40,text:"",horizontalAlign:"middle",verticalAlign:"middle",font_size:24,color:[240,208,29],fontType:"Content/Fonts/text.otf"}],images:[{name:"eventArrow",anchor_x:0.5,anchor_y:0.5,pos_x:115,pos_y:0,size_x:40,size_y:40,depth:1,asset:"Content/Images8x/UI/icon/icon_arrows_single_white.png"},{name:"eventExclaim",anchor_x:0.5,anchor_y:0.8,pos_x:-115,pos_y:10,size_x:80,size_y:80,depth:1,asset:"Content/Images8x/UI/Prompt/reg_header_1.png"}]}},groups:[{name:"bottomButtons",groupDefinition:"bottomButtons",pos_x:0,pos_y:1030},{name:"eventButton",groupDefinition:"eventButton",pos_x:480,pos_y:442}],tfbuttons:[{name:"missionsButton",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:565,size_x:610,size_y:105,type:1,fontType:"Content/Fonts/SFElectrotome.ttf",action:"onMissionsButtonPressed",sound:["click_high"]},{name:"battleButton",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:668,size_x:610,size_y:105,text:"",font_size:50,color:[236,243,255],fontType:"Content/Fonts/SFElectrotome.ttf",action:"onBattleButtonPressed",sound:["click_high"]},{name:"fusionButton",anchor_x:0,anchor_y:0.5,pos_x:15,pos_y:777,size_x:300,size_y:105,text:"",font_size:50,color:[236,243,255],fontType:"Content/Fonts/SFElectrotome.ttf",action:"onFusionButtonPressed",sound:["click_high"]},{name:"StoreButton",anchor_x:0,anchor_y:0.5,pos_x:323,pos_y:777,size_x:300,size_y:105,text:"",font_size:35,color:[236,243,255],fontType:"Content/Fonts/SFElectrotome.ttf",action:"onStoreButtonPressed",sound:["click_high"]}]}}}};__ngs._ei={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.ProfileViewDefinition={images:[{name:"bg1",pos_x:320,pos_y:480,anchor_x:1,anchor_y:1,size_x:384,size_y:512,depth:-1,asset:"Content/Images8x/UI/BG/bg_friends.jpg"},{name:"bg2",pos_x:320,pos_y:480,anchor_x:0,anchor_y:1,size_x:384,size_y:512,flip_x:true,depth:-1,asset:"Content/Images8x/UI/BG/bg_friends.jpg"},{name:"bg3",pos_x:320,pos_y:480,anchor_x:1,anchor_y:0,size_x:384,size_y:512,flip_y:true,depth:-1,asset:"Content/Images8x/UI/BG/bg_friends.jpg"},{name:"bg4",pos_x:320,pos_y:480,anchor_x:0,anchor_y:0,size_x:384,size_y:512,flip_x:true,flip_y:true,depth:-1,asset:"Content/Images8x/UI/BG/bg_friends.jpg"},{name:"avatarImage",anchor_x:0.5,anchor_y:0.5,pos_x:150,pos_y:230,size_x:100,size_y:100,asset:"Content/Images8x/UI/15_friends/user_default_icon.png"},{name:"cardHolder",pos_x:50,pos_y:320,size_x:0,size_y:0,asset:"",info:{card_w:224,card_h:300}}],labels:[{name:"playerName",anchor_x:0,anchor_y:0.5,pos_x:220,pos_y:240,size_x:375,size_y:100,text:"",font_size:42,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[170,224,255],colorType:"playerName"},{name:"levelLabel",anchor_x:0,anchor_y:0.5,pos_x:300,pos_y:350,size_x:300,size_y:50,text:"ui_levelcolon_uc",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[183,226,240]},{name:"level",anchor_x:0.5,anchor_y:0.5,pos_x:475,pos_y:350,size_x:150,size_y:50,text:"",font_size:32,depth:1,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"right",verticalAlign:"middle",color:[236,243,255],colorType:"level"},{name:"transformerCardsLabel",anchor_x:0,anchor_y:0.5,pos_x:300,pos_y:400,size_x:300,size_y:50,text:"ui_charactersdiscovered",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[183,226,240]},{name:"transformerCards",anchor_x:0,anchor_y:0.5,pos_x:550,pos_y:400,size_x:200,size_y:50,text:"",font_size:32,depth:1,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[236,243,255]},{name:"weaponCardsLabel",anchor_x:0,anchor_y:0.5,pos_x:300,pos_y:450,size_x:300,size_y:50,text:"ui_weaponsdiscovered",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[183,226,240]},{name:"weaponCards",anchor_x:0,anchor_y:0.5,pos_x:550,pos_y:450,size_x:200,size_y:50,text:"",font_size:32,depth:1,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[236,243,255]},{name:"winsLabel",anchor_x:0,anchor_y:0.5,pos_x:300,pos_y:500,size_x:300,size_y:50,text:"ui_winscolon_uc",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[183,226,240]},{name:"wins",anchor_x:0,anchor_y:0.5,pos_x:550,pos_y:500,size_x:150,size_y:50,text:"",font_size:32,depth:1,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[236,243,255]},{name:"lossesLabel",anchor_x:0,anchor_y:0.5,pos_x:300,pos_y:550,size_x:300,size_y:50,text:"ui_lossescolon_uc",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[183,226,240]},{name:"losses",anchor_x:0,anchor_y:0.5,pos_x:550,pos_y:550,size_x:150,size_y:50,text:"",font_size:32,depth:1,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[236,243,255]}],buttons:[],tfbuttons:[],progressBar:[{name:"xpBar",anchor_x:0,anchor_y:0,pos_x:550,pos_y:350,size_x:150,size_y:36,value:50,emptyImage:"Content/Images8x/misc/1pxblack.png",fillImage:"Content/Images8x/UI/bar/hud_xp_bar.png",showText:false}],lists:[],groupDefinitions:{},groups:[]}}};__ngs._ej={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.AchievementsViewDefinition={images:[{name:"backgroundImage",pos_x:0,pos_y:-20,size_x:640,size_y:960,asset:"Content/Images8x/UI/BG/bg_deck_background1.png"}],labels:[],buttons:[],tfbuttons:[],progressBar:[],lists:[{name:"achievements",width:700,height:900,itemHeight:350,itemWidth:640,pos_x:0,pos_y:160}]}}};__ngs._ek={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.AchievementsBottomViewDefinition={images:[],labels:[],buttons:[],tfbuttons:[{name:"prevButton",pos_x:10,pos_y:0,size_x:300,size_y:80,anchor_x:0,anchor_y:0,action:"changePage",text:"ui_previouspage",visible:false,enable:false,info:{id:1}},{name:"nextButton",pos_x:330,pos_y:0,size_x:300,size_y:80,anchor_x:0,anchor_y:0,action:"changePage",text:"ui_nextpage",visible:false,enable:false,info:{id:1}}],progressBar:[],lists:[]}}};__ngs._el={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.OutOfEnergyViewDefinition={images:[{name:"headerImage",anchor_x:0.5,anchor_y:0,pos_x:320,pos_y:45,size_x:75,size_y:94,asset:"Content/Images8x/UI/Prompt/reg_header_1.png",depth:4},{name:"headerFrame",anchor_x:0.5,anchor_y:0,pos_x:320,pos_y:50,size_x:127,size_y:88.5,asset:"Content/Images8x/UI/Prompt/reg_header_frame.png",depth:2},{name:"battleEnergyImage",pos_x:120,pos_y:260,size_x:180,size_y:180,depth:1,asset:"Content/Images8x/UI/StoreItems/battle_energy_cylinder.png"},{name:"arrowImage",pos_x:280,pos_y:316,size_x:110,size_y:80,depth:1,color:[183,226,240],flip_x:"true",asset:"Content/Images8x/UI/17_tutorial/arrow.png"},{name:"battleEnergyIcon1",pos_x:380,pos_y:324,size_x:60,size_y:60,secondary:{pos_x:380,pos_y:364,size_x:60,size_y:60},asset:"Content/Images8x/UI/icon/icon_energy_battle.png"},{name:"energyIcon",pos_x:390,pos_y:300,size_x:120,size_y:120,secondary:{pos_x:390,pos_y:265,size_x:120,size_y:120},visible:false,asset:"Content/Images8x/UI/icon/icon_energy.png"},{name:"battleEnergyIcon2",pos_x:425,pos_y:324,size_x:60,size_y:60,secondary:{pos_x:425,pos_y:364,size_x:60,size_y:60},asset:"Content/Images8x/UI/icon/icon_energy_battle.png"},{name:"battleEnergyIcon3",pos_x:470,pos_y:324,size_x:60,size_y:60,secondary:{pos_x:470,pos_y:364,size_x:60,size_y:60},asset:"Content/Images8x/UI/icon/icon_energy_battle.png"},{name:"background",pos_x:320,pos_y:480,size_x:960,size_y:960,anchor_x:0.5,anchor_y:0.5,depth:-1,asset:"Content/Images8x/UI/BG/bg_tutorial.jpg"},{name:"dropshadowTop",pos_x:320,pos_y:0,anchor_x:0.5,anchor_y:0,size_x:768,size_y:400,asset:"Content/Images8x/UI/Overlay/dropshadow_black.png",depth:0},{name:"dropshadowBottom",pos_x:320,pos_y:960,anchor_x:0.5,anchor_y:1,size_x:768,size_y:400,flip_y:"true",asset:"Content/Images8x/UI/Overlay/dropshadow_black.png",depth:0},{name:"iconUpgrade",anchor_x:0,anchor_y:0.5,pos_x:80,pos_y:795,size_x:46,size_y:46,asset:"Content/Images8x/UI/icon/icon_0_upgrade.png",depth:3},{name:"iconSpacebridge",anchor_x:0,anchor_y:0.5,pos_x:348,pos_y:795,size_x:46,size_y:46,asset:"Content/Images8x/UI/icon/icon_0_space_bridge.png",depth:3}],labels:[{name:"title",pos_x:320,pos_y:180,size_x:640,size_y:60,font_size:48,text:"ui_oobattlecubes",color:[245,255,0],fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"description",pos_x:320,pos_y:240,size_x:300,size_y:120,font_size:28,visible:false,text:"ui_askusebcrecharge",fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"amountTextLabel",pos_x:325,pos_y:480,size_x:450,size_y:120,font_size:24,anchor_x:0.5,anchor_y:0.5,horizontalAlign:"middle",text:"ui_battlecubes",fontType:"Content/Fonts/text.otf"},{name:"amountLabel",pos_x:480,pos_y:480,size_x:450,size_y:120,font_size:28,anchor_x:0,anchor_y:0.5,horizontalAlign:"left",text:"",fontType:"Content/Fonts/text.otf"},{name:"timeTextLabel",pos_x:300,pos_y:230,size_x:200,size_y:120,anchor_x:1,anchor_y:0.5,font_size:24,horizontalAlign:"right",text:"ui_rechargein",fontType:"Content/Fonts/text.otf"},{name:"timeLeftLabel",pos_x:300,pos_y:230,size_x:300,size_y:120,anchor_x:0,anchor_y:0.5,font_size:24,horizontalAlign:"left",text:"",fontType:"Content/Fonts/text.otf"},{name:"statLabel",pos_x:324,pos_y:358,size_x:80,size_y:80,anchor_x:0.5,anchor_y:0.5,font_size:24,horizontalAlign:"center",verticalAlign:"Middle",color:[245,255,0],text:"ui_full_uc",depth:3,fontType:"Content/Fonts/text.otf"},{name:"waitingLabel",pos_x:320,pos_y:620,size_x:640,size_y:120,font_size:24,text:"ui_ifyouchoosetowait",fontType:"Content/Fonts/text.otf"},{name:"staticUpgradeLabel",anchor_x:0,anchor_y:0.5,pos_x:110,pos_y:795,size_x:200,size_y:60,text:"ui_upgrade_uc",font_size:23,color:[130,237,247],fontType:"Content/Fonts/TransformersMovie.ttf",horizontalAlign:"middle",verticalAlign:"middle"},{name:"staticSpaceBridgeLabel1",anchor_x:0,anchor_y:0.5,pos_x:326,pos_y:795,size_x:300,size_y:60,text:"ui_spacebridge_uc",font_size:23,color:[130,237,247],fontType:"Content/Fonts/TransformersMovie.ttf",horizontalAlign:"middle",verticalAlign:"middle"}],buttons:[],tfbuttons:[{name:"useEnergyButton",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:544,size_x:500,size_y:95,font_size:34,text:"ui_usecontainer",fontType:"Content/Fonts/SFElectrotome.ttf",action:"onUseEnergy",sound:["click_flat"],type:5},{name:"missionButton",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:700,size_x:515,size_y:95,font_size:36,fontType:"Content/Fonts/TransformersMovie.ttf",action:"onMission",sound:["click_high"],text:"ui_mission_uc",type:1},{name:"upgradeButton",anchor_x:1,anchor_y:0.5,pos_x:310,pos_y:800,size_x:250,size_y:95,font_size:28,fontType:"Content/Fonts/TransformersMovie.ttf",action:"onUpgrade",sound:["click_high"],text:"",type:1},{name:"spaceBridgeButton",anchor_x:0,anchor_y:0.5,pos_x:330,pos_y:800,size_x:250,size_y:95,font_size:28,fontType:"Content/Fonts/TransformersMovie.ttf",action:"onSpaceBridge",sound:["click_high"],text:"",type:1}],progressBar:[],lists:[]}}};__ngs._em={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.OpponentSelectViewDefinition={groups:[{name:"backgroundImage",groupDefinition:"backgroundImage",pos_x:0,pos_y:0,size_x:768,size_y:1024,depth:-10}],groupDefinitions:{backgroundImage:{images:[{name:"backgroundImage1",pos_x:320,pos_y:480,size_x:384,size_y:512,anchor_x:1,anchor_y:1,asset:"Content/Images8x/UI/BG/bg_store1.png",depth:-10},{name:"backgroundImage2",pos_x:320,pos_y:480,size_x:384,size_y:512,anchor_x:0,anchor_y:1,flip_x:true,asset:"Content/Images8x/UI/BG/bg_store1.png",depth:-10},{name:"backgroundImage3",pos_x:320,pos_y:480,size_x:384,size_y:512,anchor_x:1,anchor_y:0,flip_y:true,asset:"Content/Images8x/UI/BG/bg_store1.png",depth:-10},{name:"backgroundImage4",pos_x:320,pos_y:480,size_x:384,size_y:512,anchor_x:0,anchor_y:0,flip_x:true,flip_y:true,asset:"Content/Images8x/UI/BG/bg_store1.png",depth:-10}]}},images:[{name:"topBg",pos_x:320,pos_y:-460,size_x:768,size_y:768,anchor_x:0.5,anchor_y:0.5,depth:11,asset:"Content/Images8x/UI/12_battle/battle_gate.png"},{name:"botBg",pos_x:320,pos_y:1510,anchor_x:0.5,anchor_y:0.5,size_x:768,size_y:768,depth:10,asset:"Content/Images8x/UI/12_battle/battle_gate.png"}],buttons:[{name:"decButton",action:"onDecrease",sound:["click_flat"],pos_x:100,pos_y:150,anchor_x:0.5,anchor_y:0.5,size_x:50,size_y:70,text:"ui_dash",font_size:48,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],visible:false},{name:"incButton",action:"onIncrease",sound:["click_flat"],anchor_x:0.5,anchor_y:0.5,pos_x:300,pos_y:150,size_x:50,size_y:70,text:"ui_plussign",font_size:48,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],visible:false},{name:"refreshButton",action:"onRefreshList",sound:["click_flat"],anchor_x:0.5,anchor_y:0.5,pos_x:500,pos_y:150,size_x:50,size_y:70,text:"ui_search_uc",font_size:48,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],visible:false}],labels:[{name:"levelLabel",anchor_x:0.5,anchor_y:0.5,pos_x:200,pos_y:150,size_x:50,size_y:70,text:"",font_size:48,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],visible:false,colorType:"level"},{name:"HeaderLabel",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:150,size_x:400,size_y:70,text:"ui_chooseyouropponent_uc",font_size:34,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"middle",color:[183,226,240]}],lists:[{name:"opponentList",width:640,height:700,itemWidth:640,itemHeight:160,pos_x:0,pos_y:190}]}}};__ngs._en={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.BottomHudOpponentSelectViewDefinition={images:[{name:"battleEnergyIcon1",anchor_x:0.5,anchor_y:0.5,pos_x:512,pos_y:-51,size_x:34,size_y:34,asset:"Content/Images8x/UI/icon/icon_energy_battle.png",depth:2,info:{assetFilled:"Content/Images8x/UI/icon/icon_energy_battle.png",assetEmpty:"Content/Images8x/UI/icon/icon_energy_battle.png"}},{name:"battleEnergyIcon2",anchor_x:0.5,anchor_y:0.5,pos_x:540,pos_y:-51,size_x:34,size_y:34,asset:"Content/Images8x/UI/icon/icon_energy_battle.png",depth:3,info:{assetFilled:"Content/Images8x/UI/icon/icon_energy_battle.png",assetEmpty:"Content/Images8x/UI/icon/icon_energy_battle.png"}},{name:"battleEnergyIcon3",anchor_x:0.5,anchor_y:0.5,pos_x:568,pos_y:-51,size_x:34,size_y:34,asset:"Content/Images8x/UI/icon/icon_energy_battle.png",depth:4,info:{assetFilled:"Content/Images8x/UI/icon/icon_energy_battle.png",assetEmpty:"Content/Images8x/UI/icon/icon_energy_battle.png"}}],groups:[],labels:[{name:"timeTextLabel",pos_x:552,pos_y:-18,size_x:200,size_y:30,anchor_x:1,anchor_y:0.5,font_size:18,horizontalAlign:"right",text:"ui_rechargein",color:[183,226,240],fontType:"Content/Fonts/text.otf"},{name:"timeLeftLabel",pos_x:552,pos_y:-18,size_x:300,size_y:30,anchor_x:0,anchor_y:0.5,font_size:18,color:[183,226,240],horizontalAlign:"left",text:"",fontType:"Content/Fonts/text.otf"}],buttons:[{name:"getBattleEnergyButton",action:"onBattleEnergyButton",sound:["click_high"],anchor_x:0.5,anchor_y:0.5,pos_x:542,pos_y:-42,size_x:200,size_y:80,asset:"Content/Images8x/UI/HUD/hud_bottom_alt_02.png",text:"",font_size:44,color:[236,243,255],fontType:"Content/Fonts/SFElectrotome.ttf"}]}}};__ngs._eo={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.ConfirmBattleViewDefinition={images:[{name:"topBg",pos_x:320,pos_y:180,size_x:768,size_y:768,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/12_battle/battle_gate.png"},{name:"botBg",pos_x:320,pos_y:870,anchor_x:0.5,anchor_y:0.5,size_x:768,size_y:768,asset:"Content/Images8x/UI/12_battle/battle_gate.png",depth:-1},{name:"dropshadowTop",pos_x:320,pos_y:0,anchor_x:0.5,anchor_y:0,size_x:768,size_y:400,alpha:0,asset:"Content/Images8x/UI/Overlay/dropshadow_black.png",depth:2},{name:"dropshadowBottom",pos_x:320,pos_y:960,anchor_x:0.5,anchor_y:1,size_x:768,size_y:400,flip_y:"true",alpha:0,asset:"Content/Images8x/UI/Overlay/dropshadow_black.png",depth:2},{name:"vsImage",pos_x:320,pos_y:490,anchor_x:0.5,anchor_y:0.5,size_x:600,size_y:600,asset:"Content/Images8x/UI/12_battle/icon_vs.png",depth:4,visible:false}],labels:[],groupDefinitions:{playerBlock:{images:[{name:"playerBGLeft",pos_x:0,pos_y:0,size_x:200,size_y:200,asset:"Content/Images8x/UI/12_battle/player_bluebox_right.png",flip_x:true,flip_y:true},{name:"playerBGMiddle",pos_x:200,pos_y:0,size_x:580,size_y:200,flip_y:true,asset:"Content/Images8x/UI/12_battle/player_bluebox_middle.png"}],labels:[{name:"level",pos_x:420,pos_y:104,size_x:200,size_y:60,font_size:24,horizontalAlign:"right",anchor_x:1,anchor_y:0.5,text:"",fontType:"Content/Fonts/SFElectrotome.ttf",colorType:"level"},{name:"wins",pos_x:420,pos_y:135,size_x:200,size_y:60,font_size:24,horizontalAlign:"right",anchor_x:1,anchor_y:0.5,text:"",fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"name",pos_x:420,pos_y:70,size_x:400,size_y:70,font_size:34,horizontalAlign:"right",anchor_x:1,anchor_y:0.5,color:[170,224,255],text:"",fontType:"Content/Fonts/SFElectrotome.ttf",colorType:"playerName"}]},opponentBlock:{images:[{name:"opponentBGMiddle",pos_x:440,pos_y:0,anchor_x:1,size_x:580,size_y:200,asset:"Content/Images8x/UI/12_battle/player_bluebox_middle.png"},{name:"opponentBGRight",pos_x:440,pos_y:0,size_x:200,size_y:200,asset:"Content/Images8x/UI/12_battle/player_bluebox_right.png"}],labels:[{name:"level",pos_x:220,pos_y:104,size_x:200,size_y:60,font_size:24,horizontalAlign:"left",anchor_x:0,anchor_y:0.5,text:"",fontType:"Content/Fonts/SFElectrotome.ttf",colorType:"level"},{name:"wins",pos_x:220,pos_y:135,size_x:200,size_y:60,font_size:24,horizontalAlign:"left",anchor_x:0,anchor_y:0.5,text:"",fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"name",pos_x:220,pos_y:70,size_x:400,size_y:60,font_size:34,horizontalAlign:"left",anchor_x:0,anchor_y:0.5,color:[170,224,255],text:"",fontType:"Content/Fonts/SFElectrotome.ttf",colorType:"playerName"}]}},groups:[{name:"playerBlock",groupDefinition:"playerBlock",pos_x:640,pos_y:590,depth:3,info:{card_pos_x:448,card_pos_y:-20,card_w:168,card_h:224}},{name:"opponentBlock",groupDefinition:"opponentBlock",pos_x:-640,pos_y:180,depth:3,info:{card_pos_x:30,card_pos_y:-20,card_w:168,card_h:224}}],tfbuttons:[{name:"confirmButton",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:890,size_x:420,size_y:100,type:1,action:"onConfirm",sound:["click_high"],text:"ui_fight_uc",depth:3,fontType:"Content/Fonts/SFElectrotome.ttf",font_size:46,visible:false}]}}};__ngs._ep={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var d=__ngs.r_(__ngs._7p).View;var c=__ngs.r_(__ngs._fy).BattleViewDefinition;a.BattleView=d.subclass({classname:"BattleView",initialize:function($super,e){$super(e,c)},destroy:function($super){$super()}})}};__ngs._eq={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.LandingViewDefinition={images:[{name:"background",pos_x:320,pos_y:480,size_x:1024,size_y:1024,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/BG/bg_mission_planet.jpg"},{name:"toplogo",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:150,size_x:500,size_y:200,asset:"Content/Images8x/UI/universal/TF_titleImage.png"}],labels:[],buttons:[],tfbuttons:[{name:"startButton",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:850,size_x:500,size_y:105,fontType:"Content/Fonts/TransformersMovie.ttf",font_size:40,text:"ui_start_uc",action:"onStartButtonPressed",sound:["click_high"]}]}}};__ngs._er={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.FriendsViewDefinition={images:[],labels:[{name:"staticFindAllies",pos_x:320,pos_y:480,anchor_x:0.5,anchor_y:0.5,size_x:400,size_y:300,fontType:"Content/Fonts/SFElectrotome.ttf",text:"ui_findallies",font_size:35,horizontalAlign:"middle",verticalAlign:"middle"}],buttons:[],progressBar:[],lists:[{name:"friendList",width:640,height:700,itemHeight:150,itemWidth:640,pos_x:0,pos_y:200,clippingEnabled:false}],groupDefinitions:{totalAlliesGroup:{images:[{name:"bg",pos_x:0,pos_y:0,anchor_x:0,anchor_y:0,size_x:190,size_y:72,asset:"Content/Images8x/UI/15_friends/panel_status_box.png"}],labels:[{name:"staticAlliesLabel",pos_x:105,pos_y:20,anchor_x:0.5,anchor_y:0.5,size_x:200,size_y:50,fontType:"Content/Fonts/SFElectrotome.ttf",text:"ui_allies_uc",font_size:24,horizontalAlign:"middle",verticalAlign:"middle"},{name:"alliesCount",pos_x:42,pos_y:45,anchor_x:0.5,anchor_y:0.5,size_x:100,size_y:50,text:"",font_size:35,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"right",verticalAlign:"middle"},{name:"alliesMaxCount",pos_x:155,pos_y:45,anchor_x:0.5,anchor_y:0.5,size_x:100,size_y:50,text:"",font_size:35,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle"}]},allyPointGroup:{images:[{name:"bg",pos_x:0,pos_y:0,anchor_x:0,anchor_y:0,size_x:190,size_y:72,flip_x:true,asset:"Content/Images8x/UI/15_friends/panel_status_box.png"}],labels:[{name:"staticAllyPointsLabel",pos_x:95,pos_y:20,anchor_x:0.5,anchor_y:0.5,size_x:200,size_y:50,fontType:"Content/Fonts/SFElectrotome.ttf",text:"ui_alliespoints_uc",font_size:24,horizontalAlign:"middle",verticalAlign:"middle",colorType:"alliesPoints"},{name:"allyPoints",pos_x:10,pos_y:45,anchor_x:0.5,anchor_y:0.5,size_x:200,size_y:50,text:"",font_size:35,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"right",verticalAlign:"middle",colorType:"alliesPoints"},{name:"staticAPLabel",pos_x:175,pos_y:45,anchor_x:0.5,anchor_y:0.5,size_x:100,size_y:50,text:"ui_fp_uc",font_size:35,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",colorType:"alliesPoints"}]},friendRequestButtonGroup:{tfbuttons:[{name:"requestButton",anchor_x:0,anchor_y:1,pos_x:0,pos_y:-21,size_x:320,size_y:85,action:"onFriendRequestAction",sound:["click_flat"],type:5,enabled:false,info:{}}],labels:[{name:"requestLabel",anchor_x:0,anchor_y:0.5,pos_x:40,pos_y:-67,size_x:265,size_y:90,text:"",font_size:32,horizontalAlign:"left",color:[236,243,255],depth:1,fontType:"Content/Fonts/SFElectrotome.ttf"}],images:[{name:"icon",anchor_x:0.5,anchor_y:0.5,pos_x:287,pos_y:-67,size_x:25,size_y:30,asset:"Content/Images8x/UI/icon/icon_arrows_single_white.png",depth:1}]},backgroundImage:{images:[{name:"backgroundImage1",pos_x:320,pos_y:480,size_x:384,size_y:576,anchor_x:1,anchor_y:1,asset:"Content/Images8x/UI/BG/bg_friends.jpg",depth:-10},{name:"backgroundImage2",pos_x:320,pos_y:480,size_x:384,size_y:576,anchor_x:0,anchor_y:1,flip_x:true,asset:"Content/Images8x/UI/BG/bg_friends.jpg",depth:-10},{name:"backgroundImage3",pos_x:320,pos_y:480,size_x:384,size_y:576,anchor_x:1,anchor_y:0,flip_y:true,asset:"Content/Images8x/UI/BG/bg_friends.jpg",depth:-10},{name:"backgroundImage4",pos_x:320,pos_y:480,size_x:384,size_y:576,anchor_x:0,anchor_y:0,flip_x:true,flip_y:true,asset:"Content/Images8x/UI/BG/bg_friends.jpg",depth:-10}]}},groups:[{name:"totalAlliesGroup",groupDefinition:"totalAlliesGroup",pos_x:450,pos_y:175,anchor_x:0,anchor_y:0,depth:4},{name:"allyPointGroup",groupDefinition:"allyPointGroup",pos_x:0,pos_y:175,anchor_x:0,anchor_y:0,depth:4,visible:false},{name:"friendRequestButtonGroup",groupDefinition:"friendRequestButtonGroup",pos_x:300,pos_y:950,visible:false,depth:10},{name:"backgroundImage",groupDefinition:"backgroundImage",pos_x:0,pos_y:0,depth:-100}],comboBoxs:[{name:"sortComboBox",pos_x:150,pos_y:188,size_x:300,size_y:60,gridX:2,gridY:3,cell_size_x:600,cell_size_y:100,max_size_y:700,max_size_x:640,depth:100,prompt:"ui_sortby_uc",action:"onComboBoxSelection",options:[{label:"ui_atoz_uc",id:"atoz_down"},{label:"ui_atoz_uc",id:"atoz_up"},{label:"ui_level_uc",id:"level_down"},{label:"ui_level_uc",id:"level_up"},{label:"ui_lastonline_uc",id:"lastonline_down"},{label:"ui_lastonline_uc",id:"lastonline_up"}]}],UIEditText:[{name:"messageTextArea",frameWidth:300,frameHeight:300,textSize:12,backgroundColor:"FFFFFF",offsetX:0,offsetY:0,visible:true,buttonVisible:true,buttonLabel:"Send",buttonAsset:"Content/Images2x/UI/button/button_mail_hilite.png"}]}}};__ngs._es={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.FriendsCellViewDefinition={images:[{name:"leftcell",pos_x:0,pos_y:0,size_x:158,size_y:158,anchor_x:0,anchor_y:0,asset:"Content/Images8x/UI/Cell/store_cell.png"},{name:"middlecell",pos_x:158,pos_y:0,size_x:324,size_y:158,anchor_x:0,anchor_y:0,asset:"Content/Images8x/UI/Cell/store_cell_middle.png"},{name:"rightcell",pos_x:640,pos_y:0,size_x:158,size_y:158,anchor_x:1,anchor_y:0,asset:"Content/Images8x/UI/Cell/store_cell.png",flip_x:true}],labels:[{name:"playerName",anchor_x:0,anchor_y:0,pos_x:160,pos_y:15,size_x:400,size_y:50,text:"",font_size:40,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"top",color:[236,243,255],colorType:"playerName"},{name:"playerLevel",anchor_x:0,anchor_y:0,pos_x:160,pos_y:60,size_x:400,size_y:30,text:"",font_size:25,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[236,243,255],colorType:"level"},{name:"playerLastActionTimestamp",anchor_x:0,anchor_y:0,pos_x:-100,pos_y:-100,size_x:0,size_y:0,text:"0",visible:false},{name:"playerLastCheer",anchor_x:0,anchor_y:0,pos_x:-100,pos_y:-100,size_x:0,size_y:0,text:"0",visible:false},{name:"playerAddedDate",anchor_x:0,anchor_y:0,pos_x:-100,pos_y:-100,size_x:0,size_y:0,text:"0",visible:false}],buttons:[{name:"playerButton",anchor_x:0,anchor_y:0.5,pos_x:45,pos_y:70,size_x:100,size_y:100,action:"onPlayerButtonAction",sound:["click_high"],asset:"Content/Images8x/UI/15_friends/user_default_icon.png"}],tfbuttons:[{name:"friendCellButton",anchor_x:0.5,anchor_y:0.5,pos_x:540,pos_y:90,size_x:150,size_y:80,text:"ui_view_uc",font_size:35,fontType:"Content/Fonts/SFElectrotome.ttf",action:"onCellAction",sound:["click_flat"],type:5},{name:"friendCellCancelButton",anchor_x:0.5,anchor_y:0.5,pos_x:385,pos_y:90,size_x:150,size_y:80,text:"ui_ignore_uc",font_size:35,fontType:"Content/Fonts/SFElectrotome.ttf",action:"onCellCancelAction",sound:["click_low"],type:5},{name:"friendMessageCell",anchor_x:0,anchor_y:0.5,pos_x:270,pos_y:75,size_x:150,size_y:80,text:"ui_message_uc",font_size:35,visible:false,fontType:"Content/Fonts/SFElectrotome.ttf",action:"onCellAction",sound:["click_flat"],type:5}],progressBar:[],lists:[],groupDefinitions:{},groups:[]}}};__ngs._et={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.PaginationCellViewDefinition={images:[],labels:[],tfbuttons:[{name:"nextButton",anchor_x:0,anchor_y:0.5,pos_x:450,pos_y:75,size_x:150,size_y:80,text:"ui_next_uc",font_size:20,fontType:"Content/Fonts/SFElectrotome.ttf",sound:["click_flat"]},{name:"prevButton",anchor_x:0,anchor_y:0.5,pos_x:20,pos_y:75,size_x:150,size_y:80,text:"ui_prev_uc",font_size:20,fontType:"Content/Fonts/SFElectrotome.ttf",sound:["click_flat"]}],buttons:[],progressBar:[],lists:[],groupDefinitions:{},groups:[]}}};__ngs._eu={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.FriendListTopCellViewDefinition={tfbuttons:[{name:"actionButton",sound:["click_flat"],anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:90,size_x:550,size_y:72,text:"ui_cheerallallies_uc",font_size:40,fontType:"Content/Fonts/SFElectrotome.ttf",action:"onCheerAll",type:5}]}}};__ngs._ev={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.FriendProfileViewDefinition={images:[{name:"bg1",pos_x:320,pos_y:480,anchor_x:1,anchor_y:1,size_x:384,size_y:512,depth:-1,asset:"Content/Images8x/UI/BG/bg_friends.jpg"},{name:"bg2",pos_x:320,pos_y:480,anchor_x:0,anchor_y:1,size_x:384,size_y:512,flip_x:true,depth:-1,asset:"Content/Images8x/UI/BG/bg_friends.jpg"},{name:"bg3",pos_x:320,pos_y:480,anchor_x:1,anchor_y:0,size_x:384,size_y:512,flip_y:true,depth:-1,asset:"Content/Images8x/UI/BG/bg_friends.jpg"},{name:"bg4",pos_x:320,pos_y:480,anchor_x:0,anchor_y:0,size_x:384,size_y:512,flip_x:true,flip_y:true,depth:-1,asset:"Content/Images8x/UI/BG/bg_friends.jpg"},{name:"avatarImage",anchor_x:0.5,anchor_y:0.5,pos_x:150,pos_y:230,size_x:100,size_y:100,asset:"Content/Images8x/UI/15_friends/user_default_icon.png"},{name:"cardHolder",pos_x:50,pos_y:320,size_x:0,size_y:0,asset:"",info:{card_w:224,card_h:300}}],labels:[{name:"playerName",anchor_x:0,anchor_y:0.5,pos_x:220,pos_y:240,size_x:375,size_y:100,text:"",font_size:42,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[236,243,255],colorType:"playerName"},{name:"levelLabel",anchor_x:0,anchor_y:0.5,pos_x:300,pos_y:350,size_x:300,size_y:50,text:"ui_levelcolon_uc",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[236,243,255],colorType:"level"},{name:"level",anchor_x:0.5,anchor_y:0.5,pos_x:475,pos_y:350,size_x:150,size_y:50,text:"",font_size:32,depth:1,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"right",verticalAlign:"middle",color:[236,243,255],colorType:"level"},{name:"transformerCardsLabel",anchor_x:0,anchor_y:0.5,pos_x:300,pos_y:400,size_x:300,size_y:50,text:"ui_charactersdiscovered",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[236,243,255]},{name:"transformerCards",anchor_x:0,anchor_y:0.5,pos_x:550,pos_y:400,size_x:150,size_y:50,text:"",font_size:32,depth:1,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[236,243,255]},{name:"weaponCardsLabel",anchor_x:0,anchor_y:0.5,pos_x:300,pos_y:450,size_x:300,size_y:50,text:"ui_weaponsdiscovered",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[236,243,255]},{name:"weaponCards",anchor_x:0,anchor_y:0.5,pos_x:550,pos_y:450,size_x:150,size_y:50,text:"",font_size:32,depth:1,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[236,243,255]},{name:"winsLabel",anchor_x:0,anchor_y:0.5,pos_x:300,pos_y:500,size_x:300,size_y:50,text:"WINS : ",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[236,243,255]},{name:"wins",anchor_x:0,anchor_y:0.5,pos_x:550,pos_y:500,size_x:150,size_y:50,text:"",font_size:32,depth:1,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[236,243,255]},{name:"lossesLabel",anchor_x:0,anchor_y:0.5,pos_x:300,pos_y:550,size_x:300,size_y:50,text:"LOSSES : ",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[236,243,255]},{name:"losses",anchor_x:0,anchor_y:0.5,pos_x:550,pos_y:550,size_x:150,size_y:50,text:"",font_size:32,depth:1,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[236,243,255]}],buttons:[],tfbuttons:[{name:"cheerButton",anchor_x:0.5,anchor_y:0.5,pos_x:200,pos_y:700,size_x:150,size_y:60,type:1,text:"ui_cheer_uc",fontType:"Content/Fonts/SFElectrotome.ttf",action:"onCheerButtonPressed",sound:["click_flat"]},{name:"removeButton",anchor_x:0.5,anchor_y:0.5,pos_x:450,pos_y:700,size_x:150,size_y:60,type:1,text:"ui_removefriend_uc",fontType:"Content/Fonts/SFElectrotome.ttf",action:"onRemoveButtonPressed",sound:["click_flat"]}],progressBar:[{name:"xpBar",anchor_x:0,anchor_y:0,pos_x:550,pos_y:350,size_x:150,size_y:36,value:50,emptyImage:"Content/Images8x/misc/1pxblack.png",fillImage:"Content/Images8x/UI/bar/hud_xp_bar.png",showText:false}],lists:[],groupDefinitions:{},groups:[]}}};__ngs._ew={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.BottomHudFriendsViewDefinition={images:[{name:"bottomUIBackground",anchor_x:0,anchor_y:1,pos_x:0,pos_y:0,size_x:640,size_y:119.5,flip_x:true,flip_y:false,rotation:0,asset:"Content/Images8x/UI/HUD/bg_hud_bottom_b.png"},{name:"bottomUIBackground2",anchor_x:0,anchor_y:1,pos_x:640,pos_y:0,size_x:640,size_y:119.5,flip_x:false,flip_y:false,rotation:0,asset:"Content/Images8x/UI/HUD/bg_hud_bottom_b.png"},{name:"icon",anchor_x:0.5,anchor_y:0.5,pos_x:217,pos_y:-67,size_x:62,size_y:62,asset:"Content/Images8x/UI/icon/icon_0_friend_invite.png",depth:1}],labels:[{name:"buttonLabel",anchor_x:0,anchor_y:0.5,pos_x:70,pos_y:-67,size_x:255,size_y:90,text:"ui_invite_uc",font_size:42,horizontalAlign:"left",color:[236,243,255],depth:1,fontType:"Content/Fonts/SFElectrotome.ttf"}],tfbuttons:[{name:"inviteButton",anchor_x:0,anchor_y:0,pos_x:16,pos_y:-111,size_x:262,size_y:106,action:"onInviteFriendAction",sound:["click_flat"],type:4}]}}};__ngs._ex={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.SearchFriendsViewDefinition={images:[{name:"searchFrame",anchor_x:0.5,anchor_y:0,pos_x:324,pos_y:332,size_x:466,size_y:106,alpha:0.4,asset:"Content/Images8x/misc/1pxlightblue.png",visible:false,depth:1}],labels:[],progressBar:[],lists:[],groupDefinitions:{totalAlliesGroup:{images:[{name:"bg",pos_x:0,pos_y:0,anchor_x:0,anchor_y:0,size_x:190,size_y:72,asset:"Content/Images8x/UI/15_friends/panel_status_box.png"}],labels:[{name:"staticAlliesLabel",pos_x:105,pos_y:20,anchor_x:0.5,anchor_y:0.5,size_x:200,size_y:50,fontType:"Content/Fonts/SFElectrotome.ttf",text:"ui_allies_uc",font_size:24,horizontalAlign:"middle",verticalAlign:"middle"},{name:"alliesCount",pos_x:42,pos_y:45,anchor_x:0.5,anchor_y:0.5,size_x:100,size_y:50,text:"",font_size:35,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"right",verticalAlign:"middle"},{name:"alliesMaxCount",pos_x:155,pos_y:45,anchor_x:0.5,anchor_y:0.5,size_x:100,size_y:50,text:"",font_size:35,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle"}]},allyPointGroup:{images:[{name:"bg",pos_x:0,pos_y:0,anchor_x:0,anchor_y:0,size_x:190,size_y:72,flip_x:true,asset:"Content/Images8x/UI/15_friends/panel_status_box.png"}],labels:[{name:"staticAllyPointsLabel",pos_x:95,pos_y:20,anchor_x:0.5,anchor_y:0.5,size_x:200,size_y:50,fontType:"Content/Fonts/SFElectrotome.ttf",text:"ui_alliespoints_uc",font_size:24,horizontalAlign:"middle",verticalAlign:"middle",colorType:"alliesPoints"},{name:"allyPoints",pos_x:10,pos_y:45,anchor_x:0.5,anchor_y:0.5,size_x:200,size_y:50,text:"",font_size:35,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"right",verticalAlign:"middle",colorType:"alliesPoints"},{name:"staticAPLabel",pos_x:175,pos_y:45,anchor_x:0.5,anchor_y:0.5,size_x:100,size_y:50,text:"ui_fp_uc",font_size:35,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",colorType:"alliesPoints"}]},searchByNameButtonGroup:{tfbuttons:[{name:"searchByNameButton",anchor_x:0.5,anchor_y:0,pos_x:250,pos_y:0,size_x:500,size_y:96,action:"onSearchByName",sound:["click_flat"],type:1}],images:[{name:"arrowsIcon",anchor_x:0.5,anchor_y:0.5,pos_x:435,pos_y:40,size_x:50,size_y:30,asset:"Content/Images8x/UI/icon/icon_arrows.png",depth:1}],labels:[{name:"buttonLabel",anchor_x:0.5,anchor_y:0,pos_x:310,pos_y:0,size_x:520,size_y:80,horizontalAlign:"left",font_size:38,fontType:"Content/Fonts/SFElectrotome.ttf",color:[236,243,255],text:"ui_searchname"}]},searchByLevelButtonGroup:{tfbuttons:[{name:"searchByLevelButton",anchor_x:0.5,anchor_y:0,pos_x:250,pos_y:0,size_x:500,size_y:96,action:"onRandomSearch",sound:["click_flat"],type:1}],images:[{name:"arrowsIcon",anchor_x:0.5,anchor_y:0.5,pos_x:435,pos_y:40,size_x:50,size_y:30,asset:"Content/Images8x/UI/icon/icon_arrows.png",depth:1}],labels:[{name:"buttonLabel",anchor_x:0.5,anchor_y:0,pos_x:310,pos_y:0,size_x:520,size_y:80,horizontalAlign:"left",font_size:38,fontType:"Content/Fonts/SFElectrotome.ttf",color:[236,243,255],text:"ui_searchallies"}]},pendingInvitesButtonGroup:{tfbuttons:[{name:"pendingInvitesButton",anchor_x:0.5,anchor_y:0,pos_x:250,pos_y:0,size_x:500,size_y:96,action:"onPendingInvites",sound:["click_flat"],type:1}],images:[{name:"arrowsIcon",anchor_x:0.5,anchor_y:0.5,pos_x:435,pos_y:40,size_x:50,size_y:30,asset:"Content/Images8x/UI/icon/icon_arrows.png",depth:1}],labels:[{name:"buttonLabel",anchor_x:0.5,anchor_y:0,pos_x:310,pos_y:0,size_x:520,size_y:80,horizontalAlign:"left",font_size:38,fontType:"Content/Fonts/SFElectrotome.ttf",color:[236,243,255],text:"ui_pendinginvites"}]},searchBoxButtonGroup:{tfbuttons:[{name:"searchConfirmButton",anchor_x:0.5,anchor_y:0,pos_x:340,pos_y:6,size_x:300,size_y:96,text:"ui_confirm",enabled:false,font_size:38,fontType:"Content/Fonts/SFElectrotome.ttf",action:"confirmSearchByName",sound:["click_flat"],type:1},{name:"searchCancelButton",anchor_x:0.5,anchor_y:0,pos_x:100,pos_y:6,size_x:170,size_y:96,text:"ui_cancel",font_size:38,enabled:false,fontType:"Content/Fonts/SFElectrotome.ttf",action:"cancelSearchByName",type:1}]},backgroundImage:{images:[{name:"backgroundImage1",pos_x:320,pos_y:480,size_x:384,size_y:512,anchor_x:1,anchor_y:1,asset:"Content/Images8x/UI/BG/bg_friends.jpg",depth:-10},{name:"backgroundImage2",pos_x:320,pos_y:480,size_x:384,size_y:512,anchor_x:0,anchor_y:1,flip_x:true,asset:"Content/Images8x/UI/BG/bg_friends.jpg",depth:-10},{name:"backgroundImage3",pos_x:320,pos_y:480,size_x:384,size_y:512,anchor_x:1,anchor_y:0,flip_y:true,asset:"Content/Images8x/UI/BG/bg_friends.jpg",depth:-10},{name:"backgroundImage4",pos_x:320,pos_y:480,size_x:384,size_y:512,anchor_x:0,anchor_y:0,flip_x:true,flip_y:true,asset:"Content/Images8x/UI/BG/bg_friends.jpg",depth:-10}]}},groups:[{name:"totalAlliesGroup",groupDefinition:"totalAlliesGroup",pos_x:450,pos_y:175,anchor_x:0,anchor_y:0,depth:4},{name:"allyPointGroup",groupDefinition:"allyPointGroup",pos_x:0,pos_y:175,anchor_x:0,anchor_y:0,depth:4,visible:false},{name:"searchByNameButtonGroup",groupDefinition:"searchByNameButtonGroup",visible:false,pos_x:70,pos_y:300,anchor_x:0,anchor_y:0,depth:5},{name:"searchByLevelButtonGroup",groupDefinition:"searchByLevelButtonGroup",pos_x:70,pos_y:400,anchor_x:0,anchor_y:0,depth:5},{name:"searchByMobageButtonGroup",groupDefinition:"searchByMobageButtonGroup",pos_x:70,pos_y:500,anchor_x:0,anchor_y:0,depth:5},{name:"pendingInvitesButtonGroup",groupDefinition:"pendingInvitesButtonGroup",pos_x:70,pos_y:700,anchor_x:0,anchor_y:0,depth:5},{name:"searchBoxButtonGroup",groupDefinition:"searchBoxButtonGroup",pos_x:70,pos_y:450,anchor_x:0,anchor_y:0,depth:5,visible:false},{name:"backgroundImage",groupDefinition:"backgroundImage",pos_x:0,pos_y:0,size_x:768,size_y:1024,depth:-10}],UIEditText:[{name:"searchTextArea",frameWidth:472,frameHeight:112,textSize:40,backgroundColor:"000000",textColor:"FFFFFF",fontType:"Content/Fonts/SFElectrotome.ttf",posX:90,posY:332,offsetX:0,offsetY:0,visible:true,buttonVisible:false,buttonLabel:"Search",depth:2,buttonAsset:"Content/Images2x/UI/button/button_mail_hilite.png",android:{frameWidth:380,frameHeight:80,textSize:42,posX:84,posY:360}}]}}};__ngs._ey={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.ListMessageViewDefinition={images:[{name:"leftcell",pos_x:0,pos_y:0,size_x:158,size_y:158,anchor_x:0,anchor_y:0,asset:"Content/Images8x/UI/Cell/store_cell.png"},{name:"middlecell",pos_x:158,pos_y:0,size_x:324,size_y:158,anchor_x:0,anchor_y:0,asset:"Content/Images8x/UI/Cell/store_cell_middle.png"},{name:"rightcell",pos_x:640,pos_y:0,size_x:158,size_y:158,anchor_x:1,anchor_y:0,asset:"Content/Images8x/UI/Cell/store_cell.png",flip_x:true},{name:"checkMark",pos_x:580,pos_y:75,size_x:90,size_y:45,anchor_x:1,anchor_y:0.5,color:[206,211,231],asset:"Content/Images8x/UI/10_explore/graphic_complete.png"}],labels:[{name:"messageLabel",anchor_x:0,anchor_y:0.5,pos_x:70,pos_y:75,size_x:440,size_y:150,text:"ui_sending",font_size:24,fontType:"Content/Fonts/text.otf",horizontalAlign:"left",verticalAlign:"middle",depth:1,color:[206,211,231]}]}}};__ngs._ez={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.BottomHudSearchFriendsViewDefinition={images:[{name:"bottomUIBackground",anchor_x:0,anchor_y:1,pos_x:0,pos_y:0,size_x:640,size_y:119.5,flip_x:true,flip_y:false,rotation:0,asset:"Content/Images8x/UI/HUD/bg_hud_bottom_b.png"},{name:"bottomUIBackground2",anchor_x:0,anchor_y:1,pos_x:640,pos_y:0,size_x:640,size_y:119.5,flip_x:false,flip_y:false,rotation:0,asset:"Content/Images8x/UI/HUD/bg_hud_bottom_b.png"},{name:"icon",anchor_x:0.5,anchor_y:0.5,pos_x:87,pos_y:-67,size_x:62,size_y:62,asset:"Content/Images8x/UI/icon/icon_0_friends.png",depth:1}],groups:[],labels:[{name:"buttonLabel",anchor_x:0,anchor_y:0.5,pos_x:130,pos_y:-67,size_x:255,size_y:90,text:"ui_allies_uc",font_size:42,horizontalAlign:"left",color:[236,243,255],depth:1,fontType:"Content/Fonts/SFElectrotome.ttf"}],tfbuttons:[{name:"inviteButton",sound:["click_flat"],anchor_x:0,anchor_y:0,pos_x:16,pos_y:-111,size_x:262,size_y:106,action:"onFriendsButtonPressed",type:4}]}}};__ngs._f0={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.PendingInvitesViewDefinition={images:[{name:"bg1",pos_x:320,pos_y:480,anchor_x:1,anchor_y:1,size_x:384,size_y:512,depth:-1,asset:"Content/Images8x/UI/BG/bg_friends.jpg"},{name:"bg2",pos_x:320,pos_y:480,anchor_x:0,anchor_y:1,size_x:384,size_y:512,flip_x:true,depth:-1,asset:"Content/Images8x/UI/BG/bg_friends.jpg"},{name:"bg3",pos_x:320,pos_y:480,anchor_x:1,anchor_y:0,size_x:384,size_y:512,flip_y:true,depth:-1,asset:"Content/Images8x/UI/BG/bg_friends.jpg"},{name:"bg4",pos_x:320,pos_y:480,anchor_x:0,anchor_y:0,size_x:384,size_y:512,flip_x:true,flip_y:true,depth:-1,asset:"Content/Images8x/UI/BG/bg_friends.jpg"}],labels:[{name:"pendingLabel",pos_x:140,pos_y:210,size_x:450,size_y:120,font_size:42,text:"ui_pendinginvites_uc",fontType:"Content/Fonts/SFElectrotome.ttf"}],tfbuttons:[],progressBar:[],lists:[{name:"pendingList",width:640,height:670,itemHeight:150,itemWidth:640,pos_x:0,pos_y:260,clippingEnabled:true}],groupDefinitions:{totalAlliesGroup:{images:[{name:"bg",pos_x:0,pos_y:0,anchor_x:0,anchor_y:0,size_x:190,size_y:72,asset:"Content/Images8x/UI/15_friends/panel_status_box.png"}],labels:[{name:"staticAlliesLabel",pos_x:105,pos_y:20,anchor_x:0.5,anchor_y:0.5,size_x:200,size_y:50,fontType:"Content/Fonts/SFElectrotome.ttf",text:"ui_allies_uc",font_size:24,horizontalAlign:"middle",verticalAlign:"middle"},{name:"alliesCount",pos_x:42,pos_y:45,anchor_x:0.5,anchor_y:0.5,size_x:100,size_y:50,text:"",font_size:35,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"right",verticalAlign:"middle"},{name:"alliesMaxCount",pos_x:155,pos_y:45,anchor_x:0.5,anchor_y:0.5,size_x:100,size_y:50,text:"",font_size:35,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle"}]}},groups:[{name:"totalAlliesGroup",groupDefinition:"totalAlliesGroup",pos_x:450,pos_y:175,anchor_x:0,anchor_y:0,depth:4}]}}};__ngs._f1={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.PendingProfileViewDefinition={images:[{name:"bg1",pos_x:320,pos_y:480,anchor_x:1,anchor_y:1,size_x:384,size_y:512,depth:-1,asset:"Content/Images8x/UI/BG/bg_friends.jpg"},{name:"bg2",pos_x:320,pos_y:480,anchor_x:0,anchor_y:1,size_x:384,size_y:512,flip_x:true,depth:-1,asset:"Content/Images8x/UI/BG/bg_friends.jpg"},{name:"bg3",pos_x:320,pos_y:480,anchor_x:1,anchor_y:0,size_x:384,size_y:512,flip_y:true,depth:-1,asset:"Content/Images8x/UI/BG/bg_friends.jpg"},{name:"bg4",pos_x:320,pos_y:480,anchor_x:0,anchor_y:0,size_x:384,size_y:512,flip_x:true,flip_y:true,depth:-1,asset:"Content/Images8x/UI/BG/bg_friends.jpg"},{name:"avatarImage",anchor_x:0.5,anchor_y:0.5,pos_x:150,pos_y:230,size_x:100,size_y:100,asset:"Content/Images8x/UI/15_friends/user_default_icon.png"},{name:"cardHolder",pos_x:50,pos_y:320,size_x:0,size_y:0,asset:""}],labels:[{name:"playerName",anchor_x:0,anchor_y:0.5,pos_x:220,pos_y:240,size_x:375,size_y:100,text:"",font_size:42,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[170,224,255],colorType:"playerName"},{name:"levelLabel",anchor_x:0,anchor_y:0.5,pos_x:300,pos_y:350,size_x:300,size_y:50,text:"LEVEL : ",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[183,226,240],colorType:"level"},{name:"level",anchor_x:0.5,anchor_y:0.5,pos_x:475,pos_y:350,size_x:150,size_y:50,text:"",font_size:32,depth:1,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"right",verticalAlign:"middle",color:[236,243,255],colorType:"level"},{name:"transformerCardsLabel",anchor_x:0,anchor_y:0.5,pos_x:300,pos_y:400,size_x:300,size_y:50,text:"ui_charactersdiscovered",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[183,226,240]},{name:"transformerCards",anchor_x:0,anchor_y:0.5,pos_x:550,pos_y:400,size_x:150,size_y:50,text:"",font_size:32,depth:1,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[236,243,255]},{name:"weaponCardsLabel",anchor_x:0,anchor_y:0.5,pos_x:300,pos_y:450,size_x:300,size_y:50,text:"ui_weaponsdiscovered",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[183,226,240]},{name:"weaponCards",anchor_x:0,anchor_y:0.5,pos_x:550,pos_y:450,size_x:150,size_y:50,text:"",font_size:32,depth:1,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[236,243,255]},{name:"winsLabel",anchor_x:0,anchor_y:0.5,pos_x:300,pos_y:500,size_x:300,size_y:50,text:"WINS : ",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[183,226,240]},{name:"wins",anchor_x:0,anchor_y:0.5,pos_x:550,pos_y:500,size_x:150,size_y:50,text:"",font_size:32,depth:1,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[236,243,255]},{name:"lossesLabel",anchor_x:0,anchor_y:0.5,pos_x:300,pos_y:550,size_x:300,size_y:50,text:"LOSSES : ",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[183,226,240]},{name:"losses",anchor_x:0,anchor_y:0.5,pos_x:550,pos_y:550,size_x:150,size_y:50,text:"",font_size:32,depth:1,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[236,243,255]}],buttons:[],tfbuttons:[{name:"removeButton",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:700,size_x:450,size_y:100,type:5,text:"ui_removependinginv_uc",font_size:35,fontType:"Content/Fonts/SFElectrotome.ttf",action:"onRemovePendingInvitationButtonPressed"}],progressBar:[{name:"xpBar",anchor_x:0,anchor_y:0,pos_x:550,pos_y:350,size_x:150,size_y:36,value:50,emptyImage:"Content/Images8x/misc/1pxblack.png",fillImage:"Content/Images8x/UI/bar/hud_xp_bar.png",showText:false}],lists:[],groupDefinitions:{},groups:[]}}};__ngs._f2={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.SearchFriendsResultViewDefinition={images:[{name:"bg1",pos_x:320,pos_y:480,anchor_x:1,anchor_y:1,size_x:384,size_y:512,depth:-1,asset:"Content/Images8x/UI/BG/bg_friends.jpg"},{name:"bg2",pos_x:320,pos_y:480,anchor_x:0,anchor_y:1,size_x:384,size_y:512,flip_x:true,depth:-1,asset:"Content/Images8x/UI/BG/bg_friends.jpg"},{name:"bg3",pos_x:320,pos_y:480,anchor_x:1,anchor_y:0,size_x:384,size_y:512,flip_y:true,depth:-1,asset:"Content/Images8x/UI/BG/bg_friends.jpg"},{name:"bg4",pos_x:320,pos_y:480,anchor_x:0,anchor_y:0,size_x:384,size_y:512,flip_x:true,flip_y:true,depth:-1,asset:"Content/Images8x/UI/BG/bg_friends.jpg"}],labels:[],buttons:[],tfbuttons:[{name:"searchAgainButton",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:220,size_x:550,size_y:80,text:"ui_searchagain_uc",font_size:38,fontType:"Content/Fonts/SFElectrotome.ttf",action:"onSearchAgain",sound:["click_flat"],type:5}],progressBar:[],lists:[{name:"friendList",width:640,height:700,itemHeight:150,itemWidth:640,pos_x:0,pos_y:290,action:"onListAction",clippingEnabled:true}],groupDefinitions:{},groups:[]}}};__ngs._f3={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.UnknownProfileViewDefinition={images:[{name:"cardHolder",pos_x:50,pos_y:320,size_x:0,size_y:0,asset:""},{name:"avatarImage",anchor_x:0.5,anchor_y:0.5,pos_x:150,pos_y:230,size_x:100,size_y:100,asset:"Content/Images8x/UI/15_friends/user_default_icon.png"}],labels:[{name:"playerName",anchor_x:0,anchor_y:0.5,pos_x:220,pos_y:240,size_x:375,size_y:100,text:"",font_size:42,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[236,243,255],colorType:"playerName"},{name:"levelLabel",anchor_x:0,anchor_y:0.5,pos_x:300,pos_y:350,size_x:300,size_y:50,text:"ui_levelcolon_uc",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[236,243,255],colorType:"level"},{name:"level",anchor_x:0.5,anchor_y:0.5,pos_x:475,pos_y:350,size_x:150,size_y:50,text:"",font_size:32,depth:1,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"right",verticalAlign:"middle",color:[236,243,255],colorType:"level"},{name:"transformerCardsLabel",anchor_x:0,anchor_y:0.5,pos_x:300,pos_y:400,size_x:300,size_y:50,text:"ui_charactersdiscovered",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[236,243,255]},{name:"transformerCards",anchor_x:0,anchor_y:0.5,pos_x:550,pos_y:400,size_x:200,size_y:50,text:"",font_size:32,depth:1,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[236,243,255]},{name:"weaponCardsLabel",anchor_x:0,anchor_y:0.5,pos_x:300,pos_y:450,size_x:300,size_y:50,text:"ui_weaponsdiscovered",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[236,243,255]},{name:"weaponCards",anchor_x:0,anchor_y:0.5,pos_x:550,pos_y:450,size_x:200,size_y:50,text:"",font_size:32,depth:1,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[236,243,255]},{name:"winsLabel",anchor_x:0,anchor_y:0.5,pos_x:300,pos_y:500,size_x:300,size_y:50,text:"WINS : ",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[236,243,255]},{name:"wins",anchor_x:0,anchor_y:0.5,pos_x:550,pos_y:500,size_x:150,size_y:50,text:"",font_size:32,depth:1,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[236,243,255]},{name:"lossesLabel",anchor_x:0,anchor_y:0.5,pos_x:300,pos_y:550,size_x:300,size_y:50,text:"ui_lossescolon_uc",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[236,243,255]},{name:"losses",anchor_x:0,anchor_y:0.5,pos_x:550,pos_y:550,size_x:150,size_y:50,text:"",font_size:32,depth:1,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[236,243,255]}],buttons:[],tfbuttons:[{name:"allyButton",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:700,size_x:250,size_y:100,type:1,text:"ui_allyrequest_uc",font_size:35,fontType:"Content/Fonts/SFElectrotome.ttf",action:"onAllyRequestButtonPressed"}],progressBar:[{name:"xpBar",anchor_x:0,anchor_y:0,pos_x:550,pos_y:350,size_x:150,size_y:36,value:50,emptyImage:"Content/Images8x/misc/1pxblack.png",fillImage:"Content/Images8x/UI/bar/hud_xp_bar.png",showText:false}],lists:[],groups:[{name:"backgroundImage",groupDefinition:"backgroundImage",pos_x:0,pos_y:0,size_x:768,size_y:1024,depth:-10}],groupDefinitions:{backgroundImage:{images:[{name:"backgroundImage1",pos_x:320,pos_y:480,size_x:384,size_y:512,anchor_x:1,anchor_y:1,asset:"Content/Images8x/UI/BG/bg_store1.png",depth:-10},{name:"backgroundImage2",pos_x:320,pos_y:480,size_x:384,size_y:512,anchor_x:0,anchor_y:1,flip_x:true,asset:"Content/Images8x/UI/BG/bg_store1.png",depth:-10},{name:"backgroundImage3",pos_x:320,pos_y:480,size_x:384,size_y:512,anchor_x:1,anchor_y:0,flip_y:true,asset:"Content/Images8x/UI/BG/bg_store1.png",depth:-10},{name:"backgroundImage4",pos_x:320,pos_y:480,size_x:384,size_y:512,anchor_x:0,anchor_y:0,flip_x:true,flip_y:true,asset:"Content/Images8x/UI/BG/bg_store1.png",depth:-10}]}}}}};__ngs._f4={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.BattleResultViewDefinition={tfbuttons:[{name:"continueButton",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:890,size_x:420,size_y:100,action:"onContinue",sound:["click_high"],font_size:36,type:1,depth:3,fontType:"Content/Fonts/SFElectrotome.ttf",text:"ui_continue_uc"}],images:[{name:"topBg",pos_x:320,pos_y:180,size_x:768,size_y:768,depth:-998,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/12_battle/battle_gate.png",visible:true},{name:"botBg",pos_x:320,pos_y:870,anchor_x:0.5,anchor_y:0.5,size_x:768,size_y:768,depth:-999,asset:"Content/Images8x/UI/12_battle/battle_gate.png",visible:true},{name:"dropshadowTop",pos_x:0,pos_y:0,anchor_x:0,anchor_y:0,size_x:640,size_y:400,asset:"Content/Images8x/UI/Overlay/dropshadow_black.png",depth:2,alpha:0},{name:"dropshadowBottom",pos_x:0,pos_y:0,size_x:640,size_y:400,flip_y:"true",asset:"Content/Images8x/UI/Overlay/dropshadow_black.png",depth:2,alpha:0},{name:"iconBP",pos_x:280,pos_y:515,anchor_x:0.5,anchor_y:0.5,size_x:42,size_y:42,depth:1,asset:"Content/Images8x/UI/icon/icon_currency_bp.png",visible:false},{name:"iconCredits",pos_x:420,pos_y:515,anchor_x:0.5,anchor_y:0.5,size_x:42,size_y:42,depth:1,asset:"Content/Images8x/UI/icon/icon_currency.png",visible:false},{name:"impacta",pos_x:128,pos_y:107,size_x:256,size_y:215,depth:200,asset:"Content/Images8x/UI/Overlay/fx_impact_a.png",alpha:0},{name:"impacta2",pos_x:128,pos_y:107,size_x:256,size_y:215,depth:200,asset:"Content/Images8x/UI/Overlay/fx_impact_a.png",alpha:0},{name:"impacta3",pos_x:128,pos_y:107,size_x:256,size_y:215,depth:200,asset:"Content/Images8x/UI/Overlay/fx_impact_a.png",alpha:0},{name:"impactb",pos_x:0,pos_y:0,size_x:64,size_y:64,depth:200,asset:"Content/Images8x/UI/Overlay/fx_impact_b.png",alpha:0},{name:"impactb2",pos_x:0,pos_y:0,size_x:64,size_y:64,depth:200,asset:"Content/Images8x/UI/Overlay/fx_impact_b.png",alpha:0},{name:"impactb3",pos_x:0,pos_y:0,size_x:64,size_y:64,depth:200,asset:"Content/Images8x/UI/Overlay/fx_impact_b.png",alpha:0},{name:"bannerBattle",pos_x:40,pos_y:360,size_x:580,size_y:200,asset:"Content/Images8x/UI/12_battle/banner_battle_result.png",visible:false,alpha:0}],labels:[{name:"staticXP",pos_x:140,pos_y:515,anchor_x:0.5,anchor_y:0.5,size_x:50,size_y:50,font_size:32,depth:1,fontType:"Content/Fonts/SFElectrotome.ttf",text:"ui_xp_uc",horizontalAlign:"middle",visible:false,colorType:"xp"},{name:"xp",anchor_x:0,anchor_y:0.5,pos_x:170,pos_y:515,size_x:300,size_y:100,font_size:32,depth:1,fontType:"Content/Fonts/SFElectrotome.ttf",text:"",horizontalAlign:"left",visible:false,colorType:"xp"},{name:"bp",anchor_x:0,anchor_y:0.5,pos_x:310,pos_y:515,size_x:300,size_y:100,font_size:32,depth:1,fontType:"Content/Fonts/SFElectrotome.ttf",text:"",horizontalAlign:"left",visible:false,colorType:"battlePoints"},{name:"credits",anchor_x:0,anchor_y:0.5,pos_x:450,pos_y:515,size_x:300,size_y:100,font_size:32,depth:1,fontType:"Content/Fonts/SFElectrotome.ttf",text:"",horizontalAlign:"left",visible:false,colorType:"credits"}],groupDefinitions:{resultLabel:{labels:[{name:"resultLabel2",pos_x:0,pos_y:0,size_x:400,size_y:200,font_size:100,color:[0,255,153],fontType:"Content/Fonts/SFElectrotome.ttf",text:""}]},playerBlock:{images:[{name:"playerBGMiddleWin",pos_x:0,pos_y:0,size_x:415,size_y:255,asset:"Content/Images8x/UI/12_battle/player_bluebox_middle.png",flip_y:true,alpha:0},{name:"playerBGRightWin",pos_x:0,pos_y:0,size_x:231,size_y:255,asset:"Content/Images8x/UI/12_battle/player_bluebox_right.png",flip_x:true,flip_y:true,alpha:0},{name:"playerBGMiddle",pos_x:0,pos_y:0,size_x:331,size_y:255,asset:"Content/Images8x/UI/12_battle/player_broken_lit_middle.png",visible:false,alpha:0},{name:"playerBGRight",pos_x:0,pos_y:0,size_x:331,size_y:255,asset:"Content/Images8x/UI/12_battle/player_broken_lit_right.png",flip_y:true,flip_x:true,visible:false,alpha:0},{name:"playerBGMiddleDim",pos_x:0,pos_y:0,size_x:331,size_y:255,asset:"Content/Images8x/UI/12_battle/player_broken_middle.png",flip_y:true,visible:false,alpha:0},{name:"playerBGRightDim",pos_x:0,pos_y:0,size_x:331,size_y:255,asset:"Content/Images8x/UI/12_battle/player_broken_right.png",flip_x:true,flip_y:true,visible:false,alpha:0}],labels:[{name:"level",pos_x:430,pos_y:675,size_x:200,size_y:60,font_size:24,horizontalAlign:"right",anchor_x:1,anchor_y:0.5,text:"",fontType:"Content/Fonts/SFElectrotome.ttf",colorType:"level",visible:false},{name:"wins",pos_x:430,pos_y:705,size_x:200,size_y:60,font_size:24,horizontalAlign:"right",anchor_x:1,anchor_y:0.5,text:"",fontType:"Content/Fonts/SFElectrotome.ttf",visible:false}]},opponentBlock:{images:[{name:"opponentBGMiddleWin",pos_x:0,pos_y:0,size_x:415,size_y:255,asset:"Content/Images8x/UI/12_battle/player_bluebox_middle.png",alpha:0},{name:"opponentBGRightWin",pos_x:0,pos_y:0,size_x:331,size_y:255,asset:"Content/Images8x/UI/12_battle/player_bluebox_right.png",alpha:0},{name:"opponentBGMiddleDim",pos_x:0,pos_y:0,size_x:331,size_y:255,asset:"Content/Images8x/UI/12_battle/player_broken_middle.png",visible:false,alpha:0},{name:"opponentBGRightDim",pos_x:0,pos_y:0,size_x:331,size_y:255,asset:"Content/Images8x/UI/12_battle/player_broken_right.png",visible:false,alpha:0},{name:"opponentBGMiddle",pos_x:0,pos_y:0,size_x:331,size_y:255,asset:"Content/Images8x/UI/12_battle/player_broken_lit_middle.png",visible:false,alpha:0},{name:"opponentBGRight",pos_x:0,pos_y:0,size_x:331,size_y:255,asset:"Content/Images8x/UI/12_battle/player_broken_lit_right.png",visible:false,alpha:0}],labels:[{name:"level",pos_x:220,pos_y:215,size_x:200,size_y:60,font_size:24,horizontalAlign:"left",anchor_x:0,anchor_y:0.5,text:"",fontType:"Content/Fonts/SFElectrotome.ttf",colorType:"level",visible:false},{name:"wins",pos_x:220,pos_y:245,size_x:200,size_y:60,font_size:24,horizontalAlign:"left",anchor_x:0,anchor_y:0.5,text:"",fontType:"Content/Fonts/SFElectrotome.ttf",visible:false}],tfbuttons:[{name:"enemyDeckButton",anchor_x:0.5,anchor_y:0.5,pos_x:490,pos_y:125,size_x:200,size_y:75,type:5,action:"onEnemyDeckButton",sound:["click_high"],text:"ui_seedeck_uc",font_size:36,fontType:"Content/Fonts/SFElectrotome.ttf",visible:false}]},opponentName:{labels:[{name:"opponentName2",pos_x:412,pos_y:204,size_x:400,size_y:60,font_size:34,horizontalAlign:"left",color:[170,224,255],text:"",fontType:"Content/Fonts/SFElectrotome.ttf",colorType:"playerName",visible:false}]},playerName:{labels:[{name:"playerName2",pos_x:234,pos_y:636,size_x:400,size_y:60,font_size:34,horizontalAlign:"right",color:[170,224,255],text:"",fontType:"Content/Fonts/SFElectrotome.ttf",colorType:"playerName",visible:false}]},},groups:[{name:"playerBlock",groupDefinition:"playerBlock",pos_x:0,pos_y:0,depth:3,info:{card_pos_x:448,card_pos_y:590,card_w:168,card_h:224}},{name:"opponentBlock",groupDefinition:"opponentBlock",pos_x:0,pos_y:30,depth:3,info:{card_pos_x:30,card_pos_y:130,card_w:168,card_h:224}},{name:"playerName",groupDefinition:"playerName",pos_x:0,pos_y:0,depth:3},{name:"opponentName",groupDefinition:"opponentName",pos_x:0,pos_y:0,depth:3},{name:"resultLabel",groupDefinition:"resultLabel",pos_x:0,pos_y:0,depth:3,alpha:0}]}}};__ngs._f5={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.BossResultViewDefinition={images:[{name:"topBg",pos_x:320,pos_y:180,size_x:640,size_y:640,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/12_battle/battle_gate.png",depth:1},{name:"botBg",pos_x:320,pos_y:760,anchor_x:0.5,anchor_y:0.5,size_x:640,size_y:640,asset:"Content/Images8x/UI/12_battle/battle_gate.png",depth:-1},{name:"dropshadowTop",pos_x:0,pos_y:0,anchor_x:0,anchor_y:0,size_x:640,size_y:400,asset:"Content/Images8x/UI/Overlay/dropshadow_black.png",depth:2},{name:"dropshadowBottom",pos_x:0,pos_y:960,anchor_x:0,anchor_y:1,size_x:640,size_y:400,flip_y:"true",asset:"Content/Images8x/UI/Overlay/dropshadow_black.png",depth:2}],labels:[{name:"rewardLabel",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:420,size_x:300,size_y:100,font_size:36,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,0],text:"ui_battlecube",visible:false}],tfbuttons:[{name:"continueButton",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:870,size_x:360,size_y:80,action:"onContinue",sound:["click_high"],font_size:46,type:5,depth:3,fontType:"Content/Fonts/SFElectrotome.ttf",text:"ui_continue_uc"}],groupDefinitions:{winLoseFrame:{images:[{name:"leftWinLoseFrame",pos_x:-133,pos_y:20,anchor_x:0,anchor_y:0,size_x:433,size_y:140,asset:"Content/Images8x/UI/12_battle/banner_green_left.png"},{name:"middleWinLoseFrame",pos_x:300,pos_y:20,anchor_x:0,anchor_y:0,size_x:40,size_y:140,asset:"Content/Images8x/UI/12_battle/banner_green_middle.png"},{name:"rightWinLoseFrame",pos_x:340,pos_y:20,anchor_x:0,anchor_y:0,size_x:433,size_y:140,flip_x:true,asset:"Content/Images8x/UI/12_battle/banner_green_left.png"}],labels:[{name:"resultLabel",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:90,size_x:300,size_y:100,font_size:72,color:[255,255,255],fontType:"Content/Fonts/SFElectrotome.ttf",text:""}]},playerBlock:{images:[{name:"playerBGLeft",pos_x:0,pos_y:0,size_x:200,size_y:200,asset:"Content/Images8x/UI/12_battle/player_bluebox_right.png",flip_x:true,flip_y:true},{name:"playerBGMiddle",pos_x:200,pos_y:0,size_x:580,size_y:200,flip_y:true,asset:"Content/Images8x/UI/12_battle/player_bluebox_middle.png"},{name:"playerBGRight",pos_x:619.5,pos_y:0,size_x:20,size_y:200,asset:"Content/Images8x/UI/12_battle/player_bluebox_right.png",flip_x:true,visible:false}],labels:[{name:"level",pos_x:420,pos_y:110,size_x:200,size_y:60,font_size:24,horizontalAlign:"right",anchor_x:1,anchor_y:0.5,text:"",fontType:"Content/Fonts/SFElectrotome.ttf",colorType:"level"},{name:"name",pos_x:420,pos_y:60,size_x:400,size_y:60,font_size:34,horizontalAlign:"right",anchor_x:1,anchor_y:0.5,text:"",color:[170,224,255],fontType:"Content/Fonts/SFElectrotome.ttf",colorType:"playerName"}]},opponentBlock:{images:[{name:"opponentBGLeft",pos_x:0,pos_y:0,size_x:20,size_y:200,asset:"Content/Images8x/UI/12_battle/player_bluebox_right.png",visible:false},{name:"opponentBGMiddle",pos_x:0,pos_y:0,size_x:440,size_y:200,asset:"Content/Images8x/UI/12_battle/player_bluebox_middle.png"},{name:"opponentBGRight",pos_x:440,pos_y:0,size_x:200,size_y:200,asset:"Content/Images8x/UI/12_battle/player_bluebox_right.png"}],labels:[{name:"name",pos_x:220,pos_y:60,size_x:400,size_y:60,font_size:34,horizontalAlign:"left",anchor_x:0,anchor_y:0.5,text:"",color:[170,224,255],fontType:"Content/Fonts/SFElectrotome.ttf",colorType:"playerName"}]}},groups:[{name:"winLoseFrame",groupDefinition:"winLoseFrame",depth:4,pos_x:-640,pos_y:390},{name:"playerBlock",groupDefinition:"playerBlock",pos_x:640,pos_y:565,depth:3,info:{card_pos_x:448,card_pos_y:-20,card_w:168,card_h:224}},{name:"opponentBlock",groupDefinition:"opponentBlock",pos_x:-640,pos_y:195,depth:3,info:{card_pos_x:30,card_pos_y:-20,card_w:168,card_h:224}}]}}};__ngs._f6={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.RequestFriendsViewDefinition={images:[],labels:[],buttons:[],progressBar:[],lists:[{name:"friendList",width:640,height:670,itemHeight:150,itemWidth:640,pos_x:0,pos_y:200,action:"onListAction",clippingEnabled:false}],groupDefinitions:{backgroundImage:{images:[{name:"backgroundImage1",pos_x:320,pos_y:480,size_x:384,size_y:576,anchor_x:1,anchor_y:1,asset:"Content/Images8x/UI/BG/bg_store1.png"},{name:"backgroundImage2",pos_x:320,pos_y:480,size_x:384,size_y:576,anchor_x:0,anchor_y:1,flip_x:true,asset:"Content/Images8x/UI/BG/bg_store1.png"},{name:"backgroundImage3",pos_x:320,pos_y:480,size_x:384,size_y:576,anchor_x:1,anchor_y:0,flip_y:true,asset:"Content/Images8x/UI/BG/bg_store1.png"},{name:"backgroundImage4",pos_x:320,pos_y:480,size_x:384,size_y:576,anchor_x:0,anchor_y:0,flip_x:true,flip_y:true,asset:"Content/Images8x/UI/BG/bg_store1.png"}]},totalAlliesGroup:{images:[{name:"bg",pos_x:0,pos_y:0,anchor_x:0,anchor_y:0,size_x:190,size_y:72,asset:"Content/Images8x/UI/15_friends/panel_status_box.png"}],labels:[{name:"staticAlliesLabel",pos_x:105,pos_y:20,anchor_x:0.5,anchor_y:0.5,size_x:200,size_y:50,fontType:"Content/Fonts/SFElectrotome.ttf",text:"ui_allies_uc",font_size:24,horizontalAlign:"middle",verticalAlign:"middle"},{name:"alliesCount",pos_x:42,pos_y:45,anchor_x:0.5,anchor_y:0.5,size_x:100,size_y:50,text:"",font_size:35,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"right",verticalAlign:"middle"},{name:"alliesMaxCount",pos_x:155,pos_y:45,anchor_x:0.5,anchor_y:0.5,size_x:100,size_y:50,text:"",font_size:35,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle"}]}},groups:[{name:"totalAlliesGroup",groupDefinition:"totalAlliesGroup",pos_x:450,pos_y:175,anchor_x:0,anchor_y:0,depth:4},{name:"backgroundImage",groupDefinition:"backgroundImage",pos_x:0,pos_y:0,depth:-10}]}}};__ngs._f7={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.GreetsViewDefinition={images:[],labels:[],buttons:[],tfbuttons:[{name:"greetBackAllButton",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:250,size_x:550,size_y:80,text:"ui_cheerbackall_uc",font_size:32,fontType:"Content/Fonts/SFElectrotome.ttf",action:"onGreetAllAction",sound:["click_flat"],type:5}],progressBar:[],lists:[{name:"greetList",width:640,height:700,itemHeight:150,itemWidth:640,pos_x:0,pos_y:300,clippingEnabled:false}],groups:[{name:"backgroundImage",groupDefinition:"backgroundImage",pos_x:0,pos_y:0,size_x:768,size_y:1024,depth:-10}],groupDefinitions:{backgroundImage:{images:[{name:"backgroundImage1",pos_x:320,pos_y:480,size_x:384,size_y:512,anchor_x:1,anchor_y:1,asset:"Content/Images8x/UI/BG/bg_store1.png",depth:-10},{name:"backgroundImage2",pos_x:320,pos_y:480,size_x:384,size_y:512,anchor_x:0,anchor_y:1,flip_x:true,asset:"Content/Images8x/UI/BG/bg_store1.png",depth:-10},{name:"backgroundImage3",pos_x:320,pos_y:480,size_x:384,size_y:512,anchor_x:1,anchor_y:0,flip_y:true,asset:"Content/Images8x/UI/BG/bg_store1.png",depth:-10},{name:"backgroundImage4",pos_x:320,pos_y:480,size_x:384,size_y:512,anchor_x:0,anchor_y:0,flip_x:true,flip_y:true,asset:"Content/Images8x/UI/BG/bg_store1.png",depth:-10}]}}}}};__ngs._f8={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.FusionSelectionViewDefinition={staticBackgroundImages:{images:[{name:"backgroundImage",pos_x:320,pos_y:480,size_x:960,size_y:960,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/BG/bg_tutorial.jpg"}]},tfbuttons:[{name:"nextButton",pos_x:330,pos_y:900,size_x:300,size_y:80,visible:false,action:"onNext",sound:["click_flat"],text:"ui_next_uc",font_size:36,fontType:"Content/Fonts/SFElectrotome.ttf",type:5},{name:"prevButton",pos_x:10,pos_y:900,size_x:300,size_y:80,visible:false,action:"onPrev",sound:["click_flat"],text:"ui_prev_uc",font_size:36,fontType:"Content/Fonts/SFElectrotome.ttf",type:8}],labels:[{name:"title",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:140,size_x:600,size_y:120,font_size:36,color:[255,255,0],text:"ui_selectacard",fontType:"Content/Fonts/SFElectrotome.ttf",visible:false}],lists:[{name:"cardList",width:640,height:620,itemHeight:220,itemWidth:640,pos_x:0,pos_y:290}]}}};__ngs._f9={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.FullScreenCardDefinition={images:[{name:"detailsIcon",pos_x:-195,pos_y:438,anchor_x:0.5,anchor_y:0,size_x:50,size_y:50,depth:1001,asset:"Content/Images8x/UI/icon/icon_0_details.png",info:{offAsset:"Content/Images8x/UI/icon/icon_0_details_disabled.png"}},{name:"transformIcon",pos_x:45,pos_y:439,anchor_x:0.5,anchor_y:0,size_x:50,size_y:50,depth:1001,asset:"Content/Images8x/UI/icon/icon_0_transform.png",info:{offAsset:"Content/Images8x/UI/icon/icon_0_transform_disabled.png"}},{name:"dismissIcon",pos_x:240,pos_y:441,anchor_x:0.5,anchor_y:0,size_x:46,size_y:46,depth:1001,asset:"Content/Images8x/UI/icon/icon_0_dismiss.png"},{name:"background metal",pos_x:0,pos_y:0,size_x:640,size_y:840,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/card_frames/background_metal.jpg"},{name:"logo",pos_x:-238,pos_y:-418,size_x:118.5,size_y:65,anchor_x:0.5,anchor_y:0.5,asset:"",depth:7,visible:false,info:{asset1:"Content/Images8x/UI/card_frames/badge_autobot.png",asset2:"Content/Images8x/UI/card_frames/badge_decepticon.png"}},{name:"footerLineL",pos_x:-97,pos_y:356,size_x:4,size_y:84,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/card_frames/footer_line.png",depth:3},{name:"footerLineR",pos_x:97,pos_y:356,size_x:4,size_y:84,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/card_frames/footer_line.png",depth:3},{name:"cardLayer1",pos_x:0,pos_y:0,size_x:616.25,size_y:825,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/misc/1pxclear.png",info:{size_x1:616.25,size_y1:825,size_x2:739.5,size_y2:990,scale:1.3}},{name:"cardLayer2",pos_x:0,pos_y:0,size_x:739.5,size_y:990,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/misc/1pxclear.png",info:{}},{name:"cardLayer3",pos_x:0,pos_y:0,size_x:739.5,size_y:990,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/misc/1pxclear.png",info:{}},{name:"cardLayer4",pos_x:0,pos_y:0,size_x:739.5,size_y:990,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/misc/1pxclear.png",info:{}},{name:"cardLayer5",pos_x:0,pos_y:0,size_x:616.25,size_y:825,anchor_x:0.5,anchor_y:0.5,visible:false,asset:"Content/Images8x/misc/1pxclear.png",info:{size_x1:616.25,size_y1:825,size_x2:739.5,size_y2:990}},{name:"cardLayer6",pos_x:0,pos_y:0,size_x:739.5,size_y:990,anchor_x:0.5,anchor_y:0.5,visible:false,asset:"Content/Images8x/misc/1pxclear.png",info:{}},{name:"cardLayer7",pos_x:0,pos_y:0,size_x:739.5,size_y:990,anchor_x:0.5,anchor_y:0.5,visible:false,asset:"Content/Images8x/misc/1pxclear.png",info:{}},{name:"cardLayer8",pos_x:0,pos_y:0,size_x:739.5,size_y:990,anchor_x:0.5,anchor_y:0.5,visible:false,asset:"Content/Images8x/misc/1pxclear.png",info:{}},{name:"newBannerImage",pos_x:-200,pos_y:-300,size_x:250,size_y:250,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/card_frames/badge_new.png",depth:4,visible:false}],labels:[{name:"newLabel",anchor_x:0.5,anchor_y:0.5,pos_x:-200,pos_y:-300,size_x:180,size_y:180,font_size:70,color:[255,255,255],depth:5,alpha:1,horizontalAlign:"center",visible:false,fontType:"Content/Fonts/SFElectrotome.ttf",text:"ui_new_uc"},{name:"topSlidingText",pos_x:-250-320,pos_y:455-480,size_x:500,size_y:80,font_size:50,horizontalAlign:"center",anchor_x:0.5,anchor_y:0.5,text:"ui_transforming_uc",color:[250,250,255],depth:100,fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"bottomSlidingText",pos_x:890-320,pos_y:500-480,size_x:500,size_y:80,font_size:50,horizontalAlign:"center",anchor_x:0.5,anchor_y:0.5,text:"ui_bonus_uc",color:[250,250,255],depth:100,fontType:"Content/Fonts/SFElectrotome.ttf"},{name:"MELEE",anchor_x:0.5,anchor_y:0.5,pos_x:-195,pos_y:324,size_x:180,size_y:200,font_size:32,color:[240,240,255],depth:3,alpha:1,visible:false,dropShadowVisible:true,horizontalAlign:"middle",fontType:"Content/Fonts/TransformersMovie.ttf",text:"ui_attack_uc"},{name:"RANGE",anchor_x:0.5,anchor_y:0.5,pos_x:0,pos_y:324,size_x:180,size_y:200,font_size:32,color:[240,240,255],depth:3,alpha:1,visible:false,dropShadowVisible:true,horizontalAlign:"middle",fontType:"Content/Fonts/TransformersMovie.ttf",text:"ui_health_uc"},{name:"SPECIAL",anchor_x:0.5,anchor_y:0.5,pos_x:195,pos_y:324,size_x:180,size_y:200,font_size:32,color:[240,240,255],depth:3,alpha:1,visible:false,dropShadowVisible:true,horizontalAlign:"middle",fontType:"Content/Fonts/TransformersMovie.ttf",text:"ui_defense_uc"},{name:"stat2",anchor_x:0.5,anchor_y:0.5,pos_x:-195,pos_y:366,size_x:180,size_y:200,font_size:56,color:[240,240,255],depth:3,alpha:0.8,visible:false,dropShadowVisible:true,horizontalAlign:"middle",fontType:"Content/Fonts/TransformersMovie.ttf",text:""},{name:"stat1",anchor_x:0.5,anchor_y:0.5,pos_x:0,pos_y:366,size_x:180,size_y:200,font_size:56,color:[240,240,255],depth:3,alpha:0.8,visible:false,dropShadowVisible:true,horizontalAlign:"middle",fontType:"Content/Fonts/TransformersMovie.ttf",text:""},{name:"stat3",anchor_x:0.5,anchor_y:0.5,pos_x:195,pos_y:366,size_x:180,size_y:200,font_size:56,color:[240,240,255],depth:3,alpha:0.8,visible:false,dropShadowVisible:true,horizontalAlign:"middle",fontType:"Content/Fonts/TransformersMovie.ttf",text:""}],buttons:[{name:"flipCardButton",pos_x:-195,pos_y:500,anchor_x:0.5,anchor_y:1,size_x:230,size_y:70,font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",asset:"./Content/Images8x/UI/button/btn_card_blue.png",depth:1000,action:"onFlipCard",sound:["Mission_Fly_In_01"],info:{id:1,pos_x1:0,pos_x2:100},multiAsset:{onAsset:"./Content/Images8x/UI/button/btn_card_blue.png",offAsset:"./Content/Images8x/UI/button/btn_card_gray.png"}},{name:"transformButton",pos_x:45,pos_y:500,anchor_x:0.5,anchor_y:1,size_x:230,size_y:70,font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",asset:"./Content/Images8x/UI/button/btn_card_blue.png",depth:1000,action:"onTransform",sound:["TRANSFORM_SHORT_04"],info:{currentCardId:"",transformCardId:"",rarity:""},multiAsset:{onAsset:"./Content/Images8x/UI/button/btn_card_blue.png",offAsset:"./Content/Images8x/UI/button/btn_card_gray.png"},enabled:false},{name:"closeButton",pos_x:310,pos_y:500,anchor_x:1,anchor_y:1,size_x:140,size_y:70,font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",asset:"./Content/Images8x/UI/button/btn_card_blue2.png",depth:1000,action:"onDismiss",sound:["click_low"]},{name:"card",pos_x:0,pos_y:0,size_x:600,size_y:780,anchor_x:0.5,anchor_y:0.5,asset:"",action:"onTap",sound:[""],info:{}}],groupDefinitions:{prefix:{labels:[{name:"transformersPrefixName",anchor_x:0.5,anchor_y:0.5,pos_x:-72,pos_y:-446,size_x:120,size_y:50,font_size:20,color:[0,0,0],horizontalAlign:"middle",visible:false,depth:3,fontType:"Content/Fonts/TransformersMovie.ttf",text:""}],images:[{name:"eliteBannerImage",pos_x:-132,pos_y:-462,size_x:120,size_y:26,anchor_x:0,anchor_y:0,asset:"Content/Images8x/UI/card_frames/elite_badge.png",depth:2,visible:false}]},name:{labels:[{name:"transformersName",anchor_x:0.5,anchor_y:1,pos_x:190,pos_y:4,size_x:380,size_y:50,font_size:34,color:[240,240,255],horizontalAlign:"left",verticalAlign:"middle",depth:3,fontType:"Content/Fonts/SFElectrotome.ttf",text:""}]},nontransformFrame:{images:[{name:"footer",pos_x:0,pos_y:804,size_x:640,size_y:84,anchor_x:0,anchor_y:0,asset:""},{name:"frame",pos_x:0,pos_y:0,size_x:640,size_y:888,anchor_x:0,anchor_y:0,asset:"Content/Images8x/misc/1pxclear.png",info:{asset1:"Content/Images8x/UI/card_frames/1_common_frame.png",asset2:"Content/Images8x/UI/card_frames/2_uncommonframe.png",asset3:"Content/Images8x/UI/card_frames/3_rareframe.png",asset4:"Content/Images8x/UI/card_frames/4_Superrareframe.png"}}]},transformFrame:{images:[{name:"footer",pos_x:0,pos_y:804,size_x:640,size_y:84,anchor_x:0,anchor_y:0,asset:""},{name:"frame",pos_x:0,pos_y:0,size_x:640,size_y:888,anchor_x:0,anchor_y:0,asset:"Content/Images8x/misc/1pxclear.png",info:{asset1:"Content/Images8x/UI/card_frames/1_common_frame_tr.png",asset2:"Content/Images8x/UI/card_frames/2_uncommonframe_tr.png",asset3:"Content/Images8x/UI/card_frames/3_rareframe_tr.png",asset4:"Content/Images8x/UI/card_frames/4_Superrareframe_tr.png"}}]},blueBanner:{images:[{name:"yellowBannerLeft",pos_x:-133,pos_y:0,size_x:433,size_y:140,asset:"Content/Images8x/UI/12_battle/banner_blue_left.png"},{name:"yellowBannerMiddle",pos_x:300,pos_y:0,size_x:40,size_y:140,asset:"Content/Images8x/UI/12_battle/banner_blue_middle.png"},{name:"yellowBannerRight",pos_x:340,pos_y:0,size_x:433,size_y:140,asset:"Content/Images8x/UI/12_battle/banner_blue_left.png",flip_x:true}]},eventBonus:{images:[{name:"bonusBanner",pos_x:0,pos_y:0,size_x:240,size_y:90,asset:"Content/Images8x/UI/card_frames/badge_bonus_card_fullscreen.png"}],labels:[{name:"bonusAmount",anchor_x:0.5,anchor_y:0.5,pos_x:40,pos_y:40,size_x:60,size_y:60,font_size:50,color:[0,0,0],horizontalAlign:"center",verticalAlign:"middle",overflowMode:"shrink",depth:1,fontType:"Content/Fonts/SFElectrotome.ttf",text:""},{name:"bonusText",anchor_x:0,anchor_y:0.5,pos_x:80,pos_y:40,size_x:140,size_y:80,font_size:24,color:[0,0,0],horizontalAlign:"left",verticalAlign:"middle",depth:1,fontType:"Content/Fonts/SFElectrotome.ttf",text:"ui_eventattackbonus_uc"}]}},groups:[{name:"nontransformFrame",groupDefinition:"nontransformFrame",pos_x:-320,pos_y:-460,depth:3,visible:false},{name:"transformFrame",groupDefinition:"transformFrame",pos_x:-320,pos_y:-460,depth:3,visible:false},{name:"prefix",groupDefinition:"prefix",pos_x:0,pos_y:0,anchor_x:0,anchor_y:0,depth:7,visible:false},{name:"name",groupDefinition:"name",pos_x:0,pos_y:-400,anchor_x:0.5,anchor_y:0.5,depth:7,visible:false},{name:"blueBanner",groupDefinition:"blueBanner",pos_x:840-320,pos_y:405-480,depth:90},{name:"eventBonus",groupDefinition:"eventBonus",pos_x:-280,pos_y:210,depth:7,visible:false}]}}};__ngs._fa={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;function c(d){--d;d|=d>>1;d|=d>>2;d|=d>>4;d|=d>>8;d|=d>>16;return ++d}a.CardNode=GL2.Node.subclass({classname:"CardNode",maxRows:6,maxColumns:4,_cardSize:new Core.Size(640,879),initialize:function(e){this._setup();var d=__ngs.r_(__ngs._s).TFUtils;if(typeof(d)!="undefined"){d.addRenderTarget(this)}},_setup:function(){this._contentNode=new GL2.Node();this.gridpiece=[];while(this.gridpiece.push([])<this.maxRows){}for(var k=0;k<this.maxRows;k++){this.gridpiece[k]=new Array();for(var h=0;h<this.maxColumns;h++){this.gridpiece[k][h]=new GL2.Sprite();this.addChild(this.gridpiece[k][h])}}var g=(Core.Capabilities.getMaxTextureSize()||1024);var d=Math.min(this._cardSize.getWidth(),g);var o=Math.min(this._cardSize.getHeight(),g);var l=Math.min(c(d),g);var n=Math.min(c(o),g);var e=d/l;var m=o/n;this._renderTarget=new GL2.RenderTarget(l,n,true);this._renderTarget.setAutoUpdate(true);this._renderTarget.setClearEnable(true);this._renderTarget.setClearColor(0,0,0);this._renderTarget.setClearColorAlpha(0);this._renderTarget.addChild(this._contentNode);for(var k=0;k<this.maxRows;k++){for(var h=0;h<this.maxColumns;h++){this.gridpiece[k][h].setImage(this._renderTarget,[d/this.maxColumns,o/this.maxRows],[0.5,0.5],[1/this.maxColumns*h*e,1/this.maxRows*k*m,1/this.maxColumns*e,1/this.maxRows*m]);this.gridpiece[k][h].setPosition((h+0.5)*(d/this.maxColumns),(k+0.5)*(o/this.maxRows))}}},animateAssemble:function(d){var e=__ngs.r_(__ngs._fz);this.animate(e,d)},animateDisAssemble:function(d){var e=__ngs.r_(__ngs._g0);this.animate(e,d,true)},animate:function(m,e,d){var n=JSON.parse(JSON.stringify(m));for(var l in n.motions){var q=n.motions[l];for(var h in q.source){var p=q.source[h];if(p.x){if(d){p.x=p.x/2+20;if(p.scaleX){p.scaleX=p.scaleX*1.2}}else{p.x=p.x/2}}if(p.y){if(d){p.y=p.y/2+28;if(p.scaleY){p.scaleY=p.scaleY*1.2}}else{p.y=p.y/2}}}for(var g in q.Keyframe){var o=q.Keyframe[g];if(o.x){o.x=o.x/2}if(o.y){o.y=o.y/2}}}this._motionData=new GL2.MotionData();this._motionData.initFromData(n,GL2.MotionData.DataFormat.FlashClassicTween,function(r,t){if(r){console.log("CardNode:: MotionData initialize error :"+JSON.stringify(r))}else{motionController=new GL2.MotionController(t);for(var s=0;s<this.maxRows;s++){for(var k=0;k<this.maxColumns;k++){motionController.bind("gridpiece"+(s+1)+""+(k+1),this.gridpiece[s][k],GL2.MotionController.SyncFlags.All)}}motionController.syncFrames("gridpiece11",[-1],GL2.MotionController.SyncFlags.Position,function(u,v){if(e){e()}}.bind(this))}this._motionController=motionController;motionController.play(GL2.MotionController.PlayMode.Normal)}.bind(this))},addToRenderTarget:function(d){this._contentNode.addChild(d)},destroyAllChildren:function(e){var d=e._children;while(d&&d.length){this.destroyAllChildren(d[0]);d[0].destroy()}},destroy:function($super){this.destroyAllChildren(this._contentNode);this.destroyAllChildren(this._renderTarget);this.destroyAllChildren(this);var d=__ngs.r_(__ngs._19).ObjectRegistry;if(this._contentNode&&d.isObjectRegistered(this._contentNode)){this._contentNode.destroy()}this._contentNode=null;if(this._renderTarget&&d.isObjectRegistered(this._renderTarget)){this._renderTarget.destroy()}this._renderTarget=null;if(this._motionController){this._motionController.destroy()}if(this._motionData){this._motionData.destroy()}$super()}})}};__ngs._fb={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.DeckGridItemViewDefinition={images:[],groups:[],labels:[],buttons:[{name:"status1DetailButton",pos_x:30,pos_y:375,size_x:174,size_y:78,anchor:[0.5,0.5],action:"onComboSelected",sound:["click_flat"],asset:"Content/Images8x/UI/button/btn_sell.png",text:"ui_edit_uc",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",info:{id:1}},{name:"status2DetailButton",pos_x:230,pos_y:375,size_x:174,size_y:78,anchor:[0.5,0.5],action:"onComboSelected",asset:"Content/Images8x/UI/button/btn_sell.png",text:"ui_edit_uc",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",info:{id:2}},{name:"status3DetailButton",pos_x:430,pos_y:375,size_x:174,size_y:78,anchor:[0.5,0.5],action:"onComboSelected",asset:"Content/Images8x/UI/button/btn_sell.png",text:"ui_edit_uc",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",info:{id:3}}]}}};__ngs._fc={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._3x).Social;var d=__ngs.r_(__ngs._7p).View;a.RBBossListEntryView=d.subclass({classname:"RBBossListEntryView",initialize:function($super,g,e){this._controller=g;$super(g,"RBBossListEntryViewDefinition",function(){console.log("RBBossListEntryView > initialize > bossInfo="+JSON.stringify(e));this._bossInfo=e;if(this._bossInfo&&this._bossInfo.definitionId){this._bossDefinition=TFGameData.getBossDefinition(TFUserData.curEventId,this._bossInfo.definitionId)}this._eventInfo=TFGameData.getEventInfo(TFUserData.curEventId);this.entry.setVisible(true);this.updateTimeLeft()}.bind(this))},updateEntry:function(g){console.log("RBBossListEntryView > updateEntry > bossInfo="+JSON.stringify(this._bossInfo));if(!this._bossDefinition&&g){this._bossDefinition=TFGameData.getBossDefinition(TFUserData.curEventId,this._bossInfo.definitionId)}if(this._bossDefinition){var m=this.entry.contents.bossImage.info.asset_dir+"/"+TFUserData.curEventId+"/";if(this.entry.contents.bossImage.info[""+this._bossDefinition.deckPower[0].gearId]){m=m+this.entry.contents.bossImage.info[""+this._bossDefinition.deckPower[0].gearId]}else{m=m+"headshot_event_"+this._bossDefinition.deckPower[0].gearId+".jpg"}TFUtils.changeImageOnSprite(this.entry.contents.bossImage,m);this.entry.contents.bossImage.setVisible(true);this.entry.contents.bossName.setText(Localization.getString(this._bossDefinition.name).toUpperCase());this.entry.contents.bossBounty.setText(Localization.getString("ui_bountycolon_uc")+" "+this._bossDefinition.eventPoints+Localization.getString("ui_pt"))}if(this._bossInfo.hp===undefined){console.log("RBBossListEntryView > updateEntry > do not have full info");this.entry.contents.hpBar.setProgress(0);this.entry.contents.collectText.setVisible(true);var h=this.entry.entryTitle.info.color_defeated;this.entry.entryTitle.setColor(h[0]/255,h[1]/255,h[2]/255);this.entry.button.setText(Localization.getString("ui_collect_uc"));this.entry.entryTitle.setText(Localization.getString("ui_bossdefeated_uc"));l=this.entry.button.info.color_defeated;this.entry.button.setTextColor(l[0]/255,l[1]/255,l[2]/255);var e=this.entry.entryImageL.info.color_defeated;this.entry.entryImageL.setColor(e[0]/255,e[1]/255,e[2]/255);this.entry.entryImageM.setColor(e[0]/255,e[1]/255,e[2]/255);this.entry.entryImageR.setColor(e[0]/255,e[1]/255,e[2]/255);this.entry.button.setOnPressCallback(this._controller.onBossCollect.bind(this._controller,this._bossInfo))}else{console.log("RBBossListEntryView > updateEntry > full info");if(this._bossDefinition){var k=Math.floor(100*this._bossInfo.hp/this._bossDefinition.deckPower[0].hp);this.entry.contents.hpBar.setProgress(k)}this.entry.timeLeftButton._fullTimeLeft=false;if(TFUtils.onDev()){this.entry.timeLeftButton.setVisible(true)}var e;var l;this.entry.contents.bossName.setVisible(true);this.entry.contents.bossBounty.setVisible(true);this.entry.contents.hpBar.setVisible(true);this.entry.contents.helpText.setVisible(false);if(this._bossInfo.type==3){this.entry.button.setText(Localization.getString("ui_accept_uc"));this.entry.button.setOnPressCallback(this._controller.onBossAccept.bind(this._controller,this._bossInfo));this.entry.contents.bossName.setVisible(false);this.entry.contents.bossBounty.setVisible(false);this.entry.contents.hpBar.setVisible(false);this.entry.contents.helpText.setVisible(true);this.entry.contents.helpText.setText(sprintf(Localization.getString("ui_eventbosshelprequest_var_ml"),this._bossInfo.allyGamerTag));this.entry.contents.bossImage.setVisible(false);e=this.entry.entryImageL.info.color_request;l=this.entry.button.info.color_request}else{if(this._bossInfo.hp==0){this.entry.button.setText(Localization.getString("ui_collect_uc"));this.entry.button.setOnPressCallback(this._controller.onBossCollect.bind(this._controller,this._bossInfo));this.entry.contents.collectText.setVisible(true);e=this.entry.entryImageL.info.color_defeated;l=this.entry.button.info.color_defeated}else{if(this._escaped){this.entry.button.setText(Localization.getString("ui_dismiss_uc"));this.entry.button.setOnPressCallback(this._controller.onBossDismiss.bind(this._controller,this._bossInfo));this.entry.contents.hpBar.setVisible(false);this.entry.contents.bossBounty.setText(Localization.getString("ui_escaped_exclaim_uc"));e=this.entry.entryImageL.info.color_escaped;l=this.entry.button.info.color_inprogress}else{this.entry.button.setText(Localization.getString("ui_engage_uc"));this.entry.button.setOnPressCallback(this._controller.onBossEngage.bind(this._controller,this._bossInfo));e=this.entry.entryImageL.info.color_inprogress;l=this.entry.button.info.color_inprogress}}}this.entry.entryImageL.setColor(e[0]/255,e[1]/255,e[2]/255);this.entry.entryImageM.setColor(e[0]/255,e[1]/255,e[2]/255);this.entry.entryImageR.setColor(e[0]/255,e[1]/255,e[2]/255);this.entry.button.setTextColor(l[0]/255,l[1]/255,l[2]/255)}},updateTimeLeft:function(){var h=false;var n;var l;var e;if(!this._bossInfo.hp){n=Localization.getString("ui_bossdefeated_uc");h=true;l=this.entry.entryTitle.info.color_defeated;e="defeated"}else{if(this._bossInfo.type==3){e="helprequest";n=Localization.getString("ui_helprequest_uc");l=this.entry.entryTitle.info.color_request}else{if(this._bossInfo.hp==0){n=Localization.getString("ui_bossdefeated_uc");h=true;l=this.entry.entryTitle.info.color_defeated;e="defeated"}else{var m=Server.getServerTime();var g=new Date(this._eventInfo.expirationTime).valueOf();var k=(this._bossInfo.expirationTime<g)?this._bossInfo.expirationTime:g;if(m<k){var o=k-m;n=Localization.getString("ui_battleends_uc")+" ";if(this.entry.timeLeftButton._fullTimeLeft&&TFUtils.onDev()){n+=TFUtils.timeToHuman(o/1000,true)}else{n+=TFUtils.timeToHumanTwoElement(o/1000)}l=this.entry.entryTitle.info.color_inprogress;e="inprogress"}else{n=Localization.getString("ui_timesup_uc");this._escaped=true;h=true;l=this.entry.entryTitle.info.color_escaped;e="escaped";if(this._prevUpdateStatus!==e){this._controller.delayAutoUpdate()}}}}}this.entry.entryTitle.setText(n);this.entry.entryTitle.setColor(l[0]/255,l[1]/255,l[2]/255);if(this._prevUpdateStatus!==e){this.updateEntry();this._prevUpdateStatus=e}if(!this._destroying&&!h){setTimeout(this.updateTimeLeft.bind(this),1000)}},destroy:function($super){this._destroying=true;$super()}})}};__ngs._fd={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._7p).View;a.RBEventRankRewardListCellView=c.subclass({classname:"RBEventRankRewardListCellView",initialize:function($super,d,e){this._description=e;$super(d,"RBEventRankRewardListCellViewDefinition",function(){this.fillRewardDescription()}.bind(this))},fillRewardDescription:function(){this.description.setText(this._description)}})}};__ngs._fe={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._7p).View;a.RBReinforcementsCellView=c.subclass({classname:"RBReinforcementsCellView",initialize:function($super,d){$super(d,"RBReinforcementsCellViewDefinition",function(){}.bind(this))},destroy:function($super){$super()}})}};__ngs._ff={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.SingleFightAnimation=Core.Class.subclass({classname:"SingleFightAnimation",initialize:function(){},preload:function(){},getAnimations:function(){},destroy:function(){}})}};__ngs._fg={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.RBBossRewardsDefinition={images:[{name:"fancy_prompt_topleft",anchor_x:0,anchor_y:0,pos_x:-320,pos_y:-480,size_x:320,size_y:320,asset:"Content/Images8x/UI/Prompt/fancy_top.png"},{name:"fancy_prompt_topright",anchor_x:1,anchor_y:0,pos_x:320,pos_y:-480,size_x:320,size_y:320,flip_x:"true",asset:"Content/Images8x/UI/Prompt/fancy_top.png"},{name:"fancy_prompt_midleft",anchor_x:0.5,anchor_y:0.5,pos_x:-160,pos_y:0,size_x:320,size_y:320,asset:"Content/Images8x/UI/Prompt/fancy_mid_b.png"},{name:"fancy_prompt_midright",anchor_x:0.5,anchor_y:0.5,pos_x:160,pos_y:0,size_x:320,size_y:320,flip_x:"true",asset:"Content/Images8x/UI/Prompt/fancy_mid_b.png"},{name:"fancy_prompt_bottomleft",anchor_x:0,anchor_y:1,pos_x:-320,pos_y:480,size_x:320,size_y:320,asset:"Content/Images8x/UI/Prompt/fancy_bottom.png"},{name:"fancy_prompt_bottomright",anchor_x:1,anchor_y:1,pos_x:320,pos_y:480,size_x:320,size_y:320,flip_x:"true",asset:"Content/Images8x/UI/Prompt/fancy_bottom.png"}],labels:[{name:"bossDefeatedStatic1",text:"ui_bossDefeated1_uc",anchor_x:0.5,anchor_y:0,pos_x:0,pos_y:-350,size_x:440,size_y:100,font_size:42,fontType:"Content/Fonts/TransformersMovie.ttf",horizontalAlign:"center",verticalAlign:"top",color:[255,174,0]},{name:"bossDefeatedStatic2",text:"ui_bossDefeated2",anchor_x:0,anchor_y:0,pos_x:-220,pos_y:-280,size_x:440,size_y:130,font_size:24,fontType:"Content/Fonts/text.otf",horizontalAlign:"left",verticalAlign:"top",color:[240,240,255]}]}}};__ngs._fh={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._g1).NotificationViewDefinition;var d=__ngs.r_(__ngs._7p).View;a.Notification=d.subclass({classname:"Notification",initialize:function($super){$super(this,c);if(this.getNotificationSet()==TFGameData.NOTIFICATION_SETS.DEFAULT){TFUtils.changeImageOnSprite(this.icon,"Content/Images8x/UI/icon/icon_0_trophy.png")}else{TFUtils.changeImageOnSprite(this.icon,"Content/Images8x/UI/icon/icon_message.png")}this.messageLabel.setText(Localization.getString(this.getMessage()))},onTouchAction:function(){console.log("Notification > onTouchAction called")},isValid:function(){return false},equalsTo:function(e){return this===e},shouldShowTimestamp:function(){return false},getMessage:function(){return"Notification default message"},getTimestamp:function(){return"00:00"},isImportant:function(){return false},isClickable:function(){return true},$getNotifications:function(){return[]},$getNotificationSet:function(){return TFGameData.NOTIFICATION_SETS.DEFAULT}})}};__ngs._69={_c:null,_d:function(){var module={exports:{}};var exports=module.exports;this._c=module;var Class=function(){};exports.Class=Class;Class.subclass=(function(){function argumentNames(body){var names;if(Function.prototype.__arguments){names=body.__arguments();if(names){return names}}names=body.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return names.length==1&&!names[0]?[]:names}function overrideMethod(overrideBody,ancestorBody){var override;if(ancestorBody!==undefined){override=function(){var localThis=this;var $super=function(){return ancestorBody.apply(localThis,arguments)};Array.prototype.unshift.call(arguments,$super);return overrideBody.apply(this,arguments)}}else{override=function(){Array.prototype.unshift.call(arguments,undefined);return overrideBody.apply(this,arguments)}}override.valueOf=function(){return overrideBody.valueOf()};override.toString=function(){return overrideBody.toString()};return override}function TempClass(){}function emptyFunction(){}return function(){var properties=arguments[0];var conditions=arguments[1];var property;var classname=properties.classname||(this.classname?this.classname+"Subclass":"AnonymousClass");if(typeof $_ASSIGNENGINEBINDINGS!=="undefined"&&typeof properties._classId!=="undefined"){$_ASSIGNENGINEBINDINGS(properties,properties._classId)}var NewClass=eval("(function "+classname+"(){this.initialize.apply(this, arguments)})");for(property in this){if(!this.hasOwnProperty(property)){continue}NewClass[property]=this[property]}var ancestorPrototype=this.prototype;TempClass.prototype=ancestorPrototype;NewClass.prototype=new TempClass();NewClass.prototype.superclass=ancestorPrototype;NewClass.prototype.constructor=NewClass;var value;for(property in properties){if(!properties.hasOwnProperty(property)){continue}var getter=properties.__lookupGetter__(property);var setter=properties.__lookupSetter__(property);if(getter||setter){if(getter){value=getter;if(argumentNames(value)[0]=="$super"){value=overrideMethod(value,ancestorPrototype.__lookupGetter__(property))}NewClass.prototype.__defineGetter__(property,value)}if(setter){value=setter;if(argumentNames(value)[0]=="$super"){value=overrideMethod(value,ancestorPrototype.__lookupSetter__(property))}NewClass.prototype.__defineSetter__(property,value)}}else{value=properties[property];if(typeof value==="function"&&property[0]!="$"){if(argumentNames(value)[0]=="$super"){value=overrideMethod(value,ancestorPrototype[property])}else{if(property=="initialize"){var ancestorInitialize=ancestorPrototype.initialize;if(ancestorInitialize){var derivedInitialize=value;value=function(){ancestorInitialize.apply(this,arguments);derivedInitialize.apply(this,arguments)}}}else{if(property=="destroy"){var ancestorDestroy=ancestorPrototype.destroy;if(ancestorDestroy){var derivedDestroy=value;value=function(){derivedDestroy.apply(this,arguments);ancestorDestroy.apply(this,arguments)}}}}}NewClass.prototype[property]=value}else{if(property[0]=="$"){property=property.slice(1)}NewClass[property]=value;NewClass.prototype[property]=value}}}if(!NewClass.prototype.initialize){NewClass.prototype.initialize=emptyFunction}if(typeof properties.__load=="function"){properties.__load.call(NewClass)}if(typeof $_REGISTERCLASSTOENGINE!=="undefined"&&typeof properties._classId!=="undefined"){$_REGISTERCLASSTOENGINE(properties,properties._classId)}return NewClass}})();Class.singleton=function(arg0){var __load=arg0.__load;delete arg0.__load;var tempClass=this.subclass.call(this,arg0);var initialize=tempClass.prototype.initialize;tempClass.prototype.initialize=function(){};var instance=new tempClass();tempClass._instance=instance;if(__load){__load.call(tempClass)}var functions=[];var instantiate=function(real){for(var i in functions){var func=functions[i];delete instance[func]}instance.initialize=initialize;instance.initialize();instance.instantiate=function(){};var args=Array.prototype.slice.call(arguments,1);return real.apply(instance,args)};for(var i in instance){if(instance.__lookupGetter__(i)||instance.__lookupSetter__(i)){continue}var value=instance[i];if(typeof(value)=="function"){functions.push(i);instance[i]=instantiate.bind(this,value)}}instance.instantiate=instantiate.bind(this,function(){});return instance};Class.prototype.bind=function(func){var context=this;if(arguments.length<2){return function(){return func.apply(context,arguments)}}else{var args=Array.prototype.slice.call(arguments,1);return function(){var finalArgs=args.concat(Array.prototype.slice.call(arguments,0));return func.apply(context,finalArgs)}}};Class.prototype.toString=function(){return this.constructor.name}}};__ngs._6a={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;
/*!
 * Perl License (GPL or Artistic)
 *
 * $Id: base64.js,v 1.1 2009/03/01 22:38:45 dankogai Exp dankogai $
 *
 * History:
 *   dankogai's original: character-based
 *   drry's fix: split string to array then join
 *   new version: regexp-based
 */
var c=(function(){var h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var e=function(y){var x={};for(var w=0,v=y.length;w<v;w++){x[y.charAt(w)]=w}return x}(h);var r=String.fromCharCode;var m=function(v){var w=(v.charCodeAt(0)<<16)|(v.charCodeAt(1)<<8)|(v.charCodeAt(2));return h.charAt(w>>>18)+h.charAt((w>>>12)&63)+h.charAt((w>>>6)&63)+h.charAt(w&63)};var u=function(w){if(w.match(/[^\x00-\xFF]/)){throw"unsupported character found"}var x=0;while(w.length%3){w+="\x00";x++}var v=w.replace(/[\x00-\xFF]{3}/g,m);if(!x){return v}v=v.substr(0,v.length-x);while(x--){v+="="}return v};var k=typeof(btoa)!=="undefined"?btoa:u;var q=function(v){var w=(e[v.charAt(0)]<<18)|(e[v.charAt(1)]<<12)|(e[v.charAt(2)]<<6)|(e[v.charAt(3)]);return r(w>>16)+r((w>>8)&255)+r(w&255)};var d=function(w){w=w.replace(/[^A-Za-z0-9\+\/]/g,"");var x=w.length%4;while(w.length%4){w+="A"}var v=w.replace(/[A-Za-z0-9\+\/]{4}/g,q);if(x>=2){v=v.substring(0,v.length-[0,0,2,1][x])}return v};var n=typeof(atob)!=="undefined"?atob:d;var g=/[^\x00-\x7F]/g;var t=function(v){var w=v.charCodeAt(0);return w<2048?r(192|(w>>>6))+r(128|(w&63)):r(224|((w>>>12)&15))+r(128|((w>>>6)&63))+r(128|(w&63))};var p=function(v){return unescape(encodeURIComponent(v))};var l=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g;var o=function(v){var y=v.charCodeAt(0);var x=v.charCodeAt(1);if(y<224){return r(((y&31)<<6)|(x&63))}else{var w=v.charCodeAt(2);return r(((y&15)<<12)|((x&63)<<6)|(w&63))}};var s=function(v){return decodeURIComponent(escape(v))};return{fromBase64:d,toBase64:u,atob:n,btoa:k,utob:p,btou:s,encode:function(v){if(!v){return""}return k(p(new String(v)))},encodeBinary:function(v){if(!v){return""}return k(new String(v))},decode:function(v){if(!v){return""}if(v.length%4==1){throw new Error("Invalid Base64 string: "+v)}return s(n(v.replace(/[\-_]/g,function(w){return w=="-"?"+":"/"})))},decodeBinary:function(v){if(!v){return""}return n(v.replace(/[\-_]/g,function(w){return w=="-"?"+":"/"}))}}})();a.Base64=c}};__ngs._6b={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var a=__ngs.r_(__ngs._69).Class;b.MessageListener=a.subclass({classname:"MessageListener",initialize:function(){this._messageEmitters=[]},destroy:function(){var d=this._messageEmitters;while(d.length){d[0].removeListener(this)}},_startListeningEmitter:function(g){var e=this._messageEmitters;var d=e.indexOf(g);if(d!==-1){return false}e.push(g);return true},_stopListeningEmitter:function(g){var e=this._messageEmitters;var d=e.indexOf(g);if(d===-1){return false}e.splice(d,1);return true}})}};__ngs._6c={_c:null,_d:function(){var a={exports:{}};var e=a.exports;this._c=a;
/*!
 * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message
 * Digest Algorithm, as defined in RFC 1321.
 * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009
 * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet
 * Distributed under the BSD License
 * See http://pajhome.org.uk/crypt/md5 for more info.
 */
function g(u){return t(n(h(u),u.length*8))}function q(w){var z="0123456789abcdef";var v="";var u;for(var y=0;y<w.length;y++){u=w.charCodeAt(y);v+=z.charAt((u>>>4)&15)+z.charAt(u&15)}return v}function l(w){var v="";var z=-1;var u,A;while(++z<w.length){u=w.charCodeAt(z);A=z+1<w.length?w.charCodeAt(z+1):0;if(55296<=u&&u<=56319&&56320<=A&&A<=57343){u=65536+((u&1023)<<10)+(A&1023);z++}if(u<=127){v+=String.fromCharCode(u)}else{if(u<=2047){v+=String.fromCharCode(192|((u>>>6)&31),128|(u&63))}else{if(u<=65535){v+=String.fromCharCode(224|((u>>>12)&15),128|((u>>>6)&63),128|(u&63))}else{if(u<=2097151){v+=String.fromCharCode(240|((u>>>18)&7),128|((u>>>12)&63),128|((u>>>6)&63),128|(u&63))}}}}}return v}function h(v){var u=Array(v.length>>2);for(var w=0;w<u.length;w++){u[w]=0}for(w=0;w<v.length*8;w+=8){u[w>>5]|=(v.charCodeAt(w/8)&255)<<(w%32)}return u}function t(v){var u="";for(var w=0;w<v.length*32;w+=8){u+=String.fromCharCode((v[w>>5]>>>(w%32))&255)}return u}function n(F,A){F[A>>5]|=128<<((A)%32);F[(((A+64)>>>9)<<4)+14]=A;var E=1732584193;var D=-271733879;var C=-1732584194;var B=271733878;for(var w=0;w<F.length;w+=16){var z=E;var y=D;var v=C;var u=B;E=o(E,D,C,B,F[w+0],7,-680876936);B=o(B,E,D,C,F[w+1],12,-389564586);C=o(C,B,E,D,F[w+2],17,606105819);D=o(D,C,B,E,F[w+3],22,-1044525330);E=o(E,D,C,B,F[w+4],7,-176418897);B=o(B,E,D,C,F[w+5],12,1200080426);C=o(C,B,E,D,F[w+6],17,-1473231341);D=o(D,C,B,E,F[w+7],22,-45705983);E=o(E,D,C,B,F[w+8],7,1770035416);B=o(B,E,D,C,F[w+9],12,-1958414417);C=o(C,B,E,D,F[w+10],17,-42063);D=o(D,C,B,E,F[w+11],22,-1990404162);E=o(E,D,C,B,F[w+12],7,1804603682);B=o(B,E,D,C,F[w+13],12,-40341101);C=o(C,B,E,D,F[w+14],17,-1502002290);D=o(D,C,B,E,F[w+15],22,1236535329);E=b(E,D,C,B,F[w+1],5,-165796510);B=b(B,E,D,C,F[w+6],9,-1069501632);C=b(C,B,E,D,F[w+11],14,643717713);D=b(D,C,B,E,F[w+0],20,-373897302);E=b(E,D,C,B,F[w+5],5,-701558691);B=b(B,E,D,C,F[w+10],9,38016083);C=b(C,B,E,D,F[w+15],14,-660478335);D=b(D,C,B,E,F[w+4],20,-405537848);E=b(E,D,C,B,F[w+9],5,568446438);B=b(B,E,D,C,F[w+14],9,-1019803690);C=b(C,B,E,D,F[w+3],14,-187363961);D=b(D,C,B,E,F[w+8],20,1163531501);E=b(E,D,C,B,F[w+13],5,-1444681467);B=b(B,E,D,C,F[w+2],9,-51403784);C=b(C,B,E,D,F[w+7],14,1735328473);D=b(D,C,B,E,F[w+12],20,-1926607734);E=s(E,D,C,B,F[w+5],4,-378558);B=s(B,E,D,C,F[w+8],11,-2022574463);C=s(C,B,E,D,F[w+11],16,1839030562);D=s(D,C,B,E,F[w+14],23,-35309556);E=s(E,D,C,B,F[w+1],4,-1530992060);B=s(B,E,D,C,F[w+4],11,1272893353);C=s(C,B,E,D,F[w+7],16,-155497632);D=s(D,C,B,E,F[w+10],23,-1094730640);E=s(E,D,C,B,F[w+13],4,681279174);B=s(B,E,D,C,F[w+0],11,-358537222);C=s(C,B,E,D,F[w+3],16,-722521979);D=s(D,C,B,E,F[w+6],23,76029189);E=s(E,D,C,B,F[w+9],4,-640364487);B=s(B,E,D,C,F[w+12],11,-421815835);C=s(C,B,E,D,F[w+15],16,530742520);D=s(D,C,B,E,F[w+2],23,-995338651);E=k(E,D,C,B,F[w+0],6,-198630844);B=k(B,E,D,C,F[w+7],10,1126891415);C=k(C,B,E,D,F[w+14],15,-1416354905);D=k(D,C,B,E,F[w+5],21,-57434055);E=k(E,D,C,B,F[w+12],6,1700485571);B=k(B,E,D,C,F[w+3],10,-1894986606);C=k(C,B,E,D,F[w+10],15,-1051523);D=k(D,C,B,E,F[w+1],21,-2054922799);E=k(E,D,C,B,F[w+8],6,1873313359);B=k(B,E,D,C,F[w+15],10,-30611744);C=k(C,B,E,D,F[w+6],15,-1560198380);D=k(D,C,B,E,F[w+13],21,1309151649);E=k(E,D,C,B,F[w+4],6,-145523070);B=k(B,E,D,C,F[w+11],10,-1120210379);C=k(C,B,E,D,F[w+2],15,718787259);D=k(D,C,B,E,F[w+9],21,-343485551);E=m(E,z);D=m(D,y);C=m(C,v);B=m(B,u)}return Array(E,D,C,B)}function c(A,w,v,u,z,y){return m(r(m(m(w,A),m(u,y)),z),v)}function o(w,v,B,A,u,z,y){return c((v&B)|((~v)&A),w,v,u,z,y)}function b(w,v,B,A,u,z,y){return c((v&A)|(B&(~A)),w,v,u,z,y)}function s(w,v,B,A,u,z,y){return c(v^B^A,w,v,u,z,y)}function k(w,v,B,A,u,z,y){return c(B^(v|(~A)),w,v,u,z,y)}function m(u,z){var w=(u&65535)+(z&65535);var v=(u>>16)+(z>>16)+(w>>16);return(v<<16)|(w&65535)}function r(u,v){return(u<<v)|(u>>>(32-v))}var p=function(u){return q(g(l(u)))};function d(){return p("abc").toLowerCase()=="900150983cd24fb0d6963f7d28e17f72"}e.toMD5=p;e.testMD5=d}};__ngs._6d={_c:null,_d:function(){var c={exports:{}};var e=c.exports;this._c=c;var a=__ngs.r_(__ngs._69).Class;var l=__ngs.r_(__ngs._6e).NgPipesRemote;var d=__ngs.r_(__ngs._6l).hex_sha1;var h=Object.prototype.hasOwnProperty;var k=__ngs.r_(__ngs._7);var b=__ngs.r_(__ngs._17).KeyValueCache;var g=a.subclass({classname:"NgPipe",initialize:function(q){q=q||{};var n=k.Capabilities;this._socAnalytics=__ngs.r_(__ngs._3x).Social.Common.Analytics;this._meta=q.meta||{};this._queue=null;this._isSendQueued=false;this._sendDelay=q.sendDelay||1000;this.UTCoffset=q.offset||0;this.timeQueue=[];this._meta=q.meta||{};this._seqStart=q.seqStart||new Date().getTime();this._playerState=q.playerState||null;this._seqNumber=q.seqNumber||0;this._allowedLargeValue={msg:1024*5,err:1024*5,sid:64,udid:64,ifv:64,ifa:64,aid:64,tid:64,rid:64,UDID:64,IFV:64,IFA:64,AID:64,TID:64,RID:64};this._waitForUTC=n.meetsBinaryVersion&&n.meetsBinaryVersion("1.3.5.8");this._sendToRemote=true;this._globalKey="__PipeKey";var p=this;var m=function(r,t,s){var v=[];if(!r){try{v=JSON.parse(t)}catch(u){v=[]}}if(p._queue){v=p._queue.concat(v)}p._setQueue(v);if(p._queue.length>0){p._drainQueue()}};this._locListener=null;this._location=null;b.global(this._globalKey).getItem(this._globalKey,{},m);var o=[].concat(q.queue||[]);this._queue=o;this._sessionEnded=false;this._capAlphaNumStringKeys=["afam","asku","srcty","evcl","evid","pltfmsku","carr","srv"];this.sessionStartEvent();this._tagQa();this._hookLifetime();this._hookGeo();return true},close:function(){this._drainQueue();return true},enable:function(){this._sendToRemote=true},disable:function(){this._sendToRemote=false},setRemoteUrl:function(m){l.setUrl(m)},playerEvent:function(m,n,q,p){var o;n||(n="PLST");o={change:q,srcty:"GC",evid:m,evcl:n,plst:this._getPlayerStateDiff(p||this._playerState)};this._queueMessage(o);this._setCurrentPlayerState(p);return o},gameEvent:function(m,p,o){var n;n={evid:m,evpl:p,srcty:"GC",evcl:"GAME"};if(o){n.plst=this._getPlayerStateDiff(o||this._playerState)}this._queueMessage(n);return n},gameOpsEvent:function(m,o){var n;n={evid:m,evpl:o,srcty:"GC",evcl:"GAMEOPS"};this._queueMessage(n);return n},revenueEvent:function(m,o){var n;n={evcl:"REV",evid:m,srcty:"PC",evpl:o};this._queueMessage(n);return n},uiEvent:function(m,o){var n;n={evcl:"UI",srcty:"GC",evid:m,evpl:o};this._queueMessage(n);return n},funnelEvent:function(m,p,o){var n;n={evcl:"FUNNEL",srcty:"GC",evid:m,evpl:p};if(o){n.plst=this._getPlayerStateDiff(o||this._playerState);this._setCurrentPlayerState(o)}this._queueMessage(n);return n},plusEvent:function(n,p,m){var o;o={evcl:"PLUS",srcty:"PC",evid:n,evpl:p};this._queueMessage(o,m);return o},plusUIEvent:function(m,o){var n={evcl:"PLUSUI",srcty:"PC",evid:m,evpl:o};this._queueMessage(n);return n},navigationEvent:function(o,n,m){var p={};p.fro=o;p.to=n;if(m){p.btnid=m}return this.plusUIEvent("NAV",p)},_setUTC:function(o){this.UTCoffset=o?o-new Date().getTime():0;this.UTCready=true;var n=this.timeQueue.length;while(n--){var m=this.timeQueue[n];m.msg.evts=m.time+this.UTCoffset;this._queueMessage(m.msg,m.forThis)}},sessionEndEvent:function(){if(!this.UTCready){this.UTCready=true;var o=this.timeQueue.length;while(o--){var n=this.timeQueue[o];n.msg.evts=n.time;this._queueMessage(n.msg,n.forThis)}}if(!(this._sessionEnded)){var p;var m=k.Capabilities;p={evid:"SFN",evcl:"PLUS",srcty:"PC",hwty:m.getDeviceName(),hwrev:m.getPlatformHW(),osrev:""+m.getPlatformOS()+" "+m.getPlatformOSVersion(),lang:m.getLanguage()};p=this._queueMessage(p);this._sessionEnded=true;return p}return null},sessionStartEvent:function(){var n;var m=k.Capabilities;n={evid:"SST",evcl:"PLUS",srcty:"PC",hwty:m.getDeviceName(),hwrev:m.getPlatformHW(),osrev:""+m.getPlatformOS()+" "+m.getPlatformOSVersion(),lang:m.getLanguage()};n=this._queueMessage(n);this._drainQueue();return n},socialEvent:function(n,m,p){var o;o={evcl:"SOCL",srcty:"GC",frid:m,evid:n,evpl:p};return this._queueMessage(o)},initPlayerState:function(m){this._setCurrentPlayerState(m);return true},updatePlayerState:function(m){this._setCurrentPlayerState(m);return true},reportAdShow:function(m){return this.revenueEvent("ADSHOW",{adid:m})},reportAdClick:function(m){return this.revenueEvent("ADCLCK",{adid:m})},reportPromoShow:function(m){return this.revenueEvent("PROMOSHOW",{promoid:m})},reportPromoClick:function(m){return this.revenueEvent("PROMOCLCK",{promoid:m})},reportPromoRedeem:function(m){return this.revenueEvent("PROMOREDM",{promoid:m})},reportMoneyIAPIntent:function(r,w,p,n,v,o,u,m,t,s){var q={sku:r,itemamt:w,productid:n,dispmsg:m,dispname:v,mobabalance:o,amt:p,cur:t||"USD"};s?q.dynamicdata=s:"";return this.revenueEvent("IAPINTENT",q)},reportMoneyIAPCancel:function(r,w,p,n,v,o,u,m,t,s){var q={sku:r,itemamt:w,productid:n,dispmsg:m,dispname:v,mobabalance:o,amt:p,cur:t||"USD"};s?q.dynamicdata=s:"";return this.revenueEvent("IAPCANCEL",q)},reportMoneyIAPSuccess:function(s,x,q,m,o,w,p,v,n,u,t){var r={sku:s,itemamt:x,orderid:m,productid:o,dispmsg:n,dispname:w,mobabalance:p,amt:q,cur:u||"USD"};t?r.dynamicdata=t:"";return this.revenueEvent("IAPSUCCESS",r)},reportMoneyIAPFail:function(s,x,q,m,o,w,p,v,n,u,t){var r={sku:s,itemamt:x,productid:o,dispmsg:n,dispname:w,mobabalance:p,amt:q,cur:u||"USD"};m?r.orderid=m:"";t?r.dynamicdata=t:"";return this.revenueEvent("IAPFAIL",r)},reportMoneyIAPShow:function(){return this.revenueEvent("IAPSHOW",{})},reportMobaIAPShow:function(){return this.revenueEvent("MOBAIAPSHOW",{})},reportMobaIAPIntent:function(r,o,n,u,p,t,m,s){var q={sku:r,mobaprice:o,productid:n,dispmsg:m,dispname:u,mobabalance:p};s?q.dynamicdata=s:"";return this.revenueEvent("MOBAIAPINTENT",q)},reportMobaIAPCancel:function(r,o,n,u,p,t,m,s){var q={sku:r,mobaprice:o,productid:n,dispmsg:m,dispname:u,mobabalance:p};s?q.dynamicdata=s:"";return this.revenueEvent("MOBAIAPCANCEL",q)},reportMobaIAPSuccess:function(s,p,m,o,v,q,u,n,t){var r={sku:s,mobaprice:p,orderid:m,productid:o,dispmsg:n,dispname:v,mobabalance:q};t?r.dynamicdata=t:"";return this.revenueEvent("MOBAIAPSUCCESS",r)},reportMobaIAPFail:function(s,p,m,o,v,q,u,n,t){var r={sku:s,mobaprice:p,productid:o,dispmsg:n,dispname:v,mobabalance:q};m?r.orderid=m:"";t?r.dynamicdata=t:"";return this.revenueEvent("MOBAIAPFAIL",r)},reportFacebookScrape:function(n,o){var p;var m={};o?m.dynamicdata=o:"";p={evcl:"PLUS",srcty:"PC",extid:n,evid:"FBSCRAPE",evpl:m};this._queueMessage(p);return p},reportContactScrape:function(n){var o;var m={};n?m.dynamicdata=n:"";o={evcl:"PLUS",srcty:"PC",evid:"CONTACTSCRAPE",evpl:m};this._queueMessage(o);return o},reportWallPost:function(m,o){var n;n={evcl:"SOCL",srcty:"PC",frid:m,evid:"WALLPOST",evpl:o};this._queueMessage(n);return n},reportDownload:function(m,p,q){var o={};o.game=m;o.section=p;o.slot=q;var n;n={evcl:"PLUS",srcty:"PC",evid:"DOWNLOAD",evpl:o};this._queueMessage(n);return n},addTag:function(m){var o={};o.tag=m;var n;n={evcl:"PLUS",evid:"TAG",srcty:"PC",evpl:o};this._queueMessage(n);return n},getSeqNumber:function(){this._seqNumber+=1;return this._seqNumber},getQueueCount:function(){return this._queue.length},getSendDelay:function(){return this._sendDelay},setSendDelay:function(m){return(this._sendDelay=m)},setMeta:function(m,n){if(!n){n=m;return(this._meta=n)}else{return(this._meta[m]=n)}},getMeta:function(m){if(m){return this._meta[m]}else{return this._meta}},_queueMessage:function(q,p){if(!q){return false}var n=__ngs.r_(__ngs._7).Capabilities;if(this._waitForUTC&&!this.UTCready){this.timeQueue.unshift({msg:q,time:new Date().getTime(),forThis:p});return true}var o=this;this._setUnsetMetaKeys();q.evts=q.evts||this._getUTCTime();q=this._mergeMeta(q);q=this._addSeqDetails(q);q=this._addGeo(q);q=this._addGameSku(q,p);q=this._addGameRel(q);q=this._addCarrier(q);q=this._addService(q);q=this._addPlatformVersion(q);q=this._addUserId(q);q=this._addUserName(q);q.avalue=n._getDeviceIds();q=this._normalizeValues(q);var m=this._getQueue();m.push(q);this._setQueue(m);if(!this._isSendQueued){setTimeout(function(){o._isSendQueued=false;return o._drainQueue()},o._sendDelay)}return q},_tagQa:function(){var m=__ngs.r_(__ngs._d).FileSystem;var n=this;m.readFile("QA",{},function(o,p){if(!o){n.addTag("NGMOCOQA")}})},_hookGeo:function(){var q=__ngs.r_(__ngs._3x).Social;if(q.US){var p=__ngs.r_(__ngs._12).MessageListener;var o=__ngs.r_(__ngs._4).Device,n=this;var m=p.subclass({initialize:function(){o.LocationEmitter.addListener(this,this.onUpdate,false)},onUpdate:function(r){n._location=r;o.LocationEmitter.removeListener(this);n._locListener=null}});this._locListener=new m()}},_hookLifetime:function(){var n=this;var p=__ngs.r_(__ngs._12).MessageListener;var o=__ngs.r_(__ngs._4).Device;var m=p.subclass({initialize:function(){o.LifecycleEmitter.addListener(this,this.onLifecycleUpdate)},onLifecycleUpdate:function(q){switch(q){case o.LifecycleEmitter.Event.Suspend:case o.LifecycleEmitter.Event.Terminate:n.sessionEndEvent();n._drainQueue();break}}});if(!this._listener){this._listener=new m()}},_setSocialAnalytics:function(m){this._socAnalytics=m},_setUnsetMetaKeys:function(){var m=__ngs.r_(__ngs._7).Capabilities;if(!this.getMeta("sid")){var o=""+d(this._seqStart+m.getUniqueId());this.setMeta("sid",o)}if(!this.getMeta("pltfmsku")){var n=/android/;var p=m.getPlatformOS();if(p){p=p.toLowerCase();if(p.match(n)){p="android"}else{if("flash"===p){p="flash"}else{p="ios"}}this.setMeta("pltfmsku",p)}}if(!this.getMeta("apiver")){this.setMeta("apiver",5)}return true},_getPlayerStateDiff:function(r){var o,m,q,n,p;q={};if(!this._playerState){this._setCurrentPlayerState(r)}for(n in r){if(!h.call(r,n)){continue}p=r[n];if(typeof p==="number"){m=(p-this._playerState[n])||0;if(m<0){o="-"}if(m>=0){o="+"}q[n]=""+o+","+Math.abs(m)+","+(this._playerState[n])}else{if(typeof p==="string"){q[n]=p}}}return q},_setCurrentPlayerState:function(n){var m,o;this._playerState={};for(m in n){if(!h.call(n,m)){continue}o=n[m];this._playerState[m]=o}return true},_getUTCTime:function(){return new Date().getTime()+this.UTCoffset},_addGeo:function(n){var m;if(this._location&&(m=this._location.getPosition())&&!isNaN(m.getX())&&!isNaN(m.getY())){n.geo=""+m.getX()+","+m.getY()}return n},_addCarrier:function(o){var n=k.Capabilities;var m=n.getCarrier();if(m){o.carr=m}return o},_addService:function(n){var m=this._socAnalytics;n.srvc=m.getServiceId();return n},_addPlatformVersion:function(n){var m=this._socAnalytics;n.pver=m.getPlatformVersion();return n},_addSeqDetails:function(m){this._seqNum+=1;m.seq=this.getSeqNumber();m.seqdt=new Date().getTime()-this._seqStart;return m},_addUserId:function(o){var m=this._socAnalytics;var n=m.getUserId();if(n){o.uid=n}return o},_addUserName:function(o){var n=this._socAnalytics;var m=n.getUsername();if(m){o.plus=m}return o},_addGameSku:function(o,m){var n=m||(Capabilities.getConfigs()||{})["appId"];if(n){o.asku=n}return o},_addGameRel:function(n){var m=Capabilities.getAppReleaseVersion();if(m){n.arel=m}return n},_normalizeValues:function(o){var m,n;for(m in o){if(!h.call(o,m)){continue}n=o[m];if(typeof n==="string"){n=this._normalizeString(m,n)}else{if(typeof n==="object"){n=this._normalizeValues(n)}}o[m]=n}return o},_normalizeString:function(m,n){n=n.substring(0,this._allowedLargeValue[m]||32);if(-1!==this._capAlphaNumStringKeys.indexOf(m)){n=n.toUpperCase().replace(/[^\w]+/g,"").replace("_","")}return n},_mergeMeta:function(q){var p,r,n,m,o;m={};for(n in q){if(!h.call(q,n)){continue}o=q[n];m[n]=o}p=this._meta;for(n in p){if(!h.call(p,n)){continue}o=p[n];(r=m[n])?r:m[n]=o}return m},_drainQueue:function(){var m,n,o;o=this._getQueue();this._setQueue([]);n=this;if(!this._sendToRemote){return true}m=function(q,p){if(q===l.possibleStates.error){n._queueMany(p);n._storeQueue();n._sendDelay=n._sendDelay*2}else{if(q===l.possibleStates.finished){n._sendDelay=1000}}return true};l.clearQueue(o,m);o=null;return true},_exitingApp:function(){this.sessionEndEvent();this._drainQueue()},_queueMany:function(m){var p,n,q,o=this;this._setQueue((this._getQueue()||[]).concat(m));if(this._isSendQueued){this._isSendQueued=true;setTimeout(function(){o._isSendQueued=false;return o._drainQueue()},o._sendDelay)}return true},_setQueue:function(m){this._queue=m;return true},_storeQueue:function(){b.global(this._globalKey).setItem(this._globalKey,JSON.stringify(this._queue),{})},_getQueue:function(){return this._queue}});e.NgPipe=g}};__ngs._6e={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var c=__ngs.r_(__ngs._h).Network;var a=0;var e={listeners:[],debug:false,possibleStates:{unknown:{ngPipesRemote:"unknown"},finished:{ngPipesRemote:"finished"},error:{ngPipesRemote:"error"}}};e.addListener=function(g){this.listeners.push(g);return true};e.clearQueue=function(h,o){if(!h){return false}if(!this.getUrl()){if(o){o(e.possibleStates.finished,[])}return false}var k=h.slice(0,h.length);var m,g,n;while(k&&k.length>0){var l=k.slice(0,10);k=k.slice(10);n="";for(m=0,g=l.length;m<g;m++){n+=JSON.stringify(l[m]);if(m+1<g){n+="\r\n"}}if(n){e._makeRequest(n,l,o)}}};e._makeRequest=function(m,n,o){var l=new c.XHR(),k=this.getUrl();if(this.debug){e._debugOutput(m)}a++;var h="pipe"+a;var g=__ngs.r_(__ngs._18).LifecycleEmitter;g.requestEngineKeepAlive(h);l.onreadystatechange=function(){var p=null;try{if(this.readyState===4){g.cancelEngineKeepAlive(h);p=e._handleResponse(l.responseText)}else{p=e.possibleStates.unknown}}catch(q){p=e.possibleStates.error;NgLogException(q)}if(o){o(p,n)}e._notifyListeners(p);return true};l.open("POST",k,true);l.setRequestHeader("X-Ngpipes-Api","1.0");l.setRequestHeader("Content-Type","application/json+batch");l.setRequestHeader("If-None-Match","0");l.send(m);e._notifyListeners("started");return true};e.setUrl=function(g){this.url=g};e.getUrl=function(){if(this.url){return this.url}var g=__ngs.r_(__ngs._7).Capabilities;var h=null;if(g){h=(g.getConfigs()||{})["analyticsServer"]||null;if(h){h="https://"+h+"/pipes/r.2/bulk_record_stats";if(this.debug){NgLogD("Pipes URL => "+h)}}}return h};e._handleResponse=function(h){var l,g;g=e.possibleStates.unknown;if(h&&h.length>0){try{l=JSON.parse(h)}catch(k){l=null}if(l&&(l.success!==null&&l.success!==undefined)&&l.success){if(this.debug){NgLogD("[NgPipesRemote] Got Success")}g=e.possibleStates.finished}else{g=e.possibleStates.error}}else{if(this.debug){NgLogD("[NgPipesRemote] ERROR posting")}g=e.possibleStates.error}return g};e._debugOutput=function(n){var l,g,h,m,k;k=n.split("\r\n");for(l=0,g=k.length;l<g;l++){m=k[l];NgLogD("[NgPipesRemote] Message sent: "+m)}return false};e._notifyListeners=function(n){var m,h,k,g;for(m=0,h=(k=this.listeners).length;m<h;m++){g=k[m];g(n)}return true};b.NgPipesRemote=e}};__ngs._6f={_c:null,_d:function(){var e={exports:{}};var c=e.exports;this._c=e;var b=__ngs.r_(__ngs._69).Class;var a=__ngs.r_(__ngs._cy).Pool;var g;var d=function(h,l,k){if(h!==undefined){if(l!==undefined){if(k!==undefined){this._red=h;this._green=l;this._blue=k}else{throw new Error("Wrong number of arguments for a Color")}}else{if(h instanceof g){this._red=h._red;this._green=h._green;this._blue=h._blue}else{d.apply(this,h)}}}else{this._red=1;this._green=1;this._blue=1}};g=c.Color=b.subclass({classname:"Color",initialize:d,setAll:d,getRed:function(){return this._red},getGreen:function(){return this._green},getBlue:function(){return this._blue},setRed:function(h){this._red=h;return this},setGreen:function(h){this._green=h;return this},setBlue:function(h){this._blue=h;return this}});c.Color.pool=a.create(c.Color,500)}};__ngs._6g={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var b=__ngs.r_(__ngs._69).Class;var a=__ngs.r_(__ngs._cy).Pool;c.Vector=b.subclass({classname:"Vector",initialize:function(){switch(arguments.length){case 0:this._x=0;this._y=0;break;case 1:var e=arguments[0];if(e===undefined){this._x=0;this._y=0}else{if(!e.hasOwnProperty("length")){this._x=e.getX();this._y=e.getY()}else{switch(e.length){case 0:this._x=0;this._y=0;break;case 1:e=e[0];this._x=e.getX();this._y=e.getY();break;case 2:this._x=e[0];this._y=e[1];break;default:throw new Error("Wrong number of arguments for a Vector")}}}break;case 2:this._x=arguments[0];this._y=arguments[1];break;default:throw new Error("Wrong number of arguments for a Vector")}},setAll:function(){this.constructor.apply(this,arguments);return this},clone:function(){return new this.constructor(this)},getX:function(){return this._x},setX:function(e){this._x=e;return this},getY:function(){return this._y},setY:function(e){this._y=e;return this}});c.Vector.pool=a.create(c.Vector,500)}};__ngs._6h={_c:null,_d:function(){var e={exports:{}};var c=e.exports;this._c=e;var b=__ngs.r_(__ngs._69).Class;var a=__ngs.r_(__ngs._cy).Pool;var g;var d=function(k,h){if(k!==undefined){if(h!==undefined){this._x=k;this._y=h}else{if(typeof k==="object"&&k.getX&&k.getY){this._x=k.getX();this._y=k.getY()}else{d.apply(this,k)}}}else{this._x=0;this._y=0}return this};g=c.Point=b.subclass({classname:"Point",initialize:d,setAll:d,clone:function(){return new this.constructor(this)},getX:function(){return this._x},setX:function(h){this._x=h;return this},getY:function(){return this._y},setY:function(h){this._y=h;return this}});c.Point.pool=a.create(c.Point,500)}};__ngs._6i={_c:null,_d:function(){var g={exports:{}};var d=g.exports;this._c=g;var c=__ngs.r_(__ngs._69).Class;var b=__ngs.r_(__ngs._cy).Pool;var a;var e=function(k,h){if(k!==undefined){if(h!==undefined){this._width=k;this._height=h}else{if(k instanceof a){this._width=k.getWidth();this._height=k.getHeight()}else{e.apply(this,k)}}}else{this._width=0;this._height=0}return this};a=d.Size=c.subclass({classname:"Size",initialize:e,setAll:e,clone:function(){return new this.constructor(this)},getWidth:function(){return this._width},setWidth:function(h){this._width=h;return this},getHeight:function(){return this._height},setHeight:function(h){this._height=h;return this}});d.Size.pool=b.create(d.Size,500)}};__ngs._6j={_c:null,_d:function(){var h={exports:{}};var d=h.exports;this._c=h;var c=__ngs.r_(__ngs._69).Class;var k=__ngs.r_(__ngs._6h).Point;var b=__ngs.r_(__ngs._6i).Size;var a=__ngs.r_(__ngs._cy).Pool;var g;var e=function(n,m,l,o){this._origin=this._origin||k.pool.get();this._size=this._size||b.pool.get();if(n!==undefined){if(m!==undefined){if(l!==undefined){if(o!==undefined){this._origin._x=n;this._origin._y=m;this._size._width=l;this._size._height=o}else{throw new Error("Wrong number of arguments for a Rect")}}else{this._origin.setAll(n);this._size.setAll(m)}}else{if(n instanceof g){this._origin._x=n._origin._x;this._origin._y=n._origin._y;this._size._width=n._size._width;this._size._height=n._size._height}else{e.apply(this,n)}}}else{this._origin._x=0;this._origin._y=0;this._size._width=0;this._size._height=0}return this};g=d.Rect=c.subclass({classname:"Rect",initialize:e,setAll:e,clone:function(){return new this.constructor(this)},getOrigin:function(){return this._origin},setOrigin:function(l){this._origin.setAll(l);return this},setOriginCentered:function(l){l=k.pool.get(l);this._origin.setX(l.getX()-this._size.getWidth()/2);this._origin.setY(l.getY()-this._size.getHeight()/2);k.pool.put(l);return this},getSize:function(){return this._size},setSize:function(l){this._size.setAll(l);return this},setSizeCentered:function(m){var l=this._size.getWidth();var n=this._size.getHeight();this._size.setAll(m);this._origin.setX(this._origin.getX()+l/2-this._size.getWidth()/2);this._origin.setY(this._origin.getY()+n/2-this._size.getHeight()/2);return this},getMinX:function(){return this._origin.getX()},getMidX:function(){return this._origin.getX()+this._size.getWidth()/2},getMaxX:function(){return this._origin.getX()+this._size.getWidth()},getMinY:function(){return this._origin.getY()},getMidY:function(){return this._origin.getY()+this._size.getHeight()/2},getMaxY:function(){return this._origin.getY()+this._size.getHeight()}});d.Rect.pool=a.create(d.Rect,100)}};__ngs._6k={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var e=__ngs.r_(__ngs._6).Proc;var a=__ngs.r_(__ngs._69).Class;var c=__ngs.r_(__ngs._6b).MessageListener;b.MessageEmitter=a.subclass({classname:"MessageEmitter",initialize:function(){this._messageListenersCount=0;this._messageListenerRecords=[];this._messageDeferredWork=[];this._messageShouldDefer=false},destroy:function($super){if(this._messageShouldDefer){this._messageDeferredWork.push(this._destroyActual.bind(this,$super))}else{this._destroyActual($super)}},_destroyActual:function(h){var g=this._messageListenerRecords;while(g.length){this.removeListener(g[0].l)}if(h){h()}},getListenerCount:function(){return this._messageListenersCount},addListener:function(k,h,g){if(!k instanceof c){throw new Error("MessageEmitter.addListener: listener must be instances of MessageListener")}if(!k._startListeningEmitter(this)){throw new Error("MessageEmitter.addListener: listener is already listening")}if(!g){g=0}this._messageListenersCount++;if(this._messageShouldDefer){this._messageDeferredWork.push(this._addListenerActual.bind(this,k,h,g))}else{this._addListenerActual(k,h,g)}},_addListenerActual:function(n,m,l){if((typeof l)=="undefined"){l=0}var h=this._messageListenerRecords;var g=h.length;for(var k=0;k<g;++k){if(h[k].p<=l){break}}h.splice(k,0,{l:n,f:m,p:l})},removeListener:function(m){if(!m._stopListeningEmitter(this)){return false}this._messageListenersCount--;if(this._messageShouldDefer){var k=this._messageListenerRecords;var g=k.length;for(var l=0;l<g;++l){var h=k[l];if(h.l==m){h.f=null;break}}this._messageDeferredWork.push(this._removeListenerActual.bind(this,m))}else{this._removeListenerActual(m)}return true},_removeListenerActual:function(m){var k=this._messageListenerRecords;var g=k.length;for(var l=0;l<g;++l){var h=k[l];if(h.l==m){k.splice(l,1);break}}},emit:function(h){var g=false;if(this._messageShouldDefer){this._messageDeferredWork.push(this._emitActual.bind(this,arguments,false))}else{g=this._emitActual(arguments,true)}return g},_emitActual:function(o,m){this._messageShouldDefer=true;var k=this._messageListenerRecords;var g=k.length;var n=false;for(var l=0;l<g;++l){var h=k[l];if(!h.f){continue}if(h.f.apply(h.l,o)){n=true}}this._messageShouldDefer=false;if(this._messageDeferredWork.length&&m){this._executeDeferred()}return n},chain:function(g){if(this._messageShouldDefer){this._messageDeferredWork.push(this._chainActual.bind(this,arguments,false));return undefined}else{return this._chainActual(arguments,true)}},_chainActual:function(o,n){var h=false;this._messageShouldDefer=true;var l=this._messageListenerRecords;var g=l.length;for(var m=0;m<g;++m){var k=l[m];if(!k.f){continue}if(k.f.apply(k.l,o)){h=true;break}}this._messageShouldDefer=false;if(this._messageDeferredWork.length&&n){this._executeDeferred()}return h},_executeDeferred:function(){var g=this._messageDeferredWork;for(var h=0;h<g.length;++h){g[h]()}this._messageDeferredWork=[]}})}};__ngs._6l={_c:null,_d:function(){var b={exports:{}};var y=b.exports;this._c=b;
/*!
	Version 2.1a Copyright Paul Johnston 2000 - 2002.
	Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet.
	Distributed under the BSD License.
	See http://pajhome.org.uk/crypt/md5 for details.
*/
var s=0;var x="";var d=8;function t(z,C){var B=(z&65535)+(C&65535);var A=(z>>16)+(C>>16)+(B>>16);return(A<<16)|(B&65535)}function r(z,A){return(z<<A)|(z>>>(32-A))}function v(A,z,C,B){if(A<20){return(z&C)|((~z)&B)}if(A<40){return z^C^B}if(A<60){return(z&C)|(z&B)|(C&B)}return z^C^B}function o(z){return(z<20)?1518500249:(z<40)?1859775393:(z<60)?-1894007588:-899497514}function g(M,G){M[G>>5]|=128<<(24-G%32);M[((G+64>>9)<<4)+15]=G;var N=Array(80);var L=1732584193;var K=-271733879;var J=-1732584194;var I=271733878;var H=-1009589776;for(var D=0;D<M.length;D+=16){var F=L;var E=K;var C=J;var B=I;var z=H;for(var A=0;A<80;A++){if(A<16){N[A]=M[D+A]}else{N[A]=r(N[A-3]^N[A-8]^N[A-14]^N[A-16],1)}var O=t(t(r(L,5),v(A,K,J,I)),t(t(H,N[A]),o(A)));H=I;I=J;J=r(K,30);K=L;L=O}L=t(L,F);K=t(K,E);J=t(J,C);I=t(I,B);H=t(H,z)}return Array(L,K,J,I,H)}function w(C){var B=[];var z=(1<<d)-1;for(var A=0;A<C.length*d;A+=d){B[A>>5]|=(C.charCodeAt(A/d)&z)<<(32-d-A%32)}return B}function k(B,E){var D=w(B);if(D.length>16){D=g(D,B.length*d)}var z=Array(16),C=Array(16);for(var A=0;A<16;A++){z[A]=D[A]^909522486;C[A]=D[A]^1549556828}var F=g(z.concat(w(E)),512+E.length*d);return g(C.concat(F),512+160)}function u(B){var C="";var z=(1<<d)-1;for(var A=0;A<B.length*32;A+=d){C+=String.fromCharCode((B[A>>5]>>>(32-d-A%32))&z)}return C}function m(B){var A=s?"0123456789ABCDEF":"0123456789abcdef";var C="";for(var z=0;z<B.length*4;z++){C+=A.charAt((B[z>>2]>>((3-z%4)*8+4))&15)+A.charAt((B[z>>2]>>((3-z%4)*8))&15)}return C}function q(C){var B="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var E="";for(var A=0;A<C.length*4;A+=3){var D=(((C[A>>2]>>8*(3-A%4))&255)<<16)|(((C[A+1>>2]>>8*(3-(A+1)%4))&255)<<8)|((C[A+2>>2]>>8*(3-(A+2)%4))&255);for(var z=0;z<4;z++){if(A*8+z*6>C.length*32){E+=x}else{E+=B.charAt((D>>6*(3-z))&63)}}}return E}function n(z){return m(g(w(z),z.length*d))}function l(z){return q(g(w(z),z.length*d))}function e(z){return u(g(w(z),z.length*d))}function p(z,A){return u(k(z,A))}function c(z,A){return m(k(z,A))}function h(z,A,B){if((typeof B!="undefined")&&B){x=B}return q(k(z,A))}function a(){return n("abc")=="a9993e364706816aba3e25717850c26c9cd0d89d"}if((typeof y!="undefined")&&y){y.b64_hmac_sha1=h;y.hex_sha1=n;y.b64_sha1=l}}};__ngs._6m={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var a=__ngs.r_(__ngs._69).Class;var d=a.subclass({classname:"Bytes",initialize:function(e){var k,h,g,m,l;this._blockSize=4*1024;this._hasTypedArray=(typeof Uint8Array!=="undefined");this._offset=0;this._length=0;this.__defineGetter__("length",function(){if(this._hasTypedArray){return this._length}return this._bytes.length});if(this._hasTypedArray){this._bytes=[];if(typeof(e)==="object"){if(e instanceof d){this._bytes.length=e._bytes._length;this._length=e.length;for(k=0;k<_bytes.length;++k){this._bytes.push(new Uint8Array(e._bytes[k]))}}else{if(e instanceof Array){this._length=e.length;g=0;for(k=0;k<this._getRequiredNumBlocks(e.length);++k){m=new Uint8Array(this._blockSize);l=this._length-g;if(l>this._blockSize){l=this._blockSize}for(h=0;h<l;++h){m[h]=e[g+h]}g+=l;this._bytes.push(m)}}else{this._bytes.push(new Uint8Array(this._blockSize))}}}else{if(typeof(e)==="string"){this._length=e.length;g=0;for(k=0;k<this._getRequiredNumBlocks(e.length);++k){m=new Uint8Array(this._blockSize);l=this._length-g;if(l>this._blockSize){l=this._blockSize}for(h=0;h<l;++h){m[h]=e.charCodeAt(g+h)}g+=l;this._bytes.push(m)}}else{this._bytes.push(new Uint8Array(this._blockSize))}}}else{NgLogD("Core.Buffer: typed-array is not available");if(typeof(e)=="object"){if(e instanceof d){this._bytes=e._bytes}else{if(e instanceof Array){this._bytes=String.fromCharCode.apply(null,e)}else{this._bytes=""}}}else{if(typeof(e)=="string"){this._bytes=e}else{this._bytes=""}}}},set:function(e,h){if(this._hasTypedArray){var g=this._getLocation(e);this._bytes[g.block][g.offset]=h;return}throw"set() method is not supported"},get:function(e){if(this._hasTypedArray){var g=this._getLocation(e);return this._bytes[g.block][g.offset]}return this._bytes.charCodeAt(e)},append:function(g){var e;if(!this._isBinary(g)){NgLogE("cannot append non-binary data");return}if(this._hasTypedArray){var k=this._getLocation(this._length);var l;var h=k.offset;if(k.block===this._bytes.length){l=new Uint8Array(this._blockSize);this._bytes.push(l);if(h!==0){NgLogE("invalid offset");h=0}}else{l=this._bytes[k.block]}for(e=0;e<g.length;++e){if(h===this._blockSize){l=new Uint8Array(this._blockSize);this._bytes.push(l);h=0}if(typeof g==="string"){l[h]=g.charCodeAt(e)}else{if(g instanceof d){l[h]=g.get(e)}else{l[h]=g[e]}}this._length++;h++}return}if(typeof g==="string"){this._bytes+=g}else{if(g instanceof d){this._bytes+=g.toString()}else{this._bytes+=String.fromCharCode.apply(null,g)}}},remove:function(g,k){var e;var h;var l=(k==="string")?"":((k==="array")?[]:undefined);if(this._hasTypedArray){while(g>0){var m=g;h=[];if(m>=this._blockSize-this._offset){m=this._blockSize-this._offset}if(l!==undefined){for(e=0;e<m;++e){h.push(this._bytes[0][this._offset+e])}if(typeof l==="string"){l=l.concat(String.fromCharCode.apply(null,h))}else{l=l.concat(h)}}this._offset+=m;if(this._offset===this._blockSize){this._offset=0;if(this._bytes.length>1){this._bytes.shift()}}this._length-=m;g-=m}}else{if(l!==undefined){h=this._bytes.slice(0,g);this._bytes=this._bytes.slice(g);if(typeof l==="string"){l=h}else{l=[];for(e=0;e<h.length;++e){l.push(h.charCodeAt(e))}}}}return l},toString:function(){if(this._hasTypedArray){var e=[];var h=0;var g=this._offset;for(i=0;i<this._length;++i){e.push(this._bytes[h][g]);g++;if(g===this._blockSize){g=0;h++}}return String.fromCharCode.apply(null,e)}return this._bytes},forEach:function(e,h){var m;var o;if(this._hasTypedArray){var n=0;var k=this._offset;for(m=0;m<this._length;++m){o=e.call(h,this._bytes[n][k],m,this);if(typeof o==="number"){this._bytes[n][k]=o}else{if(o===null){break}}k++;if(k===this._blockSize){k=0;n++}}}else{var g=[];var l=false;console.log("forEach: this._length="+this._length);for(m=0;m<this._bytes.length;++m){o=e.call(h,this._bytes.charCodeAt(m),m,this);if(typeof o==="number"){l=true;g.push(o)}else{if(o===null){break}g.push(this._bytes.charCodeAt(m))}}if(l){this._bytes=String.fromCharCode.apply(null,g)}}},slice:function(m,g){var l;var e;var h=[];if(this._hasTypedArray){var k=g-m;var o=this._getLocation(m);while(k>0){var n=this._bytes[o.block];while(k>0){h.push(n[o.offset]);o.offset++;k--;if(o.offset===ths._blockSize){o.offset=0;o.block++;n=this._bytes[o.block]}}}e=new d(h)}else{e=new d(this._bytes.slice(m,g))}return e},clear:function(){if(this._hasTypedArray){this._length=0;this._offset=0;this._bytes=[new Uint8Array(this._blockSize)]}else{this._bytes=""}},_isBinary:function(g){var e,h;if(typeof g==="string"){for(e=0;e<g.length;++e){h=g.charCodeAt(e);if(h<0&&h>=256){return false}}}else{if(!(g instanceof d)){for(e=0;e<g.length;++e){h=g[e];if(h<0&&h>=256){return false}}}}return true},_getRequiredNumBlocks:function(g){var e=Math.floor(g/this._blockSize);if(e===0||g%this._blockSize>0){e++}return e},_getLocation:function(e){var g={};var h=this._offset+e;g.block=Math.floor(h/this._blockSize);g.offset=(g.block>0)?h%(this._blockSize*(g.block)):h;return g}});b.Buffer=a.subclass({classname:"Buffer",initialize:function(){this._log2=function(e){return Math.floor(Math.log(e)/Math.LN2)};this._toIEEE754=function(m,e,h){var l;var g;switch(h){case 32:l=8;g=23;break;case 64:l=11;g=52;break;default:throw"Invalid bit width"}var k=Math.pow(2,l-1)-1;e.neg=(m<0)?1:0;e.expo=0;e.sigd=0;m=Math.abs(m);if(isNaN(m)){e.neg=0;e.expo=0;e.sigd=1}else{if(!isFinite(m)){e.expo=Math.pow(2,l)-1;e.sigd=0}else{if(m===0){e.expo=0;e.sigd=0}else{e.expo=this._log2(m);if(e.expo<(1-k)||(e.expo==(1-k)&&m<Math.pow(2,(1-k)))){e.sigd=Math.round((m/Math.pow(2,(1-k)))*Math.pow(2,g));e.expo=0}else{e.sigd=Math.round((m/Math.pow(2,e.expo)-1)*Math.pow(2,g));e.expo+=k}}}}};this._fromIEEE754=function(e,h){var l;var g;switch(h){case 32:l=8;g=23;break;case 64:l=11;g=52;break;default:throw"Invalid bit width"}var k=Math.pow(2,l-1)-1;if(e.expo===0){if(e.sigd===0){return 0}return e.neg*e.sigd*Math.pow(2,(1-k)-g)}if(e.expo==Math.pow(2,l)-1){if(e.sigd===0){return e.neg*Number.POSITIVE_INFINITY}return NaN}return e.neg*(1+e.sigd*Math.pow(2,-g))*Math.pow(2,e.expo-k)};this._array2val=function(g,e){var k=0;if(e){g.reverse()}for(var h=0;h<g.length;++h){k+=g[h]*Math.pow(2,(g.length-h-1)*8)}return k};this._array2str=function(g,e){if(e){g.reverse()}return String.fromCharCode.apply(String,g)};if(arguments[0] instanceof b.Buffer){this._bytes=new d(arguments[0]._bytes)}else{this._bytes=new d(arguments[0])}this.__defineGetter__("length",function(){return this._bytes.length})},getSize:function(){return this._bytes.length},readUint8:function(){if(this._bytes.length<1){return NaN}return this._bytes.remove(1,"array")[0]},readUint16:function(e){if(this._bytes.length<2){return NaN}return this._array2val(this._bytes.remove(2,"array"),e)},readUint32:function(e){if(this._bytes.length<4){return NaN}return this._array2val(this._bytes.remove(4,"array"),e)},readInt8:function(){var e=this.readUint8();if(e>>>7){return e-256}return e},readInt16:function(e){var g=this.readUint16(e);if(g>>>15){return g-65536}return g},readInt32:function(e){var g=this.readUint32(e);if(g>>>31){return g-4294967296}return g},readFloat64:function(g){if(this._bytes.length<8){return NaN}var e=this._bytes.remove(8,"array");if(g){e.reverse()}var h={neg:1-(2*(e[0]>>7)),expo:(((e[0]<<1)&255)<<3)|(e[1]>>4),sigd:((e[1]&15)*281474976710656)+(e[2]*1099511627776)+(e[3]*4294967296)+(e[4]*16777216)+(e[5]*65536)+(e[6]*256)+e[7]};return this._fromIEEE754(h,64)},readFloat32:function(g){if(this._bytes.length<4){return NaN}var e=this._bytes.remove(4,"array");if(g){e.reverse()}var h={neg:1-(2*(e[0]>>7)),expo:(((e[0]<<1)&255)|(e[1]>>7))&65535,sigd:((e[1]&127)*65536)+(e[2]*256)+e[3]};return this._fromIEEE754(h,32)},readBytes:function(e){if(e>this._bytes.length){e=this._bytes.length}return this._bytes.remove(e,"string")},writeUint8:function(e){this._bytes.append([e])},writeUint16:function(h,e){var g=[h>>>8,h&255];if(e){g.reverse()}this._bytes.append(g)},writeUint32:function(h,e){var g=[(h>>>24)&255,(h>>>16)&255,(h>>>8)&255,h&255];if(e){g.reverse()}this._bytes.append(g)},writeInt8:function(e){if(e<-128||e>127){throw new Error("Invalid argument")}if(e<0){e=256+e}this.writeUint8(e)},writeInt16:function(g,e){if(g<-32768||g>32767){throw new Error("Invalid argument")}if(g<0){g=65536+g}this.writeUint16(g,e)},writeInt32:function(g,e){if(g<-2147483648||g>2147483647){throw new Error("Invalid argument")}if(g<0){g=4294967296+g}this.writeUint32(g,e)},writeFloat64:function(l,e){var k={};this._toIEEE754(l,k,64);var h=Math.floor(k.sigd/4294967296);var m=k.sigd%4294967296;var g=[(k.neg<<7)|(k.expo>>4),(k.expo&15)<<4|((h>>16)&15),(h>>8)&255,h&255,(m>>>24)&255,(m>>>16)&255,(m>>>8)&255,m&255];if(e){g.reverse()}this._bytes.append(g)},writeFloat32:function(k,e){var h={};this._toIEEE754(k,h,32);var g=[(h.neg<<7)|(h.expo>>>1),((h.expo<<7)&255)|((h.sigd>>16)&127),(h.sigd>>8)&255,h.sigd&255];if(e){g.reverse()}this._bytes.append(g)},writeBytes:function(e){if(e instanceof b.Buffer){this._bytes.append(e._bytes)}else{this._bytes.append(e)}},toString:function(){return this._bytes.toString()},clear:function(){this._bytes.clear()},clone:function(){return new b.Buffer(this)},slice:function(g,e){return new b.Buffer(this._bytes.slice(g,e))},get:function(e){return this._bytes.get(e)},forEach:function(e,g){this._bytes.forEach(e,g)}})}};__ngs._6n={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=(function(){var e=function(l){var g="";for(var h=0;h<l.length;h++){var k=l.charCodeAt(h);if(k<=127){g+=String.fromCharCode(k)}else{if(k<2048){g+=String.fromCharCode(((k>>>6)&31)|192);g+=String.fromCharCode((k&63)|128)}else{if(k<=55295||k>=57344){g+=String.fromCharCode(((k>>>12)&15)|224);g+=String.fromCharCode(((k>>>6)&63)|128);g+=String.fromCharCode((k&63)|128)}else{k=(((k-55296)<<10)|(l.charCodeAt(++h)-56320))+65536;g+=String.fromCharCode(((k>>>18)&7)|240);g+=String.fromCharCode(((k>>>12)&63)|128);g+=String.fromCharCode(((k>>>6)&63)|128);g+=String.fromCharCode((k&63)|128)}}}}return g};var d=function(g){var l="";var h=0;var m=[0,0,0,0,0,0];var k;while(h<g.length){m[0]=g.charCodeAt(h++);if(m[0]<128){l+=String.fromCharCode(m[0])}else{if((m[0]>=192)&&(m[0]<224)){m[1]=g.charCodeAt(h++);k=((m[0]&31)<<6)|(m[1]&63)}else{if((m[0]>=224)&&(m[0]<240)){m[1]=g.charCodeAt(h++);m[2]=g.charCodeAt(h++);k=((m[0]&15)<<12)|((m[1]&63)<<6)|(m[2]&63)}else{m[1]=g.charCodeAt(h++);m[2]=g.charCodeAt(h++);m[3]=g.charCodeAt(h++);k=(((m[0]&7)<<18)|((m[1]&63)<<12)|((m[2]&63)<<6)|(m[3]&63))-65536;l+=String.fromCharCode(((k&1047552)>>>10)+55296);k=(k&1023)+56320}}l+=String.fromCharCode(k)}}return l};return{encode:e,decode:d}})();a.UTF8=c}};__ngs._6o={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var a=__ngs.r_(__ngs._2b).Commands;var d=__ngs.r_(__ngs._2c).AbstractView;b.ViewParent={initialize:function(){this._children=[]},getChildCount:function(){return this._children.length},getChildren:function(){return this._children.slice()},addChild:function(g,e){if(g===this){throw new Error("Cannot add "+g+" as a child of itself!")}if(g instanceof d){if(g._parent){g.removeFromParent()}if(e===0||e>0){e=Math.min(e,this.getChildCount());this._children.splice(e,0,g)}else{e=-1;this._children.push(g)}g._parent=this;g._setVisible(this._visible);a.addSubview.call(this,g.__objectRegistryId,e)}else{throw new Error(this.type+".addChild: "+g+" is not a view!")}return this},removeChild:function(e){if(e instanceof d){if(e._parent==this){e._setVisible(false);var g=this._children.indexOf(e);if(g!=-1){this._children.splice(g,1)}}e._parent=undefined;a.removeFromSuperview.call(e)}else{throw {message:this.type+".removeChild: "+e+" is not a view!"}}return e}}}};__ngs._6p={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;function b(e,d){return function(){delete this[e];return this[e]=d(require)}}a.RequireLoader=function(e){if(e instanceof Object){for(var d in e){this.__defineGetter__(d,b(d,e[d]))}}return this};a.RequireLoader.prototype={load:function(d){this[d]}}}};__ngs._6q={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var a=__ngs.r_(__ngs._cz);b.Appdata={getEntries:function(d,g){var e={apiURL:"Common.Appdata.getEntries",keys:d,callbackFunc:g};a.getRouterInstance().sendCommandToGameService(e)},updateEntries:function(d,g){if(d){var e={apiURL:"Common.Appdata.updateEntries",entries:d,callbackFunc:g};a.getRouterInstance().sendCommandToGameService(e)}else{if(typeof g==="function"){g({errorCode:400,description:"Entries to update are a required parameter"},null)}}},deleteEntries:function(d,g){if(d&&d.length>0){var e={apiURL:"Common.Appdata.deleteEntries",keys:d,callbackFunc:g};a.getRouterInstance().sendCommandToGameService(e)}else{if(typeof g==="function"){g({errorCode:400,description:"Keys to delete are a required parameter"},null)}}}}}};__ngs._6r={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var a=__ngs.r_(__ngs._cz);b.Auth={authorizeToken:function(d,g){var e={apiURL:"Common.Auth.authorizeToken",token:d,callbackFunc:g};a.getRouterInstance().sendCommandToGameService(e)}}}};__ngs._6s={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var a=__ngs.r_(__ngs._cz);b.Blacklist={checkBlacklist:function(g,e,d,k){var h={apiURL:"Common.Blacklist.checkBlacklist",userId:g,targetUserId:e,opt:d,callbackFunc:function(m,l){k(m,l.users,l.result)}};a.getRouterInstance().sendCommandToGameService(h)}}}};__ngs._6t={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._7b).Session;a.Config={getServerEnvironment:function(){var e=c.getCurrentSession();if(!e){return"unknown"}var d=c.getCurrentSession().serverMode();if(d==c.serverModes.production){return"production"}else{if(d==c.serverModes.sandbox){return"sandbox"}else{return"unknown"}}}}}};__ngs._6u={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var a=__ngs.r_(__ngs._cz);b.People={getUser:function(e,d,h){var g={apiURL:"Common.People.getUser",userId:e,fields:d,callbackFunc:h};a.getRouterInstance().sendCommandToGameService(g)},getUsers:function(g,d,h){var e={apiURL:"Common.People.getUsers",userIds:g,fields:d,callbackFunc:function(l,k){h(l,k.users,k.results)}};a.getRouterInstance().sendCommandToGameService(e)},getCurrentUser:function(d,g){var e={apiURL:"Common.People.getCurrentUser",fields:d,callbackFunc:g};a.getRouterInstance().sendCommandToGameService(e)},getFriends:function(g,d,e,k){var h={apiURL:"Common.People.getFriends",userId:g,fields:d,opt:e,callbackFunc:function(m,l){k(m,l.users,l.results)}};a.getRouterInstance().sendCommandToGameService(h)},getFriendsWithGame:function(g,d,e,k){var h={apiURL:"Common.People.getFriendsWithGame",userId:g,fields:d,opt:e,callbackFunc:function(m,l){k(m,l.users,l.results)}};a.getRouterInstance().sendCommandToGameService(h)}}}};__ngs._6v={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var a=__ngs.r_(__ngs._cz);b.Profanity={checkProfanity:function(e,g){var d={apiURL:"Common.Profanity.checkProfanity",text:e,callbackFunc:function(k,h){g(k,h.profanity)}};a.getRouterInstance().sendCommandToGameService(d)}}}};__ngs._6w={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var a=__ngs.r_(__ngs._z).Class;b.Request=a.subclass({execute:function(d){}})}};__ngs._6x={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var a=__ngs.r_(__ngs._cz);b.RemoteNotification={send:function(d,g,h){var e={apiURL:"Common.RemoteNotification.send",recipientId:d,payload:g,callbackFunc:h};a.getRouterInstance().sendCommandToGameService(e)},getRemoteNotificationsEnabled:function(e){var d={apiURL:"Common.RemoteNotification.getRemoteNotificationsEnabled",callbackFunc:e};a.getRouterInstance().sendCommandToGameService(d)},setRemoteNotificationsEnabled:function(d,g){var e={apiURL:"Common.RemoteNotification.setRemoteNotificationsEnabled",enabled:d,callbackFunc:g};a.getRouterInstance().sendCommandToGameService(e)}}}};__ngs._6y={_c:null,_d:function(){var a={exports:{}};var b=a.exports;this._c=a;var d=__ngs.r_(__ngs._d0);var k=__ngs.r_(__ngs._cz);var l=__ngs.r_(__ngs._1y).MessageEmitter;var c=__ngs.r_(__ngs._7h).ButtonOverlays;var e=__ngs.r_(__ngs._7f).Friends;var h=__ngs.r_(__ngs._7e).Leaderboards;var m=__ngs.r_(__ngs._7g).Profile;var g=__ngs.r_(__ngs._72).User;b.Service={showLeaderboards:function(){h.showLeaderboards()},openUserFinder:function(){e.showFindFriends(undefined)},openFriendPicker:function(n,o){e.showFriendPicker(n,function(s,r){var q=[];r=r||[];for(var p=0;p<r.length;p++){q.push(r[p].recordID)}o(q)})},openUserProfile:function(n,o){if(typeof n=="string"){if(n.match(/[^0-9]/)===null){n=parseInt(n,10)}else{n=null}}if(!n){o({errorCode:400,description:"userid is invalid"})}else{g.getUserWithID(n,function(q,p){if(q){if(q==="Sorry, we can't find anyone with that name."){o({errorCode:404,description:q})}else{o({errorCode:500,description:q})}}else{if(!p){o({errorCode:404,description:"User not found"})}else{m.showUserProfile(p,undefined)}}})}},showCommunityButton:function(p,n,o){c.showCommunityButton(p,o)},hideCommunityButton:function(n){c.hideCommunityButton(n)},invitedUserEmitter:new l(),showBalanceButton:function(o,p,n){c.showBalanceButton(o,p,n)},hideBalanceButton:function(n){c.hideBalanceButton(n)}}}};__ngs._6z={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._7b);a.Analytics={getUserId:function(){var e=this._getSession(),d=null;if(e){d=(e.user()||{}).recordID}return d},getUsername:function(){var e=this._getSession(),d=null;if(e){d=(e.user()||{}).gamertag}return d},getPlatformVersion:function(){var d=this._getSession(),e=null;if(d){e=d.platformVersion()}return e},getServiceId:function(){return"US"},_getSession:function(){return c.Session.getCurrentSession()}}}};__ngs._70={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var a=__ngs.r_(__ngs._cz);b.Leaderboard={getLeaderboard:function(e,d,h){var g={apiURL:"Common.Leaderboard.getLeaderboard",leaderboardIds:e,fields:d,callbackFunc:h};a.getRouterInstance().sendCommandToGameService(g)},getLeaderboards:function(g,d,h){var e={apiURL:"Common.Leaderboard.getLeaderboards",leaderboardIds:g,fields:d,callbackFunc:h};a.getRouterInstance().sendCommandToGameService(e)},getAllLeaderboards:function(d,g){var e={apiURL:"Common.Leaderboard.getAllLeaderboards",fields:d,callbackFunc:g};a.getRouterInstance().sendCommandToGameService(e)},getTopScoresList:function(e,d,g,k){var h={apiURL:"Common.Leaderboard.getTopScoresList",leaderboardIds:e,fields:d,opts:g,callbackFunc:k};a.getRouterInstance().sendCommandToGameService(h)},getFriendsScoresList:function(e,g,d,h,l){var k={apiURL:"Common.Leaderboard.getFriendsScoresList",leaderboardIds:e,userId:g,fields:d,opts:h,callbackFunc:l};a.getRouterInstance().sendCommandToGameService(k)},getScore:function(e,g,d,k){var h={apiURL:"Common.Leaderboard.getScore",leaderboardIds:e,userId:g,fields:d,callbackFunc:k};a.getRouterInstance().sendCommandToGameService(h)},updateCurrentUserScore:function(d,g,h){var e={apiURL:"Common.Leaderboard.updateCurrentUserScore",leaderboardId:d,value:g,callbackFunc:h};a.getRouterInstance().sendCommandToGameService(e)},deleteCurrentUserScore:function(d,g){var e={apiURL:"Common.Leaderboard.deleteCurrentUserScore",leaderboardIds:d,callbackFunc:g};a.getRouterInstance().sendCommandToGameService(e)}}}};__ngs._71={_c:null,_d:function(){var g={exports:{}};var d=g.exports;this._c=g;var c=__ngs.r_(__ngs._1y).MessageEmitter;var h=__ngs.r_(__ngs._3x);var a=__ngs.r_(__ngs._7b);var b=__ngs.r_(__ngs._7c);var e=d.DataModel=c.subclass({initialize:function(k){this.recordID=k;this._cache()},beginChanges:function(){b.Dispatcher.beginBatching()},endChanges:function(){b.Dispatcher.endBatching()},_classname:function(){var k=this.classname;return k},_cache:function(){if(!this._dataCache){var l=a.Session.getCurrentSession();if(l){var k=l.dataCache();if(k){k.addObject(this);this._dataCache=k}}}return this._dataCache},$_serializedDataModel:function(k){if(k instanceof (e)){k={classname:k.classname,recordID:k.recordID}}return k},$_deserializedDataModel:function(o,m){if(o&&o.hasOwnProperty&&o.hasOwnProperty("classname")&&o.hasOwnProperty("recordID")){var l=o.classname;var p=h.Social.US[l];var k=o.recordID;if(p&&k){var n=m.getObjectWithRecordID(l,k);if(!n){n=new p(k)}n._deserializeFromHash(o.data);m.addObject(n);o=n}}return o},_serializedHash:function(o){var r=this.constructor;var q={classname:r.classname,recordID:this.recordID};if(o===false){return q}q.data={};var n=this.constructor.properties||[];for(var k=0;k<n.length;k++){var m=n[k];var l=this[m];if(l instanceof (Array)){for(var p=0;p<l.length;p++){l[p]=e._serializedDataModel(l[p])}}else{l=e._serializedDataModel(l)}q.data[m]=l}return q},_deserializeFromHash:function(n){if(!n){NgLogD("No public hash data for "+this.classname+" "+this.recordID);return}var k=this._cache();for(var l in n){var m=n[l];if(m instanceof (Array)){for(var o=0;o<m.length;o++){m[o]=e._deserializedDataModel(m[o],k)}}else{m=e._deserializedDataModel(m,k)}this[l]=m}}});e._oldSubclass=e.subclass;e.subclass=function(n){var o=e._oldSubclass(n);var m=n.properties||[];for(var k=0;k<m.length;k++){var l=m[k];(function(p){o.prototype.__defineSetter__(p,function(q){this["___"+p]=q;var r={};r[""+p]=q;this.emit(r)});o.prototype.__defineGetter__(p,function(q){return this["___"+p]})})(l)}return o}}};__ngs._72={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var e=__ngs.r_(__ngs._71);var a=__ngs.r_(__ngs._7c).Dispatcher;var g=__ngs.r_(__ngs._d1).OrderedList;var d=__ngs.r_(__ngs._3x).Social;var h=b.User=e.DataModel.subclass({classname:"User",properties:["gamertag","avatarId","motto","relation","sparse","photoId","emailHash","ageRestricted","isMutualFriend","grade","phoneNumber","password","firstName","lastName","hideFullName","emailAddress","isNewRelationship","showsPresence","onlyShowFriendNotifications","allowFriendPostsOnly","capabilities","gamerscore","gamerLevel","gamerLevelName","gamerLevelScore","gamerNextLevelScore","games"],initialize:function($super,k){$super(k);NgLogD("User Public! "+k+" "+this.recordID)},addBuddy:function(l,k){a.callMethodOnRemoteObject(this,"addBuddy",[l,k])},removeBuddy:function(l,k){a.callMethodOnRemoteObject(this,"deleteBuddy",[l,k])},ignoreBuddy:function(l,k){a.callMethodOnRemoteObject(this,"ignoreBuddy",[l,k])},getUserDetails:function(k){a.callMethodOnRemoteObject(this,"getUserDetails",[k])},getMobageFriendRequestsList:function(){return g.getObjectPublicInterface(this,"getInvitesList","_followersListInterface")},getMobageFriendsList:function(){return g.getObjectPublicInterface(this,"getFriendsList","_friendsListInterface")},getMobageBlockedUserList:function(){return g.getObjectPublicInterface(this,"getBlockedUserList","_enemyListInterface")},getOwnedGamesList:function(){return g.getObjectPublicInterface(this,"getOwnedGamesList","_ownedGamesListInterface")},getAchievementsList:function(){return g.getObjectPublicInterface(this,"getAchievementsList","_achievementsListInterface")},getFeaturedUsersList:function(){return g.getObjectPublicInterface(this,"getFeaturedUsersList","_featuredUsersListInterface")},inviteToCurrentGame:function(k){var l=this;a.callMethodOnRemoteObject(this,"inviteToCurrentGame",[function(m){if(!m){d.Common.Service.invitedUserEmitter.emit({userId:l.recordID});d.US.Service.Friends.invitedUserEmitter.emit({user:l})}k.apply(this,Array.apply(null,arguments))}])},sendNotificationToUser:function(n,k,m,l){a.callMethodOnRemoteObject(this,"sendNotificationToUser",[n,k,m,l])},addFriend:function(l,m,k){if(typeof arguments[1]=="function"&&!arguments[2]){k=arguments[1];m=undefined}a.callMethodOnRemoteObject(this,"addGameFriend",[l,m,k])},removeFriend:function(l,k){a.callMethodOnRemoteObject(this,"removeGameFriend",[l,k])},report:function(l,k){a.callMethodOnRemoteObject(this,"report",[l,k])},getFriendsList:function(k){return g.getObjectPublicInterface(this,"getGameFriendsList",(k?("_gameFriendsList-friends-"+k):"_gameFriendsList-friends"),"friends",k)},getMutualFriendsList:function(k){return g.getObjectPublicInterface(this,"getGameFriendsList",(k?("_gameFriendsList-mutual-"+k):"_gameFriendsList-mutual"),"mutual",k)},getFriendRequestsList:function(k){return g.getObjectPublicInterface(this,"getGameFriendsList",(k?("_gameFriendsList-invitation-"+k):"_gameFriendsList-invitation"),"invitation",k)},setEmailAddress:function(l,k){a.callMethodOnRemoteObject(this,"setEmailAddress",[l,k])},setOnlyShowFriendNotifications:function(l,k){a.callMethodOnRemoteObject(this,"setOnlyShowFriendNotifications",[l,k])},setOptsIn:function(l,k){a.callMethodOnRemoteObject(this,"setOptsIn",[l,k])},setAllowFriendPostsOnly:function(l,k){a.callMethodOnRemoteObject(this,"setAllowFriendPostsOnly",[l,k])},setMotto:function(l,k){a.callMethodOnRemoteObject(this,"setMotto",[l,k])},setFirstName:function(l,k){a.callMethodOnRemoteObject(this,"setFirstName",[l,k])},setLastName:function(l,k){a.callMethodOnRemoteObject(this,"setLastName",[l,k])},setPassword:function(l,m,k){a.callMethodOnRemoteObject(this,"setPassword",[l,m,k])},setBlocked:function(l,k){a.callMethodOnRemoteObject(this,"setBlocked",[l,k])},getOriginOfRegistration:function(k){a.callMethodOnRemoteObject(this,"getOriginOfRegistration",[k])}});h.GamertagKey="gamertag";h.AvatarKey="badge_id";h.MottoKey="motto";h.RelationKey="relation";h.FirstNameKey="first_name";h.LastNameKey="last_name";h.BirthdateKey="birth_date";h.GenderKey="gender";h.PrivacyKey="fullname_privacy";h.PhotoKey="photo_url";h.EmailAddressKey="email";h.EmailHashKey="email_hash";h.PhoneNumberKey="phone_number";h.AgeRangeKey="age_restricted";h.SpamKey="opt_in";h.PasswordKey="password";h.PasswordConfirmKey="password_confirmation";h.GamesKey="games";h.CapabilitiesKey="capabilities";h.NewBuddyKey="new_buddy";h.IsMutualFriendKey="mutual_friends";h.HidePresenceKey="hide_presence";h.OnlyShowFriendNotificationsKey="friend_only_notification";h.AllowFriendPostsOnly="friend_only_wallpost";h.GamerScoreKey="gamerscore";h.LevelNumberKey="level_position";h.LevelNameKey="level_name";h.CurrentLevelScoreKey="level_points";h.NextLevelScoreKey="level_next_points";h.GradeKey="grade";h.CommonGradeKey="userGrade";h.NonSparseKeys=[h.PhotoKey,h.EmailAddressKey,h.EmailHashKey,h.PhoneNumberKey,h.PasswordKey,h.FirstNameKey,h.LastNameKey,h.PrivacyKey,h.NewBuddyKey,h.CapabilitiesKey,h.HidePresenceKey,h.OnlyShowFriendNotificationsKey,h.AllowFriendPostsOnly,h.GamerScoreKey,h.LevelNumberKey,h.LevelNameKey,h.CurrentLevelScoreKey,h.NextLevelScoreKey,h.GamesKey];h.getUserWithID=function(l,k){a.callClassMethodOnRemoteObject(h,"getUserWithID",[l,k])};h.getUserWithGamertag=function(l,k){a.callClassMethodOnRemoteObject(h,"getUserWithGamertag",[l,k])};h.showAccountUpgrade=function(k){a.callClassMethodOnRemoteObject(h,"showAccountUpgrade",[k])}}};__ngs._73={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var h=__ngs.r_(__ngs._5).Core;var c=__ngs.r_(__ngs._4).Device;var e=__ngs.r_(__ngs._71);var g=__ngs.r_(__ngs._d1).OrderedList;var a=__ngs.r_(__ngs._7c).Dispatcher;var k=b.Game=e.DataModel.subclass({classname:"Game",properties:["name","publisher","category","numberOfLeaderboards","iconURL","numberOfAchievements","featured","masterProductID","appStoreURL","feedURL","catalogURL","description","phone_screenshot_urls","ngcore_url","androidMarketIntentURL"],goToAppStore:function(){if(h.Capabilities.getPlatformOS().toLowerCase()==="iphone os"){c.IPCEmitter.launch(this.appStoreURL)}else{c.IPCEmitter.launchIntent(this.androidMarketIntentURL)}}});k.getAllGamesList=function(){return g.getClassPublicInterface(k,"getAllGamesList","_allGamesInterface")};k.getCurrentGame=function(l){a.callClassMethodOnRemoteObject(k,"getCurrentGame",[l])}}};__ngs._74={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var e=__ngs.r_(__ngs._71);var b=__ngs.r_(__ngs._7c).Dispatcher;var a=c.FullGamercard=e.DataModel.subclass({classname:"FullGamercard",properties:["visible"],show:function(){b.callMethodOnRemoteObject(this,"show")},hide:function(){b.callMethodOnRemoteObject(this,"hide")},set:function(g,h,k){b.callMethodOnRemoteObject(this,"set",[g,h,k])}});a.getFullGamercard=function(g){b.callClassMethodOnRemoteObject(a,"getFullGamercard",[g])};a.getFullGamercardAndSetUser=function(h,g){b.callClassMethodOnRemoteObject(a,"getFullGamercardAndSetUser",[h,g])};a.getFullGamercardAndSetCurrentUser=function(g){b.callClassMethodOnRemoteObject(a,"getFullGamercardAndSetCurrentUser",[g])}}};__ngs._75={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var e=__ngs.r_(__ngs._71);var a=__ngs.r_(__ngs._7c).Dispatcher;var g=__ngs.r_(__ngs._d1).OrderedList;var b=c.Leaderboard=e.DataModel.subclass({classname:"Leaderboard",properties:["level","title","game","iconURL"],initialize:function($super,h){$super(h);NgLogD("Leaderboard Public! "+h+" "+this.recordID)},submitScore:function(k,h){a.callMethodOnRemoteObject(this,"submitScoreWithPoints",[k,h])},getTopScoresList:function(){return g.getObjectPublicInterface(this,"getTopScoresList","_leaderboardTopScoresInterface")},getFriendsScoresList:function(){return g.getObjectPublicInterface(this,"getFriendsScoresList","_leaderboardFriendsScoresInterface")}});b.getLeaderboards=function(h){a.callClassMethodOnRemoteObject(b,"getLeaderboards",[h])}}};__ngs._76={_c:null,_d:function(){var e={exports:{}};var c=e.exports;this._c=e;var a=__ngs.r_(__ngs._cz);var g=__ngs.r_(__ngs._71);var b=__ngs.r_(__ngs._7c).Dispatcher;var d=c.Achievement=g.DataModel.subclass({classname:"Achievement",properties:["description","points","category","unlocked","name","index","icon_url"],initialize:function($super,h){$super(h)},unlockAchievement:function(h){b.callMethodOnRemoteObject(this,"unlockAchievement",[h])}})}};__ngs._77={_c:null,_d:function(){var d={exports:{}};var a=d.exports;this._c=d;var c=__ngs.r_(__ngs._71).DataModel;var b=a.Score=c.subclass({classname:"Score",properties:["points","displayScore","rank","level","user"]})}};__ngs._78={_c:null,_d:function(){var e={exports:{}};var d=e.exports;this._c=e;var c=__ngs.r_(__ngs._71);var a=__ngs.r_(__ngs._7c).Dispatcher;var b=d.AppData=c.DataModel.subclass({classname:"AppData",properties:["data","key","user","permissions"],initialize:function($super,g){$super(g)}});b.getKeysForUser=function(h,g){a.callClassMethodOnRemoteObject(b,"getKeysForUser",[h,g])};b.getDataForUserWithKey=function(h,k,g){a.callClassMethodOnRemoteObject(b,"getDataForUserWithKey",[h,k,g])};b.setDataForUserWithKeyAndPermissions=function(m,h,k,l,g){a.callClassMethodOnRemoteObject(b,"setDataForUserWithKeyAndPermissions",[m,h,k,l,g])};b.Permissions={Private:0,FriendsReadOnly:1,PublicReadOnly:2}}};__ngs._79={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var a=__ngs.r_(__ngs._z).Class;var d=__ngs.r_(__ngs._3x);var e=b.Cache=a.subclass({classname:"Cache",inMemoryObjects:{},caches:{},initialize:function(){},getObjectWithRecordID:function(k,g){var h=this.inMemoryObjects[k];if(h){return h[g]||null}else{return null}},addObject:function(l){var k=l._classname();var h=this.inMemoryObjects[k];if(!h){h={};this.inMemoryObjects[k]=h}var g=h[l.recordID];if(g){return g}else{h[l.recordID]=l;return l}},removeObject:function(k){var h=k._classname();var g=this.inMemoryObjects[h];if(g){delete g[k.recordID]}},isObjectCached:function(k){var h=k._classname();var g=this.inMemoryObjects[h];return(g&&(g[k.recordID]==k))},saveCache:function(){},loadCache:function(){},loadCacheFromJSONArray:function(m,g){var q=[];for(var p=0;p<m.length;p++){var h=m[p];if(h&&h.hasOwnProperty("classname")&&h.hasOwnProperty("recordID")){var k=h.classname;var o=d.Social.US[k];var n=h.recordID;if(o&&n){var l=this.getObjectWithRecordID(k,n);if(!l){l=new o(n,{})}l._deserializeFromHash(h);this.addObject(l)}}}g(null,this)}})}};__ngs._7a={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var a=__ngs.r_(__ngs._cz);b.AB={getCurrentVariants:function(e){var d={apiURL:"US.AB.getCurrentVariants",callbackFunc:e};a.getRouterInstance().sendCommandToGameService(d)}}}};__ngs._7b={_c:null,_d:function(){var e={exports:{}};var d=e.exports;this._c=e;var c=__ngs.r_(__ngs._5);var h=__ngs.r_(__ngs._1y);var b=__ngs.r_(__ngs._79);var a=__ngs.r_(__ngs._7c).Dispatcher;var g=d.Session=h.MessageEmitter.subclass({classname:"Session",initialize:function(k){if(k){this._loadSessionData(k)}},_loadSessionData:function(k){this._appKey=k.appId||this._appKey||null;this._appVersion=k.appVersion||this._appVersion||null;this._platformVersion=k.platformVersion||this._platformVersion||"1.0";this._serverMode=k.serverMode||this._serverMode||null;this._user=(k.userID?this.dataCache().getObjectWithRecordID("User",k.userID):null);this.emit({user:this._user})},dataCache:function(){if(!this._cache){this._cache=new b.Cache();this._cache.loadCache(function(k){NgLogD("Loaded cache: "+k)})}return this._cache},user:function(){return this._user},appKey:function(){return this._appKey},appVersion:function(){return this._appVersion},serverMode:function(){return this._serverMode},platformVersion:function(){return this._platformVersion},getSessionTokensForConsumerKey:function(l,k){a.callClassMethodOnRemoteObject("Session",["getCurrentSession","getSessionTokensForConsumerKey"],[[],[l,k]])}});g.serverModes={staging:"staging",integration:"integration",partner:"sandbox",sandbox:"sandbox",production:"production",unknown:"unknown"};g.getCurrentSession=function(){return g._currentSession};g._emitter=null;g.addCurrentSessionListener=function(l,m,k){if(!g._emitter){g._emitter=new h.MessageEmitter()}g._emitter.addListener(l,m,k)};g.removeCurrentSessionListener=function(k){if(g._emitter){g._emitter.removeListener(k)}}}};__ngs._7c={_c:null,_d:function(){var e={exports:{}};var d=e.exports;this._c=e;var b=__ngs.r_(__ngs._cz);var k=__ngs.r_(__ngs._5).Core;var h=__ngs.r_(__ngs._79);var g=__ngs.r_(__ngs._3x);var a=__ngs.r_(__ngs._7b);var c=d.Dispatcher={classname:"Dispatcher",callbackUIDCounter:0,callbacks:{"-2":{},"-1":{}},cache:function(){try{return a.Session.getCurrentSession().dataCache()}catch(l){NgLogD("Mobage/Dispatcher/cache-Warning: cannot get cache. NOTE: This may be expected behavior if early on in initialization. Err="+l);return null}},receiveSession:function(n){var m=a.Session.getCurrentSession();if(!m){m=new a.Session();a.Session._currentSession=m}var l=n.data.userData;if(l){c.receiveObject({data:l})}m._loadSessionData(n.data);if(a.Session._emitter){a.Session._emitter.emit({session:m})}},callMethodOnLocalObject:function(o){var q=o.recordID;var n=o.classname;var p=c.cache().getObjectWithRecordID(n,q);if(p){var u=o.methodName;var s=false;var r;var l;if(u instanceof Array){var m=p;for(var t=0;t<u.length;t++){if(typeof m[u[t]]=="function"){r=c.convertArgumentsArrayFromJSON(o.arguments[t]||[]);l=m[u[t]].apply(m,r);m=l}else{s=true;break}}}else{if(typeof p[u]=="function"){r=c.convertArgumentsArrayFromJSON(o.arguments||[]);l=p[u].apply(p,r)}else{s=true}}if(s){NgLogD("ERROR: Invalid methods for calling on local object: "+o.recordID+" "+u)}else{if(o.callback){var v=c.convertFunctionFromJSON({callbackUID:o.callback});if(v){v(l)}}}}},callMethodOnRemoteObject:function(n,p,m,l){if(!n||!p){NgLogD("Public.Dispatcher.callMethodOnRemoteObject - bailing");if(l){l()}return}m=c.convertArgumentsArrayToJSON(m||[]);var o={apiURL:"US.Dispatcher.callMethodOnLocalObject",recordID:n.recordID,classname:n._classname(),methodName:p,arguments:m,callback:c.convertFunctionToJSON(l)};b.getRouterInstance().sendCommandToGameService(o)},callClassMethodOnLocalObject:function(o){c.beginBatching();var n=o.classname;var t=o.methodName;if(n&&t){var p=g.Social.US[n];if(!p){p=g.Social.US.Service[n]}if(p){var r=false;var q;var l;if(t instanceof Array){var m=p;for(var s=0;s<t.length;s++){if(typeof m[t[s]]=="function"){q=c.convertArgumentsArrayFromJSON(o.arguments[s]||[]);l=m[t[s]].apply(m,q);m=l}else{r=true;break}}}else{if(typeof p[t]=="function"){q=c.convertArgumentsArrayFromJSON(o.arguments||[]);l=p[t].apply(p,q)}else{r=true}}if(r){NgLogD("ERROR: Invalid methods for calling on local Class: "+n+" "+t)}else{if(o.callback){var u=c.convertFunctionFromJSON({callbackUID:o.callback});if(u){u(l)}}}}}c.endBatching()},callClassMethodOnRemoteObject:function(p,m,n,l){if(!p||!m){NgLogD("Public.Dispatcher.callClassMethodOnRemoteObject - bailing");if(l){l()}return}n=c.convertArgumentsArrayToJSON(n||[]);var o={apiURL:"US.Dispatcher.callClassMethodOnLocalObject",classname:(p.classname?p.classname:p),methodName:m,arguments:n,callback:(l?c.convertFunctionToJSON(l):null)};b.getRouterInstance().sendCommandToGameService(o)},sendCallbackToRemote:function(l,m){m=c.convertArgumentsArrayToJSON(m||[]);var n={apiURL:"US.Dispatcher.receiveCallbackFromRemote",callbackUID:l,arguments:m,zone:b.getRouterInstance().zone};b.getRouterInstance().sendCommandToGameService(n)},receiveCallbackFromRemote:function(m){var n=c.callbacks[b.getRouterInstance().zone][m.callbackUID];if(!n){return}var l=c.convertArgumentsArrayFromJSON(m.arguments||[]);n.apply(n,l)},convertArgumentsArrayFromJSON:function(o){var n=[];for(var m=0;m<o.length;m++){var l=o[m];if(l&&((l.recordID&&l.classname)||l instanceof Array)){n[m]=c.convertModelObjectFromJSON(l)}else{if(l&&l.callbackUID){n[m]=c.convertFunctionFromJSON(l)}else{n[m]=l}}}return n},convertArgumentsArrayToJSON:function(o){var n=[];for(var m=0;m<o.length;m++){var l=o[m];if(l&&(l.recordID&&l._classname&&typeof l._classname=="function"&&l._classname())){c.sendObjectImmediately(l);l=c.convertModelObjectToJSON(l);n[m]=l}else{if(l&&l instanceof Array){l=c.convertArgumentsArrayToJSON(l);n[m]=l}else{if(l&&typeof l=="function"){n[m]=c.convertFunctionToJSON(l)}else{n[m]=l}}}}return n},convertModelObjectToJSON:function(l){if(l&&l.recordID&&l._classname()){l={classname:l._classname(),recordID:l.recordID}}return l},convertModelObjectFromJSON:function(o){var n=o;if(o.recordID&&o.classname){var p=c.cache().getObjectWithRecordID(o.classname,o.recordID);if(p){n=p;if(o.data){n._deserializeFromHash(o.data)}}}else{if(o instanceof Array){for(var m=0;m<o.length;m++){var l=o[m];o[m]=c.convertModelObjectFromJSON(l)}}}return n},convertFunctionToJSON:function(n){if(n&&typeof n=="function"){var m=++c.callbackUIDCounter;var l=b.getRouterInstance().zone;c.callbacks[l][m]=n;n={callbackUID:m,zone:l}}return n},convertFunctionFromJSON:function(n){var o=n;var m=o.callbackUID;var l=o.zone;if(m){var p=c.callbacks[l][m];if(p){o=p;delete c.callbacks[l][m]}else{o=c.generateCallbackForUID(m)}}return o},generateCallbackForUID:function(l){if(l.callbackUID){l=l.callbackUID}return function(){c.sendCallbackToRemote(l,arguments)}},_batchCount:0,_queuedObjects:[],beginBatching:function(){++c._batchCount},endBatching:function(){if((--c._batchCount)===0){for(var l in c._queuedObjects){var m=c._queuedObjects[l];c._queuedObjects[l]=undefined;c.sendObjectImmediately(m)}}},sendObject:function(m){if(c._queuedObjects.indexOf(m)==-1){c.beginBatching();var l=""+m.classname+"---"+m.recordID;c._queuedObjects[l]=m;c.endBatching()}},sendObjectImmediately:function(m){if(!m){return}var l={apiURL:"US.Dispatcher.receiveObject",data:m._serializedHash()};b.getRouterInstance().sendCommandToGameService(l)},receiveObject:function(q){var o=q.data;var m=o.recordID;var n=o.classname;var l=o.data;if(m&&n&&c.cache()){var p=c.cache().getObjectWithRecordID(n,m);if(!p){var r=g.Social.US[n];p=new r(m);c.cache().addObject(p)}if(l){p._deserializeFromHash(l)}}}}}};__ngs._7d={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var a=__ngs.r_(__ngs._cz);b.Reward={getActiveCampaigns:function(e){var d={apiURL:"US.Reward.getActiveCampaigns",callbackFunc:e};a.getRouterInstance().sendCommandToGameService(d)},redeem:function(g,e){var d={apiURL:"US.Reward.redeem",id:g,callbackFunc:e};a.getRouterInstance().sendCommandToGameService(d)}}}};__ngs._7e={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var a=__ngs.r_(__ngs._cz);b.Leaderboards={showLeaderboards:function(){var d={apiURL:"US.Service.Leaderboards.showLeaderboards"};a.getRouterInstance().sendCommandToGameService(d)}}}};__ngs._7f={_c:null,_d:function(){var h={exports:{}};var e=h.exports;this._c=h;var g=__ngs.r_(__ngs._d0);var a=__ngs.r_(__ngs._cz);var c=__ngs.r_(__ngs._1y).MessageEmitter;var k=__ngs.r_(__ngs._71);var b=__ngs.r_(__ngs._7c).Dispatcher;var d=e.Friends=k.DataModel.subclass({classname:"Friends"});d.showFindFriends=function(l){NgLogD("Public call showFindFriends");var m={apiURL:"US.Service.Friends.showFindFriends"};if(l){m.data={};m.data.tab=l}a.getRouterInstance().sendCommandToGameService(m)};d.showFriendPicker=function(l,m){b.callClassMethodOnRemoteObject(d,"showFriendPicker",[l,m])};d.invitedUserEmitter=new c()}};__ngs._7g={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var c=__ngs.r_(__ngs._d0);var a=__ngs.r_(__ngs._cz);b.Profile={showUserProfile:function(g,e){var h={apiURL:"US.Service.Profile.showUserProfile",data:{user:g}};if(e){h.tab=e}a.getRouterInstance().sendCommandToGameService(h)}}}};__ngs._7h={_c:null,_d:function(){var b={exports:{}};var c=b.exports;this._c=b;var a=__ngs.r_(__ngs._2e).Rect;var d=__ngs.r_(__ngs._d0);var h=__ngs.r_(__ngs._cz);var k=__ngs.r_(__ngs._1y).MessageEmitter;var e=__ngs.r_(__ngs._7f).Friends;var l=__ngs.r_(__ngs._7g).Profile;var g=__ngs.r_(__ngs._72).User;c.ButtonOverlays={showCommunityButton:function(o,n){NgLogD("Public - showCommunityButton");var m={apiURL:"US.Service.ButtonOverlays.showCommunityButton"};m.gravity=o=o||[0,0];if((o[0]!==0&&o[0]!==1)||(o[1]!==0&&o[1]!==1)){throw new Error("showCommunityButton: Illegal/Out-of-Bounds parameter: gravity "+JSON.stringify(o))}if(n!=undefined&&typeof n=="function"){m.callbackFunc=n}else{m.callbackFunc=null}h.getRouterInstance().sendCommandToGameService(m)},hideCommunityButton:function(n){NgLogD("Public - hideCommunityButton");var m={apiURL:"US.Service.ButtonOverlays.hideCommunityButton"};if(n!=undefined&&typeof n=="function"){m.callbackFunc=n}else{m.callbackFunc=null}h.getRouterInstance().sendCommandToGameService(m)},showBalanceButton:function(n,p,m){NgLogD("Public - showBalanceButton");var o={apiURL:"US.Service.ButtonOverlays.showBalanceButton"};if(n!=undefined){o.rect=(new a(n)).array()}else{o.rect=undefined}if(p!=undefined&&typeof p=="function"){o.callbackFunc=p}else{o.callbackFunc=null}if(m!=undefined){o.sourcePage=m.toString()}else{o.sourcePage="somewhere_game"}h.getRouterInstance().sendCommandToGameService(o)},hideBalanceButton:function(n){NgLogD("Public - hideBalanceButton");var m={apiURL:"US.Service.ButtonOverlays.hideBalanceButton"};if(n!=undefined&&typeof n=="function"){m.callbackFunc=n}else{m.callbackFunc=null}h.getRouterInstance().sendCommandToGameService(m)}}}};__ngs._7i={_c:null,_d:function(){var g={exports:{}};var d=g.exports;this._c=g;var e=__ngs.r_(__ngs._d0);var b=__ngs.r_(__ngs._cz);var c=__ngs.r_(__ngs._1y).MessageEmitter;var a=d.GameLaunchPayload={getLastPayload:function(k){if(k!=undefined&&typeof k=="function"){var h={apiURL:"US.Service.GameLaunchPayload.getLastPayload"};h.callbackFunc=k;b.getRouterInstance().sendCommandToGameService(h)}},getNewPayloadEmitter:function(){if(!a.newGamePayloadEmitter){NgLogD("Creating new payload emitter...");a.newGamePayloadEmitter=new c()}return a.newGamePayloadEmitter},onGameLaunchPayload:function(h){a.getNewPayloadEmitter().emit(h.data.payload)}}}};__ngs._7j={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var c=__ngs.r_(__ngs._d0);var a=__ngs.r_(__ngs._cz);b.Achievements={showAchievementsScreen:function(){NgLogD("Public - showAchievementsScreen");var e={apiURL:"US.Service.Achievements.showAchievementsScreen"};a.getRouterInstance().sendCommandToGameService(e)}}}};__ngs._7k={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var c=__ngs.r_(__ngs._d0);var a=__ngs.r_(__ngs._cz);b.Bank={};b.Bank.Debit={createTransaction:function(e,l,k){NgLogD("Public call createTransaction");var h={billingItems:e,comment:l};var g={apiURL:"US.Service.Banking.Purchase.createTransaction",data:h};if(k!=undefined&&typeof k=="function"){g.callbackFunc=this._getCallBackFunc(k)}a.getRouterInstance().sendCommandToGameService(g)},openTransaction:function(h,g){NgLogD("Public call openTransaction");var e={apiURL:"US.Service.Banking.Purchase.openTransaction",data:{}};if(h){e.data.transactionId=h}if(g!=undefined&&typeof g=="function"){e.callbackFunc=this._getCallBackFunc(g)}a.getRouterInstance().sendCommandToGameService(e)},continueTransaction:function(h,g){NgLogD("Public call continueTransaction");var e={apiURL:"US.Service.Banking.Purchase.continueTransaction",data:{}};if(h){e.data.transactionId=h}if(g!=undefined&&typeof g=="function"){e.callbackFunc=g}a.getRouterInstance().sendCommandToGameService(e)},cancelTransaction:function(h,g){NgLogD("Public call cancelTransaction");var e={apiURL:"US.Service.Banking.Purchase.cancelTransaction",data:{}};if(h){e.data.transactionId=h}if(g!=undefined&&typeof g=="function"){e.callbackFunc=g}a.getRouterInstance().sendCommandToGameService(e)},closeTransaction:function(h,g){NgLogD("Public call closeTransaction");var e={apiURL:"US.Service.Banking.Purchase.closeTransaction",data:{}};if(h){e.data.transactionId=h}if(g!=undefined&&typeof g=="function"){e.callbackFunc=this._getCallBackFunc(g)}a.getRouterInstance().sendCommandToGameService(e)},getTransaction:function(h,g){NgLogD("Public call getTransaction");var e={apiURL:"US.Service.Banking.Purchase.getTransaction",data:{}};if(h){e.data.transactionId=h}if(g!=undefined&&typeof g=="function"){e.callbackFunc=this._getCallBackFunc(g)}a.getRouterInstance().sendCommandToGameService(e)},getPendingTransactions:function(g){NgLogD("Public call getPendingTransactions");var e={apiURL:"US.Service.Banking.Purchase.getPendingTransactions",data:{}};if(g!=undefined&&typeof g=="function"){e.callbackFunc=function(h,k){g(h.error,k.openTransactions)}}a.getRouterInstance().sendCommandToGameService(e)},_getCallBackFunc:function(e){return function(g,h){if(g){e(g,undefined)}else{e(g,h.transaction)}}}};b.Bank.Inventory={getItem:function(h,k){NgLogD("Public call Inventory getItem");var g={itemId:h};var e={apiURL:"US.Service.Banking.Purchase.getItem",data:g};if(k!=undefined&&typeof k=="function"){e.callbackFunc=function(l,m){if(l){k(l,undefined)}else{k(l,m.item)}}}a.getRouterInstance().sendCommandToGameService(e)},getIAPItems:function(e,k){NgLogD("Public call Inventory getIAPItems");var h={itemId:e};var g={apiURL:"US.Service.Banking.Purchase.getIAPItems",data:h};if(k!=undefined&&typeof k=="function"){g.callbackFunc=function(l,m){if(l){k(l,undefined)}else{k(l,m.item)}}}a.getRouterInstance().sendCommandToGameService(g)}}}};__ngs._7l={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var a=__ngs.r_(__ngs._n).ViewController;b.DialogController=a.subclass({classname:"DialogController",initialize:function($super,d,e){this._killOnShadeAction=e;this.createView(d)},dismissDialog:function(){TFSceneDirector._currentDialogController=null;if(this.getView()&&this.getView().__objectRegistryId){this.getView().destroy()}},onShadeTouched:function(d){console.log("DialogController > onShadeTouched > TOUCH RECEIVED");if(this._killOnShadeAction){d.setEnabled(false);this.dismissDialog()}}})}};__ngs._7m={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var a=__ngs.r_(__ngs._d2).DialogView;var c=__ngs.r_(__ngs._d3).PopUpDefinition;b.PopUpView=a.subclass({classname:"PopUpView",initialize:function($super,e){$super(e,c);if(this._parentController.buttons=="one"){this.cancelButton.setVisible(false);this.okButton.setPosition(this._definitions.cancelButton.info.alt_pos_x,this._definitions.okButton.pos_y);TFUtils.changeImageOnSprite(this.reg1Image,this._definitions.reg1Image.info.asset2)}if(this._parentController._otherData.newPosText){this.Text.setPosition(this._otherData.newPosText)}if(this._parentController._otherData.newSizeText){this.Text.setSize(this._parentController._otherData.newSizeText)}if(this._parentController._otherData.fontSize){this.Text.setFontSize(this._parentController._otherData.fontSize)}if(this._parentController._otherData.title&&this._parentController._otherData.title.length>1){this.Title.setText(Localization.getString(this._parentController._otherData.title))}else{this.Text.setPosition(this._definitions.Text.pos_x,0)}this.Text.setText(Localization.getString(this._parentController._otherData.fusionCost));if(this._parentController._otherData.textOffsetY){this.Text.setPosition(this.Text.getPosition().getX(),this.Text.getPosition().getY()+this._parentController._otherData.textOffsetY)}if(this._parentController._otherData.text){this.Text.setText(this._parentController._otherData.text)}if(this._parentController._otherData.cancelButtonText){this.cancelButton.setText(this._parentController._otherData.cancelButtonText)}if(this._parentController._otherData.okButtonText){this.okButton.setText(this._parentController._otherData.okButtonText)}if(this._parentController._otherData.fusionCostIcon){this.Credits.setText(this._parentController._otherData.fusionCostIcon);this.Credits.setVisible(true);this.creditsImage.setVisible(true);this.fusionCost2.setVisible(true);this.Credits.setPosition(62,-14);this.creditsImage.setPosition(147,-20);this.fusionCost2.setText(this._parentController._otherData.fusionCost2);this.Text.setPosition(-30,-15)}if(this._parentController._otherData.transformCostIcon){this.Credits.setText(this._parentController._otherData.transformCostIcon);this.Credits.setVisible(true);this.creditsImage.setVisible(true);this.fusionCost2.setVisible(true);this.Credits.setPosition(-80,10);this.creditsImage.setPosition(10,5);this.fusionCost2.setText(this._parentController._otherData.fusionCost2);this.fusionCost2.setPosition(0,20)}if(this._parentController._otherData.fusionCostNegative){this.Credits.setText(this._parentController._otherData.fusionCostNegative);this.Credits.setVisible(true);this.creditsImage.setVisible(true);this.fusionCost2.setVisible(true);this.Credits.setPosition(-80,10);this.creditsImage.setPosition(10,5);this.fusionCost2.setText(this._parentController._otherData.fusionCost2);this.fusionCost2.setPosition(0,40);this.Text.setPosition(0,-15)}if(this._parentController._otherData.sellCost){this.Credits.setText(this._parentController._otherData.sellCost);this.Credits.setVisible(true);this.creditsImage.setVisible(true);this.Credits.setPosition(-80,-14);this.creditsImage.setPosition(5,-20)}},destroy:function($super){$super()}})}};__ngs._7n={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;function b(e){console.log("ObjectRequestXhr.ObjectRequestXhr called. oauthCredentials=%s",JSON.stringify(e));this.oauthCredentials=e}function d(q,k,l){var h;var g;var o;if(l){h=3;g=10000;o=1}else{h=Infinity;g=30000;o=6}g=Core.Time.getRealTime()+g;var p=1000;var s=1;var m=false;var e=true;var n=function(){if(m){return}if(!e){console.log("OperationWithRetries: failureParam called when not armed");return}e=false;if(s>=h){console.log("OperationWithRetries: too many retry attempts");m=true;k();return}if(Core.Time.getRealTime()>=g&&s>=o){console.log("OperationWithRetries: retries took too long");console.log("OperationWithRetries: abortTime:",g,"realTime:",Core.Time.getRealTime());console.log("OperationWithRetries: attemptCount:",s,"abortTimeAttempts:",o);m=true;k();return}console.log("OperationWithRetries: Failure, will retry in "+p+"ms");setTimeout(function(){if(m){return}e=true;q(n,r)},p);s+=1;p*=2};var r=function(){var t=true;k()};q(n,r);return r}b.prototype.request=function(e,g,l,h,k){var p,o;this.attemptNumber=0;this.lastErrorResponse="no error";this.responses=[];this.startTime=(new Date()).getTime();p={action:g,method:e,parameters:l};o=Math.round(Math.random()*10000);console.log("ObjectRequestXhr.prototype.request called. uid=%s, message=%s",o,JSON.stringify(p));OAuth.completeRequest(p,this.oauthCredentials);var m=function(s,r){console.log("ObjectRequestXhr: OperationWithRetries: uid=%s - %s",o,p.action);var u=__ngs.r_(__ngs._o).TFSceneDirector;if(u.debugText){u.debugText.setText("Attempt "+this.attemptNumber+" (response "+this.lastErrorResponse+") - "+l.handler)}this.attemptNumber++;var q=new Network.XHR();q.onreadystatechange=function(A){console.log("ObjectRequestXhr.onreadystatechange called. uid=%s, this.readyState=%s, message.action=%s",o,q.readyState,p.action);if(q.readyState==4){var z,w;z={status:q.status,headers:q.getUnflattenedResponseHeaders()};w=null;this.responses.push(z.status);console.log("ObjectRequestXhr.onreadystatechange uid=%s, res.status=%d",o,z.status);try{if(z.status==200){console.log("ObjectRequestXhr.onreadystatechange uid=%s, typeof(req.responseText)=%s",o,typeof(q.responseText));z.data=q.responseText;if(u.debugText){u.debugText.setText("")}}else{if(Server.noRetryStatusCodes.indexOf(z.status)!=-1){if(u.debugText){u.debugText.setText("")}}else{this.lastErrorResponse=z.status;console.log("ObjectRequestXhr.onreadystatechange uid=%s, invalid response code of %d",o,z.status);return s()}}}catch(y){z={};w=JSON.stringify(y)}if(w!=undefined){console.log("ObjectRequestXhr.onreadystatechange uid=%s Error, exception parsing response. error=%s",o,w)}if(this.attemptNumber>1){var v={endpoint:l.handler,num_retries:this.attemptNumber-1,timetaken:(new Date()).getTime()-this.startTime,result:true};for(var x=0;x<this.responses.length;++x){v["resp_code_"+(x+1)]=this.responses[x]}TFAnalytics.reportGameEvent("SERVERRETRY",v)}if(A&&typeof(A)=="function"){console.log("ObjectRequestXhr.onreadystatechange uid=%s. Calling callback.",o);A(w,z)}}}.bind(this,k);q.open(e,g,true);q.setRequestHeader("Content-Type","application/json");q.setRequestHeader("Authorization",OAuth.getAuthorizationHeader(undefined,p.parameters));for(var t in h){q.setRequestHeader(t,h[t])}if(l!=null){q.send(JSON.stringify(l))}else{console.log("ObjectRequestXhr uid=%s. No req.send due to no data",o)}}.bind(this);var n=function(u){var q={endpoint:l.handler,num_retries:this.attemptNumber-1,timetaken:(new Date()).getTime()-this.startTime,result:false};for(var t=0;t<this.responses.length;++t){q["resp_code_"+(t+1)]=this.responses[t]}TFAnalytics.reportGameEvent("SERVERRETRY",q);if(u&&typeof(u)=="function"){var s={};var r="IOError";console.log("ObjectRequestXhr OperationWithRetries failure for uid=%s. Calling callback.",o);u(r,s)}}.bind(this,k);d(m,n,false)};a.ObjectRequestXhr=b}};__ngs._7o={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.SerializationQueue=Core.Class.singleton({classname:"SerializationQueue",exposedClassname:"SerializationQueue",initialize:function(){console.log("SerializationQueue.initialize called.");this.queue=[]},_push:function(c){this.queue.push(c);console.log("SerializationQueue length (push):",this.queue.length);if(this.queue.length==1){c(this._nextInQueue.bind(this))}},_nextInQueue:function(){this.queue.shift();if(this.queue.length>0){setTimeout(function(d,c){d(c)}.bind(this,this.queue[0],this._nextInQueue.bind(this)),0)}console.log("SerializationQueue length (shift):",this.queue.length)},destroy:function(){}})}};__ngs._7p={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var a=__ngs.r_(__ngs._4e).GLButton;var d=__ngs.r_(__ngs._4b).UILoader;b.View=GL2.Node.subclass({classname:"View",initialize:function(g,h,e){this.clippingObjects=[];this._parentController=g;this._definitions=new Array();this._totalHeight=0;this._viewData=h;this._viewIsLoaded=false;this._loadDoneCallbacks=[];if(e){console.log("(DYNAMICJSON) View("+this.classname+") > initialize > saving load done callback");this._loadDoneCallbacks.push(e)}else{if(g&&g.onViewsDoneLoading){this._loadDoneCallbacks.push(g.onViewsDoneLoading.bind(g,this))}}if(typeof h==="string"){console.log("(DYNAMICJSON) View("+this.classname+") > initialize > loading dynamic view data");d.loadViewDataJSON(h,this.onViewDoneLoading.bind(this))}else{console.log("(DYNAMICJSON) View("+this.classname+") > initialize > using static (or undefined) view data");this.onViewDoneLoading(h)}},viewIsLoaded:function(){return this._viewIsLoaded},onViewDoneLoading:function(e){console.log("(DYNAMICJSON) View("+this.classname+") > onViewDoneLoading");this._viewData=e;if(e!==undefined){d.loadView(e,this)}this._viewIsLoaded=true;for(var g in this._loadDoneCallbacks){console.log("(DYNAMICJSON) View("+this.classname+") > onViewDoneLoading > invoking loadDoneCallback "+g);this._loadDoneCallbacks[g]()}},addLoadDoneCallback:function(e){if(this.viewIsLoaded()){e()}else{this._loadDoneCallbacks.push(e)}},getParentController:function(){return this._parentController},destroyAllChildren:function(g){var e=g._children;while(e&&e.length){this.destroyAllChildren(e[0]);e[0].destroy()}},destroy:function($super){this.destroyAllChildren(this);this._parentController=null;this._viewData=null;this._definitions=null;$super()},updateClipping:function(){for(var e=0;e<this.clippingObjects.length;++e){this.clippingObjects[e].updateClipping()}},addClippingObject:function(e){this.clippingObjects.push(e)}})}};__ngs._7q={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.BottomHudViewDefinition={images:[{name:"bottomUIBackgroundLeft",anchor_x:0,anchor_y:1,pos_x:0,pos_y:0,size_x:320,size_y:142.5,flip_x:true,asset:"Content/Images8x/UI/HUD/hud_bottom_5.png"},{name:"bottomUIBackgroundRight",anchor_x:1,anchor_y:1,pos_x:640,pos_y:0,size_x:320,size_y:142.5,asset:"Content/Images8x/UI/HUD/hud_bottom_5.png"},{name:"deckicon",anchor_x:0,anchor_y:1,pos_x:53,pos_y:-46,size_x:58,size_y:58,depth:3,color:[170,224,255],asset:"Content/Images8x/UI/icon/icon_0_team.png"},{name:"cardsicon",anchor_x:0.5,anchor_y:1,pos_x:198,pos_y:-46,size_x:58,size_y:58,depth:3,color:[170,224,255],asset:"Content/Images8x/UI/icon/icon_0_base.png"},{name:"fusionicon",anchor_x:0.5,anchor_y:1,pos_x:320,pos_y:-48,size_x:50,size_y:50,depth:3,color:[170,224,255],asset:"Content/Images8x/UI/icon/icon_0_upgrade.png"},{name:"transformicon",anchor_x:0.5,anchor_y:1,pos_x:442,pos_y:-46,size_x:52,size_y:52,depth:3,color:[170,224,255],asset:"Content/Images8x/UI/icon/icon_0_trans_scan.png"},{name:"dexicon",anchor_x:0.5,anchor_y:1,pos_x:556,pos_y:-44,size_x:58,size_y:58,depth:3,color:[170,224,255],asset:"Content/Images8x/UI/icon/icon_dex.png"},{name:"tabSelectedDeck",anchor_x:0.5,anchor_y:1,pos_x:83,pos_y:-10,size_x:110,size_y:96,depth:2,asset:"Content/Images8x/UI/HUD/hud_bottom_selected_s1.png",visible:false},{name:"tabSelectedCards",anchor_x:0.5,anchor_y:1,pos_x:198,pos_y:-10,size_x:110,size_y:96,depth:2,asset:"Content/Images8x/UI/HUD/hud_bottom_selected_s3.png",visible:false},{name:"tabSelectedFusion",anchor_x:0.5,anchor_y:1,pos_x:320,pos_y:-10,size_x:122,size_y:96,depth:2,asset:"Content/Images8x/UI/HUD/hud_bottom_selected_s3.png",visible:false},{name:"tabSelectedTransform",anchor_x:0.5,anchor_y:1,pos_x:442,pos_y:-10,size_x:110,size_y:96,depth:2,asset:"Content/Images8x/UI/HUD/hud_bottom_selected_s3.png",visible:false},{name:"tabSelectedDex",anchor_x:0.5,anchor_y:1,pos_x:557,pos_y:-10,size_x:110,size_y:96,depth:2,flip_x:true,asset:"Content/Images8x/UI/HUD/hud_bottom_selected_s1.png",visible:false}],labels:[{name:"deckLabel",anchor_x:0.5,anchor_y:0.5,pos_x:79,pos_y:-30,depth:3,text:"",font_size:18,fontType:"Content/Fonts/TransformersMovie.ttf",horizontalAlign:"center",verticalAlign:"middle",color:[170,224,255]},{name:"cardLabel",anchor_x:0.5,anchor_y:0.5,pos_x:198,pos_y:-30,depth:3,text:"",font_size:18,fontType:"Content/Fonts/TransformersMovie.ttf",horizontalAlign:"center",verticalAlign:"middle",color:[170,224,255]},{name:"fusionLabel",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:-30,depth:3,text:"",font_size:16,fontType:"Content/Fonts/TransformersMovie.ttf",horizontalAlign:"center",verticalAlign:"middle",color:[170,224,255]},{name:"colleLabel",anchor_x:0.5,anchor_y:0.5,pos_x:442,pos_y:-30,depth:3,text:"",font_size:16,fontType:"Content/Fonts/TransformersMovie.ttf",horizontalAlign:"center",verticalAlign:"middle",color:[170,224,255]},{name:"dexLabel",anchor_x:0.5,anchor_y:0.5,pos_x:556,pos_y:-30,depth:3,text:"",font_size:16,fontType:"Content/Fonts/TransformersMovie.ttf",horizontalAlign:"center",verticalAlign:"middle",color:[170,224,255]}],buttons:[{name:"deckButton",anchor_x:0.5,anchor_y:1,pos_x:83,pos_y:-10,size_x:110,size_y:96,depth:2,alpha:0.3,multiAsset:{selectedAsset:"Content/Images8x/UI/HUD/hud_bottom_selected_s1.png"},action:"onDeckButtonPressed",sound:["click_high"]},{name:"cardButton",anchor_x:0.5,anchor_y:1,pos_x:198,pos_y:-10,size_x:110,size_y:96,depth:2,alpha:0.3,multiAsset:{selectedAsset:"Content/Images8x/UI/HUD/hud_bottom_selected_s3.png"},action:"onCardButtonPressed",sound:["click_high"]},{name:"fusionButton",anchor_x:0.5,anchor_y:1,pos_x:320,pos_y:-10,size_x:122,size_y:96,depth:2,alpha:0.3,multiAsset:{selectedAsset:"Content/Images8x/UI/HUD/hud_bottom_selected_s3.png"},action:"onFusionButtonPressed",sound:["click_high"]},{name:"colleButton",anchor_x:0.5,anchor_y:1,pos_x:442,pos_y:-10,size_x:110,size_y:96,depth:2,alpha:0.3,multiAsset:{selectedAsset:"Content/Images8x/UI/HUD/hud_bottom_selected_s3.png"},action:"onColleButtonPressed",sound:["click_high"]},{name:"dexButton",anchor_x:0.5,anchor_y:1,pos_x:557,pos_y:-10,size_x:110,size_y:96,flip_x:true,depth:2,alpha:0.3,multiAsset:{selectedAsset:"Content/Images8x/UI/HUD/hud_bottom_selected_s1.png"},action:"onDexButtonPressed",sound:["click_high"]}]}}};__ngs._7r={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.Audio={};a.Audio.__defineGetter__("ActiveEffect",function(){delete this.ActiveEffect;return this.ActiveEffect=__ngs.r_(__ngs._d4).ActiveEffect});a.Audio.__defineGetter__("Effect",function(){delete this.Effect;return this.Effect=__ngs.r_(__ngs._d5).Effect});a.Audio.__defineGetter__("Device",function(){delete this.Device;return this.Device=__ngs.r_(__ngs._9).Device});a.Audio.__defineGetter__("Music",function(){delete this.Music;return this.Music=__ngs.r_(__ngs._d6).Music});a.Audio.__defineGetter__("Diagnostics",function(){delete this.Diagnostics;return this.Diagnostics=__ngs.r_(__ngs._29).Diagnostics})}};__ngs._7s={_c:null,_d:function(){var c={exports:{}};var g=c.exports;this._c=c;var l=__ngs.r_(__ngs._5).Core;var m=__ngs.r_(__ngs._f).GL2;var b=__ngs.r_(__ngs._4).Device;var h=__ngs.r_(__ngs._48).TFSoundManager;var a=__ngs.r_(__ngs._d7).TFButtonShine;var d=__ngs.r_(__ngs._7u).GLText;var k=__ngs.r_(__ngs._45).AnimationManager;var e=__ngs.r_(__ngs._45).AnimationQueue;g.TFButton=m.TouchTarget.subclass({classname:"TFButton",CENTER_OF_BUTTON_IMAGE:0.5,initialize:function(n,p,o){this.kDebounceTime=500;this._enabled=true;this._feedback=true;this._debugTouches=true;this._redirectTouchTargets={};this._textOffsetX=0;this._textOffsetY=0;this._touchListener=new l.MessageListener();this.getTouchEmitter().addListener(this._touchListener,this.onTouch.bind(this));this._type=!isNaN(o)?o:1;this.originalSize=new l.Size(105,105);this.originalButtonSize=new l.Size(this.originalSize.getWidth()*3,this.originalSize.getHeight());this.buttonSize=new l.Size(this.originalSize.getWidth()*3,this.originalSize.getHeight());this.setup();this.setText(p);this._soundArray=["METAL"];this._randomSound=false;this.setOnPressCallback(n);this._am=new k()},setDebounce:function(n){if(typeof(n)!="number"){throw new Error("Unexpected object type "+typeof(n)+" passed into TFButton.setDebounce()")}this.kDebounceTime=n},setFeedback:function(n){if(this._feedback==n){return}this._feedback=n;this.stateChanged()},setEnabled:function(n){if(this._enabled==n){return}if(this._debugTouches){console.log("TFButton::setEnabled - enabled="+n+", trackingId="+this._trackingId)}if(!n&&this._trackingId){if(this._debugTouches){console.log("TFButton::setEnabled - clearing tracking ID")}TFSceneDirector.enableGlobalTouches("GLButton [setEnabled]");this._trackingId=undefined;this.setHighlighted(false)}this._enabled=n;this.stateChanged()},setOnPressCallback:function(n){if(n){this._cbHook=n}},setIgnore:function(n){this.ignore=n},_cb:function(o){if(this._soundArray.length>0){if(this._randomSound){var n=Math.floor(Math.random()*this._soundArray.length)}else{h.playSound(this._soundArray[0])}}if(this._cbHook){this._cbHook(o)}},setSize:function(o){m.TouchTarget.prototype.setSize.call(this,o);if(this._textLabel){this.updateLabelPosition()}this.buttonSize=new l.Size(o.getWidth(),o.getHeight());var n=this.buttonSize.getWidth()-this.originalSize.getWidth()*2;if(this._picNode){this._picNode.rightMain.setPosition(new l.Point(o.getWidth(),0));if(n>0){this._picNode.centerMain.setScale(new l.Vector(n/this.originalSize.getWidth(),1));this._picNode.centerMain.setPosition(new l.Point(this.buttonSize.getWidth()/2,0))}else{this._picNode.leftMain.setScale((this.buttonSize.getWidth()*0.5)/this.originalSize.getWidth(),1);this._picNode.rightMain.setScale((this.buttonSize.getWidth()*0.5)/this.originalSize.getWidth(),1);this._picNode.centerMain.setVisible(false)}this._picNode.setPosition(new l.Point(this.getAnchor().getX()*-this.buttonSize.getWidth(),this.getAnchor().getY()*-this.buttonSize.getHeight()));this._picNode.setScale(1,this.buttonSize.getHeight()/this.originalButtonSize.getHeight())}if(this._altpicNode){this._altpicNode.rightMain.setPosition(new l.Point(o.getWidth(),0));if(n>0){this._altpicNode.centerMain.setScale(new l.Vector(n/this.originalSize.getWidth(),1));this._altpicNode.centerMain.setPosition(new l.Point(this.buttonSize.getWidth()/2,0))}else{this._altpicNode.leftMain.setScale((this.buttonSize.getWidth()*0.5)/this.originalSize.getWidth(),1);this._altpicNode.rightMain.setScale((this.buttonSize.getWidth()*0.5)/this.originalSize.getWidth(),1);this._altpicNode.centerMain.setVisible(false)}this._altpicNode.setPosition(new l.Point(this.getAnchor().getX()*-this.buttonSize.getWidth(),this.getAnchor().getY()*-this.buttonSize.getHeight()));this._altpicNode.setScale(1,this.buttonSize.getHeight()/this.originalButtonSize.getHeight())}this.startShine()},setAnchor:function(n){m.TouchTarget.prototype.setAnchor.call(this,n);if(this._picNode){this._picNode.setPosition(new l.Point(this.getAnchor().getX()*-this.buttonSize.getWidth(),this.getAnchor().getY()*-this.buttonSize.getHeight()))}if(this._altpicNode){this._altpicNode.setPosition(new l.Point(this.getAnchor().getX()*-this.buttonSize.getWidth(),this.getAnchor().getY()*-this.buttonSize.getHeight()))}},setPosition:function(o,n){m.TouchTarget.prototype.setPosition.call(this,o,n);if(this._textLabel){this.updateLabelPosition()}},setImage:function(n){},setup:function(){if((this._type>=1)&&(this._type<=4)){this.CENTER_OF_BUTTON_IMAGE=0.43}var n;if(!this._picNode){this._picNode=new m.Node();n=new m.Sprite();n.setDepth(1);this._picNode.addChild(n);if(this._type==0){n.setImage("./Content/Images8x/UI/button/btn_tf2_middle_a.png",this.originalSize,new l.Point(0.5,0))}else{if(this._type>=1&&this._type<=4){n.setImage("./Content/Images8x/UI/button/btn_tf_middle_a.png",this.originalSize,new l.Point(0.5,0))}else{if(this._type>=5&&this._type<=8){n.setImage("./Content/Images8x/UI/button/btn_tf2_middle_a.png",this.originalSize,new l.Point(0.5,0))}else{if(this._type>=9&&this._type<=12){n.setImage("./Content/Images8x/UI/button/button03_reg_mid.png",this.originalSize,new l.Point(0.5,0))}else{if(this._type==13||this._type==14){n.setImage("./Content/Images8x/UI/button/btn_switch_mid_a.png",this.originalSize,new l.Point(0.5,0))}}}}}n.setPosition(new l.Point(this.originalButtonSize.getWidth()/2,0));this._picNode.centerMain=n;n=new m.Sprite();n.setDepth(1);this._picNode.addChild(n);if(this._type==0){n.setImage("./Content/Images8x/UI/button/btn_tf2_left_c.png",this.originalSize,new l.Point(0,0))}else{if(this._type==3||this._type==4){n.setImage("./Content/Images8x/UI/button/btn_tf_right_a.png",this.originalSize,new l.Point(0,0),[1,0,-1,1])}else{if(this._type==1||this._type==2){n.setImage("./Content/Images8x/UI/button/btn_tf_left_a.png",this.originalSize,new l.Point(0,0))}else{if(this._type==8||this._type==7){n.setImage("./Content/Images8x/UI/button/btn_tf2_right_a.png",this.originalSize,new l.Point(0,0),[1,0,-1,1])}else{if(this._type==5||this._type==6){n.setImage("./Content/Images8x/UI/button/btn_tf2_left_a.png",this.originalSize,new l.Point(0,0))}else{if(this._type==12||this._type==11){n.setImage("./Content/Images8x/UI/button/button03_reg_right.png",this.originalSize,new l.Point(0,0),[1,0,-1,1])}else{if(this._type==9||this._type==10){n.setImage("./Content/Images8x/UI/button/button03_reg_left.png",this.originalSize,new l.Point(0,0))}else{if(this._type==13){n.setImage("./Content/Images8x/UI/button/btn_switch_left_a.png",this.originalSize,new l.Point(0,0))}else{if(this._type==14){n.setImage("./Content/Images8x/UI/button/btn_switch_right_a.png",this.originalSize,new l.Point(0,0),[1,0,-1,1])}}}}}}}}}this._picNode.leftMain=n;n=new m.Sprite();n.setDepth(1);this._picNode.addChild(n);if(this._type==0){n.setImage("./Content/Images8x/UI/button/btn_tf2_left_a.png",this.originalSize,new l.Point(1,0),[1,0,-1,1])}else{if(this._type==2||this._type==4){n.setImage("./Content/Images8x/UI/button/btn_tf_left_a.png",this.originalSize,new l.Point(1,0),[1,0,-1,1])}else{if(this._type==1||this._type==3){n.setImage("./Content/Images8x/UI/button/btn_tf_right_a.png",this.originalSize,new l.Point(1,0))}else{if(this._type==6||this._type==8){n.setImage("./Content/Images8x/UI/button/btn_tf2_left_a.png",this.originalSize,new l.Point(1,0),[1,0,-1,1])}else{if(this._type==5||this._type==7){n.setImage("./Content/Images8x/UI/button/btn_tf2_right_a.png",this.originalSize,new l.Point(1,0))}else{if(this._type==10||this._type==12){n.setImage("./Content/Images8x/UI/button/button03_reg_left.png",this.originalSize,new l.Point(1,0),[1,0,-1,1])}else{if(this._type==9||this._type==11){n.setImage("./Content/Images8x/UI/button/button03_reg_right.png",this.originalSize,new l.Point(1,0))}else{if(this._type==13){n.setImage("./Content/Images8x/UI/button/btn_switch_right_a.png",this.originalSize,new l.Point(1,0))}else{if(this._type==14){n.setImage("./Content/Images8x/UI/button/btn_switch_left_a.png",this.originalSize,new l.Point(1,0),[1,0,-1,1])}}}}}}}}}n.setPosition(new l.Point(this.originalButtonSize.getWidth(),0));this._picNode.rightMain=n}this._picNode.setPosition(new l.Point(this.getAnchor().getX()*-this.originalButtonSize.getWidth(),this.getAnchor().getY()*-this.originalButtonSize.getHeight()));this.addChild(this._picNode);if(!this._altpicNode){if(this._type==0){this._altpicNode=new m.Node();n=new m.Sprite();n.setDepth(1);this._altpicNode.addChild(n);n.setImage("./Content/Images8x/UI/button/btn_tf2_middle_b.png",this.originalSize,new l.Point(0.5,0));n.setPosition(new l.Point(this.originalButtonSize.getWidth()/2,0));this._altpicNode.centerMain=n;n=new m.Sprite();n.setDepth(1);this._altpicNode.addChild(n);n.setImage("./Content/Images8x/UI/button/btn_tf2_left_d.png",this.originalSize,new l.Point(0,0));this._altpicNode.leftMain=n;n=new m.Sprite();n.setDepth(1);this._altpicNode.addChild(n);n.setImage("./Content/Images8x/UI/button/btn_tf2_left_b.png",this.originalSize,new l.Point(1,0),[1,0,-1,1]);n.setPosition(new l.Point(this.originalButtonSize.getWidth(),0));this._altpicNode.rightMain=n;this._altpicNode.setPosition(new l.Point(this.getAnchor().getX()*-this.originalButtonSize.getWidth(),this.getAnchor().getY()*-this.originalButtonSize.getHeight()));this.addChild(this._altpicNode);this._altpicNode.setVisible(false)}else{if((this._type>=1)&&(this._type<=4)){this._altpicNode=new m.Node();n=new m.Sprite();n.setDepth(1);this._altpicNode.addChild(n);n.setImage("./Content/Images8x/UI/button/btn_tf_middle_b.png",this.originalSize,new l.Point(0.5,0));n.setPosition(new l.Point(this.originalButtonSize.getWidth()/2,0));this._altpicNode.centerMain=n;n=new m.Sprite();n.setDepth(1);this._altpicNode.addChild(n);if(this._type==3||this._type==4){n.setImage("./Content/Images8x/UI/button/btn_tf_right_b.png",this.originalSize,new l.Point(0,0),[1,0,-1,1])}else{if(this._type==1||this._type==2){n.setImage("./Content/Images8x/UI/button/btn_tf_left_b.png",this.originalSize,new l.Point(0,0))}}this._altpicNode.leftMain=n;n=new m.Sprite();n.setDepth(1);this._altpicNode.addChild(n);if(this._type==2||this._type==4){n.setImage("./Content/Images8x/UI/button/btn_tf_left_b.png",this.originalSize,new l.Point(1,0),[1,0,-1,1])}else{if(this._type==1||this._type==3){n.setImage("./Content/Images8x/UI/button/btn_tf_right_b.png",this.originalSize,new l.Point(1,0))}}n.setPosition(new l.Point(this.originalButtonSize.getWidth(),0));this._altpicNode.rightMain=n;this._altpicNode.setPosition(new l.Point(this.getAnchor().getX()*-this.originalButtonSize.getWidth(),this.getAnchor().getY()*-this.originalButtonSize.getHeight()));this.addChild(this._altpicNode);this._altpicNode.setVisible(false)}else{if((this._type>=5)&&(this._type<=8)){this._altpicNode=new m.Node();n=new m.Sprite();n.setDepth(1);this._altpicNode.addChild(n);n.setImage("./Content/Images8x/UI/button/btn_tf2_middle_b.png",this.originalSize,new l.Point(0.5,0));n.setPosition(new l.Point(this.originalButtonSize.getWidth()/2,0));this._altpicNode.centerMain=n;n=new m.Sprite();n.setDepth(1);this._altpicNode.addChild(n);if(this._type==7||this._type==8){n.setImage("./Content/Images8x/UI/button/btn_tf2_right_b.png",this.originalSize,new l.Point(0,0),[1,0,-1,1])}else{if(this._type==5||this._type==6){n.setImage("./Content/Images8x/UI/button/btn_tf2_left_b.png",this.originalSize,new l.Point(0,0))}}this._altpicNode.leftMain=n;n=new m.Sprite();n.setDepth(1);this._altpicNode.addChild(n);if(this._type==6||this._type==8){n.setImage("./Content/Images8x/UI/button/btn_tf2_left_b.png",this.originalSize,new l.Point(1,0),[1,0,-1,1])}else{if(this._type==5||this._type==7){n.setImage("./Content/Images8x/UI/button/btn_tf2_right_b.png",this.originalSize,new l.Point(1,0))}}n.setPosition(new l.Point(this.originalButtonSize.getWidth(),0));this._altpicNode.rightMain=n;this._altpicNode.setPosition(new l.Point(this.getAnchor().getX()*-this.originalButtonSize.getWidth(),this.getAnchor().getY()*-this.originalButtonSize.getHeight()));this.addChild(this._altpicNode);this._altpicNode.setVisible(false)}else{if(this._type==13){this._altpicNode=new m.Node();n=new m.Sprite();n.setDepth(1);this._altpicNode.addChild(n);n.setImage("./Content/Images8x/UI/button/btn_switch_mid_b.png",this.originalSize,new l.Point(0.5,0));n.setPosition(new l.Point(this.originalButtonSize.getWidth()/2,0));this._altpicNode.centerMain=n;n=new m.Sprite();n.setDepth(1);this._altpicNode.addChild(n);n.setImage("./Content/Images8x/UI/button/btn_switch_left_b.png",this.originalSize,new l.Point(0,0));this._altpicNode.leftMain=n;n=new m.Sprite();n.setDepth(1);this._altpicNode.addChild(n);n.setImage("./Content/Images8x/UI/button/btn_switch_right_b.png",this.originalSize,new l.Point(1,0));n.setPosition(new l.Point(this.originalButtonSize.getWidth(),0));this._altpicNode.rightMain=n;this._altpicNode.setPosition(new l.Point(this.getAnchor().getX()*-this.originalButtonSize.getWidth(),this.getAnchor().getY()*-this.originalButtonSize.getHeight()));this.addChild(this._altpicNode);this._altpicNode.setVisible(false)}else{if(this._type==14){this._altpicNode=new m.Node();n=new m.Sprite();n.setDepth(1);this._altpicNode.addChild(n);n.setImage("./Content/Images8x/UI/button/btn_switch_mid_b.png",this.originalSize,new l.Point(0.5,0));n.setPosition(new l.Point(this.originalButtonSize.getWidth()/2,0));this._altpicNode.centerMain=n;n=new m.Sprite();n.setDepth(1);this._altpicNode.addChild(n);n.setImage("./Content/Images8x/UI/button/btn_switch_right_b.png",this.originalSize,new l.Point(0,0),[1,0,-1,1]);this._altpicNode.leftMain=n;n=new m.Sprite();n.setDepth(1);this._altpicNode.addChild(n);n.setImage("./Content/Images8x/UI/button/btn_switch_left_b.png",this.originalSize,new l.Point(1,0),[1,0,-1,1]);n.setPosition(new l.Point(this.originalButtonSize.getWidth(),0));this._altpicNode.rightMain=n;this._altpicNode.setPosition(new l.Point(this.getAnchor().getX()*-this.originalButtonSize.getWidth(),this.getAnchor().getY()*-this.originalButtonSize.getHeight()));this.addChild(this._altpicNode);this._altpicNode.setVisible(false)}}}}}}},getText:function(){return this._text},setText:function(n){this._text=n;if(this._text!==undefined){if(!this._textLabel){this._textLabel=new d();this._textLabel.setDepth(2);this.addChild(this._textLabel);this._textLabel.setVisible(true);this._textLabel.setAnchor(new l.Point(0.5,0.5));this.updateLabelPosition();this._textLabel.setHorizontalAlign(m.Text.HorizontalAlign.Center);this._textLabel.setVerticalAlign(m.Text.VerticalAlign.Middle);this.setTextColor(this._textColor)}this._textLabel.setText(this._text)}else{if(this._textLabel){this.removeChild(this._textLabel);this._textLabel.destroy();this._textLabel=undefined}}},setHighlightCallback:function(n){console.log("TFButton > setHighlightCallback");this._highlightCallback=n},setRelaxedDebounce:function(n){console.log("TFButton > setRelaxedDebounce > value="+n);this.relaxedDebounce=n},onTouch:function(o){if(this._debugTouches){console.log("TFButton::onTouch - touch="+((o.getAction()==m.Touch.Action.Start)?"START":((o.getAction()==m.Touch.Action.Move)?"MOVE":(o.getAction()==m.Touch.Action.End)?"END":"???"))+", enabled="+this._enabled+", visible="+this.getVisible()+", tracking="+this.trackingId+", moving="+this._moving)}if((this.ignore===true)||(this._ignoreInt===true)){return}if(!this._enabled){return false}if(!this.getVisible()){return false}var n=this.getParent();while(n){if(n.getVisible&&!n.getVisible()){return false}n=n.getParent?n.getParent():undefined}if(this._redirectTouchTargets[o.getId()]){if(TFUtils.DEBUG_REDIRECTED_TOUCHES){console.log("(TOUCHREDIRECT) Redirecting touch("+o.getId()+") to new callback")}this._redirectTouchTargets[o.getId()](o);if(o.getAction()==m.Touch.Action.End){if(TFUtils.DEBUG_REDIRECTED_TOUCHES){console.log("(TOUCHREDIRECT) Removing touch("+o.getId()+") redirection")}this._redirectTouchTargets[o.getId()]=undefined}return}switch(o.getAction()){case m.Touch.Action.Start:if(this._trackingId&&this._trackingId!=o.getId()){return true}this._initial=o.getPosition();this._oldHighlighted=this._highlighted;this.setHighlighted(true);this._trackingId=o.getId();TFSceneDirector.disableGlobalTouches("TFButton");break;case m.Touch.Action.Move:if(this._trackingId!=o.getId()){return}if(!o.getIsInside(this)||(Math.sqrt((this._initial._y-o._position._y)*(this._initial._y-o._position._y))>45)){this._trackingId=undefined;this.setHighlighted(this._oldHighlighted);TFSceneDirector.enableGlobalTouches("TFButton [REDIRECT]");if(!this._inhibitTouchRedirect){if(TFUtils.DEBUG_REDIRECTED_TOUCHES){console.log("(TOUCHREDIRECT) Trying to redirect touch("+o.getId()+") to parent node")}n=this.getParent();while(n){if(TFUtils.DEBUG_REDIRECTED_TOUCHES){console.log("(TOUCHREDIRECT) Parent classname="+n.classname)}if(n.redirectTouch){if(TFUtils.DEBUG_REDIRECTED_TOUCHES){console.log("(TOUCHREDIRECT) Redirecting touch("+o.getId()+") to new node")}this._redirectTouchTargets[o.getId()]=n.redirectTouch(o);break}n=n.getParent?n.getParent():undefined}}}break;case m.Touch.Action.End:if(this._trackingId!=o.getId()){return}this._trackingId=undefined;this.setHighlighted(false);if(o.getAction()==m.Touch.Action.End&&o.getIsInside(this)&&!this._moving){this.doActionWithDebounce()}this._moving=false;TFSceneDirector.enableGlobalTouches("TFButton [END]");break;default:return false}return true},_ccTouchesBegan:function(n){return false},_ccTouchesMoved:function(n){},_ccTouchesEnded:function(n){},destroyListeners:function(){if(this.__updateListener){this.__updateListener.destroy()}this.__updateListener=null;if(this.__touchListener){this.__touchListener.destroy()}this.__touchListener=null},doActionWithDebounce:function(){var n=this._lastTap;this._lastTap=new Date();if(n){if((this._lastTap-n)<this.kDebounceTime){if(this.relaxedDebounce){this._lastTap=n}if(this._debugTouches){console.log("TFButton::doActionWithDebounce - Canceling callback due to debounce")}return}}if(this._cb&&this._ignoreInt!==true){this._ignoreInt=true;if(this._debugTouches){console.log("TFButton::doActionWithDebounce - Invoking callback")}this._cb(this);this._ignoreInt=false}},setHighlighted:function(n){if(this._highlighted==n){return}this._highlighted=n;if((this._type!=13)&&(this._type!=14)){if(this._highlighted){this.setPosition(this.getPosition().getX(),this.getPosition().getY()+2)}else{this.setPosition(this.getPosition().getX(),this.getPosition().getY()-2)}}if(this._highlightCallback){console.log("TFButton > setHighlighted > invoking highlight callback");this._highlightCallback(this._highlighted)}if(this._highlightCallback){console.log("TFButton > setHighlighted > invoking highlight callback");this._highlightCallback(this._highlighted)}this.stateChanged()},stateChanged:function(){if(!this._enabled){if(this._picNode){this._picNode.setColor(new l.Color(0.5,0.5,0.5));this._picNode.setAlpha(0.8)}return}else{this._picNode.setColor(new l.Color(1,1,1));this._picNode.setAlpha(1)}if(this._highlighted){if(this._textSelectedColor){this.setTextColor(this._textSelectedColor[0]/255,this._textSelectedColor[1]/255,this._textSelectedColor[2]/255)}}else{if(this._textUnselectedColor){this.setTextColor(this._textUnselectedColor[0]/255,this._textUnselectedColor[1]/255,this._textUnselectedColor[2]/255)}}if(this._altpicNode){if(this._highlighted){if(this._picNode){this._picNode.setVisible(false)}if(this._altpicNode){this._altpicNode.setVisible(true)}}else{if(this._picNode){this._picNode.setVisible(true)}if(this._altpicNode){this._altpicNode.setVisible(false)}}return}if(this._picNode&&this._feedback){this._picNode.setAlpha(1);if(this._highlighted){this._picNode.setColor(new l.Color(0.5,0.5,0.5))}else{this._picNode.setColor(new l.Color(1,1,1))}}},setImageColor:function(o,n,p){if(this._picNode){this._picNode.setColor(o,n,p)}},setTextColor:function(o,n,q){if(Object.prototype.toString.call(o)==="[object Array]"){if(o.length==3){var p=o;o=p[0]/255;n=p[1]/255;q=p[2]/255}}if(!o||!n||!q){if((this._type>=1)&&(this._type<=4)){this._textLabel.setColor(130/255,237/255,247/255)}else{if((this._type>=5)&&(this._type<=8)){this._textLabel.setColor(183/255,226/255,240/255)}}this._textColor=undefined}else{this._textColor=[o,n,q];this._textLabel.setColor(o,n,q)}},setTextUnselectedColor:function(o,n,p){this._textUnselectedColor=[o,n,p]},setTextSelectedColor:function(o,n,p){this._textSelectedColor=[o,n,p]},setTextOffsetX:function(n){this._textOffsetX=n;this.updateLabelPosition()},setTextOffsetY:function(n){this._textOffsetY=n;this.updateLabelPosition()},updateLabelPosition:function(){var o=(this.getAnchor().getX()-0.5)*-this.getSize().getWidth()+this._textOffsetX;var n=(this.getAnchor().getY()-this.CENTER_OF_BUTTON_IMAGE)*-this.getSize().getHeight()+this._textOffsetY;this._textLabel.setPosition(o,n)},setVisible:function(n){m.TouchTarget.prototype.setVisible.call(this,n);this.setTouchable(n);if(this._picNode){this._picNode.setVisible(n)}if(this._textLabel){this._textLabel.setVisible(n)}},setFontFamily:function(n){if(this._textLabel){this._textLabel.setFontLocation(m.Text.FontLocation.Manifest);this._textLabel.setFontFamily(n)}},setFontSize:function(n){if(this._textLabel){this._textLabel.setFontSize(n)}},setAlpha:function(n){if(this._picNode){this._picNode.setAlpha(n)}if(this._textLabel){this._textLabel.setAlpha(n)}if(this._altpicNode){this._altpicNode.setAlpha(n)}},setSoundList:function(n){this._soundArray=n},setRandomSound:function(n){this._randomSound=n},startShine:function(){if((this._type<1)||(this._type>4)){return}var n=new l.Point(0,0);var s=Math.floor(this.originalSize.getWidth()*0.6);var r=Math.floor(this.originalSize.getWidth()*0.3);var p=((this._type>=1)&&(this._type<=4))?0.1:(((this._type>=9)&&(this._type<=12))?0.02:0.18);var q=(this._type==0)?this.originalSize.getWidth():0;if(this._shineTop===undefined){n.setX(this._picNode.leftMain.getPosition().getX()+q);n.setY(this._picNode.leftMain.getPosition().getY()+this.originalSize.getHeight()*p);var o=this.getSize().getWidth()-q;if(this._type===1||this._type===2){n.setX(n.getX()+s);o-=s+((this._type===2)?s:r)}else{n.setX(n.getX()+r);o-=r+((this._type===4)?s:r)}this._shineTop=new m.Sprite();this._shineTop.setImage("Content/Images8x/UI/icon/icon_shine.png",new l.Size(55,20),new l.Point(0.5,0.5));this.addShine(this._shineTop,n,o,0,1,4,1)}},addShine:function(o,u,n,w,q,r,p){o.setPosition(u);o.setDepth(3);var x=new a();var v="shine";var y=x.motions[v].source[0].frameRate;var t=x.motions[v].Keyframe;t[1].index=t[0].index+y*w;t[2].index=t[1].index+y*q*t[2].x;t[3].index=t[1].index+y*q*t[3].x;t[4].index=t[1].index+y*q*t[4].x;t[5].index=t[4].index+y*r;var s;for(s=0;s<t.length;s++){t[s].x=u.getX()+n*t[s].x*p;t[s].y=u.getY()}this._mdArray=this._mdArray||new Array();this._mcArray=this._mcArray||new Array();md=new m.MotionData();this._mdArray.push(md);md.initFromData(x,m.MotionData.DataFormat.FlashClassicTween,function(z,A){if(z){console.log("SHINE error :"+JSON.stringify(z))}else{mc=new m.MotionController(A);this._mcArray.push(mc);syncFlags=m.MotionController.SyncFlags.Position|m.MotionController.SyncFlags.Alpha;mc.bind(v,o,syncFlags);mc.play(m.MotionController.PlayMode.Loop)}}.bind(this));this._picNode.addChild(o)},destroyAllChildren:function(o){var n=o._children;while(n&&n.length){this.destroyAllChildren(n[0]);n[0].destroy()}},destroy:function($super){var o;if(this._trackingId){TFSceneDirector.enableGlobalTouches("TFButton [DESTROY]")}if(this._am){this._am.destroy();this._am=undefined}if(this._mcArray){for(o=0;o<this._mcArray.length;o++){this._mcArray[o].destroy()}this._mcArray.length=0}if(this._mdArray){for(o=0;o<this._mdArray.length;o++){this._mdArray[o].destroy()}this._mdArray.length=0}this.getTouchEmitter().removeListener(this._touchListener);this._touchListener.destroy();this.destroyAllChildren(this);var n=__ngs.r_(__ngs._19).ObjectRegistry;if(this._picNode&&n.isObjectRegistered(this._picNode)){this._picNode.destroy()}if(this._altpicNode&&n.isObjectRegistered(this._altpicNode)){this._altpicNode.destroy()}this._picNode=null;this._altpicNode=null;$super()}})}};__ngs._7t={_c:null,_d:function(){var d={exports:{}};var a=d.exports;this._c=d;var g=__ngs.r_(__ngs._5).Core;var c=__ngs.r_(__ngs._f).GL2;var e=0;var b=0;a.GLList=c.Node.subclass({classname:"GLList",$MAX_LIST_ITEMS:64,DEBUG_REDIRECTED_TOUCHES:false,initialize:function(n,h,p,o,m,l,k){this.__updateListener=new g.MessageListener();g.UpdateEmitter.addListener(this.__updateListener,this.__onUpdate.bind(this));if(!n||!h){return}this._size=[n,h];this.__size=new g.Size(n*TFSceneDirector._workingArea.scaleX,h*TFSceneDirector._workingArea.scaleY);if(o){this._clipping=true}else{this._clipping=false}if(this._clipping){this.setClipRectEnabled(true);this.setClipRect(new g.Rect(this.localToScreen(new g.Point(0,0)),this.__size))}this.__touchTarget=new c.TouchTarget();this.__touchTarget.setAnchor(0.5,0.5);this.__touchTarget.setPosition(this._size[0]/2,this._size[1]/2);this.__touchTarget.setSize(this._size);this.__touchListener=new g.MessageListener();this.__touchTarget.getTouchEmitter().addListener(this.__touchListener,this.__onTouch.bind(this));this.__touchTarget.__type=TFGameData.TOUCH_SPECIAL_TYPE.LIST;this.addChild(this.__touchTarget);console.log("GLList > initialize > touchTarget > position : "+JSON.stringify(this.__touchTarget._position));console.log("GLList > initialize > touchTarget > abs position : "+JSON.stringify(this.localToScreen(this.__touchTarget._position)));this._lastTouchY;this._lastLastTouchY;this._totalDrag;this._velY;this._topY;this._botY;this._viewHeight;this._dragging;this._tapDowned;this._itemSize;this._target;this._callback;this.pos_x=m;this.pos_y=l;this.view=k;this._callback=p;this._velY=this._lastTouchY=this._lastLastTouchY=0;this._elementsNode=new c.Node();this.addChild(this._elementsNode);this._childrenArray=[];e=0;b=0;this._topCount=0;this._bottomCount=0;this._touchCounter=0},setPosition:function(){c.Node.prototype.setPosition.apply(this,arguments);console.log("GLList > setPosition > position : "+JSON.stringify(this._position)+" , screenPos : "+JSON.stringify(this.localToScreen(new g.Point(0,0))));if(this._clipping){this.setClipRect(new g.Rect(this.localToScreen(new g.Point(0,0)),this.__size))}},getNode:function(){return this},getSize:function(){return this.__size},getElementsNode:function(){return this._elementsNode},getChildren:function(){return this._elementsNode._children},itemAtIndex:function(h){if(h<this._childrenArray.length){return this._childrenArray[h]}else{return null}},addItem:function(k){if(this._childrenArray.length==0){this._topY=0;console.log("_topY: "+this._topY);this._viewHeight=this._size[1]-this.getPosition().getY()-this._itemSize.getHeight()/2;console.log("_viewHeight: "+this._viewHeight)}var h=this._itemSize.getHeight()*this._childrenArray.length;k.setPosition(0,h);this._elementsNode.addChild(k);this._childrenArray.push(k)},isDragging:function(){return this._dragging||this._velY!=0},setItemSize:function(h){this._itemSize=h},__onUpdate:function(k){if(!this._drawError&&this.getParent()!=null&&this.getVisible()&&this.getAlpha()>0){try{this._draw(k)}catch(h){this._drawError=true;NgLogException(h);this.__updateListener.destroy();this.__updateListener=null}}},_draw:function(o){if(!this._elementsNode){return}this._velY+=(0-this._velY)/6;if(Math.abs(this._velY)<2){this._velY=0}this._elementsNode.setPosition(this._elementsNode.getPosition().getX(),this._elementsNode.getPosition().getY()+this._velY);var k=(this._topY-this._elementsNode.getPosition().getY());if(!this._dragging&&(k<0||this._childrenArray.length*this._itemSize.getHeight()<this._viewHeight)&&this._bottomCount<1){var m=this._elementsNode.getPosition().getY();m+=Math.floor((this._topY-m)/3);if(m!=0){this._elementsNode.setPosition(this._elementsNode.getPosition().getX(),m)}this._topCount++}else{var n=954;k=k+n;if(this.view._totalHeight<960){var h=-(k-n)}else{var h=Math.floor((this.view._totalHeight-k))}if(!this._dragging&&h<0&&this._topCount<1){var m=this._elementsNode.getPosition().getY();var l=Math.floor((-h)/3);if(l!=0){m+=l;this._elementsNode.setPosition(this._elementsNode.getPosition().getX(),m)}this._bottomCount++}}},setScrollable:function(h){this._isScrollable=h},redirectTouch:function(k){if(this._isScrollable!=false){if(TFUtils.DEBUG_REDIRECTED_TOUCHES){console.log("(TOUCHREDIRECT) Redirecting touch to GLList")}this._ccTouchesBegan(k);return this.onRedirectedTouch.bind(this)}if(TFUtils.DEBUG_REDIRECTED_TOUCHES){console.log("(TOUCHREDIRECT) GLList is not scrollable")}if(TFUtils.DEBUG_REDIRECTED_TOUCHES){console.log("(TOUCHREDIRECT) Trying to redirect touch("+k.getId()+") to a parent node")}var h=this.getParent();while(h){if(TFUtils.DEBUG_REDIRECTED_TOUCHES){console.log("(TOUCHREDIRECT)   Parent classname="+h.classname)}if(h.redirectTouch){if(TFUtils.DEBUG_REDIRECTED_TOUCHES){console.log("(TOUCHREDIRECT)   Redirecting touch("+k.getId()+") to new node")}return h.redirectTouch(k)}h=h.getParent?h.getParent():undefined}return undefined},onRedirectedTouch:function(h){if(TFUtils.DEBUG_REDIRECTED_TOUCHES){console.log("(TOUCHREDIRECT) GLList processing redirected touch")}switch(h.getAction()){case c.Touch.Action.Move:if(TFUtils.DEBUG_REDIRECTED_TOUCHES){console.log("(TOUCHREDIRECT) Redirected touch calling _ccTouchesMoved")}this._ccTouchesMoved(h);break;case c.Touch.Action.End:if(TFUtils.DEBUG_REDIRECTED_TOUCHES){console.log("(TOUCHREDIRECT) Redirected touch calling _ccTouchesEnded")}this._ccTouchesEnded(h);break}},__onTouch:function(h){if(this._isScrollable!=false){switch(h.getAction()){case c.Touch.Action.Start:console.log("GLList|"+this.classname+" <__onTouch> Action.Start");if(e>0){console.log("GLList > __onTouch > ignoring touch, globalTouchCounter > 0");return false}var k=g.Time.getRealTime();var m=Math.abs(b-k);console.log("GLList|"+this.classname+" <__onTouch> Action.Start (delta time, globalTouchTimestamp) : (%d, %d)",m,b);if(m<125){return false}e++;this._touchCounter++;var l=this._ccTouchesBegan(h);if(!l){e--;this._touchCounter--;console.log("GLList|"+this.classname+" <__onTouch> Action.Start (globalTouchCounter, this.touchConter) after: "+e+","+this._touchCounter)}else{b=g.Time.getRealTime()}return l;case c.Touch.Action.Move:this._ccTouchesMoved(h);break;case c.Touch.Action.End:console.log("GLList|"+this.classname+" <__onTouch> Action.End");e--;this._touchCounter--;console.log("GLList|"+this.classname+" Action.End <__onTouch> (globalTouchCounter, this.touchConter) after: "+e+","+this._touchCounter);this._ccTouchesEnded(h);break}}},_ccTouchesBegan:function(h){this._tapDowned=true;var k=this.screenToLocal(h.getPosition());this._dragging=true;this._velY=0;this._totalDrag=0;this._lastTouchY=this._lastLastTouchY=k.getY();return true},_ccTouchesMoved:function(h){if(!this._tapDowned){return}this._topCount=0;this._bottomCount=0;var k=this.screenToLocal(h.getPosition());this._lastLastTouchY=this._lastTouchY;this._lastTouchY=k.getY();var l=this._lastTouchY-this._lastLastTouchY;this._totalDrag+=Math.abs(l);this._elementsNode.setPosition(this._elementsNode.getPosition().getX(),this._elementsNode.getPosition().getY()+l)},_ccTouchesEnded:function(h){console.log("LIST END TOUCH");this._direction=null;var m=this.screenToLocal(h.getPosition());this._dragging=false;this._velY=m.getY()-this._lastLastTouchY;console.log("totalDrag: "+this._totalDrag);if(!this._tapDowned){this._velY=0;return}if(this._totalDrag<5){this._velY=0;m.setX(m.getX()-this._elementsNode.getPosition().getX());m.setY(m.getY()-this._elementsNode.getPosition().getY());for(var k=0;k<this._childrenArray.length;k++){var n=this._childrenArray[k];var l=createBBBase(n.getPosition(),this._itemSize);if(CGRectContainsPoint(l,m)){console.log("item "+k+" tapped");if(this._callback!=null){this._callback(k,m)}break}}}},destroyListeners:function(){this.__updateListener&&this.__updateListener.destroy();this.__updateListener=null;this.__touchListener&&this.__touchListener.destroy();this.__touchListener=null},destroyAllChildren:function(k){var h=k._children;while(h&&h.length){this.destroyAllChildren(h[0]);h[0].destroy()}},destroy:function($super){this.destroyListeners();this.destroyAllChildren(this);e=0;b=0;$super()},updateClipping:function(){console.log("GLList > updateClipping > screen position : "+JSON.stringify(this.localToScreen(new g.Point(0,0))));if(this._clipping){this.setClipRect(new g.Rect(this.localToScreen(new g.Point(0,0)),this.__size))}}})}};__ngs._7u={_c:null,_d:function(){var d={exports:{}};var a=d.exports;this._c=d;var e=__ngs.r_(__ngs._5).Core;var c=__ngs.r_(__ngs._f).GL2;var b=__ngs.r_(__ngs._4).Device;a.GLText=c.Text.subclass({classname:"GLText",_optimalFontSizes:[24,36,54,72],initialize:function(g){this._dropShadowText=new c.Text();this._dropShadowText.setDepth(-1);this.addChild(this._dropShadowText);this.setDropShadowVisible(false);this.setDropShadowColor(0,0,0);this.setDropShadowPosition(2,2);this._manipulatedScale=1;this._externalScale=1;this._actualFontSize=this.getFontSize()},destroy:function(){var g=__ngs.r_(__ngs._19).ObjectRegistry;if(this._dropShadowText&&g.isObjectRegistered(this._dropShadowText)){this._dropShadowText.destroy()}},setScale:function(g){if(typeof g==="number"&&arguments.length===1){this._externalScale=g;return c.Node.prototype.setScale.call(this,this._externalScale*this._manipulatedScale)}else{return false}},getScale:function(){return this._externalScale},getActualFontSize:function(g){if(g>=this._optimalFontSizes[this._optimalFontSizes.length-1]){return this._optimalFontSizes[this._optimalFontSizes.length-1]}if(g<=this._optimalFontSizes[0]){return this._optimalFontSizes[0]}for(var h=this._optimalFontSizes.length-2;h>=0;h--){if(g>this._optimalFontSizes[h]){if(g-this._optimalFontSizes[h]<this._optimalFontSizes[h+1]-g){return this._optimalFontSizes[h]}else{return this._optimalFontSizes[h+1]}}}},setDropShadowVisible:function(g){this._dropShadowText.setVisible(g)},setDropShadowPosition:function(g,h){this._dropShadowText.setPosition(g,h)},setDropShadowColor:function(l,k,h){this._dropShadowText.setColor(l,k,h)},setSize:function(g,k){if(e.Capabilities.getPlatformOS()=="Android"){g=g*1.03}this._dropShadowText.setSize(g,k);return c.Text.prototype.setSize.call(this,g,k)},setAnchor:function(g){this._dropShadowText.setAnchor(g);return c.Text.prototype.setAnchor.call(this,g)},setHorizontalAlign:function(g){this._dropShadowText.setHorizontalAlign(g);return c.Text.prototype.setHorizontalAlign.call(this,g)},setVerticalAlign:function(g){this._dropShadowText.setVerticalAlign(g);return c.Text.prototype.setVerticalAlign.call(this,g)},setText:function(g){if(this._toUpperCase){this._dropShadowText.setText(g.toUpperCase());return c.Text.prototype.setText.call(this,g.toUpperCase())}this._dropShadowText.setText(g);return c.Text.prototype.setText.call(this,g)},setFontFamily:function(g){this._dropShadowText.setFontFamily(g);return c.Text.prototype.setFontFamily.call(this,g)},setFontSize:function(g){this._actualFontSize=this.getActualFontSize(g);this._manipulatedScale=g/this._actualFontSize;c.Node.prototype.setScale.call(this,this._externalScale*this._manipulatedScale);this._dropShadowText.setFontSize(this._actualFontSize);return c.Text.prototype.setFontSize.call(this,this._actualFontSize)},setOverflowMode:function(g){this._dropShadowText.setOverflowMode(g);return c.Text.prototype.setOverflowMode.call(this,g)},setFontLocation:function(g){this._dropShadowText.setFontLocation(g);return c.Text.prototype.setFontLocation.call(this,g)},setFont:function(g){this._dropShadowText.setFont(g);return c.Text.prototype.setFont.call(this,g)}})}};__ngs._7v={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=a.CustomProgressBar=GL2.Node.subclass({classname:"CustomProgressBar",initialize:function(e,q,p,d,r,k,o){this.progressPercent=-1;this.middlePercent=-1;this.fillImage=d;this.middleImage=o;var n=1.5;this.clipwidth=Math.floor(e);this.barheight=Math.floor(q);if(p){this.emptyBar=new GL2.Sprite();this.emptyBar.setImage(p,[this.clipwidth,this.barheight],[0.5,0.5]);this.addChild(this.emptyBar)}if(this.middleImage){this.middleBar=new GL2.Sprite();this.middleBar.setImage(this.middleImage,[0,this.barheight],[0,0.5],[0,0,0,1]);this.middleBar.setPosition(-this.clipwidth/2,0);this.addChild(this.middleBar)}this.fillBar=new GL2.Sprite();this.fillBar.setImage(this.fillImage,[0,this.barheight],[0,0.5],[0,0,0,1]);this.fillBar.setPosition(-this.clipwidth/2,0);this.addChild(this.fillBar);if(r!==undefined){this.glow=new GL2.Sprite();this.glow.setImage(r,[this.clipwidth/10,this.barheight*n],[0.5,0.5]);this.addChild(this.glow)}var l=GL2.Text.FontLocation.Manifest;var h="Content/Fonts/text.otf";var m=12;if(k){var g=__ngs.r_(__ngs._7u).GLText;this.percentText=new g();this.percentText.setFontLocation(l);this.percentText.setFontFamily(h);this.percentText.setFontSize(m);this.percentText.setColor(1,1,1);this.percentTextShadow=new g();this.percentTextShadow.setFontLocation(l);this.percentTextShadow.setFontFamily(h);this.percentTextShadow.setFontSize(m);this.percentTextShadow.setColor(0,0,0);this.percentTextShadow.setPosition(1,1);this.addChild(this.percentTextShadow);this.addChild(this.percentText)}this.setProgress(0)},updateMiddleBar:function(){var d=this.clipwidth*this.middlePercent/100;this.middleBar.setImage(this.middleImage,[d,this.barheight],[0,0.5],[0,0,this.middlePercent/100,1])},updateFillBar:function(){var d=this.clipwidth*this.progressPercent/100;this.fillBar.setImage(this.fillImage,[d,this.barheight],[0,0.5],[0,0,this.progressPercent/100,1]);if(this.glow){this.glow.setPosition(-this.clipwidth/2+d,0)}},updatePercentText:function(){if(!this.percentText){return}this.percentText.setText(Math.floor(this.progressPercent)+"%");this.percentTextShadow.setText(Math.floor(this.progressPercent)+"%")},setTextFontSize:function(d){if(this.percentText){this.percentText.setFontSize(d)}if(this.percentTextShadow){this.percentTextShadow.setFontSize(d)}},setProgress:function(d){if(isNaN(d)){return}d=Math.round(d);if(this.progressPercent==d){return}if(d<0){this.progressPercent=0}else{if(d>100){this.progressPercent=100}else{if(this.progressPercent==d){this.progressPercent=d;return}else{this.progressPercent=d}}}this.updateFillBar();this.updatePercentText()},setMiddleProgress:function(d){if(this.middlePercent==d){return}if(d<0){this.middlePercent=0}else{if(d>100){this.middlePercent=100}else{if(this.middlePercent==d){this.middlePercent=d;return}else{this.middlePercent=d}}}this.updateMiddleBar()},getProgress:function(){return this.progressPercent},destroyAllChildren:function(e){var d=e._children;while(d&&d.length){this.destroyAllChildren(d[0]);d[0].destroy()}},destroy:function($super){this.destroyAllChildren(this);var d=__ngs.r_(__ngs._19).ObjectRegistry;if(this.bg&&d.isObjectRegistered(this.bg)){this.bg.destroy()}if(this.emptyBar&&d.isObjectRegistered(this.emptyBar)){this.emptyBar.destroy()}if(this.fillBar&&d.isObjectRegistered(this.fillBar)){this.fillBar.destroy()}if(this.middleBar&&d.isObjectRegistered(this.middleBar)){this.middleBar.destroy()}if(this.glow&&d.isObjectRegistered(this.glow)){this.glow.destroy()}if(this.percentText&&d.isObjectRegistered(this.percentText)){this.percentText.destroy()}if(this.percentTextShadow&&d.isObjectRegistered(this.percentTextShadow)){this.percentTextShadow.destroy()}$super()},setVisibility:function(d){if(d){this.setAlpha(1)}else{this.setAlpha(0)}},setFillBarColor:function(d){if(this.fillBar){this.fillBar.setColor(d[0]/255,d[1]/255,d[2]/255)}}})}};__ngs._7w={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.ComboBox=GL2.Node.subclass({classname:"ComboBox",initialize:function(h,g,m,n,c,l,d){this.outsideTouchTrap=new GL2.TouchTarget();this.addChild(this.outsideTouchTrap);this.outsideTouchTrap.setSize(2048,2048);this.outsideTouchTrap.setPosition(-1024,-1024);this.outsideTouchTrap.getTouchEmitter().addListener(new Core.MessageListener(),this.onTouchOutside.bind(this));this.outsideTouchTrap.setDepth(0);this.outsideTouchTrap.__type=TFGameData.TOUCH_SPECIAL_TYPE.TRAP;this.maxSize=new Core.Size(n._width,l+n._height);this.comboSize=n;this.gridSize=c;var e=__ngs.r_(__ngs._d8).ComboBoxButtonView;this.mainView=new e(this,n);this.mainView.comboSelectedOption.setText(Localization.getString(d.prompt));this.cellViews=[];this.delegate=m;this._openCloseDelay=400;if(d.hasOwnProperty("open_close_delay")){this._openCloseDelay=d.open_close_delay}this._updatePromptOnSelect=true;if(d.hasOwnProperty("update_prompt_on_select")){this._updatePromptOnSelect=d.update_prompt_on_select}var k=__ngs.r_(__ngs._d9).TFScrollView;this.buttonList=new k(m);if(l<0){this.buttonList.setArea(new Core.Point(-c._width/2+n._width/2,n._height+l),new Core.Size(c._width,Math.abs(l)))}else{this.buttonList.setArea(new Core.Point(-c._width/2+n._width/2,n._height),new Core.Size(c._width,l))}this.buttonList.setDepth(2);this.addChild(this.buttonList);this.buttonList.hide(0);this.mainView.setDepth(3);this.addChild(this.mainView);this.options=[[]];this.gridX=h;this.gridY=g;this.cellSize=new Core.Size((this.gridSize._width-20)/this.gridX,(this.gridSize._height-20));this._optionCells=[];this._gridCells=[];this._cellsData=[]},addOption:function(g){console.log("ComboBox > addOption > data : "+JSON.stringify(g));var e=__ngs.r_(__ngs._da).ComboBoxGridCellView;var d=__ngs.r_(__ngs._db).ComboBoxCellView;if(this._optionCells.length%this.gridX==0){this._gridCells.push(new e(this,this.gridSize));this.buttonList.addListItem(this._gridCells[this._gridCells.length-1])}var c=new d(this,this.cellSize);this._gridCells[this._gridCells.length-1].addChild(c);c.setPosition((this._optionCells.length%this.gridX)*this.gridSize._width/this.gridX+10,0);if(this._optionCells.length%2){c.arrowIcon.setRotation(270)}c.optionLabel.setText(Localization.getString(g.label));if(g.hasOwnProperty("font_size")){c.optionLabel.setFontSize(g.font_size)}if(g.icon_asset){TFUtils.changeImageOnSprite(c.arrowIcon,g.icon_asset.asset,[g.icon_asset.size_x,g.icon_asset.size_x],[0.5,0.5],[0,0,1,1]);c.arrowIcon.setRotation(0)}this._optionCells.push(c);this._cellsData.push(g);this.buttonList.resizeScrollArea()},onTouch:function(){if(TFSceneDirector.bottomHudVisible()){this.buttonList.setClipHeightLimit(100)}console.log("ComboBox > onTouch > Toggling options visibility");if(this.buttonList.isHidden()){this.buttonList.show(this._openCloseDelay)}else{this.buttonList.hide(this._openCloseDelay)}},doneAddingItems:function(){this.buttonList.resizeScrollArea()},onTouchOutside:function(){console.log("ComboBox > onTouchOutside > Combo is hidden : "+JSON.stringify(this.buttonList.isHidden()));if(this.buttonList.isHidden()){return false}else{this.buttonList.hide(this._openCloseDelay)}return true},onCellTouch:function(e){console.log("ComboBox > onCellTouch > button : "+e);var g=-1;for(var d=0;d<this._optionCells.length;++d){if(this._optionCells[d].sortButton===e){g=d}this._optionCells[d].setSelected(false)}console.log("ComboBox > onCellTouch > button index : "+g);var c=this._optionCells[g];if(this._updatePromptOnSelect){this.mainView.comboSelectedOption.setText(c.optionLabel.getText());c.setSelected(true)}if(this.callback){this.callback(this._cellsData[g].id)}this.buttonList.hide(this._openCloseDelay)}})}};__ngs._7x={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var d=__ngs.r_(__ngs._7p).View;var c=__ngs.r_(__ngs._dc).SplashScreenViewDefinition;a.SplashScreenView=d.subclass({classname:"SplashScreenView",initialize:function($super,e){$super(e,c)},destroy:function($super){$super()}})}};__ngs._7y={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var d=__ngs.r_(__ngs._5).Core;var c=__ngs.r_(__ngs._47).UpdateStacker;a.IntroCutScene=d.Class.subclass({initialize:function(l,h,e,k,g){this._videoFilePath=l;this._originalVideoWidth=h;this._originalVideoHeight=e;this._completeCallback=k;this._skipOnTouch=g;c.initialize()},_lifecycleUpdate:function(e){switch(e){case Device.LifecycleEmitter.Event.Suspend:this._cleanup();break}},_onKeyPressed:function(g){var e=true;if(g.code===Device.KeyEmitter.Keycode.back){this._cleanup()}return e},setOnCompleteCallback:function(e){if(!this._isPlaying){this._completeCallback=e}},setGLView:function(e){this._glView=e},setVideoPath:function(e){this._videoFilePath=e},setSkipOnTouch:function(e){this._skipOnTouch=e},_setup:function(){this._listener=new d.MessageListener();this._keyListener=new d.MessageListener();var h=__ngs.r_(__ngs._4).Device;h.LifecycleEmitter.addListener(this._listener,this._lifecycleUpdate.bind(this));h.KeyEmitter.addListener(this._keyListener,this._onKeyPressed.bind(this));var l=__ngs.r_(__ngs._g).UI;this._bgView=new l.View({frame:l.Window.getFrame().array(),backgroundColor:"FF00"});l.Window.document.addChild(this._bgView);var e=l.Window.getFrame().array()[2];var g=l.Window.getFrame().array()[3];var n=e;var k=g;var q=n/this._originalVideoWidth;var m=k/this._originalVideoHeight;if(q>m){n=Math.floor(this._originalVideoWidth*m)}else{k=Math.floor(this._originalVideoHeight*q)}var p=[(e-n)/2,(g-k)/2,n,k];this._cutScene=new l._CutSceneView({frame:p});this._cutScene.setOnClick(function(r){if(this._skipOnTouch){this._cleanup()}}.bind(this));l.Window.document.addChild(this._cutScene);var o=__ngs.r_(__ngs._s).TFUtils;if(typeof(o)!="undefined"){o.addMovie(this)}},play:function(){this._setup();console.log("IntroCutScene: Deactivating GLView");this._glView.setActive(false);this._cutScene.play(this._videoFilePath,this._movieCompleteCallback.bind(this));this._isPlaying=true},isPlaying:function(){return this._isPlaying},_cleanup:function(){if(this._cleaned){return}this._cleaned=true;this._bgView.removeFromParent();this._bgView.destroy();this._cutScene.removeFromParent();this._cutScene.destroy();this._listener.destroy();this._keyListener.destroy();console.log("IntroCutScene: Reactivating GLView");this._glView.setActive(true);if(d.Capabilities.getPlatformOS()=="Android"){this._glView.setOnActiveChanged(function(e){console.log("IntroCutScene: GLView event: "+JSON.stringify(e));if(e.active){this._completeCallback();TFAppDelegate.resumed=false;this._glView.setOnActiveChanged(null)}}.bind(this))}else{if(d.Capabilities.getPlatformOS()=="iPhone OS"){this._completeCallback();TFAppDelegate.resumed=false;this._glView.setOnActiveChanged(null)}}},_movieCompleteCallback:function(e){this._cleanup()}})}};__ngs._7z={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._7p).View;var a=__ngs.r_(__ngs._dd).TutorialChooseViewDefinition;b.TutorialChooseView=d.subclass({classname:"TutorialChooseView",initialize:function($super,e){$super(e,a);TFSceneDirector.stretchUIElementVertically(this.background,true);TFSceneDirector.shiftUIElementUp(this.back)},destroy:function($super){$super()}})}};__ngs._80={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var g=__ngs.r_(__ngs._7l).DialogController;var a=__ngs.r_(__ngs._ad).FullScreenCardView;var c=__ngs.r_(__ngs._45).AnimationQueue;var e=__ngs.r_(__ngs._61).TFEventManager;b.FullScreenCardController=g.subclass({classname:"FullScreenCardController",initialize:function($super,o,h){$super(a,false);if(h){this.getView().showShade()}this._otherData={};if(o){this._otherData=o}this._destroyCB=this._otherData.destroyCB;var p;if(this._otherData.usercard||this._otherData.CardDefinition||this._otherData.definitionId){TFUserData._selectedFullScreenCard=this._otherData.usercard;this.fadeInAnimation();var r=__ngs.r_(__ngs._r).TFCardsManager;if(this._otherData.CardDefinition){p=r.getCardDefinition(this._otherData.CardDefinition)}else{p=r.getCardDefinition(this._otherData.usercard.definitionId)}var q=function(u){if(!this.getView()){return}if(!this.getView().name){return}if(this.getView()._prefixWidth===undefined||this.getView()._nameWidth===undefined){return}var t;if(this.getView()._prefixWidth===0){t=this.getView()._nameWidth}else{t=(this.getView()._prefixWidth+this.getView()._nameWidth)/2}if(u){this.getView().name.setPosition(-t/2,this.getView().name.getPosition().getY())}else{this.getView().name.setPosition(-t/2,this.getView().name.getPosition().getY())}}.bind(this,p.transformable);this.getView().name.transformersName.setText(Localization.getString(p.name).toUpperCase());if(p.prefix&&(p.prefix.length>0)){this.getView().prefix.transformersPrefixName.setText(Localization.getString(p.prefix).toUpperCase());this.getView().prefix.transformersPrefixName.setVisible(true);this.getView().prefix.eliteBannerImage.setVisible(true)}this.getView()._prefixWidth=0;this.getView().name.transformersName.measureArea(function(t){this._nameWidth=t.totalWidth;q()}.bind(this.getView()));var s;var k=null;if(p.transformable){s=p.evolution[0][0];this.getView().setTransformable(true,p.rarity);this.getView().transformButton.info.transformCardId=p.evolution[0][1];k=p.evolution[0][1]}else{s=p.id;this.getView().setTransformable(false,p.rarity)}if(this._otherData.hideButtons){this.getView().hideButtons()}this.getView().transformButton.info.currentCardId=s;this.getView().transformButton.info.rarity=p.rarity;if(p.factionId==TFGameData.FACTION.DECEPTICONS){TFUtils.changeImageOnSprite(this.getView().logo,this.getView()._definitions.logo.info.asset2);TFUtils.changeImageOnSprite(this.getView().nontransformFrame.footer,"Content/Images8x/UI/card_frames/footer_decepticon.png");TFUtils.changeImageOnSprite(this.getView().transformFrame.footer,"Content/Images8x/UI/card_frames/footer_decepticon.png")}else{TFUtils.changeImageOnSprite(this.getView().logo,this.getView()._definitions.logo.info.asset1);TFUtils.changeImageOnSprite(this.getView().nontransformFrame.footer,"Content/Images8x/UI/card_frames/footer_autobot.png");TFUtils.changeImageOnSprite(this.getView().transformFrame.footer,"Content/Images8x/UI/card_frames/footer_autobot.png")}this.getView().createParallaxer(p.rarity,s,k,this._otherData.forceParallax);if(p.transformable){this.getView().createAltFormParallaxer(p.rarity,s,k,this._otherData.forceParallax)}var l=e.cardBonusInRunningEvent(p.id);if(l){this.getView().eventBonus.setVisible(true);this.getView().eventBonus.bonusAmount.setText(Math.floor(l.attackBonus/100)+"x")}}var m;if(this._otherData.usercard){var r=__ngs.r_(__ngs._r).TFCardsManager;m=r.getCardStatus(this._otherData.usercard)}else{if(this._otherData.stats){m=this._otherData.stats}else{m={status1:0,status2:0,status3:0}}}this.getView().stat1.setText(m.status1);this.getView().stat2.setText(m.status2);this.getView().stat3.setText(m.status3);this._otherData.type=p.type;this.getView().flipCardButton.info=this._otherData;if(this._otherData.usercard&&this._otherData.usercard.isNew){this.getView().newLabel.setVisible(true);this.getView().newBannerImage.setVisible(true)}if(this._otherData.usercard&&!this._otherData.definitionId&&this._otherData.showBanner){this.label1=this.getView().topSlidingText;this.label2=this.getView().bottomSlidingText;this.banner=this.getView().blueBanner;this.message1=Localization.getString("ui_character_uc");this.message2=Localization.getString("ui_found_uc");var n=new c(this.getView().am);this.getView().characterFoundQueue=n;n.pushAnimation(1000);n.pushCallback(function(){this.label1.setText(this.message1);this.label2.setText(this.message2);this.label1.setPosition(-250-320,455-480);this.label2.setPosition(890-320,500-480);this.banner.setPosition(840-320,405-480)}.bind(this));n.pushAnimation(300,c.Curve.EaseIn);n.tween(c.Interpolate.scalar(640-320,-320),function(t){this.banner.setPosition(t,this.banner._position._y)}.bind(this));n.pushAnimation(400,c.Curve.EaseIn);n.tween(c.Interpolate.scalar(0,570),function(t){this.label1.setPosition(t-250-320,this.label1._position._y);this.label2.setPosition(890-320-t,this.label2._position._y)}.bind(this));n.pushAnimation(1000);n.pushAnimation(400,c.Curve.EaseIn);n.tween(c.Interpolate.scalar(0,570),function(t){this.label1.setPosition(0+t,this.label1._position._y);this.label2.setPosition(0-t,this.label2._position._y)}.bind(this));n.pushAnimation(300,c.Curve.EaseIn);n.tween(c.Interpolate.scalar(320,800+320),function(t){this.banner.setPosition(-t,this.banner._position._y)}.bind(this));n.start()}},fadeInAnimation:function(){var h=this.createAnimationQueue();var m=this.createAnimationQueue();var l=0.7;var k=0;var n=300;this.getView().setAlpha(k);this.getView().setScale(l);h.pushAnimation(n,c.Curve.EaseOut);h.tween(c.Interpolate.scalar(l,1),function(o){if(this&&this.getView()){this.getView().setScale(o)}}.bind(this));h.pushCallback(function(){if(this.getView()&&this.getView().clipCards){this.getView().clipCards()}}.bind(this));m.pushAnimation(n,c.Curve.EaseIn);m.tween(c.Interpolate.scalar(k,1),function(o){if(this&&this.getView()){this.getView().setAlpha(o)}}.bind(this));m.pushCallback(function(){TFSceneDirector.enableGlobalTouches("DialogViewController [FullScreenCardView]");if(this._otherData&&this._otherData.cbNext){this._otherData.cbNext()}}.bind(this));setTimeout(h.start.bind(h),10);setTimeout(m.start.bind(m),10)},onTransform:function(l){if(this._blocked){return}this._blocked=true;var k;k=l.info.transformCardId;l.info.transformCardId=l.info.currentCardId;l.info.currentCardId=k;var h=function(){this._blocked=false};if(this.emitter){this.getView().animateTransform(l.info.rarity,k,h.bind(this),this.emitter,this.emitter2)}else{this.getView().animateTransform(l.info.rarity,k,h.bind(this))}},dismissDialog:function($super){this.getView().destroySpinner();$super();if(this._destroyCB){this._destroyCB()}},onDismiss:function(){if(this._blocked){return}if(this._otherData&&this._otherData.cbDismiss){this._otherData.cbDismiss()}this.dismissDialog()},onFlipCard:function(m){if(this._blocked===true){return}this._blocked=true;if(this.getView().parallaxer){this.getView().parallaxer.destroy();this.getView().parallaxer=null}if(this._sparksSound){this._sparksSound.setLoops(false);TFSoundManager.setMusicEnabled(true);TFSoundManager.playMusic()}var n=100;var h=this.createAnimationQueue();var l=this;h.pushAnimation(n,c.Curve.Linear);var o=new Core.Point(0,0);var k=new Core.Point(0,-(TFSceneDirector.getWorkingArea().screenHeight+this.getView()._definitions.flipCardButton.size_y));h.tween(c.Interpolate.point(o,k),function(p){if(!this.getView()){return}this.getView().setPosition(p.getX(),p.getY())}.bind(this));h.pushAnimation(100,c.Curve.Linear);h.pushCallback(function(){this._destroyCB=undefined;if(m.info){var q=m.info;if(!q.type){var p=__ngs.r_(__ngs._r).TFCardsManager;q.type=p.getCardType(m.info.usercard.definitionId)}if(q.type==TFGameData.CARD_TYPE.TRANSFORMER){var r=__ngs.r_(__ngs._de).BackCardController;TFSceneDirector._showDialog(new r(this._otherData,true))}}}.bind(this));h.pushCallback(function(){l._blocked=false});h.start();if(this.particleQueue){this.particleQueue.destroy();this.particleQueue=undefined}},onTap:function(){if(this._blocked){return}if(this._otherData&&this._otherData.cbTap){this._otherData.cbTap();this._otherData.cbTap=undefined}}})}};__ngs._81={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var d=__ngs.r_(__ngs._7p).View;var b=__ngs.r_(__ngs._df).TutorialBubbleDefinition;a.TutorialBubbleView=d.subclass({classname:"TutorialBubbleView",initialize:function($super,e,g){$super(e,b)},destroy:function($super){$super()}})}};__ngs._82={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._7p).View;var d=__ngs.r_(__ngs._dg).SideSelectionDefinition;a.SideSelectionView=c.subclass({classname:"SideSelectionView",initialize:function($super,e){$super(e,d);TFSceneDirector.stretchUIElementVertically(this.background,true)},destroy:function($super){$super()}})}};__ngs._83={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var d=__ngs.r_(__ngs._7p).View;var b=__ngs.r_(__ngs._dh).GashaViewDefinition;a.GashaView=d.subclass({classname:"GashaView",initialize:function($super,e){$super(e,b);TFSceneDirector.shiftUIElementUp(this.topBarLeft);TFSceneDirector.shiftUIElementUp(this.topBarRight);TFSceneDirector.shiftUIElementUp(this.hudTop);TFSceneDirector.shiftUIElementUp(this.hudTopLineLeft);TFSceneDirector.shiftUIElementUp(this.hudTopLineLeftEnd);TFSceneDirector.shiftUIElementUp(this.hudTopLineRight);TFSceneDirector.shiftUIElementUp(this.hudTopLineRightEnd);TFSceneDirector.shiftUIElementUp(this.staticDistance);TFSceneDirector.shiftUIElementUp(this.distanceNumber);TFSceneDirector.shiftUIElementUp(this.staticKM);TFSceneDirector.shiftUIElementUp(this.decimalNumber)},destroy:function($super){if(this.parallaxer){this.parallaxer.destroy()}$super()},setDistanceNumber:function(g){var e=g.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");this["distanceNumber"].setText(e)},setDecimalNumber:function(e){this["decimalNumber"].setText("."+e)}})}};__ngs._84={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var d=__ngs.r_(__ngs._5).Core;var b=__ngs.r_(__ngs._f).GL2;var e=__ngs.r_(__ngs._di).MotionListener;a.Parallaxer=d.Class.subclass({_accelConfig:{speed:2.5,speedMultipleX:1,speedMultipleY:1,scrollBackMultiple:0.92,maximumScroll:[35,20]},_gyroConfig:{speed:1.5,speedMultipleX:2,speedMultipleY:2,scrollBackMultiple:0.98,maximumScroll:[75,50]},initialize:function(l,g){this.scroll={x:0,y:0};this.parallaxes=l;this.parallaxLayers=[];for(var h=0;h<this.parallaxes.length;h++){this.parallaxLayers.push([])}if(g){for(h=0;h<g.length;h++){var k={};k.position=[g[h].getPosition().getX(),g[h].getPosition().getY()];this.addNodeToLayer(g[h],h,k)}}this.parallaxDisabled=false;this.noParallax=this.parallaxDisabled},destroy:function(){this.stop();for(var g=0;g<this.parallaxLayers.length;g++){this.parallaxLayers[g]=null}this.parallaxLayers=null},start:function(){this.stop();if(!this.noParallax){this.motionListener=new e(this,0.9)}this.respondToRotation(undefined,{x:0,y:0,z:0},true)},stop:function(){if(this.motionListener){this.motionListener.destroy()}this.motionListener=undefined},setNoParallax:function(g){if(this.parallaxDisabled){this.noParallax=true}else{this.noParallax=g}},addNodeToLayer:function(h,g,k){if(g<0||g>=this.parallaxLayers.length){console.log("Parallaxer: ERROR cannot add a node to layer "+g,+" there are only "+this.parallaxLayers.length+" layers.")}this.parallaxLayers[g].push({node:h,data:(k||{})})},removeNode:function(k){for(var h=0;h<this.parallaxLayers.length;h++){for(var g=0;g<this.parallaxLayers[h].length;g++){if(this.parallaxLayers[h][g]==k){this.parallaxLayers[h].splice(g,1);return}}}},resetParallax:function(){for(var h=0;h<this.parallaxLayers.length;h++){for(var g=0;g<this.parallaxLayers[h].length;g++){this.parallaxLayers[h][g].node.setPosition(this.parallaxLayers[h][g].data.position)}}},respondToRotation:function(k,l,g){if(this.noParallax&&!g){return}var h=this._gyroConfig;var r=k;if(!k||(k.x===0&&k.y===0&&k.z===0)){if(!g&&(!l||(l.x===0&&l.y===0&&l.z===0))){return}r=l;var s=r.x;r.x=r.y;r.y=-s;h=this._accelConfig}this.scroll.x+=r.y*h.speed*h.speedMultipleX;this.scroll.y-=r.x*h.speed*h.speedMultipleY;this.scroll.x*=h.scrollBackMultiple;this.scroll.y*=h.scrollBackMultiple;this.scroll.x=Math.max(-h.maximumScroll[0],Math.min(h.maximumScroll[0],this.scroll.x));this.scroll.y=Math.max(-h.maximumScroll[1],Math.min(h.maximumScroll[1],this.scroll.y));for(var o=0;o<this.parallaxLayers.length;o++){for(var m=0;m<this.parallaxLayers[o].length;m++){var n=this.parallaxLayers[o][m].data;var q=this.parallaxes[o]+(n.parallaxDifference?n.parallaxDifference:0);var p=n.position;this.parallaxLayers[o][m].node.setPosition(p[0]-this.scroll.x*q,p[1]+this.scroll.y*q)}}}})}};__ngs._85={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var d=__ngs.r_(__ngs._7p).View;var c=__ngs.r_(__ngs._dj).BottomHudMedalViewDefinition;a.BottomHudMedalView=d.subclass({classname:"BottomHudMedalView",initialize:function($super,e){$super(e,c)},destroy:function($super){$super()},setPressedButton:function(e){},enableMisionNav:function(e){},enableListNav:function(e){},setEnergy:function(e){}})}};__ngs._86={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._7p).View;var a=__ngs.r_(__ngs._dk).TopHudViewDefinition;b.TopHudView=d.subclass({classname:"TopHudView",initialize:function($super,e,g){$super(e,a);console.log("<<TopHudView.initialize...!")},destroy:function($super){$super()}})}};__ngs._87={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var e=__ngs.r_(__ngs._7l).DialogController;var d=__ngs.r_(__ngs._dl).OverLimitCardsView;var c=__ngs.r_(__ngs._4c).TFUpdateEmitter;a.OverLimitCardsController=e.subclass({classname:"OverLimitCardsController",initialize:function($super,l,k){$super(d,k);this._otherData=l;this.getView().showShade();this._callback=null;if(this._otherData&&this._otherData.destroyCB){this._callback=this._otherData.destroyCB}if(!TFUserData.limboDate){TFUserData.limboDate=Server.getServerTime()+23*60*60*1000+59*60*1000+59*1000}var h=function(){var m=TFUtils.timeToHuman((TFUserData.limboDate-Server.getServerTime())/1000,true);this.getView().Time2.setText(m);this.getView().Time.setText(m)}.bind(this);c.addElements("OverLimitCardsController",1000,h);var g=this.getView().Title.getText();g=g.replace("#",TFUserData.getCardsInLimbo().length);this.getView().Title.setText(g);if(this._otherData){if(this._otherData.text){this.getView().Title.setText(this._otherData.text)}if(this._otherData.title){this.getView().realTitle.setText(this._otherData.title)}if(this._otherData.buttons&&this._otherData.buttons=="one"){this.getView().fuseButton.setVisible(false);this.getView().upgradeImage.setVisible(false);this.getView().sellButton.setVisible(false);this.getView().limboButton.setOnPressCallback(this.onDismiss.bind(this));this.getView().limboButton.setText(Localization.getString("ui_ok_uc"));if(this._otherData.buttonText){this.getView().limboButton.setText(Localization.getString(this._otherData.buttons.buttonText))}}if(this._otherData.timeText2){this.getView().timeHeader.setVisible(false);this.getView().Time.setVisible(false);this.getView().timeHeader2.setVisible(true);this.getView().Time2.setVisible(true)}}},onFuseCards:function(){console.log("OverLimitCardsController > onFuseCards");TFSceneDirector.showFusion();this.onDismiss()},onLimboCards:function(){console.log("OverLimitCardsController > onLimboCards");TFSceneDirector.showVaultCards(null,TFUserData.cardsLimbo);this.onDismiss()},onSellCards:function(){console.log("OverLimitCardsController > onSellCards");TFSceneDirector.showSellCards();this.onDismiss()},onDismiss:function(){if(this._callback){this._callback()}c.releaseElements("OverLimitCardsController");this.dismissDialog()}})}};__ngs._88={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var b=__ngs.r_(__ngs._8v).GLScrollView;var d=__ngs.r_(__ngs._dm).MissionSelectViewDefinition;a.MissionSelectView=b.subclass({classname:"MissionSelectView",initialize:function($super,e){$super(e,d);this._controller=e},_draw:function($super,g){$super(g);var e=this._scrollArea.getPosition();TFSceneDirector.missionScrollPos["mission."+this._controller._worldId+"."+this._controller._stageId]=e.getY()},destroy:function($super){$super()}})}};__ngs._89={_c:null,_d:function(){var b={exports:{}};var d=b.exports;this._c=b;var a=__ngs.r_(__ngs._7p).View;var o=__ngs.r_(__ngs._dn).CardThumbnailViewDefinition;var g=__ngs.r_(__ngs._49).TFDeckManager;var k=__ngs.r_(__ngs._45).AnimationManager;var c=__ngs.r_(__ngs._45).AnimationQueue;var e=__ngs.r_(__ngs._60).TFImageCache;var n=__ngs.r_(__ngs._61).TFEventManager;var m=__ngs.r_(__ngs._4a).TFImageManager;var h=__ngs.r_(__ngs._s).TFUtils;var l=__ngs.r_(__ngs._x).TFManifestManager;d.CardThumbnailView=a.subclass({classname:"CardThumbnailView",initialize:function($super,r,s,p,v,w,q,u,t){$super(r,o,function(){}.bind(this));console.log("=======================================================================================");console.log("CardThumbnailView cardID="+s+", width="+p+", height="+v+", options="+JSON.stringify(w));this._options=w||{};if(this._options.showSpinner==true&&l.isFileDownloaded(m.getCorrectImagePath(h.getCardImagePath(s)))&&(!this._options.transformed||l.isFileDownloaded(m.getCorrectImagePath(h.getCardImagePath(this._options.transformed))))){this._options.showSpinner=false}if(this._options.transformed){this._transformedID=this._options.transformed}this.width=p;this.height=v;this._leaderBannerFlag=q;this._transformFrameFlag=u;this._scaleX=0;this._scaleY=0;this._spinnerCount=0;this.layout(p,v,w);this.updateWithCard(s,w);this._am=new k();this._hideFrame=false;this._hideAccent=false;this.spinnerRemoved=true;if(t==true){this.teamColor.setVisible(true)}this.removeCount=0},layout:function(q,z,E){E=E||{};if(this._am){console.log("=======================================================================================");console.log("CardThumbnailView (LAYOUT) width="+q+", height="+z+", options="+JSON.stringify(E))}this._width=q;this._height=z;if(E.weapon){z=q}var v=q/this._definitions.cardImage.size_x;var x=q/this._definitions.cardImage.size_x;var w=z/this._definitions.cardImage.size_y;var C=(x<w)?x:w;console.log("scaleX="+x+", scaleY="+w+", scaleToUse="+C);if(!E||!E.weapon){x=C;w=C}if(E.weapon){var D=q/this._definitions.frameBack.size_x;var B=z/this._definitions.frameBack.size_y;var p=D/B;w=x/p}this._anchorOffset=[0,0];if(E.anchor){if((E.anchor.length!=2)||(typeof(E.anchor[0])!=="number")||(typeof(E.anchor[1])!=="number")){throw new Error("'anchor' option in CardThumbnailView expected to be an array of two numbers (anchor="+JSON.stringify(E.anchor)+")")}this._anchorOffset[0]=-q*E.anchor[0];this._anchorOffset[1]=-z*E.anchor[1];console.log("Setting anchor offset="+this._anchorOffset[0]+","+this._anchorOffset[1])}this.cardImage.setPosition(this._anchorOffset[0],this._anchorOffset[1]);this.cardTransformed.setPosition(this._anchorOffset[0],this._anchorOffset[1]);var t=this.cardImage.getPosition().getX()+this.cardImage.getSize().getWidth()*0.5*x;var s=this.cardImage.getPosition().getY()+this.cardImage.getSize().getHeight()*w;this.leaderBannerL.setPosition(new Core.Point(t+this._anchorOffset[0],s+this._anchorOffset[1]-3));this.leaderBannerR.setPosition(new Core.Point(t+this._anchorOffset[0],s+this._anchorOffset[1]-3));console.log("Anchor offset pos="+this._anchorOffset[0]+","+this._anchorOffset[1]);console.log("Card image pos="+this.cardImage.getPosition().getX()+","+this.cardImage.getPosition().getY());console.log("Leader banner L pos="+this.leaderBannerL.getPosition().getX()+","+this.leaderBannerL.getPosition().getY());console.log("Leader banner R pos="+this.leaderBannerR.getPosition().getX()+","+this.leaderBannerR.getPosition().getY());this.leaderLabel.setSize(this._definitions.leaderBannerL.size_x*2*C,this._definitions.leaderBannerL.size_y*C*2);console.log("Leader label size="+(this._definitions.leaderBannerL.size_x*2*C)+","+(this._definitions.leaderBannerL.size_y*C));this.leaderLabel.setPosition(this.leaderBannerL.getPosition());this.leaderLabel.setFontSize(this._definitions.leaderBannerL.size_y*C);console.log("fontsize="+this.leaderLabel.getFontSize());this.frame.setPosition(this._anchorOffset[0]+this.frame.info.offset_x*x,this._anchorOffset[1]+this.frame.info.offset_y*w);this.frameBack.setPosition(this._anchorOffset[0]+this.frameBack.info.offset_x*x,this._anchorOffset[1]+this.frameBack.info.offset_y*w);this.glow.setPosition(this._anchorOffset[0]+this.glow.info.offset_x*x,this._anchorOffset[1]+this.glow.info.offset_y*w);this.teamColor.setPosition(this._anchorOffset[0]+this.teamColor.info.offset_x*x,this._anchorOffset[1]+this.teamColor.info.offset_y*w);this.accent.setPosition(this._anchorOffset[0]+this.accent.info.offset_x*x,this._anchorOffset[1]+this.accent.info.offset_y*w);this.rarity.setPosition(this._definitions.cardImage.size_x*x+this._anchorOffset[0],this._anchorOffset[1]);this.bonus.setPosition(this._anchorOffset[0],this._anchorOffset[1]);var A=this._definitions.bonusText.info?(this._definitions.bonusText.info.offset_x||0):0;var y=this._definitions.bonusText.info?(this._definitions.bonusText.info.offset_y||0):0;this.bonusText.setPosition(this._anchorOffset[0]+A*x,this._anchorOffset[1]+y*w);this._scaleX=x;this._scaleY=w;this.cardImage.setScale(x,w);this.cardTransformed.setScale(x,w);this.frame.setScale(x,w);this.accent.setScale(x,w);this.frameBack.setScale(x,w);this.glow.setScale(x,w);this.teamColor.setScale(x,w);this.rarity.setScale(v,v);this.bonus.setScale(v,v);this.bonusText.setScale(C);var r=(this._definitions.cardImage.size_x*0.3)/this._definitions.mainDeckDecal.size_x;this.mainDeckDecal.setScale(r*v,r*v);var u=(this._definitions.cardImage.size_x*0.3)/this._definitions.miniDeckDecal.size_x;this.miniDeckDecal.setScale(u*v,u*v);this.leaderBannerL.setScale(C,C);this.leaderBannerR.setScale(C,C);this.leaderLabel.setScale(C,C);this.mainDeckDecal.setPosition(this._anchorOffset[0]+this._definitions.mainDeckDecal.size_x*r*v*0.6,this._anchorOffset[1]-this._definitions.mainDeckDecal.size_y*r*v*0.6*x/w+this._definitions.cardImage.size_y*w);this.miniDeckDecal.setPosition(this._anchorOffset[0]-this._definitions.mainDeckDecal.size_x*r*v*0.6+this._definitions.cardImage.size_x*x,this._anchorOffset[1]-this._definitions.mainDeckDecal.size_y*r*v*0.6*x/w+this._definitions.cardImage.size_y*w)},updateWithCard:function(r,q){q=q||{};if(this._options.showSpinner==true&&l.isFileDownloaded(m.getCorrectImagePath(h.getCardImagePath(r)))&&(!this._options.transformed||l.isFileDownloaded(m.getCorrectImagePath(h.getCardImagePath(this._options.transformed))))){this._options.showSpinner=false}this.cardImage.info.cardID=r;this.cardImage.info.id=q.id;this.cardImage.setVisible(false);this.cardTransformed.setVisible(false);this.frame.setVisible(false);this.accent.setVisible(false);this.frameBack.setVisible(false);this.glow.setVisible(false);this.bonus.setVisible(false);this.bonusText.setVisible(false);this.rarity.setVisible(false);this.leaderBannerL.setVisible(false);this.leaderBannerR.setVisible(false);this.leaderLabel.setVisible(false);this.mainDeckDecal.setVisible(false);this.miniDeckDecal.setVisible(false);this.destroySpinner();if(!r){return}console.log("---------------------------------------------------------------------------------------");console.log("Updating CardThumbnailView cardID="+r+", options="+JSON.stringify(q)+", old options="+JSON.stringify(this._options));if(this._options.weapon!=q.weapon){this.layout(this._width,this.height,q)}this._options=q||{};this._card=TFCardsManager.getCardDefinition(r);var t;var s=this._definitions.accent;if(q.weapon){if(this._card.factionId==TFGameData.FACTION.DECEPTICONS){t=this.frame.info.asset_decepticon_weapon_back;h.changeImageOnSprite(this.teamColor,this._definitions.teamColor.info.asset2);h.changeImageOnSprite(this.accent,s.info.asset_decepticon_w)}else{t=this.frame.info.asset_autobot_weapon_back;h.changeImageOnSprite(this.accent,s.info.asset_autobot_w)}}else{if(this._card.factionId==TFGameData.FACTION.DECEPTICONS){t=this.frame.info.asset_decepticon_back;h.changeImageOnSprite(this.teamColor,this._definitions.teamColor.info.asset2);h.changeImageOnSprite(this.accent,s.info.asset_decepticon)}else{t=this.frame.info.asset_autobot_back;h.changeImageOnSprite(this.accent,s.info.asset_autobot)}}if(!q.noBackImage){console.log("Setting card back image="+t);this.frameBack.setImage(t);this.frameBack.setVisible(true)}this.frameBack.setIgnore(true);if(q.showBack){if(q.allowBackTap){this.frameBack.setIgnore(false)}}else{this.setFrameAndOptionals();var p=h.getCardImagePath(this._card.id);e.addTextureToCache(p,this.setImageCallback.bind(this,this.cardImage,p,q));if(this._transformedID){p=h.getCardImagePath(this._transformedID);e.addTextureToCache(p,this.setImageCallback.bind(this,this.cardTransformed,p,q))}}if(q.glow){this.setGlow(true)}},prepareSpinner:function(){if((!this._options.showSpinner||this._options.showSpinner==false)||(this._spinnershade&&this._spinnershade.__objectRegistryId)){return}this.spinnerRemoved=false;console.log("SPINNER INIT");var t=this._height/206;var q=[75*t,75*t];var p=[116*t,48*t];var s=this._height;var r=this._width;if(this._options.weapon==true){s=r}this._spinnerBack=new GL2.Sprite();this._spinnerBack.setImage("Content/Images8x/UI/card_frames/loading_graphic.png",p,[0.5,0.5],[0,0,1,1]);this._spinnerWheel=new GL2.Sprite();this._spinnerWheel.setImage("Content/Images8x/UI/card_frames/loading_spinner.png",q,[0.5,0.5],[0,0,1,1]);this._spinnersprite=new GL2.Sprite();this._spinnersprite.setImage("Content/Images8x/misc2/1pxclear.png",[r,s],[0.5,0.5],[0,0,1,1]);this._spinnersprite.setAlpha(0);this._spinnersprite=new GL2.Sprite();this._spinnersprite.setImage("Content/Images8x/misc2/1pxclear.png",[r,s],[0.5,0.5],[0,0,1,1]);this._spinnersprite.setAlpha(0);this._spinnershade=new GL2.Sprite();this._spinnershade.setImage("Content/Images8x/misc2/1pxblack.png",[r,s],[0.5,0.5],[0,0,1,1]);this._spinnershade.setDepth(4);if(this._options.anchor){this._spinnershade.setPosition((0.5-this._options.anchor[0])*this._width,(0.5-this._options.anchor[1])*this._height)}else{this._spinnershade.setPosition(this._width/2,this._height/2)}this._spinnersprite.addChild(this._spinnerBack);this._spinnersprite.addChild(this._spinnerWheel);this._spinnershade.addChild(this._spinnersprite);this.addChild(this._spinnershade);this._spinnerStartQueue=new c(this._am);this._spinnerStartQueue.pushAnimation(100,c.Curve.EaseIn);this._spinnerStartQueue.tween(c.Interpolate.scalar(0,1),function(u){this._spinnersprite.setAlpha(u)}.bind(this));this._spinnerStartQueue.start();md=new GL2.MotionData();md.initFromJSONFile("Content/AnimationData/card_spinner_anim.json",GL2.MotionData.DataFormat.FlashClassicTween,function(u,v){if(u){console.log("SPINNER error :"+JSON.stringify(u))}else{mc=new GL2.MotionController(v);syncFlags=GL2.MotionController.SyncFlags.Rotation;mc.bind("spinner",this._spinnerWheel,syncFlags);this._mc=mc;mc.play(GL2.MotionController.PlayMode.Loop)}}.bind(this))},changeToTransformedVersion:function(){this.cardImage.setDepth(0);this.cardTransformed.setDepth(1)},changeToNormalVersion:function(){this.cardImage.setDepth(1);this.cardTransformed.setDepth(0)},setFrameAndOptionals:function(){if(this._hideFrame!=true){this.frame.setVisible(true)}if(this._hideAccent!=true){this.accent.setVisible(true)}if(this._options.weapon){if(this._card.factionId==TFGameData.FACTION.DECEPTICONS){h.changeImageOnSprite(this.frame,this.frame.info.asset_decepticon_weapon);h.changeImageOnSprite(this.glow,this.glow.info.asset_decepticon_weapon);if(!this._options.noBackImage){this.frameBack.setImage(this.frame.info.asset_decepticon_weapon)}}else{h.changeImageOnSprite(this.frame,this.frame.info.asset_autobot_weapon);h.changeImageOnSprite(this.glow,this.glow.info.asset_autobot_weapon);if(!this._options.noBackImage){this.frameBack.setImage(this.frame.info.asset_autobot_weapon)}}}else{if(this._card.transformable&&this._transformFrameFlag!==false){this.accent.setDepth(16);this.frame.setScale(this._scaleX*1.09,this._scaleY*1.09);this.frame.setPosition(this._anchorOffset[0]+this.frame.info.offset_x*(this._scaleX*1.5),this._anchorOffset[1]+this.frame.info.offset_y*(this._scaleY*1.9));if(this._card.factionId==TFGameData.FACTION.DECEPTICONS){h.changeImageOnSprite(this.frame,this.frame.info.asset_decepticon_transformable);h.changeImageOnSprite(this.glow,this.glow.info.asset_decepticon_transformable);if(!this._options.noBackImage){this.frameBack.setImage(this.frame.info.asset_decepticon_transformable)}}else{h.changeImageOnSprite(this.frame,this.frame.info.asset_autobot_transformable);h.changeImageOnSprite(this.glow,this.glow.info.asset_autobot_transformable);if(!this._options.noBackImage){this.frameBack.setImage(this.frame.info.asset_autobot_transformable)}}}else{if(this._card.factionId==TFGameData.FACTION.DECEPTICONS){h.changeImageOnSprite(this.frame,this.frame.info.asset_decepticon);h.changeImageOnSprite(this.glow,this.glow.info.asset_decepticon);if(!this._options.noBackImage){this.frameBack.setImage(this.frame.info.asset_decepticon)}}else{h.changeImageOnSprite(this.frame,this.frame.info.asset_autobot);h.changeImageOnSprite(this.glow,this.glow.info.asset_autobot);if(!this._options.noBackImage){this.frameBack.setImage(this.frame.info.asset_autobot)}}}}this.frameBack.setVisible(false);var p=n.cardBonusInRunningEvent(this.cardImage.info.cardID);if(p){this.bonus.setVisible(true);this.bonusText.setVisible(true);this.bonusText.setText(Math.floor(p.attackBonus/100)+"x")}h.changeImageOnSprite(this.rarity,this.rarity.info["asset_rarity"+this._card.rarity]);this.rarity.setVisible(true);if(this._options.leader&&this._leaderBannerFlag!==false){this.leaderBannerL.setVisible(true);this.leaderBannerR.setVisible(true);this.leaderLabel.setVisible(true)}if(this._options.mainDecal){this.mainDeckDecal.setVisible(true)}if(this._options.autobotDecal){h.changeImageOnSprite(this.miniDeckDecal,this.miniDeckDecal.info.asset_autobot);this.miniDeckDecal.setVisible(true)}else{if(this._options.decepticonDecal){h.changeImageOnSprite(this.miniDeckDecal,this.miniDeckDecal.info.asset_decepticon);this.miniDeckDecal.setVisible(true)}}},setImageCallback:function(r,p,q){this._options=q||{};this._spinnerCount++;this.prepareSpinner();h.setRemoteImageOnSprite(r,p,function(){if(this._options.showSpinner==true){this.removeSpinner()}}.bind(this));r.setVisible(true)},setOnPressCallback:function(p){this.cardImage.setOnPressCallback(p)},removeSpinner:function(){if(--this._spinnerCount>0){return}if(this._spinnersprite._alpha==0&&this.spinnerRemoved==false){this.destroySpinner();this.spinnerRemoved=true;return}this._spinnerAnimationQueue=new c(this._am);this._spinnerAnimationQueue.pushAnimation(1000,c.Curve.EaseOut);this._spinnerAnimationQueue.tween(c.Interpolate.scalar(1,2),function(p){this._spinnershade.setAlpha((1-(p-1)))}.bind(this));this._spinnerAnimationQueue.pushCallback(function(){this.destroySpinner();this.spinnerRemoved=true}.bind(this));this._spinnerAnimationQueue.start()},destroySpinner:function(){if(this._spinnerBack&&this._spinnerBack.__objectRegistryId){this._spinnerBack.destroy()}if(this._spinnerWheel&&this._spinnerWheel.__objectRegistryId){this._spinnerWheel.destroy()}if(this._spinnersprite&&this._spinnersprite.__objectRegistryId){this._spinnersprite.destroy()}if(this._spinnershade&&this._spinnershade.__objectRegistryId){this._spinnershade.destroy()}if(this._mc&&this._mc.__objectRegistryId){this._mc.stop();this._mc.destroy()}if(this._spinnerAnimationQueue){this._spinnerAnimationQueue.destroy()}},setGlow:function(p){this.glow.setVisible(p?true:false);this.hideAccent();if(this.glow._queue){this.glow._queue.destroy();this.glow._queue=undefined}var q=1000;if(p){this.glow._queue=new c(this._am);this.glow._queue.pushAnimation(q,c.Curve.EaseOut);this.glow._queue.tween(c.Interpolate.scalar(0.5,1),function(r){this.setAlpha(r)}.bind(this.glow));this.glow._queue.pushAnimation(q,c.Curve.EaseIn);this.glow._queue.tween(c.Interpolate.scalar(1,0.5),function(r){this.setAlpha(r)}.bind(this.glow));this.glow._queue.startLooped()}},disableTap:function(){this.cardImage.setIgnore(true)},enableTap:function(){this.cardImage.setIgnore(false)},hideMainFrame:function(){this._hideFrame=true;this.frame.setVisible(false)},showMainFrame:function(){this._hideFrame=false;this.frame.setVisible(true)},hideAccent:function(){this._hideAccent=true;this.accent.setVisible(false)},showAccent:function(){this._hideAccent=false;this.accent.setVisible(true)},isTransformable:function(){return this._card.transformable},destroy:function($super){this._am.destroy();this.destroySpinner();$super()}})}};__ngs._8a={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var g=__ngs.r_(__ngs._7l).DialogController;var e=__ngs.r_(__ngs._do).FullScreenWeaponCardView;var b=__ngs.r_(__ngs._45).AnimationQueue;var d=__ngs.r_(__ngs._61).TFEventManager;var h=__ngs.r_(__ngs._s).TFUtils;a.FullScreenWeaponCardController=g.subclass({classname:"FullScreenWeaponCardController",initialize:function($super,u,m){this._otherData={};if(u){this._otherData=u}this._callback=null;if(this._otherData&&this._otherData.destroyCB){this._callback=this._otherData.destroyCB}this.callbacksToCollect=0;$super(e,false);if(m){this.getView().showShade()}var y;if(this._otherData.usercard||this._otherData.CardDefinition){TFUserData._selectedFullScreenCard=this._otherData.usercard;var s=this.createAnimationQueue();var o=this.createAnimationQueue();var v=0.7;var w=0.6;var q=340;this.getView().setAlpha(w);this.getView().setScale(v);s.pushAnimation(q,b.Curve.EaseOut);s.tween(b.Interpolate.scalar(v,1),function(k){if(this&&this.getView()){this.getView().setScale(k)}}.bind(this));o.pushAnimation(q,b.Curve.EaseIn);o.tween(b.Interpolate.scalar(w,1),function(k){if(this&&this.getView()){this.getView().setAlpha(k)}}.bind(this));o.pushCallback(function(){TFSceneDirector.enableGlobalTouches("FullScreenWeaponCardController [FullScreenWeaponCardView]");if(this._otherData&&this._otherData.cbNext){this._otherData.cbNext()}}.bind(this));setTimeout(s.start.bind(s),10);setTimeout(o.start.bind(o),10);var z=__ngs.r_(__ngs._r).TFCardsManager;if(this._otherData.CardDefinition){y=z.getCardDefinition(this._otherData.CardDefinition)}else{y=z.getCardDefinition(this._otherData.usercard.definitionId)}if(this._otherData.usercard){var l=z.getCardLevel(this._otherData.usercard);this.getView().level.setText(l)}else{this.getView().expBar.setVisible(false);this.getView().level.setVisible(false);this.getView().LevelLabel.setVisible(false)}this.getView().name.setVisible(true);this.getView().name.transformersName.setOverflowMode(GL2.Text.OverflowMode.ReduceFontSize);this.getView().name.transformersName.setText(Localization.getString(y.name).toUpperCase());if(y.prefix&&(y.prefix.length>0)){this.getView().prefixLabel.setText(Localization.getString(y.prefix).toUpperCase());this.getView().prefixLabel.setVisible(true);this.getView().eliteBannerImage.setVisible(true)}if(y.factionId==TFGameData.FACTION.DECEPTICONS){h.changeImageOnSprite(this.getView().logo,this.getView()._definitions.logo.info.asset2);h.changeImageOnSprite(this.getView().waponPanelRight,this.getView()._definitions.waponPanelRight.info.asset2);h.changeImageOnSprite(this.getView().waponPanelLeft,this.getView()._definitions.waponPanelLeft.info.asset2)}else{h.changeImageOnSprite(this.getView().logo,this.getView()._definitions.logo.info.asset1);h.changeImageOnSprite(this.getView().waponPanelRight,this.getView()._definitions.waponPanelRight.info.asset1);h.changeImageOnSprite(this.getView().waponPanelLeft,this.getView()._definitions.waponPanelLeft.info.asset1)}if(y.speciality==TFGlobals.stats.status1){h.changeImageOnSprite(this.getView().specializationIcon,this.getView()._definitions.specializationIcon.info.asset1);this.getView().SPECIALIZATIONNAME.setText(Localization.getString(TFGlobals.stats.status1))}else{if(y.speciality==TFGlobals.stats.status2){h.changeImageOnSprite(this.getView().specializationIcon,this.getView()._definitions.specializationIcon.info.asset2);this.getView().SPECIALIZATIONNAME.setText(Localization.getString(TFGlobals.stats.status2))}else{if(y.speciality==TFGlobals.stats.status3){h.changeImageOnSprite(this.getView().specializationIcon,this.getView()._definitions.specializationIcon.info.asset3);this.getView().SPECIALIZATIONNAME.setText(Localization.getString(TFGlobals.stats.status3))}}}var A=y.id;this.prepareSpinner();this.callbacksToCollect+=1;h.setRemoteImageOnSprite(this.getView().card,h.getCardFullImagePath(A),this.collectCallbacks.bind(this));if(y.rarity==TFGameData.RARITY.UNCOMMON){h.changeImageOnSprite(this.getView().rarity,this.getView()._definitions.rarity.info.asset2)}else{if(y.rarity==TFGameData.RARITY.RARE){h.changeImageOnSprite(this.getView().rarity,this.getView()._definitions.rarity.info.asset3)}else{if(y.rarity==TFGameData.RARITY.SUPERRARE){h.changeImageOnSprite(this.getView().rarity,this.getView()._definitions.rarity.info.asset4)}else{h.changeImageOnSprite(this.getView().rarity,this.getView()._definitions.rarity.info.asset1)}}}if(this._otherData.hideButtons){this.getView().hideButtons()}var x=z.getBonusFromUnit(undefined,y.id);var n="";var t="";if(y.affinity[0]==1){n=this.getView()._definitions.classAIcon.info.asset1}else{if(y.affinity[0]==2){n=this.getView()._definitions.classAIcon.info.asset2}else{if(y.affinity[0]==3){n=this.getView()._definitions.classAIcon.info.asset3}else{if(y.affinity[0]==4){n=this.getView()._definitions.classAIcon.info.asset4}}}}t=Localization.getString(TFGameData._configJSON.classIds[y.affinity[0]+""].name);h.changeImageOnSprite(this.getView().classAIcon,n);this.getView().CLASSANAME.setText(Localization.getString(t));if(y.affinity[1]==1){n=this.getView()._definitions.classBIcon.info.asset1}else{if(y.affinity[1]==2){n=this.getView()._definitions.classBIcon.info.asset2}else{if(y.affinity[1]==3){n=this.getView()._definitions.classBIcon.info.asset3}else{if(y.affinity[1]==4){n=this.getView()._definitions.classBIcon.info.asset4}}}}t=Localization.getString(TFGameData._configJSON.classIds[y.affinity[1]+""].name);h.changeImageOnSprite(this.getView().classBIcon,n);this.getView().CLASSBNAME.setText(Localization.getString(t));h.changeImageOnSprite(this.getView().classBIcon,n);this.getView().skillNameA.setText(Localization.getString("ui_noability"));this.getView().skillNameB.setText(Localization.getString("ui_noability"));for(var p in x.abilities){var n="";if(x.abilities[p].type=="initial"){this.getView().skillNameA.setText(Localization.getString(x.abilities[p].name));this.getView().skillDescriptionA.setText(Localization.getString(x.abilities[p].desc))}else{if(x.abilities[p].type=="battle"){this.getView().skillNameB.setText(Localization.getString(x.abilities[p].name));this.getView().skillDescriptionB.setText(Localization.getString(x.abilities[p].desc))}}}var r;if(!this._otherData.stats){var z=__ngs.r_(__ngs._r).TFCardsManager;r=z.getCardStatus(this._otherData.usercard)}else{r=this._otherData.stats}this.getView().stat1.setText(Math.floor(r.status1*100)+"%");this.getView().stat2.setText(Math.floor(r.status2*100)+"%");this.getView().stat3.setText(Math.floor(r.status3*100)+"%")}},prepareSpinner:function(){if(this.spinnerRemoved===false){return}this.spinnerRemoved=false;var l=[75*1.5,75*1.5];var k=[116*1.5,48*1.5];this._spinnerBack=new GL2.Sprite();this._spinnerBack.setImage("Content/Images8x/UI/card_frames/loading_graphic.png",k,[0.5,0.5],[0,0,1,1]);this._spinnerWheel=new GL2.Sprite();this._spinnerWheel.setImage("Content/Images8x/UI/card_frames/loading_spinner.png",l,[0.5,0.5],[0,0,1,1]);this._spinnerBack.setPosition(320,444);this._spinnerWheel.setPosition(320,444);this._spinnersprite=new GL2.Sprite();this._spinnersprite.setImage("Content/Images8x/UI/card_frames/frame_loading.jpg",[640,888],[0,0],[0,0,1,1]);this._spinnersprite.setAlpha(0);this._spinnershade=new GL2.Sprite();this._spinnershade.setImage("Content/Images8x/misc2/1pxblack.png",[640,888],[0,0],[0,0,1,1]);this._spinnershade.setDepth(10);this._spinnershade.setPosition(-320,-460);this._spinnershade.addChild(this._spinnersprite);this._spinnershade.addChild(this._spinnerBack);this._spinnershade.addChild(this._spinnerWheel);this.getView().addChild(this._spinnershade);this._spinnerStartQueue=new b(this._am);this._spinnerStartQueue.pushAnimation(50,b.Curve.EaseOut);this._spinnerStartQueue.tween(b.Interpolate.scalar(0,1),function(m){}.bind(this));this._spinnerStartQueue.pushAnimation(100,b.Curve.EaseIn);this._spinnerStartQueue.tween(b.Interpolate.scalar(0,1),function(m){if(this.spinnerRemoved===true){console.log("FullScreenWeaponCardView > prepareSpinner > ignoring spinner, already removed");return}console.log("FullScreenWeaponCardView > prepareSpinner > alpha : "+m);this._spinnersprite.setAlpha(m)}.bind(this));this._spinnerStartQueue.start();md=new GL2.MotionData();md.initFromJSONFile("Content/AnimationData/card_spinner_anim.json",GL2.MotionData.DataFormat.FlashClassicTween,function(m,n){if(m){console.log("SPINNER error :"+JSON.stringify(m))}else{if(this.spinnerRemoved===true){return}mc=new GL2.MotionController(n);mc.bind("spinner",this._spinnerWheel,GL2.MotionController.SyncFlags.Rotation);mc.bind("spinnerAlpha",this._spinnersprite,GL2.MotionController.SyncFlags.Alpha);this._mc=mc;mc.play(GL2.MotionController.PlayMode.Loop)}}.bind(this))},collectCallbacks:function(){this.callbacksToCollect--;if(this.callbacksToCollect<=0){this.removeSpinner()}},removeSpinner:function(){if(this._spinnersprite._alpha===0&&this.spinnerRemoved===false){this.destroySpinner();this.spinnerRemoved=true;return}this._spinnerAnimationQueue=new b(this._am);this._spinnerAnimationQueue.pushAnimation(1000,b.Curve.EaseOut);this._spinnerAnimationQueue.tween(b.Interpolate.scalar(1,2),function(k){this._spinnershade.setAlpha((1-(k-1)))}.bind(this));this._spinnerAnimationQueue.pushCallback(function(){this.destroySpinner();this.spinnerRemoved=true}.bind(this));this._spinnerAnimationQueue.start()},destroySpinner:function(){if(this._spinnerBack&&this._spinnerBack.__objectRegistryId){this._spinnerBack.destroy()}if(this._spinnerWheel&&this._spinnerWheel.__objectRegistryId){this._spinnerWheel.destroy()}if(this._spinnersprite&&this._spinnersprite.__objectRegistryId){this._spinnersprite.destroy()}if(this._spinnershade&&this._spinnershade.__objectRegistryId){console.log("FullScreenWeaponCardView > destroySpinner > this._spinnershade.destroy()");this._spinnershade.destroy()}if(this._mc&&this._mc.__objectRegistryId){this._mc.stop();this._mc.destroy()}},onDismiss:function(){if(this._callback){this._callback()}this.dismissDialog()},onTap:function(){if(this._otherData&&this._otherData.cbTap){this._otherData.cbTap();this._otherData.cbTap=undefined}}})}};__ngs._8b={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var e=__ngs.r_(__ngs._7p).View;var d=__ngs.r_(__ngs._dp).MissionSelectCellViewDefinition;var a=__ngs.r_(__ngs._89).CardThumbnailView;b.MissionSelectCellView=e.subclass({classname:"MissionSelectCellView",initialize:function($super,g,h){$super(g,d);this._controller=g;this._arrangeCards(h)},_arrangeCards:function(q){var n=this._definitions.rewardCardGroup.info.card_w;var s=this._definitions.rewardCardGroup.info.card_h;var p=this._definitions.rewardCardGroup.info.card_space;var r=this._definitions.rewardCardGroup.info.max_cards;var l=n*0.5,k=s*0.5;var m,h;var g=TFGameData.getCardRewardsForMission(q.id);this._cardPanels=[];for(m=0;m<r;m++){var t={showBack:true,anchor:[0.5,0.5],showSpinner:true};if(m<g.length){var o=TFCardsManager.getCardDefinition(g[m]);if(o.type==TFGameData.CARD_TYPE.WEAPON){t.weapon=true;s=n}}h=new a(this.getParentController(),undefined,n,s,t);this._cardPanels[m]=h;this.rewardCardGroup.addChild(h);h.setPosition(l,k);h.cardImage.info.id=m;h.setVisible(false);l=l+n+p}},destroy:function($super){$super()}})}};__ngs._8c={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.BossSelectCellViewDefinition={images:[{name:"missionBackground",pos_x:30,pos_y:70,size_x:580,size_y:210,asset:""},{name:"missionBackgroundFade",pos_x:30,pos_y:70,size_x:580,size_y:210,asset:"Content/Images8x/misc/1pxwhite.png",color:[0,0,0],alpha:0.2},{name:"cellBg",pos_x:0,pos_y:0,size_x:320,size_y:400,asset:"Content/Images8x/UI/02_mission/panel_list.png"},{name:"cellBgFlip",pos_x:320,pos_y:0,size_x:320,size_y:400,flip_x:true,asset:"Content/Images8x/UI/02_mission/panel_list.png"},{name:"bossWeaponCard",anchor_x:0.5,anchor_y:0,pos_x:320,pos_y:273,size_x:100,size_y:100,asset:"Content/Images8x/misc/1pxclear.png",visible:false}],labels:[{name:"completionLabel",text:"ui_cleared_uc",fontType:"Content/Fonts/SFElectrotome.ttf",dropShadowVisible:true,pos_x:320,pos_y:170,size_x:400,size_y:150,anchor_x:0.5,anchor_y:0.5,horizontalAlign:"center",color:[255,255,255],font_size:72},{name:"bossName",text:"",fontType:"Content/Fonts/SFElectrotome.ttf",pos_x:100,pos_y:24,anchor_x:0,anchor_y:0,color:[183,226,240],horizontalAlign:"left",font_size:30},{name:"defeatToGetLabel",text:"ui_defeattoget_uc",fontType:"Content/Fonts/SFElectrotome.ttf",pos_x:175,pos_y:330,anchor_x:0.5,anchor_y:0.5,color:[183,226,240],horizontalAlign:"left",font_size:24}],buttons:[{name:"goButton",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:170,size_x:140,size_y:140,action:"onGoButton",sound:["click_high"],asset:"Content/Images8x/UI/button/button_mission_vs.png"}],groupDefinitions:{completionGroup:{labels:[{name:"progressPercent",text:"",fontType:"Content/Fonts/SFElectrotome.ttf",pos_x:87,pos_y:40,anchor_x:1,anchor_y:0,depth:1,horizontalAlign:"right",font_size:36},{name:"percentageLabel",text:"ui_percent",fontType:"Content/Fonts/SFElectrotome.ttf",pos_x:112,pos_y:52,anchor_x:1,anchor_y:0,depth:1,horizontalAlign:"left",font_size:20}],images:[{name:"completionBg",pos_x:72,pos_y:35,size_x:100,size_y:50,anchor_x:0.5,anchor_7:0.5,asset:"",info:{asset1:"Content/Images8x/UI/02_mission/badge_status_a.png",asset2:"Content/Images8x/UI/02_mission/badge_status_b.png"}}]},missionNumberGroup:{images:[{name:"missionNumberBg",pos_x:55,pos_y:90,size_x:80,size_y:60,anchor_x:0.5,anchor_7:0.5,rotation:90,flip_x:"true",asset:"Content/Images8x/UI/02_mission/badge_status_a.png"},{name:"missionNumberStar",pos_x:26,pos_y:68,size_x:40,size_y:40,anchor_x:0.5,anchor_7:0.5,color:[245,255,0],depth:1,visible:true,asset:"Content/Images8x/UI/icon/icon_0_star.png"}]}},groups:[{name:"completionGroup",groupDefinition:"completionGroup",pos_x:480,pos_y:280,size_x:260,size_y:150,visible:true},{name:"missionNumberGroup",groupDefinition:"missionNumberGroup",pos_x:30,pos_y:-25,size_x:260,size_y:150,visible:true}]}}};__ngs._8d={_c:null,_d:function(){var d={exports:{}};var A=d.exports;this._c=d;var y=__ngs.r_(__ngs._n).ViewController;var q=__ngs.r_(__ngs._45).AnimationQueue;var x=__ngs.r_(__ngs._dq).BossFightView;var l=__ngs.r_(__ngs._89).CardThumbnailView;var c=__ngs.r_(__ngs._48).TFSoundManager;var s=__ngs.r_(__ngs._at).FightAnimation;var h=__ngs.r_(__ngs._au).MeleeHit;var B=__ngs.r_(__ngs._av).LaserShot;var a=__ngs.r_(__ngs._aw).HitShake;var m=__ngs.r_(__ngs._ax).MissileShot;var C=__ngs.r_(__ngs._ay).IntroAnimation3D;var t=__ngs.r_(__ngs._az).ExecuteFunction;var v=__ngs.r_(__ngs._b0).SlideCardsIn;var b=__ngs.r_(__ngs._b1).TransformingBonus;var z=__ngs.r_(__ngs._b2).SlideBannerInOut;var w=__ngs.r_(__ngs._b3).HealthBarDamage;var r=__ngs.r_(__ngs._b4).HealthAnimation;var u=__ngs.r_(__ngs._b5).DeathAnimation;var n=__ngs.r_(__ngs._b6).PositionBonus;var e=__ngs.r_(__ngs._b7).MaxLevelBonus;var p=__ngs.r_(__ngs._b8).FocusAbility;var k=__ngs.r_(__ngs._b9).EndAbility;var o=__ngs.r_(__ngs._ba).SuperiorityAbility;var g=__ngs.r_(__ngs._bb).ConvergenceAbility;A.BossFightViewController=y.subclass({classname:"BossFightViewController",initialize:function($super,D,N,I){$super();TFUserData.blockBack=true;this.createView(x);c._playingBattle=true;this.getView().opponentHPBar.emptyBar.setColor(84/255,84/255,84/255);this.getView().opponentHPBar.fillBar.setColor(79/255,148/255,205/255);this.getView().opponentHPBar.middleBar.setColor(255/255,0/255,0/255);this.getView().playerHPBar.emptyBar.setColor(84/255,84/255,84/255);this.getView().playerHPBar.fillBar.setColor(79/255,148/255,205/255);this.getView().playerHPBar.middleBar.setColor(255/255,0/255,0/255);this._worldId=TFGameData.getWorldIdForMission(D);this._stageId=TFGameData.getStageIdForMission(D);this._deckIndex=TFGameData.getCorrectDeckForWorld(this._worldId);this._missionId=D;this._boss=N;this._callingClassname=I;this.getView().opponentName.setText(Localization.getString(this._boss.name).toUpperCase());this.getView().playerName.setText(TFUserData.getGamerTag().toUpperCase());this.timerFunctions=[];if(TFUserData.bossCounter==0&&TFGameData.getStage(this._worldId,this._stageId).boss.stageBossDialog){var G=__ngs.r_(__ngs._8e).FullScreenMissionController;TFUserData.bossCounter++;var M=new Object();M.image=TFGameData.getStage(this._worldId,this._stageId).boss.introCharacter;M.message=TFGameData.getStage(this._worldId,this._stageId).boss.introDialog;M.cb=function(){};TFSceneDirector._showDialog(new G(M,true))}var K=this.getView()._definitions.bossBlock.info.card_w;var S=this.getView()._definitions.bossBlock.info.card_h;var F=new Core.Size(K,S);panel=new l(this,N.gearId,K,S,{anchor:[0.5,0.5],showSpinner:true});this.getView().bossBlock._cardPanel=panel;this.getView().addChild(panel);panel.cardImage.setFeedback(false);panel.setPosition(this.getView()._definitions.bossBlock.pos_x,this.getView()._definitions.bossBlock.pos_y);panel.disableTap();this.getView().playerBlock._cardPanels=[];K=this.getView()._definitions.playerBlock.info.card_w;S=this.getView()._definitions.playerBlock.info.card_h;var H=new Core.Size(K,S);var Q=(640-this.getView()._definitions.playerBlock.pos_x*2)/2;var E=this.getView()._definitions.playerBlock.pos_x;try{panel=new l(this,TFUserData.getDeckCard(TFGameData.STAT_TYPE.MELEE,TFGameData.DECK_RANK.COMMANDER,TFGameData.CARD_TYPE.TRANSFORMER,this._deckIndex).definitionId,K,S,{anchor:[0.5,0.5],showSpinner:true});this.getView().playerBlock._cardPanels.push(panel);this.getView().addChild(panel);panel.setPosition(E,this.getView()._definitions.playerBlock.pos_y);panel.cardImage.setFeedback(false);E=E+Q;panel=new l(this,TFUserData.getDeckCard(TFGameData.STAT_TYPE.RANGE,TFGameData.DECK_RANK.COMMANDER,TFGameData.CARD_TYPE.TRANSFORMER,this._deckIndex).definitionId,K,S,{anchor:[0.5,0.5],showSpinner:true});this.getView().playerBlock._cardPanels.push(panel);this.getView().addChild(panel);panel.setPosition(E,this.getView()._definitions.playerBlock.pos_y);panel.cardImage.setFeedback(false);E=E+Q;panel=new l(this,TFUserData.getDeckCard(TFGameData.STAT_TYPE.SPEED,TFGameData.DECK_RANK.COMMANDER,TFGameData.CARD_TYPE.TRANSFORMER,this._deckIndex).definitionId,K,S,{anchor:[0.5,0.5],showSpinner:true});this.getView().playerBlock._cardPanels.push(panel);this.getView().addChild(panel);panel.setPosition(E,this.getView()._definitions.playerBlock.pos_y);panel.cardImage.setFeedback(false)}catch(P){TFSceneDirector.onBackButton();return}var R;if(this._callingClassname=="MissionExploreViewController"){R=this._boss.id}else{if(this._callingClassname=="MissionSelectViewController"){R=null}else{return}}Server.fightBoss(this._worldId,this._stageId,R,this._missionId,function(U,T){if(U){TFUtils.showErrorMessages(T);TFSceneDirector.showMissionSelect(this._worldId,this._stageId);return}if(T.rewards&&T.rewards.maxExploreEnergy){TFUserData.setExploreMaxEnergy(T.rewards.maxExploreEnergy)}if(T.rewards&&T.rewards.exploreEnergy){TFUserData.setExploreEnergy(T.rewards.exploreEnergy)}TFUserData.setLastBattleResult(T);this._receivedResp=true}.bind(this));this.playerCards=[this.getView().playerBlock._cardPanels[0],this.getView().playerBlock._cardPanels[1],this.getView().playerBlock._cardPanels[2]];this.oppCards=[this.getView().bossBlock._cardPanel];this.oppCards[0].damageLayer=SpriteFactoryCache.createSpriteWithCachedAnimation("Content/Images8x/misc/1pxwhite.png",new Core.Size(this.oppCards[0].cardImage.getSize()._width*this.oppCards[0].cardImage.getScale()._x,this.oppCards[0].cardImage.getSize()._height*this.oppCards[0].cardImage.getScale()._y),[0,0],[0,0,1,1]);this.oppCards[0].damageLayer.setPosition(this.oppCards[0].cardImage._position);this.oppCards[0].damageLayer.setAlpha(0.2);this.oppCards[0].addChild(this.oppCards[0].damageLayer);this.oppCards[0].damageLayer.setColor(0,0,0);for(var L=0;L<this.playerCards.length;L++){this.playerCards[L].damageLayer=SpriteFactoryCache.createSpriteWithCachedAnimation("Content/Images8x/misc/1pxwhite.png",new Core.Size(this.playerCards[L].cardImage.getSize()._width*this.playerCards[L].cardImage.getScale()._x,this.playerCards[L].cardImage.getSize()._height*this.playerCards[L].cardImage.getScale()._y),[0,0],[0,0,1,1]);this.playerCards[L].damageLayer.setPosition(this.playerCards[L].cardImage._position);this.playerCards[L].damageLayer.setAlpha(0,2);this.playerCards[L].addChild(this.playerCards[L].damageLayer);this.playerCards[L].damageLayer.setColor(0,0,0)}this.fightAnimation=new s(this.getView());var J={displayed:false,animated:false,timeout:1000};var O={displayed:false,animated:false,timeout:1000};this.setHudDisplayData(J,O)},onFightButton:function(D){if(TFUserData.getTutorialState("mission")=="start"){this.getView().removeChild(this._arrow);TFUserData.setNewTutorialState("mission","stageComplete");TFAnalytics.reportGameEvent("MISSIONTUTORIAL",{Step:"BossFightButtonClick"})}if(!this._receivedResp){return}TFAnalytics.reportGameEvent("MISSIONBOSSSTART",{bossid:this._boss.id,bossname:this._boss.name,enemyhp:this._boss.hp,enemyattack:this._boss.attack});D.setVisible(false);TFSceneDirector.hideTopHud();this._setupBattleData();this._slideInBars()},_setupBattleData:function(){var D=TFUserData.getLastBattleResult();console.log("BossFightViewController > _setupBattleData > resultData : "+JSON.stringify(D));this._playerStartingHP=D.hp.player.slice(0);this._oppStartingHP=D.hp.enemy.slice(0);this._playerCurrentHP=D.hp.player.slice(0);this._oppCurrentHp=D.hp.enemy.slice(0);this._playerTotalStartingHp=this._getPlayerTotalRemainingHp();this._oppTotalStartingHp=this._getOpponentTotalRemainingHp()},_slideInBars:function(){var D=this.createAnimationQueue();D.pushAnimation(300,q.Curve.EaseIn);D.tween(q.Interpolate.scalar(0,640),function(E){if(!this){return}this.opponentHPBar.setVisible(true);this.opponentName.setVisible(true);this.opponentHPBar.setPosition(960-E,this.opponentHPBar.getPosition().getY());this.opponentName.setPosition(660-E,this.opponentName.getPosition().getY());this.playerHPBar.setVisible(true);this.playerName.setVisible(true);this.playerHPBar.setPosition(-320+E,this.playerHPBar.getPosition().getY());this.playerName.setPosition(-20+E,this.playerName.getPosition().getY())}.bind(this.getView()));D.pushAnimation(1000,q.Curve.Linear);D.pushCallback(this.animateBattle.bind(this));D.start()},animateBattle:function(){var G=TFUserData.getLastBattleResult();var L=150;for(var P in G.animations){var T=G.animations[P];console.log("BattleViewController > _animateBattle > doing step "+P);console.log("BattleViewController > _animateBattle > Step data : "+JSON.stringify(T));console.log("BattleViewController > _animateBattle > step timer function executing");for(var M=0;M<this.timerFunctions.length;++M){this.timerFunctions[M]()}if(T.type=="attack"){var D=(T.damagedUnit[6]-1)*3;if(T.turn=="player"){var H=this.playerCards[T.attackCardId];var F=H.getPosition();var S=[this.oppCards[0],this.oppCards[0],this.oppCards[0]]}else{if(T.turn=="enemy"){var H=this.oppCards[T.attackCardId];var F=H.getPosition();var S=[this.playerCards[(T.damagedUnit[6]-1)],this.playerCards[(T.damagedUnit[6]-1)],this.playerCards[(T.damagedUnit[6]-1)]]}}var K=T.attackCardId+1;if(K==TFGameData.STAT_TYPE.MELEE){this.fightAnimation.addAnimation(new h(H,S));this.fightAnimation.addAnimation(new a(S))}else{if(K==TFGameData.STAT_TYPE.RANGE){this.fightAnimation.addAnimation(new B(H,S,true));this.fightAnimation.addAnimation(new a(S))}else{if(K==TFGameData.STAT_TYPE.SPEED){this.fightAnimation.addAnimation(new m(H,S));this.fightAnimation.addAnimation(new a(S))}}}if(T.turn=="player"){var O=Math.round(this._getOpponentTotalRemainingHp()/this._oppTotalStartingHp*100);for(var N in T.damagedDealt){var J=T.damagedDealt[N].cardPosition;var I=T.damagedDealt[N].remainingHp;var R=I/this._oppStartingHP[J]*100;var E=this._oppCurrentHp[J]/this._oppStartingHP[J]*100;this._oppCurrentHp[J]=I;this.fightAnimation.addAnimation(new r(this.oppCards[J],R,E,T.damagedDealt[N].damage,this.getView().opponentHPBar));if(I<=0){this.fightAnimation.addAnimation(new u(this.oppCards[J]))}}var Q=Math.round(this._getOpponentTotalRemainingHp()/this._oppTotalStartingHp*100);this.fightAnimation.addAnimation(new w(this.getView().opponentHPBar,Q,O))}else{if(T.turn=="enemy"){var O=Math.round(this._getPlayerTotalRemainingHp()/this._playerTotalStartingHp*100);for(var N in T.damagedDealt){var J=T.damagedDealt[N].cardPosition;var I=T.damagedDealt[N].remainingHp;var R=I/this._playerStartingHP[J]*100;var E=this._playerCurrentHP[J]/this._playerStartingHP[J]*100;this._playerCurrentHP[J]=I;this.fightAnimation.addAnimation(new r(this.playerCards[J],R,E,T.damagedDealt[N].damage,this.getView().playerHPBar));if(I<=0){this.fightAnimation.addAnimation(new u(this.playerCards[J]))}}var Q=Math.round(this._getPlayerTotalRemainingHp()/this._playerTotalStartingHp*100);this.fightAnimation.addAnimation(new w(this.getView().playerHPBar,Q,O))}}}}this.fightAnimation.addAnimation(new t(this.battleEnd.bind(this)));this.fightAnimation.executeAnimation()},battleEnd:function(){console.log("BossFightViewController > battleEnd > called");if(this._callingClassname=="MissionExploreViewController"){TFSceneDirector.showBossResults(this._boss,this._missionId,TFSceneDirector.showDoItMission.bind(TFSceneDirector,this._missionId))}else{if(this._callingClassname=="MissionSelectViewController"){if(TFUserData.getLastBattleResult().playerWins){TFUserData.completedStages.push(this._stageId);TFSceneDirector.setStage({worldId:-1,stageId:-1})}TFSceneDirector.showBossResults(this._boss,this._missionId,TFSceneDirector.showWorldSelect.bind(TFSceneDirector))}}},onSkip:function(){this._skipped=true;this.battleEnd()},destroy:function($super){$super();c._playingBattle=null;TFUserData.blockBack=false},_getPlayerTotalRemainingHp:function(){var D=0;for(var E in this._playerCurrentHP){D+=this._playerCurrentHP[E]}console.log("BossFightViewController > _getPlayerTotalRemainingHp > result : "+D);return D},_getOpponentTotalRemainingHp:function(){var D=0;for(var E in this._oppCurrentHp){D+=this._oppCurrentHp[E]}console.log("BossFightViewController > _getOpponentTotalRemainingHp > result : "+D);return D},afterViewDisplayed:function(){if(TFUserData.getTutorialState("mission")=="start"){var F=new Object();F.title=Localization.getString("tutorial_boss_title_01");F.text=Localization.getString("tutorial_boss_text_01");F.Id="tutorial_boss_title_01";F.cb=function(){TFAnalytics.reportGameEvent("MISSIONTUTORIAL",{Step:"BossTutorialDismiss"})};var J=__ngs.r_(__ngs._81).TutorialBubbleView;this._tutorialBubbleController=TFSceneDirector.showTutorialDialog(J,F);this._tutorialBubbleController.getView().bubble1.setPosition(-320,-100);var E=__ngs.r_(__ngs._4e).GLButton;var H=30;var I=390;var G=487;this._arrow=new E(undefined,TFUtils.getArrowImage(),null,[1,0,-1,1]);this._arrow.setSize(new Core.Size(120,70));this._arrow.setPosition(I,G);this._arrow.setFeedback(false);this.getView().addChild(this._arrow);var D=this.createAnimationQueue();D.pushAnimation(250,q.Curve.EaseIn).tween(q.Interpolate.scalar(I-H,I+H),function(K){this._arrow.setPosition(K,this._arrow.getPosition().getY())}.bind(this));D.pushAnimation(250,q.Curve.EaseOut).tween(q.Interpolate.scalar(I+H,I-H),function(K){this._arrow.setPosition(K,this._arrow.getPosition().getY())}.bind(this));D.startLooped()}}})}};__ngs._8e={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var g=__ngs.r_(__ngs._7l).DialogController;var e=__ngs.r_(__ngs._dr).FullScreenMissionView;var b=__ngs.r_(__ngs._45).AnimationQueue;var d=__ngs.r_(__ngs._61).TFEventManager;a.FullScreenMissionController=g.subclass({classname:"FullScreenMissionController",initialize:function($super,t,l){this._otherData={};if(t){this._otherData=t}$super(e,l);if(l){this.getView().showShade()}if(this._otherData.image){var h="./Content/Images1x/missions/front/"+this._otherData.image;this.getView().card.setImage(h)}this.getView().message.setText(Localization.getString(this._otherData.message));return;var r=5000;var q=this.createAnimationQueue();var p=this.createAnimationQueue();var o=this.createAnimationQueue();q.pushAnimation(r,b.Curve.Linear);var n=new Core.Point(this.getView()._definitions.message.size_x,0);var v=new Core.Point(0,0);q.tween(b.Interpolate.point(n,v),function(w){this.getView().setPosition(w.getX(),w.getY())}.bind(this));q.start();p.pushAnimation(r,b.Curve.Linear);var m=new Core.Point((this.getView()._definitions.card.size_x*-1),0);var u=new Core.Point(0,0);p.tween(b.Interpolate.point(m,u),function(w){this.getView().setPosition(w.getX(),w.getY())}.bind(this));p.start();o.pushAnimation(r,b.Curve.Linear);var k=new Core.Point(this.getView()._definitions.textField.size_x,0);var s=new Core.Point(0,0);o.tween(b.Interpolate.point(k,s),function(w){this.getView().setPosition(w.getX(),w.getY())}.bind(this));o.start()},onOk:function(){if(this._otherData&&this._otherData.cb){this._otherData.cb()}this.dismissDialog()}})}};__ngs._8f={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var d=__ngs.r_(__ngs._7p).View;var c=__ngs.r_(__ngs._ds).BottomHudAltViewDefinition;a.BottomHudAltView=d.subclass({classname:"BottomHudAltView",initialize:function($super,e){$super(e,c)},destroy:function($super){$super()},setPressedButton:function(e){if(e=="WorldSelectViewController"){this["navButton1"].setSelected(true);this["navButton2"].setSelected(false);this["navButton3"].setSelected(false)}else{if(e=="StageSelectViewController"){this["navButton1"].setSelected(false);this["navButton2"].setSelected(true);this["navButton3"].setSelected(false)}else{if(e=="MissionSelectViewController"){this["navButton1"].setSelected(false);this["navButton2"].setSelected(false);this["navButton3"].setSelected(true)}else{this["navButton1"].setSelected(false);this["navButton2"].setSelected(false);this["navButton3"].setSelected(false)}}}this.setExploreEnergy(TFUserData.getExploreEnergy(),TFUserData.getMaxExploreEnergy())},enableMisionNav:function(e){console.log("enableMisionNav %s",e);var g=e?1:0.3;this["battlegroundIcon"].setAlpha(g);this["navButton2"].setEnabled(e)},enableListNav:function(e){console.log("enableListNav %s",e);var g=e?1:0.3;this["missionsIcon"].setAlpha(g);this["navButton3"].setEnabled(e)},setExploreEnergy:function(k,h){this["energyLabel"].setText(k+"/"+h);if(this.energyBarMeter&&this.energyBarMeter._animation){var l=this.energyBarMeter._animation.getFrame(0);if(this.energyBarMeter.originalWidth==undefined){this.energyBarMeter.originalWidth=l.getSize().getWidth()}var e=(k==0||h==0)?0:(k/h);var g=new Core.Size(this.energyBarMeter.originalWidth*e,l.getSize().getHeight());var m=new GL2.Animation.Frame(l.getImage(),l.getDuration(),g,l.getAnchor(),l.getUVs());this.energyBarMeter._animation.setFrame(0,m)}},setEnergy:function(g,e){this["energyLabel"].setText(g+"/"+e)}})}};__ngs._8g={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var d=__ngs.r_(__ngs._7p).View;var b=__ngs.r_(__ngs._dt).StageSelectViewDefinition;a.StageSelectView=d.subclass({classname:"StageSelectView",initialize:function($super,e,g){$super(e,b)},destroy:function($super){$super()}})}};__ngs._8h={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var d=__ngs.r_(__ngs._7p).View;var c=__ngs.r_(__ngs._du).FullScreenMissionDefinition;a.FullScreenMissionView=d.subclass({classname:"FullScreenMissionView",initialize:function($super,e,g){$super(e,c)},destroy:function($super){$super()}})}};__ngs._8i={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._7p).View;var a=__ngs.r_(__ngs._dv).WorldSelectViewDefinition;b.WorldSelectView=d.subclass({classname:"WorldSelectView",initialize:function($super,e,g){$super(e,a)},destroy:function($super){$super()}})}};__ngs._8j={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.DeckGridViewDefinition={groups:[{name:"mainButtonGroup",groupDefinition:"mainButtonGroup",pos_x:160,pos_y:30,depth:0},{name:"autobotButtonGroup",groupDefinition:"autobotButtonGroup",pos_x:320,pos_y:30,depth:0},{name:"decepticonButtonGroup",groupDefinition:"decepticonButtonGroup",pos_x:480,pos_y:30,depth:0},{name:"label1",groupDefinition:"stats",anchor_x:0.5,anchor_y:0.5,pos_x:-6,pos_y:305,depth:101},{name:"label2",groupDefinition:"stats",anchor_x:0.5,anchor_y:0.5,pos_x:223,pos_y:260,depth:101},{name:"label3",groupDefinition:"stats",anchor_x:0.5,anchor_y:0.5,pos_x:421,pos_y:332,depth:101},{name:"label4",groupDefinition:"stats",anchor_x:0.5,anchor_y:0.5,pos_x:54,pos_y:507,depth:101},{name:"label5",groupDefinition:"stats",anchor_x:0.5,anchor_y:0.5,pos_x:-25,pos_y:484,depth:101},{name:"label8",groupDefinition:"stats",anchor_x:0.5,anchor_y:0.5,pos_x:477,pos_y:534,depth:101},{name:"label9",groupDefinition:"stats",anchor_x:0.5,anchor_y:0.5,pos_x:396,pos_y:507,depth:101},{name:"label6",groupDefinition:"stats",pos_x:176,pos_y:445,depth:101},{name:"label7",groupDefinition:"stats",anchor_x:0.5,anchor_y:0.5,pos_x:275,pos_y:467,depth:101}],images:[{name:"backgroundImage",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:480,size_x:768,size_y:1024,asset:"Content/Images8x/UI/BG/bg_deck.jpg",alpha:0.5},{name:"leaderFrame",anchor_x:0.5,anchor_y:0.5,pos_x:321,pos_y:264,size_x:246,size_y:306,asset:"Content/Images8x/UI/card_frames/deck_screen04.png",depth:10},{name:"leftFrame",anchor_x:0.5,anchor_y:0.5,pos_x:110,pos_y:322,size_x:212,size_y:250,asset:"Content/Images8x/UI/card_frames/deck_screen07.png",depth:9},{name:"rightFrame",anchor_x:0.5,anchor_y:0.5,pos_x:533,pos_y:351,size_x:212,size_y:250,asset:"Content/Images8x/UI/card_frames/deck_screen07.png",depth:9},{name:"bottomLeftFrame",anchor_x:0.5,anchor_y:0.5,pos_x:109,pos_y:557,size_x:210,size_y:220,asset:"Content/Images8x/UI/card_frames/deck_screen08.png",depth:9},{name:"bottomRightFrame",anchor_x:0.5,anchor_y:0.5,pos_x:532,pos_y:586,size_x:210,size_y:220,asset:"Content/Images8x/UI/card_frames/deck_screen08.png",depth:9},{name:"bottomFrame",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:522,size_x:235,size_y:217,asset:"Content/Images8x/UI/card_frames/deck_screen06.png",depth:11},{name:"bottomAltLeftFrame",anchor_x:0.5,anchor_y:0.5,pos_x:109,pos_y:479,size_x:210,size_y:69,asset:"Content/Images8x/UI/card_frames/deck_screen03.png",depth:9,visible:false},{name:"bottomAltRightFrame",anchor_x:0.5,anchor_y:0.5,pos_x:532,pos_y:508,size_x:210,size_y:69,asset:"Content/Images8x/UI/card_frames/deck_screen03.png",depth:9,visible:false},{name:"bottomAltFrame",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:457,size_x:235,size_y:82,asset:"Content/Images8x/UI/card_frames/deck_screen02.png",depth:11,visible:false},{name:"leaderBadge",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:148,size_x:118,size_y:34,asset:"Content/Images8x/UI/card_frames/badge_leader.png",depth:30},{name:"leftBadge",anchor_x:0.5,anchor_y:0.5,pos_x:105,pos_y:231,size_x:86,size_y:43,asset:"Content/Images8x/UI/card_frames/team_rank_2.png",depth:30},{name:"rightBadge",anchor_x:0.5,anchor_y:0.5,pos_x:528,pos_y:260,size_x:86,size_y:43,asset:"Content/Images8x/UI/card_frames/team_rank_1.png",depth:30},{name:"bottomRight",anchor_x:0.5,anchor_y:0.5,pos_x:193,pos_y:770,size_x:254,size_y:115,asset:"Content/Images8x/UI/card_frames/team_deck_frame.png",flip_x:true,depth:1},{name:"bottomLeft",anchor_x:0.5,anchor_y:0.5,pos_x:447,pos_y:770,size_x:254,size_y:115,asset:"Content/Images8x/UI/card_frames/team_deck_frame.png",depth:1}],tfbuttons:[{name:"recomend",pos_x:72,pos_y:733,anchor_x:0,anchor_y:0,size_x:151,size_y:87,text:"ui_recommend_uc",font_size:22,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,232,124],action:"onRecomend",type:4,sound:["click_high"]},{name:"confirm",pos_x:72,pos_y:733,anchor_x:0,anchor_y:0,size_x:151,size_y:87,enabled:false,visible:false,text:"ui_confirm",font_size:26,fontType:"Content/Fonts/SFElectrotome.ttf",action:"onConfirm",type:4,sound:["click_high"]},{name:"cancel",pos_x:416,pos_y:733,size_x:151,size_y:87,enabled:false,visible:false,text:"ui_cancel",font_size:26,fontType:"Content/Fonts/SFElectrotome.ttf",action:"onCancel",depth:30,sound:["click_low"]},{name:"edit",pos_x:416,pos_y:733,anchor_x:0,anchor_y:0,size_x:151,size_y:87,text:"ui_edit_uc",font_size:26,fontType:"Content/Fonts/SFElectrotome.ttf",action:"onEdit",sound:["click_high"]}],labels:[{name:"deckAttack",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:710,size_x:190,size_y:100,text:"ui_deckpower_uc",font_size:24,fontType:"Content/Fonts/SFElectrotome.ttf",color:[0,213,238],depth:19,horizontalAlign:"middle",verticalAlign:"bottom"},{name:"stat2",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:744,size_x:290,size_y:100,text:"",font_size:22,fontType:"Content/Fonts/SFElectrotome.ttf",color:[240,240,255],depth:19,horizontalAlign:"middle",verticalAlign:"bottom"},{name:"card1Name",anchor_x:0.5,anchor_y:0.5,pos_x:111,pos_y:408,size_x:160,size_y:100,text:"",font_size:22,fontType:"Content/Fonts/SFElectrotome.ttf",color:[240,240,255],depth:111,horizontalAlign:"middle",verticalAlign:"bottom"},{name:"card2Name",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:372,size_x:170,size_y:100,text:"",font_size:22,fontType:"Content/Fonts/SFElectrotome.ttf",color:[240,240,255],depth:111,horizontalAlign:"middle",verticalAlign:"bottom"},{name:"card3Name",anchor_x:0.5,anchor_y:0.5,pos_x:533,pos_y:436,size_x:160,size_y:100,text:"",font_size:22,fontType:"Content/Fonts/SFElectrotome.ttf",color:[240,240,255],depth:111,horizontalAlign:"middle",verticalAlign:"bottom"},{name:"card5Name",anchor_x:0.5,anchor_y:0.5,pos_x:73,pos_y:558,size_x:140,size_y:100,text:"",font_size:14,fontType:"Content/Fonts/SFElectrotome.ttf",color:[240,240,255],depth:111,horizontalAlign:"middle",verticalAlign:"bottom"},{name:"card4Name",anchor_x:0.5,anchor_y:0.5,pos_x:151,pos_y:585,size_x:140,size_y:100,text:"",font_size:14,fontType:"Content/Fonts/SFElectrotome.ttf",color:[240,240,255],depth:111,horizontalAlign:"middle",verticalAlign:"bottom"},{name:"card6Name",anchor_x:0.5,anchor_y:0.5,pos_x:270,pos_y:527,size_x:130,size_y:100,text:"",font_size:14,fontType:"Content/Fonts/SFElectrotome.ttf",color:[240,240,255],depth:111,horizontalAlign:"middle",verticalAlign:"bottom"},{name:"card7Name",anchor_x:0.5,anchor_y:0.5,pos_x:370,pos_y:552,size_x:130,size_y:100,text:"",font_size:14,fontType:"Content/Fonts/SFElectrotome.ttf",color:[240,240,255],depth:111,horizontalAlign:"middle",verticalAlign:"bottom"},{name:"card8Name",anchor_x:0.5,anchor_y:0.5,pos_x:570,pos_y:616,size_x:130,size_y:100,text:"",font_size:14,fontType:"Content/Fonts/SFElectrotome.ttf",color:[240,240,255],depth:111,horizontalAlign:"middle",verticalAlign:"bottom"},{name:"card9Name",anchor_x:0.5,anchor_y:0.5,pos_x:491,pos_y:588,size_x:130,size_y:100,text:"",font_size:14,fontType:"Content/Fonts/SFElectrotome.ttf",color:[240,240,255],depth:111,horizontalAlign:"middle",verticalAlign:"bottom"},{name:"factionText",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:620,size_x:600,size_y:200,text:"ui_teamdeck_autobot",font_size:30,fontType:"Content/Fonts/SFElectrotome.ttf",color:[240,240,255],depth:1,horizontalAlign:"middle",verticalAlign:"bottom",visible:false},{name:"editLabel",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:650,size_x:500,size_y:100,text:"ui_edittouch",font_size:34,fontType:"Content/Fonts/SFElectrotome.ttf",color:[240,240,255],depth:30,horizontalAlign:"middle",verticalAlign:"bottom",visible:false}],groupDefinitions:{mainButtonGroup:{buttons:[{name:"button",anchor_x:0,anchor_y:0,pos_x:0,pos_y:0,size_x:143,size_y:72,text:"",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],font_size:26,asset:"",multiAsset:{onAsset:"Content/Images8x/UI/button/tab_top_off.png",offAsset:"Content/Images8x/UI/button/tab_top_on.png",selectedAsset:"Content/Images8x/UI/button/tab_top_on.png"},action:"onMainDeck",sound:["click_flat"]}],labels:[{name:"buttonLabel",anchor_x:0.5,anchor_y:0.5,pos_x:90,pos_y:35,size_x:100,size_y:80,text:"ui_team_uc",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"middle",verticalAlign:"middle",color:[250,250,250],depth:2}],images:[{name:"icon",anchor_x:0.5,anchor_y:0.5,pos_x:35,pos_y:35,size_x:40,size_y:40,asset:"Content/Images8x/UI/icon/icon_mainteam.png",depth:1,flip_x:true}]},autobotButtonGroup:{buttons:[{name:"button",anchor_x:0,anchor_y:0,pos_x:0,pos_y:0,size_x:143,size_y:72,text:"",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],font_size:26,asset:"",multiAsset:{onAsset:"Content/Images8x/UI/button/tab_top_off.png",offAsset:"Content/Images8x/UI/button/tab_top_on.png",selectedAsset:"Content/Images8x/UI/button/tab_top_on.png"},action:"onAutobotMiniDeck",sound:["click_flat"]}],labels:[{name:"buttonLabel",anchor_x:0.5,anchor_y:0.5,pos_x:90,pos_y:35,size_x:90,size_y:80,text:"ui_squad_uc",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"middle",verticalAlign:"middle",color:[250,250,250],depth:2}],images:[{name:"icon",anchor_x:0.5,anchor_y:0.5,pos_x:35,pos_y:35,size_x:40,size_y:40,asset:"Content/Images8x/UI/icon/icon_0_faction_autobot.png",depth:1,flip_x:true}]},decepticonButtonGroup:{buttons:[{name:"button",anchor_x:0,anchor_y:0,pos_x:0,pos_y:0,size_x:143,size_y:72,text:"",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],font_size:26,asset:"",multiAsset:{onAsset:"Content/Images8x/UI/button/tab_top_off.png",offAsset:"Content/Images8x/UI/button/tab_top_on.png",selectedAsset:"Content/Images8x/UI/button/tab_top_on.png"},action:"onDecepticonMiniDeck",sound:["click_flat"]}],labels:[{name:"buttonLabel",anchor_x:0.5,anchor_y:0.5,pos_x:90,pos_y:35,size_x:90,size_y:80,text:"ui_squad_uc",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"middle",verticalAlign:"middle",color:[250,250,250],depth:2}],images:[{name:"icon",anchor_x:0.5,anchor_y:0.5,pos_x:35,pos_y:35,size_x:40,size_y:40,asset:"Content/Images8x/UI/icon/icon_0_faction_decepticon.png",depth:1,flip_x:true}]},stats:{labels:[{name:"attLabel",anchor_x:0.5,anchor_y:0.5,pos_x:80,pos_y:30,size_x:40,size_y:80,text:"ui_acolon_uc",font_size:18,dropShadowVisible:true,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[250,250,250],depth:101,visible:false},{name:"hpLabel",anchor_x:0.5,anchor_y:0.5,pos_x:80,pos_y:50,size_x:40,size_y:80,text:"ui_hcolon_uc",font_size:18,dropShadowVisible:true,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[250,250,250],depth:101,visible:false},{name:"defLabel",anchor_x:0.5,anchor_y:0.5,pos_x:80,pos_y:70,size_x:40,size_y:80,text:"ui_dcolon_uc",font_size:18,dropShadowVisible:true,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",color:[250,250,250],depth:101,visible:false},{name:"attValue",anchor_x:0.5,anchor_y:0.5,pos_x:103,pos_y:30,size_x:80,size_y:80,text:"ui_squad_uc",font_size:18,dropShadowVisible:true,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"right",verticalAlign:"middle",color:[250,250,250],depth:101,visible:false},{name:"hpValue",anchor_x:0.5,anchor_y:0.5,pos_x:102,pos_y:50,size_x:80,size_y:80,text:"ui_squad_uc",font_size:18,dropShadowVisible:true,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"right",verticalAlign:"middle",color:[250,250,250],depth:101,visible:false},{name:"defValue",anchor_x:0.5,anchor_y:0.5,pos_x:103,pos_y:70,size_x:80,size_y:80,text:"ui_squad_uc",font_size:18,dropShadowVisible:true,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"right",verticalAlign:"middle",color:[250,250,250],depth:101,visible:false}]}}}}};__ngs._8k={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var e=__ngs.r_(__ngs._7p).View;var c=__ngs.r_(__ngs._dw).UnitDetailViewDefinition;var a=__ngs.r_(__ngs._89).CardThumbnailView;b.UnitDetailView=e.subclass({classname:"UnitDetailView",initialize:function($super,g){$super(g,c)},destroy:function($super){$super()},draw:function(g,n,k,o){var l;attackType=this.getAttackType(k);rankType=this.getRankType(o);this.unitdetails.combatRankLabel.setText(Localization.getString(rankType));this.unitdetails.roleBonusNumLabel.setText(Localization.getString(this.getRoleBonus(o)));console.log("Adding card thumbnails");var m=TFCardsManager.getCardDefinition(g.definitionId);this._tfPanel=new a(this,g.definitionId,this._definitions.transformerPanel.info.card_w,this._definitions.transformerPanel.info.card_h,{showSpinner:true});this.transformerPanel.addChild(this._tfPanel);l=Localization.getString(m.name).toUpperCase();if(m.prefix){l=l+" ("+Localization.getString(m.prefix).toUpperCase()+")"}this.transformerPanel.name.setText(l);this.transformerPanel.name.setOverflowMode(GL2.Text.OverflowMode.Multiline);var h=TFCardsManager.getCardDefinition(n.definitionId);this._wpPanel=new a(this,n.definitionId,this._definitions.weaponPanel.info.card_w,this._definitions.weaponPanel.info.card_h,{weapon:true,showSpinner:true});this.weaponPanel.addChild(this._wpPanel);l=Localization.getString(h.name).toUpperCase();if(h.prefix){l=l+" ("+Localization.getString(h.prefix).toUpperCase()+")"}this.weaponPanel.name.setText(l);this.weaponPanel.name.setOverflowMode(GL2.Text.OverflowMode.Multiline)},onCardSelected:function(k){var p=k.info.id;var h=TFUserData.getCard(p);var l={};var o=TFCardsManager.getCardDefinition(h.definitionId);l.definitionId=h.definitionId;l.type=o.type;l.usercard=h;var n;if(o.type==TFGameData.CARD_TYPE.TRANSFORMER){var g=__ngs.r_(__ngs._80).FullScreenCardController;TFSceneDirector._showDialog(new g(l,true))}else{var m=__ngs.r_(__ngs._8a).FullScreenWeaponCardController;n=TFSceneDirector._showDialog(new m(l,true))}},setData:function(h,k){var g=null;for(g in h){this.unitdetails["t"+g+"Label"].setText(""+h[g])}for(g in k){this.unitdetails["w"+g+"Label"].setText(""+Math.floor(k[g]*100)+" %")}},setHpAttack:function(g){this.unitdetails.hpLabel.setText(g.hp);this.unitdetails.attackLabel.setText(g.attack);this.unitdetails.defenseLabel.setText(g.defense);this.unitdetails.hpLabel.setOverflowMode(GL2.Text.OverflowMode.ReduceFontSize);this.unitdetails.attackLabel.setOverflowMode(GL2.Text.OverflowMode.ReduceFontSize);this.unitdetails.defenseLabel.setOverflowMode(GL2.Text.OverflowMode.ReduceFontSize)},setSkillDecals:function(m,l){var g=TFCardsManager.getCardDefinition(l.definitionId);if(m.maxedOut===true){this.unitdetails.skillbuttonImage1.setAlpha(1)}if(m.transforming===true){this.unitdetails.skillbuttonImage2.setAlpha(1)}if(m.active.specific===true){this.unitdetails.skillbuttonImage3.setAlpha(1)}if(g.speciality=="Melee"){TFUtils.changeImageOnSprite(this.unitdetails.skillbuttonImage4,"Content/Images8x/UI/icon/icon_0_atk_melee.png")}else{if(g.speciality=="Ranged"){TFUtils.changeImageOnSprite(this.unitdetails.skillbuttonImage4,"Content/Images8x/UI/icon/icon_0_atk_range.png")}else{TFUtils.changeImageOnSprite(this.unitdetails.skillbuttonImage4,"Content/Images8x/UI/icon/icon_0_atk_special.png")}}if(m.active.speciality===true){this.unitdetails.skillbuttonImage4.setAlpha(1)}if(g.classId==1){TFUtils.changeImageOnSprite(this.unitdetails.skillbuttonImage5,"Content/Images8x/UI/icon/icon_0_assault.png")}else{if(g.classId==2){TFUtils.changeImageOnSprite(this.unitdetails.skillbuttonImage5,"Content/Images8x/UI/icon/icon_0_command.png")}else{if(g.classId==3){TFUtils.changeImageOnSprite(this.unitdetails.skillbuttonImage5,"Content/Images8x/UI/icon/icon_0_infiltration.png")}else{TFUtils.changeImageOnSprite(this.unitdetails.skillbuttonImage5,"Content/Images8x/UI/icon/icon_0_spec_ops.png")}}}if(m.active._class===true){this.unitdetails.skillbuttonImage5.setAlpha(1)}if(m.factionId==TFGameData.FACTION.AUTOBOTS){TFUtils.changeImageOnSprite(this.unitdetails.skillbuttonImage6,"Content/Images8x/UI/icon/icon_0_faction_autobot.png")}else{TFUtils.changeImageOnSprite(this.unitdetails.skillbuttonImage6,"Content/Images8x/UI/icon/icon_0_faction_decepticon.png")}if(m.active.faction===true){this.unitdetails.skillbuttonImage6.setAlpha(1)}var h=7;for(var n in m.abilities){var o=TFGameData.SKILLICON[n];if(h>8){console.log("toomany abilities");break}if(o===undefined){console.log("Could not find icon for ability ",n);this.unitdetails["skillbuttonImage"+h].setVisible(false);continue}this.unitdetails["skillbuttonImage"+h].setVisible(true);TFUtils.changeImageOnSprite(this.unitdetails["skillbuttonImage"+h],o);this.unitdetails["skillbuttonImage"+h].setAlpha(1);h++}},setMaxedOut:function(g){if(g===true){this.unitdetails.skillbuttonImage1.setAlpha(1)}},setLevel:function(g){this.unitdetails.levelnumberLabel.setText(""+g)},getRoleBonus:function(g){if(g===0){return"x3"}else{return"x2"}},getImageString:function(g){return TFUtils.getCardImagePath(g.definitionId)},getRankType:function(g){if(g===0){return Localization.getString("ui_commander_uc")}else{return Localization.getString("ui_soldier_uc")}},getAttackType:function(g){if(g=="status1"){return"MELEE"}else{if(g=="status2"){return"RANGED"}else{return"SPECIAL"}}}})}};__ngs._8l={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var g=__ngs.r_(__ngs._7p).View;var e=__ngs.r_(__ngs._dx).UnitEditViewDefinition;var b=__ngs.r_(__ngs._49).TFDeckManager;var a=__ngs.r_(__ngs._89).CardThumbnailView;c.UnitEditView=g.subclass({classname:"UnitEditView",HIDE:0.3,initialize:function($super,h){$super(h,e);this._controller=h},destroy:function($super){$super()},draw:function(p,n,o,h){var l;console.log("UnitEditView.draw "+p.id+" "+n.id);var k=this.getAttackType(o);var q=this.getRankType(h);this.unitdetails.combatRankLabel.setText(Localization.getString(q));this.unitdetails.roleBonusNumLabel.setText(Localization.getString(this.getRoleBonus(h)));console.log("Adding card thumbnails for transformer="+JSON.stringify(p)+", weapon="+JSON.stringify(n));if(this._tfCardPanel){this.transformerPanel.removeChild(this._tfCardPanel)}var m=this._definitions.transformerPanel.info.card_w;var r=this._definitions.transformerPanel.info.card_h;var u={showSpinner:true};if(b.isInMainDeck(p.id)){u.mainDecal=true}if(b.isInAutobotDeck(p.id)){u.autobotDecal=true}else{if(b.isInDecepticonDeck(p.id)){u.decepticonDecal=true}}var t=TFCardsManager.getCardDefinition(p.definitionId);this._tfCardPanel=new a(this,p.definitionId,m,r,u);this.transformerPanel.addChild(this._tfCardPanel);l=Localization.getString(t.name).toUpperCase();if(t.prefix){l=l+" ("+Localization.getString(t.prefix).toUpperCase()+")"}this.transformerPanel.name.setText(l);this.transformerPanel.name.setOverflowMode(GL2.Text.OverflowMode.Multiline);if(this._wpCardPanel){this.weaponPanel.removeChild(this._wpCardPanel)}m=this._definitions.weaponPanel.info.card_w;r=this._definitions.weaponPanel.info.card_h;u={weapon:true,showSpinner:true};if(b.isInMainDeck(n.id)){u.mainDecal=true}if(b.isInAutobotDeck(n.id)){u.autobotDecal=true}else{if(b.isInDecepticonDeck(n.id)){u.decepticonDecal=true}}var s=TFCardsManager.getCardDefinition(n.definitionId);this._wpCardPanel=new a(this,n.definitionId,m,r,u);this.weaponPanel.addChild(this._wpCardPanel);l=Localization.getString(s.name).toUpperCase();if(s.prefix){l=l+" ("+Localization.getString(s.prefix).toUpperCase()+")"}this.weaponPanel.name.setText(l);this.weaponPanel.name.setOverflowMode(GL2.Text.OverflowMode.Multiline)},onCardSelected:function(h){if(h.info.id==TFGameData.CARD_TYPE.TRANSFORMER){this._controller.setTransformersCardListToSelect()}else{this._controller.setWeaponsCardListToSelect()}},setData:function(k,l){var h=null;for(h in k){this.unitdetails["t"+h+"Label"].setText(""+k[h])}for(h in l){this.unitdetails["w"+h+"Label"].setText(""+Math.floor(l[h]*100)+" %")}},setHpAttack:function(h){this.unitdetails.hpLabel.setText(h.hp);this.unitdetails.attackLabel.setText(h.attack);this.unitdetails.defenseLabel.setText(h.defense);this.unitdetails.hpLabel.setOverflowMode(GL2.Text.OverflowMode.ReduceFontSize);this.unitdetails.attackLabel.setOverflowMode(GL2.Text.OverflowMode.ReduceFontSize);this.unitdetails.defenseLabel.setOverflowMode(GL2.Text.OverflowMode.ReduceFontSize)},setSkillDecals:function(n,m){var h=TFCardsManager.getCardDefinition(m.definitionId);if(m&&TFCardsManager.isMaxedOut(m)){this.unitdetails.skillbuttonImage1.setAlpha(1)}else{this.unitdetails.skillbuttonImage1.setAlpha(this.HIDE)}if(n.transforming===true){this.unitdetails.skillbuttonImage2.setAlpha(1)}else{this.unitdetails.skillbuttonImage2.setAlpha(this.HIDE)}if(n.active.specific===true){this.unitdetails.skillbuttonImage3.setAlpha(1)}else{this.unitdetails.skillbuttonImage3.setAlpha(this.HIDE)}if(h.speciality=="Melee"){TFUtils.changeImageOnSprite(this.unitdetails.skillbuttonImage4,"Content/Images8x/UI/icon/icon_0_atk_melee.png")}else{if(h.speciality=="Ranged"){TFUtils.changeImageOnSprite(this.unitdetails.skillbuttonImage4,"Content/Images8x/UI/icon/icon_0_atk_range.png")}else{TFUtils.changeImageOnSprite(this.unitdetails.skillbuttonImage4,"Content/Images8x/UI/icon/icon_0_atk_special.png")}}if(n.active.speciality===true){this.unitdetails.skillbuttonImage4.setAlpha(1)}else{this.unitdetails.skillbuttonImage4.setAlpha(this.HIDE)}if(h.classId==1){TFUtils.changeImageOnSprite(this.unitdetails.skillbuttonImage5,"Content/Images8x/UI/icon/icon_0_assault.png")}else{if(h.classId==2){TFUtils.changeImageOnSprite(this.unitdetails.skillbuttonImage5,"Content/Images8x/UI/icon/icon_0_command.png")}else{if(h.classId==3){TFUtils.changeImageOnSprite(this.unitdetails.skillbuttonImage5,"Content/Images8x/UI/icon/icon_0_infiltration.png")}else{TFUtils.changeImageOnSprite(this.unitdetails.skillbuttonImage5,"Content/Images8x/UI/icon/icon_0_spec_ops.png")}}}if(n.active._class===true){this.unitdetails.skillbuttonImage5.setAlpha(1)}else{this.unitdetails.skillbuttonImage5.setAlpha(this.HIDE)}if(n.factionId==TFGameData.FACTION.AUTOBOTS){TFUtils.changeImageOnSprite(this.unitdetails.skillbuttonImage6,"Content/Images8x/UI/icon/icon_0_faction_autobot.png")}else{TFUtils.changeImageOnSprite(this.unitdetails.skillbuttonImage6,"Content/Images8x/UI/icon/icon_0_faction_decepticon.png")}if(n.active.faction===true){this.unitdetails.skillbuttonImage6.setAlpha(1)}else{this.unitdetails.skillbuttonImage6.setAlpha(this.HIDE)}TFUtils.changeImageOnSprite(this.unitdetails.skillbuttonImage7,"Content/Images8x/misc/1pxclear.png");TFUtils.changeImageOnSprite(this.unitdetails.skillbuttonImage8,"Content/Images8x/misc/1pxclear.png");var l=7;for(var o in n.abilities){var p=TFGameData.SKILLICON[o];if(l>8){console.log("toomany abilities");break}if(p===undefined){console.log("Could not find icon for ability ",o);this.unitdetails["skillbuttonImage"+l].setVisible(false);continue}this.unitdetails["skillbuttonImage"+l].setVisible(true);TFUtils.changeImageOnSprite(this.unitdetails["skillbuttonImage"+l],p);this.unitdetails["skillbuttonImage"+l].setAlpha(1);l++}},setMaxedOut:function(h){if(h===true){this.unitdetails.skillbuttonImage1.setAlpha(1)}},setLevel:function(h){this.unitdetails.levelnumberLabel.setText(""+h)},getRoleBonus:function(h){if(h===0){return"x3"}else{return"x2"}},getImageString:function(h){return TFUtils.getCardImagePath(h.definitionId)},getRankType:function(h){if(h===0){return Localization.getString("ui_commander_uc")}else{return Localization.getString("ui_soldier_uc")}},getAttackType:function(h){if(h=="status1"){return"MELEE"}else{if(h=="status2"){return"RANGED"}else{return"SPECIAL"}}},paintValues:function(k){var h=null;var l=null;for(h in k.TRANSFORMER){l=k.TRANSFORMER[h];if(l=="U"){this.unitdetails["t"+h+"Label"].setColor(0,1,0)}else{if(l=="L"){this.unitdetails["t"+h+"Label"].setColor(1,0,0)}else{this.unitdetails["t"+h+"Label"].setColor(1,1,1)}}}for(h in k.WEAPON){l=k.WEAPON[h];if(l=="U"){this.unitdetails["w"+h+"Label"].setColor(0,1,0)}else{if(l=="L"){this.unitdetails["w"+h+"Label"].setColor(1,0,0)}else{this.unitdetails["w"+h+"Label"].setColor(1,1,1)}}}for(h in k.HPATTACK){l=k.HPATTACK[h];if(l=="U"){this.unitdetails[h+"Label"].setColor(0,1,0)}else{if(l=="L"){this.unitdetails[h+"Label"].setColor(1,0,0)}else{this.unitdetails[h+"Label"].setColor(1,1,1)}}}}})}};__ngs._8m={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var d=__ngs.r_(__ngs._7p).View;var b=__ngs.r_(__ngs._dy).UnitBonusViewDefinition;a.UnitBonusView=d.subclass({classname:"UnitBonusView",HIDE:0.3,initialize:function($super,e){$super(e,b)},destroy:function($super){$super()},setSkillDecals:function(l,h){var e=TFCardsManager.getCardDefinition(h.definitionId);if(h&&TFCardsManager.isMaxedOut(h)){this["skillbuttonImage1"].setAlpha(1);this.maxLevelDesc.setAlpha(1);this.maxLevel.setAlpha(1)}else{this["skillbuttonImage1"].setAlpha(this.HIDE);this.maxLevelDesc.setAlpha(this.HIDE);this.maxLevel.setAlpha(this.HIDE)}if(l.transforming===true){this["skillbuttonImage2"].setAlpha(1);this.changeFormDesc.setAlpha(1);this.changeForm.setAlpha(1)}else{this["skillbuttonImage2"].setAlpha(this.HIDE);this.changeFormDesc.setAlpha(this.HIDE);this.changeForm.setAlpha(this.HIDE)}if(l.active.specific===true){this["skillbuttonImage3"].setAlpha(1);this.characDesc.setAlpha(1);this.charac.setAlpha(1)}else{this["skillbuttonImage3"].setAlpha(this.HIDE);this.characDesc.setAlpha(this.HIDE);this.charac.setAlpha(this.HIDE)}if(e.speciality=="Melee"){TFUtils.changeImageOnSprite(this["skillbuttonImage4"],"Content/Images8x/UI/icon/icon_0_atk_melee.png")}else{if(e.speciality=="Ranged"){TFUtils.changeImageOnSprite(this["skillbuttonImage4"],"Content/Images8x/UI/icon/icon_0_atk_range.png")}else{TFUtils.changeImageOnSprite(this["skillbuttonImage4"],"Content/Images8x/UI/icon/icon_0_atk_special.png")}}if(l.active.speciality===true){this["skillbuttonImage4"].setAlpha(1);this.specialDesc.setAlpha(1);this.special.setAlpha(1)}else{this["skillbuttonImage4"].setAlpha(this.HIDE);this.specialDesc.setAlpha(this.HIDE);this.special.setAlpha(this.HIDE)}if(e.classId==1){TFUtils.changeImageOnSprite(this["skillbuttonImage5"],"Content/Images8x/UI/icon/icon_0_assault.png")}else{if(e.classId==2){TFUtils.changeImageOnSprite(this["skillbuttonImage5"],"Content/Images8x/UI/icon/icon_0_command.png")}else{if(e.classId==3){TFUtils.changeImageOnSprite(this["skillbuttonImage5"],"Content/Images8x/UI/icon/icon_0_infiltration.png")}else{TFUtils.changeImageOnSprite(this["skillbuttonImage5"],"Content/Images8x/UI/icon/icon_0_spec_ops.png")}}}if(l.active._class===true){this["skillbuttonImage5"].setAlpha(1);this.classBDesc.setAlpha(1);this.classB.setAlpha(1)}else{this["skillbuttonImage5"].setAlpha(this.HIDE);this.classBDesc.setAlpha(this.HIDE);this.classB.setAlpha(this.HIDE)}if(l.factionId==TFGameData.FACTION.AUTOBOTS){TFUtils.changeImageOnSprite(this["skillbuttonImage6"],"Content/Images8x/UI/icon/icon_0_faction_autobot.png")}else{TFUtils.changeImageOnSprite(this["skillbuttonImage6"],"Content/Images8x/UI/icon/icon_0_faction_decepticon.png")}if(l.active.faction===true){this["skillbuttonImage6"].setAlpha(1);this.factionDesc.setAlpha(1);this.faction.setAlpha(1)}else{this["skillbuttonImage6"].setAlpha(this.HIDE);this.factionDesc.setAlpha(this.HIDE);this.faction.setAlpha(this.HIDE)}TFUtils.changeImageOnSprite(this["skillbuttonImage7"],"Content/Images8x/misc/1pxclear.png");TFUtils.changeImageOnSprite(this["skillbuttonImage8"],"Content/Images8x/misc/1pxclear.png");var g=7;for(var m in l.abilities){var n=TFGameData.SKILLICON[m];if(g>8){console.log("toomany abilities");break}if(n===undefined){console.log("Could not find icon for ability ",m);this["skillbuttonImage"+g].setVisible(false);continue}this["skillbuttonImage"+g].setVisible(true);TFUtils.changeImageOnSprite(this["skillbuttonImage"+g],n);this["skillbuttonImage"+g].setAlpha(1);g++}}})}};__ngs._8n={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var d=__ngs.r_(__ngs._7p).View;var b=__ngs.r_(__ngs._dz).MissionExploreViewDefinition;a.MissionExploreView=d.subclass({classname:"MissionExploreView",initialize:function($super,e){$super(e,b)},destroy:function($super){$super()}})}};__ngs._8o={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var d=__ngs.r_(__ngs._7l).DialogController;var c=__ngs.r_(__ngs._e0).LevelUpView;a.LevelUpController=d.subclass({classname:"LevelUpController",initialize:function($super,k,h){$super(c,h);this._otherData=k;this._callback=null;this._mc=null;if(h){this.getView().showShade()}if(this._otherData&&this._otherData.destroyCB){this._callback=this._otherData.destroyCB}console.log("DialogViewController > createView > LevelUpDialogView : "+JSON.stringify(this._otherData));this.getView().setPosition(-TFSceneDirector.getWorkingArea().width/(2*TFSceneDirector.getWorkingArea().scaleX),-TFSceneDirector.getWorkingArea().height/(2*TFSceneDirector.getWorkingArea().scaleY));this.getView().oldLevelLabel.oldLevelLabel2.setText(TFUserData.getLevel()-1);this.getView().newLevelLabel.newLevelLabel2.setText(TFUserData.getLevel());var e=__ngs.r_(__ngs._e1);var m=JSON.parse(JSON.stringify(e));for(var g in m.motions){if(m.motions[g].source){TFUtils.removeJsonOffsets(m.motions[g].source)}}var l=new GL2.MotionData();l.initFromData(m,GL2.MotionData.DataFormat.FlashClassicTween,function(n,o){if(n){console.log("levelup animation error :"+JSON.stringify(n))}else{console.log("DialogViewController > level up animation before check");if(this.getView()&&this.getView().flare5&&this.getView().flare4&&this.getView().flare3&&this.getView().flare2&&this.getView().flare1&&this.getView().newLevelLabel&&this.getView().oldLevelLabel&&this.getView().levelUpLabel&&this.getView().barHead&&this.getView().bar&&this.getView().frame&&this.getView().overlay&&this.getView().glow1&&this.getView().glow2&&this.getView().glow3&&this.getView().glow4){var p=new GL2.MotionController(o);syncFlags=GL2.MotionController.SyncFlags.All;p.bind("D2",this.getView().flare5,syncFlags);p.bind("D",this.getView().flare4,syncFlags);p.bind("C",this.getView().flare3,syncFlags);p.bind("B",this.getView().flare2,syncFlags);p.bind("A",this.getView().flare1,syncFlags);p.bind("17",this.getView().newLevelLabel,syncFlags);p.bind("16",this.getView().oldLevelLabel,syncFlags);p.bind("LEVEL",this.getView().levelUpLabel,syncFlags);p.bind("Bar head",this.getView().barHead,syncFlags);p.bind("Bar",this.getView().bar,syncFlags);p.bind("Frame",this.getView().frame,syncFlags);p.bind("Overlay",this.getView().overlay,syncFlags);p.bind("glow1",this.getView().glow1,syncFlags);p.bind("glow2",this.getView().glow2,syncFlags);p.bind("glow3",this.getView().glow3,syncFlags);p.bind("glow4",this.getView().glow4,syncFlags);this._mc=p;p.play(GL2.MotionController.PlayMode.Normal)}}}.bind(this))},dismissDialog:function($super){if(this._mc){this._mc.stop();this._mc.destroy();this._mc=null}$super();if(this._callback){this._callback()}}})}};__ngs._8p={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._7l).DialogController;var d=__ngs.r_(__ngs._e2).MissionCompleteView;a.MissionCompleteController=c.subclass({classname:"MissionCompleteController",initialize:function($super,k,h){$super(d,h);this._otherData=k;this._callback=null;this._mc=null;if(h){this.getView().showShade()}if(this._otherData&&this._otherData.destroyCB){this._callback=this._otherData.destroyCB}this.getView().setPosition(-TFSceneDirector.getWorkingArea().width/(2*TFSceneDirector.getWorkingArea().scaleX),-TFSceneDirector.getWorkingArea().height/(2*TFSceneDirector.getWorkingArea().scaleY));var e=__ngs.r_(__ngs._e3);var m=JSON.parse(JSON.stringify(e));for(var g in m.motions){if(m.motions[g].source){TFUtils.removeJsonOffsets(m.motions[g].source)}}var l=new GL2.MotionData();l.initFromData(m,GL2.MotionData.DataFormat.FlashClassicTween,function(n,o){if(n){console.log("missioncomplete animation error :"+JSON.stringify(n))}else{if(this.getView()){var p=new GL2.MotionController(o);syncFlags=GL2.MotionController.SyncFlags.All;p.bind("D2",this.getView().flare5,syncFlags);p.bind("D",this.getView().flare4,syncFlags);p.bind("C",this.getView().flare3,syncFlags);p.bind("B",this.getView().flare2,syncFlags);p.bind("A",this.getView().flare1,syncFlags);p.bind("COMPLETE",this.getView().missionCompleteLabelBottom,syncFlags);p.bind("MISSION",this.getView().missionCompleteLabelTop,syncFlags);p.bind("Bar head",this.getView().barHead,syncFlags);p.bind("Bar",this.getView().bar,syncFlags);p.bind("Frame",this.getView().frame,syncFlags);p.bind("glow1",this.getView().glow1,syncFlags);p.bind("glow2",this.getView().glow2,syncFlags);p.bind("glow3",this.getView().glow3,syncFlags);p.bind("glow4",this.getView().glow4,syncFlags);this._mc=p;p.play(GL2.MotionController.PlayMode.Normal)}}}.bind(this))},dismissDialog:function($super){if(this._mc){this._mc.stop();this._mc.destroy();this._mc=null}$super();if(this._callback){this._callback()}}})}};__ngs._8q={_c:null,_d:function(){var e={exports:{}};var c=e.exports;this._c=e;var b=__ngs.r_(__ngs._n).ViewController;var h=__ngs.r_(__ngs._e4).LuckyChanceView;var d=__ngs.r_(__ngs._45).AnimationQueue;var g=__ngs.r_(__ngs._s).TFUtils;var a=__ngs.r_(__ngs._89).CardThumbnailView;c.LuckyChanceViewController=b.subclass({classname:"LuckyChanceViewController",initialize:function($super,k,l){$super();this.createView(h);this._missionId=k;this._reward=l;var p=TFGameData.getLuckyChanceWithId(l.value);var r,o;this._cardPanels=[];for(var n=0;n<5;n++){var s="card"+(n+1);r=this.getView()._definitions[s].info.card_w;o=this.getView()._definitions[s].info.card_h;panel=new a(this,p.cards[n].id,r,o,{anchor:[0.5,0.5],showSpinner:true});this._cardPanels.push(panel);this.getView().addChild(panel);panel.cardImage.setIgnore(true);panel.setPosition(this.getView()._definitions[s].pos_x,this.getView()._definitions[s].pos_y)}Server.getLuckyChance(this._missionId,l.value,this._luckyChanceCB.bind(this));this.getView().shuffleButton.setVisible(true);var m={displayed:false,animated:true,timeout:1000};var q={displayed:false,animated:true,timeout:1000};this.setHudDisplayData(m,q)},shuffle:function(){var m=TFGameData.getLuckyChanceWithId(this._reward.value);var l=this.createAnimationQueue();this.getView().shuffleButton.setVisible(false);var k="Content/Images8x/UI/universal/card_thumb.png";l.pushAnimation(500,d.Curve.Linear);l.tween(d.Interpolate.point(new Core.Point(0,0),new Core.Point(0,0)),function(n){}.bind(this));l.pushAnimation(100,d.Curve.Linear);l.tween(d.Interpolate.point(new Core.Point(1,1),new Core.Point(0,1)),function(n){this._cardPanels[0].setScale(n.getX(),n.getY());this._cardPanels[1].setScale(n.getX(),n.getY());this._cardPanels[2].setScale(n.getX(),n.getY());this._cardPanels[3].setScale(n.getX(),n.getY());this._cardPanels[4].setScale(n.getX(),n.getY())}.bind(this));l.pushCallback(function(){this._cardPanels[0].updateWithCard(m.cards[0].id,{showBack:true,allowBackTap:true,showSpinner:true});this._cardPanels[1].updateWithCard(m.cards[1].id,{showBack:true,allowBackTap:true,showSpinner:true});this._cardPanels[2].updateWithCard(m.cards[2].id,{showBack:true,allowBackTap:true,showSpinner:true});this._cardPanels[3].updateWithCard(m.cards[3].id,{showBack:true,allowBackTap:true,showSpinner:true});this._cardPanels[4].updateWithCard(m.cards[4].id,{showBack:true,allowBackTap:true,showSpinner:true})}.bind(this));l.pushAnimation(100,d.Curve.Linear);l.tween(d.Interpolate.point(new Core.Point(0,1),new Core.Point(1,1)),function(n){this._cardPanels[0].setScale(n.getX(),n.getY());this._cardPanels[1].setScale(n.getX(),n.getY());this._cardPanels[2].setScale(n.getX(),n.getY());this._cardPanels[3].setScale(n.getX(),n.getY());this._cardPanels[4].setScale(n.getX(),n.getY())}.bind(this));l.pushAnimation(100,d.Curve.Linear);l.tween(d.Interpolate.point(this.getView().card1.getPosition(),new Core.Point(320,480)),function(n){this._cardPanels[0].setPosition(n.getX(),n.getY())}.bind(this));l.pushAnimation(100,d.Curve.Linear);l.tween(d.Interpolate.point(this.getView().card2.getPosition(),new Core.Point(320,480)),function(n){this._cardPanels[1].setPosition(n.getX(),n.getY())}.bind(this));l.pushAnimation(100,d.Curve.Linear);l.tween(d.Interpolate.point(this.getView().card3.getPosition(),new Core.Point(320,480)),function(n){this._cardPanels[2].setPosition(n.getX(),n.getY())}.bind(this));l.pushAnimation(100,d.Curve.Linear);l.tween(d.Interpolate.point(this.getView().card4.getPosition(),new Core.Point(320,480)),function(n){this._cardPanels[3].setPosition(n.getX(),n.getY())}.bind(this));l.pushAnimation(100,d.Curve.Linear);l.tween(d.Interpolate.point(this.getView().card5.getPosition(),new Core.Point(320,480)),function(n){this._cardPanels[4].setPosition(n.getX(),n.getY())}.bind(this));l.pushAnimation(100,d.Curve.Linear);l.tween(d.Interpolate.point(new Core.Point(320,480),this.getView().card1.getPosition()),function(n){this._cardPanels[0].setPosition(n.getX(),n.getY())}.bind(this));l.pushAnimation(100,d.Curve.Linear);l.tween(d.Interpolate.point(new Core.Point(320,480),this.getView().card2.getPosition()),function(n){this._cardPanels[1].setPosition(n.getX(),n.getY())}.bind(this));l.pushAnimation(100,d.Curve.Linear);l.tween(d.Interpolate.point(new Core.Point(320,480),this.getView().card3.getPosition()),function(n){this._cardPanels[2].setPosition(n.getX(),n.getY())}.bind(this));l.pushAnimation(100,d.Curve.Linear);l.tween(d.Interpolate.point(new Core.Point(320,480),this.getView().card4.getPosition()),function(n){this._cardPanels[3].setPosition(n.getX(),n.getY())}.bind(this));l.pushAnimation(100,d.Curve.Linear);l.tween(d.Interpolate.point(new Core.Point(320,480),this.getView().card5.getPosition()),function(n){this._cardPanels[4].setPosition(n.getX(),n.getY())}.bind(this));l.pushCallback(function(){console.log("Reenabling card buttons***********");this._animationFinished=true;for(var n=0;n<5;n++){this._cardPanels[n].cardImage.setIgnore(false)}}.bind(this));l.start()},_luckyChanceCB:function(l,k){if(l){g.showErrorMessages(k);console.log("_luckyChanceCB error: "+JSON.stringify(l));TFSceneDirector.showDoItMission(this._missionId);return}this._receivedLuckyReward=true;this._response=k;if(this._response.cards){TFUserData.cards=this._response.cards}if(this._response.cardsLimbo){TFUserData.cardsLimbo=this._response.cardsLimbo}},onCardBackSelected:function(m){if(!this._receivedLuckyReward){return}if(!this._animationFinished){return}if(!this._response){return}if(this._cardPressed){return}this._cardPressed=true;var l=TFUserData.getCardsEarnedForMission(this._missionId);if(l.indexOf(this._response.card.definitionId)==-1){l.push(this._response.card.definitionId);console.log("LuckyChanceViewController > onCardBackSelected added card to missionState",this._response.card.definitionId,"length:",l.length)}else{console.log("LuckyChanceViewController > onCardBackSelected card already found",this._response.card.definitionId,"length:",l.length)}TFUserData.setLastReward({type:TFGameData.REWARD_TYPE.CARD,value:this._response.card});TFSceneDirector.getTopHudViewController().update();var n;if(this._response.card.inLimbo){n=TFUserData.getLimboCard(this._response.card.id)}else{n=TFUserData.getCard(this._response.card.id)}var o=function(){if(!TFUserData.getLevelUp()&&!TFUserData.missionCompleted&&TFUserData.isCardTransScannable(this._response.card)){var q={};q.title=Localization.getString("ui_transscan_uc");q.fusionCost=Localization.getString("ui_transcanavailable");q.cancelButtonText=Localization.getString("ui_cancel");q.okButtonText=Localization.getString("ui_transscan");q.cb=TFSceneDirector.showTransform.bind(TFSceneDirector);q.cbDismiss=TFSceneDirector.showDoItMission.bind(TFSceneDirector,this._missionId);var p=__ngs.r_(__ngs._3y).PopUpController;TFSceneDirector._showDialog(new p(q))}else{TFSceneDirector.showDoItMission(this._missionId)}}.bind(this);var k=__ngs.r_(__ngs._80).FullScreenCardController;TFSceneDirector._showDialog(new k({usercard:n,destroyCB:o,showBanner:true},true))},destroy:function($super){$super()}})}};__ngs._8r={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._7l).DialogController;var a=__ngs.r_(__ngs._e5).EventBossPopUpView;b.EventBossPopUpController=d.subclass({classname:"EventBossPopUpController",initialize:function($super,e){this._otherData={};if(e){this._otherData=e}this._callback=null;if(e&&e.cb){this._callback=e.cb}this._dismissCallback=null;if(e&&e.cbDismiss){this._dismissCallback=e.cbDismiss}this._destroyCB=this._otherData.destroyCB;$super(a)},onOk:function(){this._callback();this.dismissDialog()},dismissDialog:function($super){$super();if(this._destroyCB){this._destroyCB()}},onDismiss:function(){if(this._dismissCallback){this._dismissCallback()}this.dismissDialog()}})}};__ngs._8s={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._e6).Bank;a.PaymentController=Core.Class.subclass({classname:"PaymentController",onClose:null,onProcess:null,onError:null,initialize:function(d,g,e){this.transactionId="";if(d){this.onClose=d}else{this.onClose=this._onCloseStub.bind(this)}if(g){this.onProcess=g}else{this.onProcess=this._onProcessStub.bind(this)}if(e){this.onError=e}else{this.onError=this._onErrorStub.bind(this)}},_onCloseStub:function(){},_onProcessStub:function(){},_onErrorStub:function(){},createSimpleTransaction:function(e,d){this.createTransaction([{item:{id:e},quantity:"1"}],d)},createTransaction:function(d,g){var e=function(h,k){console.log(" Bank.Debit.onCreateResponse ***********");if(h||!k){console.log("PaymentController.createTransaction.onResponse: Error creating transaction. Error: "+JSON.stringify(h));this.onError(h,k)}else{var l=function(m,n){console.log(" Bank.Debit.onOpenResponse ***********");if(m||!n){console.log("PaymentController.createTransaction.onOpenResponse: Error opening transaction. Error: "+m);c.Debit.cancelTransaction(this.transactionId,this.onError)}else{if(this.onProcess){this.onProcess(n)}else{console.log("PaymentController.createTransaction.onOpenResponse: No processing callback found.")}}};this.transactionId=k.id;console.log(" Bank.Debit.openTransaction");c.Debit.openTransaction(this.transactionId,l.bind(this))}};console.log(" Bank.Debit.createTransaction");c.Debit.createTransaction(d,g,e.bind(this))},closeTransaction:function(e){var d=function(g,h){if(!g){if(h){console.log("PaymentController.closeTransaction.onResponse: Transaction successful, call to server ");this.onClose(h)}else{this.onError(null,h)}}else{console.log("PaymentController.closeTransaction.onResponse: Error closing transaction. Error: "+g);c.Debit.cancelTransaction(this.transactionId,this.onError)}};if(e){c.Debit.closeTransaction(e.id,d.bind(this))}else{console.log("PaymentController.closeTransaction: No transaction transaction.")}},$cancelPendingTransactions:function(){console.log("PaymentController.closePendingTransactions.");var d=function(g,e){var k=function(l,m){console.log("Canceled transaction")};for(var h in e){console.log("Canceling transaction");c.Debit.cancelTransaction(e[h],k.bind(this))}};c.Debit.getPendingTransactions(d.bind(this))}})}};__ngs._8t={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var e=__ngs.r_(__ngs._7p).View;var d=__ngs.r_(__ngs._61).TFEventManager;var a=__ngs.r_(__ngs._e7).BottomHudStoresInventoryViewDefinition;b.BottomHudStoresInventoryView=e.subclass({classname:"BottomHudStoresInventoryView",initialize:function($super,g){$super(g,a);this.storeButton.setSelectOnTouch(true);this.spaceBridgeButton.setSelectOnTouch(true);this.inventoryButton.setSelectOnTouch(true)},destroy:function($super){$super()},setPressedButton:function(h,g){if((h=="StoreItemViewController")&&(g=="Item")){this["storeButton"].setEnabled(false);this["storeButton"].setTouchable(false);this["tabSelectedStore"].setVisible(true)}else{this["storeButton"].setEnabled(true);this["storeButton"].setTouchable(true);this["tabSelectedStore"].setVisible(false)}if((h=="StoreViewController")&&(g=="Gasha")){this["spaceBridgeButton"].setEnabled(false);this["spaceBridgeButton"].setTouchable(false);this["tabSelectedSpaceBridge"].setVisible(true)}else{this["spaceBridgeButton"].setEnabled(true);this["spaceBridgeButton"].setTouchable(true);this["tabSelectedSpaceBridge"].setVisible(false)}if(h=="InventoryViewController"){this["inventoryButton"].setEnabled(false);this["inventoryButton"].setTouchable(false);this["tabSelectedInventory"].setVisible(true)}else{this["inventoryButton"].setEnabled(true);this["inventoryButton"].setTouchable(true);this["tabSelectedInventory"].setVisible(false)}if((h=="RBStoreViewController")&&(g=="Gasha")){this["eventSpaceBridgeButton"].setTouchable(false);this["tabSelectedEventSpaceBridge"].setVisible(true)}else{this["eventSpaceBridgeButton"].setTouchable(true);this["tabSelectedEventSpaceBridge"].setVisible(false)}this["storeButton"].stateChanged();this["spaceBridgeButton"].stateChanged();this["inventoryButton"].stateChanged();this["eventSpaceBridgeButton"].stateChanged()},setButtonEnabled:function(m,k,h){if(this[m]){console.log("JY: setting button "+m+" enabled: "+k);this[m].setEnabled(k);if(h){}if(m=="eventSpaceBridgeButton"){var n=this["eventSpaceBridgeIcon"];var g=this["eventSpaceBridge"];var l=new Core.Size(58,58);if(k&&d.eventVisible()){n.setImage("Content/Images8x/UI/icon/icon_0_event_space_bridge.png",l,[0.5,1],[0,0,1,1]);g.setColor(170/255,224/255,255/255)}else{this[m].setEnabled(false);n.setImage("Content/Images8x/UI/icon/icon_0_event_space_bridge_disabled.png",l,[0.5,1],[0,0,1,1]);g.setColor(0.68,0.68,0.68)}}}}})}};__ngs._8u={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.StoreGashaViewDefinition={staticBackgroundImages:{images:[{name:"backgroundImage",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:480,size_x:768,size_y:1024,asset:"Content/Images8x/UI/BG/bg_spacebridge.jpg",depth:-10}]},labels:[],buttons:[],groupDefinitions:{item0:{images:[{name:"bgImage",pos_x:0,pos_y:0,size_x:630,size_y:350,asset:"Content/Images8x/UI/14_store/cell_spacebridge_premium.png",depth:-1},{name:"premiumGashaButtonImage",pos_x:557,pos_y:286,size_x:20,size_y:35,asset:"Content/Images8x/misc/1pxclear.png",depth:2,visible:false},{name:"mobacoinIcon",pos_x:105,pos_y:292,size_x:50,size_y:50,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/icon/icon_currency_cybercash.png",depth:2},{name:"mobacoinIcon2",pos_x:260,pos_y:292,size_x:50,size_y:50,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/icon/icon_currency_cybercash.png",depth:2,visible:false},{name:"getMoreMobacionIcon",pos_x:580,pos_y:305,size_x:50,size_y:50,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/icon/icon_currency_cybercash.png",depth:2},{name:"newPricePointer",pos_x:150,pos_y:292,size_x:15,size_y:25,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/14_store/icon_new_price_pointer.png",depth:2,visible:false},{name:"priceSlash",pos_x:80,pos_y:292,size_x:105,size_y:30,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/14_store/icon_price_slash.png",depth:5,visible:false}],labels:[{name:"nameText",pos_x:23,pos_y:40,size_x:280,size_y:150,anchor_x:0,anchor_y:0,font_size:48,horizontalAlign:"left",verticalAlign:"top",depth:1,dropShadowVisible:true,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:""},{name:"descText",pos_x:23,pos_y:152,size_x:250,size_y:100,anchor_x:0,anchor_y:0,font_size:21,depth:1,horizontalAlign:"left",fontType:"Content/Fonts/text.otf",color:[250,250,25],text:""},{name:"priceText",pos_x:30,pos_y:272,size_x:100,size_y:40,anchor_x:0,anchor_y:0,font_size:32,horizontalAlign:"left",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:""},{name:"newPriceText",pos_x:180,pos_y:272,size_x:100,size_y:40,anchor_x:0,anchor_y:0,font_size:32,horizontalAlign:"left",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:""},{name:"staticGetMoreText",pos_x:403,pos_y:266,size_x:220,size_y:75,anchor_x:0,anchor_y:0,font_size:40,horizontalAlign:"left",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:"ui_getmore_uc"}],tfbuttons:[{name:"altButton",anchor_x:0,anchor_y:0,pos_x:393,pos_y:266,size_x:220,size_y:75,text:"",type:5,font_size:40,color:[236,243,255],fontType:"Content/Fonts/SFElectrotome.ttf",visible:true,enabled:true,action:"onGetMoreMobacoinButton",sound:["click_high"]},{name:"buyButton",anchor_x:1,anchor_y:0,pos_x:620,pos_y:268,size_x:140,size_y:75,text:"ui_open_uc",type:5,font_size:36,color:[236,243,255],fontType:"Content/Fonts/SFElectrotome.ttf",visible:false,enabled:false,action:"onGashaAction",sound:["click_high"],info:{}}]},item1:{images:[{name:"bgImage",pos_x:0,pos_y:0,size_x:630,size_y:230,asset:"Content/Images8x/UI/14_store/cell_spacebridge_battle.png",depth:0},{name:"battleGashaButtonImage",pos_x:557,pos_y:162,size_x:20,size_y:35,asset:"Content/Images8x/misc/1pxclear.png",depth:2,visible:false},{name:"battlePointIcon",pos_x:170,pos_y:148,size_x:36,size_y:36,anchor_x:0,anchor_y:0,asset:"Content/Images8x/UI/icon/icon_currency_bp.png"}],labels:[{name:"nameText",pos_x:23,pos_y:35,size_x:300,size_y:100,anchor_x:0,anchor_y:0,depth:1,font_size:28,text:"",dropShadowVisible:true,horizontalAlign:"left",verticalAlign:"top",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255]},{name:"descText",pos_x:23,pos_y:60,size_x:300,size_y:100,anchor_x:0,anchor_y:0,font_size:21,depth:1,horizontalAlign:"left",fontType:"Content/Fonts/text.otf",color:[20,220,250],dropShadowVisible:true,text:""},{name:"currencyText",pos_x:100,pos_y:157,size_x:80,size_y:40,anchor_x:1,anchor_y:0.5,font_size:28,horizontalAlign:"right",verticalAlign:"bottom",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:""},{name:"priceText",pos_x:105,pos_y:157,size_x:200,size_y:40,anchor_x:0,anchor_y:0.5,font_size:28,horizontalAlign:"left",verticalAlign:"bottom",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:""}],tfbuttons:[{name:"buyButton",anchor_x:1,anchor_y:0,pos_x:620,pos_y:143,size_x:140,size_y:75,text:"ui_open_uc",type:5,font_size:36,color:[236,243,255],fontType:"Content/Fonts/SFElectrotome.ttf",visible:false,enabled:false,action:"onGashaAction",sound:["click_high"],info:{}},{name:"altButton",anchor_x:1,anchor_y:0,pos_x:620,pos_y:143,size_x:220,size_y:75,text:"ui_tobattle_uc",type:5,font_size:36,color:[236,243,255],fontType:"Content/Fonts/SFElectrotome.ttf",visible:true,enabled:true,action:"onGoToBattleButton",sound:["click_high"]}]},item2:{images:[{name:"bgImage",pos_x:0,pos_y:0,size_x:630,size_y:230,asset:"Content/Images8x/UI/14_store/cell_spacebridge_free.png",depth:0},{name:"freeGashaButtonImage",pos_x:557,pos_y:162,size_x:20,size_y:35,asset:"Content/Images8x/misc/1pxclear.png",depth:2,visible:false},{name:"friendPointsIcon",pos_x:140,pos_y:148,size_x:36,size_y:36,anchor_x:0,anchor_y:0,asset:"Content/Images8x/UI/icon/icon_currency_ap.png",visible:false}],labels:[{name:"nameText",pos_x:23,pos_y:35,size_x:250,size_y:100,anchor_x:0,anchor_y:0,font_size:28,dropShadowVisible:true,depth:1,text:"",horizontalAlign:"left",verticalAlign:"top",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255]},{name:"descText",pos_x:23,pos_y:60,size_x:300,size_y:100,anchor_x:0,anchor_y:0,font_size:21,depth:1,horizontalAlign:"left",fontType:"Content/Fonts/text.otf",color:[20,220,250],dropShadowVisible:true,text:""},{name:"currencyText",pos_x:78,pos_y:158,size_x:0,size_y:40,anchor_x:1,anchor_y:0.5,font_size:28,horizontalAlign:"right",verticalAlign:"bottom",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:""},{name:"priceText",pos_x:80,pos_y:158,size_x:200,size_y:40,anchor_x:0,anchor_y:0.5,font_size:28,horizontalAlign:"left",verticalAlign:"bottom",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:"ui_available"}],tfbuttons:[{name:"altButton",anchor_x:0,anchor_y:0,pos_x:375,pos_y:143,size_x:240,size_y:75,text:"ui_cheerfriends_uc",type:5,font_size:35,color:[236,243,255],fontType:"Content/Fonts/SFElectrotome.ttf",visible:true,enabled:true,action:"onCheerButton",sound:["click_high"]},{name:"buyButton",anchor_x:1,anchor_y:0,pos_x:620,pos_y:143,size_x:140,size_y:75,text:"ui_open_uc",type:5,font_size:36,color:[236,243,255],fontType:"Content/Fonts/SFElectrotome.ttf",visible:false,enabled:false,action:"onGashaAction",sound:["click_high"],info:{}}]},item3:{images:[{name:"bgImage",pos_x:0,pos_y:0,size_x:630,size_y:230,asset:"Content/Images8x/UI/14_store/cell_spacebridge_bronze_transformers.png",depth:0},{name:"freeGashaButtonImage",pos_x:557,pos_y:162,size_x:20,size_y:35,asset:"Content/Images8x/misc/1pxclear.png",depth:2,visible:false}],labels:[{name:"nameText",pos_x:23,pos_y:35,size_x:250,size_y:100,anchor_x:0,anchor_y:0,font_size:28,dropShadowVisible:true,depth:1,text:"",horizontalAlign:"left",verticalAlign:"top",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255]},{name:"descText",pos_x:23,pos_y:60,size_x:300,size_y:100,anchor_x:0,anchor_y:0,font_size:21,depth:1,horizontalAlign:"left",fontType:"Content/Fonts/text.otf",color:[240,240,250],dropShadowVisible:true,text:""},{name:"currencyText",pos_x:75,pos_y:165,size_x:70,size_y:40,anchor_x:1,anchor_y:0.5,font_size:32,horizontalAlign:"right",verticalAlign:"bottom",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:""},{name:"priceText",pos_x:85,pos_y:165,size_x:200,size_y:40,anchor_x:0,anchor_y:0.5,font_size:23,horizontalAlign:"left",verticalAlign:"bottom",fontType:"Content/Fonts/text.otf",color:[255,255,255],text:"ui_available"}],tfbuttons:[{name:"buyButton",anchor_x:1,anchor_y:0,pos_x:620,pos_y:143,size_x:140,size_y:75,text:"ui_open_uc",type:5,font_size:36,color:[236,243,255],fontType:"Content/Fonts/SFElectrotome.ttf",visible:false,enabled:false,action:"onGashaAction",sound:["click_high"],info:{}},{name:"altButton",anchor_x:1,anchor_y:0,pos_x:620,pos_y:143,size_x:140,size_y:75,text:"ui_explore_uc",type:5,font_size:30,color:[236,243,255],fontType:"Content/Fonts/SFElectrotome.ttf",visible:true,enabled:true,action:"onExploreButton",sound:["click_high"],}]},item4:{images:[{name:"bgImage",pos_x:0,pos_y:0,size_x:630,size_y:230,asset:"Content/Images8x/UI/14_store/cell_spacebridge_bronze_weapons.png",depth:0},{name:"freeGashaButtonImage",pos_x:557,pos_y:162,size_x:20,size_y:35,asset:"Content/Images8x/misc/1pxclear.png",depth:2,visible:false}],labels:[{name:"nameText",pos_x:23,pos_y:35,size_x:250,size_y:100,anchor_x:0,anchor_y:0,font_size:28,dropShadowVisible:true,depth:1,text:"",horizontalAlign:"left",verticalAlign:"top",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255]},{name:"descText",pos_x:23,pos_y:60,size_x:300,size_y:100,anchor_x:0,anchor_y:0,font_size:21,depth:1,horizontalAlign:"left",fontType:"Content/Fonts/text.otf",color:[240,240,250],dropShadowVisible:true,text:""},{name:"currencyText",pos_x:75,pos_y:165,size_x:70,size_y:40,anchor_x:1,anchor_y:0.5,font_size:32,horizontalAlign:"right",verticalAlign:"bottom",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:""},{name:"priceText",pos_x:85,pos_y:165,size_x:200,size_y:40,anchor_x:0,anchor_y:0.5,font_size:23,horizontalAlign:"left",verticalAlign:"bottom",fontType:"Content/Fonts/text.otf",color:[255,255,255],text:"ui_available"}],tfbuttons:[{name:"buyButton",anchor_x:1,anchor_y:0,pos_x:620,pos_y:143,size_x:140,size_y:75,text:"ui_open_uc",type:5,font_size:36,color:[236,243,255],fontType:"Content/Fonts/SFElectrotome.ttf",visible:false,enabled:false,action:"onGashaAction",sound:["click_high"],info:{}},{name:"altButton",anchor_x:1,anchor_y:0,pos_x:620,pos_y:143,size_x:140,size_y:75,text:"ui_explore_uc",type:5,font_size:30,color:[236,243,255],fontType:"Content/Fonts/SFElectrotome.ttf",visible:true,enabled:true,action:"onExploreButton",sound:["click_high"]}]}},groups:[{name:"item0",groupDefinition:"item0",pos_x:5,pos_y:160,size_x:630,size_y:350},{name:"item1",groupDefinition:"item1",pos_x:5,pos_y:490,size_x:630,size_y:230},{name:"item2",groupDefinition:"item2",pos_x:5,pos_y:700,size_x:630,size_y:230},{name:"item3",groupDefinition:"item3",pos_x:5,pos_y:910,size_x:630,size_y:230},{name:"item4",groupDefinition:"item4",pos_x:5,pos_y:1120,size_x:630,size_y:230}]}}};__ngs._8v={_c:null,_d:function(){var e={exports:{}};var b=e.exports;this._c=e;var k=__ngs.r_(__ngs._5).Core;var d=__ngs.r_(__ngs._f).GL2;var h=__ngs.r_(__ngs._4b).UILoader;var a=__ngs.r_(__ngs._4e).GLButton;var g=0;var c=0;b.GLScrollView=d.Node.subclass({classname:"GLScrollView",$MAX_LIST_ITEMS:64,initialize:function(m,n,l){this.clippingObjects=[];this._scrollable=true;this.__updateListener=new k.MessageListener();this._parentController=m;this._viewIsLoaded=false;this._loadDoneCallbacks=[];if(l){this._loadDoneCallbacks.push(l)}else{if(m.onViewsDoneLoading){this._loadDoneCallbacks.push(m.onViewsDoneLoading.bind(m,this))}}if(typeof n==="string"){console.log("(DYNAMICJSON) GLScrollView("+this.classname+") > initialize > loading dynamic view data");h.loadViewDataJSON(n,this.onViewDoneLoading.bind(this))}else{this.onViewDoneLoading(n)}this._topCount=0;this._bottomCount=0},viewIsLoaded:function(){return this._viewIsLoaded},onViewDoneLoading:function(m){console.log("(DYNAMICJSON) GLScrollView("+this.classname+") > onViewDoneLoading");this._viewData=m;k.UpdateEmitter.addListener(this.__updateListener,this.__onUpdate.bind(this));var o=640;var l=960;this._viewHeight=0;this._topY=0;this._definitions=new Array();this._areaHeight=l;this._size=[o,l];this.__size=new k.Size(o,l);this.__touchTarget=new d.TouchTarget();this.__touchTarget.setAnchor(0.5,0.5);this.__touchTarget.setPosition(this._size[0]/2,this._size[1]/2);this.__touchTarget.setSize(this._size);this.__touchListener=new k.MessageListener();this.__touchTarget.getTouchEmitter().addListener(this.__touchListener,this.__onTouch.bind(this));this.addChild(this.__touchTarget);this._lastTouchY;this._lastLastTouchY;this._totalDrag;this._velY;this._botY;this._dragging;this._tapDowned;this._itemSize;this._target;this._velY=this._lastTouchY=this._lastLastTouchY=0;if(this._viewData.staticBackgroundImages){console.log("(DYNAMICJSON) GLScrollView("+this.classname+") > onViewDoneLoading > static background");h.loadView(this._viewData.staticBackgroundImages,this)}this._scrollArea=new d.Node();this._scrollArea._definitions=new Array();this._scrollArea._totalHeight=0;this._scrollArea._viewData=this._viewData;this._scrollArea.getParentController=function(){return this._parentController}.bind(this);this.addChild(this._scrollArea);console.log("(DYNAMICJSON) GLScrollView("+this.classname+") > onViewDoneLoading > normal load");h.loadView(this._viewData,this._scrollArea);this._viewIsLoaded=true;for(var n in this._loadDoneCallbacks){this._loadDoneCallbacks[n]()}},addLoadDoneCallback:function(l){this._loadDoneCallbacks.push(l)},updateClipping:function(){for(var l=0;l<this.clippingObjects.length;++l){this.clippingObjects[l].updateClipping()}},addClippingObject:function(l){this.clippingObjects.push(l)},getParentController:function(){return this._parentController},getNode:function(){return this},getSize:function(){return this.__size},setScrollable:function(l){this._scrollable=l},getScrollable:function(){return this._scrollable},isDragging:function(){return this._dragging||this._velY!=0},__onUpdate:function(l){this._draw(l)},_draw:function(q){if(!this.viewIsLoaded()){return}this._velY+=(0-this._velY)/6;if(Math.abs(this._velY)<2){this._velY=0}this._scrollArea.setPosition(this._scrollArea.getPosition().getX(),this._scrollArea.getPosition().getY()+this._velY);var m=(this._topY-this._scrollArea.getPosition().getY());if(!this._dragging&&(this._scrollArea.getPosition().getY()>this._topY)&&this._bottomCount<1){var o=this._scrollArea.getPosition().getY();o+=Math.floor((this._topY-o)/3);if(o==0){o=this._topY}this._scrollArea.setPosition(this._scrollArea.getPosition().getX(),o);this._topCount++}else{var p=954;m=m+p;if(this._scrollArea._totalHeight<960){var l=-(m-p)}else{var l=Math.floor((this._scrollArea._totalHeight-m))}if(!this._dragging&&l<0&&this._topCount<1){var o=this._scrollArea.getPosition().getY();var n=Math.floor((-l)/3);if(n!=0){o+=n;this._scrollArea.setPosition(this._scrollArea.getPosition().getX(),o)}this._bottomCount++}}},__onTouch:function(l){switch(l.getAction()){case d.Touch.Action.Start:console.log("GLScrollView|"+this.classname+" <__onTouch> Action.Start");if(g>0){return false}var m=k.Time.getRealTime();var o=Math.abs(c-m);console.log("GLScrollView|"+this.classname+" <__onTouch> Action.Start (delta time, globalTouchTimestamp) : (%d, %d)",o,c);if(o<125){return false}g++;this._touchCounter++;var n=this._ccTouchesBegan(l);if(!n){g--;this._touchCounter--;console.log("GLScrollView|"+this.classname+" <__onTouch> Action.Start (globalTouchCounter, this.touchConter) after: "+g+","+this._touchCounter)}else{c=k.Time.getRealTime()}return n;case d.Touch.Action.Move:this._ccTouchesMoved(l);break;case d.Touch.Action.End:console.log("GLScrollView|"+this.classname+" <__onTouch> Action.End");g--;this._touchCounter--;console.log("GLScrollView|"+this.classname+" Action.End <__onTouch> (globalTouchCounter, this.touchConter) after: "+g+","+this._touchCounter);this._ccTouchesEnded(l);break}},redirectTouch:function(l){if(this._scrollable){if(TFUtils.DEBUG_REDIRECTED_TOUCHES){console.log("(TOUCHREDIRECT) Redirecting touch to GLList")}this._ccTouchesBegan(l);return this.onRedirectedTouch.bind(this)}},onRedirectedTouch:function(l){if(TFUtils.DEBUG_REDIRECTED_TOUCHES){console.log("(TOUCHREDIRECT) GLList processing redirected touch")}switch(l.getAction()){case d.Touch.Action.Move:if(TFUtils.DEBUG_REDIRECTED_TOUCHES){console.log("(TOUCHREDIRECT) Redirected touch calling _ccTouchesMoved")}this._ccTouchesMoved(l);break;case d.Touch.Action.End:if(TFUtils.DEBUG_REDIRECTED_TOUCHES){console.log("(TOUCHREDIRECT) Redirected touch calling _ccTouchesEnded")}this._ccTouchesEnded(l);break}},_ccTouchesBegan:function(l){this._tapDowned=true;var m=this.screenToLocal(l.getPosition());this._dragging=true;this._velY=0;this._totalDrag=0;this._lastTouchY=this._lastLastTouchY=m.getY();return this._scrollable},_ccTouchesMoved:function(l){if(!this._tapDowned){return}this._topCount=0;this._bottomCount=0;var m=this.screenToLocal(l.getPosition());this._lastLastTouchY=this._lastTouchY;this._lastTouchY=m.getY();var n=this._lastTouchY-this._lastLastTouchY;this._totalDrag+=Math.abs(n);this._scrollArea.setPosition(this._scrollArea.getPosition().getX(),this._scrollArea.getPosition().getY()+n)},_ccTouchesEnded:function(l){console.log("AREA END TOUCH");this._direction=null;var m=this.screenToLocal(l.getPosition());this._dragging=false;this._velY=m.getY()-this._lastLastTouchY;console.log("totalDrag: "+this._totalDrag);if(!this._tapDowned){this._velY=0;return}},destroyListeners:function(){this.__updateListener&&this.__updateListener.destroy();this.__updateListener=null;this.__touchListener&&this.__touchListener.destroy();this.__touchListener=null},destroyAllChildren:function(m){var l=m._children;while(l&&l.length){this.destroyAllChildren(l[0]);l[0].destroy()}if(m._scrollArea){l=m._scrollArea._children;while(l&&l.length){this.destroyAllChildren(l[0]);l[0].destroy()}}},destroy:function($super){g=0;c=0;this.destroyListeners();this.destroyAllChildren(this);this._children.length=0;this._parentController=null;this._viewData=null;this._definitions=null;$super()}})}};__ngs._8w={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var d=__ngs.r_(__ngs._7p).View;var c=__ngs.r_(__ngs._8x).StoreTopViewDefinition;a.StoreTopView=d.subclass({classname:"StoreTopView",initialize:function($super,e){$super(e,c)},destroy:function($super){$super()}})}};__ngs._8x={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.StoreTopViewDefinition={images:[],labels:[]}}};__ngs._8y={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var d=__ngs.r_(__ngs._7p).View;var c=__ngs.r_(__ngs._8z).StoreElementViewDefinition;a.StoreElementView=d.subclass({classname:"StoreElementView",initialize:function($super,e){$super(e,c)},destroy:function($super){$super()}})}};__ngs._8z={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.StoreElementViewDefinition={images:[{name:"leftcell",pos_x:0,pos_y:12,size_x:158,size_y:158,anchor_x:0,anchor_y:0,asset:"Content/Images8x/UI/Cell/store_cell.png",},{name:"middlecell",pos_x:158,pos_y:12,size_x:324,size_y:158,anchor_x:0,anchor_y:0,asset:"Content/Images8x/UI/Cell/store_cell_middle.png"},{name:"rightcell",pos_x:640,pos_y:12,size_x:158,size_y:158,anchor_x:1,anchor_y:0,asset:"Content/Images8x/UI/Cell/store_cell.png",flip_x:true},{name:"elementImage",pos_x:10,pos_y:-30,size_x:220,size_y:220,depth:8,asset:"Content/Images8x/UI/StoreItems/store_upgrade_material.png"},{name:"currencyImage",pos_x:570,pos_y:110,size_x:42,size_y:42,depth:5,asset:"Content/Images8x/UI/icon/icon_currency.png"}],labels:[{name:"nameLabel",pos_x:600,pos_y:-10,anchor_x:1,anchor_y:0,size_x:400,size_y:100,horizontalAlign:"right",font_size:24,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],colorType:"item"},{name:"descriptionLabel",pos_x:600,pos_y:85,anchor_x:1,anchor_y:0.5,horizontalAlign:"right",size_x:400,size_y:200,font_size:18,color:[255,255,255]},{name:"costLabel",pos_x:550,pos_y:130,anchor_x:1,anchor_y:0.5,size_x:200,size_y:100,horizontalAlign:"right",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255]}],buttons:[{name:"actionButton",pos_x:0,pos_y:0,size_x:640,size_y:154,anchor_x:0,anchor_y:0,action:"onActionSelected",sound:["click_high"],asset:"Content/Images8x/misc/1pxclear.png",info:{id:1}}]}}};__ngs._90={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.StoreItemViewDefinition={groups:[{name:"backgroundImage",groupDefinition:"backgroundImage",pos_x:0,pos_y:0,size_x:768,size_y:1024,depth:-10}],groupDefinitions:{backgroundImage:{images:[{name:"backgroundImage1",pos_x:320,pos_y:480,size_x:384,size_y:512,anchor_x:1,anchor_y:1,asset:"Content/Images8x/UI/BG/bg_store1.png",depth:-10},{name:"backgroundImage2",pos_x:320,pos_y:480,size_x:384,size_y:512,anchor_x:0,anchor_y:1,flip_x:true,asset:"Content/Images8x/UI/BG/bg_store1.png",depth:-10},{name:"backgroundImage3",pos_x:320,pos_y:480,size_x:384,size_y:512,anchor_x:1,anchor_y:0,flip_y:true,asset:"Content/Images8x/UI/BG/bg_store1.png",depth:-10},{name:"backgroundImage4",pos_x:320,pos_y:480,size_x:384,size_y:512,anchor_x:0,anchor_y:0,flip_x:true,flip_y:true,asset:"Content/Images8x/UI/BG/bg_store1.png",depth:-10}]}},images:[],labels:[],buttons:[],tfbuttons:[],progressBar:[],lists:[{name:"item",width:700,height:960,itemHeight:190,itemWidth:640,pos_x:0,pos_y:60}]}}};__ngs._91={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.RBStoreGashaViewDefinition={staticBackgroundImages:{images:[{name:"backgroundImage",anchor_x:0.5,anchor_y:0.5,pos_x:320,pos_y:480,size_x:640,size_y:960,asset:"Content/Images8x/UI/BG/bg_spacebridge.jpg",depth:-10}]},labels:[],buttons:[],groupDefinitions:{item0:{images:[{name:"premiumGashaBG",pos_x:0,pos_y:0,size_x:630,size_y:350,asset:"Content/Images8x/UI/14_store/cell_spacebridge_premium.png",depth:-1,visible:false},{name:"premiumGashaButtonImage",pos_x:557,pos_y:286,size_x:20,size_y:35,asset:"Content/Images8x/misc/1pxclear.png",depth:2,visible:false},{name:"mobacoinIcon",pos_x:125,pos_y:292,size_x:50,size_y:50,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/icon/icon_currency_cybercash.png",depth:2},{name:"getMoreMobacionIcon",pos_x:580,pos_y:305,size_x:50,size_y:50,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/icon/icon_currency_cybercash.png",depth:2}],labels:[{name:"nameText",pos_x:23,pos_y:40,size_x:280,size_y:150,anchor_x:0,anchor_y:0,font_size:40,horizontalAlign:"left",verticalAlign:"top",depth:1,dropShadowVisible:true,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:""},{name:"descText",pos_x:23,pos_y:152,size_x:350,size_y:100,anchor_x:0,anchor_y:0,font_size:19,depth:1,horizontalAlign:"left",fontType:"Content/Fonts/text.otf",color:[27,70,200],text:""},{name:"priceText",pos_x:30,pos_y:272,size_x:100,size_y:40,anchor_x:0,anchor_y:0,font_size:32,horizontalAlign:"left",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:"3000"},{name:"staticGetMoreText",pos_x:403,pos_y:266,size_x:220,size_y:75,anchor_x:0,anchor_y:0,font_size:40,horizontalAlign:"left",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:"ui_getmore_uc"},{name:"topRightText",pos_x:545,pos_y:57,size_x:110,size_y:100,anchor_x:0.5,anchor_y:0.5,font_size:30,horizontalAlign:"center",verticalAlign:"middle",depth:1,fontType:"Content/Fonts/SFElectrotome.ttf",color:[0,0,0],text:""}],tfbuttons:[{name:"altButton",anchor_x:0,anchor_y:0,pos_x:393,pos_y:266,size_x:220,size_y:75,text:"",type:5,font_size:40,color:[236,243,255],fontType:"Content/Fonts/SFElectrotome.ttf",visible:true,enabled:true,action:"onGetMoreMobacoinButton",sound:["click_high"]},{name:"buyButton",anchor_x:1,anchor_y:0,pos_x:620,pos_y:268,size_x:140,size_y:75,text:"ui_open_uc",type:5,font_size:36,color:[236,243,255],fontType:"Content/Fonts/SFElectrotome.ttf",visible:false,enabled:false,action:"onGashaAction",sound:["click_high"],info:{}}],groupDefinitions:{bgImage:{images:[{name:"BGImagePart1",pos_x:-17,pos_y:0,size_x:332,size_y:350,asset:"",depth:-1,info:{asset_dir:"Content/Images8x/event_raidboss",asset_name_E01RB01:"Event_SB_premium_10card_01.png",asset_name:"Event_SB_premium_10card_01.png"}},{name:"BGImagePart2",pos_x:315,pos_y:0,size_x:315,size_y:350,asset:"",depth:-1,info:{asset_dir:"Content/Images8x/event_raidboss",asset_name_E01RB01:"Event_SB_premium_10card_02.png",asset_name:"Event_SB_premium_10card_02.png"}}]}},groups:[{name:"bgImage",groupDefinition:"bgImage",pos_x:0,pos_y:0,size_x:630,size_y:350,depth:-1}]},item1:{images:[{name:"premiumGashaBG",pos_x:0,pos_y:0,size_x:630,size_y:350,asset:"Content/Images8x/UI/14_store/cell_spacebridge_premium.png",depth:-1,visible:false},{name:"premiumGashaButtonImage",pos_x:557,pos_y:286,size_x:20,size_y:35,asset:"Content/Images8x/misc/1pxclear.png",depth:2,visible:false},{name:"mobacoinIcon",pos_x:105,pos_y:292,size_x:50,size_y:50,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/icon/icon_currency_cybercash.png",depth:2},{name:"mobacoinIcon2",pos_x:260,pos_y:292,size_x:50,size_y:50,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/icon/icon_currency_cybercash.png",depth:2},{name:"getMoreMobacionIcon",pos_x:580,pos_y:305,size_x:50,size_y:50,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/icon/icon_currency_cybercash.png",depth:2},{name:"newPricePointer",pos_x:150,pos_y:292,size_x:15,size_y:25,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/14_store/icon_new_price_pointer.png",depth:2},{name:"priceSlash",pos_x:80,pos_y:292,size_x:105,size_y:30,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/14_store/icon_price_slash.png",depth:5}],labels:[{name:"nameText",pos_x:23,pos_y:40,size_x:280,size_y:150,anchor_x:0,anchor_y:0,font_size:40,horizontalAlign:"left",verticalAlign:"top",depth:1,dropShadowVisible:true,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:""},{name:"descText",pos_x:23,pos_y:152,size_x:350,size_y:100,anchor_x:0,anchor_y:0,font_size:19,depth:1,horizontalAlign:"left",fontType:"Content/Fonts/text.otf",color:[250,250,25],dropShadowVisible:true,text:""},{name:"priceText",pos_x:30,pos_y:272,size_x:100,size_y:40,anchor_x:0,anchor_y:0,font_size:32,horizontalAlign:"left",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:"300"},{name:"newPriceText",pos_x:180,pos_y:272,size_x:100,size_y:40,anchor_x:0,anchor_y:0,font_size:32,horizontalAlign:"left",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:"100"},{name:"staticGetMoreText",pos_x:403,pos_y:266,size_x:220,size_y:75,anchor_x:0,anchor_y:0,font_size:40,horizontalAlign:"left",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:"ui_getmore_uc"},{name:"topRightText",pos_x:545,pos_y:57,size_x:110,size_y:100,anchor_x:0.5,anchor_y:0.5,font_size:30,horizontalAlign:"center",verticalAlign:"middle",depth:1,fontType:"Content/Fonts/SFElectrotome.ttf",color:[0,0,0],text:""}],tfbuttons:[{name:"altButton",anchor_x:0,anchor_y:0,pos_x:393,pos_y:266,size_x:220,size_y:75,text:"",type:5,font_size:40,color:[236,243,255],fontType:"Content/Fonts/SFElectrotome.ttf",visible:true,enabled:true,action:"onGetMoreMobacoinButton",sound:["click_high"]},{name:"buyButton",anchor_x:1,anchor_y:0,pos_x:620,pos_y:268,size_x:140,size_y:75,text:"ui_open_uc",type:5,font_size:36,color:[236,243,255],fontType:"Content/Fonts/SFElectrotome.ttf",visible:false,enabled:false,action:"onGashaAction",sound:["click_high"],info:{}}],groupDefinitions:{bgImage:{images:[{name:"BGImagePart1",pos_x:-17,pos_y:0,size_x:332,size_y:350,asset:"",depth:-1,info:{asset_dir:"Content/Images8x/event_raidboss",asset_name_E01RB01:"Event_SB_premium_1card_01.png",asset_name:"Event_SB_premium_1card_01.png"}},{name:"BGImagePart2",pos_x:315,pos_y:0,size_x:315,size_y:350,asset:"",depth:-1,info:{asset_dir:"Content/Images8x/event_raidboss",asset_name_E01RB01:"Event_SB_premium_1card_02.png",asset_name:"Event_SB_premium_1card_02.png"}}]}},groups:[{name:"bgImage",groupDefinition:"bgImage",pos_x:0,pos_y:0,size_x:630,size_y:350,depth:-1}]},item2:{images:[{name:"premiumGashaBG",pos_x:0,pos_y:0,size_x:630,size_y:230,asset:"Content/Images8x/UI/14_store/cell_spacebridge_battle.png",depth:-1,visible:false},{name:"premiumGashaButtonImage",pos_x:557,pos_y:162,size_x:20,size_y:35,asset:"Content/Images8x/misc/1pxclear.png",depth:2,visible:false},{name:"mobacoinIcon",pos_x:105,pos_y:166,size_x:50,size_y:50,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/icon/icon_currency_cybercash.png",depth:2},{name:"getMoreMobacionIcon",pos_x:580,pos_y:305,size_x:50,size_y:50,anchor_x:0.5,anchor_y:0.5,asset:"Content/Images8x/UI/icon/icon_currency_cybercash.png",depth:2}],labels:[{name:"nameText",pos_x:23,pos_y:35,size_x:250,size_y:100,anchor_x:0,anchor_y:0,font_size:28,horizontalAlign:"left",verticalAlign:"top",depth:1,dropShadowVisible:true,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:""},{name:"descText",pos_x:23,pos_y:60,size_x:300,size_y:100,anchor_x:0,anchor_y:0,font_size:21,depth:1,horizontalAlign:"left",fontType:"Content/Fonts/text.otf",color:[250,250,25],text:""},{name:"priceText",pos_x:30,pos_y:147,size_x:100,size_y:40,anchor_x:0,anchor_y:0,font_size:32,horizontalAlign:"left",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:"300"},{name:"staticGetMoreText",pos_x:403,pos_y:157,size_x:220,size_y:75,anchor_x:0,anchor_y:0,font_size:40,horizontalAlign:"left",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:"ui_getmore_uc"}],tfbuttons:[{name:"altButton",anchor_x:0,anchor_y:0,pos_x:393,pos_y:143,size_x:220,size_y:75,text:"",type:5,font_size:40,color:[236,243,255],fontType:"Content/Fonts/SFElectrotome.ttf",visible:true,enabled:true,action:"onGetMoreMobacoinButton",sound:["click_high"]},{name:"buyButton",anchor_x:1,anchor_y:0,pos_x:620,pos_y:143,size_x:140,size_y:75,text:"ui_open_uc",type:5,font_size:36,color:[236,243,255],fontType:"Content/Fonts/SFElectrotome.ttf",visible:false,enabled:false,action:"onGashaAction",sound:["click_high"],info:{}}],groupDefinitions:{bgImage:{images:[{name:"BGImagePart1",pos_x:0,pos_y:0,size_x:210,size_y:230,asset:"",depth:-1,info:{asset_dir:"Content/Images8x/event_raidboss",asset_name_E01RB01:"SB_premium_weapon_event_01.png",asset_name:"SB_premium_weapon_event_01.png"}},{name:"BGImagePart2",pos_x:210,pos_y:0,size_x:210,size_y:230,asset:"",depth:-1,info:{asset_dir:"Content/Images8x/event_raidboss",asset_name_E01RB01:"SB_premium_weapon_event_02.png",asset_name:"SB_premium_weapon_event_02.png"}},{name:"BGImagePart3",pos_x:420,pos_y:0,size_x:210,size_y:230,asset:"",depth:-1,info:{asset_dir:"Content/Images8x/event_raidboss",asset_name_E01RB01:"SB_premium_weapon_event_03.png",asset_name:"SB_premium_weapon_event_03.png"}}]}},groups:[{name:"bgImage",groupDefinition:"bgImage",pos_x:0,pos_y:0,size_x:630,size_y:230,depth:-1}]},item3:{images:[{name:"freeGashaBG",pos_x:0,pos_y:0,size_x:630,size_y:230,asset:"Content/Images8x/UI/14_store/cell_spacebridge_bronze_transformers.png",depth:0,visible:false},{name:"freeGashaButtonImage",pos_x:557,pos_y:162,size_x:20,size_y:35,asset:"Content/Images8x/misc/1pxclear.png",depth:2,visible:false}],labels:[{name:"nameText",pos_x:23,pos_y:35,size_x:250,size_y:100,anchor_x:0,anchor_y:0,font_size:28,dropShadowVisible:true,depth:1,text:"",horizontalAlign:"left",verticalAlign:"top",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255]},{name:"descText",pos_x:23,pos_y:60,size_x:300,size_y:100,anchor_x:0,anchor_y:0,font_size:21,depth:1,horizontalAlign:"left",fontType:"Content/Fonts/text.otf",color:[240,240,250],dropShadowVisible:true,text:""},{name:"currencyText",pos_x:75,pos_y:165,size_x:70,size_y:40,anchor_x:1,anchor_y:0.5,font_size:32,horizontalAlign:"right",verticalAlign:"bottom",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:""},{name:"priceText",pos_x:85,pos_y:165,size_x:200,size_y:40,anchor_x:0,anchor_y:0.5,font_size:23,horizontalAlign:"left",verticalAlign:"bottom",fontType:"Content/Fonts/text.otf",color:[255,255,255],text:"ui_available"}],tfbuttons:[{name:"buyButton",anchor_x:1,anchor_y:0,pos_x:620,pos_y:143,size_x:140,size_y:75,text:"ui_open_uc",type:5,font_size:36,color:[236,243,255],fontType:"Content/Fonts/SFElectrotome.ttf",visible:false,enabled:false,action:"onGashaAction",sound:["click_high"],info:{}},{name:"altButton",anchor_x:1,anchor_y:0,pos_x:620,pos_y:143,size_x:140,size_y:75,text:"ui_explore_uc",type:5,font_size:30,color:[236,243,255],fontType:"Content/Fonts/SFElectrotome.ttf",visible:true,enabled:true,action:"onExploreButton",sound:["click_high"]}],groupDefinitions:{bgImage:{images:[{name:"BGImagePart1",pos_x:0,pos_y:0,size_x:210,size_y:230,asset:"Content/Images8x/event_raidboss/SB_medal_event1_gold_01.png",depth:-1},{name:"BGImagePart2",pos_x:210,pos_y:0,size_x:210,size_y:230,asset:"Content/Images8x/event_raidboss/SB_medal_event1_gold_02.png",depth:-1},{name:"BGImagePart3",pos_x:420,pos_y:0,size_x:210,size_y:230,asset:"Content/Images8x/event_raidboss/SB_medal_event1_gold_03.png",depth:-1}]}},groups:[{name:"bgImage",groupDefinition:"bgImage",pos_x:0,pos_y:0,size_x:630,size_y:230,depth:-1}]},item4:{images:[{name:"WBronzeMedalBG",pos_x:0,pos_y:0,size_x:630,size_y:230,asset:"Content/Images8x/UI/14_store/cell_spacebridge_bronze_weapons.png",depth:0,visible:false},{name:"freeGashaButtonImage",pos_x:557,pos_y:162,size_x:20,size_y:35,asset:"Content/Images8x/misc/1pxclear.png",depth:2,visible:false}],labels:[{name:"nameText",pos_x:23,pos_y:35,size_x:250,size_y:100,anchor_x:0,anchor_y:0,font_size:28,dropShadowVisible:true,depth:1,text:"",horizontalAlign:"left",verticalAlign:"top",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255]},{name:"descText",pos_x:23,pos_y:60,size_x:300,size_y:100,anchor_x:0,anchor_y:0,font_size:21,depth:1,horizontalAlign:"left",fontType:"Content/Fonts/text.otf",color:[240,240,250],dropShadowVisible:true,text:""},{name:"currencyText",pos_x:75,pos_y:165,size_x:70,size_y:40,anchor_x:1,anchor_y:0.5,font_size:32,horizontalAlign:"right",verticalAlign:"bottom",fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],text:""},{name:"priceText",pos_x:85,pos_y:165,size_x:200,size_y:40,anchor_x:0,anchor_y:0.5,font_size:23,horizontalAlign:"left",verticalAlign:"bottom",fontType:"Content/Fonts/text.otf",color:[255,255,255],text:"ui_available"}],tfbuttons:[{name:"buyButton",anchor_x:1,anchor_y:0,pos_x:620,pos_y:143,size_x:140,size_y:75,text:"ui_open_uc",type:5,font_size:36,color:[236,243,255],fontType:"Content/Fonts/SFElectrotome.ttf",visible:false,enabled:false,action:"onGashaAction",sound:["click_flat"],info:{}},{name:"altButton",anchor_x:1,anchor_y:0,pos_x:620,pos_y:143,size_x:140,size_y:75,text:"ui_explore_uc",type:5,font_size:30,color:[236,243,255],fontType:"Content/Fonts/SFElectrotome.ttf",visible:true,enabled:true,action:"onExploreButton",sound:["click_high"]}],groupDefinitions:{bgImage:{images:[{name:"BGImagePart1",pos_x:0,pos_y:0,size_x:210,size_y:230,asset:"Content/Images8x/event_raidboss/SB_medal_event1_silver_01.png",depth:-1},{name:"BGImagePart2",pos_x:210,pos_y:0,size_x:210,size_y:230,asset:"Content/Images8x/event_raidboss/SB_medal_event1_silver_02.png",depth:-1},{name:"BGImagePart3",pos_x:420,pos_y:0,size_x:210,size_y:230,asset:"Content/Images8x/event_raidboss/SB_medal_event1_silver_03.png",depth:-1}]}},groups:[{name:"bgImage",groupDefinition:"bgImage",pos_x:0,pos_y:0,size_x:630,size_y:230,depth:-1}]}},groups:[{name:"item0",groupDefinition:"item0",pos_x:5,pos_y:160,size_x:630,size_y:350},{name:"item1",groupDefinition:"item1",pos_x:5,pos_y:490,size_x:630,size_y:350},{name:"item2",groupDefinition:"item2",pos_x:5,pos_y:820,size_x:630,size_y:230},{name:"item3",groupDefinition:"item3",pos_x:5,pos_y:1030,size_x:630,size_y:230},{name:"item4",groupDefinition:"item4",pos_x:5,pos_y:1240,size_x:630,size_y:230}]}}};__ngs._92={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var d=__ngs.r_(__ngs._7p).View;var c=__ngs.r_(__ngs._e8).GiftInboxViewDefinition;a.GiftInboxView=d.subclass({classname:"GiftInboxView",initialize:function($super,e){$super(e,c)},destroy:function($super){$super()}})}};__ngs._93={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var d=__ngs.r_(__ngs._7p).View;var c=__ngs.r_(__ngs._94).GiftInboxBottomViewDefinition;a.GiftInboxBottomView=d.subclass({classname:"GiftInboxBottomView",initialize:function($super,e){$super(e,c)},destroy:function($super){$super()}})}};__ngs._94={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.GiftInboxBottomViewDefinition={images:[],labels:[],buttons:[],tfbuttons:[{name:"prevButton",anchor_x:0,anchor_y:1,pos_x:10,pos_y:100,size_x:300,size_y:80,text:"ui_prev_uc",font_size:32,type:8,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",action:"onPrev",sound:["click_flat"],visible:false},{name:"nextButton",anchor_x:0,anchor_y:1,pos_x:330,pos_y:100,size_x:300,size_y:80,text:"ui_next_uc",font_size:32,type:5,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"middle",action:"onNext",sound:["click_flat"],visible:false},{name:"acceptAllButton",visible:false,text:"ui_acceptall_uc",font_size:32,fontType:"Content/Fonts/SFElectrotome.ttf",pos_x:310,pos_y:120,size_x:580,size_y:75,anchor_x:0.5,anchor_y:0.5,action:"onAcceptAll",sound:["click_flat"],info:{id:1}}]}}};__ngs._95={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var d=__ngs.r_(__ngs._7p).View;var c=__ngs.r_(__ngs._96).GiftInboxElementViewDefinition;a.GiftInboxElementView=d.subclass({classname:"GiftInboxElementView",initialize:function($super,e){$super(e,c)},destroy:function($super){$super()}})}};__ngs._96={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.GiftInboxElementViewDefinition={images:[{name:"elementImage",pos_x:40,pos_y:20,size_x:125,size_y:125,anchor_x:0,anchor_y:0,depth:4,asset:"Content/Images8x/misc/1pxclear.png"},{name:"leftcell",pos_x:0,pos_y:12,size_x:158,size_y:158,anchor_x:0,anchor_y:0,asset:"Content/Images8x/UI/Cell/store_cell.png"},{name:"middlecell",pos_x:158,pos_y:12,size_x:324,size_y:158,anchor_x:0,anchor_y:0,asset:"Content/Images8x/UI/Cell/store_cell_middle.png"},{name:"rightcell",pos_x:640,pos_y:12,size_x:158,size_y:158,anchor_x:1,anchor_y:0,asset:"Content/Images8x/UI/Cell/store_cell.png",flip_x:true}],labels:[{name:"descriptionLabel",pos_x:600,pos_y:30,anchor_x:1,anchor_y:0,size_x:400,size_y:80,text:"",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],horizontalAlign:"right",verticalAlign:"top"},{name:"amountLabel",pos_x:600,pos_y:70,anchor_x:1,anchor_y:0,size_x:200,size_y:100,text:"",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],horizontalAlign:"right"}],buttons:[{name:"actionButton",pos_x:0,pos_y:0,size_x:640,size_y:154,anchor_x:0,anchor_y:0,action:"onActionSelected",sound:["click_flat"],asset:"Content/Images8x/misc/1pxclear.png",info:{id:1}}]}}};__ngs._97={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._7p).View;var e=__ngs.r_(__ngs._e9).CollectionViewDefinition;var a=__ngs.r_(__ngs._89).CardThumbnailView;b.CollectionView=d.subclass({classname:"CollectionView",initialize:function($super,g){$super(g,e);this._controller=g;this._arrangeCards()},destroy:function($super){$super()},_arrangeCards:function(){var o=this._definitions.cardArea.pos_x;var n=this._definitions.cardArea.pos_y;var t=this._definitions.cardArea.info.num_rows;var q=this._definitions.cardArea.info.num_cols;var m=this._definitions.cardArea.info.card_w;var r=this._definitions.cardArea.info.card_h;var k=this._definitions.cardArea.info.card_w*0.5;var h=this._definitions.cardArea.info.card_h*0.5;var s,l,g;var p=(640-q*m-o*2)/(q-1);this._cardPanels=[];for(s=0;s<t;s++){for(l=0;l<q;l++){g=new a(this.getParentController(),undefined,m,r,{anchor:[0.5,0.5],showSpinner:true});this._cardPanels[s*q+l]=g;this.cardArea.addChild(g);g.setPosition(k,h);g.cardImage.info.id=s*q+l;k=k+m+p}k=this._definitions.cardArea.info.card_w*0.5;h=h+r+p}},setCards:function(g){this._cardPanels[g-1].setVisible(true);this._cardPanels[g-1].enableTap()},hideCards:function(g){this._cardPanels[g-1].setVisible(false);this._cardPanels[g-1].disableTap()},setPageLabel:function(g){this.pageLabel.setText(g)},setCardImageFront:function(k,g,h){this._cardPanels[g-1].updateWithCard(k,{weapon:h,anchor:[0.5,0.5],showSpinner:true})},setCardImageBack:function(k,g,h){this._cardPanels[g-1].updateWithCard(k,{showBack:true,weapon:h,anchor:[0.5,0.5],showSpinner:true})}})}};__ngs._98={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var d=__ngs.r_(__ngs._7p).View;var c=__ngs.r_(__ngs._ea).InventoryViewDefinition;a.InventoryView=d.subclass({classname:"InventoryView",initialize:function($super,e){$super(e,c)},destroy:function($super){$super()}})}};__ngs._99={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var d=__ngs.r_(__ngs._7p).View;var b=__ngs.r_(__ngs._eb).InventoryCellViewDefinition;a.InventoryCellView=d.subclass({classname:"InventoryCellView",initialize:function($super,e){$super(e,b)},destroy:function($super){$super()}})}};__ngs._9a={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var g=__ngs.r_(__ngs._7p).View;var e=__ngs.r_(__ngs._ec).FusionViewDefinition;var a=__ngs.r_(__ngs._45).AnimationManager;var c=__ngs.r_(__ngs._45).AnimationQueue;b.FusionView=g.subclass({classname:"FusionView",initialize:function($super,h,k){$super(h,e);console.log("<<FusionView.initialize...!");this.am=new a()},animateIcons:function(){this.plusqueue=new c(this.am);this.plusqueue.pushAnimation(700,c.Curve.EaseIn).tween(c.Interpolate.scalar(0.8,0.3),function(k){if(this.mainCardIcon.getVisible()){this.mainCardIcon.setAlpha(k)}for(var h=1;h<9;h++){if(this["fuseCardIcon"+h].getVisible()){this["fuseCardIcon"+h].setAlpha(k)}}}.bind(this));this.plusqueue.pushAnimation(700,c.Curve.EaseOut).tween(c.Interpolate.scalar(0.3,0.8),function(k){if(this.mainCardIcon.getVisible()){this.mainCardIcon.setAlpha(k)}for(var h=1;h<9;h++){if(this["fuseCardIcon"+h].getVisible()){this["fuseCardIcon"+h].setAlpha(k)}}}.bind(this));this.plusqueue.startLooped()},stopAnimatingIcons:function(){if(this.plusqueue){this.plusqueue.destroy()}},destroy:function($super){this.am.destroy();$super()}})}};__ngs._9b={_c:null,_d:function(){var g={exports:{}};var b=g.exports;this._c=g;var h=__ngs.r_(__ngs._7l).DialogController;var e=__ngs.r_(__ngs._ed).FusionRewardView;var a=__ngs.r_(__ngs._r).TFCardsManager;var d=__ngs.r_(__ngs._48).TFSoundManager;var c=__ngs.r_(__ngs._45).AnimationQueue;b.FusionRewardController=h.subclass({classname:"FusionRewardController",initialize:function($super,k){$super(e);this._otherData=k;this._callback=null;console.log("FusionRewardController > initialize >  this._otherData : "+JSON.stringify(this._otherData));if(this._otherData&&this._otherData.callback){this._callback=this._otherData.callback}var l=TFUserData._lastFusionResult;if(l.success===true){this._baseLevel=l.level-l.incr_level;this._startXp=a._getXPForLevel(this._baseLevel,l.type);this._xpAtLevelUp=a._getXPForLevel(this._baseLevel+1,l.type);this._queue=this.createAnimationQueue();this._tartFillPoint=0;this._endPoint=0;if(l.incr_level>0){this._startFillPoint=(l.lastXp-this._startXp)/(this._xpAtLevelUp-this._startXp)*100;this._endPoint=100}else{this._startFillPoint=(l.lastXp-this._startXp)/(this._xpAtLevelUp-this._startXp)*100;this._endPoint=(l.newXp-this._startXp)/(this._xpAtLevelUp-this._startXp)*100}this._loopedSound=d.playSound("Upgrade_Loop");if(this._loopedSound){this._loopedSound.setLoops(true)}this.initAnimations(l)}else{console.log("FusionRewardController > initialize > Last fusion result failed")}},initAnimations:function(l){this._queue.pushAnimation(600,c.Curve.EaseInOut);this._queue.tween(c.Interpolate.scalar(this._startFillPoint,this._endPoint),this.getView().levelBar.setProgress.bind(this.getView().levelBar));this._queue.pushCallback(function(){if(l.incr_level>0){this.getView().levelUp.setVisible(true)}}.bind(this));if(l.incr_level>0){this._queue.pushCallback(function(){d.playSound("UPGRADE_LEVELUP_01")}.bind(this));this._queue.pushAnimation(800,c.Curve.EaseInOut);this._queue.tween(c.Interpolate.scalar(480,256),function(m){this.getView().levelUp.setPosition(0,m)}.bind(this));this._queue.pushCallback(function(){this.getView().levelUp.setVisible(false)}.bind(this))}for(var k=1;k<l.incr_level;k++){this._queue.pushAnimation(500,c.Curve.EaseIn);this._queue.tween(c.Interpolate.scalar(0,100),this.getView().levelBar.setProgress.bind(this.getView().levelBar));this._queue.pushCallback(function(){this.getView().levelUp.setVisible(true)}.bind(this));this._queue.pushCallback(function(){d.playSound("UPGRADE_LEVELUP_01")}.bind(this));this._queue.pushAnimation(800,c.Curve.EaseInOut);this._queue.tween(c.Interpolate.scalar(480,256),function(m){this.getView().levelUp.setPosition(0,m)}.bind(this));this._queue.pushCallback(function(){this.getView().levelUp.setVisible(false)}.bind(this))}if(l.incr_level>0){endPoint=(l.newXp-a._getXPForLevel(l.level,l.type))/(a._getXPForLevel(l.level+1,l.type)-a._getXPForLevel(l.level,l.type))*100;this._queue.pushAnimation(600,c.Curve.EaseInOut);this._queue.tween(c.Interpolate.scalar(0,endPoint),this.getView().levelBar.setProgress.bind(this.getView().levelBar))}this._queue.pushCallback(function(n){if(n){n.setLoops(false)}var m=__ngs.r_(__ngs._62).TFParticleManager;m.instantiate();var o=m.createEmitter("powerupFinish");o.setPosition(0,0);o.setDepth(30);o.setScale(2.2,1.5);this.getView().addChild(o);o.play();d.playSound("Upgrade_End")}.bind(this,this._loopedSound));this._queue.pushAnimation(100);this._queue.pushCallback(function(){if(l){this.dismissDialog();var n=a.getCardType(this._otherData.usercard.definitionId);if(n==TFGameData.CARD_TYPE.TRANSFORMER){var o=__ngs.r_(__ngs._ee).FusionRewardCardController;TFSceneDirector._showDialog(new o(this._otherData,true))}else{var m=__ngs.r_(__ngs._ef).FusionRewardWeaponCardController;TFSceneDirector._showDialog(new m(this._otherData,true))}}}.bind(this));if(TFUserData.getTutorialState("fusion")=="fuse"){this._queue.pushCallback(function(){var n={};n.title=Localization.getString("tutorial_fusion_title_06");n.text=Localization.getString("tutorial_fusion_text_06");n.tutorialId="tutorial_fusion_title_06";n.cb=function(){TFAnalytics.reportGameEvent("UPGRADETUTORIAL",{Step:"12_SuccessTutorialDismiss"})};var o=__ngs.r_(__ngs._81).TutorialBubbleView;var m=TFSceneDirector.showTutorialDialog(o,n);m.getView().bubble1.setPosition(-320,-100);TFUserData.setNewTutorialState("fusion","end")}.bind(this))}this._queue.start()},dismissDialog:function($super){console.log("FusionRewardController > dismissDialog > this._callback : "+JSON.stringify(this._callback));if(this._callback){this._callback()}TFSceneDirector.enableBack();$super()}})}};__ngs._9c={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._7p).View;var a=__ngs.r_(__ngs._eg).TransformViewDefinition;b.TransformView=d.subclass({classname:"TransformView",initialize:function($super,e){$super(e,a)},destroy:function($super){$super()},showCost:function(e){this["costBox"].setVisible(true);this["costBox"].costText.setText(e)}})}};__ngs._9d={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var c=__ngs.r_(__ngs._8v).GLScrollView;var e=__ngs.r_(__ngs._61).TFEventManager;var a=__ngs.r_(__ngs._eh);b.HomeView=c.subclass({classname:"HomeView",initialize:function($super,g){console.log("(DYNAMICJSON) HomeView > initialize");$super(g,a,function(){console.log("(DYNAMICJSON) HomeView > view done loading callback");if(!e.runningEvent){this._scrollArea.eventButton.setVisible(false)}g.onViewsDoneLoading(this)}.bind(this))},destroy:function($super){$super()},setExploreEnergy:function(l,k){this._scrollArea.energyLabel.setText(l+"/"+k);var m=this._scrollArea.energyBarMeter;if(m&&m._animation){var n=m._animation.getFrame(0);if(m.originalWidth==undefined){m.originalWidth=n.getSize().getWidth()}var g=(l==0||k==0)?0:(l/k);var h=new Core.Size(m.originalWidth*g,n.getSize().getHeight());var o=new GL2.Animation.Frame(n.getImage(),n.getDuration(),h,n.getAnchor(),n.getUVs());m._animation.setFrame(0,o)}},setBattleEnergy:function(l){if(!this.viewIsLoaded()){console.log("HomeView > setBattleEnergy > view not loaded yet - delaying");this.addLoadDoneCallback(this.setBattleEnergy.bind(this,l));return}if(l!=this._prevBattleEnergy){this._prevBattleEnergy=l;var k=this._scrollArea.battleEnergyIcon1;if(k){var m=(l>=1)?1:0.3;k.setAlpha(m)}var h=this._scrollArea.battleEnergyIcon2;if(h){var m=(l>=2)?1:0.3;h.setAlpha(m)}var g=this._scrollArea.battleEnergyIcon3;if(g){var m=(l>=3)?1:0.3;g.setAlpha(m)}}}})}};__ngs._9e={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var e=__ngs.r_(__ngs._7p).View;var b=__ngs.r_(__ngs._ei).ProfileViewDefinition;var a=__ngs.r_(__ngs._89).CardThumbnailView;c.ProfileView=e.subclass({classname:"ProfileView",initialize:function($super,g){$super(g,b)},destroy:function($super){$super()},fillUpScreen:function(){var m=this._parentController.getLeaderCard();this.cardThumbnail=new a(this,m,this.cardHolder.info.card_w,this.cardHolder.info.card_h,{leader:true,showSpinner:true});this.cardHolder.addChild(this.cardThumbnail);this.cardThumbnail.disableTap();var h=this._parentController.getPlayerGamerTag();this.playerName.setText(h);var n=this._parentController.getLevelProgress();console.log("ProfileView > fillUpScreen > levelProgress : "+n);this.xpBar.setProgress(n*100);var p=this._parentController.getLevel();this.level.setText(p);var g=this._parentController.getTransformerCards();if(g){this.transformerCards.setText(g)}else{this.transformerCards.setText("0")}var l=this._parentController.getWeaponCards();if(l){this.weaponCards.setText(l)}else{this.weaponCards.setText("0")}var o=this._parentController.getWins();if(o){this.wins.setText(o)}else{this.wins.setText("0")}var k=this._parentController.getLosses();if(k){this.losses.setText(k)}else{this.losses.setText("0")}},setAvatar:function(g){TFUtils.changeImageOnSprite(this.avatarImage,g)}})}};__ngs._9f={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var d=__ngs.r_(__ngs._7p).View;var c=__ngs.r_(__ngs._ej).AchievementsViewDefinition;a.AchievementsView=d.subclass({classname:"AchievementsView",initialize:function($super,e){$super(e,c)},destroy:function($super){$super()}})}};__ngs._9g={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var d=__ngs.r_(__ngs._7p).View;var c=__ngs.r_(__ngs._9h).AchievementsElementViewDefinition;a.AchievementsElementView=d.subclass({classname:"AchievementsElementView",initialize:function($super,e){$super(e,c)},destroy:function($super){$super()},setData:function(g){TFUtils.changeImageOnSprite(this.achievementsIcon,g.icon);this.nameLabel.setText(Localization.getString(g.name));this.decriptionLabel.setText(Localization.getString(g.description));for(var e=1;e<=4;e++){if(g["reward"+e]===undefined){this.rewards["reward"+e].setVisible(false);this.rewards["reward"+e+"Label"].setVisible(false)}else{TFUtils.changeImageOnSprite(this.rewards["reward"+e],g["reward"+e].icon);this.rewards["reward"+e+"Label"].setText(g["reward"+e].amount)}}}})}};__ngs._9h={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.AchievementsElementViewDefinition={images:[{name:"achievementsIcon",pos_x:10,pos_y:25,size_x:100,size_y:100,depth:1,asset:"Content/Images8x/card_back.png"},{name:"leftcell",pos_x:0,pos_y:12,size_x:256,size_y:320,anchor_x:0,anchor_y:0,asset:"Content/Images8x/UI/Cell/store_cell.png",flip_y:true},{name:"middlecell",pos_x:255,pos_y:12,size_x:132,size_y:320,anchor_x:0,anchor_y:0,asset:"Content/Images8x/UI/Cell/store_cell_middle.png"},{name:"rightcell",pos_x:640,pos_y:332,size_x:256,size_y:320,anchor_x:0,anchor_y:0,asset:"Content/Images8x/UI/Cell/store_cell.png",rotation:180},],labels:[{name:"nameLabel",pos_x:120,pos_y:-10,anchor_x:0,anchor_y:0,size_x:500,size_y:100,text:"ui_achievementname",font_size:38,fontType:"Content/Fonts/SFElectrotome.ttf",color:[100,100,255],horizontalAlign:"left",},{name:"decriptionLabel",pos_x:120,pos_y:60,anchor_x:0,anchor_y:0,size_x:300,size_y:200,text:"ui_matchatranscustomweapon",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],horizontalAlign:"left",verticalAlign:"top",},{name:"rewardLabel",pos_x:40,pos_y:150,anchor_x:0,anchor_y:0,size_x:150,size_y:60,text:"ui_rewards_uc",font_size:38,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left"}],tfbuttons:[{name:"collectButton",anchor_x:0,anchor_y:0,pos_x:450,pos_y:40,size_x:160,size_y:75,text:"ui_collect_uc",type:5,font_size:44,color:[236,243,255],fontType:"Content/Fonts/SFElectrotome.ttf",action:"onCollectSelected",info:{}},],buttons:[{name:"rewardsButton",pos_x:0,pos_y:0,size_x:0,size_y:0,anchor_x:0,anchor_y:0,action:"onRewardsSelected",text:"",asset:"Content/Images8x/UI/Cell/",info:{id:1},visible:"false"}],groupDefinitions:{rewards:{images:[{name:"reward1",pos_x:200,pos_y:150,size_x:70,size_y:70,asset:"Content/Images8x/UI/icon/icon_currency.png"},{name:"reward2",pos_x:200,pos_y:225,size_x:70,size_y:70,asset:"Content/Images8x/UI/StoreItems/store_battle_energy_capsule.png"},{name:"reward3",pos_x:400,pos_y:150,size_x:70,size_y:70,asset:"Content/Images8x/UI/StoreItems/reward_armorysize.png"},{name:"reward4",pos_x:400,pos_y:225,size_x:70,size_y:70,asset:"Content/Images8x/UI/StoreItems/Gacha_battlePoints.png"},],labels:[{name:"reward1Label",pos_x:300,pos_y:150,anchor_x:0,anchor_y:0,size_x:100,size_y:50,text:"1000",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],horizontalAlign:"left"},{name:"reward2Label",pos_x:300,pos_y:225,anchor_x:0,anchor_y:0,size_x:100,size_y:50,text:"1000",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],horizontalAlign:"left"},{name:"reward3Label",pos_x:500,pos_y:150,anchor_x:0,anchor_y:0,size_x:100,size_y:50,text:"1000",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],horizontalAlign:"left"},{name:"reward4Label",pos_x:500,pos_y:225,anchor_x:0,anchor_y:0,size_x:100,size_y:50,text:"1000",font_size:28,fontType:"Content/Fonts/SFElectrotome.ttf",color:[255,255,255],horizontalAlign:"left"}],buttons:[]}},groups:[{name:"rewards",groupDefinition:"rewards",pos_x:0,pos_y:0,anchor_y:20,depth:10}]}}};__ngs._9i={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._7p).View;var a=__ngs.r_(__ngs._ek).AchievementsBottomViewDefinition;b.AchievementsBottomView=d.subclass({classname:"AchievementsBottomView",initialize:function($super,e){$super(e,a)},destroy:function($super){$super()}})}};__ngs._9j={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._7p).View;var d=__ngs.r_(__ngs._el).OutOfEnergyViewDefinition;a.OutOfEnergyView=c.subclass({classname:"OutOfEnergyView",initialize:function($super,e){$super(e,d)},destroy:function($super){$super()}})}};__ngs._9k={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var d=__ngs.r_(__ngs._7p).View;var b=__ngs.r_(__ngs._em).OpponentSelectViewDefinition;a.OpponentSelectView=d.subclass({classname:"OpponentSelectView",initialize:function($super,e,g){$super(e,b);console.log("<<OpponentSelectView.initialize...!")},destroy:function($super){$super()}})}};__ngs._9l={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.OpponentSelectCellViewDefinition={images:[{name:"background",pos_x:-42,pos_y:0,size_x:768,size_y:160,asset:"Content/Images8x/UI/Cell/store_cell_middle.png"},{name:"battlePointsIcon",pos_x:280,pos_y:102,size_x:32,size_y:32,asset:"Content/Images8x/UI/icon/icon_currency_bp.png"}],tfbuttons:[{name:"selectButton",pos_x:495,pos_y:28,size_x:120,size_y:90,color:[255,255,255],text:"ui_select_uc",font_size:32,fontType:"Content/Fonts/SFElectrotome.ttf",action:"onSelectOpponent",sound:["click_high"],type:5,info:{id:0}}],labels:[{name:"staticLevelLabel",pos_x:130,pos_y:42,size_x:120,size_y:60,color:[250,250,250],font_size:24,text:"ui_level_uc",fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",verticalAlign:"bottom",anchor_x:0,anchor_y:0.5,colorType:"level"},{name:"staticWinsLabel",pos_x:130,pos_y:72,size_x:200,size_y:60,color:[190,190,210],font_size:24,text:"ui_battleswon",fontType:"Content/Fonts/text.otf",verticalAlign:"bottom",horizontalAlign:"left",anchor_x:0,anchor_y:0.5},{name:"staticRewardLabel",pos_x:130,pos_y:102,size_x:120,size_y:60,color:[190,190,210],font_size:24,text:"ui_reward",fontType:"Content/Fonts/text.otf",verticalAlign:"bottom",horizontalAlign:"left",anchor_x:0,anchor_y:0.5},{name:"staticBPLabel",pos_x:340,pos_y:97,size_x:120,size_y:60,color:[250,250,250],font_size:24,text:"ui_bp_uc",fontType:"Content/Fonts/text.otf",verticalAlign:"bottom",horizontalAlign:"left",anchor_x:0,anchor_y:0.5,visible:false,colorType:"battlePoints"},{name:"opponentName",pos_x:130,pos_y:12,size_x:400,size_y:60,font_size:30,color:[170,224,255],verticalAlign:"bottom",horizontalAlign:"left",anchor_x:0,anchor_y:0.5,text:"",fontType:"Content/Fonts/SFElectrotome.ttf",colorType:"playerName"},{name:"opponentLevel",pos_x:195,pos_y:42,size_x:200,size_y:60,font_size:24,color:[250,250,250],anchor_x:0,anchor_y:0.5,verticalAlign:"bottom",horizontalAlign:"left",text:"",fontType:"Content/Fonts/SFElectrotome.ttf",colorType:"level"},{name:"wins",pos_x:265,pos_y:72,size_x:200,font_size:24,color:[250,250,250],size_y:60,anchor_x:0,anchor_y:0.5,verticalAlign:"bottom",horizontalAlign:"left",text:"",fontType:"Content/Fonts/text.otf"},{name:"rewardPoints",pos_x:230,pos_y:102,size_x:200,font_size:24,size_y:60,anchor_x:0,anchor_y:0.5,verticalAlign:"bottom",horizontalAlign:"left",color:[250,250,250],text:"",fontType:"Content/Fonts/text.otf",colorType:"battlePoints"}],groupDefinitions:{cardPanel:{}},groups:[{name:"cardPanel",groupDefinition:"cardPanel",pos_x:9,pos_y:4,info:{card_w:103,card_h:138}}]}}};__ngs._9m={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._7p).View;var a=__ngs.r_(__ngs._en).BottomHudOpponentSelectViewDefinition;b.BottomHudOpponentSelectView=d.subclass({classname:"BottomHudOpponentSelectView",initialize:function($super,e){$super(e,a)},destroy:function($super){$super()},setPressedButton:function(e){},shiftBattleEnergyBarDown:function(){var g=this["battleEnergyBarBack"];for(var h=1;h<=3;h++){var e=this["battleEnergyIcon"+h];e.setPosition(e.getPosition().getX(),-40)}},hideTimeLeftString:function(){this["timeLeftLabel"].setVisible(false);this["timeTextLabel"].setVisible(false)},updateBattleEnergyTimer:function(e){this["timeLeftLabel"].setText(": "+TFUtils.timeToHumanTwoElement(e))},setBattleEnergy:function(k){if(k!=this._prevBattleEnergy){this._prevBattleEnergy=k;var h=this["battleEnergyIcon1"];if(h){var l=(k>=1)?1:0.3;h.setAlpha(l)}var g=this["battleEnergyIcon2"];if(g){var l=(k>=2)?1:0.3;g.setAlpha(l)}var e=this["battleEnergyIcon3"];if(e){var l=(k>=3)?1:0.3;e.setAlpha(l)}}},onBattleEnergyButton:function(){console.log("BottomHudOpponentSelectView > onBattleEnergyButton > called")}})}};__ngs._9n={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._7p).View;var a=__ngs.r_(__ngs._eo).ConfirmBattleViewDefinition;b.ConfirmBattleView=d.subclass({classname:"ConfirmBattleView",initialize:function($super,e){$super(e,a)},destroy:function($super){$super()}})}};__ngs._9o={_c:null,_d:function(){var m={exports:{}};var K=m.exports;this._c=m;var O=__ngs.r_(__ngs._n).ViewController;var u=__ngs.r_(__ngs._45).AnimationQueue;var t=__ngs.r_(__ngs._ep).BattleView;var l=__ngs.r_(__ngs._s).TFUtils;var r=__ngs.r_(__ngs._48).TFSoundManager;var H=__ngs.r_(__ngs._63).TFFormulas;var P=__ngs.r_(__ngs._r).TFCardsManager;var v=__ngs.r_(__ngs._x).TFManifestManager;var n=__ngs.r_(__ngs._4a).TFImageManager;var b=__ngs.r_(__ngs._at).FightAnimation;var a=__ngs.r_(__ngs._au).MeleeHit;var J=__ngs.r_(__ngs._av).LaserShot;var A=__ngs.r_(__ngs._aw).HitShake;var q=__ngs.r_(__ngs._ax).MissileShot;var h=__ngs.r_(__ngs._ay).IntroAnimation3D;var C=__ngs.r_(__ngs._az).ExecuteFunction;var R=__ngs.r_(__ngs._b0).SlideCardsIn;var y=__ngs.r_(__ngs._b1).TransformingBonus;var e=__ngs.r_(__ngs._b2).SlideBannerInOut;var z=__ngs.r_(__ngs._b3).HealthBarDamage;var w=__ngs.r_(__ngs._b4).HealthAnimation;var o=__ngs.r_(__ngs._b5).DeathAnimation;var Q=__ngs.r_(__ngs._b6).PositionBonus;var d=__ngs.r_(__ngs._b7).MaxLevelBonus;var F=__ngs.r_(__ngs._b8).FocusAbility;var k=__ngs.r_(__ngs._b9).EndAbility;var g=__ngs.r_(__ngs._ba).SuperiorityAbility;var L=__ngs.r_(__ngs._bb).ConvergenceAbility;var G=__ngs.r_(__ngs._bc).CriticalAttackMissile;var N=__ngs.r_(__ngs._bd).CriticalAttackLaser;var D=__ngs.r_(__ngs._be).DoubleAttack;var p=__ngs.r_(__ngs._bf).CriticalAttackMelee;var I=__ngs.r_(__ngs._bg).MiniCritical;var c=__ngs.r_(__ngs._bh).TripleAttack;var s=__ngs.r_(__ngs._bi).SlideAbilityInOut;var B=__ngs.r_(__ngs._bj).ShowSpecialAttack;var M=__ngs.r_(__ngs._bk).PauseAnimation;var E=__ngs.r_(__ngs._bl).SlideCardsOut;var x=__ngs.r_(__ngs._89).CardThumbnailView;K.BattleViewController=O.subclass({classname:"BattleViewController",MUSIC_KEY:"BATTLE_BACK",onBattleCompleted:function(){console.log("BattleViewController > onBattleCompleted > called");if(this._battleCompleted){return}this._battleCompleted=true;this.getView().skipButton.setVisible(false);this._animateBgIn()},changeScreenAfterBattle:function(){console.log("BattleViewController > changeScreenAfterBattle > called");TFSceneDirector.showBattleResults()},initialize:function($super){r.playMusic(this.MUSIC_KEY);r._playingBattle=true;$super();TFUserData.blockBack=true;this.createView(t);this.getView().opponentHPBar.emptyBar.setColor(84/255,84/255,84/255);this.getView().opponentHPBar.fillBar.setColor(79/255,148/255,205/255);this.getView().opponentHPBar.middleBar.setColor(255/255,0/255,0/255);this.getView().playerHPBar.emptyBar.setColor(84/255,84/255,84/255);this.getView().playerHPBar.fillBar.setColor(79/255,148/255,205/255);this.getView().playerHPBar.middleBar.setColor(255/255,0/255,0/255);console.log("BattleViewController > initialize > GUID : "+TFUserData._battleChanceGuid);Server.fight(TFUserData.getSelectedOpponent().name,TFUserData._battleChanceGuid,this._fightResponse.bind(this,TFUserData.getSelectedOpponent().name,TFUserData._battleChanceGuid));this._setupAllCards();var T={displayed:false,animated:true,timeout:300};var S={displayed:false,animated:true,timeout:300};this.setHudDisplayData(T,S);this._bgAnimationOutDuration=600;this._bgAnimationInDuration=400;setTimeout(this._animateBgOut.bind(this),400);this.fightAnimation=new b(this.getView());this.fightAnimation_intro=new b(this.getView());this.timerFunctions=[];this.tripleAttackNext=false;this.lastSpecial="";this.lastSpecialTurn=-1;TFSceneDirector.oldLevel=TFUserData.getLevel()},_slideInBars:function(){var S=this.createAnimationQueue();S.pushAnimation(300,u.Curve.EaseIn);S.tween(u.Interpolate.scalar(0,640),function(T){if(!this){return}this.opponentHPBar.setVisible(true);this.opponentName.setVisible(true);this.playerHPBar.setVisible(true);this.playerName.setVisible(true);this.opponentHPBar.setPosition(960-T,this.opponentHPBar.getPosition().getY());this.opponentName.setPosition(660-T,this.opponentName.getPosition().getY());this.playerHPBar.setPosition(-320+T,this.playerHPBar.getPosition().getY());this.playerName.setPosition(-20+T,this.playerName.getPosition().getY())}.bind(this.getView()));S.start()},_fightResponse:function(U,T,S,V){this._fightResponseReceived=true;if(!S){TFUserData._battleChanceGuid=undefined;TFUserData.setLastBattleResult(V);this.getView().skipButton.setVisible(true);console.log("BattleViewController > _fightResponse > Fight response OK");this._setupBattleData();this._animateInto3d();TFUserData.setLastBattleTimeStamp(Server.getTime())}else{TFUserData._battleChanceGuid=undefined;console.log("BattleViewController > _fightResponse > Giving up - going back to previous screen");if(TFUserData._battleChanceMissionId!=undefined){TFSceneDirector.showDoItMission(TFUserData._battleChanceMissionId);TFUserData._battleChanceMissionId=undefined}else{TFSceneDirector.showOpponents()}}},_setupBattleData:function(){var S=TFUserData.getLastBattleResult();this._playerStartingHP=S.hp.player.slice(0);this._oppStartingHP=S.hp.enemy.slice(0);this._playerCurrentHP=S.hp.player.slice(0);this._oppCurrentHp=S.hp.enemy.slice(0);console.log("BattleViewController > _setupBattleData > this._playerCurrentHP : "+JSON.stringify(this._playerCurrentHP));this._playerTotalStartingHp=this._getPlayerTotalRemainingHp();this._oppTotalStartingHp=this._getOpponentTotalRemainingHp()},_getPlayerTotalRemainingHp:function(){var S=0;for(var T in this._playerCurrentHP){S+=this._playerCurrentHP[T]}return S},_getOpponentTotalRemainingHp:function(){var S=0;for(var T in this._oppCurrentHp){S+=this._oppCurrentHp[T]}return S},_setupAllCards:function(){this.oppCards=[this.getView().stat1OpponentMain,this.getView().stat1OpponentLeft,this.getView().stat1OpponentRight,this.getView().stat2OpponentMain,this.getView().stat2OpponentLeft,this.getView().stat2OpponentRight,this.getView().stat3OpponentMain,this.getView().stat3OpponentLeft,this.getView().stat3OpponentRight];this.playerCards=[this.getView().stat1PlayerMain,this.getView().stat1PlayerLeft,this.getView().stat1PlayerRight,this.getView().stat2PlayerMain,this.getView().stat2PlayerLeft,this.getView().stat2PlayerRight,this.getView().stat3PlayerMain,this.getView().stat3PlayerLeft,this.getView().stat3PlayerRight];for(var V=0;V<9;V++){var X=TFUserData.getOpponentDeck()["status"+(Math.floor(V/3)+1)][V%3].gearDefinitionId;var S=0;var W=0;if(V%3==0){S=110;W=143}else{S=70;W=91}var U={anchor:[0.5,0.5],showSpinner:true};if(X%10==3){U.transformed=X;X=X-1}this.oppCards[V].cardThumbnail=new x(this,X,S,W,U);this.oppCards[V].cardThumbnail.disableTap();this.oppCards[V].addChild(this.oppCards[V].cardThumbnail);this.oppCards[V].damageLayer=new GL2.Sprite();this.oppCards[V].damageLayer.setImage("Content/Images8x/misc/1pxwhite.png",this.oppCards[V]._animation._frames[0]._size,[0.5,0.5],[0,0,1,1]);this.oppCards[V].damageLayer.setAlpha(0);this.oppCards[V].addChild(this.oppCards[V].damageLayer);this.oppCards[V].damageLayer.setColor(0,0,0)}for(var V=0;V<9;V++){var X=TFUserData.getDeckCard(Math.floor(V/3)+1,V%3,TFGameData.CARD_TYPE.TRANSFORMER).definitionId;var S=0;var W=0;if(V%3==0){S=110;W=143}else{S=70;W=91}var U={anchor:[0.5,0.5],showSpinner:true};if(X%10==3){U.transformed=X;X=X-1}var T=v.isFileDownloaded(n.getCorrectImagePath(l.getCardImagePath(X)));this.playerCards[V].cardThumbnail=new x(this,X,S,W,U);this.playerCards[V].cardThumbnail.disableTap();this.playerCards[V].addChild(this.playerCards[V].cardThumbnail);this.playerCards[V].damageLayer=SpriteFactoryCache.createSpriteWithCachedAnimation("Content/Images8x/misc/1pxwhite.png",this.playerCards[V]._animation._frames[0]._size,[0.5,0.5],[0,0,1,1]);this.playerCards[V].damageLayer.setAlpha(0);this.playerCards[V].addChild(this.playerCards[V].damageLayer);this.playerCards[V].damageLayer.setColor(0,0,0)}this.getView().playerName.setText(TFUserData.getGamerTag().toUpperCase());this.getView().opponentName.setText(TFUserData.getSelectedOpponent().gamerTag.toUpperCase())},_animateBgOut:function(){var S=this.createAnimationQueue();S.pushAnimation(this._bgAnimationOutDuration,u.Curve.EaseInOut);S.tween(u.Interpolate.scalar(0,700),function(T){if(this.topBg){this.topBg.setPosition(this.topBg.getPosition().getX(),180-T)}if(this.botBg){this.botBg.setPosition(this.botBg.getPosition().getX(),870+T)}}.bind(this.getView()));S.pushCallback(function(){this._shutterOpen=true;this._slideInBars();this._animateInto3d()}.bind(this));S.start()},_animateBgIn:function(){var S=this.createAnimationQueue();S.pushAnimation(this._bgAnimationInDuration,u.Curve.EaseIn);S.tween(u.Interpolate.scalar(640,0),function(T){if(this.topBg){this.topBg.setPosition(this.topBg.getPosition().getX(),180-T)}if(this.botBg){this.botBg.setPosition(this.botBg.getPosition().getX(),870+T)}}.bind(this.getView()));S.pushAnimation(100,u.Curve.Linear);S.pushCallback(this.changeScreenAfterBattle.bind(this));S.start()},_animateCardBuffs:function(){var S=this.createAnimationQueue();S.pushAnimation(700,u.Curve.EaseIn);S.tween(u.Interpolate.scalar(0,800),function(T){}.bind(this.getView()));S.pushCallback(this._slideBannerOut.bind(this));S.start()},_animateInto3d:function(){if(!this._shutterOpen||!this._fightResponseReceived){return}this.fightAnimation_intro.addAnimation(new M(1000));this.fightAnimation_intro.addAnimation(new R(this.playerCards,this.oppCards));var V=[];var T=[];var X=Localization.getString("ui_transscanbonusinbattle").split("&");var ab=X[0];var aa=X[1];this.fightAnimation_intro.addAnimation(new e(this.getView().blueBanner,this.getView().staticTransformingText,this.getView().staticBonusText,ab,aa));for(var Y=0;Y<this.oppCards.length;++Y){var ac=P.getCardDefinition(TFUserData.getOpponentDeck()["status"+(Math.floor(Y/3)+1)][Y%3].gearDefinitionId);if(ac.id%10==3){console.log("BattleViewController > _animateInto3d > Transform Bonus Opp Card found : "+Y);this.oppCards[Y]._deckPos=Y;V.push(this.oppCards[Y]);console.log("BattleViewController > _animateInto3d > Opp Transforming Card Data : "+JSON.stringify(TFUserData.getOpponentDeck()["status"+(Math.floor(Y/3)+1)][Y%3]));T.push({definitionId:ac.id,tfBonus:ac.tfBonus,cardPos:Y})}}for(var Y=0;Y<this.playerCards.length;++Y){var ac=P.getCardDefinition(TFUserData.getDeckCard(Math.floor(Y/3)+1,Y%3,TFGameData.CARD_TYPE.TRANSFORMER).definitionId);if(ac.id%10==3){console.log("BattleViewController > _animateInto3d > Transform Bonus Card found : "+Y);this.playerCards[Y]._deckPos=Y;V.push(this.playerCards[Y]);T.push({definitionId:ac.id,tfBonus:ac.tfBonus,cardPos:Y})}}this.fightAnimation_intro.addAnimation(new y(V,T));var X=Localization.getString("ui_positionbonusinbattle").split("&");var ab=X[0];var aa=X[1];this.fightAnimation_intro.addAnimation(new e(this.getView().energonpinkBanner,this.getView().staticTransformingText,this.getView().staticBonusText,ab,aa));var U=this.oppCards.concat(this.playerCards);this.fightAnimation_intro.addAnimation(new Q(U));var W=[];for(var Y=0;Y<this.playerCards.length;++Y){var Z=TFUserData.getDeckCard(Math.floor(Y/3)+1,Y%3,TFGameData.CARD_TYPE.TRANSFORMER).xp;var S=H.getTrasformerLevelFromXP(Z);if(P.getCardDefinition(TFUserData.getDeckCard(Math.floor(Y/3)+1,Y%3,TFGameData.CARD_TYPE.TRANSFORMER).definitionId).maxLevel<=S){W.push(this.playerCards[Y])}}for(var Y=0;Y<this.oppCards.length;++Y){var Z=TFUserData.getOpponentDeck()["status"+(Math.floor(Y/3)+1)][Y%3].gearXp;var S=H.getTrasformerLevelFromXP(Z);if(P.getCardDefinition(TFUserData.getOpponentDeck()["status"+(Math.floor(Y/3)+1)][Y%3].gearDefinitionId).maxLevel<=S){W.push(this.oppCards[Y])}}var X=Localization.getString("ui_maxlevelbonusinbattle").split("&");var ab=X[0];var aa=X[1];if(W.length>0){this.fightAnimation_intro.addAnimation(new e(this.getView().yellowBanner,this.getView().staticTransformingText,this.getView().staticBonusText,ab,aa));this.fightAnimation_intro.addAnimation(new d(W))}this.fightAnimation_intro.addAnimation(new h(this.playerCards,this.oppCards,this.getView().background));this.fightAnimation_intro.addAnimation(new C(this._animateBattle.bind(this)));this.fightAnimation_intro.executeAnimation()},_animateBattle:function(){if(!this.getView()){console.log("BattleViewController > _animateBattle > Screen destroyed, returning");return}this.fightAnimation.addAnimation(new M(800));for(var an=0;an<9;++an){this.playerCards[an].damageLayer.setAlpha(0.2);this.oppCards[an].damageLayer.setAlpha(0.2)}var ad=5;var S=150*ad;var V=TFUserData.getLastBattleResult();var am=V.hp.player.slice(0);var at=V.hp.enemy.slice(0);console.log("BattleViewController > _animateBattle > ResultData : "+JSON.stringify(V));for(var an in V.animations){var aa=V.animations[an];console.log("BattleViewController > _animateBattle > doing step "+an);console.log("BattleViewController > _animateBattle > Step data : "+JSON.stringify(aa));console.log("BattleViewController > _animateBattle > step timer function executing");for(var ag=0;ag<this.timerFunctions.length;++ag){this.timerFunctions[ag](aa)}if(aa.type=="attack"){var af=[];var T=(aa.damagedUnit[6]-1)*3;if(aa.turn=="player"){var ae=this.playerCards[aa.attackCardId];var X=ae.getPosition();var ab=[this.oppCards[T],this.oppCards[T+1],this.oppCards[T+2]];af=this.playerCards}else{if(aa.turn=="enemy"){var ae=this.oppCards[aa.attackCardId];var X=ae.getPosition();var ab=[this.playerCards[T],this.playerCards[T+1],this.playerCards[T+2]];af=this.oppCards}}if(aa.attackTags[0]=="i_minicrit"&&this.lastSpecial!="i_minicrit"){this.lastSpecial="i_minicrit";this.lastSpecialTurn=aa.turnNum;this.fightAnimation.addAnimation(new B(this.getView().specialAttack,this.getView().specialAttack.specialAttackIcon,this.getView().specialAttack.specialAttackDescription,"Content/Images2x/UI/icon/icon_0_attack_double.png",Localization.getString("ui_minicriticalhit_uc"),af,ae));this.fightAnimation.addAnimation(new I());var ap=function(au){if(au.turnNum!=this.lastSpecialTurn){this.fightAnimation.addAnimation(new k(af,ae));this.lastSpecial="";this.timerFunctions.length=0}}.bind(this);this.timerFunctions.push(ap)}if(aa.attackTags[0]=="i_criticalhit"){this.lastSpecialTurn=aa.turnNum;this.fightAnimation.addAnimation(new B(this.getView().specialAttack,this.getView().specialAttack.specialAttackIcon,this.getView().specialAttack.specialAttackDescription,"Content/Images2x/UI/icon/icon_0_attack_triple.png",Localization.getString("ui_criticalhit_uc"),af,ae));this.tripleAttackNext=true;var ap=function(au){if(au.turnNum!=this.lastSpecialTurn){this.fightAnimation.addAnimation(new k(af,ae));this.lastSpecial="";this.timerFunctions.length=0}}.bind(this);this.timerFunctions.push(ap)}if(aa.attackTags[0]=="i_doubleattack"&&this.lastSpecial!="i_doubleattack"){this.lastSpecial="i_doubleattack";this.lastSpecialTurn=aa.turnNum;this.fightAnimation.addAnimation(new B(this.getView().specialAttack,this.getView().specialAttack.specialAttackIcon,this.getView().specialAttack.specialAttackDescription,"Content/Images2x/UI/icon/icon_0_crit_mini.png",Localization.getString("ui_doubleattack_uc"),af,ae));this.fightAnimation.addAnimation(new D());var ap=function(au){if(au.turnNum!=this.lastSpecialTurn){this.fightAnimation.addAnimation(new k(af,ae));this.lastSpecial="";this.timerFunctions.length=0}}.bind(this);this.timerFunctions.push(ap)}if(aa.attackTags[0]=="i_tripleattack"&&this.lastSpecial!="i_tripleattack"){this.lastSpecial="i_tripleattack";this.lastSpecialTurn=aa.turnNum;this.fightAnimation.addAnimation(new B(this.getView().specialAttack,this.getView().specialAttack.specialAttackIcon,this.getView().specialAttack.specialAttackDescription,"Content/Images2x/UI/icon/icon_0_crit_hit.png",Localization.getString("ui_tripleattack_uc"),af,ae));this.fightAnimation.addAnimation(new c());var ap=function(au){if(au.turnNum!=this.lastSpecialTurn){this.fightAnimation.addAnimation(new k(af,ae));this.lastSpecial="";this.timerFunctions.length=0}}.bind(this);this.timerFunctions.push(ap)}var Z=Math.floor(aa.attackCardId/3)+1;if(Z==TFGameData.STAT_TYPE.MELEE){var T=(aa.damagedUnit[6]-1)*3;if(!this.tripleAttackNext){this.fightAnimation.addAnimation(new a(ae,ab))}else{this.fightAnimation.addAnimation(new p(ae,ab));this.tripleAttackNext=false}this.fightAnimation.addAnimation(new A(ab))}else{if(Z==TFGameData.STAT_TYPE.RANGE){if(!this.tripleAttackNext){this.fightAnimation.addAnimation(new J(ae,ab,true))}else{this.fightAnimation.addAnimation(new N(ae,ab,true));this.tripleAttackNext=false}this.fightAnimation.addAnimation(new A(ab))}else{if(Z==TFGameData.STAT_TYPE.SPEED){if(!this.tripleAttackNext){this.fightAnimation.addAnimation(new q(ae,ab))}else{this.fightAnimation.addAnimation(new G(ae,ab));this.tripleAttackNext=false}this.fightAnimation.addAnimation(new A(ab))}}}if(aa.turn=="player"){var ac=Math.round(this._getOpponentTotalRemainingHp()/this._oppTotalStartingHp*100);if(Math.random()>0.5&&aa.damagedDealt.length==3){var ar=aa.damagedDealt[1];aa.damagedDealt[1]=aa.damagedDealt[2];aa.damagedDealt[2]=ar}for(var ak in aa.damagedDealt){console.log("BattleViewController > _animateBattle > j : "+ak);var al=aa.damagedDealt[ak].cardPosition;var aj=aa.damagedDealt[ak].remainingHp;var ao=aj/this._oppStartingHP[al]*100;var aq=aa.damagedDealt[ak].damage;var ai=this._oppCurrentHp[al]/this._oppStartingHP[al]*100;this._oppCurrentHp[al]=aj;this.fightAnimation.addAnimation(new w(this.oppCards[al],ao,ai,aq,this.getView().opponentHPBar,ac));if(ak<aa.damagedDealt.length-1){this.fightAnimation.addAnimation(new M(60+80*Math.random()))}if(aj<=0){this.fightAnimation.addAnimation(new o(this.oppCards[al]))}}var U=Math.round(this._getOpponentTotalRemainingHp()/this._oppTotalStartingHp*100);this.fightAnimation.addAnimation(new z(this.getView().opponentHPBar,U,ac))}else{if(aa.turn=="enemy"){var ac=Math.round(this._getPlayerTotalRemainingHp()/this._playerTotalStartingHp*100);if(Math.random()>0.5&&aa.damagedDealt.length==3){var ar=aa.damagedDealt[1];aa.damagedDealt[1]=aa.damagedDealt[2];aa.damagedDealt[2]=ar}for(var ak in aa.damagedDealt){var al=aa.damagedDealt[ak].cardPosition;var aj=aa.damagedDealt[ak].remainingHp;var aq=aa.damagedDealt[ak].damage;var ao=aj/this._playerStartingHP[al]*100;var ai=this._playerCurrentHP[al]/this._playerStartingHP[al]*100;this._playerCurrentHP[al]=aj;this.fightAnimation.addAnimation(new w(this.playerCards[al],ao,ai,aq,this.getView().playerHPBar,ac));if(ak<aa.damagedDealt.length-1){this.fightAnimation.addAnimation(new M(60+80*Math.random()))}if(aj<=0){this.fightAnimation.addAnimation(new o(this.playerCards[al]))}}var U=Math.round(this._getPlayerTotalRemainingHp()/this._playerTotalStartingHp*100);this.fightAnimation.addAnimation(new z(this.getView().playerHPBar,U,ac))}}}else{if(aa.type=="ability"){var W=aa.abilityCardId;if(aa.turn=="enemy"){W+=9}var Y=this.playerCards.concat(this.oppCards);if(aa.ability=="s_focus"){console.log("BattleViewController > _animateBattle > Ability found, adding s_focus effect");this.fightAnimation.addAnimation(new s(this.getView().abilityIcon,this.getView().abilityDescription,"Content/Images8x/UI/icon/icon_0_focus.png",Localization.getString("ui_focusattack_uc")));this.fightAnimation.addAnimation(new F(Y,W));var ap=function(){if(aa.attackTags[0]!="s_focus"){this.fightAnimation.addAnimation(new k());this.lastSpecial="";this.timerFunctions.length=0}}.bind(this);this.timerFunctions.push(ap)}else{if(aa.ability=="s_superiority"){this.fightAnimation.addAnimation(new s(this.getView().abilityIcon,this.getView().abilityDescription,"Content/Images8x/UI/icon/icon_0_superiority.png",Localization.getString("ui_superiorityattack_uc")));this.fightAnimation.addAnimation(new g(Y,W));var ap=function(){if(aa.attackTags[0]!="s_superiority"){this.fightAnimation.addAnimation(new k());this.lastSpecial="";this.timerFunctions.length=0}}.bind(this);this.timerFunctions.push(ap)}else{if(aa.ability=="s_convergence"){this.fightAnimation.addAnimation(new s(this.getView().abilityIcon,this.getView().abilityDescription,"Content/Images8x/UI/icon/icon_0_convergence.png",Localization.getString("ui_convergenceattack_uc")));this.fightAnimation.addAnimation(new L(Y,W));var ap=function(){if(aa.attackTags[0]!="s_convergence"){this.fightAnimation.addAnimation(new k());this.lastSpecial="";this.timerFunctions.length=0}}.bind(this);this.timerFunctions.push(ap)}}}}}}var ah=[];for(var an=0;an<this._playerCurrentHP.length;++an){if(this._playerCurrentHP[an]>0){ah.push(this.playerCards[an])}}for(var an=0;an<this._oppCurrentHp.length;++an){if(this._oppCurrentHp[an]>0){ah.push(this.oppCards[an])}}this.fightAnimation.addAnimation(new E(ah));this.fightAnimation.addAnimation(new C(this.onBattleCompleted.bind(this)));this.fightAnimation.executeAnimation()},onSkip:function(){TFAnalytics.reportGameEvent("PVPBATTLESKIP");if(TFUserData.getTutorialState("battle")=="start"){TFAnalytics.reportGameEvent("BATTLETUTORIAL",{Step:"PVPBATTLESKIP"})}this._skipped=true;this.resetRunningAnimations();this.fightAnimation_intro.destroy();this.fightAnimation.destroy();this.onBattleCompleted()},destroy:function($super){this.fightAnimation.destroy();this.fightAnimation_intro.destroy();r._playingBattle=null;$super();TFUserData.blockBack=false},$preloadBattleCards:function(){for(var T=0;T<9;T++){var U=TFUserData.getOpponentDeck()["status"+(Math.floor(T/3)+1)][T%3].gearDefinitionId;var S=l.getCardImagePath(U);if(!v._dynamicManifestData[n.getCorrectImagePath(S)]){console.log("BattleViewController > $preloadBattleCards > Card : "+U+" not found, preload failed")}else{v.downloadAsset(n.getCorrectImagePath(S),function(V){console.log("BattleViewController > $preloadBattleCards > Asset : "+V+" ready")})}}for(var T=0;T<9;T++){var U=TFUserData.getDeckCard(Math.floor(T/3)+1,T%3,TFGameData.CARD_TYPE.TRANSFORMER).definitionId;var S=l.getCardImagePath(U);if(!v._dynamicManifestData[n.getCorrectImagePath(S)]){console.log("BattleViewController > $preloadBattleCards > Card : "+U+" not found, preload failed")}else{v.downloadAsset(n.getCorrectImagePath(S),function(V){console.log("BattleViewController > $preloadBattleCards > Asset : "+V+" ready")})}}}})}};__ngs._9p={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var d=__ngs.r_(__ngs._7p).View;var b=__ngs.r_(__ngs._eq).LandingViewDefinition;a.LandingView=d.subclass({classname:"LandingView",initialize:function($super,e,g){$super(e,b);console.log("<<LandingView.initialize...!")},destroy:function($super){$super()}})}};__ngs._9q={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._7p).View;a.LandingNewsView=c.subclass({classname:"LandingNewsView",initialize:function($super,d){console.log("LandingNewsView > initialize");$super(d,"LandingNewsViewDefinition",function(){}.bind(this))},updateWithEvent:function(d){console.log("LandingNewsView > updateWithEvent > eventId="+d);if(!d){return}var g="ui_eventname1_"+d+"_uc";var e=Localization.getString(g);if(e==g){e=Localization.getString("ui_eventname1_uc")}this.banner.textTopLeft.setText(e);var g="ui_eventname2_"+d+"_uc";var e=Localization.getString(g);if(e==g){e=Localization.getString("ui_eventname2_uc")}this.banner.textBottomRight.setText(e);TFUtils.changeImageOnSprite(this.banner.banner1,this.banner.banner1.info.asset_dir+"/"+d+"/"+(this.banner.banner1.info["asset_name_"+d]?this.banner.banner1.info["asset_name_"+d]:this.banner.banner1.info.asset_name));TFUtils.changeImageOnSprite(this.banner.banner2,this.banner.banner2.info.asset_dir+"/"+d+"/"+(this.banner.banner2.info["asset_name_"+d]?this.banner.banner2.info["asset_name_"+d]:this.banner.banner2.info.asset_name));TFUtils.changeImageOnSprite(this.banner.banner2_overlay,this.banner.banner2_overlay.info.asset_dir+"/"+d+"/"+(this.banner.banner2_overlay.info["asset_name_"+d]?this.banner.banner2_overlay.info["asset_name_"+d]:this.banner.banner2_overlay.info.asset_name));TFUtils.changeImageOnSprite(this.banner.banner3,this.banner.banner3.info.asset_dir+"/"+d+"/"+(this.banner.banner3.info["asset_name_"+d]?this.banner.banner3.info["asset_name_"+d]:this.banner.banner3.info.asset_name))},destroy:function($super){$super()}})}};__ngs._9r={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._7p).View;var a=__ngs.r_(__ngs._er).FriendsViewDefinition;b.FriendsView=d.subclass({classname:"FriendsView",initialize:function($super,e){$super(e,a);console.log("-----------------------");console.log("-----------------------this._viewData  "+this["messageTextArea"]);this._popUpView=new UI.View();this._popUpView.setFrame([0,50,UI.Window.getWidth(),UI.Window.getHeight()]);this._popUpView._buttonOk=this["messageTextArea_button"];this._popUpView._textArea=this["messageTextArea"];this._popUpView.addChild(this._popUpView._textArea,10);this._popUpView.addChild(this._popUpView._buttonOk,20);this._popUpView.setVisible(false);UI.Window.document.addChild(this._popUpView)},destroy:function($super){$super();UI.Window.document.removeChild(this._popUpView);this._popUpView.removeChild(this._popUpView._textArea);this._popUpView.removeChild(this._popUpView._buttonOk);this._popUpView._textArea.destroy();this._popUpView._buttonOk.destroy();this._popUpView.destroy()}})}};__ngs._9s={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._7p).View;var d=__ngs.r_(__ngs._es).FriendsCellViewDefinition;a.FriendsCellView=c.subclass({classname:"FriendsCellView",initialize:function($super,e){$super(e,d)},destroy:function($super){$super()}})}};__ngs._9t={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var d=__ngs.r_(__ngs._7p).View;var b=__ngs.r_(__ngs._et).PaginationCellViewDefinition;a.PaginationCellView=d.subclass({classname:"PaginationCellView",initialize:function($super,e){$super(e,b)},destroy:function($super){$super()}})}};__ngs._9u={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var d=__ngs.r_(__ngs._7p).View;var c=__ngs.r_(__ngs._eu).FriendListTopCellViewDefinition;a.FriendListTopCellView=d.subclass({classname:"FriendListTopCellView",initialize:function($super,e){$super(e,c)},destroy:function($super){$super()}})}};__ngs._9v={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._7p).View;var e=__ngs.r_(__ngs._ev).FriendProfileViewDefinition;var a=__ngs.r_(__ngs._89).CardThumbnailView;b.FriendProfileView=d.subclass({classname:"FriendProfileView",initialize:function($super,g){$super(g,e)},destroy:function($super){$super()},fillUpScreen:function(){var m=this._parentController.getLeaderCard();this.cardThumbnail=new a(this,m,this.cardHolder.info.card_w,this.cardHolder.info.card_h,{leader:true,showSpinner:true});this.cardHolder.addChild(this.cardThumbnail);this.cardThumbnail.disableTap();var h=this._parentController.getPlayerGamerTag();this.playerName.setText(h);var n=this._parentController.getLevelProgress();console.log("FriendProfileView > fillUpScreen > levelProgress : "+n);this.xpBar.setProgress(n*100);var p=this._parentController.getLevel();this.level.setText(p);var g=this._parentController.getTransformerCards();this.transformerCards.setText(g);var l=this._parentController.getWeaponCards();this.weaponCards.setText(l);var o=this._parentController.getWins();if(o){this.wins.setText(o)}else{this.wins.setText("0")}var k=this._parentController.getLosses();if(k){this.losses.setText(k)}else{this.losses.setText("0")}if(this._parentController.isCheered()){this.cheerButton.setText(Localization.getString("ui_cheered_uc"));this.cheerButton.setEnabled(false)}},setAvatar:function(g){TFUtils.changeImageOnSprite(this.avatarImage,g)}})}};__ngs._9w={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var d=__ngs.r_(__ngs._7p).View;var c=__ngs.r_(__ngs._ew).BottomHudFriendsViewDefinition;a.BottomHudFriendsView=d.subclass({classname:"BottomHudFriendsView",initialize:function($super,e){$super(e,c)},destroy:function($super){$super()},setPressedButton:function(e){}})}};__ngs._9x={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var d=__ngs.r_(__ngs._7p).View;var c=__ngs.r_(__ngs._ex).SearchFriendsViewDefinition;a.SearchFriendsView=d.subclass({classname:"SearchFriendsView",initialize:function($super,e){$super(e,c);UI.Window.document.addChild(this["searchTextArea"]);this["searchTextArea"].setVisible(false);this["searchTextArea"].setEnabled(false);this["searchTextArea"].setInputType(UI.Commands.InputType.None)},destroy:function($super){$super();UI.Window.document.removeChild(this["searchTextArea"])},showSearchBox:function(e){this["searchTextArea"].setVisible(e);this["searchTextArea"].setEnabled(e);this.searchBoxButtonGroup.setVisible(e);this.searchBoxButtonGroup.searchConfirmButton.setEnabled(e);this.searchBoxButtonGroup.searchCancelButton.setEnabled(e);this.totalAlliesGroup.setVisible(!e);this.allyPointGroup.setVisible(!e);this.searchByNameButtonGroup.setVisible(!e);this.searchByNameButtonGroup.searchByNameButton.setEnabled(!e);this.searchByLevelButtonGroup.setVisible(!e);this.searchByLevelButtonGroup.searchByLevelButton.setEnabled(!e);this.pendingInvitesButtonGroup.setVisible(!e);this.pendingInvitesButtonGroup.pendingInvitesButton.setEnabled(!e);this.searchFrame.setVisible(e);if(!e){this["searchTextArea"].setText("")}},getTextAreaText:function(e){return this["searchTextArea"].getText()}})}};__ngs._9y={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var d=__ngs.r_(__ngs._7p).View;var c=__ngs.r_(__ngs._ey).ListMessageViewDefinition;a.ListMessageView=d.subclass({classname:"ListMessageView",initialize:function($super,e,g){this.message=g;$super(e,c);this.messageLabel.setText(Localization.getString(this.message))},destroy:function($super){$super()}})}};__ngs._9z={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._7p).View;var a=__ngs.r_(__ngs._ez).BottomHudSearchFriendsViewDefinition;b.BottomHudSearchFriendsView=d.subclass({classname:"BottomHudSearchFriendsView",initialize:function($super,e){$super(e,a)},destroy:function($super){$super()},setPressedButton:function(e){}})}};__ngs._a0={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var d=__ngs.r_(__ngs._7p).View;var c=__ngs.r_(__ngs._f0).PendingInvitesViewDefinition;a.PendingInvitesView=d.subclass({classname:"PendingInvitesView",initialize:function($super,e){$super(e,c)},destroy:function($super){$super()}})}};__ngs._a1={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var e=__ngs.r_(__ngs._7p).View;var d=__ngs.r_(__ngs._f1).PendingProfileViewDefinition;var a=__ngs.r_(__ngs._89).CardThumbnailView;b.PendingProfileView=e.subclass({classname:"PendingProfileView",initialize:function($super,g){$super(g,d)},destroy:function($super){$super()},fillUpScreen:function(){var m=this._parentController.getLeaderCard();this.cardThumbnail=new a(this,m,224,300,{leader:true,showSpinner:true});this.cardHolder.addChild(this.cardThumbnail);var h=this._parentController.getPlayerGamerTag();this.playerName.setText(h);var n=this._parentController.getLevelProgress();console.log("PendingProfileView > fillUpScreen > levelProgress : "+n);this.xpBar.setProgress(n*100);var p=this._parentController.getLevel();this.level.setText(p);var g=this._parentController.getTransformerCards();this.transformerCards.setText(g);var l=this._parentController.getWeaponCards();this.weaponCards.setText(l);var o=this._parentController.getWins();if(o){this.wins.setText(o)}else{this.wins.setText("0")}var k=this._parentController.getLosses();if(k){this.losses.setText(k)}else{this.losses.setText("0")}},setAvatar:function(g){TFUtils.changeImageOnSprite(this.avatarImage,g)}})}};__ngs._a2={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._7p).View;var a=__ngs.r_(__ngs._f2).SearchFriendsResultViewDefinition;b.SearchFriendsResultView=d.subclass({classname:"SearchFriendsResultView",initialize:function($super,e){$super(e,a)},destroy:function($super){$super()}})}};__ngs._a3={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var e=__ngs.r_(__ngs._7p).View;var b=__ngs.r_(__ngs._f3).UnknownProfileViewDefinition;var a=__ngs.r_(__ngs._89).CardThumbnailView;c.UnknownProfileView=e.subclass({classname:"UnknownProfileView",initialize:function($super,g){$super(g,b)},destroy:function($super){$super()},fillUpScreen:function(){var m=this._parentController.getLeaderCard();this.cardThumbnail=new a(this,m,224,300,{leader:true,showSpinner:true});this.cardHolder.addChild(this.cardThumbnail);var h=this._parentController.getPlayerGamerTag();this.playerName.setText(h);var n=this._parentController.getLevelProgress();console.log("UnknownProfileView > fillUpScreen > levelProgress : "+n);this.xpBar.setProgress(n*100);var p=this._parentController.getLevel();this.level.setText(p);var g=this._parentController.getTransformerCards();if(g){this.transformerCards.setText(g)}else{this.transformerCards.setText("0")}var l=this._parentController.getWeaponCards();if(l){this.weaponCards.setText(l)}else{this.weaponCards.setText("0")}var o=this._parentController.getWins();if(o){this.wins.setText(o)}else{this.wins.setText("0")}var k=this._parentController.getLosses();if(k){this.losses.setText(k)}else{this.losses.setText("0")}},setAvatar:function(g){TFUtils.changeImageOnSprite(this.avatarImage,g)}})}};__ngs._a4={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._7p).View;var a=__ngs.r_(__ngs._f4).BattleResultViewDefinition;b.BattleResultView=d.subclass({classname:"BattleResultView",initialize:function($super,e){$super(e,a)},destroy:function($super){$super()}})}};__ngs._a5={_c:null,_d:function(){this._c={exports:{motions:{white:{source:[{x:-2,y:-1,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0},{y:1,alpha:1,index:42,x:0},{y:1,alpha:0,index:52,x:0},{alpha:0,index:99,x:0,y:1}]},banner_text:{source:[{x:132,y:368,scaleX:1,scaleY:1,frameRate:24,offsetX:190.25,offsetY:68.69999999999999,alpha:1}],Keyframe:[{alpha:0,index:0,scaleX:1,scaleY:1},{x:0,y:-50,scaleX:3.047,scaleY:3.047,alpha:0,index:42},{x:-1,y:-16,scaleX:1.699,scaleY:1.699,alpha:0.67,index:44},{x:-1,y:-16,scaleX:1,scaleY:1,alpha:1,index:45},{index:99,x:-1,y:-16,scaleX:1,scaleY:1}]},banner_battle_result:{source:[{x:-2,y:451,scaleX:1,scaleY:1,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0,scaleX:1,scaleY:1},{alpha:0,index:41,x:0,y:0,scaleX:1,scaleY:1},{x:-569,y:-201,scaleX:7.847,scaleY:2.77,alpha:0,index:42},{x:-246,y:-87,scaleX:5.002,scaleY:1.766,alpha:0.67,index:44},{x:-246,y:-87,scaleX:2.829,scaleY:1,alpha:1,index:45},{alpha:1,index:99,x:-246,y:-87,scaleX:2.829,scaleY:1}]},fx_b_3:{source:[{x:86,y:167,scaleX:1,scaleY:1,rotation:0.7,frameRate:24,offsetX:0.09999999999999432,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0,rotation:0.7,scaleX:1,scaleY:1},{x:-1,y:0,alpha:0,index:32,rotation:0.7,scaleX:1,scaleY:1},{x:-24,y:-24,scaleX:1.3063700707785642,scaleY:1.3063700707785642,alpha:1,index:33,rotation:0.7},{x:-17,y:-17,scaleX:1.0990899898887765,scaleY:1.0990899898887765,alpha:0.71,index:43,rotation:0.7},{x:-1,y:0,scaleX:0.5813953488372092,scaleY:0.5813953488372092,alpha:0,index:47,rotation:0.7},{alpha:0,index:48,x:-1,y:0,rotation:0.7,scaleX:0.5813953488372092,scaleY:0.5813953488372092},{x:-40,y:87,scaleX:0.4499494438827098,scaleY:0.4499494438827098,rotation:-1,alpha:0,index:99}]},fx_a_3:{source:[{x:-55,y:465,scaleX:1,scaleY:1,rotation:0,frameRate:24,offsetX:12.100000000000001,offsetY:-298.85,alpha:1}],Keyframe:[{alpha:0,index:0,rotation:0,scaleX:1,scaleY:1},{x:15,y:-114,scaleX:1.292,scaleY:1.292,rotation:1,alpha:0,index:30},{x:10,y:-127,alpha:1,index:31,rotation:1,scaleX:1.292,scaleY:1.292},{x:153,y:-75,scaleX:0.596,scaleY:0.596,rotation:46,index:32},{x:15,y:-114,scaleX:1.292,scaleY:1.292,rotation:1,alpha:0,index:33},{x:15,y:-114,scaleX:1,scaleY:1,rotation:0,alpha:0,index:99}]},fx_b_2:{source:[{x:138,y:176,scaleX:1,scaleY:1,rotation:20.2,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0,rotation:20.2,scaleX:1,scaleY:1},{x:0,alpha:0,index:29,y:0,rotation:20.2,scaleX:1,scaleY:1},{x:-14,y:-31,scaleX:1.7609254498714655,scaleY:1.7609254498714655,alpha:1,index:30,rotation:20.2},{x:-10,y:-22,scaleX:1.4820051413881747,scaleY:1.4820051413881747,alpha:0.71,index:40,rotation:20.2},{x:0,y:-22,scaleX:0.7827763496143958,scaleY:0.7827763496143958,alpha:0,index:44,rotation:20.2},{alpha:0,index:45,x:0,y:-22,rotation:20.2,scaleX:0.7827763496143958,scaleY:0.7827763496143958},{x:-92,y:78,scaleX:0.5719794344473008,scaleY:0.5719794344473008,rotation:-20,alpha:0,index:99}]},fx_a_2:{source:[{x:-55,y:465,scaleX:1,scaleY:1,rotation:0,frameRate:24,offsetX:12.100000000000001,offsetY:-298.85,alpha:1}],Keyframe:[{alpha:0,index:0,rotation:0,scaleX:1,scaleY:1},{x:108,y:-145,scaleX:1.37,scaleY:1.37,rotation:20,alpha:0,index:27},{y:-159,alpha:1,index:28,x:108,rotation:20,scaleX:1.37,scaleY:1.37},{x:232,y:-57,scaleX:0.631,scaleY:0.631,rotation:65,index:29},{x:108,y:-145,scaleX:1.37,scaleY:1.37,rotation:20,alpha:0,index:30},{x:108,y:-145,scaleX:1,scaleY:1,rotation:0,alpha:0,index:99}]},fx_b_1:{source:[{x:46,y:254,scaleX:1,scaleY:1,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0,scaleX:1,scaleY:1},{alpha:0,index:25,x:0,y:0,scaleX:1,scaleY:1},{x:-18,y:-18,scaleX:1.002004008016032,scaleY:1.002004008016032,alpha:1,index:26},{x:-13,y:-13,scaleX:0.842685370741483,scaleY:0.842685370741483,alpha:0.71,index:36},{x:-13,y:-13,scaleX:0.44589178356713427,scaleY:0.44589178356713427,alpha:0,index:40},{alpha:0,index:41,x:-13,y:-13,scaleX:0.44589178356713427,scaleY:0.44589178356713427},{alpha:0,index:99,x:-13,y:-13,scaleX:0.44589178356713427,scaleY:0.44589178356713427}]},fx_a_1:{source:[{x:-55,y:465,scaleX:1,scaleY:1,rotation:0,frameRate:24,offsetX:12.100000000000001,offsetY:-298.85,alpha:1}],Keyframe:[{alpha:0,index:0,rotation:0,scaleX:1,scaleY:1},{alpha:0,index:23,x:0,y:0,rotation:0,scaleX:1,scaleY:1},{x:-5,y:-14,alpha:1,index:24,rotation:0,scaleX:1,scaleY:1},{x:106,y:31,scaleX:0.461,scaleY:0.461,rotation:45,index:25},{x:106,y:31,scaleX:1,scaleY:1,rotation:0,alpha:0,index:26},{alpha:0,index:99,x:106,y:31,rotation:0,scaleX:1,scaleY:1}]},player_them:{source:[{x:24,y:112,scaleX:1,scaleY:1,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0,scaleX:1,scaleY:1},{alpha:0,index:5,x:0,y:0,scaleX:1,scaleY:1},{alpha:0,index:6,x:0,y:0,scaleX:1,scaleY:1},{alpha:1,index:11,x:0,y:0,scaleX:1,scaleY:1},{index:23,x:0,y:0,scaleX:1,scaleY:1},{y:8,index:24,x:0,scaleX:1,scaleY:1},{y:8,index:26,x:0,scaleX:1,scaleY:1},{y:8,index:27,x:0,scaleX:1,scaleY:1},{y:8,index:29,x:0,scaleX:1,scaleY:1},{y:8,index:30,x:0,scaleX:1,scaleY:1},{y:8,index:32,x:0,scaleX:1,scaleY:1},{index:44,x:0,y:8,scaleX:1,scaleY:1},{x:31,y:42,scaleX:0.884,scaleY:0.884,index:45},{x:-14,y:-19,scaleX:1.052,scaleY:1.052,index:47},{x:13,y:17,scaleX:0.953,scaleY:0.953,index:49},{x:-4,y:-6,scaleX:1.017,scaleY:1.017,index:51},{x:-4,y:-6,scaleX:1,scaleY:1,index:53},{index:99,x:-4,y:-6,scaleX:1,scaleY:1}]},player_broken_right:{source:[{x:352,y:192,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0},{alpha:0,index:67,x:0,y:0},{x:-72,y:-94,alpha:1,index:68},{alpha:0,index:69,x:-72,y:-94},{alpha:1,index:72,x:-72,y:-94},{alpha:0,index:73,x:-72,y:-94},{alpha:0,index:86,x:-72,y:-94},{y:-93,alpha:0,index:87,x:-72},{alpha:1,index:95,x:-72,y:-93},{index:99,x:-72,y:-93}]},player_broken_middle:{source:[{x:21,y:192,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0},{alpha:0,index:67,x:0,y:0},{x:-72,y:-94,alpha:1,index:68},{alpha:0,index:69,x:-72,y:-94},{alpha:1,index:72,x:-72,y:-94},{alpha:0,index:73,x:-72,y:-94},{alpha:0,index:86,x:-72,y:-94},{y:-93,alpha:0,index:87,x:-72},{alpha:1,index:95,x:-72,y:-93},{index:99,x:-72,y:-93}]},player_broken_lit_right:{source:[{x:251,y:192,scaleX:1,scaleY:1,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0,scaleX:1,scaleY:1},{alpha:0,index:10,x:0,y:0,scaleX:1,scaleY:1},{x:29,y:-94,alpha:1,index:11,scaleX:1,scaleY:1},{index:44,x:29,y:-94,scaleX:1,scaleY:1},{x:31,y:-50,scaleX:0.884,scaleY:0.884,index:45},{x:28,y:-114,scaleX:1.052,scaleY:1.052,index:47},{x:29,y:-77,scaleX:0.953,scaleY:0.953,index:49},{x:28,y:-100,scaleX:1.017,scaleY:1.017,index:51},{x:29,y:-94,scaleX:1,scaleY:1,index:53},{index:66,x:29,y:-94,scaleX:1,scaleY:1},{index:67,x:29,y:-94,scaleX:1,scaleY:1},{alpha:0,index:68,x:29,y:-94,scaleX:1,scaleY:1},{alpha:1,index:69,x:29,y:-94,scaleX:1,scaleY:1},{index:70,x:29,y:-94,scaleX:1,scaleY:1},{index:71,x:29,y:-94,scaleX:1,scaleY:1},{alpha:0,index:72,x:29,y:-94,scaleX:1,scaleY:1},{alpha:1,index:73,x:29,y:-94,scaleX:1,scaleY:1},{index:86,x:29,y:-94,scaleX:1,scaleY:1},{index:91,x:29,y:-94,scaleX:1,scaleY:1},{alpha:0,index:99,x:29,y:-94,scaleX:1,scaleY:1}]},player_broken_lit_middle:{source:[{x:-80,y:192,scaleX:1,scaleY:1,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0,scaleX:1,scaleY:1},{alpha:0,index:10,x:0,y:0,scaleX:1,scaleY:1},{x:29,y:-94,alpha:1,index:11,scaleX:1,scaleY:1},{index:44,x:29,y:-94,scaleX:1,scaleY:1},{x:70,y:-50,scaleX:0.884,scaleY:0.884,index:45},{x:11,y:-114,scaleX:1.052,scaleY:1.052,index:47},{x:45,y:-77,scaleX:0.953,scaleY:0.953,index:49},{x:23,y:-100,scaleX:1.017,scaleY:1.017,index:51},{x:29,y:-94,scaleX:1,scaleY:1,index:53},{index:66,x:29,y:-94,scaleX:1,scaleY:1},{index:67,x:29,y:-94,scaleX:1,scaleY:1},{alpha:0,index:68,x:29,y:-94,scaleX:1,scaleY:1},{alpha:1,index:69,x:29,y:-94,scaleX:1,scaleY:1},{index:70,x:29,y:-94,scaleX:1,scaleY:1},{index:71,x:29,y:-94,scaleX:1,scaleY:1},{alpha:0,index:72,x:29,y:-94,scaleX:1,scaleY:1},{alpha:1,index:73,x:29,y:-94,scaleX:1,scaleY:1},{index:86,x:29,y:-94,scaleX:1,scaleY:1},{index:91,x:29,y:-94,scaleX:1,scaleY:1},{alpha:0,index:99,x:29,y:-94,scaleX:1,scaleY:1}]},player_self:{source:[{x:449,y:576,scaleX:1,scaleY:1,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0,scaleX:1,scaleY:1},{alpha:0,index:5,x:0,y:0,scaleX:1,scaleY:1},{alpha:0,index:6,x:0,y:0,scaleX:1,scaleY:1},{alpha:1,index:11,x:0,y:0,scaleX:1,scaleY:1},{index:44,x:0,y:0,scaleX:1,scaleY:1},{x:-14,y:-13,scaleX:0.878727634194831,scaleY:0.878323108384458,index:45},{x:12,y:5,scaleX:1.0208747514910537,scaleY:1.021472392638037,index:47},{x:-5,y:-6,scaleX:0.9433399602385686,scaleY:0.9591002044989775,index:49},{x:4,y:1,scaleX:1.0029821073558647,scaleY:1.0184049079754602,index:51},{x:4,y:1,scaleX:1,scaleY:1,index:53},{index:99,x:4,y:1,scaleX:1,scaleY:1}]},player_frame_middle:{source:[{x:266,y:573,scaleY:1,frameRate:24,offsetX:0,offsetY:0,alpha:1,scaleX:1}],Keyframe:[{alpha:0,index:0,scaleX:1,scaleY:1},{alpha:0,index:10,x:0,y:0,scaleX:1,scaleY:1},{alpha:1,index:11,x:0,y:0,scaleX:1,scaleY:1},{alpha:1,index:44,x:0,y:0,scaleX:1,scaleY:1},{x:-5,y:-2,scaleY:0.835,alpha:1,index:45,scaleX:1},{x:-7,y:14,scaleY:1.013,index:47,scaleX:1},{x:-3,y:6,scaleY:0.948,index:49,scaleX:1},{x:-3,y:2,scaleY:1,index:51,scaleX:1},{y:2,index:53,x:-3,scaleX:1,scaleY:1},{index:99,x:-3,y:2,scaleX:1,scaleY:1}]},player_frame_right:{source:[{x:35,y:573,scaleX:1,scaleY:1,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0,scaleX:1,scaleY:1},{alpha:0,index:10,x:0,y:0,scaleX:1,scaleY:1},{alpha:1,index:11,x:0,y:0,scaleX:1,scaleY:1},{index:44,x:0,y:0,scaleX:1,scaleY:1},{x:33,y:-2,scaleX:0.835920177383592,scaleY:0.835920177383592,index:45},{x:-11,y:14,scaleX:1.0155210643015522,scaleY:1.0155210643015522,index:47},{x:9,y:6,scaleX:0.9490022172949002,scaleY:0.9490022172949002,index:49},{x:-3,y:2,scaleX:1,scaleY:1,index:51},{y:2,index:53,x:-3,scaleX:1,scaleY:1},{index:99,x:-3,y:2,scaleX:1,scaleY:1}]},dropshadow_black_bottom:{source:[{x:0,y:738,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0},{alpha:0,index:10,x:0,y:0},{alpha:1,index:11,x:0,y:0},{index:99,x:0,y:0}]},dropshadow_black_top:{source:[{x:1,y:0,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0},{alpha:0,index:10,x:0,y:0},{alpha:1,index:11,x:0,y:0},{alpha:1,index:99,x:0,y:0}]},gate_lower:{source:[{x:0,y:-568,scaleX:1,scaleY:1,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0,scaleX:1,scaleY:1},{alpha:0,index:2,x:0,y:0,scaleX:1,scaleY:1},{alpha:1,index:3,x:0,y:0,scaleX:1,scaleY:1},{y:500,index:11,x:0,scaleX:1,scaleY:1},{index:44,x:0,y:500,scaleX:1,scaleY:1},{x:34,y:563,scaleX:0.884,scaleY:0.884,index:45},{x:-15,y:472,scaleX:1.052,scaleY:1.052,index:47},{x:14,y:525,scaleX:0.953,scaleY:0.953,index:49},{x:-5,y:491,scaleX:1.017,scaleY:1.017,index:51},{x:-5,y:500,scaleX:1,scaleY:1,index:53},{index:99,x:-5,y:500,scaleX:1,scaleY:1}]},gate_upper:{source:[{x:0,y:959,scaleX:1,scaleY:1,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0,scaleX:1,scaleY:1},{alpha:0,index:2,x:0,y:0,scaleX:1,scaleY:1},{alpha:1,index:3,x:0,y:0,scaleX:1,scaleY:1},{y:-512,index:11,x:0,scaleX:1,scaleY:1},{index:44,x:0,y:-512,scaleX:1,scaleY:1},{x:34,y:-509,scaleX:0.884,scaleY:0.884,index:45},{x:-15,y:-514,scaleX:1.052,scaleY:1.052,index:47},{x:14,y:-511,scaleX:0.953,scaleY:0.953,index:49},{x:-5,y:-513,scaleX:1.017,scaleY:1.017,index:51},{x:-5,y:-512,scaleX:1,scaleY:1,index:53},{index:99,x:-5,y:-512,scaleX:1,scaleY:1}]}}}}}};__ngs._a6={_c:null,_d:function(){this._c={exports:{motions:{banner_text:{source:[{x:132,y:368,scaleX:1,scaleY:1,frameRate:24,offsetX:190.25,offsetY:68.69999999999999,alpha:1}],Keyframe:[{alpha:0,index:0,scaleX:1,scaleY:1},{alpha:0,index:23,x:0,y:0,scaleX:1,scaleY:1},{x:0,scaleX:2.65,scaleY:2.65,alpha:0,index:24,y:0},{x:0,scaleX:1.684,scaleY:1.684,alpha:1,index:26,y:0},{scaleX:1,scaleY:1,index:27,x:0,y:0},{index:29,x:0,y:0,scaleX:1,scaleY:1}]},banner_battle_result:{source:[{x:-2,y:451,scaleX:1,scaleY:1,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0,scaleX:1,scaleY:1},{alpha:0,index:23,x:0,y:0,scaleX:1,scaleY:1},{x:-571,y:-189,scaleX:7.789,scaleY:2.753,alpha:0,index:24},{x:-173,y:-87,scaleX:4.263,scaleY:1.507,alpha:0,index:26},{x:-173,y:-87,scaleX:2.829,scaleY:1,alpha:1,index:27},{index:45,x:-173,y:-87,scaleX:2.829,scaleY:1}]},player_them:{source:[{x:24,y:112,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0},{alpha:0,index:10,x:0,y:0},{alpha:1,index:11,x:0,y:0},{alpha:1,index:29,x:0,y:0}]},player_2_frame_right:{source:[{x:251,y:192,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0},{alpha:0,index:10,x:0,y:0},{x:29,y:-94,alpha:1,index:11},{index:29,x:29,y:-94}]},player_2_frame_middle:{source:[{x:-80,y:192,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0},{alpha:0,index:10,x:0,y:0},{x:29,y:-94,alpha:1,index:11},{index:29,x:29,y:-94}]},player_self:{source:[{x:449,y:576,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0},{alpha:0,index:5,x:0,y:0},{alpha:0,index:6,x:0,y:0},{alpha:1,index:11,x:0,y:0},{index:29,x:0,y:0}]},player_frame_middle:{source:[{x:266,y:573,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0},{alpha:0,index:10,x:0,y:0},{alpha:1,index:11,x:0,y:0},{index:29,x:0,y:0}]},player_frame_right:{source:[{x:35,y:573,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0},{alpha:0,index:10,x:0,y:0},{alpha:1,index:11,x:0,y:0},{index:29,x:0,y:0}]},dropshadow_black_bottom:{source:[{x:0,y:738,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0},{alpha:0,index:10,x:0,y:0},{alpha:1,index:11,x:0,y:0},{index:29,x:0,y:0}]},dropshadow_black_top:{source:[{x:1,y:0,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0},{alpha:0,index:10,x:0,y:0},{alpha:1,index:11,x:0,y:0},{index:29,x:0,y:0}]},gate_lower:{source:[{x:0,y:-568,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0},{alpha:0,index:2,x:0,y:0},{alpha:1,index:3,x:0,y:0},{y:500,index:11,x:0},{index:29,x:0,y:500}]},gate_upper:{source:[{x:0,y:959,frameRate:24,offsetX:0,offsetY:0,alpha:1}],Keyframe:[{alpha:0,index:0},{alpha:0,index:2,x:0,y:0},{alpha:1,index:3,x:0,y:0},{y:-512,index:11,x:0},{index:29,x:0,y:-512}]}}}}}};__ngs._a7={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var d=__ngs.r_(__ngs._7p).View;var c=__ngs.r_(__ngs._f5).BossResultViewDefinition;a.BossResultView=d.subclass({classname:"BossResultView",initialize:function($super,e){$super(e,c)},destroy:function($super){$super()}})}};__ngs._a8={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._7p).View;var a=__ngs.r_(__ngs._f6).RequestFriendsViewDefinition;b.RequestFriendsView=d.subclass({classname:"RequestFriendsView",initialize:function($super,e){$super(e,a)},destroy:function($super){$super()}})}};__ngs._a9={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._7p).View;var d=__ngs.r_(__ngs._f7).GreetsViewDefinition;a.GreetsView=c.subclass({classname:"GreetsView",initialize:function($super,e){$super(e,d)},destroy:function($super){$super()}})}};__ngs._aa={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var b=__ngs.r_(__ngs._8v).GLScrollView;var d=__ngs.r_(__ngs._7p).View;var e=__ngs.r_(__ngs._f8).FusionSelectionViewDefinition;a.FusionSelectionView=b.subclass({classname:"FusionSelectionView",initialize:function($super,g,h){$super(g,e);console.log("<<FusionSelectionView.initialize...!")},destroy:function($super){$super()}})}};__ngs._ab={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.FusionSelectCellViewDefinition={images:[{name:"background",pos_x:-42,pos_y:20,size_x:180,size_y:160,asset:"Content/Images8x/UI/Cell/store_cell_middle.png"},{name:"background2",anchor_x:1,anchor_y:0,pos_x:445,pos_y:0,size_x:280,size_y:195,asset:""},{name:"background3",anchor_x:1,anchor_y:0,pos_x:640,pos_y:0,size_x:195,size_y:195,asset:""},{name:"cardcellline",pos_x:295,pos_y:85,size_x:6,size_y:80,asset:"Content/Images8x/UI/Cell/card_cell_line.png"},{name:"cardcellline1",pos_x:430,pos_y:85,size_x:6,size_y:80,asset:"Content/Images8x/UI/Cell/card_cell_line.png"},{name:"vaultCardAlert",pos_x:46,pos_y:32,size_x:100,size_y:120,asset:"Content/Images8x/UI/Prompt/reg_header_1.png",visible:false,depth:3}],buttons:[{name:"card",pos_x:94,pos_y:83,size_x:154,size_y:206,asset:"",action:"",sound:["click_high"],visible:false,info:{}},{name:"selectButton",pos_x:546,pos_y:86,size_x:90,size_y:84,asset:"Content/Images8x/UI/button/btn_sml_add.png",fontType:"Content/Fonts/SFElectrotome.ttf",font_size:24,action:"selectButton",sound:["click_flat"],info:{cardId:0}},{name:"checkBox",pos_x:546,pos_y:86,size_x:90,size_y:84,action:"onCheck",sound:["click_flat"],multiAsset:{onAsset:"Content/Images8x/UI/button/btn_sml_add.png",offAsset:"Content/Images8x/UI/button/btn_sml_add.png",selectedAsset:"Content/Images8x/UI/button/btn_sml_remove.png"},asset:"Content/Images8x/UI/button/btn_sml_add.png",info:{id:0,toggleState:0}},{name:"vaultButton",pos_x:570,pos_y:90,size_x:74,size_y:74,asset:"Content/Images8x/UI/icon/icon_0_overflow.png",fontType:"Content/Fonts/SFElectrotome.ttf",font_size:24,action:"onVaultButton",sound:["click_flat"],visible:false,info:{cardId:0}}],tfbuttons:[],labels:[{name:"rarity",pos_x:575,pos_y:20,size_x:160,size_y:60,font_size:23,text:"",fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",visible:false},{name:"tstatus1Label2",pos_x:190,pos_y:105,size_x:120,size_y:60,color:[170,224,255],font_size:28,text:"ui_attack_uc",fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",anchor_x:0,anchor_y:0.5},{name:"tstatus1Label",pos_x:320,pos_y:105,size_x:120,size_y:60,color:[170,224,255],font_size:28,text:"ui_health_uc",fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",anchor_x:0,anchor_y:0.5},{name:"tstatus1Label3",pos_x:450,pos_y:105,size_x:120,size_y:60,color:[170,224,255],font_size:28,text:"ui_defense_uc",fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",anchor_x:0,anchor_y:0.5},{name:"status2",pos_x:190,pos_y:135,size_x:130,size_y:60,text:"",font_size:32,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",color:[170,224,255],anchor_x:0,anchor_y:0.5},{name:"status1",pos_x:320,pos_y:135,size_x:130,size_y:60,text:"",font_size:32,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",color:[170,224,255],anchor_x:0,anchor_y:0.5},{name:"status3",pos_x:450,pos_y:135,size_x:130,size_y:60,text:"",font_size:32,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",color:[170,224,255],anchor_x:0,anchor_y:0.5},{name:"name",anchor_x:0,anchor_y:0.5,pos_x:190,pos_y:20,size_x:800,size_y:60,font_size:32,text:"",fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left"},{name:"level",pos_x:265,pos_y:65,size_x:150,size_y:60,text:"",font_size:24,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left",color:[130,174,213],colorType:"level"},{name:"maxLevel",pos_x:550,pos_y:65,size_x:150,size_y:60,text:"",font_size:22,fontType:"Content/Fonts/SFElectrotome.ttf",color:[130,174,213],colorType:"level"},{name:"maxLevelReached",pos_x:390,pos_y:65,size_x:450,size_y:60,text:"",font_size:32,fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"center",color:[130,174,213]}],progressBar:[{name:"levelBar",pos_x:390,pos_y:65,emptyImage:"Content/Images8x/UI/bar/progressbar_empty.png",fillImage:"Content/Images8x/UI/bar/progressbar_full.png",glowImage:"Content/Images8x/misc/1pxclear.png",size_x:175,size_y:16,anchor_x:0.5,anchor_y:0.5}]}}};__ngs._ac={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.FusionSelectOverlayViewDefinition={groups:[{name:"costPanel",groupDefinition:"costPanel",pos_x:0,pos_y:860}],groupDefinitions:{costPanel:{images:[{name:"currency",pos_x:600,pos_y:50,size_x:60,size_y:60,anchor_x:0.5,anchor_y:0.5,depth:1,asset:"Content/Images8x/UI/icon/icon_currency.png"},{name:"blackBox1",anchor_x:0.5,anchor_y:0,pos_x:320,pos_y:0,size_x:1024,size_y:100,alpha:0.9,asset:"Content/Images8x/misc/1pxblack.png"},{name:"blackBox2",anchor_x:0.5,anchor_y:0,pos_x:320,pos_y:-1,size_x:1024,size_y:1,alpha:1,asset:"Content/Images8x/misc/1pxwhite.png"},{name:"blackBox3",anchor_x:0.5,anchor_y:0,pos_x:320,pos_y:100,size_x:1024,size_y:1,alpha:1,asset:"Content/Images8x/misc/1pxwhite.png"}],labels:[{name:"tstatus1Label",pos_x:320,pos_y:50,size_x:150,size_y:60,anchor_x:0,anchor_y:0.5,color:[255,255,255],font_size:32,text:"ui_upgradecost_uc",fontType:"Content/Fonts/SFElectrotome.ttf",horizontalAlign:"left"},{name:"costLabel",pos_x:550,pos_y:50,size_x:100,size_y:60,color:[255,255,255],text:"",font_size:32,fontType:"Content/Fonts/SFElectrotome.ttf",anchor_x:1,anchor_y:0.5,horizontalAlign:"right"}],comboBoxs:[{name:"raritySelection",open_close_delay:0,pos_x:70,pos_y:20,size_x:200,size_y:70,gridX:1,gridY:2,cell_size_x:360,cell_size_y:100,max_size_y:-280,max_size_x:640,prompt:"ui_selectonpage_uc",update_prompt_on_select:false,action:"onRaritySelectionComboBox",options:[{label:"ui_uncommonandbelow",font_size:28,id:TFGameData.RARITY.UNCOMMON,icon_asset:{asset:"Content/Images8x/UI/card_frames/thumb_rarity_2.png",size_x:40,size_y:70}},{label:"ui_common",font_size:28,id:TFGameData.RARITY.COMMON,icon_asset:{asset:"Content/Images8x/UI/card_frames/thumb_rarity_1.png",size_x:40,size_y:70}}],depth:10}]}},buttons:[{name:"fusetype1",pos_x:100,pos_y:138,anchor_x:0.5,anchor_y:0,size_x:250,size_y:137,asset:"Content/Images8x/UI/button/toggle_wp.png",visible:false,action:"fuseType",sound:["click_flat"],info:{type:1}},{name:"fusetype2",pos_x:100,pos_y:138,anchor_x:0.5,anchor_y:0,size_x:250,size_y:137,asset:"Content/Images8x/UI/button/toggle_tf.png",action:"fuseType",sound:["click_flat"],visible:false,info:{type:2}},{name:"doneButton",pos_x:460,pos_y:168,size_x:174,size_y:78,depth:1,action:"onDone",sound:["click_high"],text:"ui_done_uc",font_size:32,fontType:"Content/Fonts/SFElectrotome.ttf",asset:"Content/Images8x/UI/button/btn_sell.png"},{name:"sellButton",pos_x:460,pos_y:168,size_x:174,size_y:78,depth:1,action:"onSell",sound:["click_high"],text:"ui_sell_uc",font_size:32,fontType:"Content/Fonts/SFElectrotome.ttf",visible:false,asset:"Content/Images8x/UI/button/btn_sell.png"},{name:"cancelButton",pos_x:10,pos_y:168,size_x:174,size_y:78,depth:0.5,action:"onSellCancel",sound:["click_low"],text:"ui_cancel",font_size:32,fontType:"Content/Fonts/SFElectrotome.ttf",asset:"Content/Images8x/UI/button/btn_sell.png",visible:false}],tfbuttons:[{name:"continueButton",anchor_x:0.5,anchor_y:1,pos_x:320,pos_y:960,size_x:575,size_y:105,text:"ui_continue_uc",font_size:46,color:[236,243,255],depth:1,fontType:"Content/Fonts/SFElectrotome.ttf",action:"onContinue",visible:false}],comboBoxs:[{name:"sortSelection",pos_x:232,pos_y:176,size_x:200,size_y:70,gridX:2,gridY:7,cell_size_x:500,cell_size_y:100,max_size_y:800,max_size_x:640,prompt:"ui_sortby_uc",action:"onComboBoxSelection",options:[{label:"ui_overall",id:"overall_down"},{label:"ui_overall",id:"overall_up"},{label:"ui_rarity",id:"rarity_down"},{label:"ui_rarity",id:"rarity_up"},{label:"ui_xp_uc",id:"xp_down"},{label:"ui_xp_uc",id:"xp_up"},{label:"ui_hp",id:"hp_down"},{label:"ui_hp",id:"hp_up"},{label:"ui_attack",id:"attack_down"},{label:"ui_attack",id:"attack_up"},{label:"ui_defense",id:"defense_down"},{label:"ui_defense",id:"defense_up"},{label:"ui_name",id:"name_down"},{label:"ui_name",id:"name_up"}],depth:10}]}}};__ngs._ad={_c:null,_d:function(){var a={exports:{}};var d=a.exports;this._c=a;var l=__ngs.r_(__ngs._d2).DialogView;var c=__ngs.r_(__ngs._f9).FullScreenCardDefinition;var g=__ngs.r_(__ngs._48).TFSoundManager;var h=__ngs.r_(__ngs._45).AnimationManager;var b=__ngs.r_(__ngs._45).AnimationQueue;var e=__ngs.r_(__ngs._84).Parallaxer;var m=__ngs.r_(__ngs._4a).TFImageManager;var k=__ngs.r_(__ngs._x).TFManifestManager;d.FullScreenCardView=l.subclass({classname:"FullScreenCardView",SOUND_KEY:"TAP_DIGITAL_05",FORCE_PARALLAX_NONE:0,FORCE_PARALLAX_ON:1,FORCE_PARALLAX_OFF:2,initialize:function($super,n,o){this.callbacksToCollect=0;this.spinnerRemoved=true;this.iOSSPECIAL=false;this._useNewGlowAnimation=false;this._mesh=null;this._time=0;$super(n,c);g.playSound(this.SOUND_KEY)},destroy:function($super){this._destroying=true;if(this.characterFoundQueue){this.characterFoundQueue.destroy()}if(this.parallaxer){this.parallaxer.destroy()}if(this.iconNode){this.iconNode.destroy()}if(this.__updateListener){Core.UpdateEmitter.removeListener(this.__updateListener);this.__updateListener.destroy();this.__updateListener=null}this.parallaxer=null;this.iconNode=null;if(this._mesh){this._mesh.getMaterial().getTexture(0).destroy();this._mesh.getMaterial().getTexture(1).destroy();this._mesh.getMaterial().destroy();this._mesh.destroy()}if(TFSceneDirector._currentViewController&&TFSceneDirector._currentViewController.clearView){TFSceneDirector._currentViewController.clearView()}$super()},setTransformable:function(o,n){this._transformable=o;this._rarity=n},setFrame:function(p,o){var n="";if(p){n="transformFrame";this["transformFrame"].setVisible(true);this["nontransformFrame"].setVisible(false);this.transformButton.setEnabled(true);if(this._useNewGlowAnimation){this.setGlowAnimation(o)}}else{n="nontransformFrame";this["nontransformFrame"].setVisible(true);this["transformFrame"].setVisible(false);this.transformButton.setEnabled(false);TFUtils.changeImageOnSprite(this.transformIcon,this._definitions.transformIcon.info.offAsset)}if(o>0&&o<5){TFUtils.changeImageOnSprite(this[n].frame,this[n]._definitions.frame.info["asset"+o])}if(TFUserData.getTutorialState("main")=="start"||TFUserData.getTutorialState("main")=="space-bridge"){this.flipCardButton.setEnabled(false);TFUtils.changeImageOnSprite(this.detailsIcon,this._definitions.detailsIcon.info.offAsset)}},setGlowAnimation:function(s){var p=[1,1,1,1];var o="Content/Images8x/UI/card_frames/1_mask.png";if(s!=1&&s<5){o="Content/Images8x/UI/card_frames/"+s+"_mask.png"}var r=new GL2.Texture("Content/Images8x/UI/card_frames/glow.png",{wrapS:GL2.Texture.WrapMode.Clamp,wrapT:GL2.Texture.WrapMode.Clamp,minFilter:GL2.Texture.FilterMode.Linear,magFilter:GL2.Texture.FilterMode.Linear,readImageAsync:false});var n=new GL2.Texture(o,{wrapS:GL2.Texture.WrapMode.Clamp,wrapT:GL2.Texture.WrapMode.Clamp,minFilter:GL2.Texture.FilterMode.Linear,magFilter:GL2.Texture.FilterMode.Linear,readImageAsync:false});var q=new GL2.FixedMaterial();q.setTexture(0,n);q.setTexture(1,r);this._vertices={v1:[0,0],v2:[1,0],v3:[1,1],v4:[0,1]};this._mesh=new GL2.Mesh().setMaterial(q).setVertexAttribs("position",GL2.Mesh.AttribType.Vec2,[[-1,-1],[1,-1],[1,1],[-1,1]]).setVertexAttribs("color",GL2.Mesh.AttribType.Vec4,[p,p,p,p]).setVertexAttribs("texCoord1",GL2.Mesh.AttribType.Vec2,[[0,0],[1,0],[1,1],[0,1]]).setVertexAttribs("texCoord0",GL2.Mesh.AttribType.Vec2,[[0,0],[1,0],[1,1],[0,1]]).setIndices([0,1,3,1,2,3]);this._mesh.setPosition(0,-17);this._mesh.setDepth(30);this._mesh.setScale(320,444);this.addChild(this._mesh);this.__updateListener=new Core.MessageListener();Core.UpdateEmitter.addListener(this.__updateListener,this._onUpdate.bind(this))},rotateVertices:function(r,p){var n=r[0]-0.5;var s=r[1]-0.5;var q=Math.cos(p);var o=Math.sin(p);return[(n*q-s*o)+0.5,(s*q+n*o)+0.5]},_onUpdate:function(n){this._time+=n;if(this._time>=90){this._time=0;this.animateGlow()}},animateGlow:function(){if(!this._mesh){return}var n=this._vertices;for(var o=1;o<5;o++){n["v"+o]=this.rotateVertices(n["v"+o],0.1)}this._mesh.setVertexAttribs("texCoord1",GL2.Mesh.AttribType.Vec2,[n.v1,n.v2,n.v3,n.v4])},hideButtons:function(){this.flipCardButton.setVisible(false);this.transformButton.setVisible(false);this.closeButton.setVisible(false);this.detailsIcon.setVisible(false);this.transformIcon.setVisible(false);this.dismissIcon.setVisible(false)},prepareSpinner:function(){if(this.spinnerRemoved===false){return}this.spinnerRemoved=false;var o=[75*1.5,75*1.5];var n=[116*1.5,48*1.5];this._spinnerBack=new GL2.Sprite();this._spinnerBack.setImage("Content/Images8x/UI/card_frames/loading_graphic.png",n,[0.5,0.5],[0,0,1,1]);this._spinnerWheel=new GL2.Sprite();this._spinnerWheel.setImage("Content/Images8x/UI/card_frames/loading_spinner.png",o,[0.5,0.5],[0,0,1,1]);this._spinnerBack.setPosition(320,444);this._spinnerWheel.setPosition(320,444);this._spinnersprite=new GL2.Sprite();this._spinnersprite.setImage("Content/Images8x/UI/card_frames/frame_loading.jpg",[640,888],[0,0],[0,0,1,1]);this._spinnersprite.setAlpha(0);this._spinnershade=new GL2.Sprite();this._spinnershade.setImage("Content/Images8x/misc2/1pxblack.png",[640,888],[0,0],[0,0,1,1]);this._spinnershade.setDepth(10);this._spinnershade.setPosition(-320,-460);this._spinnershade.addChild(this._spinnersprite);this._spinnershade.addChild(this._spinnerBack);this._spinnershade.addChild(this._spinnerWheel);this.addChild(this._spinnershade);this._spinnerStartQueue=new b(this._am);this._spinnerStartQueue.pushAnimation(50,b.Curve.EaseOut);this._spinnerStartQueue.tween(b.Interpolate.scalar(0,1),function(p){}.bind(this));this._spinnerStartQueue.pushAnimation(100,b.Curve.EaseIn);this._spinnerStartQueue.tween(b.Interpolate.scalar(0,1),function(p){if(this.spinnerRemoved===true){console.log("FullScreenCardView > prepareSpinner > ignoring spinner, already removed");return}console.log("FullScreenCardView > prepareSpinner > alpha : "+p);this._spinnersprite.setAlpha(p)}.bind(this));this._spinnerStartQueue.start();md=new GL2.MotionData();md.initFromJSONFile("Content/AnimationData/card_spinner_anim.json",GL2.MotionData.DataFormat.FlashClassicTween,function(p,q){if(p){console.log("SPINNER error :"+JSON.stringify(p))}else{if(this.spinnerRemoved===true){return}mc=new GL2.MotionController(q);mc.bind("spinner",this._spinnerWheel,GL2.MotionController.SyncFlags.Rotation);mc.bind("spinnerAlpha",this._spinnersprite,GL2.MotionController.SyncFlags.Alpha);this._mc=mc;mc.play(GL2.MotionController.PlayMode.Loop)}}.bind(this))},collectCallbacks:function(){this.callbacksToCollect--;if(this.callbacksToCollect<=0&&this._destroying!==true){this.setFrame(this._transformable,this._rarity);this.name.setVisible(true);this.prefix.setVisible(true);this.logo.setVisible(true);this.MELEE.setVisible(true);this.SPECIAL.setVisible(true);this.RANGE.setVisible(true);this.stat1.setVisible(true);this.stat2.setVisible(true);this.stat3.setVisible(true);this.removeSpinner()}},removeSpinner:function(){if(this._spinnersprite._alpha===0&&this.spinnerRemoved===false){this.destroySpinner();this.spinnerRemoved=true;return}this._spinnerAnimationQueue=new b(this._am);this._spinnerAnimationQueue.pushAnimation(1000,b.Curve.EaseOut);this._spinnerAnimationQueue.tween(b.Interpolate.scalar(1,2),function(n){this._spinnershade.setAlpha((1-(n-1)))}.bind(this));this._spinnerAnimationQueue.pushCallback(function(){this.destroySpinner();this.spinnerRemoved=true}.bind(this));this._spinnerAnimationQueue.start()},destroySpinner:function(){if(this._spinnerBack&&this._spinnerBack.__objectRegistryId){this._spinnerBack.destroy()}if(this._spinnerWheel&&this._spinnerWheel.__objectRegistryId){this._spinnerWheel.destroy()}if(this._spinnersprite&&this._spinnersprite.__objectRegistryId){this._spinnersprite.destroy()}if(this._spinnershade&&this._spinnershade.__objectRegistryId){console.log("FullScreenCardView > destroySpinner > this._spinnershade.destroy()");this._spinnershade.destroy()}if(this._mc&&this._mc.__objectRegistryId){this._mc.stop();this._mc.destroy()}},createAltFormParallaxer:function(t,r,p,q){console.log("#*%&#*%(#*%&*(# create altform parallaxer");var o=this._definitions.cardLayer1;var s=__ngs.r_(__ngs._fa).CardNode;if(this.clipFrame2){if(this.clipFrame2.getParent()){this.clipFrame2.getParent().removeChild(this.clipFrame2)}this.clipFrame2.destroy();this.clipFrame2=undefined}if(!this.clipFrameParent){this.clipFrameParent=new GL2.Node()}this.clipFrame2=new s();this.prepareSpinner();var n=TFSceneDirector.getWorkingArea();this.clipFrame2.setPosition(-320,-460);if(t==TFGameData.RARITY.UNCOMMON||t==TFGameData.RARITY.COMMON){if(p){this.callbacksToCollect+=1;TFUtils.setRemoteImageOnSprite(this.cardLayer5,TFUtils.getCardFullImagePath(p),this.collectCallbacks.bind(this));this.cardLayer5.setPosition(new Core.Point(o.pos_x+310,o.pos_y+480));k.increaseAssetPriority(m.getCorrectImagePath(TFUtils.getCardFullImagePath(p)),2)}this.clipFrame2.addToRenderTarget(this.cardLayer5)}else{if(t==TFGameData.RARITY.RARE||t==TFGameData.RARITY.SUPERRARE){this.useAltParallax=true;if(q!=this.FORCE_PARALLAX_ON&&Server.currConnection!=Device.NetworkEmitter.Status.Wifi){if(!k.isFileDownloadedOrLocal(m.getCorrectImagePath("Content/Images8x/cards/"+p+"/parallax_03.jpg"))||!k.isFileDownloadedOrLocal(m.getCorrectImagePath("Content/Images8x/cards/"+p+"/parallax_02.png"))||!k.isFileDownloadedOrLocal(m.getCorrectImagePath("Content/Images8x/cards/"+p+"/parallax_01.png"))||!k.isFileDownloadedOrLocal(m.getCorrectImagePath("Content/Images8x/cards/"+p+"/parallax_00.png"))){console.log("FullScreenCardView > createAltFormParallaxer > won't use parallax for",p);this.useAltParallax=false}}if(!this.useAltParallax||q==this.FORCE_PARALLAX_OFF){if(p){this.callbacksToCollect+=1;TFUtils.setRemoteImageOnSprite(this.cardLayer5,TFUtils.getCardFullImagePath(p),this.collectCallbacks.bind(this));this.cardLayer5.setPosition(new Core.Point(o.pos_x+310,o.pos_y+480));k.increaseAssetPriority(m.getCorrectImagePath(TFUtils.getCardFullImagePath(p)),2)}this.clipFrame2.addToRenderTarget(this.cardLayer5)}else{this.callbacksToCollect+=4;TFUtils.setRemoteImageOnSprite(this.cardLayer5,"Content/Images8x/cards/"+p+"/parallax_03.jpg",this.collectCallbacks.bind(this));this.cardLayer5.setScale(o.info.scale,o.info.scale);this.cardLayer5.setPosition(new Core.Point(o.pos_x+320,o.pos_y+450));this.clipFrame2.addToRenderTarget(this.cardLayer5);TFUtils.setRemoteImageOnSprite(this.cardLayer6,"Content/Images8x/cards/"+p+"/parallax_02.png",this.collectCallbacks.bind(this));this.cardLayer6.setPosition(new Core.Point(o.pos_x+310,o.pos_y+450));this.clipFrame2.addToRenderTarget(this.cardLayer6);TFUtils.setRemoteImageOnSprite(this.cardLayer7,"Content/Images8x/cards/"+p+"/parallax_01.png",this.collectCallbacks.bind(this));this.cardLayer7.setPosition(new Core.Point(o.pos_x+310,o.pos_y+450));this.clipFrame2.addToRenderTarget(this.cardLayer7);TFUtils.setRemoteImageOnSprite(this.cardLayer8,"Content/Images8x/cards/"+p+"/parallax_00.png",this.collectCallbacks.bind(this));this.cardLayer8.setPosition(new Core.Point(o.pos_x+310,o.pos_y+450));this.clipFrame2.addToRenderTarget(this.cardLayer8);k.increaseAssetPriority(m.getCorrectImagePath("Content/Images8x/cards/"+p+"/parallax_03.jpg"),2);k.increaseAssetPriority(m.getCorrectImagePath("Content/Images8x/cards/"+p+"/parallax_02.png"),2);k.increaseAssetPriority(m.getCorrectImagePath("Content/Images8x/cards/"+p+"/parallax_01.png"),2);k.increaseAssetPriority(m.getCorrectImagePath("Content/Images8x/cards/"+p+"/parallax_00.png"),2)}}}this.clipFrame2.setDepth(-1);this.clipFrameParent.addChild(this.clipFrame2)},createParallaxer:function(t,r,p,q){console.log("FullScreenCardView > createParallaxer > rarity="+t+", imageDir="+r+", transformImageDir="+p);var o=this._definitions.cardLayer1;var s=__ngs.r_(__ngs._fa).CardNode;if(this.clipFrame){if(this.clipFrame.getParent()){this.clipFrame.getParent().removeChild(this.clipFrame)}this.clipFrame.destroy();this.clipFrame=undefined}if(!this.clipFrameParent){this.clipFrameParent=new GL2.Node()}this.clipFrame=new s();this.prepareSpinner();var n=TFSceneDirector.getWorkingArea();this.clipFrame.setPosition(-320,-460);if(t==TFGameData.RARITY.UNCOMMON){this.callbacksToCollect+=1;TFUtils.setRemoteImageOnSprite(this.cardLayer1,TFUtils.getCardFullImagePath(r),this.collectCallbacks.bind(this));this.cardLayer1.setPosition(new Core.Point(o.pos_x+318,o.pos_y+480));this.clipFrame.addToRenderTarget(this.cardLayer1);k.increaseAssetPriority(m.getCorrectImagePath(TFUtils.getCardFullImagePath(r)),2)}else{if(t==TFGameData.RARITY.COMMON){this.callbacksToCollect+=1;TFUtils.setRemoteImageOnSprite(this.cardLayer1,TFUtils.getCardFullImagePath(r),this.collectCallbacks.bind(this));this.cardLayer1.setPosition(new Core.Point(o.pos_x+318,o.pos_y+480));this.clipFrame.addToRenderTarget(this.cardLayer1);k.increaseAssetPriority(m.getCorrectImagePath(TFUtils.getCardFullImagePath(r)),2)}else{if(t==TFGameData.RARITY.RARE||t==TFGameData.RARITY.SUPERRARE){this.useParallax=true;if(q!=this.FORCE_PARALLAX_ON&&Server.currConnection!=Device.NetworkEmitter.Status.Wifi){if(!k.isFileDownloadedOrLocal(m.getCorrectImagePath("Content/Images8x/cards/"+r+"/parallax_03.jpg"))||!k.isFileDownloadedOrLocal(m.getCorrectImagePath("Content/Images8x/cards/"+r+"/parallax_02.png"))||!k.isFileDownloadedOrLocal(m.getCorrectImagePath("Content/Images8x/cards/"+r+"/parallax_01.png"))||!k.isFileDownloadedOrLocal(m.getCorrectImagePath("Content/Images8x/cards/"+r+"/parallax_00.png"))){console.log("FullScreenCardView > createParallaxer > won't use parallax for",r);this.useParallax=false}}if(!this.useParallax||q==this.FORCE_PARALLAX_OFF){this.callbacksToCollect+=1;TFUtils.setRemoteImageOnSprite(this.cardLayer1,TFUtils.getCardFullImagePath(r),this.collectCallbacks.bind(this));this.cardLayer1.setPosition(new Core.Point(o.pos_x+310,o.pos_y+480));this.clipFrame.addToRenderTarget(this.cardLayer1);k.increaseAssetPriority(m.getCorrectImagePath(TFUtils.getCardFullImagePath(r)),2)}else{this.callbacksToCollect+=4;TFUtils.setRemoteImageOnSprite(this.cardLayer1,"Content/Images8x/cards/"+r+"/parallax_03.jpg",this.collectCallbacks.bind(this));this.cardLayer1.setScale(o.info.scale,o.info.scale);this.cardLayer1.setPosition(new Core.Point(o.pos_x+320,o.pos_y+450));this.clipFrame.addToRenderTarget(this.cardLayer1);TFUtils.setRemoteImageOnSprite(this.cardLayer2,"Content/Images8x/cards/"+r+"/parallax_02.png",this.collectCallbacks.bind(this));this.cardLayer2.setPosition(new Core.Point(o.pos_x+310,o.pos_y+450));this.clipFrame.addToRenderTarget(this.cardLayer2);TFUtils.setRemoteImageOnSprite(this.cardLayer3,"Content/Images8x/cards/"+r+"/parallax_01.png",this.collectCallbacks.bind(this));this.cardLayer3.setPosition(new Core.Point(o.pos_x+310,o.pos_y+450));this.clipFrame.addToRenderTarget(this.cardLayer3);TFUtils.setRemoteImageOnSprite(this.cardLayer4,"Content/Images8x/cards/"+r+"/parallax_00.png",this.collectCallbacks.bind(this));this.cardLayer4.setPosition(new Core.Point(o.pos_x+310,o.pos_y+450));this.clipFrame.addToRenderTarget(this.cardLayer4);k.increaseAssetPriority(m.getCorrectImagePath("Content/Images8x/cards/"+r+"/parallax_03.jpg"),2);k.increaseAssetPriority(m.getCorrectImagePath("Content/Images8x/cards/"+r+"/parallax_02.png"),2);k.increaseAssetPriority(m.getCorrectImagePath("Content/Images8x/cards/"+r+"/parallax_01.png"),2);k.increaseAssetPriority(m.getCorrectImagePath("Content/Images8x/cards/"+r+"/parallax_00.png"),2);if(this.parallaxer){this.parallaxer.stop();this.parallaxer.destroy();this.parallaxer=undefined}if(Core.Capabilities.getPlatformOS()=="iPhone OS"&&this.iOSSPECIAL){this.parallaxer=new e([0.6,0.3,0.2,0.1],[this.cardLayer1,this.cardLayer2,this.cardLayer3,this.cardLayer4])}else{this.parallaxer=new e([1,0.7,0.5,0.3],[this.cardLayer1,this.cardLayer2,this.cardLayer3,this.cardLayer4])}this.parallaxer.start()}}}}this.clipFrameParent.addChild(this.nontransformFrame);this.clipFrameParent.addChild(this.transformFrame);this.clipFrameParent.addChild(this.logo);this.clipFrameParent.addChild(this.name);this.clipFrameParent.addChild(this.clipFrame);this.addChild(this.clipFrameParent)},changeCard:function(p,o,n){var s=this.cardLayer1.getVisible();if(s){var q=this.clipFrame;var r=this.clipFrame2;this.cardLayer5.setVisible(s);this.cardLayer6.setVisible(s);this.cardLayer7.setVisible(s);this.cardLayer8.setVisible(s)}else{var q=this.clipFrame2;var r=this.clipFrame;this.cardLayer1.setVisible(!s);this.cardLayer2.setVisible(!s);this.cardLayer3.setVisible(!s);this.cardLayer4.setVisible(!s)}q.animateDisAssemble(function(){this.cardLayer5.setVisible(s);this.cardLayer6.setVisible(s);this.cardLayer7.setVisible(s);this.cardLayer8.setVisible(s);this.cardLayer1.setVisible(!s);this.cardLayer2.setVisible(!s);this.cardLayer3.setVisible(!s);this.cardLayer4.setVisible(!s);if(s){this.clipFrame2.setDepth(1)}else{this.clipFrame2.setDepth(-1)}}.bind(this));r.animateAssemble(function(){this.isAnimating=false;if(this.parallaxer){this.parallaxer.stop();this.parallaxer.destroy();this.parallaxer=undefined}if(p==TFGameData.RARITY.RARE||p==TFGameData.RARITY.SUPERRARE){if(s&&this.useAltParallax){if(Core.Capabilities.getPlatformOS()=="iPhone OS"&&this.iOSSPECIAL){this.parallaxer=new e([0.6,0.3,0.2,0.1],[this.cardLayer5,this.cardLayer6,this.cardLayer7,this.cardLayer8])}else{this.parallaxer=new e([1,0.7,0.5,0.3],[this.cardLayer5,this.cardLayer6,this.cardLayer7,this.cardLayer8])}this.parallaxer.start()}else{if(!s&&this.useParallax){if(Core.Capabilities.getPlatformOS()=="iPhone OS"&&this.iOSSPECIAL){this.parallaxer=new e([0.6,0.3,0.2,0.1],[this.cardLayer1,this.cardLayer2,this.cardLayer3,this.cardLayer4])}else{this.parallaxer=new e([1,0.7,0.5,0.3],[this.cardLayer1,this.cardLayer2,this.cardLayer3,this.cardLayer4])}this.parallaxer.start()}}}if(n){n()}}.bind(this))},animateCardChange:function(p,o,n){if(!this.clipFrame){return}if(this.parallaxer){this.parallaxer.setNoParallax(true);this.parallaxer.resetParallax()}this.changeCard(p,o,n)},animateTransform:function(p,o,n){if(this.isAnimating){return}this.isAnimating=true;this.animateCardChange(p,o,n)},clipCards:function(){var p=this.clipFrame.localToScreen(new Core.Point(0,0));var n=this.clipFrame.localToScreen(new Core.Point(this.clipFrame._cardSize.getWidth(),this.clipFrame._cardSize.getHeight()));if(!p){return}if(!n){return}var o=new Core.Rect(p.getX(),p.getY(),n.getX()-p.getX(),n.getY()-p.getY());this.clipFrame.setClipRect(o);this.clipFrame.setClipRectEnabled(true);if(this.clipFrame2){this.clipFrame2.setClipRect(o);this.clipFrame2.setClipRectEnabled(true)}}})}};__ngs._ae={_c:null,_d:function(){var g={exports:{}};var d=g.exports;this._c=g;var h=__ngs.r_(__ngs._7p).View;var k=__ngs.r_(__ngs._fb).DeckGridItemViewDefinition;var c=__ngs.r_(__ngs._45).AnimationManager;var e=__ngs.r_(__ngs._45).AnimationQueue;var a=__ngs.r_(__ngs._89).CardThumbnailView;var b=__ngs.r_(__ngs._63).TFFormulas;d.DeckGridItemView=h.subclass({classname:"DeckGridItemView",initialize:function($super,l){$super(l,k)},destroy:function($super){$super()}})}};__ngs._af={_c:null,_d:function(){var e={exports:{}};var c=e.exports;this._c=e;var g=__ngs.r_(__ngs._3x).Social;var h=__ngs.r_(__ngs._7p).View;var b=__ngs.r_(__ngs._45).AnimationManager;var d=__ngs.r_(__ngs._45).AnimationQueue;var a=__ngs.r_(__ngs._89).CardThumbnailView;c.RBIntroView=h.subclass({classname:"RBIntroView",initialize:function($super,k){this._controller=k;$super(k,"RBIntroViewDefinition",function(){TFSceneDirector.shiftUIElementUp(this.eventImage);TFSceneDirector.shiftUIElementUp(this.eventImageLayer);TFSceneDirector.shiftUIElementUp(this.eventImage2);TFSceneDirector.shiftUIElementUp(this.dropshadow);TFSceneDirector.shiftUIElementUp(this.black);TFSceneDirector.shiftUIElementUp(this.timeLeftPanel);TFSceneDirector.shiftUIElementUp(this.helpButton);TFSceneDirector.shiftUIElementUp(this.eventTitle);TFSceneDirector.shiftUIElementUp(this.cardPanel);TFSceneDirector.shiftUIElementDown(this.bottomPanel);var u=this.eventImage.info.asset_dir+"/"+TFUserData.curEventId+"/";if(this.eventImage.info["asset_name_"+TFUserData.curEventId]){u=u+this.eventImage.info["asset_name_"+TFUserData.curEventId]}else{u=u+this.eventImage.info.asset_name}TFUtils.changeImageOnSprite(this.eventImage,u);TFUtils.changeImageOnSprite(this.eventImage2,u);var y=this.eventImageLayer.info.asset_dir+"/"+TFUserData.curEventId+"/";if(this.eventImageLayer.info["asset_name_"+TFUserData.curEventId]){y=y+this.eventImageLayer.info["asset_name_"+TFUserData.curEventId]}else{y=y+this.eventImageLayer.info.asset_name}TFUtils.changeImageOnSprite(this.eventImageLayer,y);var t=this.eventImage.info["offset_y_"+TFUserData.curEventId];if(t){this.eventImage.setPosition(this.eventImage.getPosition().getX(),this.eventImage.getPosition().getY()+t);this.eventImage2.setPosition(this.eventImage2.getPosition().getX(),this.eventImage2.getPosition().getY()+t);this.eventImageLayer.setPosition(this.eventImageLayer.getPosition().getX(),this.eventImageLayer.getPosition().getY()+t)}this._eventInfo=TFGameData.getEventInfo(TFUserData.curEventId);console.log("RBIntroView - event="+JSON.stringify(this._eventInfo));this.eventTitle.setText(Localization.getString(this._eventInfo.eventName));var w=TFGameData.getEventTopReward(TFUserData.curEventId);if(w&&w.rewards){console.log("RBIntroView > bestRewards="+JSON.stringify(w));var D=undefined;for(var B in w.rewards){if(w.rewards[B].type==TFGameData.GIFT_TYPE.CARDS){D=w.rewards[B].value;break}}console.log("RBIntroView > bestReward cardId="+D);if(D){var C=this._definitions.cardPanel.info.card_w;var l=this._definitions.cardPanel.info.card_h;var m=Math.floor(D/10)*10+3;console.log("RBIntroView > bestReward TFCardId="+m);this._rewardThumb=new a(this._controller,m,C,l,{anchor:[0.5,0.5]});this.cardPanel.addChild(this._rewardThumb);this._rewardThumb.setPosition(this._definitions.cardPanel.info.card_x,this._definitions.cardPanel.info.card_y);this.cardPanel.cardName.setText(Localization.getString(((D>=20000000)?"weapon_":"tf_")+D+"_name").toUpperCase())}}else{console.log("RBIntroView - ERROR: reward data missing, top reward card will not be shown")}this.timeLeftPanel.timeLeft.setOverflowMode(GL2.Text.OverflowMode.ReduceFontSize);this._fullTimeLeft=false;if(TFUtils.onDev()){this.timeLeftPanel.timeLeftButton.setVisible(true)}this.updateTimeLeft();var A=1;for(var B in this._eventInfo.participationRewards){var q=this._eventInfo.participationRewards[B];console.log("Participation Reward "+B+": "+JSON.stringify(q));var s="rewardEntry"+A+((this._eventInfo.participationRewards.length<=2)?"b":"");var v=this.bottomPanel[s];v.setVisible(true);if(v){if(q.type==TFGameData.GIFT_TYPE.COINS){}else{if(q.type==TFGameData.GIFT_TYPE.ITEM){var p=TFGameData.getItemDesc(q.value);TFUtils.changeImageOnSprite(v.rewardIcon,"Content/Images8x/UI/StoreItems/"+p.image);v.rewardDescription.setText(Localization.getString(p.name));v.itemCount.setPosition(v.rewardIcon.getPosition().getX()+v._definitions.rewardIcon.size_x*v._definitions.itemCount.info.offset_x_pct,v.rewardIcon.getPosition().getY()+v._definitions.rewardIcon.size_y*v._definitions.itemCount.info.offset_y_pct);if(q.amount>1){v.itemCount.setText("x"+q.amount)}}else{if(q.type==TFGameData.GIFT_TYPE.MEDALS){TFUtils.changeImageOnSprite(v.rewardIcon,TFGameData.getMedalImagePath(q.value));v.rewardDescription.setText(Localization.getString(q.value));console.log("x="+v._definitions.itemCount.info.offset_x+", y="+v._definitions.itemCount.info.offset_y_pct);v.itemCount.setPosition(v.rewardIcon.getPosition().getX()+v._definitions.rewardIcon.size_x*v._definitions.itemCount.info.offset_x_pct,v.rewardIcon.getPosition().getY()+v._definitions.rewardIcon.size_y*v._definitions.itemCount.info.offset_y_pct);if(q.amount>1){v.itemCount.setText("x"+q.amount)}}}}}A++}this._am=new b();var z=new d(this._am);z.pushAnimation(500,d.Curve.EaseInOut);z.tween(d.Interpolate.scalar(1,0.5),function(E){this.timeLeftPanel.timeLeft.setAlpha(E)}.bind(this));z.pushAnimation(500,d.Curve.EaseInOut);z.tween(d.Interpolate.scalar(0.5,1),function(E){this.timeLeftPanel.timeLeft.setAlpha(E)}.bind(this));z.startLooped();var r=this._definitions.bottomPanel.info.slide_overshoot;var o=this.bottomPanel.getPosition().getY()-this.bottomPanel._definitions.panelImage.size_y;var z=new d(this._am);z.pushAnimation(1000,d.Curve.Linear);z.pushAnimation(500,d.Curve.EaseIn);z.tween(d.Interpolate.scalar(this.bottomPanel.getPosition().getY(),o-r),function(E){this.setPosition(this.getPosition().getX(),E)}.bind(this.bottomPanel));z.pushAnimation(500,d.Curve.EaseOut);z.tween(d.Interpolate.scalar(o-r,o),function(E){this.setPosition(this.getPosition().getX(),E)}.bind(this.bottomPanel));z.start();var x=this.cardPanel.getPosition().getX()+this._definitions.cardPanel.info.slide_offset;z=new d(this._am);z.pushAnimation(2000,d.Curve.Linear);z.pushAnimation(300,d.Curve.Linear);z.tween(d.Interpolate.scalar(this.cardPanel.getPosition().getX(),x),function(E){this.setPosition(E,this.getPosition().getY())}.bind(this.cardPanel));z.start();var n=this.timeLeftPanel.getPosition().getY()+this._definitions.timeLeftPanel.info.slide_offset;z=new d(this._am);z.pushAnimation(2500,d.Curve.Linear);z.pushAnimation(1000,d.Curve.Linear);z.tween(d.Interpolate.scalar(this.timeLeftPanel.getPosition().getY(),n),function(E){this.setPosition(this.getPosition().getX(),E)}.bind(this.timeLeftPanel));z.start();this._controller.onViewsDoneLoading(this)}.bind(this))},updateTimeLeft:function(){var k=false;var m=TFGameData.getEventInfo(TFUserData.curEventId);console.log("RBIntroView::updateTimeLeft - eventId="+TFUserData.curEventId+", event="+JSON.stringify(m));if(m){console.log("RBIntroView::updateTimeLeft - expirationTime="+m.expirationTime);var n=Server.getServerTime();var l=new Date(m.expirationTime).valueOf();console.log("RBIntroView::updateTimeLeft - curTime="+n+", endTime="+l);var o=Localization.getString("ui_timeleftcolon_uc")+" ";if(n<l){var p=l-n;if(this._fullTimeLeft&&TFUtils.onDev()){o+=TFUtils.timeToHuman(p/1000,true)}else{o+=TFUtils.timeToHumanTwoElement(p/1000)}}else{o=Localization.getString("ui_eventcomplete_uc");k=true}this.timeLeftPanel.timeLeft.setText(o)}if(!this._destroying&&!k){setTimeout(this.updateTimeLeft.bind(this),1000)}},destroy:function($super){if(this._am){this._am.destroy()}this._destroying=true;$super()}})}};__ngs._ag={_c:null,_d:function(){var e={exports:{}};var b=e.exports;this._c=e;var h=__ngs.r_(__ngs._3x).Social;var c=__ngs.r_(__ngs._8v).GLScrollView;var a=__ngs.r_(__ngs._45).AnimationManager;var d=__ngs.r_(__ngs._45).AnimationQueue;var g=__ngs.r_(__ngs._fc).RBBossListEntryView;b.RBMainView=c.subclass({classname:"RBMainView",initialize:function($super,k){this._controller=k;$super(k,"RBMainViewDefinition",function(){this._eventDefinition=TFGameData.getEventInfo(TFUserData.curEventId);TFSceneDirector.shiftUIElementUp(this.eventImage);TFSceneDirector.shiftUIElementUp(this.eventImage2);TFSceneDirector.shiftUIElementUp(this.dropshadow);TFSceneDirector.shiftUIElementUp(this.overlay);TFSceneDirector.shiftUIElementUp(this.black);TFSceneDirector.shiftUIElementUp(this.timeLeftPanel);TFSceneDirector.shiftUIElementUp(this._scrollArea.list.helpButton);TFSceneDirector.shiftUIElementUp(this._scrollArea.list.eventTitle);this._am=new a();var o="Content/Images8x/UI/BG/bg_tutorial.jpg";if(TFUserData.curEventId){o=this.eventImage.info.asset_dir+"/"+TFUserData.curEventId+"/";if(this.eventImage.info["asset_name_"+TFUserData.curEventId]){o=o+this.eventImage.info["asset_name_"+TFUserData.curEventId]}else{o=o+this.eventImage.info.asset_name}}TFUtils.changeImageOnSprite(this.eventImage,o);TFUtils.changeImageOnSprite(this.eventImage2,o);var m=this._scrollArea.list.spaceBridgeBanner;o=m.bannerImageL.info.asset_dir+"/"+TFUserData.curEventId+"/";if(m.bannerImageL.info["asset_name_"+TFUserData.curEventId]){o=o+m.bannerImageL.info["asset_name_"+TFUserData.curEventId]}else{o=o+m.bannerImageL.info.asset_name}TFUtils.changeImageOnSprite(m.bannerImageL,o);o=m.bannerImageM.info.asset_dir+"/"+TFUserData.curEventId+"/";if(m.bannerImageM.info["asset_name_"+TFUserData.curEventId]){o=o+m.bannerImageM.info["asset_name_"+TFUserData.curEventId]}else{o=o+m.bannerImageM.info.asset_name}TFUtils.changeImageOnSprite(m.bannerImageM,o);o=m.bannerImageR.info.asset_dir+"/"+TFUserData.curEventId+"/";if(m.bannerImageR.info["asset_name_"+TFUserData.curEventId]){o=o+m.bannerImageR.info["asset_name_"+TFUserData.curEventId]}else{o=o+m.bannerImageR.info.asset_name}TFUtils.changeImageOnSprite(m.bannerImageR,o);this._scrollArea.list.eventTitle.setText(this._eventDefinition?Localization.getString(this._eventDefinition.eventName):Localization.getString("ui_eventcomplete_uc"));var n=this._scrollArea.list.listTop.getPosition().getY();this.update(undefined,undefined);this.timeLeftPanel.timeLeft.setOverflowMode(GL2.Text.OverflowMode.ReduceFontSize);this._fullTimeLeft=false;if(TFUtils.onDev()){this.timeLeftPanel.timeLeftButton.setVisible(true)}this.updateTimeLeft();var l=new d(this._am);l.pushAnimation(500,d.Curve.EaseInOut);l.tween(d.Interpolate.scalar(1,0.5),function(p){this.timeLeftPanel.timeLeft.setAlpha(p)}.bind(this));l.pushAnimation(500,d.Curve.EaseInOut);l.tween(d.Interpolate.scalar(0.5,1),function(p){this.timeLeftPanel.timeLeft.setAlpha(p)}.bind(this));l.startLooped();this._scrollArea.list.loadingText.setText(Localization.getString(this._scrollArea.list.loadingText.info.text));this._loadingAnimQueue=new d(this._am);this._loadingAnimQueue.pushAnimation(200,d.Curve.Linear);this._loadingAnimQueue.pushCallback(function(p){this._scrollArea.list.loadingText.setText(Localization.getString(this._scrollArea.list.loadingText.info.text))}.bind(this));this._loadingAnimQueue.pushAnimation(200,d.Curve.Linear);this._loadingAnimQueue.pushCallback(function(p){this._scrollArea.list.loadingText.setText("- "+Localization.getString(this._scrollArea.list.loadingText.info.text)+" -")}.bind(this));this._loadingAnimQueue.pushAnimation(200,d.Curve.Linear);this._loadingAnimQueue.pushCallback(function(p){this._scrollArea.list.loadingText.setText("-- "+Localization.getString(this._scrollArea.list.loadingText.info.text)+" --")}.bind(this));this._loadingAnimQueue.pushAnimation(200,d.Curve.Linear);this._loadingAnimQueue.pushCallback(function(p){this._scrollArea.list.loadingText.setText("--- "+Localization.getString(this._scrollArea.list.loadingText.info.text)+" ---")}.bind(this));this._loadingAnimQueue.startLooped();this._bossInfoCache={};this._controller.onViewsDoneLoading(this)}.bind(this))},updateTimeLeft:function(){var k=false;if(this._eventDefinition){var m=Server.getServerTime();var l=new Date(this._eventDefinition.expirationTime).valueOf();var n=Localization.getString("ui_timeleftcolon_uc")+" ";if(m<l){var o=l-m;if(this._fullTimeLeft&&TFUtils.onDev()){n+=TFUtils.timeToHuman(o/1000,true)}else{n+=TFUtils.timeToHumanTwoElement(o/1000)}}else{n=Localization.getString("ui_eventcomplete_uc");k=true}this.timeLeftPanel.timeLeft.setText(n)}else{k=true}if(!this._destroying&&!k){setTimeout(this.updateTimeLeft.bind(this),1000)}},update:function(v,u){if(v){console.log("RBMainView > update > eventInfo="+JSON.stringify(v));this._eventInfo=v}if(u){console.log("RBMainView > update > bossRewardList="+JSON.stringify(u));this._bossRewardList=u}this._scrollArea.list.nextRewardText.setVisible(false);var o=0;var w="---";var s="---";var p=this._eventDefinition?((this._eventDefinition.maxPlayerBosses||3)+(this._eventDefinition.maxFriendBosses||3)):0;if(this._eventInfo){o=this._eventInfo.boss.length;w=""+this._eventInfo.eventPoints+" "+Localization.getString("ui_pt");s=(this._eventInfo.eventPoints>0)?this._eventInfo.userRanking:Localization.getString("ui_none");var m=TFGameData.getPointsToNextReward(TFUserData.curEventId,this._eventInfo.eventPoints);if(m>0){var k=m-this._eventInfo.eventPoints;this._scrollArea.list.nextRewardText.setText(sprintf(Localization.getString("ui_Xpointsuntilnextreward_var"),k));this._scrollArea.list.nextRewardText.setVisible(true)}}else{if(TFUserData.eventPoints){w=""+TFUserData.eventPoints+" "+Localization.getString("ui_pt")}if(TFUserData.userRanking){s=TFUserData.userRanking}}this._scrollArea.list.rank.setText(""+s);this._scrollArea.list.points.setText(w);this._scrollArea.list.bossEncountersText.setText(sprintf(Localization.getString("ui_bossencountersXX_uc_var"),o,p));if(this._listNode){this._scrollArea.list.removeChild(this._listNode);this._listNode.destroy();this._listNode=undefined}this._listNode=new GL2.Node();this._scrollArea.list.addChild(this._listNode);var l=this._scrollArea.list.listTop.getPosition().getY()+this._scrollArea.list._definitions.listTop.size_y;this._bossEntries=[];var n=function(x){console.log("RBMainView > update > adding entry for boss="+JSON.stringify(x));var y=new g(this._controller,x);y.addLoadDoneCallback(this.readjustEntryPositions.bind(this));this._bossEntries.push(y);this._listNode.addChild(y);this.setScrollable(true);return y}.bind(this);if(this._eventInfo){for(var r in this._eventInfo.boss){var q=this._eventInfo.boss[r];if((q.hp!=0)&&(q.type==3)){n(q)}}var t=[];for(var r in this._eventInfo.boss){var q=this._eventInfo.boss[r];if((q.hp!=0)&&(q.type!=3)){t.push(q)}}t.sort(function(y,x){return y.expirationTime-x.expirationTime});for(var r in t){n(t[r])}if(false){for(var r in this._eventInfo.boss){var q=this._eventInfo.boss[r];if(q.hp==0){n(q)}}}if(this._eventInfo.battleRewards){for(var r in this._eventInfo.battleRewards){var q=this._eventInfo.battleRewards[r];n(q)}}}this.readjustEntryPositions();if(this._eventInfo){if(this._loadingAnimQueue){this._loadingAnimQueue.destroy();this._loadingAnimQueue=undefined}this._scrollArea.list.loadingText.setVisible(false);this._scrollArea.list.scanButton.setVisible(true)}},readjustEntryPositions:function(){var k=this._scrollArea.list.listTop.getPosition().getY()+this._scrollArea.list._definitions.listTop.size_y;for(var l in this._bossEntries){var m=this._bossEntries[l];m.setPosition(m.getPosition().getX(),k);if(m._definitions&&m._definitions.background){k+=m._definitions.background.size_y}}this._scrollArea.list.scanButton.setPosition(this._scrollArea.list.scanButton.getPosition().getX(),k-30);this._scrollArea.list.loadingText.setPosition(this._scrollArea.list.scanButton.getPosition().getX(),k-30);if(TFUtils.onDev()){this._scrollArea.list.forceGenerateBossButton.setPosition(this._scrollArea.list.forceGenerateBossButton.getPosition().getX(),k-30);this._scrollArea.list.forceGenerateBossButton.setVisible(true)}this._scrollArea.list.listBottom.setPosition(this._scrollArea.list.listBottom.getPosition().getX(),k);this._scrollArea.list.listBottom2.setPosition(this._scrollArea.list.listBottom2.getPosition().getX(),k);this._scrollArea.list.listBottomDropshadow.setPosition(this._scrollArea.list.listBottomDropshadow.getPosition().getX(),k);k+=this._scrollArea.list._definitions.listBottom.size_y;this._scrollArea._totalHeight=k+170},receiveBossInfo:function(m,o,n,l,k){console.log("RBMainView > receiveBossInfo > entry="+m+", bossId="+o+", retryNum="+n);if(l){console.log("RBMainView > receiveBossInfo > error="+JSON.stringify(l));TFUtils.showErrorMessages(k);return}console.log("RBMainView > receiveBossInfo > response="+JSON.stringify(k));if(k){this._bossInfoCache[o]=k.bossInfo;m._bossInfo=k.bossInfo;m.updateEntry(k.bossInfo.definitionId)}else{n++;console.log("RBMainView > receiveBossInfo > failed ("+n+") - retrying");if(n<3){Server.getBossInfo(o,true,this.receiveBossInfo.bind(m,o,n))}}},updateFail:function(){if(this._loadingAnimQueue){this._loadingAnimQueue.destroy()}this._scrollArea.list.loadingText.setText(Localization.getString(this._scrollArea.list.loadingText.info.text_fail))},_draw:function($super,p){$super(p);var o=this._scrollArea.getPosition();var m=this._scrollArea.list._definitions.eventRewardsButton.pos_y-this._scrollArea.list._definitions.eventTitle.pos_y-this._scrollArea.list._definitions.eventTitle.size_y;var n=(o.getY()>-m)?-o.getY():m;this._scrollArea.list.eventTitle.setPosition(this._scrollArea.list._definitions.eventTitle.pos_x,this._scrollArea.list._definitions.eventTitle.pos_y+n);TFSceneDirector.shiftUIElementUp(this._scrollArea.list.eventTitle);var l=this._scrollArea.list._definitions.eventRewardsButton.pos_y-this._scrollArea.list._definitions.helpButton.pos_y-this._scrollArea.list._definitions.helpButton.size_y;var k=(o.getY()>-l)?-o.getY():l;this._scrollArea.list.helpButton.setPosition(this._scrollArea.list._definitions.helpButton.pos_x,this._scrollArea.list._definitions.helpButton.pos_y+k);TFSceneDirector.shiftUIElementUp(this._scrollArea.list.helpButton)},destroy:function($super){this._destroying=true;if(this._loadingAnimQueue){this._loadingAnimQueue.destroy()}if(this._am){this._am.destroy()}$super()}})}};__ngs._ah={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var b=__ngs.r_(__ngs._8v).GLScrollView;a.RBEventRewardsView=b.subclass({classname:"RBEventRewardsView",initialize:function($super,d){this._controller=d;$super(d,"RBEventRewardsViewDefinition",function(){TFSceneDirector.shiftUIElementUp(this.eventImage);TFSceneDirector.shiftUIElementUp(this.eventImage2);TFSceneDirector.shiftUIElementUp(this.dropshadow);TFSceneDirector.shiftUIElementUp(this.overlay);TFSceneDirector.shiftUIElementUp(this.black);var e=this.eventImage.info.asset_dir+"/"+TFUserData.curEventId+"/";if(this.eventImage.info["asset_name_"+TFUserData.curEventId]){e=e+this.eventImage.info["asset_name_"+TFUserData.curEventId]}else{e=e+this.eventImage.info.asset_name}TFUtils.changeImageOnSprite(this.eventImage,e);TFUtils.changeImageOnSprite(this.eventImage2,e);this._controller._view=this;this._controller.doInitialize(this._controller.onViewsDoneLoading.bind(this._controller,this))}.bind(this))},replaceRewardsView:function(d){if(this._currentSubView){this._scrollArea.viewPlaceholder.removeChild(this._currentSubView);this._currentSubView.destroy()}this._scrollArea.viewPlaceholder.addChild(d);this._currentSubView=d;d.updateClipping()},updateClipping:function($super){$super();this._currentSubView.updateClipping()},destroy:function($super){$super()}})}};__ngs._ai={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._7p).View;a.RBEventRankRewardsView=c.subclass({classname:"RBEventRankRewardsView",initialize:function($super,d){this._currentYPosition=0;$super(d,"RBEventRankRewardsViewDefinition",function(){this.createRewardList()}.bind(this))},createRewardList:function(){this._parentController.fetchListItems("abc",function(g){this._currentYPosition=0;for(var e=0;e<g.length;++e){this.addChild(g[e]);g[e].setPosition(0,this._currentYPosition);this._currentYPosition+=360;for(var d=0;d<g[e]._descriptionRewardList.length;++d){this.addChild(g[e]._descriptionRewardList[d]);g[e]._descriptionRewardList[d].setPosition(0,this._currentYPosition);g[e]._descriptionRewardList[d].setDepth(100);this._currentYPosition+=70}}this._parentController.showRankRewardsDone(this)}.bind(this))},getTotalViewLength:function(){return this._currentYPosition},destroy:function($super){$super()}})}};__ngs._aj={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var e=__ngs.r_(__ngs._7p).View;var b=__ngs.r_(__ngs._89).CardThumbnailView;var a=__ngs.r_(__ngs._fd).RBEventRankRewardListCellView;c.RBEventRankRewardCellView=e.subclass({classname:"RBEventRankRewardCellView",initialize:function($super,g,h){this._rewardData=h;this._descriptionRewardList=[];$super(g,"RBEventRankRewardCellViewDefinition",function(){this.fillRewardList()}.bind(this))},fillRewardList:function(){console.log("RBEventRankRewardCellView > fillRewardList > rewardData : "+JSON.stringify(this._rewardData));this.rankRange.setText(Localization.getString("RANK")+" "+this._rewardData.lastRanking+" - "+this._rewardData.ranking);var g=[];var n=[];for(var m=0;m<this._rewardData.rewards.length;++m){var h=this._rewardData.rewards[m];if(h.type==TFGameData.GIFT_TYPE.CARDS){var o=TFCardsManager.getCardDefinition(h.value);h.cardDefinition=o;g.push(h)}else{n.push(h)}}if(g.length>0){for(var m=0;m<g.length&&m<2;++m){if(g[m].cardDefinition.cardFormId==1){var k=new b(this._parentController,g[m].cardDefinition.id,this._definitions.transformerCard.size_x,this._definitions.transformerCard.size_y,{anchor:[1,0],showSpinner:true});this.transformerCard.addChild(k)}if(g[m].cardDefinition.cardFormId==2){var k=new b(this._parentController,g[m].cardDefinition.id,this._definitions.altCard.size_x,this._definitions.altCard.size_y,{anchor:[0,0],showSpinner:true});this.altCard.addChild(k)}}}else{this.transformerCard.setVisible(false);this.altCard.setVisible(false)}for(var m=0;m<g.length;m++){var q=Localization.getString(g[m].cardDefinition.name);if(g[m].cardDefinition.cardFormId==2){q+=" "+Localization.getString("ui_altform_uc")}else{if(g[m].cardDefinition.cardFormId==1){q+=" "+Localization.getString("ui_robotmode_uc")}}q+=" X"+g[m].amount;var p=new a(this._parentController,q);p.addLoadDoneCallback(function(r,s){if(s<2){r.description.setColor(231/255,146/255,0)}}.bind(this,p,m));this._descriptionRewardList.push(p)}for(var m=0;m<n.length;++m){var l=TFUserData.getGiftDetails(n[m]);console.log("RBEventRankRewardCellView > fillRewardList > giftInfo : "+JSON.stringify(l));q+=l._amount+" "+l._desc;var p=new a(this._parentController,q);p.addLoadDoneCallback(function(r){}.bind(this));this._descriptionRewardList.push(p)}},getLength:function(){},destroy:function($super){$super()}})}};__ngs._ak={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._7p).View;a.RBEventPointRewardsView=c.subclass({classname:"RBEventPointRewardsView",initialize:function($super,d){this._currentYPosition=0;$super(d,"RBEventPointRewardsViewDefinition",function(){this.createRewardList()}.bind(this))},createRewardList:function(){this._parentController.fetchListItems("abc",function(e){this._currentYPosition=0;for(var d=0;d<e.length;++d){this.addChild(e[d]);e[d].setPosition(0,this._currentYPosition);this._currentYPosition+=200}this._parentController.showPointsRewardsDone(this)}.bind(this))},getTotalViewLength:function(){return this._currentYPosition},destroy:function($super){$super()}})}};__ngs._al={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._7p).View;var e=__ngs.r_(__ngs._s).TFUtils;var a=__ngs.r_(__ngs._89).CardThumbnailView;b.RBEventPointRewardCell=d.subclass({classname:"RBEventPointRewardCell",initialize:function($super,g,h){console.log("RBEventPointRewardCell > initialize > rewardData="+JSON.stringify(h));this._rewardData=h;$super(g,"RBEventPointRewardCellDefinition",function(k){this.fillData(k)}.bind(this,g))},fillData:function(l){console.log("RBEventPointRewardCell > fillData");var n="";var p="";var o=0;for(var k=0;k<this._rewardData.rewards.length;++k){var g=this._rewardData.rewards[k];if(g.amount>0){console.log("RBEventPointRewardCell > fillData > reward "+k+": "+JSON.stringify(g));var m=TFUserData.getGiftDetails(g);if(!m){continue}if(k!=0){n+=", "}n+=m._amount+" "+m._desc;p=m._img;if(m.type==70){o=m.value}}}this.itemName.setText(n);this.pointsNeeded.setText(this._rewardData.eventPoints+"+ "+Localization.getString("points"));if(o==0){this.itemImage.setVisible(true);e.changeImageOnSprite(this.itemImage,p)}else{var h=100;var q=100;this._rewardThumb=new a(l,o,h,q,{weapon:true,anchor:[0.5,0.5]});this.addChild(this._rewardThumb);this._rewardThumb.setPosition(70,100);this.itemImage.setVisible(false)}if(TFUserData.eventPoints>=this._rewardData.eventPoints){this.checkImage.setVisible(true)}},destroy:function($super){$super()}})}};__ngs._am={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._7p).View;a.RBLeaderBoardView=c.subclass({classname:"RBLeaderBoardView",initialize:function($super,d){this._controller=d;$super(d,"RBLeaderBoardViewDefinition",function(){this._controller.onViewsDoneLoading(this)}.bind(this))},destroy:function($super){$super()}})}};__ngs._an={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._7p).View;a.RBLeaderBoardCellView=c.subclass({classname:"RBLeaderBoardCellView",initialize:function($super,d,g,h,e){$super(d,"RBLeaderBoardCellViewDefinition",function(){this._playerData=g;this.playerButton.info=g;this._isOdd=h;this._highlightPlayer=e;this.fillUpData()}.bind(this))},fillUpData:function(){if(!this._playerData){this.rankBackground.setVisible(false);this.playerBackground.setVisible(false);this.pointsBackground.setVisible(false);this.player.setText(Localization.getString("ui_table_player_uc"));this.rank.setText(Localization.getString("ui_table_rank_uc"));this.points.setText(Localization.getString("ui_table_points_uc"));this.playerButton.setVisible(false);return}this.player.setText(this._playerData.gamerTag.toUpperCase());this.rank.setText(""+this._playerData.position);this.points.setText(""+this._playerData.points+" "+Localization.getString("ui_pt"));this.playerButton.setVisible(true);if(this._highlightPlayer===true){this.player.setColor(255,255,0);this.rank.setColor(255,255,0);this.points.setColor(255,255,0)}else{this.player.setColor(255,255,255);this.rank.setColor(255,255,255);this.points.setColor(255,255,255)}if(this._isOdd){this.rankBackground.setColor(99/255,184/255,255/255);this.playerBackground.setColor(99/255,184/255,255/255);this.pointsBackground.setColor(99/255,184/255,255/255)}else{this.rankBackground.setColor(72/255,118/255,255/255);this.playerBackground.setColor(72/255,118/255,255/255);this.pointsBackground.setColor(72/255,118/255,255/255)}},changeData:function(e,d){this._playerData=e;this._highlightPlayer=d;this.playerButton.info=e;this.fillUpData()},destroy:function($super){$super()}})}};__ngs._ao={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._7p).View;a.RBBossBattleLogView=c.subclass({classname:"RBBossBattleLogView",initialize:function($super,d){this._controller=d;$super(d,"RBBossBattleLogViewDefinition",function(){this._controller.onViewsDoneLoading(this)}.bind(this))},destroy:function($super){$super()}})}};__ngs._ap={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._7p).View;a.RBBossBattleLogCellView=c.subclass({classname:"RBBossBattleLogCellView",initialize:function($super,d,g,h,e){$super(d,"RBBossBattleLogCellViewDefinition",function(){this._playerData=g;this._isOdd=h;this._standing=e;if(g){this._highlight=(g.gamerTag==TFUserData.getGamerTag()?true:false)}this.fillUpData()}.bind(this))},fillUpData:function(){if(!this._playerData){this.standingBackground.setVisible(false);this.playerBackground.setVisible(false);this.levelBackground.setVisible(false);this.damageBackground.setVisible(false);this.standing.setText(Localization.getString("ui_table_rank_uc"));this.player.setText(Localization.getString("ui_table_player_uc"));this.level.setText(Localization.getString("ui_table_level_uc"));this.damage.setText(Localization.getString("ui_table_damage_uc"));return}this.standing.setText(""+this._standing);this.player.setText(this._playerData.gamerTag);this.level.setText(""+this._playerData.level);this.damage.setText(""+this._playerData.bossDamage);if(this._highlight){this.player.setColor(255,255,0)}if(this._isOdd){this.standingBackground.setColor(99/255,184/255,255/255);this.playerBackground.setColor(99/255,184/255,255/255);this.levelBackground.setColor(99/255,184/255,255/255);this.damageBackground.setColor(99/255,184/255,255/255)}else{this.standingBackground.setColor(72/255,118/255,255/255);this.playerBackground.setColor(72/255,118/255,255/255);this.levelBackground.setColor(72/255,118/255,255/255);this.damageBackground.setColor(72/255,118/255,255/255)}},changeData:function(d){this._playerData=d;this.fillUpData()},destroy:function($super){$super()}})}};__ngs._aq={_c:null,_d:function(){var g={exports:{}};var c=g.exports;this._c=g;var k=__ngs.r_(__ngs._7p).View;var h=__ngs.r_(__ngs._3x).Social;var b=__ngs.r_(__ngs._45).AnimationManager;var e=__ngs.r_(__ngs._45).AnimationQueue;var a=__ngs.r_(__ngs._89).CardThumbnailView;var d=__ngs.r_(__ngs._48).TFSoundManager;c.RBBossDetailView=k.subclass({classname:"RBBossDetailView",SOUND_KEY_BOSS_DEFEATED:"RaidBoss_Defeated_03",SOUND_KEY_BOSS_FAILURE:"RaidBoss_Failure_01",keyPlayerTitles:["firstAttacker","mvp","finisher"],KEY_PLAYER:{FIRST_ATTACKER:0,MVP:1,FINISHER:2},initialize:function($super,l){this._controller=l;$super(l,"RBBossDetailViewDefinition",function(){this._firstTime=true;TFSceneDirector.shiftUIElementUp(this.backgroundImageRobot);TFSceneDirector.shiftUIElementUp(this.backgroundImageAlt);TFSceneDirector.shiftUIElementDown(this.dropshadow);TFSceneDirector.shiftUIElementDown(this.black);TFSceneDirector.shiftUIElementDown(this.bossRewardsButton);TFSceneDirector.shiftUIElementUp(this.refreshButton);TFSceneDirector.shiftUIElementUp(this.defeatedBanner);var o=this._definitions.cardPanel.info.card_w;var t=this._definitions.cardPanel.info.card_h;panel=new a(this,undefined,o,t);panel.disableTap();this.cardPanel.addChild(panel);this._cardPanel=panel;this.cardPanel.setVisible(false);this._eventInfo=TFGameData.getEventInfo(TFUserData.curEventId);this._bossDefinition=TFGameData.getBossDefinition(TFUserData.curEventId,this._controller._bossInfo.bossInfo.definitionId);console.log("RBBossDetailView > initialize > boss definition="+JSON.stringify(this._bossDefinition));var q=this._bossDefinition.deckPower[0].gearId;TFUtils.setRemoteImageOnSprite(this.backgroundImageRobot,TFUtils.getCardFullImagePath(q-2));var s=this.backgroundImageRobot.getPosition().getX();var r=this.backgroundImageRobot.getPosition().getY();var n=1;if(this.backgroundImageRobot.info&&this.backgroundImageRobot.info[""+q]){console.log("RBBossDetailView > initialize > robot form parameters: x="+this.backgroundImageAlt.info[""+q].offset_x+", y="+this.backgroundImageAlt.info[""+q].offset_y+", scale="+this.backgroundImageAlt.info[""+q].scale);s+=this.backgroundImageRobot.info[""+q].offset_x||0;r+=this.backgroundImageRobot.info[""+q].offset_y||0;n=this.backgroundImageRobot.info[""+q].scale||1}else{if(this.backgroundImageRobot.info&&this.backgroundImageRobot.info.default_params){s+=this.backgroundImageRobot.info.default_params.offset_x||0;r+=this.backgroundImageRobot.info.default_params.offset_y||0;n=this.backgroundImageRobot.info.default_params.scale||1}else{r-=150}}this.backgroundImageRobot.setPosition(s,r);this.backgroundImageRobot.setScale(n);TFUtils.setRemoteImageOnSprite(this.backgroundImageAlt,TFUtils.getCardFullImagePath(q-1));s=this.backgroundImageAlt.getPosition().getX();r=this.backgroundImageAlt.getPosition().getY();n=1;if(this.backgroundImageAlt.info&&this.backgroundImageAlt.info[""+q]){console.log("RBBossDetailView > initialize > alt form parameters: x="+this.backgroundImageAlt.info[""+q].offset_x+", y="+this.backgroundImageAlt.info[""+q].offset_y+", scale="+this.backgroundImageAlt.info[""+q].scale);s+=this.backgroundImageAlt.info[""+q].offset_x||0;r+=this.backgroundImageAlt.info[""+q].offset_y||0;n=this.backgroundImageAlt.info[""+q].scale||1}else{if(this.backgroundImageAlt.info&&this.backgroundImageAlt.info.default_params){s+=this.backgroundImageAlt.info.default_params.offset_x||0;r+=this.backgroundImageAlt.info.default_params.offset_y||0;n=this.backgroundImageAlt.info.default_params.scale||1}else{r-=150}}this.backgroundImageAlt.setPosition(s,r);this.backgroundImageAlt.setScale(n);this._am=new b();var u=new e(this._am);u.pushAnimation(8000,b.Linear);u.pushAnimation(2000,b.Linear);u.tween(e.Interpolate.scalar(1,0),function(v){this.backgroundImageRobot.setAlpha(v)}.bind(this));u.pushAnimation(8000,b.Linear);u.pushAnimation(2000,b.Linear);u.tween(e.Interpolate.scalar(0,1),function(v){this.backgroundImageRobot.setAlpha(v)}.bind(this));u.startLooped();for(var p=1;p<=3;p++){var m=this.attackButtons["attackButton"+p];m.title.setOverflowMode(GL2.Text.OverflowMode.ReduceFontSize);m.title.setText(Core.Localization.getString(m.info.attackTitle));m.title.setColor([m.info.textColor[0]/255,m.info.textColor[1]/255,m.info.textColor[2]/255]);m.damageModText.setText(Core.Localization.getString(m.info.damageModText));m.button.numPts=m.info.numPts;if(m.info.numPts<3){TFUtils.changeImageOnSprite(m.battleEnergyIcon3,m.battleEnergyIcon3.info.asset_off)}if(m.info.numPts<2){TFUtils.changeImageOnSprite(m.battleEnergyIcon2,m.battleEnergyIcon2.info.asset_off)}}this.numPoints.setText(sprintf(Localization.getString("ui_Xpt_var"),this._bossDefinition.eventPoints));this.bossName.setText(Localization.getString(this._bossDefinition.name).toUpperCase());for(var p=1;p<=3;p++){this.keyPlayers["keyPlayer"+p].bgTitle.setColor(this.keyPlayers["keyPlayer"+p].info.bgColor[0]/255,this.keyPlayers["keyPlayer"+p].info.bgColor[1]/255,this.keyPlayers["keyPlayer"+p].info.bgColor[2]/255);this.keyPlayers["keyPlayer"+p].bgName.setColor(this.keyPlayers["keyPlayer"+p].info.bgColor[0]/255,this.keyPlayers["keyPlayer"+p].info.bgColor[1]/255,this.keyPlayers["keyPlayer"+p].info.bgColor[2]/255);this.keyPlayers["keyPlayer"+p].bgDamage.setColor(this.keyPlayers["keyPlayer"+p].info.bgColor[0]/255,this.keyPlayers["keyPlayer"+p].info.bgColor[1]/255,this.keyPlayers["keyPlayer"+p].info.bgColor[2]/255)}this.timeLeft.setOverflowMode(GL2.Text.OverflowMode.ReduceFontSize);this._fullTimeLeft=false;if(TFUtils.onDev()){this.timeLeftButton.setVisible(true)}this.updateTimeLeft();if(TFUtils.onDev()){this.quickExpireButton.setVisible(true);this.attackButtons.fullEnergyButton.setVisible(true)}this.attackButtons.numRecharge.setText("x"+TFUserData.getItemQuantity(201));this._prevPoints=TFUserData.eventPoints;this._prevRanking=TFUserData.eventRanking;this.update(this._controller._bossInfo);this._controller.onViewsDoneLoading(this)}.bind(this))},update:function(n){console.log("RBBossDetailView > update > bossInfo="+JSON.stringify(n));this._controller._bossInfo=n;for(var q=1;q<=3;q++){var t=this.keyPlayers["keyPlayer"+q];t.title.setText(Core.Localization.getString(t.info.title));t.damage.setOverflowMode(GL2.Text.OverflowMode.ReduceFontSize);t.name.setOverflowMode(GL2.Text.OverflowMode.ReduceFontSize);if(n[this.keyPlayerTitles[q-1]]){t.damage.setText(""+n[this.keyPlayerTitles[q-1]].bossDamage);t.playerName=n[this.keyPlayerTitles[q-1]].gamerTag||"ui_unknown";t.name.setText(""+t.playerName.toUpperCase())}else{t.damage.setText("-");t.name.setText("-")}}if(n[this.keyPlayerTitles[this.KEY_PLAYER.FINISHER]]&&(n[this.keyPlayerTitles[this.KEY_PLAYER.FINISHER]].name==TFUserData.name)){console.log("RBBossDetailView > update > player did kill this boss");this._didKillBoss=true}if(n.history){for(var q in n.history){if(n.history[q].name==TFUserData.name){console.log("RBBossDetailView > update > player did participate in boss battle");this._didHurtBoss=true;break}}}var r=Math.floor(100*n.bossInfo.hp/this._bossDefinition.deckPower[0].hp);this.hitPoints.hpLabel.setText(n.bossInfo.hp+" / "+this._bossDefinition.deckPower[0].hp+" ("+r+"%)");this.hitPoints.hpBar.setProgress(r);if(n.bossInfo.hp==0){var s=n.bossInfo;console.log("RBBossDetailView > update > fromBattle="+this._controller._fromBattle+", didKillBoss="+this._didKillBoss);if(this._controller._fromBattle&&this._didKillBoss){TFAnalytics.reportGameEvent("RAIDBOSSDEFEAT",{eventid:TFUserData.curEventId,bossid:n.bossInfo.definitionId,instanceid:n.bossInfo.id,expire_time:s.expirationTime,helpers:""+s.helpRequested,instanceid1:n.bossInfo.id.slice(0,18),instanceid2:n.bossInfo.id.slice(18),finish_user:n.finisher.gamerTag,first_attack_user:n.firstAttacker.gamerTag,mvp_user:n.mvp.gamerTag,epoints:TFUserData.eventPoints});var o=new e(this._am);o.pushAnimation(1000,b.Linear);o.pushAnimation(500,b.Linear);o.tween(e.Interpolate.scalar(0,1),function(u){this.defeatedBanner.setScale(2);this.defeatedBanner.setVisible(true);this.defeatedBanner.setAlpha(u)}.bind(this));o.pushCallback(d.playSound.bind(d,this.SOUND_KEY_BOSS_DEFEATED));o.pushAnimation(100,b.EaseInFast);o.tween(e.Interpolate.scalar(2,1),function(u){this.defeatedBanner.setScale(u)}.bind(this));o.start()}else{this.defeatedBanner.setVisible(true)}if(this._didHurtBoss){this.bossDefeated.collectRewardsButton.setVisible(true)}}else{if(this._controller._fromBattle&&this._firstTime&&this._didKillBoss){this._firstTime=false;d.playSound(this.SOUND_KEY_BOSS_FAILURE)}}this.playersFighting.firstAttackMessage.setVisible(false);this.playersFighting.battleLogPanel.setVisible(false);this.playersFighting.askForHelpPanel.setVisible(false);var l=this.numPlayersFighting(n.history);this.playersFighting.numPlayers.setText(""+l);var m=this._bossDefinition.friendship_bonus_user_num;if(n.bossInfo.hp==0){console.log("RBBossDetailView > update > BOSS DEFEATED");this.attackButtons.setVisible(false);this.playersFighting.numPlayersBox.setVisible(true);this.playersFighting.numPlayers.setVisible(true);this.playersFighting.playersFightingText.setVisible(true);this.playersFighting.playersFightingText.setText(Localization.getString((l==1)?"ui_playerparticipated":"ui_playersparticipated"));this.playersFighting.battleLogPanel.setVisible(true);this.bossDefeated.setVisible(true);this.bossRewardsButton.setVisible(false);this.hitPoints.hpLabel.setText(Localization.getString(this.hitPoints.hpLabel.info.textDefeated));this.hitPoints.hpLabel.setColor(this.hitPoints.hpLabel.info.textColorDefeated[0]/255,this.hitPoints.hpLabel.info.textColorDefeated[1]/255,this.hitPoints.hpLabel.info.textColorDefeated[2]/255);this.hitPoints.hpLabel.setFontSize(this.hitPoints.hpLabel.info.textFontSizeDefeated)}else{if(this._timesup){console.log("RBBossDetailView > update > BOSS ESCAPED");this.setBossEscaped()}else{if(n.bossInfo.hp==this._bossDefinition.deckPower[0].hp){console.log("RBBossDetailView > update > BOSS UNDAMAGED");this.playersFighting.firstAttackMessage.setVisible(true)}else{if(n.helpRequested==false){console.log("RBBossDetailView > update > PLAYER HAS NOT REQUESTED HELP");this.playersFighting.numPlayersBox.setVisible(true);this.playersFighting.numPlayers.setVisible(true);this.playersFighting.playersFightingText.setVisible(true);this.playersFighting.askForHelpPanel.setVisible(true);this.playersFighting.askForHelpPanel.askForHelpButton2.setHighlighted(true);this.playersFighting.askForHelpPanel.askForHelpButton2.setAlpha(0);var p=new e(this._am);p.pushAnimation(400,b.EaseInOut);p.tween(e.Interpolate.scalar(0,1),function(u){this.playersFighting.askForHelpPanel.askForHelpButton2.setAlpha(u)}.bind(this));p.pushAnimation(400,b.EaseInOut);p.tween(e.Interpolate.scalar(1,0),function(u){this.playersFighting.askForHelpPanel.askForHelpButton2.setAlpha(u)}.bind(this));p.startLooped();this.playersFighting.numPlayers.setText(1);this.playersFighting.playersFightingText.setText(sprintf(Localization.getString((l==1)?"ui_playerfighting_ml_var":"ui_playersfighting_ml_var"),m))}else{console.log("RBBossDetailView > update > NORMAL");this.playersFighting.numPlayersBox.setVisible(true);this.playersFighting.numPlayers.setVisible(true);this.playersFighting.playersFightingText.setVisible(true);this.playersFighting.battleLogPanel.setVisible(true);this.playersFighting.askForHelpPanel.setVisible(false);this.playersFighting.playersFightingText.setText(sprintf(Localization.getString((l==1)?"ui_playerfighting_ml_var":"ui_playersfighting_ml_var"),m))}}}}this.updateBattleEnergy(TFUserData.getBattleEnergy())},setBossEscaped:function(){var l=this.numPlayersFighting(this._controller._bossInfo.history);this.playersFighting.numPlayersBox.setVisible(true);this.playersFighting.numPlayers.setVisible(true);this.playersFighting.playersFightingText.setVisible(true);this.playersFighting.playersFightingText.setText(Localization.getString((l==1)?"ui_playerparticipated":"ui_playersparticipated"));this.playersFighting.battleLogButton.setVisible(true);this.playersFighting.firstAttackMessage.setVisible(false);this.playersFighting.askForHelpPanel.setVisible(false);this.bossEscaped.setVisible(true);this.attackButtons.setVisible(false);this.bossRewardsButton.setVisible(false);this.refreshButton.setVisible(false);TFSceneDirector.hideBottomHud(true)},updateBattleEnergy:function(l){this.attackButtons.attackButton1.rechargeBanner.setVisible(false);this.attackButtons.attackButton2.rechargeBanner.setVisible(false);this.attackButtons.attackButton3.rechargeBanner.setVisible(false);if(l<3){this.attackButtons.attackButton3.rechargeBanner.setVisible(true);this.attackButtons.attackButton3.rechargeBanner.rechargeAmount.setText("x"+(3-l))}if(l<2){this.attackButtons.attackButton2.rechargeBanner.setVisible(true);this.attackButtons.attackButton2.rechargeBanner.rechargeAmount.setText("x"+(2-l))}if(l<1){this.attackButtons.attackButton1.rechargeBanner.setVisible(true);this.attackButtons.attackButton1.rechargeBanner.rechargeAmount.setText("x"+(1-l))}},numPlayersFighting:function(o){if(!o){return 1}var p={};for(var m in o){p[o[m].name]=1}var n=0;for(var l in p){if(p.hasOwnProperty(l)){++n}}return n},playerAvatarLoaded:function(m){var l=m.imageFile;Storage.FileSystem.stat(l,{},function(o,n){if(o){console.log("An error occurred while retrieving file information: "+o.description)}else{if(m&&m.button){var p=new GL2.Texture(l,{readImageAsync:true},function(r,q){if(r){console.log("Unable to read image file: "+q.getFilename()+" error : "+r.description)}else{console.log("The image file was read: "+q.getFilename());this.setAvatar(m.button,l);q.destroy()}}.bind(this))}}}.bind(this))},setAvatar:function(m,l){m.setImage(l)},updateTimeLeft:function(){if(this._destroying){return}var m=false;var p;if(this._controller._bossInfo&&(this._controller._bossInfo.bossInfo.hp==0)){console.log("RBBossDetailView > updateTimeLeft > BOSS DEFEATED");p=Localization.getString("ui_defeated2_uc");this.refreshButton.setVisible(false);m=true}else{var o=Server.getServerTime();var l=new Date(this._eventInfo.expirationTime).valueOf();var n=(this._controller._bossInfo.bossInfo.expirationTime<l)?this._controller._bossInfo.bossInfo.expirationTime:l;if(o<n){var q=n-o;if(this._fullTimeLeft&&TFUtils.onDev()){p=TFUtils.timeToHuman(q/1000,true)}else{p=TFUtils.timeToHumanTwoElement(q/1000)}}else{console.log("RBBossDetailView > updateTimeLeft > BOSS TIME UP");p=Localization.getString("ui_timesup_uc");m=true;this._timesup=true;if(this._notFirstUpdate){this._controller.updateBossInfoNow(true)}}}this._notFirstUpdate=true;this.timeLeft.setText(p);if(!m){setTimeout(this.updateTimeLeft.bind(this),1000)}},destroy:function($super){this._am.destroy();this._destroying=true;$super()}})}};__ngs._ar={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var d=__ngs.r_(__ngs._7l).DialogController;var c=__ngs.r_(__ngs._e0).LevelUpView;var e=__ngs.r_(__ngs._s).TFUtils;a.RBReinforcementsController=d.subclass({classname:"RBReinforcementsController",initialize:function($super,y,x){$super(LevelUpView,x);this._otherData=y;this._destroyCB=this._otherData.destroyCB;this._callback=null;if(x){this.getView().showShade()}if(this._otherData.players.length==0){this.getView().reinforcementsStatic.setText(Localization.getString("ui_noreinforcements"))}else{var q=480+this.getView()._definitions.reinforcementsStatic.pos_y;var s=10;var w=640-q-q;var v=960-q-this.getView()._definitions.reinforcementsStatic.size_y-q;var m=3;var l=Math.floor(v/(w/m));while((m*l)<this._otherData.players.length){m++;l=Math.floor(v/(w/m))}var k=((w-((m-1)*s))/m);var z=k/150;var g=__ngs.r_(__ngs._fe).RBReinforcementsCellView;var n=0;var o=this.getView()._definitions.reinforcementsStatic.pos_y+this.getView()._definitions.reinforcementsStatic.size_y;for(var u=0;(u<l)&&(n<this._otherData.players.length);u++){var p=-320+q+k*z*0.5;for(var t=0;(t<m)&&(n<this._otherData.players.length);t++){var r=this._otherData.players[n];var h=new g(this);h.addLoadDoneCallback(function(B,D,C,A){B.name.setPosition(B._definitions.avatar.pos_x,B._definitions.avatar.pos_y+B._definitions.avatar.size_y);B.setScale(z);B.setPosition(C,A);this.getView().addChild(B);B.name.setText(D.gamerTag.toUpperCase());B.playerButton={};e.downloadAvatars([D.name],this.receiveReinforcementAvatar.bind(this),B)}.bind(this,h,r,p,o));n++;p+=k+s}o+=k+s}}},dismissDialog:function($super){$super();if(this._destroyCB){this._destroyCB()}}})}};__ngs._as={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._7p).View;a.RBBattleView=c.subclass({classname:"RBBattleView",initialize:function($super,d){this._controller=d;$super(d,"RBBattleViewDefinition",function(){this._controller.onViewsDoneLoading(this)}.bind(this))},destroy:function($super){$super()}})}};__ngs._at={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var a=__ngs.r_(__ngs._45).AnimationManager;var c=__ngs.r_(__ngs._45).AnimationQueue;b.FightAnimation=Core.Class.subclass({classname:"FightAnimation",initialize:function(e){this.animationManager=new a();this.animations=[];this.animationQueues=[];this.currentAnimation=0;this._stopAnimation=false;this.rootNode=e},addAnimation:function(e){this.animations.push(e)},executeAnimation:function(){for(var e=0;e<this.animations.length;e++){this.animations[e].preload();this.animationQueues=this.animationQueues.concat(this.animations[e].getAnimations(this))}this.executeNextAnimation()},executeNextAnimation:function(){if(this._stopAnimation){console.log("FightAnimation > executeNextAnimation > Forced stop!");return}if(this.animationQueues[this.currentAnimation]){this.animationQueues[this.currentAnimation++].start()}},stopAnimation:function(){this._stopAnimation=true},destroy:function(){this.stopAnimation();for(var e=0;e<this.animations.length;++e){this.animations[e].destroy()}for(var e=0;e<this.animationQueues.length;++e){this.animationQueues[e].destroy()}this.animationManager.abort()}})}};__ngs._au={_c:null,_d:function(){var e={exports:{}};var a=e.exports;this._c=e;var g=__ngs.r_(__ngs._ff).SingleFightAnimation;var d=__ngs.r_(__ngs._45).AnimationQueue;var b=__ngs.r_(__ngs._62).TFParticleManager;var c=__ngs.r_(__ngs._48).TFSoundManager;a.MeleeHit=g.subclass({classname:"MeleeHit",initialize:function(h,k){this.attackingCard=h;this.attackedUnit=k},preload:function(){this.slash=b.createEmitter("sword_slash");this.slashSparks=b.createEmitter("swordSlashSparks")},getAnimations:function(l){var h=new d(l.animationManager);h.pushCallback(function(){c.playSound("Battle_Slash_01")});var m=this.attackingCard._position;var k=this.attackedUnit[0]._position;this.attackedUnit[0]._oldPosition=new Core.Point(this.attackedUnit[0]._position);if(this.attackedUnit[1]){this.attackedUnit[1]._oldPosition=new Core.Point(this.attackedUnit[1]._position)}if(this.attackedUnit[2]){this.attackedUnit[2]._oldPosition=new Core.Point(this.attackedUnit[2]._position)}h.pushAnimation(200,d.Curve.EaseIn);h.tween(d.Interpolate.point(m,k),function(n){this.setPosition(n.getX(),n.getY())}.bind(this.attackingCard));h.pushCallback(function(n){n.rootNode.addChild(this.slash);this.slash.setPosition(this.attackedUnit[0]._oldPosition);n.rootNode.addChild(this.slashSparks);this.slashSparks.setPosition(this.attackedUnit[0]._oldPosition);this.slash.play();this.slashSparks.play()}.bind(this,l));h.pushCallback(function(){this.executeNextAnimation()}.bind(l));h.pushAnimation(200,d.Curve.EaseIn);h.tween(d.Interpolate.point(k,m),function(n){this.setPosition(n.getX(),n.getY())}.bind(this.attackingCard));return[h]},destroy:function(){if(this.slash&&this.slash.__objectRegistryId){this.slash.destroy()}if(this.slashSparks&&this.slashSparks.__objectRegistryId){this.slashSparks.destroy()}}})}};__ngs._av={_c:null,_d:function(){var e={exports:{}};var a=e.exports;this._c=e;var g=__ngs.r_(__ngs._ff).SingleFightAnimation;var d=__ngs.r_(__ngs._45).AnimationQueue;var b=__ngs.r_(__ngs._62).TFParticleManager;var c=__ngs.r_(__ngs._48).TFSoundManager;a.LaserShot=g.subclass({classname:"LaserShot",initialize:function(k,l,h){this.attackingCard=k;this.attackedUnit=l;this.isAutoBot=h},preload:function(){if(this.isAutoBot){this.redLaser=b.createEmitter("red_laser");this.explosion=b.createEmitter("red_explosion")}else{this.redLaser=b.createEmitter("purple_laser");this.explosion=b.createEmitter("purple_explosion")}},getAnimations:function(l){var h=new d(l.animationManager);var m=this.attackingCard._position;var k=this.attackedUnit[0]._position;h.pushCallback(function(){c.playSound("Battle_Blaster_02")});h.pushCallback(function(n){n.rootNode.addChild(this.redLaser);this.redLaser.play();this.redLaser.setDepth(1000);this.redLaser.setPosition(m);this.redLaser.setRotation(this.getAttackAngle())}.bind(this,l));h.pushAnimation(400,d.Curve.EaseIn);h.tween(d.Interpolate.point(m,k),function(n,p,o){this.setPosition(o.getX(),o.getY());var q=1;if(n._y>p._y){q=1-((o.getY()-n._y)/(p._y-n._y))*0.4}else{q=0.6+((o.getY()-n._y)/(p._y-n._y))*0.4}this.setScale(q,q)}.bind(this.redLaser,m,k));h.pushCallback(function(o,n,p){o.rootNode.addChild(this.explosion);this.explosion.setPosition(p);if(n._y>p._y){this.explosion.setScale(0.6,0.6)}this.explosion.setDepth(1000);this.explosion.play();this.redLaser.setVisible(false)}.bind(this,l,m,k));h.pushAnimation(50);h.pushCallback(function(){this.executeNextAnimation()}.bind(l));return[h]},getAttackAngle:function(){var k=this.attackingCard._position;var h=this.attackedUnit[0]._position;return Math.atan2(h._y-k._y,h._x-k._x)*(180/Math.PI)+90},destroy:function(){if(this.redLaser&&this.redLaser.__objectRegistryId){this.redLaser.destroy()}if(this.explosion&&this.explosion.__objectRegistryId){this.explosion.destroy()}}})}};__ngs._aw={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var d=__ngs.r_(__ngs._ff).SingleFightAnimation;var b=__ngs.r_(__ngs._45).AnimationQueue;a.HitShake=d.subclass({classname:"HitShake",initialize:function(e){this.attackedUnit=e},preload:function(){},getAnimations:function(e){var h=new b(e.animationManager);for(var g=0;g<this.attackedUnit.length;++g){this.attackedUnit[g]._oldPosition=new Core.Point(this.attackedUnit[g]._position)}h.pushAnimation(30,b.Curve.Linear);h.tween(b.Interpolate.point(new Core.Point(0,0),new Core.Point(-40,-40)),function(l){var m=[];for(var k=0;k<this.attackedUnit.length;++k){m[k]=this.attackedUnit[k]._oldPosition;this.attackedUnit[k].setPosition(m[k]._x+l._x,m[k]._y+l._y)}}.bind(this));h.pushAnimation(30,b.Curve.Linear);h.tween(b.Interpolate.point(new Core.Point(0,0),new Core.Point(40,40)),function(l){var m=[];for(var k=0;k<this.attackedUnit.length;++k){m[k]=this.attackedUnit[k]._oldPosition;this.attackedUnit[k].setPosition(m[k]._x+l._x,m[k]._y+l._y)}}.bind(this));h.pushAnimation(30,b.Curve.Linear);h.tween(b.Interpolate.point(new Core.Point(0,0),new Core.Point(-40,-40)),function(l){var m=[];for(var k=0;k<this.attackedUnit.length;++k){m[k]=this.attackedUnit[k]._oldPosition;this.attackedUnit[k].setPosition(m[k]._x+l._x,m[k]._y+l._y)}}.bind(this));h.pushAnimation(30,b.Curve.Linear);h.tween(b.Interpolate.point(new Core.Point(0,0),new Core.Point(40,40)),function(l){var m=[];for(var k=0;k<this.attackedUnit.length;++k){m[k]=this.attackedUnit[k]._oldPosition;this.attackedUnit[k].setPosition(m[k]._x+l._x,m[k]._y+l._y)}}.bind(this));h.pushCallback(function(){for(var k=0;k<this.attackedUnit.length;++k){this.attackedUnit[k].setPosition(this.attackedUnit[k]._oldPosition)}}.bind(this));h.pushAnimation(150);h.pushCallback(function(){this.executeNextAnimation()}.bind(e));return[h]},destroy:function(){}})}};__ngs._ax={_c:null,_d:function(){var e={exports:{}};var a=e.exports;this._c=e;var g=__ngs.r_(__ngs._ff).SingleFightAnimation;var d=__ngs.r_(__ngs._45).AnimationQueue;var b=__ngs.r_(__ngs._62).TFParticleManager;var c=__ngs.r_(__ngs._48).TFSoundManager;a.MissileShot=g.subclass({classname:"MissileShot",initialize:function(h,k){this.attackingCard=h;this.attackedUnit=k},preload:function(){this.missile=b.createEmitter("missile");this.trail=b.createEmitter("missileTrail");this.explosion=b.createEmitter("missileExplosion")},getAnimations:function(l){var h=new d(l.animationManager);var n=this.attackingCard._position;var k=this.attackedUnit[0]._position;var m=this.getAttackAngle();h.pushCallback(function(){c.playSound("Battle_Missile_Fire_01")});h.pushCallback(function(p,o){p.rootNode.addChild(this.missile);this.missile.play();this.missile.setDepth(1000);this.missile.setPosition(n);this.missile.setRotation(o);this.missile.addChild(this.trail);this.trail.play();this.trail.setDepth(-10);this.trail.setPosition(0,25)}.bind(this,l,m));h.pushAnimation(400,d.Curve.EaseIn);h.tween(d.Interpolate.point(n,k),function(o,q,p){this.missile.setPosition(p.getX(),p.getY());var r=1;if(o._y>q._y){r=1-((p.getY()-o._y)/(q._y-o._y))*0.4}else{r=0.6+((p.getY()-o._y)/(q._y-o._y))*0.4}this.missile.setScale(r,r)}.bind(this,n,k));h.pushCallback(function(p,o,q){p.rootNode.addChild(this.explosion);this.explosion.setPosition(q);if(o._y>q._y){this.explosion.setScale(0.6,0.6)}this.explosion.setDepth(1000);this.explosion.play();this.missile.setVisible(false);this.trail.setVisible(false)}.bind(this,l,n,k));h.pushAnimation(50);h.pushCallback(function(){this.executeNextAnimation()}.bind(l));return[h]},getAttackAngle:function(){var k=this.attackingCard._position;var h=this.attackedUnit[0]._position;return Math.atan2(h._y-k._y,h._x-k._x)*(180/Math.PI)+90},destroy:function(){if(this.missile&&this.missile.__objectRegistryId){this.missile.destroy()}if(this.trail&&this.trail.__objectRegistryId){this.trail.destroy()}if(this.explosion&&this.explosion.__objectRegistryId){this.explosion.destroy()}}})}};__ngs._ay={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var d=__ngs.r_(__ngs._ff).SingleFightAnimation;var b=__ngs.r_(__ngs._45).AnimationQueue;a.IntroAnimation3D=d.subclass({classname:"IntroAnimation3D",initialize:function(g,h,e){this.playerCards=g;this.opponentCards=h;this.background=e},preload:function(){},getAnimations:function(g){var e=new b(g.animationManager);var h=2.5;e.pushAnimation(400*h,b.Curve.Linear);e.tween(b.Interpolate.scalar(0,1),function(m){if(m>0.2){this.background.setAlpha(m)}var p=0.4;var q=0.3;var k=-0.1;for(var l=0;l<3;++l){this.playerCards[l*3].setScale(1+p*m);this.playerCards[l*3+1].setScale(1+q*m);this.playerCards[l*3+2].setScale(1+q*m);if(this.opponentCards[l*3+1]){this.opponentCards[l*3+1].setScale(1+k*m)}if(this.opponentCards[l*3+2]){this.opponentCards[l*3+2].setScale(1+k*m)}}var o=[2.5/h,3/h,1.8/h,0,0.65/h,-0.65/h,-2.5/h,-1.8/h,-3/h];var n=[0,-2/h,-2/h,0,-2/h,-2/h,0,-2/h,-2/h];if(this.opponentCards.length>1){for(var l=0;l<this.opponentCards.length;l++){this.opponentCards[l].setPosition(this.opponentCards[l]._position._x+o[l],this.opponentCards[l]._position._y+n[l])}}else{this.opponentCards[0].setPosition(this.opponentCards[0]._position._x+o[3],this.opponentCards[0]._position._y+n[3])}}.bind(this));e.pushCallback(function(){this.executeNextAnimation()}.bind(g));return[e]},destroy:function(){}})}};__ngs._az={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var d=__ngs.r_(__ngs._ff).SingleFightAnimation;var b=__ngs.r_(__ngs._45).AnimationQueue;a.ExecuteFunction=d.subclass({classname:"ExecuteFunction",initialize:function(e){this.cb=e},preload:function(){},getAnimations:function(g){var e=new b(g.animationManager);e.pushAnimation(50);e.pushCallback(this.cb);e.pushCallback(function(){this.executeNextAnimation()}.bind(g));return[e]},destroy:function(){}})}};__ngs._b0={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var d=__ngs.r_(__ngs._ff).SingleFightAnimation;var b=__ngs.r_(__ngs._45).AnimationQueue;a.SlideCardsIn=d.subclass({classname:"SlideCardsIn",initialize:function(e,g){this.playerCards=e;this.opponentCards=g},preload:function(){},getAnimations:function(e){var g=new b(e.animationManager);var l=new b(e.animationManager);var k=[120,70,170,320,270,370,520,470,570];var m=[745,610,610,745,610,610,745,610,610];var o=[120,70,170,320,270,370,520,470,570];var n=[200,335,335,200,335,335,200,335,335];g.pushCallback(function(){this.executeNextAnimation()}.bind(e));for(var h=0;h<this.playerCards.length;++h){g.pushAnimation(100,b.Curve.EaseOut);g.tween(b.Interpolate.point(this.playerCards[8-h]._position,new Core.Point(k[8-h],m[8-h])),function(p,q){this.playerCards[8-p].setPosition(q._x,q._y)}.bind(this,h));if(this.opponentCards.length>1){l.pushAnimation(100,b.Curve.EaseOut);l.tween(b.Interpolate.point(this.opponentCards[h]._position,new Core.Point(o[h],n[h])),function(p,q){this.opponentCards[p].setPosition(q._x,q._y)}.bind(this,h))}}if(this.opponentCards.length==1){l.pushAnimation(100,b.Curve.EaseOut);l.tween(b.Interpolate.point(this.opponentCards[0]._position,new Core.Point(320,250)),function(p){this.opponentCards[0].setPosition(p._x,p._y)}.bind(this))}l.pushCallback(function(){this.executeNextAnimation()}.bind(e));return[g,l]},destroy:function(){}})}};__ngs._b1={_c:null,_d:function(){var a={exports:{}};var d=a.exports;this._c=a;var k=__ngs.r_(__ngs._ff).SingleFightAnimation;var b=__ngs.r_(__ngs._45).AnimationQueue;var g=__ngs.r_(__ngs._t).SpriteFactoryCache;var e=__ngs.r_(__ngs._s).TFUtils;var h=__ngs.r_(__ngs._48).TFSoundManager;var c=__ngs.r_(__ngs._4b).UILoader;var l=__ngs.r_(__ngs._4a).TFImageManager;d.TransformingBonus=k.subclass({classname:"TransformingBonus",initialize:function(m,n){this.transformingCards=m;this.cardsData=n;this.bottomTextsData=[];this.textsData=[];this.bonusTexts=[];this.bottomBonusTexts=[];console.log("TransformingBonus > initialize > cardsData  : "+JSON.stringify(n))},preload:function(){for(var m=0;m<this.transformingCards.length;++m){var o=(this.cardsData[m].tfBonus+1)+"X";var n=40;if(this.cardsData[m].cardPos%3==0){n=60}this.textsData[m]={name:"transformingBonusText"+m,pos_x:0,pos_y:0,size_x:200,size_y:100,font_size:n,anchor_x:0.5,anchor_y:0.5,horizontalAlign:"center",depth:3,color:[255,0,0],dropShadowVisible:true,dropShadowPosition:[3,3],dropShadowColor:[0,0,0],fontType:"Content/Fonts/SFElectrotome.ttf",visible:true,text:o};this.bottomTextsData[m]={name:"transformingBonusText"+m,pos_x:0,pos_y:0,size_x:200,size_y:100,font_size:n/3,anchor_x:0.5,anchor_y:0.5,horizontalAlign:"center",depth:3,color:[255,0,0],dropShadowVisible:true,dropShadowPosition:[3,3],dropShadowColor:[0,0,0],fontType:"Content/Fonts/SFElectrotome.ttf",visible:true,text:Localization.getString("ui_attackbonus_uc")};this.bonusTexts[m]=c._createLabel(this.textsData[m]);this.bottomBonusTexts[m]=c._createLabel(this.bottomTextsData[m])}},getAnimations:function(n){var o=new b(n.animationManager);o.pushCallback(function(){this.executeNextAnimation()}.bind(n));o.pushAnimation(300);o.pushCallback(function(){for(var q=0;q<this.bonusTexts.length;++q){this.transformingCards[q].addChild(this.bonusTexts[q]);this.transformingCards[q].addChild(this.bottomBonusTexts[q]);if(this.cardsData[q].cardPos%3==0){this.bonusTexts[q].setPosition(0,-20);this.bottomBonusTexts[q].setPosition(0,20)}else{this.bonusTexts[q].setPosition(0,-15);this.bottomBonusTexts[q].setPosition(0,15)}this.bonusTexts[q]._originalYPosition=this.bonusTexts[q]._position._y;this.bottomBonusTexts[q]._originalYPosition=this.bottomBonusTexts[q]._position._y}}.bind(this));o.pushAnimation(200,b.Curve.Linear);o.tween(b.Interpolate.scalar(0,1),function(r){for(var q=0;q<this.bonusTexts.length;++q){this.bonusTexts[q].setAlpha(r);this.bottomBonusTexts[q].setAlpha(r)}}.bind(this));o.pushAnimation(900,b.Curve.Linear);o.tween(b.Interpolate.scalar(0,-40),function(r){for(var q=0;q<this.bonusTexts.length;++q){this.bonusTexts[q].setPosition(this.bonusTexts[q]._position._x,this.bonusTexts[q]._originalYPosition+r);this.bottomBonusTexts[q].setPosition(this.bottomBonusTexts[q]._position._x,this.bottomBonusTexts[q]._originalYPosition+r)}}.bind(this));o.pushAnimation(700,b.Curve.Linear);o.tween(b.Interpolate.scalar(1,0),function(r){for(var q=0;q<this.bonusTexts.length;++q){this.bonusTexts[q].setAlpha(r);this.bottomBonusTexts[q].setAlpha(r)}}.bind(this));this.queues=[];for(var p=0;p<this.transformingCards.length;++p){this.queues[p]=new b(n.animationManager);if(p!=this.transformingCards.length-1){if(p==0){this.queues[p].pushCallback(function(){h.playSound("TRANSFORM_SHORT_02")})}this.queues[p].pushCallback(function(){this.executeNextAnimation()}.bind(n))}}for(var p=0;p<this.transformingCards.length;++p){this.queues[p].pushAnimation(250,b.Curve.EaseIn);this.queues[p].tween(b.Interpolate.scalar(1,0),function(q,r){this.transformingCards[q].setScale(r,1)}.bind(this,p));this.queues[p].pushCallback(function(q){var r=this.cardsData[q].definitionId;this.transformingCards[q].cardThumbnail.changeToTransformedVersion()}.bind(this,p));this.queues[p].pushAnimation(200,b.Curve.Linear);this.queues[p].pushAnimation(250,b.Curve.EaseOut);this.queues[p].tween(b.Interpolate.scalar(0,1),function(q,r){this.transformingCards[q].setScale(r,1)}.bind(this,p))}if(this.queues.length==0){var m=new b(n.animationManager);m.pushAnimation(1200);m.pushCallback(function(){h.playSound("TRANSFORM_SHORT_02")});m.pushCallback(function(){this.executeNextAnimation()}.bind(n));return[m]}this.queues[this.queues.length-1].pushAnimation(800);this.queues[this.queues.length-1].pushCallback(function(){this.executeNextAnimation()}.bind(n));this.queues.splice(0,0,o);return this.queues},destory:function(){for(var m=0;m<this.bonusTexts.length;++m){if(this.bonusTexts[m]&&this.bonusTexts[m].__objectRegistryId){this.bonusTexts[m].destroy()}if(this.bottomBonusTexts[m]&&this.bottomBonusTexts[m].__objectRegistryId){this.bottomBonusTexts[m].destroy()}}}})}};__ngs._b2={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var d=__ngs.r_(__ngs._ff).SingleFightAnimation;var b=__ngs.r_(__ngs._45).AnimationQueue;a.SlideBannerInOut=d.subclass({classname:"SlideBannerInOut",initialize:function(e,l,k,h,g){this.banner=e;this.label1=l;this.label2=k;this.message1=h;this.message2=g},preload:function(){},getAnimations:function(g){var e=new b(g.animationManager);e.pushCallback(function(){this.label1.setText(this.message1);this.label2.setText(this.message2);this.label1.setPosition(-250,455);this.label2.setPosition(890,500);this.banner.setPosition(840,405)}.bind(this));e.pushAnimation(300,b.Curve.EaseIn);e.tween(b.Interpolate.scalar(640,0),function(h){this.banner.setPosition(h,this.banner._position._y)}.bind(this));e.pushAnimation(400,b.Curve.EaseIn);e.tween(b.Interpolate.scalar(0,570),function(h){this.label1.setPosition(h-250,this.label1._position._y);this.label2.setPosition(890-h,this.label2._position._y)}.bind(this));e.pushCallback(function(){this.executeNextAnimation()}.bind(g));e.pushAnimation(1000);e.pushAnimation(400,b.Curve.EaseIn);e.tween(b.Interpolate.scalar(0,570),function(h){this.label1.setPosition(320+h,this.label1._position._y);this.label2.setPosition(320-h,this.label2._position._y)}.bind(this));e.pushAnimation(300,b.Curve.EaseIn);e.tween(b.Interpolate.scalar(0,800),function(h){this.banner.setPosition(-h,this.banner._position._y)}.bind(this));return[e]},destroy:function(){}})}};__ngs._b3={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var d=__ngs.r_(__ngs._ff).SingleFightAnimation;var b=__ngs.r_(__ngs._45).AnimationQueue;a.HealthBarDamage=d.subclass({classname:"HealthBarDamage",initialize:function(g,h,e){this.healthBar=g;this.remaining=h;this.last=e;console.log("HealthBarDamage > initialize > this.remaining : "+this.remaining+"  this.last : "+this.last)},preload:function(){},getAnimations:function(g){var e=new b(g.animationManager);e.pushCallback(function(){this.healthBar.setProgress(this.remaining)}.bind(this));e.pushCallback(function(){this.executeNextAnimation()}.bind(g));e.pushAnimation(500,b.Curve.Linear);e.tween(b.Interpolate.scalar(this.last,this.remaining),function(h){this.healthBar.setMiddleProgress(h)}.bind(this));e.pushCallback(function(){this.healthBar.setMiddleProgress(this.remaining)}.bind(this));return[e]},destroy:function(){}})}};__ngs._b4={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var d=__ngs.r_(__ngs._ff).SingleFightAnimation;var b=__ngs.r_(__ngs._45).AnimationQueue;var e=__ngs.r_(__ngs._4b).UILoader;a.HealthAnimation=d.subclass({classname:"HealthAnimation",initialize:function(g,m,l,h,k){this.card=g;this.remaining=m;this.last=l;this.damage=h;this.bar=k},preload:function(){this.damageTextDef={name:"damageText"+this.remaining+"-"+this.last,pos_x:0,pos_y:0,size_x:150,size_y:100,font_size:40,anchor_x:0.5,anchor_y:0.5,horizontalAlign:"center",depth:3,color:[255,255,255],dropShadowVisible:true,dropShadowPosition:[2,2],dropShadowColor:[0,0,0],fontType:"Content/Fonts/SFElectrotome.ttf",visible:false,text:""+this.damage,depth:10000};this.damageText=e._createLabel(this.damageTextDef)},getAnimations:function(k){var h=new b(k.animationManager);var l=new b(k.animationManager);var g=new b(k.animationManager);l.pushCallback(function(){this.executeNextAnimation()}.bind(k));g.pushCallback(function(){this.executeNextAnimation()}.bind(k));g.pushAnimation(1000,b.Curve.EaseIn);g.tween(b.Interpolate.scalar(1,0),function(n){this.damageText.setScale(n);this.damageText.setAlpha(n)}.bind(this));l.pushCallback(function(n){n.rootNode.addChild(this.damageText);this.damageText.setPosition(this.card._position);this.damageText.setVisible(true)}.bind(this,k));l.pushAnimation(1000,b.Curve.EaseIn);var m=this.bar._position._y-this.card._position._y;l.tween(b.Interpolate.point(this.card._position,new Core.Point(this.card._position._x,this.bar._position._y-m/3)),function(n){this.damageText.setPosition(n)}.bind(this));l.pushCallback(function(){this.damageText.setVisible(false)}.bind(this));h.pushCallback(function(){this.executeNextAnimation()}.bind(k));h.pushAnimation(300,b.Curve.Linear);h.tween(b.Interpolate.scalar(this.last,this.remaining),function(n){this.card.damageLayer.setColor(1-n/100,0,0)}.bind(this));return[l,g,h]},destroy:function(){if(this.damageText&&this.damageText.__objectRegistryId){this.damageText.destroy()}}})}};__ngs._b5={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var d=__ngs.r_(__ngs._ff).SingleFightAnimation;var b=__ngs.r_(__ngs._45).AnimationQueue;a.DeathAnimation=d.subclass({classname:"DeathAnimation",initialize:function(e){this.card=e},preload:function(){},getAnimations:function(g){var e=new b(g.animationManager);e.pushCallback(function(){this.executeNextAnimation()}.bind(g));e.pushAnimation(500,b.Curve.Linear);e.tween(b.Interpolate.scalar(0,1),function(h){this.card.setPosition(this.card._position._x,this.card._position._y+h*100);this.card.setAlpha(1-h);this.card.setScale(1-h,1-h)}.bind(this));return[e]},destroy:function(){}})}};__ngs._b6={_c:null,_d:function(){var e={exports:{}};var a=e.exports;this._c=e;var g=__ngs.r_(__ngs._ff).SingleFightAnimation;var d=__ngs.r_(__ngs._45).AnimationQueue;var b=__ngs.r_(__ngs._62).TFParticleManager;var c=__ngs.r_(__ngs._48).TFSoundManager;var h=__ngs.r_(__ngs._4b).UILoader;a.PositionBonus=g.subclass({classname:"PositionBonus",initialize:function(k){this.cards=k},preload:function(){this.textsData=[];for(var k=0;k<this.cards.length;++k){var m="";var l=40;if(k%3==0){m="3X";l=70}else{m="2X"}this.textsData[k]={name:"positionBonusText"+k,pos_x:0,pos_y:0,size_x:100,size_y:100,font_size:l,anchor_x:0.5,anchor_y:0.5,horizontalAlign:"center",depth:3,color:[255,255,255],dropShadowVisible:true,dropShadowPosition:[2,2],dropShadowColor:[89,36,42],fontType:"Content/Fonts/SFElectrotome.ttf",visible:false,text:m}}this.bonusParticles=[];for(var k=0;k<this.cards.length;++k){if(k%3==0){this.bonusParticles[k]=b.createEmitter("position_bonus_x3")}else{this.bonusParticles[k]=b.createEmitter("position_bonus_x2")}this.bonusParticles[k]._bonusText=h._createLabel(this.textsData[k]);this.bonusParticles[k].addChild(this.bonusParticles[k]._bonusText)}},getAnimations:function(k){var l=new d(k.animationManager);var m=new d(k.animationManager);l.pushCallback(function(){c.playSound("Battle_Missile_Fire_01")});l.pushCallback(function(){for(var n=0;n<this.cards.length;++n){if(n%3==0){continue}this.cards[n].addChild(this.bonusParticles[n]);this.bonusParticles[n].play();this.bonusParticles[n]._bonusText.setVisible(true);this.bonusParticles[n]._bonusText.setAlpha(0)}}.bind(this));l.pushAnimation(200,d.Curve.Linear);l.tween(d.Interpolate.scalar(0,1),function(o){for(var n=0;n<this.bonusParticles.length;++n){if(n%3==0){continue}this.bonusParticles[n]._bonusText.setAlpha(o)}}.bind(this));l.pushAnimation(500,d.Curve.Linear);l.tween(d.Interpolate.scalar(0,-40),function(o){for(var n=0;n<this.bonusParticles.length;++n){if(n%3==0){continue}this.bonusParticles[n]._bonusText.setPosition(this.bonusParticles[n]._position._x,this.bonusParticles[n]._position._y+o)}}.bind(this));l.pushCallback(function(){this.executeNextAnimation()}.bind(k));l.pushAnimation(200,d.Curve.Linear);l.tween(d.Interpolate.scalar(1,0),function(o){for(var n=0;n<this.bonusParticles.length;++n){if(n%3==0){continue}this.bonusParticles[n]._bonusText.setAlpha(o)}}.bind(this));m.pushCallback(function(){c.playSound("Battle_Missile_Fire_01")});m.pushCallback(function(){for(var n=0;n<this.cards.length;++n){if(n%3!=0){continue}this.cards[n].addChild(this.bonusParticles[n]);this.bonusParticles[n].play();this.bonusParticles[n]._bonusText.setVisible(true);this.bonusParticles[n]._bonusText.setAlpha(0)}}.bind(this));m.pushAnimation(100,d.Curve.Linear);m.tween(d.Interpolate.scalar(0,1),function(o){for(var n=0;n<this.bonusParticles.length;++n){if(n%3!=0){continue}this.bonusParticles[n]._bonusText.setAlpha(o)}}.bind(this));m.pushAnimation(500,d.Curve.Linear);m.tween(d.Interpolate.scalar(0,-40),function(o){for(var n=0;n<this.bonusParticles.length;++n){if(n%3!=0){continue}this.bonusParticles[n]._bonusText.setPosition(this.bonusParticles[n]._position._x,this.bonusParticles[n]._position._y+o)}}.bind(this));m.pushAnimation(300,d.Curve.Linear);m.tween(d.Interpolate.scalar(1,0),function(o){for(var n=0;n<this.bonusParticles.length;++n){if(n%3!=0){continue}this.bonusParticles[n]._bonusText.setAlpha(o)}}.bind(this));m.pushAnimation(400,d.Curve.Linear);m.pushCallback(function(){this.executeNextAnimation()}.bind(k));return[l,m]},destroy:function(){for(var k=0;k<this.bonusParticles.length;++k){if(this.bonusParticles[k]&&this.bonusParticles[k].__objectRegistryId){if(this.bonusParticles[k]._bonusText&&this.bonusParticles[k]._bonusText.__objectRegistryId){this.bonusParticles[k]._bonusText.destroy()}this.bonusParticles[k].destroy()}}}})}};__ngs._b7={_c:null,_d:function(){var e={exports:{}};var a=e.exports;this._c=e;var g=__ngs.r_(__ngs._ff).SingleFightAnimation;var d=__ngs.r_(__ngs._45).AnimationQueue;var b=__ngs.r_(__ngs._62).TFParticleManager;var c=__ngs.r_(__ngs._48).TFSoundManager;a.MaxLevelBonus=g.subclass({classname:"MaxLevelBonus",initialize:function(h){this.cards=h},preload:function(){this.bonusParticles=[];for(var h=0;h<this.cards.length;++h){this.bonusParticles[h]=b.createEmitter("maxLevel")}},getAnimations:function(k){var h=new d(k.animationManager);h.pushCallback(function(){c.playSound("Battle_Glow_01")});h.pushCallback(function(){for(var l=0;l<this.cards.length;++l){this.cards[l].addChild(this.bonusParticles[l]);this.bonusParticles[l].play()}}.bind(this));h.pushAnimation(1200,d.Curve.Linear);h.pushCallback(function(){this.executeNextAnimation()}.bind(k));return[h]},destroy:function(){for(var h=0;h<this.cards.length;++h){if(this.bonusParticles[h]&&this.bonusParticles[h].__objectRegistryId){this.bonusParticles[h].destroy()}}}})}};__ngs._b8={_c:null,_d:function(){var d={exports:{}};var a=d.exports;this._c=d;var e=__ngs.r_(__ngs._ff).SingleFightAnimation;var c=__ngs.r_(__ngs._45).AnimationQueue;var b=__ngs.r_(__ngs._62).TFParticleManager;a.FocusAbility=e.subclass({classname:"FocusAbility",initialize:function(h,g){this.cards=h;this.abilityCardIndex=g},preload:function(){this.backgroundParticles=b.createEmitter("fightBGbase")},getAnimations:function(k){var g=new c(k.animationManager);var h=new c(k.animationManager);h.pushAnimation(200,c.Curve.Linear);h.pushCallback(function(){this.executeNextAnimation()}.bind(k));h.pushAnimation(300,c.Curve.Linear);h.tween(c.Interpolate.scalar(1,0.2),function(l){this.rootNode.background.setAlpha(l)}.bind(k));g.pushAnimation(100,c.Curve.Linear);g.pushCallback(function(){var l=new GL2.Node();l.setPosition(320,480);l.setDepth(-900);k.rootNode.addChild(l);l.addChild(this.backgroundParticles);k.rootNode._backgroundParticles=this.backgroundParticles;this.backgroundParticles.play()}.bind(this));g.pushAnimation(200,c.Curve.Linear);g.tween(c.Interpolate.scalar(1,0.2),function(m){for(var l=0;l<this.cards.length;++l){if(this.abilityCardIndex!=l){this.cards[l].setAlpha(m)}}}.bind(this));g.pushAnimation(1600,c.Curve.Linear);g.pushAnimation(200,c.Curve.Linear);g.tween(c.Interpolate.scalar(0.2,1),function(m){for(var l=0;l<this.cards.length;++l){if(this.abilityCardIndex!=l){this.cards[l].setAlpha(m)}}}.bind(this));g.pushCallback(function(){this.executeNextAnimation()}.bind(k));return[h,g]},destroy:function(){if(this.backgroundParticles&&this.backgroundParticles.__objectRegistryId){this.backgroundParticles.destroy()}}})}};__ngs._b9={_c:null,_d:function(){var d={exports:{}};var a=d.exports;this._c=d;var e=__ngs.r_(__ngs._ff).SingleFightAnimation;var c=__ngs.r_(__ngs._45).AnimationQueue;var b=__ngs.r_(__ngs._62).TFParticleManager;a.EndAbility=e.subclass({classname:"EndAbility",initialize:function(g,h){this.attackingCards=g;this.attackingCard=h},preload:function(){},getAnimations:function(h){var g=new c(h.animationManager);var k=new c(h.animationManager);g.pushAnimation(300,c.Curve.Linear);g.tween(c.Interpolate.scalar(0.2,1),function(l){this.rootNode._backgroundParticles.setAlpha(1-l);this.rootNode.background.setAlpha(l);if(this.rootNode.specialAttack&&this.rootNode.specialAttack._visible){this.rootNode.specialAttack.setAlpha(1-l)}}.bind(h));g.pushCallback(function(){if(this.rootNode.specialAttack&&this.rootNode.specialAttack._visible){this.rootNode.specialAttack.setVisible(false)}this.executeNextAnimation()}.bind(h));k.pushAnimation(600,c.Curve.Linear);k.tween(c.Interpolate.scalar(0.2,1),function(m){if(!this.attackingCards){return}for(var l=0;l<this.attackingCards.length;++l){if(this.attackingCards[l]!=this.attackingCard){this.attackingCards[l].setAlpha(m)}}}.bind(this));k.pushCallback(function(){this.executeNextAnimation()}.bind(h));return[g,k]},destroy:function(){}})}};__ngs._ba={_c:null,_d:function(){var d={exports:{}};var a=d.exports;this._c=d;var e=__ngs.r_(__ngs._ff).SingleFightAnimation;var c=__ngs.r_(__ngs._45).AnimationQueue;var b=__ngs.r_(__ngs._62).TFParticleManager;a.SuperiorityAbility=e.subclass({classname:"SuperiorityAbility",initialize:function(){},preload:function(){this.backgroundParticles=b.createEmitter("fightBG5")},getAnimations:function(k){var g=new c(k.animationManager);var h=new c(k.animationManager);h.pushAnimation(200,c.Curve.Linear);h.pushCallback(function(){this.executeNextAnimation()}.bind(k));h.pushAnimation(300,c.Curve.Linear);h.tween(c.Interpolate.scalar(1,0.2),function(l){this.rootNode.background.setAlpha(l)}.bind(k));g.pushAnimation(100,c.Curve.Linear);g.pushCallback(function(){var l=new GL2.Node();l.setPosition(320,480);l.setDepth(-900);k.rootNode.addChild(l);l.addChild(this.backgroundParticles);k.rootNode._backgroundParticles=this.backgroundParticles;this.backgroundParticles.play()}.bind(this));g.pushAnimation(200,c.Curve.Linear);g.tween(c.Interpolate.scalar(1,0.2),function(m){for(var l=0;l<this.cards.length;++l){if(this.abilityCardIndex!=l){this.cards[l].setAlpha(m)}}}.bind(this));g.pushAnimation(1600,c.Curve.Linear);g.pushAnimation(200,c.Curve.Linear);g.tween(c.Interpolate.scalar(0.2,1),function(m){for(var l=0;l<this.cards.length;++l){if(this.abilityCardIndex!=l){this.cards[l].setAlpha(m)}}}.bind(this));g.pushCallback(function(){this.executeNextAnimation()}.bind(k));return[h,g]},destroy:function(){if(this.backgroundParticles&&this.backgroundParticles.__objectRegistryId){this.backgroundParticles.destroy()}}})}};__ngs._bb={_c:null,_d:function(){var d={exports:{}};var a=d.exports;this._c=d;var e=__ngs.r_(__ngs._ff).SingleFightAnimation;var c=__ngs.r_(__ngs._45).AnimationQueue;var b=__ngs.r_(__ngs._62).TFParticleManager;a.ConvergenceAbility=e.subclass({classname:"ConvergenceAbility",initialize:function(){},preload:function(){this.backgroundParticles=b.createEmitter("fightBG1")},getAnimations:function(k){var g=new c(k.animationManager);var h=new c(k.animationManager);h.pushAnimation(200,c.Curve.Linear);h.pushCallback(function(){this.executeNextAnimation()}.bind(k));h.pushAnimation(300,c.Curve.Linear);h.tween(c.Interpolate.scalar(1,0.2),function(l){this.rootNode.background.setAlpha(l)}.bind(k));g.pushAnimation(100,c.Curve.Linear);g.pushCallback(function(){var l=new GL2.Node();l.setPosition(320,480);l.setDepth(-900);k.rootNode.addChild(l);l.addChild(this.backgroundParticles);k.rootNode._backgroundParticles=this.backgroundParticles;this.backgroundParticles.play()}.bind(this));g.pushAnimation(200,c.Curve.Linear);g.tween(c.Interpolate.scalar(1,0.2),function(m){for(var l=0;l<this.cards.length;++l){if(this.abilityCardIndex!=l){this.cards[l].setAlpha(m)}}}.bind(this));g.pushAnimation(1600,c.Curve.Linear);g.pushAnimation(200,c.Curve.Linear);g.tween(c.Interpolate.scalar(0.2,1),function(m){for(var l=0;l<this.cards.length;++l){if(this.abilityCardIndex!=l){this.cards[l].setAlpha(m)}}}.bind(this));g.pushCallback(function(){this.executeNextAnimation()}.bind(k));return[h,g]},destroy:function(){if(this.backgroundParticles&&this.backgroundParticles.__objectRegistryId){this.backgroundParticles.destroy()}}})}};__ngs._bc={_c:null,_d:function(){var d={exports:{}};var a=d.exports;this._c=d;var e=__ngs.r_(__ngs._ff).SingleFightAnimation;var c=__ngs.r_(__ngs._45).AnimationQueue;var b=__ngs.r_(__ngs._62).TFParticleManager;a.CriticalAttackMissile=e.subclass({classname:"CriticalAttackMissile",initialize:function(g,h){this.attackingCard=g;this.attackedUnit=h},preload:function(){this.backgroundParticles=b.createEmitter("fightBG3");this.missiles=[];this.trails=[];this.explosions=[];for(var g=0;g<3;++g){this.missiles[g]=b.createEmitter("missile");this.trails[g]=b.createEmitter("missileTrail");this.explosions[g]=b.createEmitter("missileExplosion")}},getAnimations:function(k){var p=new c(k.animationManager);var n=new c(k.animationManager);n.pushCallback(function(){this.executeNextAnimation()}.bind(k));n.pushAnimation(300,c.Curve.Linear);n.tween(c.Interpolate.scalar(1,0.2),function(r){this.rootNode.background.setAlpha(r)}.bind(k));p.pushCallback(function(){var r=new GL2.Node();r.setPosition(320,480);r.setDepth(-900);k.rootNode.addChild(r);r.addChild(this.backgroundParticles);k.rootNode._backgroundParticles=this.backgroundParticles;this.backgroundParticles.play()}.bind(this));p.pushCallback(function(){this.executeNextAnimation()}.bind(k));var o=new c(k.animationManager);var h=this.attackingCard._position;var m=this.attackedUnit[0]._position;var l=this.getAttackAngle();var q=Math.sin(Math.PI/2-l/180*Math.PI);var g=Math.cos(Math.PI/2-l/180*Math.PI);o.pushAnimation(800);o.pushCallback(function(t,s){for(var r=0;r<3;r++){t.rootNode.addChild(this.missiles[r]);this.missiles[r].play();this.missiles[r].setDepth(1000);this.missiles[r].setPosition(h);this.missiles[r].setRotation(s);this.trails[r].play();this.trails[r].setDepth(-10);this.trails[r].setPosition(0,25);this.missiles[r].addChild(this.trails[r])}}.bind(this,k,l));o.pushAnimation(1000,c.Curve.EaseIn);o.tween(c.Interpolate.point(h,m),function(u,x,w){var r=2*Math.PI*((w.getY()-u._y)/(x._y-u._y));for(var t=0;t<3;++t){var y=w.getX()+q*40*(t-1)*Math.sin(r);var v=w.getY()+g*40*(t-1)*Math.sin(r);this.missiles[t].setPosition(y,v)}var z=1;if(u._y>x._y){z=1-((w.getY()-u._y)/(x._y-u._y))*0.4}else{z=0.6+((w.getY()-u._y)/(x._y-u._y))*0.4}for(var t=0;t<this.missiles.length;++t){this.missiles[t].setScale(z,z);this.trails[t].setScale(z,z)}}.bind(this,h,m));o.pushCallback(function(t,s,u){for(var r=0;r<this.missiles.length;++r){t.rootNode.addChild(this.explosions[r]);this.explosions[r].setPosition(u._x+30*(Math.random()-0.5),u._y+30*(Math.random()-0.5));if(s._y>u._y){this.explosions[r].setScale(0.6,0.6)}this.explosions[r].setDepth(1000);this.explosions[r].play();this.missiles[r].setVisible(false);this.trails[r].setVisible(false)}}.bind(this,k,h,m));o.pushCallback(function(){this.executeNextAnimation()}.bind(k));return[n,p,o]},getAttackAngle:function(){var h=this.attackingCard._position;var g=this.attackedUnit[0]._position;return Math.atan2(g._y-h._y,g._x-h._x)*(180/Math.PI)+90},destroy:function(){for(var g=0;g<this.missiles.length;++g){if(this.missiles[g]&&this.missiles[g].__objectRegistryId){this.missiles[g].destroy()}if(this.trails[g]&&this.trails[g].__objectRegistryId){this.trails[g].destroy()}if(this.explosions[g]&&this.explosions[g].__objectRegistryId){this.explosions[g].destroy()}}}})}};__ngs._bd={_c:null,_d:function(){var d={exports:{}};var a=d.exports;this._c=d;var e=__ngs.r_(__ngs._ff).SingleFightAnimation;var c=__ngs.r_(__ngs._45).AnimationQueue;var b=__ngs.r_(__ngs._62).TFParticleManager;a.CriticalAttackLaser=e.subclass({classname:"CriticalAttackLaser",initialize:function(h,k,g){this.attackingCard=h;this.attackedUnit=k;this.isAutoBot=g},preload:function(){this.backgroundParticles=b.createEmitter("fightBG3");this.redLasers=[];this.explosions=[];for(var g=0;g<3;++g){if(this.isAutoBot){this.redLasers[g]=b.createEmitter("red_laser");this.explosions[g]=b.createEmitter("red_explosion")}else{this.redLasers[g]=b.createEmitter("purple_laser");this.explosions[g]=b.createEmitter("purple_explosion")}}},getAnimations:function(l){var g=new c(l.animationManager);var o=new c(l.animationManager);var k=new c(l.animationManager);k.pushCallback(function(){this.executeNextAnimation()}.bind(l));k.pushAnimation(300,c.Curve.Linear);k.tween(c.Interpolate.scalar(1,0.2),function(p){this.rootNode.background.setAlpha(p)}.bind(l));o.pushCallback(function(){var p=new GL2.Node();p.setPosition(320,480);p.setDepth(-900);l.rootNode.addChild(p);p.addChild(this.backgroundParticles);l.rootNode._backgroundParticles=this.backgroundParticles;this.backgroundParticles.play()}.bind(this));o.pushAnimation(600);o.pushCallback(function(){this.executeNextAnimation()}.bind(l));for(var m=0;m<this.redLasers.length;++m){var n=new Core.Point(0,0);n._x=this.attackingCard._position._x+80*(Math.random()-0.5);n._y=this.attackingCard._position._y+80*(Math.random()-0.5);var h=new Core.Point(0,0);h._x=this.attackedUnit[0]._position._x+80*(Math.random()-0.5);h._y=this.attackedUnit[0]._position._y+80*(Math.random()-0.5);g.pushCallback(function(p,q){q.rootNode.addChild(this.redLasers[p]);this.redLasers[p].play();this.redLasers[p].setDepth(1000);this.redLasers[p].setPosition(n);this.redLasers[p].setRotation(this.getAttackAngle())}.bind(this,m,l));g.pushAnimation(400,c.Curve.EaseIn);g.tween(c.Interpolate.point(n,h),function(p,r,q){this.setPosition(q.getX(),q.getY());var t=1;if(p._y>r._y){t=1-((q.getY()-p._y)/(r._y-p._y))*0.4}else{t=0.6+((q.getY()-p._y)/(r._y-p._y))*0.4}this.setScale(t,t)}.bind(this.redLasers[m],n,h));g.pushCallback(function(p,r,q,s){r.rootNode.addChild(this.explosions[p]);this.explosions[p].setPosition(s);if(q._y>s._y){this.explosions[p].setScale(0.6,0.6)}this.explosions[p].setDepth(1000);this.explosions[p].play();this.redLasers[p].setVisible(false)}.bind(this,m,l,n,h))}g.pushCallback(function(){this.executeNextAnimation()}.bind(l));return[k,o,g]},getAttackAngle:function(){var h=this.attackingCard._position;var g=this.attackedUnit[0]._position;return Math.atan2(g._y-h._y,g._x-h._x)*(180/Math.PI)+90},destroy:function(){for(var g=0;g<this.redLasers.length;++g){if(this.redLasers[g]&&this.redLasers[g].__objectRegistryId){this.redLasers[g].destroy()}if(this.explosions[g]&&this.explosions[g].__objectRegistryId){this.explosions[g].destroy()}}}})}};__ngs._be={_c:null,_d:function(){var d={exports:{}};var a=d.exports;this._c=d;var e=__ngs.r_(__ngs._ff).SingleFightAnimation;var c=__ngs.r_(__ngs._45).AnimationQueue;var b=__ngs.r_(__ngs._62).TFParticleManager;a.DoubleAttack=e.subclass({classname:"DoubleAttack",initialize:function(){},preload:function(){this.backgroundParticles=b.createEmitter("fightBG2")},getAnimations:function(k){var g=new c(k.animationManager);var h=new c(k.animationManager);h.pushAnimation(300,c.Curve.Linear);h.tween(c.Interpolate.scalar(1,0.2),function(l){this.rootNode.background.setAlpha(l)}.bind(k));h.pushCallback(function(){this.executeNextAnimation()}.bind(k));g.pushCallback(function(){var l=new GL2.Node();l.setPosition(320,480);l.setDepth(-900);k.rootNode.addChild(l);l.addChild(this.backgroundParticles);k.rootNode._backgroundParticles=this.backgroundParticles;this.backgroundParticles.play()}.bind(this));g.pushAnimation(800);g.pushCallback(function(){this.executeNextAnimation()}.bind(k));return[h,g]},destroy:function(){if(this.backgroundParticles&&this.backgroundParticles.__objectRegistryId){this.backgroundParticles.destroy()}}})}};__ngs._bf={_c:null,_d:function(){var d={exports:{}};var a=d.exports;this._c=d;var e=__ngs.r_(__ngs._ff).SingleFightAnimation;var c=__ngs.r_(__ngs._45).AnimationQueue;var b=__ngs.r_(__ngs._62).TFParticleManager;a.CriticalAttackMelee=e.subclass({classname:"CriticalAttackMelee",initialize:function(g,h){this.attackingCard=g;this.attackedUnit=h},preload:function(){this.backgroundParticles=b.createEmitter("fightBG3");this.slashs=[];this.slashSparks=[];for(var g=0;g<3;++g){this.slashs[g]=b.createEmitter("sword_slash");this.slashSparks[g]=b.createEmitter("swordSlashSparks")}},getAnimations:function(l){var n=new c(l.animationManager);var k=new c(l.animationManager);k.pushCallback(function(){this.executeNextAnimation()}.bind(l));k.pushAnimation(300,c.Curve.Linear);k.tween(c.Interpolate.scalar(1,0.2),function(o){this.rootNode.background.setAlpha(o)}.bind(l));n.pushCallback(function(){var o=new GL2.Node();o.setPosition(320,480);o.setDepth(-900);l.rootNode.addChild(o);o.addChild(this.backgroundParticles);l.rootNode._backgroundParticles=this.backgroundParticles;this.backgroundParticles.play()}.bind(this));n.pushCallback(function(){this.executeNextAnimation()}.bind(l));var g=new c(l.animationManager);var m=this.attackingCard._position;var h=this.attackedUnit[0]._position;this.attackedUnit[0]._oldPosition=new Core.Point(this.attackedUnit[0]._position);this.attackedUnit[1]._oldPosition=new Core.Point(this.attackedUnit[1]._position);this.attackedUnit[2]._oldPosition=new Core.Point(this.attackedUnit[2]._position);g.pushAnimation(800);g.pushAnimation(200,c.Curve.EaseIn);g.tween(c.Interpolate.point(m,h),function(o){this.setPosition(o.getX(),o.getY())}.bind(this.attackingCard));g.pushCallback(function(o){o.rootNode.addChild(this.slashs[0]);this.slashs[0].setPosition(this.attackedUnit[0]._oldPosition);o.rootNode.addChild(this.slashSparks[0]);this.slashSparks[0].setPosition(this.attackedUnit[0]._oldPosition);this.slashs[0].play();this.slashSparks[0].play()}.bind(this,l));g.pushAnimation(50,c.Curve.Linear);g.pushCallback(function(o){o.rootNode.addChild(this.slashs[1]);this.slashs[1].setPosition(this.attackedUnit[0]._oldPosition);o.rootNode.addChild(this.slashSparks[1]);this.slashSparks[1].setPosition(this.attackedUnit[0]._oldPosition);this.slashs[1].play();this.slashSparks[1].play()}.bind(this,l));g.pushAnimation(50,c.Curve.Linear);g.pushCallback(function(o){o.rootNode.addChild(this.slashs[2]);this.slashs[2].setPosition(this.attackedUnit[0]._oldPosition);o.rootNode.addChild(this.slashSparks[2]);this.slashSparks[2].setPosition(this.attackedUnit[0]._oldPosition);this.slashs[2].play();this.slashSparks[2].play()}.bind(this,l));g.pushCallback(function(){this.executeNextAnimation()}.bind(l));g.pushAnimation(200,c.Curve.EaseIn);g.tween(c.Interpolate.point(h,m),function(o){this.setPosition(o.getX(),o.getY())}.bind(this.attackingCard));return[k,n,g]},destroy:function(){for(var g=0;g<this.slashs.length;++g){if(this.slashs[g]&&this.slashs[g].__objectRegistryId){this.slashs[g].destroy()}if(this.slashSparks[g]&&this.slashSparks[g].__objectRegistryId){this.slashSparks[g].destroy()}}}})}};__ngs._bg={_c:null,_d:function(){var d={exports:{}};var a=d.exports;this._c=d;var e=__ngs.r_(__ngs._ff).SingleFightAnimation;var c=__ngs.r_(__ngs._45).AnimationQueue;var b=__ngs.r_(__ngs._62).TFParticleManager;a.MiniCritical=e.subclass({classname:"MiniCritical",initialize:function(){},preload:function(){this.backgroundParticles=b.createEmitter("fightBG6")},getAnimations:function(k){var g=new c(k.animationManager);var h=new c(k.animationManager);h.pushCallback(function(){this.executeNextAnimation()}.bind(k));h.pushAnimation(300,c.Curve.Linear);h.tween(c.Interpolate.scalar(1,0.2),function(l){this.rootNode.background.setAlpha(l)}.bind(k));g.pushAnimation(800);g.pushCallback(function(){var l=new GL2.Node();l.setPosition(320,480);l.setDepth(-900);k.rootNode.addChild(l);l.addChild(this.backgroundParticles);k.rootNode._backgroundParticles=this.backgroundParticles;this.backgroundParticles.play()}.bind(this));g.pushCallback(function(){this.executeNextAnimation()}.bind(k));return[h,g]},destroy:function(){if(this.backgroundParticles&&this.backgroundParticles.__objectRegistryId){this.backgroundParticles.destroy()}}})}};__ngs._bh={_c:null,_d:function(){var d={exports:{}};var a=d.exports;this._c=d;var e=__ngs.r_(__ngs._ff).SingleFightAnimation;var c=__ngs.r_(__ngs._45).AnimationQueue;var b=__ngs.r_(__ngs._62).TFParticleManager;a.TripleAttack=e.subclass({classname:"TripleAttack",initialize:function(){},preload:function(){this.backgroundParticles=b.createEmitter("fightBG4")},getAnimations:function(k){var g=new c(k.animationManager);var h=new c(k.animationManager);h.pushCallback(function(){this.executeNextAnimation()}.bind(k));h.pushAnimation(300,c.Curve.Linear);h.tween(c.Interpolate.scalar(1,0.2),function(l){this.rootNode.background.setAlpha(l)}.bind(k));g.pushCallback(function(){var l=new GL2.Node();l.setPosition(320,480);l.setDepth(-900);k.rootNode.addChild(l);l.addChild(this.backgroundParticles);k.rootNode._backgroundParticles=this.backgroundParticles;this.backgroundParticles.play()}.bind(this));g.pushAnimation(800);g.pushCallback(function(){this.executeNextAnimation()}.bind(k));return[h,g]},destroy:function(){if(this.backgroundParticles&&this.backgroundParticles.__objectRegistryId){this.backgroundParticles.destroy()}}})}};__ngs._bi={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var d=__ngs.r_(__ngs._ff).SingleFightAnimation;var b=__ngs.r_(__ngs._45).AnimationQueue;a.SlideAbilityInOut=d.subclass({classname:"SlideAbilityInOut",initialize:function(h,e,g,k){this.sprite=h;this.label=e;this.message=k;this.iconPath=g},preload:function(){},getAnimations:function(g){var e=new b(g.animationManager);e.pushCallback(function(){this.label.setText(this.message);TFUtils.changeImageOnSprite(this.sprite,this.iconPath)}.bind(this));e.pushCallback(function(){this.executeNextAnimation()}.bind(g));e.pushAnimation(200);e.pushAnimation(300,b.Curve.EaseIn);e.tween(b.Interpolate.scalar(0,640),function(h){this.sprite.setPosition(-540+h,this.sprite._position._y);this.label.setPosition(-412+h,this.label._position._y)}.bind(this));e.pushAnimation(1000);e.pushAnimation(300,b.Curve.EaseIn);e.tween(b.Interpolate.scalar(640,0),function(h){this.sprite.setPosition(-540+h,this.sprite._position._y);this.label.setPosition(-412+h,this.label._position._y)}.bind(this));return[e]},destroy:function(){}})}};__ngs._bj={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var d=__ngs.r_(__ngs._ff).SingleFightAnimation;var b=__ngs.r_(__ngs._45).AnimationQueue;a.ShowSpecialAttack=d.subclass({classname:"ShowSpecialAttack",initialize:function(n,k,g,h,l,e,m){this.sprite=k;this.label=g;this.message=l;this.iconPath=h;this.group=n;this.attackingCards=e;this.attackingCard=m},preload:function(){},getAnimations:function(g){var e=new b(g.animationManager);var h=new b(g.animationManager);e.pushCallback(function(){this.label.setText(this.message);TFUtils.changeImageOnSprite(this.sprite,this.iconPath);this.sprite.setVisible(true);this.label.setVisible(true);this.group.setVisible(true);this.group.setAlpha(0);this.group.setScale(2.1,2.1);this._lastSpritePosition=new Core.Point(this.group._position._x,this.group._position._y)}.bind(this));e.pushAnimation(150,b.Curve.EaseIn);e.tween(b.Interpolate.scalar(0,1),function(k){this.group.setAlpha(k)}.bind(this));e.pushCallback(function(){this.executeNextAnimation()}.bind(g));e.pushAnimation(800,b.Curve.EaseIn);e.pushAnimation(300,b.Curve.EaseIn);e.tween(b.Interpolate.scalar(2.1,1),function(k){this.group.setScale(k,k)}.bind(this));h.pushCallback(function(){this.executeNextAnimation()}.bind(g));h.pushAnimation(800,b.Curve.Linear);h.tween(b.Interpolate.scalar(1,0.2),function(l){for(var k=0;k<this.attackingCards.length;++k){if(this.attackingCards[k]!=this.attackingCard){this.attackingCards[k].setAlpha(l)}}}.bind(this));return[e,h]},destroy:function(){}})}};__ngs._bk={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var d=__ngs.r_(__ngs._ff).SingleFightAnimation;var b=__ngs.r_(__ngs._45).AnimationQueue;a.PauseAnimation=d.subclass({classname:"PauseAnimation",initialize:function(e){this.delay=e},preload:function(){},getAnimations:function(g){var e=new b(g.animationManager);e.pushAnimation(this.delay);e.pushCallback(function(){this.executeNextAnimation()}.bind(g));return[e]},destroy:function(){}})}};__ngs._bl={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var d=__ngs.r_(__ngs._ff).SingleFightAnimation;var b=__ngs.r_(__ngs._45).AnimationQueue;a.SlideCardsOut=d.subclass({classname:"SlideCardsOut",initialize:function(g){if(g){for(var e in g){if(g[e]){console.log("SlideCardsOut > initialize > aliveCard "+e+" position="+JSON.stringify(g[e]._position))}else{console.log("SlideCardsOut > initialize > aliveCard "+e+" undefined")}}}this.aliveCards=g},preload:function(){},getAnimations:function(e){var h=new b(e.animationManager);h.pushAnimation(200,b.Curve.EaseIn);h.tween(b.Interpolate.scalar(0.2,1),function(l){for(var k=0;k<this.aliveCards.length;++k){if(this.aliveCards[k]._alpha!=0&&this.aliveCards[k]._alpha!=1){this.aliveCards[k].setAlpha(l)}if(e.rootNode.background._alpha!=1){e.rootNode.background.setAlpha(l)}if(e.rootNode._backgroundParticles&&e.rootNode._backgroundParticles.__objectRegistryId&&e.rootNode._backgroundParticles._alpha!=0){e.rootNode._backgroundParticles.setAlpha(1-l)}if(e.rootNode.specialAttack&&e.rootNode.specialAttack._visible&&e.rootNode.specialAttack._alpha!=0){e.rootNode.specialAttack.setAlpha(1-l)}}}.bind(this));console.log("SlideCardsOut > initialize > aliveCards length="+this.aliveCards.length);for(var g=0;g<this.aliveCards.length;++g){if(this.aliveCards[this.aliveCards.length-1-g]){console.log("SlideCardsOut > initialize > creating slide animation for card "+(this.aliveCards.length-1-g)+"="+JSON.stringify(this.aliveCards[this.aliveCards.length-1-g]._position));h.pushAnimation(200,b.Curve.EaseIn);h.tween(b.Interpolate.point(this.aliveCards[this.aliveCards.length-1-g]._position,new Core.Point(this.aliveCards[this.aliveCards.length-1-g]._position._x+1000,this.aliveCards[this.aliveCards.length-1-g]._position._y)),function(k,l){this.aliveCards[this.aliveCards.length-1-k].setPosition(l._x,l._y)}.bind(this,g))}else{console.log("SlideCardsOut > initialize > cannot create slide animation for card "+(this.aliveCards.length-1-g)+" because it doesn't exist!");TFAnalytics.reportGameEvent("RAIDBATTLESLIDEOUTERROR",{error:"Could not create card slide out animation - something weird happened"})}}h.pushAnimation(500);h.pushCallback(function(){this.executeNextAnimation()}.bind(e));return[h]},destroy:function(){}})}};__ngs._bm={_c:null,_d:function(){var e={exports:{}};var a=e.exports;this._c=e;var g=__ngs.r_(__ngs._ff).SingleFightAnimation;var d=__ngs.r_(__ngs._45).AnimationQueue;var b=__ngs.r_(__ngs._62).TFParticleManager;var c=__ngs.r_(__ngs._48).TFSoundManager;var h=__ngs.r_(__ngs._4b).UILoader;a.BattleEnergyBonus=g.subclass({classname:"BattleEnergyBonus",initialize:function(k,l){this.cards=k;this.bonus=l},preload:function(){var n=""+this.bonus+"X";var l=40;this.textData={name:"BattleEnergyBonusText",pos_x:0,pos_y:0,size_x:100,size_y:100,font_size:l,anchor_x:0.5,anchor_y:0.5,horizontalAlign:"center",depth:3,color:[255,255,255],dropShadowVisible:true,dropShadowPosition:[3,3],dropShadowColor:[89,36,42],fontType:"Content/Fonts/SFElectrotome.ttf",visible:false,text:n};this.bonusParticles=[];var m="";if(this.bonus==1.2){m="battleEnergyBonus1.2"}if(this.bonus==3){m="battleEnergyBonus3"}if(this.bonus==5){m="battleEnergyBonus5"}for(var k=0;k<this.cards.length;++k){this.bonusParticles[k]=b.createEmitter(m);if(k%3==0){this.textData.font_size=70}else{this.textData.font_size=40}this.bonusParticles[k]._bonusText=h._createLabel(this.textData);this.bonusParticles[k].addChild(this.bonusParticles[k]._bonusText)}},getAnimations:function(l){var k=new d(l.animationManager);k.pushCallback(function(){c.playSound("Battle_Missile_Fire_01")});k.pushCallback(function(){for(var m=0;m<this.cards.length;++m){this.cards[m].addChild(this.bonusParticles[m]);this.bonusParticles[m].play();this.bonusParticles[m]._bonusText.setVisible(true);this.bonusParticles[m]._bonusText.setAlpha(0)}}.bind(this));k.pushAnimation(200,d.Curve.Linear);k.tween(d.Interpolate.scalar(0,1),function(n){for(var m=0;m<this.bonusParticles.length;++m){this.bonusParticles[m]._bonusText.setAlpha(n)}}.bind(this));k.pushAnimation(500,d.Curve.Linear);k.tween(d.Interpolate.scalar(0,-40),function(n){for(var m=0;m<this.bonusParticles.length;++m){this.bonusParticles[m]._bonusText.setPosition(this.bonusParticles[m]._position._x,this.bonusParticles[m]._position._y+n)}}.bind(this));k.pushAnimation(200,d.Curve.Linear);k.tween(d.Interpolate.scalar(1,0),function(n){for(var m=0;m<this.bonusParticles.length;++m){this.bonusParticles[m]._bonusText.setAlpha(n)}}.bind(this));k.pushCallback(function(){this.executeNextAnimation()}.bind(l));return[k]},destroy:function(){for(var k=0;k<this.bonusParticles.length;++k){if(this.bonusParticles[k]&&this.bonusParticles[k].__objectRegistryId){if(this.bonusParticles[k]._bonusText&&this.bonusParticles[k]._bonusText.__objectRegistryId){this.bonusParticles[k]._bonusText.destroy()}this.bonusParticles[k].destroy()}}}})}};__ngs._bn={_c:null,_d:function(){var a={exports:{}};var e=a.exports;this._c=a;var l=__ngs.r_(__ngs._ff).SingleFightAnimation;var b=__ngs.r_(__ngs._45).AnimationQueue;var h=__ngs.r_(__ngs._t).SpriteFactoryCache;var g=__ngs.r_(__ngs._s).TFUtils;var k=__ngs.r_(__ngs._48).TFSoundManager;var d=__ngs.r_(__ngs._4b).UILoader;var c=__ngs.r_(__ngs._62).TFParticleManager;e.RaidBossCardsBonus=l.subclass({classname:"RaidBossCardsBonus",initialize:function(m,n){this.bonusCards=m;this.cardsData=n;this.bottomTextsData=[];this.textsData=[];this.bonusTexts=[];this.bottomBonusTexts=[];this.bonusParticles=[];console.log("RaidBossCardsBonus > initialize > cardsData  : "+JSON.stringify(n))},preload:function(){console.log("RaidBossCardsBonus > preload");for(var m=0;m<this.bonusCards.length;++m){var o=(this.cardsData[m].attackBonus/100)+"X";var n=50;if(this.cardsData[m].cardPos%3==0){n=70}this.textsData[m]={name:"BonusText"+m,pos_x:0,pos_y:0,size_x:200,size_y:100,font_size:n,anchor_x:0.5,anchor_y:0.5,horizontalAlign:"center",depth:3,color:[255,255,255],dropShadowVisible:true,dropShadowPosition:[3,3],dropShadowColor:[0,0,0],fontType:"Content/Fonts/SFElectrotome.ttf",visible:true,text:o};this.bonusTexts[m]=d._createLabel(this.textsData[m]);this.bonusParticles[m]=c.createEmitter("eventCardBonus");this.bonusParticles[m].addChild(this.bonusTexts[m])}},getAnimations:function(n){console.log("RaidBossCardsBonus > getAnimations > fightAnimation: "+n);var o=new b(n.animationManager);o.pushCallback(function(){this.executeNextAnimation()}.bind(n));o.pushCallback(function(){for(var q=0;q<this.bonusCards.length;++q){this.bonusCards[q].addChild(this.bonusParticles[q]);this.bonusParticles[q].play();this.bonusTexts[q]._originalYPosition=this.bonusTexts[q]._position._y}}.bind(this));o.pushAnimation(200,b.Curve.Linear);o.tween(b.Interpolate.scalar(0,1),function(r){for(var q=0;q<this.bonusTexts.length;++q){this.bonusTexts[q].setAlpha(r)}}.bind(this));o.pushAnimation(800,b.Curve.Linear);o.tween(b.Interpolate.scalar(0,-40),function(r){for(var q=0;q<this.bonusTexts.length;++q){this.bonusTexts[q].setPosition(this.bonusTexts[q]._position._x,this.bonusTexts[q]._originalYPosition+r)}}.bind(this));o.pushAnimation(700,b.Curve.Linear);o.tween(b.Interpolate.scalar(1,0),function(r){for(var q=0;q<this.bonusTexts.length;++q){this.bonusTexts[q].setAlpha(r)}}.bind(this));this.queues=[];for(var p=0;p<this.bonusCards.length;++p){this.queues[p]=new b(n.animationManager);if(p!=this.bonusCards.length-1){this.queues[p].pushCallback(function(){k.playSound("Battle_Missile_Fire_01")});this.queues[p].pushCallback(function(){this.executeNextAnimation()}.bind(n))}}if(this.queues.length==0){var m=new b(n.animationManager);m.pushAnimation(1200);m.pushCallback(function(){this.executeNextAnimation()}.bind(n));return[m]}this.queues[this.queues.length-1].pushAnimation(800);this.queues[this.queues.length-1].pushCallback(function(){this.executeNextAnimation()}.bind(n));this.queues.splice(0,0,o);return this.queues},destory:function(){for(var m=0;m<this.bonusTexts.length;++m){if(this.bonusTexts[m]&&this.bonusTexts[m].__objectRegistryId){this.bonusTexts[m].destroy()}if(this.bonusParticles[m]&&this.bonusParticles[m].__objectRegistryId){this.bonusParticles[m].destroy()}}}})}};__ngs._bo={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._7p).View;a.RBBossRewardsView=c.subclass({classname:"RBBossRewardsView",initialize:function($super,d){this._controller=d;$super(d,"RBBossRewardsViewDefinition",function(){this._controller.onViewsDoneLoading(this)}.bind(this))},destroy:function($super){$super()}})}};__ngs._bp={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._7p).View;a.RBBossRewardCell=c.subclass({classname:"RBBossRewardCell",initialize:function($super,d,e){$super(d,"RBBossRewardCellDefinition",function(){this._rewardData=e;this.fillData()}.bind(this))},fillData:function(){var d="";if(this._rewardData){var g=this._rewardData.data;if(g.type==TFGameData.GIFT_TYPE.COINS){}else{if(g.type==TFGameData.GIFT_TYPE.ITEM){var e=TFGameData.getItemDesc(g.value);TFUtils.changeImageOnSprite(this.itemImage,"Content/Images8x/UI/StoreItems/"+e.image);d+=Localization.getString(e.name)}else{if(g.type==TFGameData.GIFT_TYPE.MEDALS){TFUtils.changeImageOnSprite(this.itemImage,TFGameData.getMedalImagePath(g.value));d+=Localization.getString(g.value)}else{if(g.type==TFGameData.GIFT_TYPE.CARDS){}}}}}this.itemName.setText(d);this.requires.setText(this._rewardData.requires);if(g.amount>1){this.itemCount.setText("x"+g.amount)}},destroy:function($super){$super()}})}};__ngs._bq={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._7p).View;a.RBEpilogueView=c.subclass({classname:"RBEpilogueView",initialize:function($super,d){this._controller=d;$super(d,"RBEpilogueViewDefinition",function(){var e=this._controller._eventId;TFUtils.changeImageOnSprite(this.backgroundImage,this.backgroundImage.info.asset_dir+"/"+e+"/"+(this.backgroundImage.info["asset_name_"+e]?this.backgroundImage.info["asset_name_"+e]:this.backgroundImage.info.asset_name));TFUtils.changeImageOnSprite(this.backgroundImageLayer,this.backgroundImageLayer.info.asset_dir+"/"+e+"/"+(this.backgroundImageLayer.info["asset_name_"+e]?this.backgroundImageLayer.info["asset_name_"+e]:this.backgroundImageLayer.info.asset_name));this._controller.onViewsDoneLoading(this)}.bind(this))},destroy:function($super){$super()}})}};__ngs._br={_c:null,_d:function(){this._c={exports:{emitShape_type:"box",emitShape_box_min:[-6,5],emitShape_box_max:[6,13],initVel_angle:90,initVel_angleDelta:15,initVel_speedMin:100,initVel_speedMax:200,physics_accel:[0,400],physics_radialAccel:0,physics_tangentialAccel:0,physics_dragCoeff:0,color_type:"randAnim",color_randAnim_startMin:[1,0,0.1],color_randAnim_startMax:[1,1,0.2],color_randAnim_endMin:[0.1,0.01,0.8],color_randAnim_endMax:[0.1,0.01,0.5],alpha_type:"fade",alpha_constant:0.5,alpha_fade_in:0,alpha_fade_out:0.9,rotation_angle:0,rotation_alignToVelocity:false,attractor_type:"none",attractor_position:[0,100],attractor_falloff:"linear",attractor_strength:1,size_type:"rand",size_preserveAspectRatio:true,size_aspectRatio:1,size_rand_min:[1,1],size_rand_max:[4,4],texture_type:"constant",texture_constant:{image:"Content/Images8x/particlefx/ballfx.png",uvMin:[0.75,0],uvMax:[1,0.25],magFilter:"linear"},emitter_position:[0,0],emitter_duration:-1,emitter_lifetimeMin:0.1,emitter_lifetimeMax:0.25,emitter_rate:1600,emitter_maxParticles:300,emitter_sortOrder:"none",emitter_blendMode:"add",emitter_freeParticles:true}}}};__ngs._bs={_c:null,_d:function(){this._c={exports:{emitShape_type:"circle",emitShape_box_min:[-100,-100],emitShape_box_max:[100,100],emitShape_circle_innerRadius:0,emitShape_circle_outerRadius:5,emitShape_line_length:400,emitShape_line_thickness:0,emitShape_line_angle:0,initVel_angle:0,initVel_angleDelta:174.34285714285713,initVel_speedMin:100,initVel_speedMax:200,physics_accel:[-151.42857142857144,-151.42857142857144],physics_radialAccel:357.1428571428571,physics_tangentialAccel:0,physics_dragCoeff:3.3857142857142857,color_type:"constant",color_constant:[0.05,0.05,0.05],color_rand_min:[1,0,0],color_rand_max:[0.5,0,0],color_randAnim_startMin:[1,1,1],color_randAnim_startMax:[1,0,0],color_randAnim_endMin:[0,0,1],color_randAnim_endMax:[0,0,1],color_keyframes:[{key:0,value:[1,0,0]},{key:0.5,value:[0,1,0]},{key:1,value:[0,0,1]}],alpha_type:"fade",alpha_constant:0.5,alpha_fade_in:0,alpha_fade_out:0.01,alpha_keyframes:[{key:0,value:0},{key:0.1,value:1},{key:0.2,value:0},{key:0.3,value:1},{key:0.4,value:0},{key:0.5,value:1},{key:0.6,value:0},{key:0.7,value:1},{key:0.8,value:0},{key:0.9,value:1},{key:1,value:0}],rotation_angle:0,rotation_spinRateMin:138.57142857142856,rotation_spinRateMax:200,rotation_alignToVelocity:false,attractor_type:"none",attractor_position:[320,400],attractor_falloff:"easeIn",attractor_strength:1,size_type:"randAnim",size_preserveAspectRatio:false,size_aspectRatio:1,size_constant:[66.42857142857143,62.142857142857146],size_rand_min:[30,30],size_rand_max:[50,50],size_randAnim_startMin:[30,30],size_randAnim_startMax:[50,50],size_randAnim_endMin:[40,40],size_randAnim_endMax:[60,60],size_keyframes:[{key:0,value:[10,10]},{key:0.5,value:[30,30]},{key:1,value:[0,0]}],texture_type:"constant",texture_constant:{image:"Content/Images8x/particlefx/explode_flame.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},emitter_position:[0,0],emitter_duration:0.1,emitter_lifetimeMin:0.9,emitter_lifetimeMax:1.6,emitter_rate:200,emitter_maxParticles:1500,emitter_sortOrder:"newestOnTop",emitter_blendMode:"alpha",emitter_freeParticles:true,rotation_angleDelta:0}}}};__ngs._bt={_c:null,_d:function(){this._c={exports:{emitShape_type:"circle",emitShape_box_min:[-100,-100],emitShape_box_max:[100,100],emitShape_circle_innerRadius:0,emitShape_circle_outerRadius:5,emitShape_line_length:400,emitShape_line_thickness:0,emitShape_line_angle:0,initVel_angle:0,initVel_angleDelta:174.34285714285713,initVel_speedMin:50,initVel_speedMax:100,physics_accel:[-151.42857142857144,-151.42857142857144],physics_radialAccel:357.1428571428571,physics_tangentialAccel:0,physics_dragCoeff:3.3857142857142857,color_type:"constant",color_constant:[1,1,1],color_rand_min:[1,0,0],color_rand_max:[0.5,0,0],color_randAnim_startMin:[1,1,1],color_randAnim_startMax:[1,0,0],color_randAnim_endMin:[0,0,1],color_randAnim_endMax:[0,0,1],color_keyframes:[{key:0,value:[1,0,0]},{key:0.5,value:[0,1,0]},{key:1,value:[0,0,1]}],alpha_type:"fade",alpha_constant:0.5,alpha_fade_in:0,alpha_fade_out:0.8257142857142857,alpha_keyframes:[{key:0,value:0},{key:0.1,value:1},{key:0.2,value:0},{key:0.3,value:1},{key:0.4,value:0},{key:0.5,value:1},{key:0.6,value:0},{key:0.7,value:1},{key:0.8,value:0},{key:0.9,value:1},{key:1,value:0}],rotation_angle:0,rotation_spinRateMin:138.57142857142856,rotation_spinRateMax:200,rotation_alignToVelocity:false,attractor_type:"none",attractor_position:[320,400],attractor_falloff:"easeIn",attractor_strength:1,size_type:"rand",size_preserveAspectRatio:false,size_aspectRatio:1,size_constant:[66.42857142857143,62.142857142857146],size_rand_min:[30,30],size_rand_max:[50,50],size_randAnim_startMin:[1,1],size_randAnim_startMax:[30,30],size_randAnim_endMin:[10,10],size_randAnim_endMax:[10,10],size_keyframes:[{key:0,value:[10,10]},{key:0.5,value:[30,30]},{key:1,value:[0,0]}],texture_type:"constant",texture_constant:{image:"Content/Images8x/particlefx/explode_flame.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},emitter_position:[0,0],emitter_duration:0.1,emitter_lifetimeMin:0.37142857142857144,emitter_lifetimeMax:0.5857142857142857,emitter_rate:200,emitter_maxParticles:1500,emitter_sortOrder:"newestOnTop",emitter_blendMode:"add",emitter_freeParticles:true,rotation_angleDelta:0}}}};__ngs._bu={_c:null,_d:function(){this._c={exports:{alpha_constant:0,alpha_fade_in:0.39,alpha_fade_out:0.99,alpha_keyframes:[],alpha_type:"fade",attractor_falloff:"linear",attractor_position:[160,260],attractor_strength:1,attractor_type:"local",color_keyframes:[{key:0.1,value:[0.5,0,0]},{key:0.6,value:[1,0.5,0.5]}],color_randAnim_endMax:[1,0,0],color_randAnim_endMin:[0.5,0,0],color_randAnim_startMax:[1,1,0],color_randAnim_startMin:[0.5,0,0],color_type:"constant",emitShape_box_max:[50,50],emitShape_box_min:[-50,-50],emitShape_circle_innerRadius:80,emitShape_circle_outerRadius:180,emitShape_type:"circle",emitter_blendMode:"add",emitter_duration:100,emitter_freeParticles:true,emitter_lifetimeMax:1,emitter_lifetimeMin:0.5,emitter_maxParticles:70,emitter_position:[160,220],emitter_rate:300,emitter_sortOrder:"none",initVel_angle:0,initVel_angleDelta:180,initVel_speedMax:0,initVel_speedMin:3,physics_accel:[0,0],physics_dragCoeff:0,physics_radialAccel:0,physics_tangentialAccel:100,rotation_alignToVelocity:true,rotation_angle:0,rotation_angleDelta:127,rotation_spinRateMax:0,rotation_spinRateMin:0,size_aspectRatio:10,size_constant:[10,10],size_keyframes:[],size_preserveAspectRatio:false,size_randAnim_endMax:[60,15],size_randAnim_endMin:[50,10],size_randAnim_startMax:[100,120],size_randAnim_startMin:[75,75],size_rand_max:[10,10],size_rand_min:[5,5],size_type:"randAnim",texture_constant:{image:"Content/Images8x/particlefx/powerup1.png",magFilter:"linear",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"},texture_randPick:[{image:"Content/Images8x/particlefx/powerupCyan.png",magFilter:"nearest",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"},{image:"Content/Images8x/particlefx/sparkle1.png",magFilter:"nearest",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"}],texture_type:"randPick"}}}};__ngs._bv={_c:null,_d:function(){this._c={exports:{emitShape_type:"line",emitShape_circle_innerRadius:40,emitShape_circle_outerRadius:80,initVel_angle:270,initVel_angleDelta:0,initVel_speedMin:3,initVel_speedMax:30,physics_accel:[0,0],physics_radialAccel:0,physics_tangentialAccel:0,physics_dragCoeff:0,color_type:"constant",color_keyframes:[{key:0.1,value:[0.5,0,0]},{key:0.6,value:[1,0.5,0.5]}],color_randAnim_startMin:[0.5,0,0],color_randAnim_startMax:[1,1,0],color_randAnim_endMin:[0.5,0,0],color_randAnim_endMax:[1,0,0],alpha_type:"fade",alpha_fade_in:0.01,alpha_fade_out:0.05,rotation_angle:0,rotation_spinRateMin:0,rotation_spinRateMax:0,rotation_alignToVelocity:false,attractor_type:"none",attractor_position:[160,300],attractor_falloff:"parabolic",attractor_strength:1,size_type:"rand",size_preserveAspectRatio:false,size_aspectRatio:1,size_rand_min:[0.5,15],size_rand_max:[20,25],texture_type:"randPick",texture_constant:{image:"Content/Images8x/particlefx/red_laserblast.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},texture_randPick:[{image:"Content/Images8x/particlefx/red_laserblast.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},{image:"Content/Images8x/particlefx/lightBlue_laserblast.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},{image:"Content/Images8x/particlefx/whiteLaser.png",uvMin:[0,0],uvMax:[1,1],uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest",magFilter:"nearest"}],emitter_position:[0,0],emitter_duration:2,emitter_lifetimeMin:0.1,emitter_lifetimeMax:0.1,emitter_rate:2000,emitter_maxParticles:5000,emitter_sortOrder:"none",emitter_blendMode:"add",emitter_freeParticles:true,emitShape_line_length:55.56,emitShape_line_thickness:5,emitShape_line_angle:270,emitShape_box_min:[-50,-50],emitShape_box_max:[50,50],alpha_constant:0,rotation_angleDelta:0,size_constant:[10,10],size_randAnim_startMin:[10,10],size_randAnim_startMax:[10,10],size_randAnim_endMin:[10,10],size_randAnim_endMax:[10,10]}}}};__ngs._bw={_c:null,_d:function(){this._c={exports:{emitShape_type:"line",emitShape_circle_innerRadius:40,emitShape_circle_outerRadius:80,initVel_angle:270,initVel_angleDelta:0,initVel_speedMin:3,initVel_speedMax:30,physics_accel:[0,0],physics_radialAccel:0,physics_tangentialAccel:0,physics_dragCoeff:0,color_type:"constant",color_keyframes:[{key:0.1,value:[0.5,0,0]},{key:0.6,value:[1,0.5,0.5]}],color_randAnim_startMin:[0.5,0,0],color_randAnim_startMax:[1,1,0],color_randAnim_endMin:[0.5,0,0],color_randAnim_endMax:[1,0,0],alpha_type:"fade",alpha_fade_in:0.01,alpha_fade_out:0.05,rotation_angle:0,rotation_spinRateMin:0,rotation_spinRateMax:0,rotation_alignToVelocity:false,attractor_type:"none",attractor_position:[160,300],attractor_falloff:"parabolic",attractor_strength:1,size_type:"rand",size_preserveAspectRatio:false,size_aspectRatio:1,size_rand_min:[0.5,15],size_rand_max:[20,25],texture_type:"randPick",texture_constant:{image:"Content/Images8x/particlefx/red_laserblast.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},texture_randPick:[{image:"Content/Images8x/particlefx/purple_laserblast.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},{image:"Content/Images8x/particlefx/lightBlue_laserblast.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},{image:"Content/Images8x/particlefx/whiteLaser.png",uvMin:[0,0],uvMax:[1,1],uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest",magFilter:"nearest"}],emitter_position:[0,0],emitter_duration:2,emitter_lifetimeMin:0.1,emitter_lifetimeMax:0.1,emitter_rate:2000,emitter_maxParticles:5000,emitter_sortOrder:"none",emitter_blendMode:"add",emitter_freeParticles:true,emitShape_line_length:55.56,emitShape_line_thickness:5,emitShape_line_angle:270,emitShape_box_min:[-50,-50],emitShape_box_max:[50,50],alpha_constant:0,rotation_angleDelta:0,size_constant:[10,10],size_randAnim_startMin:[10,10],size_randAnim_startMax:[10,10],size_randAnim_endMin:[10,10],size_randAnim_endMax:[10,10]}}}};__ngs._bx={_c:null,_d:function(){this._c={exports:{emitShape_type:"line",emitShape_circle_innerRadius:40,emitShape_circle_outerRadius:80,initVel_angle:270,initVel_angleDelta:0,initVel_speedMin:0,initVel_speedMax:0,physics_accel:[0,0],physics_radialAccel:0,physics_tangentialAccel:0,physics_dragCoeff:0,color_type:"constant",color_keyframes:[{key:0.1,value:[0.5,0,0]},{key:0.6,value:[1,0.5,0.5]}],color_randAnim_startMin:[0.5,0,0],color_randAnim_startMax:[1,1,0],color_randAnim_endMin:[0.5,0,0],color_randAnim_endMax:[1,0,0],alpha_type:"fade",alpha_fade_in:0,alpha_fade_out:1,rotation_angle:0,rotation_spinRateMin:0,rotation_spinRateMax:0,rotation_alignToVelocity:false,attractor_type:"none",attractor_position:[0,100],attractor_falloff:"linear",attractor_strength:1,size_type:"constant",size_preserveAspectRatio:true,size_aspectRatio:1,size_rand_min:[52,52],size_rand_max:[52,52],texture_type:"constant",texture_constant:{image:"Content/Images8x/particlefx/missile.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},texture_randPick:[{image:"Content/Images8x/particlefx/explosion/explode_flame.png",uvMin:[0.25,0.5],uvMax:[0.5,0.75],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},{image:"Content/Images8x/particlefx/explosion/explode_flame.png",uvMin:[0.75,0.25],uvMax:[1,0.5],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"}],emitter_position:[0,0],emitter_duration:2,emitter_lifetimeMin:2,emitter_lifetimeMax:2,emitter_rate:1,emitter_maxParticles:1,emitter_sortOrder:"none",emitter_blendMode:"alpha",emitter_freeParticles:false,emitShape_line_length:0,emitShape_line_thickness:0,emitShape_line_angle:270,size_constant:[30,30],emitShape_box_min:[-50,-50],emitShape_box_max:[50,50],alpha_constant:0,rotation_angleDelta:0,size_randAnim_startMin:[10,10],size_randAnim_startMax:[10,10],size_randAnim_endMin:[10,10],size_randAnim_endMax:[10,10]}}}};__ngs._by={_c:null,_d:function(){this._c={exports:{emitShape_type:"line",emitShape_circle_innerRadius:40,emitShape_circle_outerRadius:80,initVel_angle:270,initVel_angleDelta:0,initVel_speedMin:0,initVel_speedMax:0,physics_accel:[0,0],physics_radialAccel:0,physics_tangentialAccel:0,physics_dragCoeff:0,color_type:"constant",color_keyframes:[{key:0.1,value:[0.5,0,0]},{key:0.6,value:[1,0.5,0.5]}],color_randAnim_startMin:[0.5,0,0],color_randAnim_startMax:[1,1,0],color_randAnim_endMin:[0.5,0,0],color_randAnim_endMax:[1,0,0],alpha_type:"fade",alpha_fade_in:1,alpha_fade_out:0.03,rotation_angle:0,rotation_spinRateMin:0,rotation_spinRateMax:0,rotation_alignToVelocity:false,attractor_type:"none",attractor_position:[160,300],attractor_falloff:"linear",attractor_strength:1,size_type:"randAnim",size_preserveAspectRatio:false,size_aspectRatio:1,size_rand_min:[12,24],size_rand_max:[16,30],texture_type:"randPick",texture_constant:{image:"Content/Images8x/particlefx/rocketExhaust.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},texture_randPick:[{image:"Content/Images8x/particlefx/mExhaust.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},{image:"Content/Images8x/particlefx/mExhaust.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"}],emitter_position:[0,0],emitter_duration:2,emitter_lifetimeMin:0.1,emitter_lifetimeMax:0.2,emitter_rate:80,emitter_maxParticles:2000,emitter_sortOrder:"none",emitter_blendMode:"add",emitter_freeParticles:true,emitShape_line_length:0,emitShape_line_thickness:4.68,emitShape_line_angle:270,size_constant:[10,10],emitShape_box_min:[-50,-50],emitShape_box_max:[50,50],alpha_constant:0,rotation_angleDelta:0,size_randAnim_startMin:[15,10],size_randAnim_startMax:[20,20],size_randAnim_endMin:[3,30],size_randAnim_endMax:[4,70]}}}};__ngs._bz={_c:null,_d:function(){this._c={exports:{emitShape_type:"circle",emitShape_circle_innerRadius:0.01,emitShape_circle_outerRadius:0.1,initVel_angle:0,initVel_angleDelta:180,initVel_speedMin:200,initVel_speedMax:300,physics_accel:[0,0],physics_radialAccel:0,physics_tangentialAccel:0,physics_dragCoeff:5,color_type:"constant",color_keyframes:[{key:0.1,value:[0.5,0,0]},{key:0.6,value:[1,0.5,0.5]}],color_randAnim_startMin:[0.5,0,0],color_randAnim_startMax:[1,1,0],color_randAnim_endMin:[0.5,0,0],color_randAnim_endMax:[1,0,0],alpha_type:"fade",alpha_fade_in:0.09,alpha_fade_out:0.94,rotation_angle:0,rotation_spinRateMin:-10,rotation_spinRateMax:10,rotation_alignToVelocity:false,attractor_type:"none",attractor_position:[0,100],attractor_falloff:"linear",attractor_strength:1,size_type:"randAnim",size_preserveAspectRatio:true,size_aspectRatio:1,size_rand_min:[50,50],size_rand_max:[0.1,0.1],texture_type:"randPick",texture_constant:{image:"Content_Internal/ballfx.png",uvMin:[0.25,0.5],uvMax:[0.5,0.75],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},texture_randPick:[{image:"Content/Images8x/particlefx/sparkle2.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},{image:"Content/Images8x/particlefx/explode_flame.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},{image:"Content/Images8x/particlefx/explode_flame.png",uvMin:[0,0],uvMax:[1,1],uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest",magFilter:"nearest"}],emitter_position:[0,0],emitter_duration:0.3,emitter_lifetimeMin:0.1,emitter_lifetimeMax:0.4,emitter_rate:300,emitter_maxParticles:1000,emitter_sortOrder:"none",emitter_blendMode:"add",emitter_freeParticles:true,emitShape_box_min:[-50,-50],emitShape_box_max:[50,50],alpha_constant:0,rotation_angleDelta:0,size_constant:[10,10],size_randAnim_startMin:[1,1],size_randAnim_startMax:[2,2],size_randAnim_endMin:[30,30],size_randAnim_endMax:[50,50]}}}};__ngs._c0={_c:null,_d:function(){this._c={exports:{emitShape_type:"circle",emitShape_circle_innerRadius:1.24,emitShape_circle_outerRadius:6.19,initVel_angle:0,initVel_angleDelta:180,initVel_speedMin:0,initVel_speedMax:50,physics_accel:[0,0],physics_radialAccel:0,physics_tangentialAccel:0,physics_dragCoeff:0,color_type:"constant",color_keyframes:[{key:0.1,value:[1,0,0]},{key:0.6,value:[0.23,0.11,0.11]}],color_randAnim_startMin:[0.5,0,0],color_randAnim_startMax:[1,1,0],color_randAnim_endMin:[0.5,0,0],color_randAnim_endMax:[1,0,0],alpha_type:"fade",alpha_fade_in:0,alpha_fade_out:0.7,rotation_angle:0,rotation_spinRateMin:-5000,rotation_spinRateMax:5000,rotation_alignToVelocity:false,attractor_type:"none",attractor_position:[0,100],attractor_falloff:"linear",attractor_strength:1,size_type:"randAnim",size_preserveAspectRatio:true,size_aspectRatio:1,size_rand_min:[3,3],size_rand_max:[17,17],texture_type:"randPick",texture_constant:{image:"Content/Images8x/particlefx/red_cloud.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",vWrap:"clampToEdge",uWrap:"clampToEdge",minFilter:"nearest"},texture_randPick:[{image:"Content/Images8x/particlefx/purple_cloud.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},{image:"Content/Images8x/particlefx/purple_cloud.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},{image:"Content/Images8x/particlefx/white_cloud.png",uvMin:[0,0],uvMax:[1,1],uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest",magFilter:"nearest"},{image:"Content/Images8x/particlefx/purple_streaks.png",uvMin:[0,0],uvMax:[1,1],uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest",magFilter:"nearest"}],emitter_position:[0,0],emitter_duration:0.1,emitter_lifetimeMin:0.1,emitter_lifetimeMax:0.4,emitter_rate:150,emitter_maxParticles:100,emitter_sortOrder:"oldestOnTop",emitter_blendMode:"add",emitter_freeParticles:true,size_constant:[10,0],size_randAnim_startMin:[5,5],size_randAnim_startMax:[8,8],size_randAnim_endMin:[10,20],size_randAnim_endMax:[40,40],emitShape_box_min:[-50,-50],emitShape_box_max:[50,50],alpha_constant:0,rotation_angleDelta:0}}}};__ngs._c1={_c:null,_d:function(){this._c={exports:{emitShape_type:"circle",emitShape_circle_innerRadius:1.24,emitShape_circle_outerRadius:6.19,initVel_angle:0,initVel_angleDelta:180,initVel_speedMin:0,initVel_speedMax:50,physics_accel:[0,0],physics_radialAccel:0,physics_tangentialAccel:0,physics_dragCoeff:0,color_type:"constant",color_keyframes:[{key:0.1,value:[1,0,0]},{key:0.6,value:[0.23,0.11,0.11]}],color_randAnim_startMin:[0.5,0,0],color_randAnim_startMax:[1,1,0],color_randAnim_endMin:[0.5,0,0],color_randAnim_endMax:[1,0,0],alpha_type:"fade",alpha_fade_in:0,alpha_fade_out:0.7,rotation_angle:0,rotation_spinRateMin:-5000,rotation_spinRateMax:5000,rotation_alignToVelocity:false,attractor_type:"none",attractor_position:[0,100],attractor_falloff:"linear",attractor_strength:1,size_type:"randAnim",size_preserveAspectRatio:true,size_aspectRatio:1,size_rand_min:[3,3],size_rand_max:[17,17],texture_type:"randPick",texture_constant:{image:"Content/Images8x/particlefx/red_cloud.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",vWrap:"clampToEdge",uWrap:"clampToEdge",minFilter:"nearest"},texture_randPick:[{image:"Content/Images8x/particlefx/red_cloud.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},{image:"Content/Images8x/particlefx/red_cloud.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},{image:"Content/Images8x/particlefx/white_cloud.png",uvMin:[0,0],uvMax:[1,1],uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest",magFilter:"nearest"},{image:"Content/Images8x/particlefx/red_streaks.png",uvMin:[0,0],uvMax:[1,1],uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest",magFilter:"nearest"}],emitter_position:[0,0],emitter_duration:0.1,emitter_lifetimeMin:0.1,emitter_lifetimeMax:0.4,emitter_rate:150,emitter_maxParticles:100,emitter_sortOrder:"oldestOnTop",emitter_blendMode:"add",emitter_freeParticles:true,size_constant:[10,0],size_randAnim_startMin:[5,5],size_randAnim_startMax:[8,8],size_randAnim_endMin:[10,20],size_randAnim_endMax:[40,40],emitShape_box_min:[-50,-50],emitShape_box_max:[50,50],alpha_constant:0,rotation_angleDelta:0}}}};__ngs._c2={_c:null,_d:function(){this._c={exports:{alpha_constant:0,alpha_fade_in:0,alpha_fade_out:0.2,alpha_keyframes:[],alpha_type:"fade",attractor_falloff:"linear",attractor_position:[0,100],attractor_strength:1,attractor_type:"none",color_keyframes:[{key:0.1,value:[0.5,0,0]},{key:0.3,value:[1,0.5,0.5]}],color_randAnim_endMax:[1,0,0],color_randAnim_endMin:[0.5,0,0],color_randAnim_startMax:[1,1,0],color_randAnim_startMin:[0.5,0,0],color_type:"constant",emitShape_box_max:[50,50],emitShape_box_min:[-50,-50],emitShape_circle_innerRadius:0.1,emitShape_circle_outerRadius:0.1,emitShape_line_angle:135,emitShape_line_length:80,emitShape_line_thickness:5,emitShape_type:"circle",emitter_blendMode:"add",emitter_duration:0.1,emitter_freeParticles:false,emitter_lifetimeMax:1,emitter_lifetimeMin:1,emitter_maxParticles:3,emitter_position:[0,0],emitter_rate:5,emitter_sortOrder:"none",initVel_angle:135,initVel_angleDelta:0,initVel_speedMax:0,initVel_speedMin:2000,physics_accel:[0,0],physics_dragCoeff:95,physics_radialAccel:0,physics_tangentialAccel:100,rotation_alignToVelocity:false,rotation_angle:-135,rotation_angleDelta:120,rotation_spinRateMax:0,rotation_spinRateMin:0,size_aspectRatio:1,size_constant:[10,10],size_keyframes:[{key:0,value:[10,2]},{key:0.1,value:[20,200]}],size_preserveAspectRatio:false,size_randAnim_endMax:[5,35],size_randAnim_endMin:[4,25],size_randAnim_startMax:[2,3],size_randAnim_startMin:[1,2],size_rand_max:[10,160],size_rand_min:[6,100],size_type:"keyframes",texture_constant:{image:"Content/Images8x/particlefx/swordSlash2.png",magFilter:"linear",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"},texture_randPick:[{image:"Content/Images8x/particlefx/swordSlash2.png",magFilter:"linear",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"},{image:"Content/Images8x/particlefx/swordSlash2.png",magFilter:"nearest",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[0.5,1],uvMin:[0,0],vWrap:"clampToEdge"},{image:"Content/Images8x/particlefx/swordSlash2.png",magFilter:"nearest",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"}],texture_type:"randPick"}}}};__ngs._c3={_c:null,_d:function(){this._c={exports:{emitShape_type:"line",emitShape_circle_innerRadius:40,emitShape_circle_outerRadius:80,initVel_angle:135,initVel_angleDelta:17,initVel_speedMin:3000,initVel_speedMax:6000,physics_accel:[0,0],physics_radialAccel:0,physics_tangentialAccel:100,physics_dragCoeff:37.37,color_type:"constant",color_keyframes:[{key:0.1,value:[0.5,0,0]},{key:0.6,value:[1,0.5,0.5]}],color_randAnim_startMin:[0.5,0,0],color_randAnim_startMax:[1,1,0],color_randAnim_endMin:[0.5,0,0],color_randAnim_endMax:[1,0,0],alpha_type:"fade",alpha_fade_in:0,alpha_fade_out:1,rotation_angle:-55,rotation_spinRateMin:0,rotation_spinRateMax:0,rotation_alignToVelocity:false,attractor_type:"none",attractor_position:[0,100],attractor_falloff:"linear",attractor_strength:1,size_type:"rand",size_preserveAspectRatio:false,size_aspectRatio:1,size_rand_min:[2,5],size_rand_max:[8,5],texture_type:"randPick",texture_constant:{image:"Content/Images8x/particlefx/sword_sparks06.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},texture_randPick:[{image:"Content/Images8x/particlefx/swordYellowSpark.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"}],emitter_position:[0,0],emitter_duration:0.01,emitter_lifetimeMin:0.01,emitter_lifetimeMax:0.5,emitter_rate:5000,emitter_maxParticles:1000,emitter_sortOrder:"none",emitter_blendMode:"add",emitter_freeParticles:false,emitShape_box_min:[-50,-50],emitShape_box_max:[50,50],alpha_constant:0,rotation_angleDelta:15,size_constant:[10,10],size_randAnim_startMin:[10,10],size_randAnim_startMax:[10,10],size_randAnim_endMin:[10,10],size_randAnim_endMax:[10,10],emitShape_line_angle:135,emitShape_line_length:80,emitShape_line_thickness:5}}}};__ngs._c4={_c:null,_d:function(){this._c={exports:{emitShape_type:"circle",emitShape_circle_innerRadius:0.01,emitShape_circle_outerRadius:0.1,initVel_angle:0,initVel_angleDelta:180,initVel_speedMin:300,initVel_speedMax:0,physics_accel:[0,0],physics_radialAccel:0,physics_tangentialAccel:0,physics_dragCoeff:4.84,color_type:"constant",color_keyframes:[{key:0.1,value:[0.5,0,0]},{key:0.6,value:[1,0.5,0.5]}],color_randAnim_startMin:[0.5,0,0],color_randAnim_startMax:[1,1,0],color_randAnim_endMin:[0.5,0,0],color_randAnim_endMax:[1,0,0],alpha_type:"fade",alpha_fade_in:0,alpha_fade_out:0.03,rotation_angle:0,rotation_spinRateMin:-100,rotation_spinRateMax:0,rotation_alignToVelocity:true,attractor_type:"none",attractor_position:[0,100],attractor_falloff:"linear",attractor_strength:1,size_type:"randAnim",size_preserveAspectRatio:false,size_aspectRatio:1,size_rand_min:[10,10],size_rand_max:[10,10],texture_type:"randPick",texture_constant:{image:"Content/Images8x/particlefx/sparkle1.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},texture_randPick:[{image:"Content/Images8x/particlefx/sparkle2.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},{image:"/Content/Images8x/particlefx/circlePurple.png",uvMin:[0,0],uvMax:[1,1],uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest",magFilter:"nearest"}],emitter_position:[0,0],emitter_duration:0.1,emitter_lifetimeMin:0.5,emitter_lifetimeMax:0.8,emitter_rate:100,emitter_maxParticles:1200,emitter_sortOrder:"none",emitter_blendMode:"add",emitter_freeParticles:false,emitShape_box_min:[0,0],emitShape_box_max:[55,70],alpha_constant:0,rotation_angleDelta:0,size_constant:[10,10],size_randAnim_startMin:[8,20],size_randAnim_startMax:[12,30],size_randAnim_endMin:[10,30],size_randAnim_endMax:[14,40],emitShape_line_angle:0,emitShape_line_length:51.72,emitShape_line_thickness:0}}}};__ngs._c5={_c:null,_d:function(){this._c={exports:{emitShape_type:"circle",emitShape_box_min:[-100,-100],emitShape_box_max:[100,100],emitShape_circle_innerRadius:0,emitShape_circle_outerRadius:5,emitShape_line_length:400,emitShape_line_thickness:0,emitShape_line_angle:0,initVel_angle:0,initVel_angleDelta:180,initVel_speedMin:0,initVel_speedMax:0,physics_accel:[0,-300],physics_radialAccel:0,physics_tangentialAccel:0,physics_dragCoeff:3.3857142857142857,color_type:"randAnim",color_constant:[1,1,1],color_rand_min:[1,0,0],color_rand_max:[0.5,0,0],color_randAnim_startMin:[1,1,1],color_randAnim_startMax:[1,0.98,0.97],color_randAnim_endMin:[0,0,0],color_randAnim_endMax:[0,0,0],color_keyframes:[{key:0,value:[1,0,0]},{key:0.5,value:[0,1,0]},{key:1,value:[0,0,1]}],alpha_type:"fade",alpha_constant:0.5,alpha_fade_in:0.03,alpha_fade_out:0.63,alpha_keyframes:[{key:0,value:0},{key:0.1,value:1},{key:0.2,value:0},{key:0.3,value:1},{key:0.4,value:0},{key:0.5,value:1},{key:0.6,value:0},{key:0.7,value:1},{key:0.8,value:0},{key:0.9,value:1},{key:1,value:0}],rotation_angle:0,rotation_spinRateMin:-100,rotation_spinRateMax:100,rotation_alignToVelocity:false,attractor_type:"none",attractor_position:[320,400],attractor_falloff:"easeIn",attractor_strength:1,size_type:"randAnim",size_preserveAspectRatio:false,size_aspectRatio:1,size_constant:[66.42857142857143,62.142857142857146],size_rand_min:[30,30],size_rand_max:[50,50],size_randAnim_startMin:[1,1],size_randAnim_startMax:[10,10],size_randAnim_endMin:[40,40],size_randAnim_endMax:[70,70],size_keyframes:[{key:0,value:[10,10]},{key:0.5,value:[30,30]},{key:1,value:[0,0]}],texture_type:"constant",texture_constant:{image:"Content/Images8x/particlefx/explode_flame.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},emitter_position:[0,0],emitter_duration:-1,emitter_lifetimeMin:0.1,emitter_lifetimeMax:0.5,emitter_rate:25,emitter_maxParticles:1500,emitter_sortOrder:"newestOnTop",emitter_blendMode:"alpha",emitter_freeParticles:true,rotation_angleDelta:0}}}};__ngs._c6={_c:null,_d:function(){this._c={exports:{emitShape_type:"circle",emitShape_circle_innerRadius:0.01,emitShape_circle_outerRadius:0.1,initVel_angle:0,initVel_angleDelta:180,initVel_speedMin:0,initVel_speedMax:0,physics_accel:[0,0],physics_radialAccel:0,physics_tangentialAccel:0,physics_dragCoeff:4.84,color_type:"constant",color_keyframes:[{key:0.1,value:[0.5,0,0]},{key:0.6,value:[1,0.5,0.5]}],color_randAnim_startMin:[0.5,0,0],color_randAnim_startMax:[1,1,0],color_randAnim_endMin:[0.5,0,0],color_randAnim_endMax:[1,0,0],alpha_type:"fade",alpha_fade_in:0,alpha_fade_out:0.03,rotation_angle:0,rotation_spinRateMin:-50,rotation_spinRateMax:50,rotation_alignToVelocity:true,attractor_type:"none",attractor_position:[0,100],attractor_falloff:"linear",attractor_strength:1,size_type:"randAnim",size_preserveAspectRatio:false,size_aspectRatio:1,size_rand_min:[10,10],size_rand_max:[10,10],texture_type:"randPick",texture_constant:{image:"Content/Images8x/particlefx/sparkle1.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},texture_randPick:[{image:"Content/Images8x/particlefx/purpleLineH2.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},{image:"Content/Images8x/particlefx/sparkle3.png",uvMin:[0,0],uvMax:[1,1],uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest",magFilter:"nearest"}],emitter_position:[0,0],emitter_duration:0.75,emitter_lifetimeMin:0.1,emitter_lifetimeMax:0.4,emitter_rate:100,emitter_maxParticles:1200,emitter_sortOrder:"none",emitter_blendMode:"add",emitter_freeParticles:false,emitShape_box_min:[0,0],emitShape_box_max:[55,70],alpha_constant:0,rotation_angleDelta:90,size_constant:[10,10],size_randAnim_startMin:[8,8],size_randAnim_startMax:[12,12],size_randAnim_endMin:[85,85],size_randAnim_endMax:[120,120],emitShape_line_angle:0,emitShape_line_length:51.72,emitShape_line_thickness:0}}}};__ngs._c7={_c:null,_d:function(){this._c={exports:{alpha_constant:0,alpha_fade_in:0,alpha_fade_out:0.95,alpha_keyframes:[],alpha_type:"fade",attractor_falloff:"linear",attractor_position:[0,100],attractor_strength:1,attractor_type:"none",color_keyframes:[{key:0.1,value:[0.5,0,0]},{key:0.6,value:[1,0.5,0.5]}],color_randAnim_endMax:[1,0,0],color_randAnim_endMin:[0.5,0,0],color_randAnim_startMax:[1,1,0],color_randAnim_startMin:[0.5,0,0],color_type:"constant",emitShape_box_max:[700,850],emitShape_box_min:[0,0],emitShape_circle_innerRadius:0.01,emitShape_circle_outerRadius:0.1,emitShape_line_length:50,emitShape_line_thickness:0,emitShape_type:"line",emitter_blendMode:"add",emitter_duration:1,emitter_freeParticles:false,emitter_lifetimeMax:0.3,emitter_lifetimeMin:0.1,emitter_maxParticles:10000,emitter_position:[0,0],emitter_rate:3,emitter_sortOrder:"none",initVel_angle:270,initVel_angleDelta:0,initVel_speedMax:0,initVel_speedMin:0,physics_accel:[0,0],physics_dragCoeff:0,physics_radialAccel:0,physics_tangentialAccel:0,rotation_alignToVelocity:false,rotation_angle:0,rotation_angleDelta:10,rotation_spinRateMax:0,rotation_spinRateMin:0,size_aspectRatio:1,size_constant:[10,10],size_keyframes:[],size_preserveAspectRatio:false,size_randAnim_endMax:[150,90],size_randAnim_endMin:[150,100],size_randAnim_startMax:[150,15],size_randAnim_startMin:[150,25],size_rand_max:[17,17],size_rand_min:[3,3],size_type:"randAnim",texture_constant:{image:"Content/Images8x/particlefx/sparkle1.png",magFilter:"linear",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"},texture_keyframes:[{key:0,value:{image:"Content/Images8x/particlefx/lightningg_01.png",magFilter:"linear",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"}},{key:0.2,value:{image:"Content/Images8x/particlefx/lightningg_02.png",magFilter:"linear",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"}},{key:0.4,value:{image:"Content/Images8x/particlefx/lightningg_03.png",magFilter:"linear",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"}},{key:0.6,value:{image:"Content/Images8x/particlefx/lightningg_04.png",magFilter:"linear",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"}}],texture_randPick:[{image:"Content/Images8x/particlefx/sparkCyan3.png",magFilter:"linear",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"},{image:"Content/Images8x/particlefx/sparkCyan4.png",magFilter:"nearest",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"},{image:"Content/Images8x/particlefx/sparkCyan5.png",magFilter:"nearest",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"},{image:"Content/Images8x/particlefx/sparkCyan6.png",magFilter:"nearest",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"}],texture_type:"keyframes"}}}};__ngs._c8={_c:null,_d:function(){this._c={exports:{alpha_constant:0,alpha_fade_in:0.98,alpha_fade_out:0,alpha_keyframes:[],alpha_type:"fade",attractor_falloff:"linear",attractor_position:[0,100],attractor_strength:1,attractor_type:"none",color_keyframes:[{key:0.1,value:[0.5,0,0]},{key:0.6,value:[1,0.5,0.5]}],color_randAnim_endMax:[1,0,0],color_randAnim_endMin:[0.5,0,0],color_randAnim_startMax:[1,1,0],color_randAnim_startMin:[0.5,0,0],color_type:"constant",emitShape_box_max:[55,70],emitShape_box_min:[0,0],emitShape_circle_innerRadius:0.01,emitShape_circle_outerRadius:0.1,emitShape_line_angle:0,emitShape_line_length:60,emitShape_line_thickness:80,emitShape_type:"line",emitter_blendMode:"add",emitter_duration:1,emitter_freeParticles:true,emitter_lifetimeMax:0.3,emitter_lifetimeMin:0.05,emitter_maxParticles:1200,emitter_position:[0,0],emitter_rate:500,emitter_sortOrder:"none",initVel_angle:0,initVel_angleDelta:0,initVel_speedMax:0,initVel_speedMin:0,physics_accel:[0,0],physics_dragCoeff:0,physics_radialAccel:0,physics_tangentialAccel:0,rotation_alignToVelocity:false,rotation_angle:-90,rotation_angleDelta:0,rotation_spinRateMax:500,rotation_spinRateMin:-100,size_aspectRatio:1,size_constant:[10,10],size_keyframes:[],size_preserveAspectRatio:false,size_randAnim_endMax:[10,8],size_randAnim_endMin:[10,5],size_randAnim_startMax:[8,150],size_randAnim_startMin:[5,20],size_rand_max:[10,10],size_rand_min:[10,10],size_type:"randAnim",texture_constant:{image:"Content/Images8x/particlefx/sparkle1.png",magFilter:"linear",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"},texture_randPick:[{image:"Content/Images8x/particlefx/sparkle2.png",magFilter:"linear",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"},{image:"/Content/Images8x/particlefx/circleCyan.png",magFilter:"nearest",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"}],texture_type:"randPick"}}}};__ngs._c9={_c:null,_d:function(){this._c={exports:{alpha_constant:0,alpha_fade_in:0,alpha_fade_out:0.03,alpha_keyframes:[],alpha_type:"fade",attractor_falloff:"linear",attractor_position:[160,240],attractor_strength:1,attractor_type:"none",color_keyframes:[{key:0.1,value:[0.5,0,0]},{key:0.6,value:[1,0.5,0.5]}],color_randAnim_endMax:[1,0,0],color_randAnim_endMin:[0.5,0,0],color_randAnim_startMax:[1,1,0],color_randAnim_startMin:[0.5,0,0],color_type:"constant",emitShape_box_max:[50,50],emitShape_box_min:[-50,-50],emitShape_circle_innerRadius:0.01,emitShape_circle_outerRadius:0.02,emitShape_type:"circle",emitter_blendMode:"add",emitter_duration:0.25,emitter_freeParticles:false,emitter_lifetimeMax:1,emitter_lifetimeMin:1,emitter_maxParticles:70,emitter_position:[0,0],emitter_rate:600,emitter_sortOrder:"none",initVel_angle:0,initVel_angleDelta:180,initVel_speedMax:1200,initVel_speedMin:1000,physics_accel:[0,0],physics_dragCoeff:0,physics_radialAccel:0,physics_tangentialAccel:0,rotation_alignToVelocity:true,rotation_angle:0,rotation_angleDelta:0,rotation_spinRateMax:0,rotation_spinRateMin:0,size_aspectRatio:1,size_constant:[10,10],size_keyframes:[],size_preserveAspectRatio:false,size_randAnim_endMax:[170,12],size_randAnim_endMin:[150,10],size_randAnim_startMax:[240,15],size_randAnim_startMin:[200,20],size_rand_max:[60,5],size_rand_min:[100,10],size_type:"randAnim",texture_constant:{image:"Content_Internal/ballfx.png",magFilter:"linear",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[0.5,0.75],uvMin:[0.25,0.5],vWrap:"clampToEdge"},texture_keyframes:[],texture_randPick:[{image:"Content/Images8x/particlefx/sparkle1.png",magFilter:"linear",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"},{image:"Content/Images8x/particlefx/fightBGWhite2.png",magFilter:"linear",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"},{image:"Content/Images8x/particlefx/powerupCyan.png",magFilter:"nearest",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"}],texture_type:"randPick"}}}};__ngs._ca={_c:null,_d:function(){this._c={exports:{emitShape_type:"circle",emitShape_circle_innerRadius:0.01,emitShape_circle_outerRadius:0.1,initVel_angle:0,initVel_angleDelta:180,initVel_speedMin:300,initVel_speedMax:0,physics_accel:[0,0],physics_radialAccel:0,physics_tangentialAccel:0,physics_dragCoeff:4.84,color_type:"constant",color_keyframes:[{key:0.1,value:[0.5,0,0]},{key:0.6,value:[1,0.5,0.5]}],color_randAnim_startMin:[0.5,0,0],color_randAnim_startMax:[1,1,0],color_randAnim_endMin:[0.5,0,0],color_randAnim_endMax:[1,0,0],alpha_type:"fade",alpha_fade_in:0,alpha_fade_out:0.03,rotation_angle:0,rotation_spinRateMin:-100,rotation_spinRateMax:0,rotation_alignToVelocity:true,attractor_type:"none",attractor_position:[0,100],attractor_falloff:"linear",attractor_strength:1,size_type:"randAnim",size_preserveAspectRatio:false,size_aspectRatio:1,size_rand_min:[10,10],size_rand_max:[10,10],texture_type:"randPick",texture_constant:{image:"Content/Images8x/particlefx/sparkCyan3.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},texture_randPick:[{image:"Content/Images8x/particlefx/sparkCyan4.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},{image:"/Content/Images8x/particlefx/circleCyan.png",uvMin:[0,0],uvMax:[1,1],uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest",magFilter:"nearest"}],emitter_position:[0,0],emitter_duration:0.1,emitter_lifetimeMin:0.5,emitter_lifetimeMax:0.8,emitter_rate:100,emitter_maxParticles:1200,emitter_sortOrder:"none",emitter_blendMode:"add",emitter_freeParticles:false,emitShape_box_min:[0,0],emitShape_box_max:[55,70],alpha_constant:0,rotation_angleDelta:0,size_constant:[10,10],size_randAnim_startMin:[8,20],size_randAnim_startMax:[12,30],size_randAnim_endMin:[10,30],size_randAnim_endMax:[14,40],emitShape_line_angle:0,emitShape_line_length:51.72,emitShape_line_thickness:0}}}};__ngs._cb={_c:null,_d:function(){this._c={exports:{emitShape_type:"circle",emitShape_circle_innerRadius:0.01,emitShape_circle_outerRadius:0.1,initVel_angle:0,initVel_angleDelta:180,initVel_speedMin:300,initVel_speedMax:0,physics_accel:[0,0],physics_radialAccel:0,physics_tangentialAccel:0,physics_dragCoeff:4.84,color_type:"constant",color_keyframes:[{key:0.1,value:[0.5,0,0]},{key:0.6,value:[1,0.5,0.5]}],color_randAnim_startMin:[0.5,0,0],color_randAnim_startMax:[1,1,0],color_randAnim_endMin:[0.5,0,0],color_randAnim_endMax:[1,0,0],alpha_type:"fade",alpha_fade_in:0,alpha_fade_out:0.03,rotation_angle:0,rotation_spinRateMin:-100,rotation_spinRateMax:0,rotation_alignToVelocity:true,attractor_type:"none",attractor_position:[0,100],attractor_falloff:"linear",attractor_strength:1,size_type:"randAnim",size_preserveAspectRatio:false,size_aspectRatio:1,size_rand_min:[10,10],size_rand_max:[10,10],texture_type:"randPick",texture_constant:{image:"Content/Images8x/particlefx/sparkCyan3.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},texture_randPick:[{image:"Content/Images8x/particlefx/sparkCyan4.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},{image:"/Content/Images8x/particlefx/circleCyan.png",uvMin:[0,0],uvMax:[1,1],uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest",magFilter:"nearest"}],emitter_position:[0,0],emitter_duration:0.2,emitter_lifetimeMin:0.5,emitter_lifetimeMax:0.8,emitter_rate:200,emitter_maxParticles:2000,emitter_sortOrder:"none",emitter_blendMode:"add",emitter_freeParticles:false,emitShape_box_min:[0,0],emitShape_box_max:[55,70],alpha_constant:0,rotation_angleDelta:0,size_constant:[10,10],size_randAnim_startMin:[8,20],size_randAnim_startMax:[12,30],size_randAnim_endMin:[10,30],size_randAnim_endMax:[14,40],emitShape_line_angle:0,emitShape_line_length:51.72,emitShape_line_thickness:0}}}};__ngs._cc={_c:null,_d:function(){this._c={exports:{emitShape_type:"circle",emitShape_circle_innerRadius:0.01,emitShape_circle_outerRadius:0.1,initVel_angle:0,initVel_angleDelta:180,initVel_speedMin:300,initVel_speedMax:0,physics_accel:[0,0],physics_radialAccel:0,physics_tangentialAccel:0,physics_dragCoeff:4.84,color_type:"constant",color_keyframes:[{key:0.1,value:[0.5,0,0]},{key:0.6,value:[1,0.5,0.5]}],color_randAnim_startMin:[0.5,0,0],color_randAnim_startMax:[1,1,0],color_randAnim_endMin:[0.5,0,0],color_randAnim_endMax:[1,0,0],alpha_type:"fade",alpha_fade_in:0,alpha_fade_out:0.03,rotation_angle:0,rotation_spinRateMin:-100,rotation_spinRateMax:0,rotation_alignToVelocity:true,attractor_type:"none",attractor_position:[0,100],attractor_falloff:"linear",attractor_strength:1,size_type:"randAnim",size_preserveAspectRatio:false,size_aspectRatio:1,size_rand_min:[10,10],size_rand_max:[10,10],texture_type:"randPick",texture_constant:{image:"Content/Images8x/particlefx/sparkCyan3.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},texture_randPick:[{image:"Content/Images8x/particlefx/sparkCyan4.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},{image:"/Content/Images8x/particlefx/circleCyan.png",uvMin:[0,0],uvMax:[1,1],uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest",magFilter:"nearest"}],emitter_position:[0,0],emitter_duration:0.3,emitter_lifetimeMin:0.6,emitter_lifetimeMax:0.8,emitter_rate:300,emitter_maxParticles:2000,emitter_sortOrder:"none",emitter_blendMode:"add",emitter_freeParticles:false,emitShape_box_min:[0,0],emitShape_box_max:[55,70],alpha_constant:0,rotation_angleDelta:0,size_constant:[10,10],size_randAnim_startMin:[8,20],size_randAnim_startMax:[12,30],size_randAnim_endMin:[10,30],size_randAnim_endMax:[14,40],emitShape_line_angle:0,emitShape_line_length:51.72,emitShape_line_thickness:0}}}};__ngs._cd={_c:null,_d:function(){this._c={exports:{alpha_constant:0,alpha_fade_in:0.98,alpha_fade_out:0,alpha_keyframes:[],alpha_type:"fade",attractor_falloff:"linear",attractor_position:[0,100],attractor_strength:1,attractor_type:"none",color_keyframes:[{key:0.1,value:[0.5,0,0]},{key:0.6,value:[1,0.5,0.5]}],color_randAnim_endMax:[1,0,0],color_randAnim_endMin:[0.5,0,0],color_randAnim_startMax:[1,1,0],color_randAnim_startMin:[0.5,0,0],color_type:"constant",emitShape_box_max:[55,70],emitShape_box_min:[0,0],emitShape_circle_innerRadius:0.01,emitShape_circle_outerRadius:0.1,emitShape_line_angle:0,emitShape_line_length:60,emitShape_line_thickness:80,emitShape_type:"line",emitter_blendMode:"add",emitter_duration:1,emitter_freeParticles:true,emitter_lifetimeMax:0.3,emitter_lifetimeMin:0.05,emitter_maxParticles:1200,emitter_position:[0,0],emitter_rate:500,emitter_sortOrder:"none",initVel_angle:0,initVel_angleDelta:0,initVel_speedMax:0,initVel_speedMin:0,physics_accel:[0,0],physics_dragCoeff:0,physics_radialAccel:0,physics_tangentialAccel:0,rotation_alignToVelocity:false,rotation_angle:-90,rotation_angleDelta:0,rotation_spinRateMax:500,rotation_spinRateMin:-100,size_aspectRatio:1,size_constant:[10,10],size_keyframes:[],size_preserveAspectRatio:false,size_randAnim_endMax:[10,8],size_randAnim_endMin:[10,5],size_randAnim_startMax:[8,150],size_randAnim_startMin:[5,20],size_rand_max:[10,10],size_rand_min:[10,10],size_type:"randAnim",texture_constant:{image:"Content/Images8x/particlefx/sparkbonus3x_1.png",magFilter:"linear",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"},texture_randPick:[{image:"Content/Images8x/particlefx/sparkbonus3x_2.png",magFilter:"linear",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"},{image:"/Content/Images8x/particlefx/circlebonus3x.png",magFilter:"nearest",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"}],texture_type:"randPick"}}}};__ngs._ce={_c:null,_d:function(){this._c={exports:{emitShape_type:"circle",emitShape_circle_innerRadius:0.01,emitShape_circle_outerRadius:0.02,initVel_angle:0,initVel_angleDelta:180,initVel_speedMin:700,initVel_speedMax:800,physics_accel:[0,0],physics_radialAccel:0,physics_tangentialAccel:0,physics_dragCoeff:63.36,color_type:"constant",color_keyframes:[{key:0.1,value:[0.5,0,0]},{key:0.6,value:[1,0.5,0.5]}],color_randAnim_startMin:[0.5,0,0],color_randAnim_startMax:[1,1,0],color_randAnim_endMin:[0.5,0,0],color_randAnim_endMax:[1,0,0],alpha_type:"fade",alpha_fade_in:0,alpha_fade_out:1,rotation_angle:0,rotation_spinRateMin:0,rotation_spinRateMax:0,rotation_alignToVelocity:true,attractor_type:"none",attractor_position:[160,240],attractor_falloff:"linear",attractor_strength:1,size_type:"randAnim",size_preserveAspectRatio:false,size_aspectRatio:1,size_rand_min:[100,10],size_rand_max:[100,10],texture_type:"randPick",texture_constant:{image:"Content_Internal/ballfx.png",uvMin:[0.25,0.5],uvMax:[0.5,0.75],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},texture_randPick:[{image:"Content/Images8x/particlefx/sparkle1.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},{image:"Content/Images8x/particlefx/fightBGWhite2.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"}],emitter_position:[0,0],emitter_duration:10,emitter_lifetimeMin:2,emitter_lifetimeMax:2,emitter_rate:50,emitter_maxParticles:70,emitter_sortOrder:"none",emitter_blendMode:"add",emitter_freeParticles:false,emitShape_box_min:[-50,-50],emitShape_box_max:[50,50],alpha_constant:0,rotation_angleDelta:180,size_constant:[10,10],size_randAnim_startMin:[200,20],size_randAnim_startMax:[240,20],size_randAnim_endMin:[200,20],size_randAnim_endMax:[200,20]}}}};__ngs._cf={_c:null,_d:function(){this._c={exports:{emitShape_type:"line",emitShape_circle_innerRadius:2.73,emitShape_circle_outerRadius:181.82,initVel_angle:0,initVel_angleDelta:10,initVel_speedMin:1000,initVel_speedMax:2000,physics_accel:[0,0],physics_radialAccel:0,physics_tangentialAccel:0,physics_dragCoeff:20,color_type:"constant",color_keyframes:[{key:0.1,value:[0.5,0,0]},{key:0.6,value:[1,0.5,0.5]}],color_randAnim_startMin:[0.5,0,0],color_randAnim_startMax:[1,1,0],color_randAnim_endMin:[0.5,0,0],color_randAnim_endMax:[1,0,0],alpha_type:"fade",alpha_fade_in:0,alpha_fade_out:0.14,rotation_angle:0,rotation_spinRateMin:0,rotation_spinRateMax:0,rotation_alignToVelocity:true,attractor_type:"none",attractor_position:[160,240],attractor_falloff:"linear",attractor_strength:1,size_type:"randAnim",size_preserveAspectRatio:false,size_aspectRatio:1,size_rand_min:[100,10],size_rand_max:[60,5],texture_type:"randPick",texture_constant:{image:"Content_Internal/ballfx.png",uvMin:[0.25,0.5],uvMax:[0.5,0.75],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},texture_randPick:[{image:"Content/Images8x/particlefx/fightBGLightning2.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},{image:"Content/Images8x/particlefx/fightBGLightning2.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"}],emitter_position:[0,0],emitter_duration:10,emitter_lifetimeMin:0.2,emitter_lifetimeMax:0.5,emitter_rate:60,emitter_maxParticles:600,emitter_sortOrder:"none",emitter_blendMode:"add",emitter_freeParticles:false,emitShape_box_min:[-50,-50],emitShape_box_max:[50,50],alpha_constant:0,rotation_angleDelta:0,size_constant:[10,10],size_randAnim_startMin:[700,100],size_randAnim_startMax:[700,110],size_randAnim_endMin:[600,75],size_randAnim_endMax:[600,85],emitShape_line_length:360,emitShape_line_thickness:960}}}};__ngs._cg={_c:null,_d:function(){this._c={exports:{emitShape_type:"circle",emitShape_circle_innerRadius:0.1,emitShape_circle_outerRadius:0.1,initVel_angle:0,initVel_angleDelta:180,initVel_speedMin:700,initVel_speedMax:800,physics_accel:[0,0],physics_radialAccel:0,physics_tangentialAccel:20.61,physics_dragCoeff:6,color_type:"constant",color_keyframes:[{key:0.1,value:[0.5,0,0]},{key:0.6,value:[1,0.5,0.5]}],color_randAnim_startMin:[0.5,0,0],color_randAnim_startMax:[1,1,0],color_randAnim_endMin:[0.5,0,0],color_randAnim_endMax:[1,0,0],alpha_type:"fade",alpha_fade_in:0,alpha_fade_out:1,rotation_angle:0,rotation_spinRateMin:0,rotation_spinRateMax:0,rotation_alignToVelocity:true,attractor_type:"none",attractor_position:[160,240],attractor_falloff:"linear",attractor_strength:1,size_type:"randAnim",size_preserveAspectRatio:false,size_aspectRatio:1,size_rand_min:[100,10],size_rand_max:[60,5],texture_type:"randPick",texture_constant:{image:"Content_Internal/ballfx.png",uvMin:[0.25,0.5],uvMax:[0.5,0.75],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},texture_randPick:[{image:"Content/Images8x/particlefx/purple_cloud.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},{image:"Content/Images8x/particlefx/explode_flame.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"}],emitter_position:[0,0],emitter_duration:6,emitter_lifetimeMin:0.2,emitter_lifetimeMax:0.5,emitter_rate:100,emitter_maxParticles:300,emitter_sortOrder:"none",emitter_blendMode:"add",emitter_freeParticles:false,emitShape_box_min:[-50,-50],emitShape_box_max:[50,50],alpha_constant:0,rotation_angleDelta:0,size_constant:[10,10],size_randAnim_startMin:[80,20],size_randAnim_startMax:[100,40],size_randAnim_endMin:[150,100],size_randAnim_endMax:[170,120]}}}};__ngs._ch={_c:null,_d:function(){this._c={exports:{emitShape_type:"line",emitShape_circle_innerRadius:0.1,emitShape_circle_outerRadius:0.1,initVel_angle:90,initVel_angleDelta:0,initVel_speedMin:1000,initVel_speedMax:1200,physics_accel:[0,0],physics_radialAccel:0,physics_tangentialAccel:0,physics_dragCoeff:0,color_type:"constant",color_keyframes:[{key:0.1,value:[0.5,0,0]},{key:0.6,value:[1,0.5,0.5]}],color_randAnim_startMin:[0.5,0,0],color_randAnim_startMax:[1,1,0],color_randAnim_endMin:[0.5,0,0],color_randAnim_endMax:[1,0,0],alpha_type:"fade",alpha_fade_in:0,alpha_fade_out:1,rotation_angle:0,rotation_spinRateMin:0,rotation_spinRateMax:0,rotation_alignToVelocity:true,attractor_type:"none",attractor_position:[160,240],attractor_falloff:"linear",attractor_strength:1,size_type:"randAnim",size_preserveAspectRatio:false,size_aspectRatio:1,size_rand_min:[100,10],size_rand_max:[60,5],texture_type:"randPick",texture_constant:{image:"Content_Internal/ballfx.png",uvMin:[0.25,0.5],uvMax:[0.5,0.75],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},texture_randPick:[{image:"Content/Images8x/particlefx/fightBGLightning.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},{image:"Content/Images8x/particlefx/fightBGLightning.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"}],emitter_position:[0,0],emitter_duration:2,emitter_lifetimeMin:0.2,emitter_lifetimeMax:0.5,emitter_rate:100,emitter_maxParticles:300,emitter_sortOrder:"none",emitter_blendMode:"add",emitter_freeParticles:false,emitShape_box_min:[-50,-50],emitShape_box_max:[50,50],alpha_constant:0,rotation_angleDelta:0,size_constant:[10,10],size_randAnim_startMin:[400,5],size_randAnim_startMax:[500,10],size_randAnim_endMin:[400,50],size_randAnim_endMax:[500,100],emitShape_line_length:640,emitShape_line_thickness:0,emitShape_line_angle:0}}}};__ngs._ci={_c:null,_d:function(){this._c={exports:{emitShape_type:"line",emitShape_circle_innerRadius:0.1,emitShape_circle_outerRadius:0.1,initVel_angle:0,initVel_angleDelta:0,initVel_speedMin:0,initVel_speedMax:0,physics_accel:[0,0],physics_radialAccel:0,physics_tangentialAccel:0,physics_dragCoeff:0,color_type:"constant",color_keyframes:[{key:0.1,value:[0.5,0,0]},{key:0.6,value:[1,0.5,0.5]}],color_randAnim_startMin:[0.5,0,0],color_randAnim_startMax:[1,1,0],color_randAnim_endMin:[0.5,0,0],color_randAnim_endMax:[1,0,0],alpha_type:"fade",alpha_fade_in:0,alpha_fade_out:1,rotation_angle:0,rotation_spinRateMin:-100,rotation_spinRateMax:100,rotation_alignToVelocity:true,attractor_type:"none",attractor_position:[160,480],attractor_falloff:"easeIn",attractor_strength:1,size_type:"randAnim",size_preserveAspectRatio:false,size_aspectRatio:1,size_rand_min:[100,10],size_rand_max:[60,5],texture_type:"randPick",texture_constant:{image:"Content_Internal/ballfx.png",uvMin:[0.25,0.5],uvMax:[0.5,0.75],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},texture_randPick:[{image:"Content/Images8x/particlefx/explode_flame.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},{image:"Content/Images8x/particlefx/explode_flame.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},{image:"Content/Images8x/particlefx/explode_flame.png",uvMin:[0,0],uvMax:[1,1],uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest",magFilter:"nearest"}],emitter_position:[0,0],emitter_duration:10,emitter_lifetimeMin:0.1,emitter_lifetimeMax:0.3,emitter_rate:200,emitter_maxParticles:300,emitter_sortOrder:"none",emitter_blendMode:"add",emitter_freeParticles:false,emitShape_box_min:[-50,-50],emitShape_box_max:[50,50],alpha_constant:0,rotation_angleDelta:81,size_constant:[10,10],size_randAnim_startMin:[10,10],size_randAnim_startMax:[12,12],size_randAnim_endMin:[100,100],size_randAnim_endMax:[200,200],emitShape_line_length:200,emitShape_line_thickness:460,emitShape_line_angle:0}}}};__ngs._cj={_c:null,_d:function(){this._c={exports:{emitShape_type:"line",emitShape_circle_innerRadius:0.1,emitShape_circle_outerRadius:0.1,initVel_angle:0,initVel_angleDelta:0,initVel_speedMin:0,initVel_speedMax:0,physics_accel:[0,0],physics_radialAccel:0,physics_tangentialAccel:0,physics_dragCoeff:0,color_type:"constant",color_keyframes:[{key:0.1,value:[0.5,0,0]},{key:0.6,value:[1,0.5,0.5]}],color_randAnim_startMin:[0.5,0,0],color_randAnim_startMax:[1,1,0],color_randAnim_endMin:[0.5,0,0],color_randAnim_endMax:[1,0,0],alpha_type:"fade",alpha_fade_in:0,alpha_fade_out:1,rotation_angle:0,rotation_spinRateMin:-10,rotation_spinRateMax:10,rotation_alignToVelocity:true,attractor_type:"none",attractor_position:[160,480],attractor_falloff:"easeIn",attractor_strength:1,size_type:"randAnim",size_preserveAspectRatio:false,size_aspectRatio:1,size_rand_min:[100,10],size_rand_max:[60,5],texture_type:"randPick",texture_constant:{image:"Content_Internal/ballfx.png",uvMin:[0.25,0.5],uvMax:[0.5,0.75],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},texture_randPick:[{image:"Content/Images8x/particlefx/white_blast.png",uvMin:[0,0],uvMax:[1,0.2],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},{image:"Content/Images8x/particlefx/redLineH.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"}],emitter_position:[0,0],emitter_duration:30,emitter_lifetimeMin:0.1,emitter_lifetimeMax:0.5,emitter_rate:200,emitter_maxParticles:300,emitter_sortOrder:"none",emitter_blendMode:"add",emitter_freeParticles:false,emitShape_box_min:[-50,-50],emitShape_box_max:[50,50],alpha_constant:0,rotation_angleDelta:0,size_constant:[10,10],size_randAnim_startMin:[640,10],size_randAnim_startMax:[640,12],size_randAnim_endMin:[700,60],size_randAnim_endMax:[700,80],emitShape_line_length:960,emitShape_line_thickness:1,emitShape_line_angle:90}}}};__ngs._ck={_c:null,_d:function(){this._c={exports:{emitShape_type:"line",emitShape_circle_innerRadius:0.1,emitShape_circle_outerRadius:0.1,initVel_angle:0,initVel_angleDelta:0,initVel_speedMin:0,initVel_speedMax:0,physics_accel:[0,0],physics_radialAccel:0,physics_tangentialAccel:0,physics_dragCoeff:0,color_type:"constant",color_keyframes:[{key:0.1,value:[0.5,0,0]},{key:0.6,value:[1,0.5,0.5]}],color_randAnim_startMin:[0.5,0,0],color_randAnim_startMax:[1,1,0],color_randAnim_endMin:[0.5,0,0],color_randAnim_endMax:[1,0,0],alpha_type:"fade",alpha_fade_in:0,alpha_fade_out:1,rotation_angle:0,rotation_spinRateMin:-10,rotation_spinRateMax:10,rotation_alignToVelocity:true,attractor_type:"none",attractor_position:[160,480],attractor_falloff:"easeIn",attractor_strength:1,size_type:"randAnim",size_preserveAspectRatio:false,size_aspectRatio:1,size_rand_min:[100,10],size_rand_max:[60,5],texture_type:"randPick",texture_constant:{image:"Content_Internal/ballfx.png",uvMin:[0.25,0.5],uvMax:[0.5,0.75],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},texture_randPick:[{image:"Content/Images8x/particlefx/white_blast2.png",uvMin:[0,0],uvMax:[1,0.2],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},{image:"Content/Images8x/particlefx/purpleLineH.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"}],emitter_position:[0,0],emitter_duration:4,emitter_lifetimeMin:0.1,emitter_lifetimeMax:0.5,emitter_rate:200,emitter_maxParticles:300,emitter_sortOrder:"none",emitter_blendMode:"add",emitter_freeParticles:false,emitShape_box_min:[-50,-50],emitShape_box_max:[50,50],alpha_constant:0,rotation_angleDelta:0,size_constant:[10,10],size_randAnim_startMin:[640,10],size_randAnim_startMax:[640,12],size_randAnim_endMin:[700,60],size_randAnim_endMax:[700,80],emitShape_line_length:960,emitShape_line_thickness:1,emitShape_line_angle:90}}}};__ngs._cl={_c:null,_d:function(){this._c={exports:{alpha_constant:0,alpha_fade_in:0,alpha_fade_out:0.37,alpha_keyframes:[],alpha_type:"fade",attractor_falloff:"parabolic",attractor_position:[170,100],attractor_strength:1,attractor_type:"none",color_keyframes:[{key:0.1,value:[0.5,0,0]}],color_randAnim_endMax:[1,0,0],color_randAnim_endMin:[0.5,0,0],color_randAnim_startMax:[1,1,0],color_randAnim_startMin:[0.5,0,0],color_type:"constant",emitShape_box_max:[50,50],emitShape_box_min:[-50,-50],emitShape_circle_innerRadius:0.01,emitShape_circle_outerRadius:0.1,emitShape_type:"circle",emitter_blendMode:"add",emitter_duration:2,emitter_freeParticles:true,emitter_lifetimeMax:0.27,emitter_lifetimeMin:0.25,emitter_maxParticles:2000,emitter_position:[160,375],emitter_rate:800,emitter_sortOrder:"none",initVel_angle:270,initVel_angleDelta:20,initVel_speedMax:0,initVel_speedMin:0,physics_accel:[0,0],physics_dragCoeff:0,physics_radialAccel:0,physics_tangentialAccel:0,rotation_alignToVelocity:true,rotation_angle:270,rotation_angleDelta:25,rotation_spinRateMax:0,rotation_spinRateMin:0,size_aspectRatio:1,size_constant:[100,5],size_keyframes:[],size_preserveAspectRatio:false,size_randAnim_endMax:[325,15],size_randAnim_endMin:[150,10],size_randAnim_startMax:[175,15],size_randAnim_startMin:[125,10],size_rand_max:[100,7],size_rand_min:[100,7],size_type:"randAnim",texture_constant:{image:"Content/Images8x/particlefx/greenScanlinesFog4.png",magFilter:"linear",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"},texture_randPick:[{image:"Content_Internal/ballfx.png",magFilter:"linear",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[0.5,0.75],uvMin:[0.25,0.5],vWrap:"clampToEdge"}],texture_type:"constant"}}}};__ngs._cm={_c:null,_d:function(){this._c={exports:{alpha_constant:0,alpha_fade_in:0,alpha_fade_out:0.37,alpha_keyframes:[],alpha_type:"fade",attractor_falloff:"parabolic",attractor_position:[170,100],attractor_strength:1,attractor_type:"none",color_keyframes:[{key:0.1,value:[0.5,0,0]}],color_randAnim_endMax:[1,0,0],color_randAnim_endMin:[0.5,0,0],color_randAnim_startMax:[1,1,0],color_randAnim_startMin:[0.5,0,0],color_type:"constant",emitShape_box_max:[50,50],emitShape_box_min:[-50,-50],emitShape_circle_innerRadius:0.01,emitShape_circle_outerRadius:0.1,emitShape_type:"circle",emitter_blendMode:"add",emitter_duration:2,emitter_freeParticles:true,emitter_lifetimeMax:0.27,emitter_lifetimeMin:0.25,emitter_maxParticles:2000,emitter_position:[0,0],emitter_rate:100,emitter_sortOrder:"none",initVel_angle:270,initVel_angleDelta:20,initVel_speedMax:0,initVel_speedMin:0,physics_accel:[0,0],physics_dragCoeff:0,physics_radialAccel:0,physics_tangentialAccel:0,rotation_alignToVelocity:true,rotation_angle:270,rotation_angleDelta:25,rotation_spinRateMax:0,rotation_spinRateMin:0,size_aspectRatio:1,size_constant:[100,5],size_keyframes:[],size_preserveAspectRatio:false,size_randAnim_endMax:[325,15],size_randAnim_endMin:[150,10],size_randAnim_startMax:[175,15],size_randAnim_startMin:[125,10],size_rand_max:[100,7],size_rand_min:[100,7],size_type:"randAnim",texture_constant:{image:"Content/Images8x/particlefx/greenScanlines6.png",magFilter:"linear",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"},texture_randPick:[{image:"Content_Internal/ballfx.png",magFilter:"linear",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[0.5,0.75],uvMin:[0.25,0.5],vWrap:"clampToEdge"}],texture_type:"constant"}}}};__ngs._cn={_c:null,_d:function(){this._c={exports:{emitShape_type:"circle",emitShape_circle_innerRadius:0.01,emitShape_circle_outerRadius:0.02,initVel_angle:270,initVel_angleDelta:0,initVel_speedMin:10,initVel_speedMax:40,physics_accel:[0,0],physics_radialAccel:0,physics_tangentialAccel:0,physics_dragCoeff:2,color_type:"constant",color_keyframes:[{key:0.1,value:[0.5,0,0]},{key:0.6,value:[1,0.5,0.5]}],color_randAnim_startMin:[0.5,0,0],color_randAnim_startMax:[1,1,0],color_randAnim_endMin:[0.5,0,0],color_randAnim_endMax:[1,0,0],alpha_type:"fade",alpha_fade_in:0,alpha_fade_out:0.44,rotation_angle:0,rotation_spinRateMin:0,rotation_spinRateMax:0,rotation_alignToVelocity:false,attractor_type:"none",attractor_position:[0,100],attractor_falloff:"linear",attractor_strength:1,size_type:"randAnim",size_preserveAspectRatio:false,size_aspectRatio:1,size_rand_min:[112,7],size_rand_max:[100,7],texture_type:"randPick",texture_constant:{image:"Content/Images8x/particlefx/scanLineGreenGlow5.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},texture_randPick:[{image:"Content/Images8x/particlefx/greenScanlinesH.png",uvMin:[0,0],uvMax:[1,1],magFilter:"linear",uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest"},{image:"Content/Images8x/particlefx/greenScanlinesH.png",uvMin:[0,0],uvMax:[1,1],uWrap:"clampToEdge",vWrap:"clampToEdge",minFilter:"nearest",magFilter:"nearest"}],emitter_position:[0,0],emitter_duration:2,emitter_lifetimeMin:0.5,emitter_lifetimeMax:0.75,emitter_rate:10,emitter_maxParticles:200,emitter_sortOrder:"none",emitter_blendMode:"alpha",emitter_freeParticles:false,emitShape_box_min:[-50,-50],emitShape_box_max:[50,50],alpha_constant:0,rotation_angleDelta:0,size_constant:[10,10],size_randAnim_startMin:[105,5],size_randAnim_startMax:[105,5],size_randAnim_endMin:[105,10],size_randAnim_endMax:[105,20],emitShape_line_length:135,emitShape_line_thickness:4}}}};__ngs._co={_c:null,_d:function(){this._c={exports:{alpha_constant:0,alpha_fade_in:0,alpha_fade_out:0,alpha_keyframes:[],alpha_type:"fade",attractor_falloff:"linear",attractor_position:[0,100],attractor_strength:1,attractor_type:"none",color_keyframes:[{key:0.1,value:[0.5,0,0]},{key:0.6,value:[1,0.5,0.5]}],color_randAnim_endMax:[1,0,0],color_randAnim_endMin:[0.5,0,0],color_randAnim_startMax:[1,1,0],color_randAnim_startMin:[0.5,0,0],color_type:"constant",emitShape_box_max:[500,500],emitShape_box_min:[-500,-500],emitShape_circle_innerRadius:40,emitShape_circle_outerRadius:80,emitShape_line_angle:90,emitShape_line_length:150,emitShape_line_thickness:1,emitShape_type:"line",emitter_blendMode:"add",emitter_duration:4,emitter_freeParticles:false,emitter_lifetimeMax:0.2,emitter_lifetimeMin:0.1,emitter_maxParticles:1000,emitter_position:[0,0],emitter_rate:800,emitter_sortOrder:"none",initVel_angle:0,initVel_angleDelta:180,initVel_speedMax:1000,initVel_speedMin:700,physics_accel:[0,0],physics_dragCoeff:55.76,physics_radialAccel:0,physics_tangentialAccel:0,rotation_alignToVelocity:false,rotation_angle:0,rotation_angleDelta:0,rotation_spinRateMax:300,rotation_spinRateMin:-300,size_aspectRatio:1,size_constant:[10,10],size_keyframes:[],size_preserveAspectRatio:false,size_randAnim_endMax:[40,25],size_randAnim_endMin:[35,20],size_randAnim_startMax:[10,50],size_randAnim_startMin:[10,40],size_rand_max:[17,17],size_rand_min:[3,3],size_type:"randAnim",texture_constant:{image:"Content_Internal/ballfx.png",magFilter:"linear",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[0.5,0.75],uvMin:[0.25,0.5],vWrap:"clampToEdge"},texture_keyframes:[],texture_randPick:[{image:"Content/Images8x/particlefx/white_cloud.png",magFilter:"linear",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"},{image:"Content/Images8x/particlefx/powerupCyan.png",magFilter:"linear",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"},{image:"Content/Images8x/particlefx/powerupCyan.png",magFilter:"nearest",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"}],texture_type:"randPick"}}}};__ngs._cp={_c:null,_d:function(){this._c={exports:{alpha_constant:0,alpha_fade_in:0.49,alpha_fade_out:0.49,alpha_keyframes:[],alpha_type:"fade",attractor_falloff:"linear",attractor_position:[0,100],attractor_strength:1,attractor_type:"none",color_keyframes:[{key:0.1,value:[0.5,0,0]},{key:0.6,value:[1,0.5,0.5]}],color_randAnim_endMax:[1,0,0],color_randAnim_endMin:[0.5,0,0],color_randAnim_startMax:[1,1,0],color_randAnim_startMin:[0.5,0,0],color_type:"constant",emitShape_box_max:[50,50],emitShape_box_min:[-50,-50],emitShape_circle_innerRadius:40,emitShape_circle_outerRadius:80,emitShape_line_angle:90,emitShape_line_length:103.64,emitShape_line_thickness:0.1,emitShape_type:"line",emitter_blendMode:"add",emitter_duration:2,emitter_freeParticles:false,emitter_lifetimeMax:0.25,emitter_lifetimeMin:0.05,emitter_maxParticles:10000,emitter_position:[0,0],emitter_rate:1000,emitter_sortOrder:"none",initVel_angle:0,initVel_angleDelta:12,initVel_speedMax:700,initVel_speedMin:200,physics_accel:[0,0],physics_dragCoeff:0.5,physics_radialAccel:0,physics_tangentialAccel:0,rotation_alignToVelocity:true,rotation_angle:0,rotation_angleDelta:0,rotation_spinRateMax:0,rotation_spinRateMin:0,size_aspectRatio:1,size_constant:[10,10],size_keyframes:[{key:0,value:[25,60]},{key:0.2,value:[20,30]},{key:0.6,value:[20,5]}],size_preserveAspectRatio:false,size_randAnim_endMax:[40,10],size_randAnim_endMin:[60,5],size_randAnim_startMax:[20,15],size_randAnim_startMin:[25,18],size_rand_max:[10,25],size_rand_min:[4,9],size_type:"keyframes",texture_constant:{image:"Content/Images8x/particlefx/card_fusion2.png",magFilter:"linear",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"},texture_keyframes:[],texture_randPick:[{image:"Content/Images8x/particlefx/whiteSpark.png",magFilter:"linear",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"},{image:"Content/Images8x/particlefx/powerupCyan.png",magFilter:"nearest",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"},{image:"Content/Images8x/particlefx/whiteSpark.png",magFilter:"nearest",minFilter:"nearest",uWrap:"clampToEdge",uvMax:[1,1],uvMin:[0,0],vWrap:"clampToEdge"}],texture_type:"randPick"}}}};__ngs._cq={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var a=__ngs.r_(__ngs._d2).DialogView;var b=__ngs.r_(__ngs._fg).RBBossRewardsDefinition;c.RBBossRewardsView=a.subclass({classname:"RBBossRewardsView",initialize:function($super,e){this._controller=e;$super(e,"RBBossRewardsDefinition",function(){this._controller.onViewsDoneLoading(this)}.bind(this))},destroy:function($super){$super()}})}};__ngs._cr={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._3x).Social;var e=__ngs.r_(__ngs._7p).View;var a=__ngs.r_(__ngs._89).CardThumbnailView;b.RBBossRewardsEntryView=e.subclass({classname:"RBBossRewardsEntryView",initialize:function($super,g,h){this._controller=g;$super(g,"RBBossRewardsEntryViewDefinition",function(){this.icon.setPosition(this._definitions.className.pos_x+this._definitions.className.size_x+20,this.icon.getPosition().getY());this.className.setPosition(this.className.getPosition().getX(),this._definitions.icon.pos_y+this._definitions.icon.size_y*0.5);this.rewardDescription.setPosition(this.icon.getPosition().getX()+this._definitions.icon.size_x+20,this._definitions.icon.pos_y+this._definitions.icon.size_y*0.5);this.itemCount.setPosition(this.icon.getPosition().getX()+this._definitions.icon.size_x+this._definitions.itemCount.info.offset_x+8,this._definitions.icon.pos_y+this._definitions.icon.size_y*this._definitions.itemCount.info.offset_y_pct);if(h.className){this.className.setText(Localization.getString("ui_rewardClass_"+h.className))}console.log("RBBossRewardsEntryView > initialize > reward="+JSON.stringify(h));if(h.type==TFGameData.GIFT_TYPE.COINS){TFUtils.changeImageOnSprite(this.icon,"Content/Images8x/UI/icon/icon_currency.png");this.rewardDescription.setText(h.amount+" "+Localization.getString("ui_credits"));this.itemCount.setVisible(false)}else{if(h.type==TFGameData.GIFT_TYPE.ITEM){var n=TFGameData.getItemDesc(h.value);console.log("RBBossRewardsEntryView > initialize > looking for ITEM image="+n.image);TFUtils.changeImageOnSprite(this.icon,"Content/Images8x/UI/StoreItems/"+n.image);this.rewardDescription.setText(Localization.getString(n.name));if(h.amount>1){this.itemCount.setText("x"+h.amount)}}else{if(h.type==TFGameData.GIFT_TYPE.MEDALS){console.log("RBBossRewardsEntryView > initialize > looking for MEDAL "+h.value+" image="+TFGameData.getMedalImagePath(h.value));TFUtils.changeImageOnSprite(this.icon,TFGameData.getMedalImagePath(h.value));this.rewardDescription.setText(Localization.getString(h.value));if(h.amount>1){this.itemCount.setText("x"+h.amount)}}else{if(h.type==TFGameData.GIFT_TYPE.CARDS){this.icon.setVisible(false);var m=this._definitions.icon.size_y*0.75;var o=this._definitions.icon.size_y;var l={};if(h.value>=20000000){l.weapon=true}var k=new a(g,h.value,m,o,l);this.addChild(k);k.setPosition(this.icon.getPosition().getX(),this.icon.getPosition().getY());this.rewardDescription.setText(Localization.getString(((h.value>=20000000)?"weapon_":"tf_")+h.value+"_name").toUpperCase())}}}}}.bind(this))},destroy:function($super){$super()}})}};__ngs._cs={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var a=__ngs.r_(__ngs._d2).DialogView;b.RBEventPointRewardsView=a.subclass({classname:"RBEventPointRewardsView",initialize:function($super,d){$super(d,"RBEventPointRewardsViewDefinition",function(){this.createRewardList()}.bind(this))},createRewardList:function(){this._parentController.fetchListItems("abc",function(e){this._currentYPosition=0;for(var d=0;d<e.length;++d){this.addChild(e[d]);e[d].setPosition(0,this._currentYPosition);this._currentYPosition+=200}this._parentController.showPointsRewardsDone(this)}.bind(this))},getTotalViewLength:function(){return this._currentYPosition},destroy:function($super){$super()}})}};__ngs._ct={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._fh).Notification;var a=__ngs.r_(__ngs._ct).FriendRequestNotification;b.FriendRequestNotification=d.subclass({classname:"FriendRequestNotification",initialize:function(){TFUtils.changeImageOnSprite(this.icon,"Content/Images8x/UI/icon/icon_0_friend_request.png")},onTouchAction:function($super){$super();TFSceneDirector.showRequests()},isValid:function(){return TFUserData.waitingFellowsCount>0},equalsTo:function(e){if(e&&e.classname==this.classname){return true}return false},shouldShowTimestamp:function(){return false},getMessage:function(){return Localization.getString("ui_newfriendinv")},isImportant:function(){return true},$getNotifications:function(){console.log("FriendRequestNotification > getNotifications > Creating notifications with the following pending number : "+JSON.stringify(TFUserData.pendingFellowsCount));if(TFUserData.waitingFellowsCount>0){var e=__ngs.r_(__ngs._ct).FriendRequestNotification;return[new e()]}return[]},$getNotificationSet:function(){return TFGameData.NOTIFICATION_SETS.SOCIAL}})}};__ngs._cu={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var d=__ngs.r_(__ngs._fh).Notification;var c=__ngs.r_(__ngs._cu).CheerNotification;a.CheerNotification=d.subclass({classname:"CheerNotification",initialize:function(){TFUtils.changeImageOnSprite(this.icon,"Content/Images8x/UI/icon/icon_0_cheers.png")},onTouchAction:function($super){$super();TFSceneDirector.showGreets()},isValid:function(){return TFUserData.newWaitingGreetsCount>0},equalsTo:function(e){if(e&&e.classname==this.classname){return true}return false},shouldShowTimestamp:function(){return false},getMessage:function(){return Localization.getString("ui_newcheersfromfriends")},isImportant:function(){return false},$getNotifications:function(){console.log("CheerNotification > getNotifications > Creating notifications with the following pending number : "+JSON.stringify(TFUserData.newWaitingGreetsCount));if(TFUserData.newWaitingGreetsCount>0){var e=__ngs.r_(__ngs._cu).CheerNotification;return[new e()]}return[]},$getNotificationSet:function(){return TFGameData.NOTIFICATION_SETS.SOCIAL}})}};__ngs._cv={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._fh).Notification;var d=__ngs.r_(__ngs._cv).FreePodNotification;a.FreePodNotification=c.subclass({classname:"FreePodNotification",initialize:function(){TFUtils.changeImageOnSprite(this.icon,"Content/Images8x/UI/icon/icon_0_space_bridge.png")},onTouchAction:function($super){$super();if(TFGameData._mainTutorialEndedFlag){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"ButtonPressFreeGasha"})}TFSceneDirector.showStore()},isValid:function(){return TFUserData.isFreeGashaReady()},equalsTo:function(e){if(e&&e.classname==this.classname){return true}return false},shouldShowTimestamp:function(){return false},getMessage:function(){return Localization.getString("ui_opensbfree")},isImportant:function(){return true},$getNotifications:function(){if(TFUserData.isFreeGashaReady()){var e=__ngs.r_(__ngs._cv).FreePodNotification;return[new e()]}return[]},$getNotificationSet:function(){return TFGameData.NOTIFICATION_SETS.DEFAULT}})}};__ngs._cw={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._fh).Notification;var a=__ngs.r_(__ngs._cw).RewardsNotification;b.RewardsNotification=d.subclass({classname:"RewardsNotification",initialize:function(){TFUtils.changeImageOnSprite(this.icon,"Content/Images8x/UI/icon/icon_0_reward.png")},onTouchAction:function($super){$super();if(TFGameData._mainTutorialEndedFlag){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"ButtonPressRewards"})}TFSceneDirector.showGiftInbox()},isValid:function(){return TFUserData.existElementInboxGift()},equalsTo:function(e){if(e&&e.classname==this.classname){return true}return false},shouldShowTimestamp:function(){return false},getMessage:function(){return"ui_rewardswaitingforyou"},isImportant:function(){return false},$getNotifications:function(){if(!TFGameData.isReady()||!TFSceneDirector.allClearFlag){return}console.log("RewardsNotification > getNotifications > ElementsInboxGift : "+TFUserData.existElementInboxGift());if(TFUserData.existElementInboxGift()){var e=__ngs.r_(__ngs._cw).RewardsNotification;return[new e()]}return[]},$getNotificationSet:function(){return TFGameData.NOTIFICATION_SETS.DEFAULT}})}};__ngs._cx={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var d=__ngs.r_(__ngs._5).Core;var b=__ngs.r_(__ngs._d).FileSystem;a.Manifest=d.Class.subclass({classname:"Manifest",initialize:function(){this.mNumAdded=0;this.mNumRemoved=0},initWithJsonText:function(h){try{this.mJson=JSON.parse(h);if(!this.mJson){this.mJson={}}}catch(g){this.mJson={}}if("__archives" in this.mJson){this.mArchives=this.mJson.__archives.files;delete this.mJson.__archives}else{this.mArchives=[]}},write:function(h,g){if(this.mJson){var e=JSON.stringify(this.mJson);b.writeFile(h,e,{},function(k){if(k){console.log("Error writing manifest: "+k)}if(g){g()}})}else{g()}},isModified:function(){return(this.mNumAdded>0||this.mNumRemoved>0)},foreach:function(e,l){var k=this.mJson;var h=e.mJson;var g;for(g in h){this._handleItem(g,k,h,l)}for(g in k){if(!(g in h)){this._handleItem(g,k,h,l)}}},_handleItem:function(g,l,h,k){var e=k(g,l,h);if(e){if(e<0){this.mNumRemoved++;delete l[g]}else{this.mNumAdded++}}}})}};__ngs._z={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.Class=__ngs.r_(__ngs._69).Class}};__ngs._10={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.Base64=__ngs.r_(__ngs._6a).Base64}};__ngs._11={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var c=__ngs.r_(__ngs._z);var a=__ngs.r_(__ngs._1);var e=c.Class.subclass({classname:"ResultSet",initialize:function(g){this.items=[];this._continueId=g;this.totalLength=Number.MAX_VALUE},getMore:function(g){return a.SystemBinding._getMoreContacts(this,g)},closeResultSet:function(){a.SystemBinding._closeContactsResultSet(this)}});b.ResultSet=e}};__ngs._12={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.MessageListener=__ngs.r_(__ngs._6b).MessageListener}};__ngs._13={_c:null,_d:function(){var c={exports:{}};var g=c.exports;this._c=c;var o=__ngs.r_(__ngs._6).Proc;var b=__ngs.r_(__ngs._z).Class;var m=__ngs.r_(__ngs._14).Util;var h=__ngs.r_(__ngs._7).Capabilities;var l=function(q,p){this.item=q;this.content=p};var e=/(.*?): (.*)/;var n={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};var d=["OPTIONS","GET","HEAD","POST","PUT","DELETE","TRACE","CONNECT"];var k=["CONNECT","TRACE","TRACK"];var a=function(p){if(!p){return"GET"}p=p.toString();if(p in k){throw"SECURITY_ERROR "+p+" not allowed."}if(p.toUpperCase() in d){return p.toUpperCase()}return p};g.XHR=b.subclass({classname:"XHR",initialize:function(){this.respHeaders={};this.settings={};this.headers=[];this.sendFlag=false;this.errorFlag=false;this.readyState=n.UNSENT;this.responseText=null;this.responseXML=null;this.status=0;this.statusText=""},_classId:340,_sendStatusRecvGen:function(r){if((r.length-r.idx)!==2){NgLogE("Could not parse due to wrong argument count in XHR.sendStatus from command: "+r);return false}var q=o.parseInt(r[r.idx++]);if(q===undefined){NgLogE("Could not parse statNum in XHR.sendStatus from command: "+r);return false}var p=o.parseString(r[r.idx++]);if(p===undefined){NgLogE("Could not parse statStr in XHR.sendStatus from command: "+r);return false}return this._sendStatusRecv(q,p)},_sendHeadersRecvGen:function(p){if((p.length-p.idx)!==1){NgLogE("Could not parse due to wrong argument count in XHR.sendHeaders from command: "+p);return false}var q=o.parseString(p[p.idx++]);if(q===undefined){NgLogE("Could not parse headers in XHR.sendHeaders from command: "+p);return false}return this._sendHeadersRecv(q)},_sendDataRecvGen:function(q){if((q.length-q.idx)!==1){NgLogE("Could not parse due to wrong argument count in XHR.sendData from command: "+q);return false}var p=o.parseString(q[q.idx++]);if(p===undefined){NgLogE("Could not parse data in XHR.sendData from command: "+q);return false}return this._sendDataRecv(p)},_onFinishRecvGen:function(q){if((q.length-q.idx)!==1){NgLogE("Could not parse due to wrong argument count in XHR.onFinish from command: "+q);return false}var p=o.parseBool(q[q.idx++]);if(p===undefined){NgLogE("Could not parse error in XHR.onFinish from command: "+q);return false}return this._onFinishRecv(p)},$_createSendGen:function(p){o.appendToCommandString(22347775,[+p])},_destroySendGen:function(){o.appendToCommandString(22282242,this)},_startSendGen:function(s,p,q,r){o.appendToCommandString(22282247,this,[o.encodeString(s),o.encodeString(p),o.encodeString(q),+r])},_headerSendGen:function(q,p){o.appendSubcommandToCommandString([o.encodeString(q),o.encodeString(p)])},_setCompositionSendGen:function(){o.appendToCommandString(22282249,this)},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[340]=this._instance||this;PROC_METHOD_TABLE[22282243]=this.prototype._sendStatusRecvGen;PROC_METHOD_TABLE[22282244]=this.prototype._sendHeadersRecvGen;PROC_METHOD_TABLE[22282245]=this.prototype._sendDataRecvGen;PROC_METHOD_TABLE[22282246]=this.prototype._onFinishRecvGen},open:function(t,r,s,p,q){r=r.split(" ").join("%20");this.settings={method:a(t),url:m.buildRelativeUrl(r),async:s,user:p,password:q};this.reset();this.setState(n.OPENED)},sendComposition:function(p){this.composing=true;this.send(JSON.stringify(p))},send:function(s){if(this.readyState!=n.OPENED||this.sendFlag){throw"INVALID_STATE_ERR: "+(this.sendFlag?"Already sending":"in state "+this.readyState)}this.sendFlag=true;this.errorFlag=false;var q;if(this.settings.method=="GET"||this.settings.method=="HEAD"){s=null}else{if(s){var r=false;for(q in this.headers){if(this.headers[q].item=="Content-Type"){r=true;break}}if(!r){this.setRequestHeader("Content-Type","text/plain;charset=UTF-8")}}}this.responseText="";if(!s){s=""}var p=__ngs.r_(__ngs._19).ObjectRegistry;p.register(this);this._createSendGen(this.__objectRegistryId);if(this.composing){this._setCompositionSendGen()}this._startSendGen(this.settings.method,this.settings.url,s,this.headers.length);for(q in this.headers){var t=this.headers[q];this._headerSendGen(t.item,t.content)}},abort:function(){this.responseText=null;this.errorFlag=true;this.headers=[];if(this.sendFlag){if(this.readyState!=n.DONE){this.sendFlag=false;this.setState(n.DONE)}}this.readyState=n.UNSENT},getResponseHeader:function(p){if(this.readyState>n.OPENED){return this.respHeaders[p.toLowerCase()]}return null},getUnflattenedResponseHeaders:function(){return this.respHeaders},getAllResponseHeaders:function(){if(this.readyState<n.HEADERS_RECEIVED||this.errorFlag){return""}var p="";for(var q in this.respHeaders){p+=q+": "+this.respHeaders[q]+"\r\n"}return p.substr(0,p.length-2)},setRequestHeader:function(q,p){this.headers.push(new l(q,p))},getRequestHeader:function(r){var p=null;for(var q in this.headers){if(this.headers[q].item==r){p=this.headers[q].content;break}}return p},onStatus:function(p,q){this.status=p;this.statusText=q},_sendStatusRecv:function(q,p){this.onStatus(q,p)},onHeaders:function(s){var p=s.split("\n");p.pop();for(var r in p){var q=e.exec(p[r]);if(q){this.respHeaders[q[1].toLowerCase()]=q[2]}}this.setState(n.HEADERS_RECEIVED)},_sendHeadersRecv:function(p){this.onHeaders(p)},onData:function(p){this.responseText+=p;this.setState(n.LOADING)},_sendDataRecv:function(p){this.onData(p)},onFinish:function(p){this.sendFlag=false;if(p){this.responseText=null;this.error="Network Error";this.errorFlag=true;this.status=0}this.setState(n.DONE)},_onFinishRecv:function(p){this.onFinish(p)},reset:function(){this.headers=[];this.readyState=n.UNSENT;this.responseText=null;this.responseXML=null;this.composing=false},setState:function(q){this.readyState=q;if(q==n.DONE){this._destroySendGen();var p=__ngs.r_(__ngs._19).ObjectRegistry;p.unregister(this)}if(typeof this.onreadystatechange!="undefined"){try{this.onreadystatechange()}catch(r){NgLogException(r)}}}})}};__ngs._14={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var c=__ngs.r_(__ngs._7).Capabilities;var e=__ngs.r_(__ngs._1z).Time;var a=__ngs.r_(__ngs._18).LifecycleEmitter;var h=__ngs.r_(__ngs._1c).AlertDialog;var g=/^(https?:\/\/)?([^\/]*)(.*[^\/])?.?/i;var k=b.Util={NormalizeUrl:function(m,n){m=k.buildRelativeUrl(m);var l=m.match(g);if(l&&l[1]){m=l[1].toLowerCase()+l[2].toLowerCase()+(l[3]?l[3]:"")}else{m=m.toLowerCase()}return m},GetMD5HashDirectoryFromUrl:function(m){var l;if(m===Capabilities._getBootServer()+"/"+Capabilities._getBoot()){l=Capabilities.getBootDir()}else{l=__ngs.r_(__ngs._6c).toMD5(m)}return l},buildRelativeUrl:function(l){if(!l.match(/^(https?:\/\/)/)){if(l.charAt(0)=="/"||!l.length){l=c.getServer()+l}else{l=c.getServer()+"/"+c.getGame()+"/"+l}}return l},RetrySchedule:function(m,o){var n=Math.floor(Math.log(o/m));var p=[m];for(var l=0;l<n+1;++l){m*=2;p.push(m)}return p},OperationWithRetries:function(u,o,p){var n;var m;var s;if(p){n=3;m=10000;s=1}else{n=Infinity;m=30000;s=6}m=Core.Time.getRealTime()+m;var t=250;var w=1;var q=false;var l=true;var r=function(){if(q){return}if(!l){console.log("OperationWithRetries: failureParam called when not armed");return}l=false;if(w>=n){console.log("OperationWithRetries: too many retry attempts");q=true;o();return}if(Core.Time.getRealTime()>=m&&w>=s){console.log("OperationWithRetries: retries took too long");console.log("OperationWithRetries: abortTime:",m,"realTime:",Core.Time.getRealTime());console.log("OperationWithRetries: attemptCount:",w,"abortTimeAttempts:",s);q=true;o();return}console.log("OperationWithRetries: Failure, will retry in "+t+"ms");setTimeout(function(){if(q){return}l=true;u(r,v)},t);w+=1;t*=2};var v=function(){var x=true;o()};u(r,v);return v},showFatalErrorDialog:function(m){var n=new h();n.setTitle(Core.Localization.getString("Network failure"));n.setChoices([Core.Localization.getString("Exit")]);n.onchoice=function(o){n.hide();a.exitProcess()};var l={"302":"File location has changed (302)","400":"Bad request to server (400)","401":"Authorization failed (401)","403":"Server permissions error (403)","404":"Resource not found (404)","408":"Request timed out (408)","500":"Internal server error (500)","501":"Cannot process request (501)","502":"Bad Gateway (502)","503":"Service overloaded / down for maintenance (503)","504":"Timeout at intervening gateway (504)"};n.setText(Core.Localization.getString(l[m]||"This application requires a working data connection."));n.show()},showSimpleNetworkError:function(m){var o=new h();o.setTitle(Core.Localization.getString("Network failure"));o.setChoices([Core.Localization.getString("OK")]);o.onchoice=function(p){o.hide()};var l={"302":" File location has changed (302)","400":" Bad request to server (400)","401":" Authorization failed (401)","403":" Server permissions error (403)","404":" Resource not found (404)","408":" Request timed out (408)","500":" Internal server error (500)","501":" Cannot process request (501)","502":" Bad Gateway (502)","503":" Service overloaded / down for maintenance (503)","504":" Timeout at intervening gateway (504)"};var n="Cannot download game without network connection.";if(l[m]){n+=l[m]}o.setText(Core.Localization.getString(n));o.show()},getCacheBustingString:function(){return""},Ad:{Tapjoy:{sendActionComplete:function(m){var l=__ngs.r_(__ngs._3q)._int_Util;l.adTapjoySendActionComplete(m)}}}}}};__ngs._15={_c:null,_d:function(){var c={exports:{}};var g=c.exports;this._c=c;var l=__ngs.r_(__ngs._6).Proc;var d=__ngs.r_(__ngs._19).ObjectRegistry;var b=__ngs.r_(__ngs._z).Class;var k=__ngs.r_(__ngs._7).Capabilities;var e=/^([\w-]+):\s*([^\n]+?)\s*$/mg;function h(o,n,m){this.push({item:n,content:m})}function a(m){var n=[];m.replace(e,h.bind(n));return n}g.DownloadFile=b.subclass({classname:"DownloadFile",initialize:function(){this._options=[]},start:function(m,r,n,p,q){d.register(this);this._createSendGen(this.__objectRegistryId);n=n.split(" ").join("%20");if(!(p instanceof Array)){if(p){NgLogE("Improper headers sent("+p+'). Need an array, ex: [{item:"Content-Easter", content:"egg"}]')}p=[]}for(var o=0;o<this._options.length;++o){this._setOptionSendGen(this._options[o].opId,this._options[o].iVal,this._options[o].sVal)}this.__sendSendGen(m,r,n,p.length);for(var o in p){this.__headerSendGen(p[o].item,p[o].content)}this.mCB=q},abort:function(){this._destroySendGen();d.unregister(this)},setOption:function(n,o,m){if(k.compareBinaryVersion(1,8,1)<0){NgLogE("setOption() method not supported with this binary");return}this._options.push({opId:n,iVal:o,sVal:m})},_finishRecv:function(n,m){this._finishWithResultRecv(n,m,"")},_finishWithHeadersRecv:function(n,m,o){this._finishWithResultRecv(n,m,o)},_finishWithResultRecv:function(o,n,r,p){this._destroySendGen();if(this.mCB){var m=null;try{if(typeof p==="string"&&p.length>0){m=JSON.parse(p)}}catch(q){NgLogE("Could not parse response :"+p)}this.mCB(o,n,a(r),m)}d.unregister(this)},Option:{VerificationHash:1,AutoDecompress:2},HashType:{NoHash:1,MD5:2},Error:{UnspecifiedError:0,NetworkError:-1,HashVerificationFailed:-2,DecompressionFailed:-3,AccessDenied:-4,DiskFull:-5},_classId:341,_finishRecvGen:function(o){if((o.length-o.idx)!==2){NgLogE("Could not parse due to wrong argument count in DownloadFile.finish from command: "+o);return false}var n=l.parseInt(o[o.idx++]);if(n===undefined){NgLogE("Could not parse status in DownloadFile.finish from command: "+o);return false}var m=l.parseString(o[o.idx++]);if(m===undefined){NgLogE("Could not parse signature in DownloadFile.finish from command: "+o);return false}return this._finishRecv(n,m)},_finishWithHeadersRecvGen:function(o){if((o.length-o.idx)!==3){NgLogE("Could not parse due to wrong argument count in DownloadFile.finishWithHeaders from command: "+o);return false}var n=l.parseInt(o[o.idx++]);if(n===undefined){NgLogE("Could not parse status in DownloadFile.finishWithHeaders from command: "+o);return false}var m=l.parseString(o[o.idx++]);if(m===undefined){NgLogE("Could not parse signature in DownloadFile.finishWithHeaders from command: "+o);return false}var p=l.parseString(o[o.idx++]);if(p===undefined){NgLogE("Could not parse headers in DownloadFile.finishWithHeaders from command: "+o);return false}return this._finishWithHeadersRecv(n,m,p)},_finishWithResultRecvGen:function(p){if((p.length-p.idx)!==4){NgLogE("Could not parse due to wrong argument count in DownloadFile.finishWithResult from command: "+p);return false}var n=l.parseInt(p[p.idx++]);if(n===undefined){NgLogE("Could not parse status in DownloadFile.finishWithResult from command: "+p);return false}var m=l.parseString(p[p.idx++]);if(m===undefined){NgLogE("Could not parse signature in DownloadFile.finishWithResult from command: "+p);return false}var q=l.parseString(p[p.idx++]);if(q===undefined){NgLogE("Could not parse headers in DownloadFile.finishWithResult from command: "+p);return false}var o=l.parseString(p[p.idx++]);if(o===undefined){NgLogE("Could not parse files in DownloadFile.finishWithResult from command: "+p);return false}return this._finishWithResultRecv(n,m,q,o)},$_createSendGen:function(m){l.appendToCommandString(22413311,[+m])},_destroySendGen:function(){l.appendToCommandString(22347778,this)},__sendSendGen:function(p,o,m,n){l.appendToCommandString(22347779,this,[l.encodeString(p),l.encodeString(o),l.encodeString(m),+n])},__headerSendGen:function(n,m){l.appendSubcommandToCommandString([l.encodeString(n),l.encodeString(m)])},_setOptionSendGen:function(n,o,m){l.appendToCommandString(22347783,this,[+n,+o,l.encodeString(m)])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[341]=this._instance||this;PROC_METHOD_TABLE[22347781]=this.prototype._finishRecvGen;PROC_METHOD_TABLE[22347782]=this.prototype._finishWithHeadersRecvGen;PROC_METHOD_TABLE[22347784]=this.prototype._finishWithResultRecvGen}})}};__ngs._16={_c:null,_d:function(){var c={exports:{}};var e=c.exports;this._c=c;var a=__ngs.r_(__ngs._z).Class;var l=__ngs.r_(__ngs._6).Proc;var h=__ngs.r_(__ngs._10).Base64;function b(){var m=Capabilities.getPlatformOS();switch(m){case"Android":return"android";case"iPhone OS":return"ios"}return m}function k(m){var n={pvr:"GL_IMG_texture_compression_pvrtc",atc:"GL_AMD_compressed_ATC_texture",etc1:"GL_OES_compressed_ETC1_RGB8_texture","3dc":"GL_AMD_compressed_3DC_texture"};return n[m]||m}var d={isMatch:function(o,n){var m;switch(o.charAt(0)){case">":m=(o.charAt(1)=="=")?">=":">";break;case"<":m=(o.charAt(1)=="=")?"<=":"<";break}if(m){o=o.slice(m.length)}else{m="="}if(o==n){return(m=="="||m=="<="||m==">=")}else{if(o<n){return(m=="<"||m=="<=")}else{return(m==">"||m==">=")}}},isVersionMatch:function(o,t){var p;if(o.length>0){switch(o.charAt(0)){case">":p=(o.charAt(1)=="=")?">=":">";break;case"<":p=(o.charAt(1)=="=")?"<=":"<";break;case"=":p=(o.charAt(1)=="=")?"==":"=";break}}if(p){o=o.slice(p.length)}else{p="="}var m=o.split(".");var n=t.split(".");var q=Math.max(m.length,n.length);for(var s=0;s<q;s++){var u="0."+(m[s]||0);var r="0."+(n[s]||0);if(u==r){continue}if(u<r){return(p=="<"||p=="<=")}else{return(p==">"||p==">=")}}return true},sdkVersion:function(m){return this.isVersionMatch(""+m,Capabilities.getSDKVersion())},binaryVersion:function(m){return this.isVersionMatch(""+m,Capabilities.getBinaryVersion())},platformOS:function(m){return m==b()},platformOSVersion:function(m){return this.isVersionMatch(""+m,Capabilities.getPlatformOSVersion())},platformHW:function(m){return m==Capabilities.getPlatformHW()},physicalMem:function(m){return this.isMatch(m,Capabilities.getPhysicalMem())},physicalCpus:function(m){return this.isMatch(m,Capabilities.getPhysicalCpus())},activeCpus:function(m){return this.isMatch(m,Capabilities.getActiveCpus())},language:function(m){return m==Capabilities.getLanguage()},textureMatch:"none",textureCompression:function(n){var m=Capabilities.getOglExtensions().indexOf(k(n))>-1;if(m){this.textureMatch=n}return m},screenWidth:function(m){return this.isMatch(m,Capabilities.getScreenWidth())},screenHeight:function(m){return this.isMatch(m,Capabilities.getScreenHeight())},screenResolution:function(m){return m==(Capabilities.getScreenWidth()+"x"+Capabilities.getScreenHeight())},screenUnits:function(m){return this.isMatch(m,Capabilities.getScreenUnits())},screenPixelUnits:function(m){return this.isMatch(m,Capabilities.getScreenPixelUnits())},maxTextureSize:function(m){return this.isMatch(m,Capabilities.getMaxTextureSize())},reset:function(m){this.textureMatch="none"}};var g=a.singleton({classname:"_int_LGL",initialize:function(){this._loadCallbacks={}},launch:function(n,m){var p=__ngs.r_(__ngs._14).Util;if(!m){m=g.ProcID.Game}n=p.NormalizeUrl(n);var o=(function(){gNgShutdownPending=true;this._launchSendGen(n,m)}).bind(this);if(m==g.ProcID.Game){this.updateGameUse(n,o)}else{o()}},getCorrectedPlatformOS:function(){return b()},loadGame:function(m,o){var n=__ngs.r_(__ngs._14).Util;m=n.NormalizeUrl(m);this._loadCallbacks[m]=o;this._loadGameSendGen(m)},_gameLoadedRecv:function(n){if(this._loadCallbacks[n]){var m=this._loadCallbacks[n];delete this._loadCallbacks[n];m()}},launchLoadedGame:function(){this._launchLoadedGameSendGen()},updateAvailable:function(w,o,t){var m=w;if(!m.match(/^\//)&&!m.match(/https?:\/\//)){m="/"+m}var r=__ngs.r_(__ngs._7).Capabilities;var n="";if(r.getUrl()!=w){var u=__ngs.r_(__ngs._14).Util;m=u.NormalizeUrl(m);n=u.GetMD5HashDirectoryFromUrl(m)}var p={Android:"android","iPhone OS":"ios",flash:""};var v="/"+p[r.getPlatformOS()];var q=__ngs.r_(__ngs._2).DownloadManifest;var s=new q();s.isUpdated(m+v,n,false,o,t)},updateGameUse:function(o,m){var s=__ngs.r_(__ngs._14).Util;var q=s.NormalizeUrl(o);var p=s.GetMD5HashDirectoryFromUrl(q);var n=this;var r=__ngs.r_(__ngs._17).KeyValueCache;this.mGameStore=r.global("Core.GameList");this.mActiveGameKey="activeGames";this.mGameStore.getItem(this.mActiveGameKey,{},function(t,x){var w;if(x){w=JSON.parse(x)}else{w=[]}var v;for(var u in w){if(w[u].name==p){v=w[u];break}}if(!v){v={name:p};w.push(v)}v.lastRun=(new Date()).getTime();v.url=o;n.mGameStore.setItem(n.mActiveGameKey,JSON.stringify(w),{});LocalGameList.updateGameList(w);m()},true)},getManifestName:function(n){var B="webgame.ngmanifest";if(n&&n.manifestOverrides){try{var x=n.manifestOverrides;for(var q=0;q<x.length;q++){var m=x[q];if(m&&m.criteria){d.reset();var u=m.criteria;var y,t=true;for(y in u){if(!u.hasOwnProperty(y)){continue}var w=u[y];var r=d[y];if(typeof r!="function"){console.log("ERROR! Undefined criterion "+y+" in configuration.json");t=false;break}var p=false;if(w instanceof Array){for(var o=0;o<w.length;o++){p|=r.call(d,w[o]);if(p){break}}}else{p=r(w)}if(!p){t=false;break}}if(t){console.log("MATCHED Override: "+JSON.stringify(m));var v=m.manifest.slice(0);for(var A=1;A<v.length;A++){y=v[A];switch(y){case"textureCompression":v[A]=d.textureMatch;break;case"platformOS":v[A]=b();break;default:var z=Capabilities["get"+y.charAt(0).toUpperCase()+y.slice(1)]();v[A]=z.replace(" ","_")}}return __ngs.r_(__ngs._2g).sprintf(v)}else{console.log("DID NOT MATCH Override: "+JSON.stringify(m))}}}}catch(s){console.log("ERROR! Exception occurred in manifest overrides: "+s)}}return B},ProcID:{Persist:-1,Game:-2},_classId:342,$_gameLoadedRecvGen:function(n){if((n.length-n.idx)!==1){NgLogE("Could not parse due to wrong argument count in _int_LGL.gameLoaded from command: "+n);return false}var m=l.parseString(n[n.idx++]);if(m===undefined){NgLogE("Could not parse url in _int_LGL.gameLoaded from command: "+n);return false}return this._gameLoadedRecv(m)},$_launchSendGen:function(n,m){l.appendToCommandString(22478847,[l.encodeString(n),+m])},$_loadGameSendGen:function(m){l.appendToCommandString(22478846,[l.encodeString(m)])},$_launchLoadedGameSendGen:function(){l.appendToCommandString(22478844)},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[342]=this._instance||this;PROC_METHOD_TABLE[22478845]=this.prototype._gameLoadedRecvGen}});e._int_LGL=g}};__ngs._17={_c:null,_d:function(){var c={exports:{}};var g=c.exports;this._c=c;var l=__ngs.r_(__ngs._6).Proc;var e=__ngs.r_(__ngs._19).ObjectRegistry;var a=__ngs.r_(__ngs._z).Class;var h=__ngs.r_(__ngs._2a).Diagnostics;var k=[];function b(){}g.KeyValueCache=b;b.lruMeanCacheSize=100;b.instanceMap={};var d=[];b.init=function(){b.local=new Storage.KeyValue();b.local.registerForKey("local")};b.global=function(m){if(d[m]){return d[m]}var n=new g.KeyValue();n.registerForKey(m);d[m]=n;return n};g.KeyValue=a.subclass({classname:"KeyValue",_options:{blocking:1},initialize:function(){this.initialized=false;this.origin=null;this.callbacks={};this.callbacks.uidGenerator=1;this.local=false;this.lruCacheShrinkCounter=0;var m=__ngs.r_(__ngs._7).Capabilities;this.oldBinary=!m.meetsBinaryVersion("1.4");e.register(this);this._createSendGen(this.__objectRegistryId);this._getItemCount=0;this._setItemCount=0;this._removeItemCount=0;h.pushCollector(this.collectDiagnostics.bind(this))},destroy:function(){this._destroySendGen();e.unregister(this)},registerForKey:function(m){this.origin=m;b.instanceMap[m]=this;this._registerCommandSendGen(this.origin,0);return this},getItem:function(o,n,m){this._getItemCount++;var q=typeof n=="object";var p=this.callbacks.uidGenerator++;this.callbacks[p]=(q?m:n)||function(){};if(this.oldBinary){this._getItemSendGen(this.origin,p,o)}else{var r;if(q){r=0|(n&&n.blocking&&this._options.blocking)}else{r=this._options.blocking;NgLogW("KeyValue.getItem(): using deprecated function signature")}this._getItemAsyncSendGen(this.origin,p,o,r)}},setItem:function(o,r,n,m){this._setItemCount++;var q=typeof n=="object";var p=this.callbacks.uidGenerator++;this.callbacks[p]=(q?m:n)||function(){};if(this.oldBinary){this._setItemSendGen(this.origin,p,o,r)}else{var s;if(q){s=0|(n&&n.blocking&&this._options.blocking)}else{s=this._options.blocking;NgLogW("KeyValue.setItem(): using deprecated function signature")}this._setItemAsyncSendGen(this.origin,p,o,r,s)}},removeItem:function(o,n,m){this._removeItemCount++;var q=typeof n=="object";var p=this.callbacks.uidGenerator++;this.callbacks[p]=(q?m:n)||function(){};if(this.oldBinary){this._removeItemSendGen(this.origin,p,o)}else{var r;if(q){r=0|(n&&n.blocking&&this._options.blocking)}else{r=this._options.blocking;NgLogW("KeyValue.removeItem(): using deprecated function signature")}this._removeItemAsyncSendGen(this.origin,p,o,r)}},clear:function(n,m){var p=typeof n=="object";var o=this.callbacks.uidGenerator++;this.callbacks[o]=(p?m:n)||function(){};if(this.oldBinary){this._clearSendGen(this.origin,o)}else{var q;if(p){q=0|(n&&n.blocking&&this._options.blocking)}else{q=this._options.blocking;NgLogW("KeyValue.clear(): using deprecated function signature")}this._clearAsyncSendGen(this.origin,o,q)}},_getInstanceRecv:function(n,p,o){var m=b.instanceMap[p];return m},_registerCommandCbRecv:function(o,n,p,r,q,m){if(p){console.log("Storage: Error registering for KeyValue location '"+p+"'");if(!this.initialized){delete d[msg.originalStoreKey]}return}if(this.origin=="local"){this.local=true;d[this.origin]=this}this.origin=r;this.initialized=true},_getItemCommandCbRecv:function(n,r,q,o,p,s){var m=q&&this.callbacks[q];if(m){delete this.callbacks[q];m(o,o?null:s,p)}},_setItemCommandCbRecv:function(n,r,q,o,p,s){var m=q&&this.callbacks[q];if(m){if(typeof m!=="function"){console.log("FAKEXCEPTION! this is not a function! "+m)}delete this.callbacks[q];m(o,p)}},_removeItemCbRecv:function(n,r,q,o,p){var m=q&&this.callbacks[q];if(m){delete this.callbacks[q];m(o,p)}},_clearCommandCbRecv:function(n,q,p,o){var m=p&&this.callbacks[p];if(m){delete this.callbacks[p];m(o,this.origin)}},Responses:{Register:0,GetItem:1,SetItem:2,RemoveItem:3,Clear:4},_classId:339,_getInstanceRecvGen:function(p){if((p.length-p.idx)!==3){NgLogE("Could not parse due to wrong argument count in KeyValue.getInstance from command: "+p);return false}var m=l.parseInt(p[p.idx++]);if(m===undefined){NgLogE("Could not parse response in KeyValue.getInstance from command: "+p);return false}var o=l.parseString(p[p.idx++]);if(o===undefined){NgLogE("Could not parse storeKey in KeyValue.getInstance from command: "+p);return false}var n=l.parseString(p[p.idx++]);if(n===undefined){NgLogE("Could not parse key in KeyValue.getInstance from command: "+p);return false}return this._getInstanceRecv(m,o,n)},_registerCommandCbRecvGen:function(s){if((s.length-s.idx)<5){NgLogE("Could not parse due to wrong argument count in KeyValue.registerCommandCb from command: "+s);return false}var n=l.parseInt(s[s.idx++]);if(n===undefined){NgLogE("Could not parse response in KeyValue.registerCommandCb from command: "+s);return false}var m=l.parseString(s[s.idx++]);if(m===undefined){NgLogE("Could not parse originalStoreKey in KeyValue.registerCommandCb from command: "+s);return false}var o=l.parseString(s[s.idx++]);if(o===undefined){NgLogE("Could not parse error in KeyValue.registerCommandCb from command: "+s);return false}var r=l.parseString(s[s.idx++]);if(r===undefined){NgLogE("Could not parse storeKey in KeyValue.registerCommandCb from command: "+s);return false}var q=l.parseInt(s[s.idx++]);if(q===undefined){NgLogE("Could not parse preloadDataCount in KeyValue.registerCommandCb from command: "+s);return false}for(var p=0;p<q;p++){k[p]=this._preloadDataRecvGen(s)}k.length=q||0;return this._registerCommandCbRecv(n,m,o,r,q,k)},_preloadDataRecvGen:function(o){if((o.length-o.idx)<2){NgLogE("Could not parse due to wrong argument count in KeyValue.preloadData from command: "+o);return false}var m=l.parseString(o[o.idx++]);if(m===undefined){NgLogE("Could not parse key in KeyValue.preloadData from command: "+o);return false}var n=l.parseString(o[o.idx++]);if(n===undefined){NgLogE("Could not parse value in KeyValue.preloadData from command: "+o);return false}return{key:m,value:n}},_getItemCommandCbRecvGen:function(s){if((s.length-s.idx)!==6){NgLogE("Could not parse due to wrong argument count in KeyValue.getItemCommandCb from command: "+s);return false}var m=l.parseInt(s[s.idx++]);if(m===undefined){NgLogE("Could not parse response in KeyValue.getItemCommandCb from command: "+s);return false}var p=l.parseString(s[s.idx++]);if(p===undefined){NgLogE("Could not parse storeKey in KeyValue.getItemCommandCb from command: "+s);return false}var r=l.parseInt(s[s.idx++]);if(r===undefined){NgLogE("Could not parse callbackId in KeyValue.getItemCommandCb from command: "+s);return false}var n=l.parseString(s[s.idx++]);if(n===undefined){NgLogE("Could not parse error in KeyValue.getItemCommandCb from command: "+s);return false}var o=l.parseString(s[s.idx++]);if(o===undefined){NgLogE("Could not parse key in KeyValue.getItemCommandCb from command: "+s);return false}var q=l.parseString(s[s.idx++]);if(q===undefined){NgLogE("Could not parse value in KeyValue.getItemCommandCb from command: "+s);return false}return this._getItemCommandCbRecv(m,p,r,n,o,q)},_setItemCommandCbRecvGen:function(s){if((s.length-s.idx)!==6){NgLogE("Could not parse due to wrong argument count in KeyValue.setItemCommandCb from command: "+s);return false}var m=l.parseInt(s[s.idx++]);if(m===undefined){NgLogE("Could not parse response in KeyValue.setItemCommandCb from command: "+s);return false}var p=l.parseString(s[s.idx++]);if(p===undefined){NgLogE("Could not parse storeKey in KeyValue.setItemCommandCb from command: "+s);return false}var r=l.parseInt(s[s.idx++]);if(r===undefined){NgLogE("Could not parse callbackId in KeyValue.setItemCommandCb from command: "+s);return false}var n=l.parseString(s[s.idx++]);if(n===undefined){NgLogE("Could not parse error in KeyValue.setItemCommandCb from command: "+s);return false}var o=l.parseString(s[s.idx++]);if(o===undefined){NgLogE("Could not parse key in KeyValue.setItemCommandCb from command: "+s);return false}var q=l.parseString(s[s.idx++]);if(q===undefined){NgLogE("Could not parse value in KeyValue.setItemCommandCb from command: "+s);return false}return this._setItemCommandCbRecv(m,p,r,n,o,q)},_removeItemCbRecvGen:function(r){if((r.length-r.idx)!==5){NgLogE("Could not parse due to wrong argument count in KeyValue.removeItemCb from command: "+r);return false}var m=l.parseInt(r[r.idx++]);if(m===undefined){NgLogE("Could not parse response in KeyValue.removeItemCb from command: "+r);return false}var p=l.parseString(r[r.idx++]);if(p===undefined){NgLogE("Could not parse storeKey in KeyValue.removeItemCb from command: "+r);return false}var q=l.parseInt(r[r.idx++]);if(q===undefined){NgLogE("Could not parse callbackId in KeyValue.removeItemCb from command: "+r);return false}var n=l.parseString(r[r.idx++]);if(n===undefined){NgLogE("Could not parse error in KeyValue.removeItemCb from command: "+r);return false}var o=l.parseString(r[r.idx++]);if(o===undefined){NgLogE("Could not parse key in KeyValue.removeItemCb from command: "+r);return false}return this._removeItemCbRecv(m,p,q,n,o)},_clearCommandCbRecvGen:function(q){if((q.length-q.idx)!==4){NgLogE("Could not parse due to wrong argument count in KeyValue.clearCommandCb from command: "+q);return false}var m=l.parseInt(q[q.idx++]);if(m===undefined){NgLogE("Could not parse response in KeyValue.clearCommandCb from command: "+q);return false}var o=l.parseString(q[q.idx++]);if(o===undefined){NgLogE("Could not parse storeKey in KeyValue.clearCommandCb from command: "+q);return false}var p=l.parseInt(q[q.idx++]);if(p===undefined){NgLogE("Could not parse callbackId in KeyValue.clearCommandCb from command: "+q);return false}var n=l.parseString(q[q.idx++]);if(n===undefined){NgLogE("Could not parse error in KeyValue.clearCommandCb from command: "+q);return false}return this._clearCommandCbRecv(m,o,p,n)},$_createSendGen:function(m){l.appendToCommandString(22282239,[+m])},_destroySendGen:function(){l.appendToCommandString(22216706,this)},_registerCommandSendGen:function(n,m){l.appendToCommandString(22216707,this,[l.encodeString(n),+m])},_getItemSendGen:function(n,o,m){l.appendToCommandString(22216708,this,[l.encodeString(n),+o,l.encodeString(m)])},_setItemSendGen:function(n,p,m,o){l.appendToCommandString(22216709,this,[l.encodeString(n),+p,l.encodeString(m),l.encodeString(o)])},_removeItemSendGen:function(n,o,m){l.appendToCommandString(22216710,this,[l.encodeString(n),+o,l.encodeString(m)])},_clearSendGen:function(m,n){l.appendToCommandString(22216711,this,[l.encodeString(m),+n])},_getItemAsyncSendGen:function(o,p,n,m){l.appendToCommandString(22216719,this,[l.encodeString(o),+p,l.encodeString(n),+m])},_setItemAsyncSendGen:function(o,q,n,p,m){l.appendToCommandString(22216720,this,[l.encodeString(o),+q,l.encodeString(n),l.encodeString(p),+m])},_removeItemAsyncSendGen:function(o,p,n,m){l.appendToCommandString(22216721,this,[l.encodeString(o),+p,l.encodeString(n),+m])},_clearAsyncSendGen:function(n,o,m){l.appendToCommandString(22216722,this,[l.encodeString(n),+o,+m])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[339]=this._instance||this;PROC_METHOD_TABLE[22216712]=this.prototype._getInstanceRecvGen;PROC_METHOD_TABLE[22216713]=this.prototype._registerCommandCbRecvGen;PROC_METHOD_TABLE[22216714]=this.prototype._preloadDataRecvGen;PROC_METHOD_TABLE[22216715]=this.prototype._getItemCommandCbRecvGen;PROC_METHOD_TABLE[22216716]=this.prototype._setItemCommandCbRecvGen;PROC_METHOD_TABLE[22216717]=this.prototype._removeItemCbRecvGen;PROC_METHOD_TABLE[22216718]=this.prototype._clearCommandCbRecvGen},collectDiagnostics:function(n,m){var o={getItem:{count:this._getItemCount},setItem:{count:this._setItemCount},removeItem:{count:this._removeItemCount}};return o}})}};__ngs._18={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var a=__ngs.r_(__ngs._1y).MessageEmitter;var b=__ngs.r_(__ngs._19).ObjectRegistry;var e=__ngs.r_(__ngs._6).Proc;c.LifecycleEmitter=a.singleton({classname:"LifecycleEmitter",initialize:function(){b.register(this);this._createSendGen(this.__objectRegistryId);this.identificationCache={};this.numEngineRequests=0},_lifecycleEventRecv:function(g){this.emit(g);this._lifecycleEventSendGen(g)},$exitProcess:function(){var g=__ngs.r_(__ngs._1s).Analytics._getPipe();g._exitingApp();this._exitProcessSendGen()},$_bgMe:function(){this.__bgMeSendGen()},$pauseGame:function(){NgLogD("+++++++++++++++++++++++++++++++++++++++++Pausing Game");this._pauseGameSendGen();var g=__ngs.r_(__ngs._22)._LocalGameList;g._pausingGame()},$resumeGame:function(){NgLogD("+++++++++++++++++++++++++++++++++++++++++Resuming Game");this._resumeGameSendGen();var g=__ngs.r_(__ngs._22)._LocalGameList;g._resumingGame()},requestEngineKeepAlive:function(h){var g=h;if(h.identification_key!==undefined){g=h.identification_key}this.identificationCache[g]=true;++this.numEngineRequests;this.incrementEngineAlive()},cancelEngineKeepAlive:function(h){var g=h;if(h.identification_key!==undefined){g=h.identification_key}if(this.identificationCache[g]){delete this.identificationCache[g];--this.numEngineRequests;this.decrementEngineAlive()}else{NgLogW("LifecycleEmitter.cancelEngineKeepAlive() Identification Key not found")}},incrementEngineAlive:function(){this._incrementEngineAliveSendGen()},decrementEngineAlive:function(){this._decrementEngineAliveSendGen()},cancelAllEngineRequests:function(){this._cancelAllEngineRequestsSendGen()},_killGameProc:function(){this.__killGameProcSendGen()},Event:{Suspend:0,Resume:1,Terminate:2,KeepAliveWillTerminate:3},_classId:334,_lifecycleEventRecvGen:function(h){if((h.length-h.idx)!==1){NgLogE("Could not parse due to wrong argument count in LifecycleEmitter.lifecycleEvent from command: "+h);return false}var g=e.parseInt(h[h.idx++]);if(g===undefined){NgLogE("Could not parse event in LifecycleEmitter.lifecycleEvent from command: "+h);return false}return this._lifecycleEventRecv(g)},$_createSendGen:function(g){e.appendToCommandString(21954559,[+g])},_lifecycleEventSendGen:function(g){e.appendToCommandString(21889026,this,[+g])},$_exitProcessSendGen:function(){e.appendToCommandString(21954557)},$_pauseGameSendGen:function(){e.appendToCommandString(21954556)},$_resumeGameSendGen:function(){e.appendToCommandString(21954555)},_incrementEngineAliveSendGen:function(){e.appendToCommandString(21889030,this)},_decrementEngineAliveSendGen:function(){e.appendToCommandString(21889031,this)},_cancelAllEngineRequestsSendGen:function(){e.appendToCommandString(21889032,this)},$__killGameProcSendGen:function(){e.appendToCommandString(21954551)},$__bgMeSendGen:function(){e.appendToCommandString(21954550)},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[334]=this._instance||this;PROC_METHOD_TABLE[21889026]=this.prototype._lifecycleEventRecvGen}})}};__ngs._19={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var b=__ngs.r_(__ngs._z).Class;if(typeof $APP_REQUIREPATHMAP!="undefined"){$APP_REQUIREPATHMAP["NGCore/Client/Core/ObjectRegistry.js"]=c}var a=c.ObjectRegistry=b.singleton({classname:"ObjectRegistry",initialize:function(){this._currentId=0;this._guardId=0;this._objects={}},register:function(e){if(e.__objectRegistryId){throw new Error("ObjectRegistry.register: object already registered")}var g=++this._currentId;e.__objectRegistryId=g;this._objects[g]=e},unregister:function(e){if(!e.__objectRegistryId){throw new Error("ObjectRegistry.unregister: object not registered")}var g=e.__objectRegistryId;e.__objectRegistryId=0;delete this._objects[g]},isObjectRegistered:function(e){if(e.__objectRegistryId){return true}else{return false}},isIdRegistered:function(e){if(this._objects[e]){return true}else{return false}},objectToId:function(e){var g=e.__objectRegistryId;if(!g){throw new Error("ObjectRegistry.objectToId: object not registered")}return g},idToObject:function(e){return this._objects[e]}})}};__ngs._1a={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.toMD5=__ngs.r_(__ngs._6c).toMD5}};__ngs._1b={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._6).Proc;var a=__ngs.r_(__ngs._1y).MessageEmitter;b.OrientationEmitter=a.singleton({classname:"OrientationEmitter",initialize:function(){var e=__ngs.r_(__ngs._19).ObjectRegistry;e.register(this);this._createSendGen(this.__objectRegistryId);this._lastDeviceOrientation=this.Orientation.Portrait;this._lastInterfaceOrientation=this.Orientation.Portrait},getDeviceOrientation:function(){return this._lastDeviceOrientation},getInterfaceOrientation:function(){return this._lastInterfaceOrientation},setInterfaceOrientation:function(e,g){if(!this.isInterfaceOrientation(e)){NgLogE("Unknown orientation specified: "+e);return}if(e!=this._lastInterfaceOrientation){NgLogD("setInterfaceOrientation to "+e);this._setInterfaceOrientationSendGen(e,g);this._lastInterfaceOrientation=e}},isInterfaceOrientation:function(e){return e==this.Orientation.Portrait||e==this.Orientation.PortraitUpsideDown||e==this.Orientation.LandscapeLeft||e==this.Orientation.LandscapeRight},Orientation:{Portrait:0,PortraitUpsideDown:1,LandscapeLeft:2,LandscapeRight:3,FaceUp:4,FaceDown:5},OrientationType:{Device:0,Interface:1},_orientationChangedRecv:function(e){this._lastDeviceOrientation=e;this.emit({type:this.OrientationType.Device,orientation:e});this._orientationChangedSendGen(e)},_interfaceOrientationChangedRecv:function(e){this._lastInterfaceOrientation=e;this.emit({type:this.OrientationType.Interface,orientation:e});this._interfaceOrientationChangedSendGen(e)},_classId:335,_orientationChangedRecvGen:function(g){if((g.length-g.idx)!==1){NgLogE("Could not parse due to wrong argument count in OrientationEmitter.orientationChanged from command: "+g);return false}var e=d.parseInt(g[g.idx++]);if(e===undefined){NgLogE("Could not parse orientation in OrientationEmitter.orientationChanged from command: "+g);return false}return this._orientationChangedRecv(e)},_interfaceOrientationChangedRecvGen:function(g){if((g.length-g.idx)!==1){NgLogE("Could not parse due to wrong argument count in OrientationEmitter.interfaceOrientationChanged from command: "+g);return false}var e=d.parseInt(g[g.idx++]);if(e===undefined){NgLogE("Could not parse orientation in OrientationEmitter.interfaceOrientationChanged from command: "+g);return false}return this._interfaceOrientationChangedRecv(e)},$_createSendGen:function(e){d.appendToCommandString(22020095,[+e])},_orientationChangedSendGen:function(e){d.appendToCommandString(21954562,this,[+e])},_setInterfaceOrientationSendGen:function(e,g){d.appendToCommandString(21954563,this,[+e,(g?1:0)])},_interfaceOrientationChangedSendGen:function(e){d.appendToCommandString(21954564,this,[+e])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[335]=this._instance||this;PROC_METHOD_TABLE[21954562]=this.prototype._orientationChangedRecvGen;PROC_METHOD_TABLE[21954564]=this.prototype._interfaceOrientationChangedRecvGen}})}};__ngs._1c={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var b=__ngs.r_(__ngs._2d).Element;var a=__ngs.r_(__ngs._2b).Commands;var e=c.AlertDialog=b.subclass({type:"alertdialog",initialize:function($super,g){if(e._init){e._init()}$super(g)},show:a.show,hide:a.hide});e._init=function(){delete e._init;if(b._init){b._init()}e.synthesizePropertyWithState("title",a.setTitle);e.synthesizePropertyWithState("text",a.setText);var g=function(){return this._choices};var h=function(m,l,k){this._choices=m;a.setChoices.call(this,m,l||0,k||0);return this};e.registerAccessors("choices",g,h);e.registerEventType("choice")}}};__ngs._1d={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var e=__ngs.r_(__ngs._6).Proc;var a=__ngs.r_(__ngs._1y).MessageEmitter;var b=__ngs.r_(__ngs._z).Class;c.LocationEmitter=a.singleton({classname:"LocationEmitter",Accuracy:{LOW:0,MEDIUM:1,HIGH:2},Elements:{LATITUDE:1,LONGITUDE:2,ALTITUDE:4,HEADING:8},initialize:function(){var g=__ngs.r_(__ngs._19).ObjectRegistry;g.register(this);this._createSendGen(this.__objectRegistryId);this._lastLocation=undefined;this._forceListeners=[];this.elements=this.Elements.LATITUDE|this.Elements.LONGITUDE|this.Elements.ALTITUDE|this.Elements.HEADING},setProperties:function(h,g){if(typeof h!="number"){h=this.Accuracy.HIGH}if(!g){g=this.Elements.LATITUDE|this.Elements.LONGITUDE|this.Elements.ALTITUDE|this.Elements.HEADING}this.accuracy=h;this.elements=g;this._setPropertiesSendGen(h,g)},addListener:function($super,k,h,l,g){if(l===undefined){this._startUpdatingSendGen(true);this._forceListeners.push(k)}else{this._startUpdatingSendGen(l);if(l===true){this._forceListeners.push(k)}}$super(k,h,g)},removeListener:function($super,h){$super(h);var g=this._forceListeners.indexOf(h);if(g!=-1){this._forceListeners.splice(g,1);if(this._forceListeners.length===0){this._stopUpdatingSendGen()}}},getLastLocation:function(){if(this._lastLocation===undefined||!this._lastLocation.getPosition()){return undefined}return this._lastLocation},_locationUpdatedRecv:function(l,n,k,g,m){var h=__ngs.r_(__ngs._1v).Point;this._lastLocation=new this.Location(new h(n,k),g,this._lastLocation?this._lastLocation.getHeading():undefined,m,l);this.emit(this._lastLocation)},_headingUpdatedRecv:function(k,g,h,l){if((this.elements&this.Elements.HEADING)===0){return}this._lastLocation=new this.Location(this._lastLocation?this._lastLocation.getPosition():undefined,this._lastLocation?this._lastLocation.getAltitude():undefined,g,this._lastLocation?this._lastLocation.getAccuracy():undefined,k);if(g){this.emit(this._lastLocation)}},Location:b.subclass({classname:"Location",initialize:function(h,g,m,l,k){this._position=h;this._altitude=g;this._accuracy=l;this._heading=m;this._timestamp=k},getPosition:function(){return this._position},getAltitude:function(){return this._altitude},getHeading:function(){return this._heading},getAccuracy:function(){return this._accuracy},getTimestamp:function(){return this._timestamp}}),_classId:333,_locationUpdatedRecvGen:function(l){if((l.length-l.idx)!==5){NgLogE("Could not parse due to wrong argument count in LocationEmitter.locationUpdated from command: "+l);return false}var k=e.parseInt(l[l.idx++]);if(k===undefined){NgLogE("Could not parse timestamp in LocationEmitter.locationUpdated from command: "+l);return false}var n=e.parseFloat(l[l.idx++]);if(n===undefined){NgLogE("Could not parse latitude in LocationEmitter.locationUpdated from command: "+l);return false}var h=e.parseFloat(l[l.idx++]);if(h===undefined){NgLogE("Could not parse longitude in LocationEmitter.locationUpdated from command: "+l);return false}var g=e.parseFloat(l[l.idx++]);if(g===undefined){NgLogE("Could not parse altitude in LocationEmitter.locationUpdated from command: "+l);return false}var m=e.parseFloat(l[l.idx++]);if(m===undefined){NgLogE("Could not parse accuracy in LocationEmitter.locationUpdated from command: "+l);return false}return this._locationUpdatedRecv(k,n,h,g,m)},_headingUpdatedRecvGen:function(l){if((l.length-l.idx)!==4){NgLogE("Could not parse due to wrong argument count in LocationEmitter.headingUpdated from command: "+l);return false}var k=e.parseInt(l[l.idx++]);if(k===undefined){NgLogE("Could not parse timestamp in LocationEmitter.headingUpdated from command: "+l);return false}var g=e.parseFloat(l[l.idx++]);if(g===undefined){NgLogE("Could not parse magneticHeading in LocationEmitter.headingUpdated from command: "+l);return false}var h=e.parseFloat(l[l.idx++]);if(h===undefined){NgLogE("Could not parse trueHeading in LocationEmitter.headingUpdated from command: "+l);return false}var m=e.parseFloat(l[l.idx++]);if(m===undefined){NgLogE("Could not parse accuracy in LocationEmitter.headingUpdated from command: "+l);return false}return this._headingUpdatedRecv(k,g,h,m)},$_createSendGen:function(g){e.appendToCommandString(21889023,[+g])},_destroySendGen:function(){e.appendToCommandString(21823490,this)},_startUpdatingLocationSendGen:function(h,g){e.appendToCommandString(21823491,this,[+h,+g])},_stopUpdatingLocationSendGen:function(){e.appendToCommandString(21823492,this)},_locationUpdatedSendGen:function(k,m,h,g,l){e.appendToCommandString(21823493,this,[+k,+m,+h,+g,+l])},_startUpdatingHeadingSendGen:function(g,h){e.appendToCommandString(21823494,this,[+g,+h])},_stopUpdatingHeadingSendGen:function(){e.appendToCommandString(21823495,this)},_headingUpdatedSendGen:function(k,g,h,l){e.appendToCommandString(21823496,this,[+k,+g,+h,+l])},_setPropertiesSendGen:function(h,g){e.appendToCommandString(21823497,this,[+h,+g])},_startUpdatingSendGen:function(g){e.appendToCommandString(21823498,this,[(g?1:0)])},_stopUpdatingSendGen:function(){e.appendToCommandString(21823499,this)},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[333]=this._instance||this;PROC_METHOD_TABLE[21823493]=this.prototype._locationUpdatedRecvGen;PROC_METHOD_TABLE[21823496]=this.prototype._headingUpdatedRecvGen}})}};__ngs._1e={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._6).Proc;var a=__ngs.r_(__ngs._1y).MessageEmitter;b.MemoryEmitter=a.singleton({classname:"MemoryEmitter",initialize:function(){var e=__ngs.r_(__ngs._19).ObjectRegistry;e.register(this);this._createSendGen(this.__objectRegistryId);this._summaryStatisticsEmitter=null;this._summaryStatisticsOption=this.StatisticsOption.common;this._summaryStatisticsInterval=1000},_memoryEventRecv:function(){this.emit();this._memoryEventSendGen()},StatisticsOption:{common:1,raw:2},setSummaryStatisticsOption:function(e){this._summaryStatisticsOption=e;if(this._summaryStatisticsEmitter){this._enableSummaryStatisticsSendGen(this._summaryStatisticsOption,this._summaryStatisticsInterval)}},setSummaryStatisticsInterval:function(e){this._summaryStatisticsInterval=e;if(this._summaryStatisticsEmitter){this._enableSummaryStatisticsSendGen(this._summaryStatisticsOption,this._summaryStatisticsInterval)}},addSummaryStatisticsListener:function(g,h,e){if(!this._summaryStatisticsEmitter){this._summaryStatisticsEmitter=new a()}this._summaryStatisticsEmitter.addListener(g,h,e);if(this._summaryStatisticsEmitter.getListenerCount()==1){this._enableSummaryStatisticsSendGen(this._summaryStatisticsOption,this._summaryStatisticsInterval)}},removeSummaryStatisticsListener:function(e){if(this._summaryStatisticsEmitter){this._summaryStatisticsEmitter.removeListener(e);if(this._summaryStatisticsEmitter.getListenerCount()===0){this._enableSummaryStatisticsSendGen(0,0);this._summaryStatisticsEmitter=null}}else{NgLogD("removeRealtimeSummaryStatisticsListener: memoryEmitter does not exist")}},_statisticsRecv:function(g){if(this._summaryStatisticsEmitter){try{this._summaryStatisticsEmitter.emit(JSON.parse(g)||{})}catch(h){NgLogE("_statisticsRecv: error occured while parsing JSON");return}}},_classId:331,_memoryEventRecvGen:function(e){if((e.length-e.idx)!==0){NgLogE("Could not parse due to wrong argument count in MemoryEmitter.memoryEvent from command: "+e);return false}return this._memoryEventRecv()},_statisticsRecvGen:function(g){if((g.length-g.idx)!==1){NgLogE("Could not parse due to wrong argument count in MemoryEmitter.statistics from command: "+g);return false}var e=d.parseString(g[g.idx++]);if(e===undefined){NgLogE("Could not parse data in MemoryEmitter.statistics from command: "+g);return false}return this._statisticsRecv(e)},$_createSendGen:function(e){d.appendToCommandString(21757951,[+e])},_memoryEventSendGen:function(){d.appendToCommandString(21692418,this)},_enableSummaryStatisticsSendGen:function(g,e){d.appendToCommandString(21692419,this,[+g,+e])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[331]=this._instance||this;PROC_METHOD_TABLE[21692418]=this.prototype._memoryEventRecvGen;PROC_METHOD_TABLE[21692420]=this.prototype._statisticsRecvGen}})}};__ngs._1f={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var e=__ngs.r_(__ngs._6).Proc;var a=__ngs.r_(__ngs._1y).MessageEmitter;var b=__ngs.r_(__ngs._z).Class;c.MotionEmitter=a.singleton({classname:"MotionEmitter",initialize:function(){var g=__ngs.r_(__ngs._19).ObjectRegistry;g.register(this);this._createSendGen(this.__objectRegistryId);this._lastAccel=null;this._lastGyro=null;this._lastCompass=null},Motion:b.subclass({classname:"Motion",initialize:function(g,h,k){this._accel=g;this._gyro=h;this._compass=k},getAccelData:function(){return this._accel},getGyroData:function(){return this._gyro},getCompassData:function(){return this._compass}}),addListener:function($super,k,h,g){if(this.getListenerCount()===0){this._startMotionSendGen()}$super(k,h,g)},removeListener:function($super,g){$super(g);if(this.getListenerCount()===0){this._stopMotionSendGen()}},_emitMotion:function(){var g=new Device.MotionEmitter.Motion(this._lastAccel,this._lastGyro,this._lastCompass);this.emit(g)},_accelChangedRecv:function(g,k,h){this._lastAccel={x:g,y:k,z:h};this._emitMotion();this._accelChangedSendGen(g,k,h)},_gyroChangedRecv:function(g,k,h){this._lastGyro={x:g,y:k,z:h};this._emitMotion();this._gyroChangedSendGen(g,k,h)},_magneticChangedRecv:function(g,k,h){this._lastCompass={x:g,y:k,z:h};this._emitMotion();this._magneticChangedSendGen(g,k,h)},useCommonAccelerometerMode:function(g){this._useCommonAccelerometerModeSendGen(g)},_classId:330,_accelChangedRecvGen:function(h){if((h.length-h.idx)!==3){NgLogE("Could not parse due to wrong argument count in MotionEmitter.accelChanged from command: "+h);return false}var g=e.parseFloat(h[h.idx++]);if(g===undefined){NgLogE("Could not parse x in MotionEmitter.accelChanged from command: "+h);return false}var l=e.parseFloat(h[h.idx++]);if(l===undefined){NgLogE("Could not parse y in MotionEmitter.accelChanged from command: "+h);return false}var k=e.parseFloat(h[h.idx++]);if(k===undefined){NgLogE("Could not parse z in MotionEmitter.accelChanged from command: "+h);return false}return this._accelChangedRecv(g,l,k)},_gyroChangedRecvGen:function(h){if((h.length-h.idx)!==3){NgLogE("Could not parse due to wrong argument count in MotionEmitter.gyroChanged from command: "+h);return false}var g=e.parseFloat(h[h.idx++]);if(g===undefined){NgLogE("Could not parse x in MotionEmitter.gyroChanged from command: "+h);return false}var l=e.parseFloat(h[h.idx++]);if(l===undefined){NgLogE("Could not parse y in MotionEmitter.gyroChanged from command: "+h);return false}var k=e.parseFloat(h[h.idx++]);if(k===undefined){NgLogE("Could not parse z in MotionEmitter.gyroChanged from command: "+h);return false}return this._gyroChangedRecv(g,l,k)},_magneticChangedRecvGen:function(h){if((h.length-h.idx)!==3){NgLogE("Could not parse due to wrong argument count in MotionEmitter.magneticChanged from command: "+h);return false}var g=e.parseFloat(h[h.idx++]);if(g===undefined){NgLogE("Could not parse x in MotionEmitter.magneticChanged from command: "+h);return false}var l=e.parseFloat(h[h.idx++]);if(l===undefined){NgLogE("Could not parse y in MotionEmitter.magneticChanged from command: "+h);return false}var k=e.parseFloat(h[h.idx++]);if(k===undefined){NgLogE("Could not parse z in MotionEmitter.magneticChanged from command: "+h);return false}return this._magneticChangedRecv(g,l,k)},$_createSendGen:function(g){e.appendToCommandString(21692415,[+g])},_accelChangedSendGen:function(g,k,h){e.appendToCommandString(21626882,this,[+g,+k,+h])},_gyroChangedSendGen:function(g,k,h){e.appendToCommandString(21626883,this,[+g,+k,+h])},_magneticChangedSendGen:function(g,k,h){e.appendToCommandString(21626884,this,[+g,+k,+h])},_startMotionSendGen:function(){e.appendToCommandString(21626885,this)},_stopMotionSendGen:function(){e.appendToCommandString(21626886,this)},_useCommonAccelerometerModeSendGen:function(g){e.appendToCommandString(21626887,this,[(g?1:0)])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[330]=this._instance||this;PROC_METHOD_TABLE[21626882]=this.prototype._accelChangedRecvGen;PROC_METHOD_TABLE[21626883]=this.prototype._gyroChangedRecvGen;PROC_METHOD_TABLE[21626884]=this.prototype._magneticChangedRecvGen}})}};__ngs._1g={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._6).Proc;var a=__ngs.r_(__ngs._1y).MessageEmitter;b.NetworkEmitter=a.singleton({classname:"NetworkEmitter",initialize:function(){var e=__ngs.r_(__ngs._19).ObjectRegistry;e.register(this);this._createSendGen(this.__objectRegistryId);this._lastStatus=null;this._perfEmitter=null;this._connEmitter=null;this._minRate=5*1024;this._duration=5000;this._samples=[];this._sum=0;this._unconformFor=0;this._lastSampleAt=0;this._maxConnTime=5000},getLastStatus:function(){return this._lastStatus},Status:{None:0,Cellular:1,Wifi:2},_flags:{enable:1},addPerformanceListener:function(h,e,g){if(!this._perfEmitter){this._perfEmitter=new a()}this._perfEmitter.addListener(h,e,g);NgLogD("addPerformanceListener: count="+this._perfEmitter.getListenerCount());if(this._perfEmitter.getListenerCount()==1){this._enablePerfEmitterSendGen(this._flags.enable,this._minRate,this._duration)}},removePerformanceListener:function(e){if(this._perfEmitter){this._perfEmitter.removeListener(e);NgLogD("removePerformanceListener: count="+this._perfEmitter.getListenerCount());if(this._perfEmitter.getListenerCount()===0){this._enablePerfEmitterSendGen(0,0,0);this._perfEmitter=null}}else{NgLogD("removePerformanceListener: perf-emitter does not exist")}},getPerformanceListenerCount:function(){if(this._perfEmitter){return this._perfEmitter.getListenerCount()}return 0},addConnectionListener:function(g,h,e){if(!this._connEmitter){this._connEmitter=new a()}this._connEmitter.addListener(g,h,e);NgLogD("addConnectionListener: count="+this._connEmitter.getListenerCount());if(this._connEmitter.getListenerCount()==1){this._enableConnEmitterSendGen(this._flags.enable,this._maxConnTime)}},removeConnectionListener:function(e){if(this._connEmitter){this._connEmitter.removeListener(e);NgLogD("removeConnectionListener: count="+this._connEmitter.getListenerCount());if(this._connEmitter.getListenerCount()===0){this._enableConnEmitterSendGen(0,0);this._connEmitter=null}}else{NgLogD("removeConnectionListener: already removed")}},getConnectionListenerCount:function(){if(this._connEmitter){return this._connEmitter.getListenerCount()}return 0},setPerformanceThreshold:function(e){if(e.minRate){this._minRate=e.minRate}if(e.duration){this._duration=e.duration}if(this._perfEmitter){this._enablePerfEmitterSendGen(this._flags.enable,this._minRate,this._duration)}},setConnectionThreshold:function(e){if(e.maxConnTime){this._maxConnTime=e.maxConnTime}if(this._connEmitter){this._enableConnEmitterSendGen(this._flags.enable,this._maxConnTime)}},_statusChangedRecv:function(e){this._lastStatus=e;this.emit(e)},_activityRecv:function(l,t,s,e,u,r,n,k){var p=__ngs.r_(__ngs._1z).Time;var g=p.getRealTime();if(t==e||!t){if(g-this._lastSampleAt>=this._duration){this._samples=[];this._sum=0;this._unconformFor=0}}if(t>0){var m=0;if(this._samples.length==150){m=this._samples.shift();if(this._sum>=m){this._sum-=m}}var h=p.getFrameDelta();var o=(r+n)/(h/1000);this._samples.push(o);this._sum+=o;this._lastSampleAt=g;var q=this._sum/this._samples.length;if(q<this._minRate){this._unconformFor+=h;if(this._unconformFor>=this._duration){if(this._perfEmitter){this._unconformFor=0;this._perfEmitter.emit({actReqs:l,actConns:t,aveRate:q})}}}else{this._unconformFor=0}}if(k>=this._maxConnTime){if(this._connEmitter){this._connEmitter.emit(k)}}},_classId:336,_statusChangedRecvGen:function(g){if((g.length-g.idx)!==1){NgLogE("Could not parse due to wrong argument count in NetworkEmitter.statusChanged from command: "+g);return false}var e=d.parseInt(g[g.idx++]);if(e===undefined){NgLogE("Could not parse status in NetworkEmitter.statusChanged from command: "+g);return false}return this._statusChangedRecv(e)},_activityRecvGen:function(k){if((k.length-k.idx)!==8){NgLogE("Could not parse due to wrong argument count in NetworkEmitter.activity from command: "+k);return false}var e=d.parseInt(k[k.idx++]);if(e===undefined){NgLogE("Could not parse numActiveReqs in NetworkEmitter.activity from command: "+k);return false}var l=d.parseInt(k[k.idx++]);if(l===undefined){NgLogE("Could not parse numActiveConns in NetworkEmitter.activity from command: "+k);return false}var p=d.parseInt(k[k.idx++]);if(p===undefined){NgLogE("Could not parse numOpens in NetworkEmitter.activity from command: "+k);return false}var g=d.parseInt(k[k.idx++]);if(g===undefined){NgLogE("Could not parse numConns in NetworkEmitter.activity from command: "+k);return false}var o=d.parseInt(k[k.idx++]);if(o===undefined){NgLogE("Could not parse numCloses in NetworkEmitter.activity from command: "+k);return false}var n=d.parseInt(k[k.idx++]);if(n===undefined){NgLogE("Could not parse bytesSent in NetworkEmitter.activity from command: "+k);return false}var m=d.parseInt(k[k.idx++]);if(m===undefined){NgLogE("Could not parse bytesRcvd in NetworkEmitter.activity from command: "+k);return false}var h=d.parseInt(k[k.idx++]);if(h===undefined){NgLogE("Could not parse maxConnTime in NetworkEmitter.activity from command: "+k);return false}return this._activityRecv(e,l,p,g,o,n,m,h)},$_createSendGen:function(e){d.appendToCommandString(22085631,[+e])},_enablePerfEmitterSendGen:function(e,h,g){d.appendToCommandString(22020100,this,[+e,+h,+g])},_enableConnEmitterSendGen:function(e,g){d.appendToCommandString(22020101,this,[+e,+g])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[336]=this._instance||this;PROC_METHOD_TABLE[22020098]=this.prototype._statusChangedRecvGen;PROC_METHOD_TABLE[22020099]=this.prototype._activityRecvGen}})}};__ngs._1h={_c:null,_d:function(){var h={exports:{}};var c=h.exports;this._c=h;var k=__ngs.r_(__ngs._6).Proc;var b=__ngs.r_(__ngs._19).ObjectRegistry;var a=__ngs.r_(__ngs._1y).MessageEmitter;var g=__ngs.r_(__ngs._12).MessageListener;var e=__ngs.r_(__ngs._1f).MotionEmitter;var d=g.subclass({onUpdate:function(){}});c.ShakeEmitter=a.singleton({classname:"ShakeEmitter",initialize:function(){b.register(this);this._createSendGen(this.__objectRegistryId);this._proxyListener=new d()},addListener:function($super,n,m,l){if(this.getListenerCount()===0){e.addListener(this._proxyListener,function(){})}$super(n,m,l)},removeListener:function($super,l){$super(l);if(this.getListenerCount()===0){e.removeListener(this._proxyListener)}},vibrate:function(){this._vibrateSendGen()},_shakeRecv:function(){this.emit();this._shakeSendGen()},_classId:332,_shakeRecvGen:function(l){if((l.length-l.idx)!==0){NgLogE("Could not parse due to wrong argument count in ShakeEmitter.shake from command: "+l);return false}return this._shakeRecv()},$_createSendGen:function(l){k.appendToCommandString(21823487,[+l])},_shakeSendGen:function(){k.appendToCommandString(21757954,this)},$_vibrateSendGen:function(){k.appendToCommandString(21823485)},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[332]=this._instance||this;PROC_METHOD_TABLE[21757954]=this.prototype._shakeRecvGen}})}};__ngs._1i={_c:null,_d:function(){var e={exports:{}};var d=e.exports;this._c=e;var g=__ngs.r_(__ngs._6).Proc;var b=__ngs.r_(__ngs._1y).MessageEmitter;var c=__ngs.r_(__ngs._z).Class;var a=null;d.KeyEmitter=b.singleton({classname:"KeyEmitter",initialize:function(){var h=__ngs.r_(__ngs._19).ObjectRegistry;h.register(this);this._createSendGen(this.__objectRegistryId)},keyCodeToSymbol:function(k){if(!a){a={};for(var h in this.Keycode){a[this.Keycode[h]]=h}}return a[k]||""},KeyEvent:c.subclass({classname:"KeyEvent",initialize:function(k,h,l){this.type=k;this.modifiers=h;this.code=l}}),_onKeyEventRecv:function(k,h,l){var m=new Device.KeyEmitter.KeyEvent(k,h,l);if(!this.chain(m)){this._onKeyEventSendGen(k,h,l)}},EventType:{onUp:0,onDown:1},Modifier:{NONE:0,SYMBOL:1<<0,ALT:1<<1,ALT_LEFT:1<<2,ALT_RIGHT:1<<3,SHIFT:1<<4,SHIFT_LEFT:1<<5,SHIFT_RIGHT:1<<6},Keycode:{a:29,b:30,c:31,d:32,e:33,f:34,g:35,h:36,i:37,j:38,k:39,l:40,m:41,n:42,o:43,p:44,q:45,r:46,s:47,t:48,u:49,v:50,w:51,x:52,y:53,z:54,up:19,down:20,left:21,right:22,enter:66,backspace:67,back:4,backunhandled:84,menu:82},_classId:343,_onKeyEventRecvGen:function(m){if((m.length-m.idx)!==3){NgLogE("Could not parse due to wrong argument count in KeyEmitter.onKeyEvent from command: "+m);return false}var k=g.parseInt(m[m.idx++]);if(k===undefined){NgLogE("Could not parse type in KeyEmitter.onKeyEvent from command: "+m);return false}var h=g.parseInt(m[m.idx++]);if(h===undefined){NgLogE("Could not parse modifiers in KeyEmitter.onKeyEvent from command: "+m);return false}var l=g.parseInt(m[m.idx++]);if(l===undefined){NgLogE("Could not parse code in KeyEmitter.onKeyEvent from command: "+m);return false}return this._onKeyEventRecv(k,h,l)},$_createSendGen:function(h){g.appendToCommandString(22544383,[+h])},_onKeyEventSendGen:function(k,h,l){g.appendToCommandString(22478850,this,[+k,+h,+l])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[343]=this._instance||this;PROC_METHOD_TABLE[22478850]=this.prototype._onKeyEventRecvGen}})}};__ngs._1j={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var d=__ngs.r_(__ngs._5).Core;var c=__ngs.r_(__ngs._6).Proc;a.PushNotificationEmitter=d.MessageEmitter.singleton({classname:"PushNotificationEmitter",initialize:function(){d.ObjectRegistry.register(this);this._createSendGen(this.__objectRegistryId)},_onPushNotificationRecv:function(e){this._lastMsgPayload=e;if(!this.chain(e)){this._onPushNotificationSendGen(e)}},_classId:345,_onPushNotificationRecvGen:function(g){if((g.length-g.idx)!==1){NgLogE("Could not parse due to wrong argument count in PushNotificationEmitter.onPushNotification from command: "+g);return false}var e=c.parseString(g[g.idx++]);if(e===undefined){NgLogE("Could not parse msgPayload in PushNotificationEmitter.onPushNotification from command: "+g);return false}return this._onPushNotificationRecv(e)},$_createSendGen:function(e){c.appendToCommandString(22675455,[+e])},_onPushNotificationSendGen:function(e){c.appendToCommandString(22609922,this,[c.encodeString(e)])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[345]=this._instance||this;PROC_METHOD_TABLE[22609922]=this.prototype._onPushNotificationRecvGen}})}};__ngs._1k={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var d=__ngs.r_(__ngs._5).Core;var c=__ngs.r_(__ngs._6).Proc;a.InAppPurchaseEmitter=d.MessageEmitter.singleton({classname:"InAppPurchaseEmitter",initialize:function(){d.ObjectRegistry.register(this);this._createSendGen(this.__objectRegistryId)},_onPurchaseEventRecv:function(e,g,h){if(!this.chain(e,g,h)){this._onPurchaseEventSendGen(e,g,h)}},_classId:347,_onPurchaseEventRecvGen:function(h){if((h.length-h.idx)!==3){NgLogE("Could not parse due to wrong argument count in InAppPurchaseEmitter.onPurchaseEvent from command: "+h);return false}var e=c.parseString(h[h.idx++]);if(e===undefined){NgLogE("Could not parse err in InAppPurchaseEmitter.onPurchaseEvent from command: "+h);return false}var g=c.parseString(h[h.idx++]);if(g===undefined){NgLogE("Could not parse data in InAppPurchaseEmitter.onPurchaseEvent from command: "+h);return false}var k=c.parseString(h[h.idx++]);if(k===undefined){NgLogE("Could not parse verificationToken in InAppPurchaseEmitter.onPurchaseEvent from command: "+h);return false}return this._onPurchaseEventRecv(e,g,k)},$_createSendGen:function(e){c.appendToCommandString(22806527,[+e])},_onPurchaseEventSendGen:function(e,g,h){c.appendToCommandString(22740994,this,[c.encodeString(e),c.encodeString(g),c.encodeString(h)])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[347]=this._instance||this;PROC_METHOD_TABLE[22740994]=this.prototype._onPurchaseEventRecvGen}})}};__ngs._1l={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var g=__ngs.r_(__ngs._6).Proc;var b=__ngs.r_(__ngs._z).Class;var a=__ngs.r_(__ngs._1s).Analytics;var e=__ngs.r_(__ngs._4);var h=__ngs.r_(__ngs._8).Localization;c.InAppPurchase=b.singleton({classname:"InAppPurchase",initialize:function(){Core.ObjectRegistry.register(this);this._createSendGen(this.__objectRegistryId)},initService:function(p,o,l){NgLogD("initService called");if(this._iapInited){NgLogD("initService has been called");return}if((!this._isIOS())&&(!this._isAndroid())){NgLogE("ERROR: Neither Android nor iOS platform, IAP will not work");o();return}this._initDonecb=o;this._initOrdercb=p;if(l){var n=JSON.parse(l);if(n.service==="boku"){this._paymentProvider="boku"}}if(!this._iapInited){var m=Core.MessageListener.subclass({onPurchaseEvent:this._iapCallback.bind(this)});this.listener=new m();e.Device.InAppPurchaseEmitter.addListener(this.listener,this.listener.onPurchaseEvent)}if(this._isAndroid()){this._iapCallback("morenonces","","");var k=this;Storage.KeyValueCache.local.getItem(this._IAB_ORPHANED,{},function(s,r){NgLogD("_iap getting orphaned order callback");if(r){var q=JSON.parse(r);NgLogD("_iap restoring order");k._restoreOrder(q,l)}else{NgLogD("_iap initService 0");k._initService(l)}})}else{NgLogD("_iap initService 1");this._initService(l)}},launchPurchaseView:function(n,o,l,q,p,m){if(!this._iapInited){a.reportGameEvent("MobaIAPInitFailed");NgLogE("ERROR: function initService must be called and its donecb called back, before launchPurchaseView may be used.");q(false,"failed:initservice_not_done");return}this._currentOrderProductID=n;this._currentOrderCancelcb=p;this._currentOrderFailcb=q;this._currentOrderPurchasecb=l;if(o!==1&&this._isAndroid()){q(false,"failed:unsupported_quantity");a.reportGameEvent("MobaIAPInvalidQuantity");return}if(this._isIOS()||this._isAndroid()){e.Device.InAppPurchase._requestPurchase(n,o,m);return}var k=Core.Capabilities;a.reportGameEvent("MobaIAPUnsupportPlatorm"+k.getPlatformOS());NgLogE("launchPurchaseView failed: only Android and iOS platforms are currently supported.");q(false,"failed:unsupported_platform");return},pushSingleNonce:function(l){var k=[];k.push(l);this._fillIABNoncePool(JSON.stringify(k))},getProductInformation:function(k,l){this._getProductInformationCB=l;this._getProductInformationSendGen(k)},getProductSetInfo:function(k,l){this._getProductSetInfoCB=l;this._getProductSetInfoSendGen(k)},_IAB_PURCHASED:0,_IAB_CANCELED:1,_IAB_REFUNDED:2,_IAB_ORPHANED:"com.ngmoco.in_app_purchase.iab_orphaned_orders",_capIsAndroid:undefined,_capIsIOS:undefined,_currentOrderCancelcb:undefined,_currentOrderFailcb:undefined,_currentOrderProductID:undefined,_currentOrderPurchasecb:undefined,_initDonecb:undefined,_initOrdercb:undefined,_iapInited:false,_generateIABNonce:function(){var m=new Date().getTime();var l=Math.floor(Math.random()*1000);var k=(m*1000)+l;NgLogD("Generated nonce: "+k);return k},_iapCallback:function(o,p,k){NgLogD("8 _iapCallback with err: "+o+" data: "+p+" verficationToken: "+k);if(o=="morenonces"){var r=10;var w=[];while(w.length<r){w.push(this._generateIABNonce())}this._fillIABNoncePool(JSON.stringify(w));return true}if((o=="initdone")||(o=="initcheckdone")){if(typeof this._initDonecb=="function"){this._iapInited=true;this._initDonecb();NgLogD("_iap initService Done")}else{NgLogW("WARN: "+o+" callback with empty donecb")}return true}if(o=="getProductInformationDone"){if(p&&p.length>0){var l=JSON.parse(p);try{this._productInformationExtras=JSON.parse(k)}catch(s){NgLogE("Error parsing Product Information")}this._getProductInformationCB(l.productId)}else{this._getProductInformationCB("","no information on this product")}this._getProductInformationCB=undefined;delete this._productInformationExtras;return true}if(o=="getProductSetInfoDone"){this._getProductSetInfoCB(p);this._getProductSetInfoCB=undefined;return true}var m;var q="";var u,v;if(p&&p.length>0){u=JSON.parse(p);if((u.orders)&&(u.orders.length>0)){this._dumpOrderIds(u.orders);m=u.orders[0].orderId;if(this._isAndroid()&&(!this._currentOrderPurchasecb)){var n=u.orders[0];v={data:p,signature:k};n.receipt=JSON.stringify(v);if(!n.receipt){a.reportGameEvent("NGNILRECEIPT2")}this._initOrdercb(n.productId,n.orderId,n.receipt);return true}}}if(o&&o.length>0){if(o=="cancelled"){if((typeof this._currentOrderCancelcb)=="function"){this._currentOrderCancelcb();this._currentOrderCancelcb=undefined}else{a.reportGameEvent("MobaIAPERR02")}}else{if(o){NgLogD("DEBUG: iapCallback: got error: "+o)}else{NgLogD("DEBUG: iapCallback: got canceled purchaseState.")}if((typeof this._currentOrderFailcb)=="function"){this._currentOrderFailcb(false,o);this._currentOrderFailcb=undefined}else{a.reportGameEvent("MobaIAPERR01")}}return true}if((typeof this._currentOrderPurchasecb)=="function"){var t=k;if(this._isAndroid()){v={data:p,signature:k};t=JSON.stringify(v)}if(!t){a.reportGameEvent("NGNILRECEIPT")}this._currentOrderPurchasecb(q,m,t);this._currentOrderPurchasecb=undefined}else{if((!this._iapInited)&&((typeof this._initOrdercb)=="function")){this._initOrdercb(q,m,k)}else{a.reportGameEvent("MobaIAPERR04")}}return true},_isAndroid:function(){if(typeof this._capIsAndroid!="undefined"){return this._capIsAndroid}var k=Core.Capabilities;if((typeof k.getPlatformOS()!="undefined")&&(k.getPlatformOS().toLowerCase()=="android")){this._capIsAndroid=true}else{this._capIsAndroid=false}return this._capIsAndroid},_isIOS:function(){if(typeof this._capIsIOS!="undefined"){return this._capIsIOS}var k=Core.Capabilities;if((typeof k.getPlatformOS()!="undefined")&&(k.getPlatformOS().toLowerCase()=="iphone os")){this._capIsIOS=true}else{this._capIsIOS=false}return this._capIsIOS},_fillIABNoncePool:function(k){this._fillIABNoncePoolSendGen(k)},_dumpOrderIds:function(m){for(var l=0;l<m.length;l++){var k=m[l];a.reportGameEvent("NGIABRECEIVED",{orderId:k.orderId})}},_filterSuccessOrders:function(n,q,o){var k=[];for(var m in n.orders){if(n.orders[m].purchaseState===this._IAB_PURCHASED){var p=n.orders[m];if(this._isAndroid()){var l={data:o,signature:q};p.receipt=JSON.stringify(l)}else{p.verificationToken=q}k.push(p)}else{this._sendOrderProcessedAck(n.orders[m].notificationId);NgLogD("Sending ACK to google for filterorders")}}NgLogD("successOrders length = "+k.length);return k},_persistOrphanedOrders:function(k){Storage.KeyValueCache.local.getItem(this._IAB_ORPHANED,{},(function(n,v){if(v&&(v.length>0)){var p=JSON.parse(v);for(var s in p){var m=p[s];var q=false;for(var l in k){var u=k[l];if(u.orderId===m.orderId){q=true;break}}if(!q){k.push(p[s])}}}var r=JSON.stringify(k);Storage.KeyValueCache.local.setItem(this._IAB_ORPHANED,r,{},function(){NgLogD("Orphaned orders added to persistent store: "+r);NgLogD("Number of orders: "+k.length)})}).bind(this))},_initService:function(k){if(k){a.reportGameEvent("MobaIAPERR06");this._initService2SendGen(k)}else{NgLogD("_iap calling initServiceSendGen");this._initServiceSendGen()}},_requestPurchase:function(m,l,k){if(k){this._requestPurchase2SendGen(m,l,k)}else{this._requestPurchaseSendGen(m,l)}},_sendOrderProcessedAck:function(l,k){NgLogD("sending ACK to Google with orderId: "+k);a.reportGameEvent("MobaIABACK",{orderId:k});this._sendOrderProcessedAckSendGen(l)},_restoreOrder:function(k,m){var l=this;if(this._isAndroid()){this._initOrdercb(k.productId,k.orderId,k.receipt,k)}else{this._initOrdercb(k.productId,k.orderId,k.verificationToken,k)}Storage.KeyValueCache.local.removeItem(this._IAB_ORPHANED,{},function(){NgLogD("_iap removeItem callback");NgLogD("_iap initService 2");l._initService(m)})},_classId:348,$_createSendGen:function(k){g.appendToCommandString(22872063,[+k])},_initServiceSendGen:function(){g.appendToCommandString(22806530,this)},_requestPurchaseSendGen:function(l,k){g.appendToCommandString(22806531,this,[g.encodeString(l),+k])},_fillIABNoncePoolSendGen:function(k){g.appendToCommandString(22806532,this,[g.encodeString(k)])},_getProductInformationSendGen:function(k){g.appendToCommandString(22806533,this,[g.encodeString(k)])},_sendOrderProcessedAckSendGen:function(k){g.appendToCommandString(22806534,this,[g.encodeString(k)])},_getProductSetInfoSendGen:function(k){g.appendToCommandString(22806535,this,[g.encodeString(k)])},_initService2SendGen:function(k){g.appendToCommandString(22806536,this,[g.encodeString(k)])},_requestPurchase2SendGen:function(m,l,k){g.appendToCommandString(22806537,this,[g.encodeString(m),+l,g.encodeString(k)])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[348]=this._instance||this}})}};__ngs._1m={_c:null,_d:function(){var c={exports:{}};var e=c.exports;this._c=c;var h=__ngs.r_(__ngs._5).Core;var b=__ngs.r_(__ngs._z).Class;var n=__ngs.r_(__ngs._6).Proc;var d=__ngs.r_(__ngs._19).ObjectRegistry;var g=__ngs.r_(__ngs._10).Base64;var m=__ngs.r_(__ngs._1y).MessageEmitter;var a=__ngs.r_(__ngs._15).DownloadFile;var l=__ngs.r_(__ngs._14).Util;var k=__ngs.r_(__ngs._d).FileSystem;e.IPCEmitter=m.singleton({classname:"IPCEmitter",initialize:function(){console.log("IPCEmitter.initialize");this._callbackID=1;this._callbacks=[];this._shouldEmitIntents=false;d.register(this);this._createSendGen(this.__objectRegistryId)},canLaunch:function(o,p){this._callbacks[this._callbackID]=p;this._canLaunchSendGen(o,this._callbackID);this._callbackID++},launch:function(o,p){this._callbacks[this._callbackID]=p;this._launchSendGen(o,this._callbackID);this._callbackID++},launchIntent:function(q,p,o){if(typeof(o)=="string"){if(typeof(p)=="string"){p=JSON.parse(p)}p.packageName=o}if(typeof p=="object"){p=JSON.stringify(p)}this._launchIntentSendGen(q,p)},launchService:function(r,q,p){if(typeof(p)=="string"){var o;if(typeof(q)=="string"){o=JSON.parse(q)}else{o={}}o.packageName=p;q=JSON.stringify(o)}this._launchServiceSendGen(r,q)},launchForSSO:function(o,p){o+="&sso_auth";this.launch(o,p)},getAppSignatures:function(o,p){this._callbacks[this._callbackID]=p;this._getAppSignaturesSendGen(o,this._callbackID);this._callbackID++},getCallingPackage:function(o){this._callbacks[this._callbackID]=o;this._getCallingPackageSendGen(this._callbackID);this._callbackID++},getIsServiceRunning:function(p,o){this._callbacks[this._callbackID]=o;this._getIsServiceRunningSendGen(p,this._callbackID);this._callbackID++},app:function(){return this._app},App:b.subclass({classname:"App",initialize:function(o,p){this._sourceAppID=o;this._intentURL=p},getID:function(){return this._sourceAppID},getURL:function(){return this._intentURL}}),Intent:b.subclass({classname:"Intent",initialize:function(p,o){this._action=p;this._extras=o},getAction:function(){return this._action},getExtras:function(){return this._extras}}),createShortcut:function(p,o,q){this._createShortcutSendGen(p,o,q)},createShortcutByIconUrl:function(s,r,q,u){NgLogD("createShortcutByIconUrl called",s,r,q);var t=new a();var p="shortcut_icon_image"+(new Date().getTime());var o=this;NgLogD("Icon download begin");l.OperationWithRetries(function(v,w){t.start(p,"GET",q,[],function(y,x){NgLogD("Icon download finished status="+y);if(y==200){o.createShortcut(s,r,p);k.deleteFile(p,{},function(){if(u){u(false)}})}else{if(y==404){NgLogE("Unable download icon file: icon_url="+q+", status="+y);w()}else{NgLogE("Unable download icon file: icon_url="+q+", status="+y);v()}}})},function(){NgLogE("Unable download icon file");if(u){u(true)}},true)},_onResumeFromOthersRecv:function(o,p){this._app=new Device.IPCEmitter.App(p,o);this.emit(this._app);this._onResumeFromOthersSendGen(o,p)},_setEmitIntents:function(o){this._shouldEmitIntents=Boolean(o)},_onIntentReceived:function(p,o){console.log("On IntentReceived: "+p+" / "+JSON.stringify(o));if(this._shouldEmitIntents){this.emit(new e.IPCEmitter.Intent(p,o))}},_canLaunchCallbackRecv:function(p,q){var o=q&&this._callbacks[q];if(o){o(p)}},_launchFailedRecv:function(p,q){var o=q&&this._callbacks[q];if(o){o(p)}},_getAppSignaturesCallbackRecv:function(q,p){var o=p&&this._callbacks[p];if(o){o(q.split(","))}},_getCallingPackageCallbackRecv:function(p,q){var o=q&&this._callbacks[q];if(o){o(p)}},_getIsServiceRunningCallbackRecv:function(p,q){var o=q&&this._callbacks[q];if(o){o(p)}},_onIntentReceivedRecv:function(p,o){this._onIntentReceived(p,JSON.parse(o))},Service:{SystemDownloadProvider:1},_classId:349,_onResumeFromOthersRecvGen:function(q){if((q.length-q.idx)!==2){NgLogE("Could not parse due to wrong argument count in IPCEmitter.onResumeFromOthers from command: "+q);return false}var o=n.parseString(q[q.idx++]);if(o===undefined){NgLogE("Could not parse url in IPCEmitter.onResumeFromOthers from command: "+q);return false}var p=n.parseString(q[q.idx++]);if(p===undefined){NgLogE("Could not parse sourceAppID in IPCEmitter.onResumeFromOthers from command: "+q);return false}return this._onResumeFromOthersRecv(o,p)},_launchFailedRecvGen:function(q){if((q.length-q.idx)!==2){NgLogE("Could not parse due to wrong argument count in IPCEmitter.launchFailed from command: "+q);return false}var o=n.parseString(q[q.idx++]);if(o===undefined){NgLogE("Could not parse error in IPCEmitter.launchFailed from command: "+q);return false}var p=n.parseInt(q[q.idx++]);if(p===undefined){NgLogE("Could not parse callbackID in IPCEmitter.launchFailed from command: "+q);return false}return this._launchFailedRecv(o,p)},_canLaunchCallbackRecvGen:function(q){if((q.length-q.idx)!==2){NgLogE("Could not parse due to wrong argument count in IPCEmitter.canLaunchCallback from command: "+q);return false}var o=n.parseBool(q[q.idx++]);if(o===undefined){NgLogE("Could not parse canLaunch in IPCEmitter.canLaunchCallback from command: "+q);return false}var p=n.parseInt(q[q.idx++]);if(p===undefined){NgLogE("Could not parse callbackID in IPCEmitter.canLaunchCallback from command: "+q);return false}return this._canLaunchCallbackRecv(o,p)},_getAppSignaturesCallbackRecvGen:function(p){if((p.length-p.idx)!==2){NgLogE("Could not parse due to wrong argument count in IPCEmitter.getAppSignaturesCallback from command: "+p);return false}var q=n.parseString(p[p.idx++]);if(q===undefined){NgLogE("Could not parse signatures in IPCEmitter.getAppSignaturesCallback from command: "+p);return false}var o=n.parseInt(p[p.idx++]);if(o===undefined){NgLogE("Could not parse callbackID in IPCEmitter.getAppSignaturesCallback from command: "+p);return false}return this._getAppSignaturesCallbackRecv(q,o)},_getCallingPackageCallbackRecvGen:function(q){if((q.length-q.idx)!==2){NgLogE("Could not parse due to wrong argument count in IPCEmitter.getCallingPackageCallback from command: "+q);return false}var o=n.parseString(q[q.idx++]);if(o===undefined){NgLogE("Could not parse packageName in IPCEmitter.getCallingPackageCallback from command: "+q);return false}var p=n.parseInt(q[q.idx++]);if(p===undefined){NgLogE("Could not parse callbackID in IPCEmitter.getCallingPackageCallback from command: "+q);return false}return this._getCallingPackageCallbackRecv(o,p)},_onIntentReceivedRecvGen:function(q){if((q.length-q.idx)!==2){NgLogE("Could not parse due to wrong argument count in IPCEmitter.onIntentReceived from command: "+q);return false}var p=n.parseString(q[q.idx++]);if(p===undefined){NgLogE("Could not parse action in IPCEmitter.onIntentReceived from command: "+q);return false}var o=n.parseString(q[q.idx++]);if(o===undefined){NgLogE("Could not parse extras in IPCEmitter.onIntentReceived from command: "+q);return false}return this._onIntentReceivedRecv(p,o)},_getIsServiceRunningCallbackRecvGen:function(q){if((q.length-q.idx)!==2){NgLogE("Could not parse due to wrong argument count in IPCEmitter.getIsServiceRunningCallback from command: "+q);return false}var o=n.parseBool(q[q.idx++]);if(o===undefined){NgLogE("Could not parse running in IPCEmitter.getIsServiceRunningCallback from command: "+q);return false}var p=n.parseInt(q[q.idx++]);if(p===undefined){NgLogE("Could not parse callbackID in IPCEmitter.getIsServiceRunningCallback from command: "+q);return false}return this._getIsServiceRunningCallbackRecv(o,p)},$_createSendGen:function(o){n.appendToCommandString(22937599,[+o])},_canLaunchSendGen:function(o,p){n.appendToCommandString(22872066,this,[n.encodeString(o),+p])},_launchSendGen:function(o,p){n.appendToCommandString(22872067,this,[n.encodeString(o),+p])},_onResumeFromOthersSendGen:function(o,p){n.appendToCommandString(22872068,this,[n.encodeString(o),n.encodeString(p)])},_getAppSignaturesSendGen:function(o,p){n.appendToCommandString(22872071,this,[n.encodeString(o),+p])},_getCallingPackageSendGen:function(o){n.appendToCommandString(22872073,this,[+o])},_launchIntentSendGen:function(p,o){n.appendToCommandString(22872075,this,[n.encodeString(p),n.encodeString(o)])},_launchServiceSendGen:function(p,o){n.appendToCommandString(22872076,this,[n.encodeString(p),n.encodeString(o)])},_getIsServiceRunningSendGen:function(p,o){n.appendToCommandString(22872078,this,[+p,+o])},_createShortcutSendGen:function(p,o,q){n.appendToCommandString(22872080,this,[n.encodeString(p),n.encodeString(o),n.encodeString(q)])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[349]=this._instance||this;PROC_METHOD_TABLE[22872068]=this.prototype._onResumeFromOthersRecvGen;PROC_METHOD_TABLE[22872069]=this.prototype._launchFailedRecvGen;PROC_METHOD_TABLE[22872070]=this.prototype._canLaunchCallbackRecvGen;PROC_METHOD_TABLE[22872072]=this.prototype._getAppSignaturesCallbackRecvGen;PROC_METHOD_TABLE[22872074]=this.prototype._getCallingPackageCallbackRecvGen;PROC_METHOD_TABLE[22872077]=this.prototype._onIntentReceivedRecvGen;PROC_METHOD_TABLE[22872079]=this.prototype._getIsServiceRunningCallbackRecvGen}})}};__ngs._1n={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._6).Proc;var a=__ngs.r_(__ngs._1y).MessageEmitter;var e=null;b.LayoutEmitter=a.singleton({classname:"LayoutEmitter",initialize:function(){var g=__ngs.r_(__ngs._19).ObjectRegistry;g.register(this);this._createSendGen(this.__objectRegistryId)},_layoutChangedRecv:function(h,g){this.setWidthAndHeight(h,g);this.emit({width:h,height:g});this._layoutChangedSendGen(h,g)},$getWidth:function(){return this._width},$getHeight:function(){return this._height},$_setWindow:function(g){e=g},setWidthAndHeight:function(h,g){this._width=h;this._height=g;if(e){e._setWidthAndHeight(h,g)}},_classId:352,_layoutChangedRecvGen:function(k){if((k.length-k.idx)!==2){NgLogE("Could not parse due to wrong argument count in LayoutEmitter.layoutChanged from command: "+k);return false}var h=d.parseInt(k[k.idx++]);if(h===undefined){NgLogE("Could not parse width in LayoutEmitter.layoutChanged from command: "+k);return false}var g=d.parseInt(k[k.idx++]);if(g===undefined){NgLogE("Could not parse height in LayoutEmitter.layoutChanged from command: "+k);return false}return this._layoutChangedRecv(h,g)},$_createSendGen:function(g){d.appendToCommandString(23134207,[+g])},_layoutChangedSendGen:function(h,g){d.appendToCommandString(23068674,this,[+h,+g])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[352]=this._instance||this;PROC_METHOD_TABLE[23068674]=this.prototype._layoutChangedRecvGen}})}};__ngs._1o={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var a=__ngs.r_(__ngs._z).Class;var e=__ngs.r_(__ngs._5).Core;var d=__ngs.r_(__ngs._6).Proc;b.LocalNotification=e.MessageEmitter.singleton({classname:"LocalNotification",initialize:function(){this._callbackIndexCounter=1;this._callbacks=[];e.ObjectRegistry.register(this);this._createSendGen(this.__objectRegistryId)},showLocalNotification:function(g){this._showLocalNotificationSendGen(g)},schedule:function(g,k){if(!(k instanceof Function)){throw new Error("LocalNotification.schedule requires a callback function, given: "+k)}if(!g.delayTime){throw new Error("LocalNotification.schedule requires a delayTime given in options")}if(!g.aps.alert){throw new Error("LocalNotification.schedule requires an aps.alert given in options")}var h=0;if(k){h=this._callbackIndexCounter++;this._callbacks[h]=k}this._scheduleSendGen(h,g)},_scheduleCommandCbRecv:function(h){var k={};if(!this._scheduleCommandCbRecvGen(h,k)){return}var l=k.callbackId;var g=this._callbacks[l];if(!g){NgLogE("_scheduleCommandCbRecv command : No registered callback found, id = "+l);return}delete this._callbacks[l];g(k.id)},cancel:function(g){this._cancelSendGen(g)},cancelAll:function(){this._cancelAllSendGen()},getAllScheduled:function(h){if(!(h instanceof Function)){throw new Error("LocalNotification.getAllScheduled requires a callback function, given: "+h)}var g=0;if(h){g=this._callbackIndexCounter++;this._callbacks[g]=h}this._getAllScheduledSendGen(g)},_getAllScheduledCommandCbRecv:function(h){var k={};if(!this._getAllScheduledCommandCbRecvGen(h,k)){return}var l=k.callbackId;var g=this._callbacks[l];if(!g){NgLogE("LocalNotificaton._getAllScheduledCommandCbRecv command : No registered callback found, id = "+l);return}delete this._callbacks[l];g(k.response)},retrieveLauncherInfo:function(h){if(!(h instanceof Function)){throw new Error("LocalNotification.retrieveLauncherInfo requires a callback function, given: "+h)}var g=0;if(h){g=this._callbackIndexCounter++;this._callbacks[g]=h}this._retrieveLauncherInfoSendGen(g)},_retrieveLauncherInfoCommandCbRecv:function(h){var k={};if(!this._retrieveLauncherInfoCommandCbRecvGen(h,k)){return}var l=k.callbackId;var g=this._callbacks[l];if(!g){NgLogE("LocalNotificaton._retrieveLauncherInfoCommandCbRecv command : No registered callback found, id = "+l);return}delete this._callbacks[l];g(k.response)},_onNotificationEventRecv:function(g){var h={};if(!this._onNotificationEventRecvGen(g,h)){return}this.emit(h.info)},_classId:354,$_createSendGen:function(g){d.appendToCommandString(23265279,[+g])},_destroySendGen:function(){d.appendToCommandString(23199746,this)},_showLocalNotificationSendGen:function(g){d.appendToCommandString(23199747,this,[d.encodeObject(g)])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[354]=this._instance||this}})}};__ngs._1p={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var e=__ngs.r_(__ngs._6).Proc;var b=__ngs.r_(__ngs._19).ObjectRegistry;var a=__ngs.r_(__ngs._z).Class;c.UsageStats=a.singleton({classname:"UsageStats",initialize:function(){this.requests={};this.cbIdCounter=1;b.register(this);this._createSendGen(this.__objectRegistryId)},getData:function(h){var g=this.cbIdCounter++;this.requests[g]=h;this._getDataSendGen(g)},_getDataCbRecv:function(h,k){var g=h&&this.requests[h];if(g){delete this.requests[h];try{g(JSON.parse(k))}catch(l){NgLogE("UsageStats.getData: exception has occured while parsing JSON or executing callback")}}else{NgLogE("UsageStats.getData:: No registered cb found..cbId is :"+h);return}},_classId:356,_getDataCbRecvGen:function(k){if((k.length-k.idx)!==2){NgLogE("Could not parse due to wrong argument count in UsageStats.getDataCb from command: "+k);return false}var h=e.parseInt(k[k.idx++]);if(h===undefined){NgLogE("Could not parse callbackId in UsageStats.getDataCb from command: "+k);return false}var g=e.parseString(k[k.idx++]);if(g===undefined){NgLogE("Could not parse data in UsageStats.getDataCb from command: "+k);return false}return this._getDataCbRecv(h,g)},$_createSendGen:function(g){e.appendToCommandString(23396351,[+g])},_getDataSendGen:function(g){e.appendToCommandString(23330818,this,[+g])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[356]=this._instance||this;PROC_METHOD_TABLE[23330819]=this.prototype._getDataCbRecvGen}})}};__ngs._1q={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var e=__ngs.r_(__ngs._6).Proc;var a=__ngs.r_(__ngs._1y).MessageEmitter;var d="Device.NotificationEmitter";b.NotificationEmitter=a.singleton({classname:"NotificationEmitter",$getPendingNotification:function(){var g=__ngs.r_(__ngs._7).Capabilities;var h=g._getPendingNotification();if(h){h=this._adjustFormat(h)}return h},initialize:function(){this._callbackIndexCounter=1;this._callbacks={};this._payloadKeys={message:true,badge:true,sound:true,collapseKey:true,style:true,iconUrl:true,extras:true};var g=__ngs.r_(__ngs._19).ObjectRegistry;g.register(this);this._createSendGen(this.__objectRegistryId)},scheduleLocal:function(h,g,l){if(typeof l!="function"){throw new Error(d+".scheduleLocal: requires a callback function, given: "+l)}if(!h.message){l({code:-1,description:d+".scheduleLocal: requires payload.message"});return}if(g instanceof Date){g=g.getTime()/1000}var k=this._callbackIndexCounter++;this._callbacks[k]=l;this._scheduleSendGen(h,~~g,k)},_scheduleCbRecv:function(k,h){var g=this._callbacks[h];if(g){delete this._callbacks[h];g(null,k)}else{NgLogE(d+"._scheduleCbRecv command : No registered callback found, id = "+h);return}},cancelScheduled:function(g){this._cancelScheduledSendGen(g)},cancelAllScheduled:function(){this._cancelAllScheduledSendGen()},getAllScheduled:function(h){var g=this._callbackIndexCounter++;this._callbacks[g]=h;this._getAllScheduledSendGen(g)},_getAllScheduledCbRecv:function(h,k){var g=this._callbacks[k];if(g){delete this._callbacks[k];g(h)}else{NgLogE(d+"._getAllScheduledCbRecvGen command : No registered callback found, id = "+k);return}},addListener:function($super,g,h){$super(g,h)},getAppBadgeCount:function(h){var g=this._callbackIndexCounter++;this._callbacks[g]=h;this._getAppBadgeCountSendGen(g)},_getAppBadgeCountCbRecv:function(h,k,l){var g=this._callbacks[l];if(g){delete this._callbacks[l];g(h&&JSON.parse(h),k)}else{NgLogE(d+"._getAppBadgeCountCbRecv command : No registered callback found, id = "+l);return}},setAppBadgeCount:function(g){this._setAppBadgeCountSendGen(g)},_notificationOccurredRecv:function(h){var g=this._adjustFormat(JSON.parse(h));if(!this.chain(g)){this._notificationOccurredSendGen(h)}},_adjustFormat:function(g){if(g.type!=Device.NotificationEmitter.Type.Remote){return g}if(g.message){return this._adjustC2DM(g)}else{if(g.aps){return this._adjustAPN(g)}else{return g}}},_adjustC2DM:function(n){var m={};for(var h in n){var g=n[h];if(h in this._payloadKeys){if(h=="extras"&&typeof g=="string"){var k=g;if(k!==""){try{m[h]=JSON.parse(decodeURIComponent(k))}catch(l){NgLogE('Unable to parse payload "extras" field (expected JSON string): '+l);m[h]=null}}else{m[h]=null}}else{m[h]=g}}}n.payload=m;return n},_adjustAPN:function(m){var l={};m.payload=l;var g=m.x;m.id=g[1];m.senderId=g[2];if(typeof g[3]=="string"&&g[3]!==""){try{l.extras=JSON.parse(g[3])}catch(k){NgLogE("Unable to parse payload json: "+k);l.extras=null}}else{l.extras=null}m.published=g[4];var h=m.aps;l.message=h.alert;l.badge=h.badge;l.sound=h.sound;return m},Type:{Local:0,Remote:1},_classId:366,_scheduleCbRecvGen:function(h){if((h.length-h.idx)!==2){NgLogE("Could not parse due to wrong argument count in NotificationEmitter.scheduleCb from command: "+h);return false}var k=e.parseObject(h[h.idx++]);if(k===undefined){NgLogE("Could not parse notification in NotificationEmitter.scheduleCb from command: "+h);return false}var g=e.parseInt(h[h.idx++]);if(g===undefined){NgLogE("Could not parse callbackId in NotificationEmitter.scheduleCb from command: "+h);return false}return this._scheduleCbRecv(k,g)},_getAllScheduledCbRecvGen:function(k){if((k.length-k.idx)!==2){NgLogE("Could not parse due to wrong argument count in NotificationEmitter.getAllScheduledCb from command: "+k);return false}var g=e.parseObject(k[k.idx++]);if(g===undefined){NgLogE("Could not parse notifications in NotificationEmitter.getAllScheduledCb from command: "+k);return false}var h=e.parseInt(k[k.idx++]);if(h===undefined){NgLogE("Could not parse callbackId in NotificationEmitter.getAllScheduledCb from command: "+k);return false}return this._getAllScheduledCbRecv(g,h)},_getAppBadgeCountCbRecvGen:function(l){if((l.length-l.idx)!==3){NgLogE("Could not parse due to wrong argument count in NotificationEmitter.getAppBadgeCountCb from command: "+l);return false}var g=e.parseString(l[l.idx++]);if(g===undefined){NgLogE("Could not parse error in NotificationEmitter.getAppBadgeCountCb from command: "+l);return false}var h=e.parseInt(l[l.idx++]);if(h===undefined){NgLogE("Could not parse count in NotificationEmitter.getAppBadgeCountCb from command: "+l);return false}var k=e.parseInt(l[l.idx++]);if(k===undefined){NgLogE("Could not parse callbackId in NotificationEmitter.getAppBadgeCountCb from command: "+l);return false}return this._getAppBadgeCountCbRecv(g,h,k)},_notificationOccurredRecvGen:function(g){if((g.length-g.idx)!==1){NgLogE("Could not parse due to wrong argument count in NotificationEmitter.notificationOccurred from command: "+g);return false}var h=e.parseString(g[g.idx++]);if(h===undefined){NgLogE("Could not parse notification in NotificationEmitter.notificationOccurred from command: "+g);return false}return this._notificationOccurredRecv(h)},$_createSendGen:function(g){e.appendToCommandString(24051711,[+g])},_scheduleSendGen:function(k,h,g){e.appendToCommandString(23986178,this,[e.encodeObject(k),+h,+g])},_getAllScheduledSendGen:function(g){e.appendToCommandString(23986180,this,[+g])},_cancelScheduledSendGen:function(g){e.appendToCommandString(23986182,this,[e.encodeString(g)])},_cancelAllScheduledSendGen:function(){e.appendToCommandString(23986183,this)},_getAppBadgeCountSendGen:function(g){e.appendToCommandString(23986184,this,[+g])},_setAppBadgeCountSendGen:function(g){e.appendToCommandString(23986186,this,[+g])},_notificationOccurredSendGen:function(g){e.appendToCommandString(23986187,this,[e.encodeString(g)])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[366]=this._instance||this;PROC_METHOD_TABLE[23986179]=this.prototype._scheduleCbRecvGen;PROC_METHOD_TABLE[23986181]=this.prototype._getAllScheduledCbRecvGen;PROC_METHOD_TABLE[23986185]=this.prototype._getAppBadgeCountCbRecvGen;PROC_METHOD_TABLE[23986187]=this.prototype._notificationOccurredRecvGen}})}};__ngs._1r={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._5).Core;a.Diagnostics=c.DiagnosticEmitter.singleton({classname:"Device_Diagnostics",initialize:function($super){$super("Device")}})}};__ngs._1s={_c:null,_d:function(){var e={exports:{}};var c=e.exports;this._c=e;var b=__ngs.r_(__ngs._z).Class,d=__ngs.r_(__ngs._6d).NgPipe,g=__ngs.r_(__ngs._6e).NgPipesRemote;var a=b.singleton({classname:"Analytics",initialize:function(){if(!this._pipe){this._pipe=new d()}},updateGLEXT:function(){try{var k=__ngs.r_(__ngs._7).Capabilities;var h=k.getOglExtensions();if(h.length>2){var o=[];var r=["GL_IMG_texture_compression_pvrtc","GL_AMD_compressed_ATC_texture","GL_OES_compressed_ETC1_RGB8_texture","GL_AMD_compressed_3DC_texture"];for(var m in r){var q=r[m];for(var l in h){if(h[l]===q){var p={};p[k.getDeviceName()]=q;o.push(p)}}}for(m in o){a.reportGameEvent("openglexts",o[m])}}}catch(n){NgLogException(n)}},enable:function(){this._pipe.enable()},disable:function(){this._pipe.disable()},setUrl:function(h){this._pipe.setRemoteUrl(h)},reportNavigation:function(l,k,h){if(!(l&&k)){return false}this._pipe.uiEvent("NAV",{to:k,fro:l,btnid:h});return true},reportGameEvent:function(h,l,k){if(!h){return false}this._pipe.gameEvent(h,l,k);return true},reportPlayerStateChange:function(h,l,k){if(h){this._pipe.playerEvent(h,"PLSTCHANGE",l,k);return true}else{return false}},reportFunnelStage:function(n,h,k,m){var l={};if(!(n)){return false}if(h!==null&&h!==undefined){l.stage=h}else{return false}if(k){l.stageName=k}this._pipe.funnelEvent(n,l,m);return true},reportSocialEvent:function(l,h,k){if(l&&l.length&&h&&h.length){this._pipe.socialEvent(l,h,k);return true}return false},reportError:function(h){if(!h){return false}this._pipe.gameOpsEvent("ERR",{err:h});return true},addTag:function(k){if(k){var h={tag:k};this._pipe.gameEvent("tag",h);return true}return false},_getPipe:function(){return this._pipe},_setNgPipeSocialAnalytics:function(h){if(this._pipe){this._pipe._setSocialAnalytics(h)}}});c.Analytics=a}};__ngs._1t={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.Color=__ngs.r_(__ngs._6f).Color}};__ngs._1u={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.Vector=__ngs.r_(__ngs._6g).Vector}};__ngs._1v={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.Point=__ngs.r_(__ngs._6h).Point}};__ngs._1w={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.Size=__ngs.r_(__ngs._6i).Size}};__ngs._1x={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.Rect=__ngs.r_(__ngs._6j).Rect}};__ngs._1y={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.MessageEmitter=__ngs.r_(__ngs._6k).MessageEmitter}};__ngs._1z={_c:null,_d:function(){var b={exports:{}};var e=b.exports;this._c=b;var a=__ngs.r_(__ngs._z).Class;var m=__ngs.r_(__ngs._7).Capabilities;var n=__ngs.r_(__ngs._6).Proc;var d=__ngs.r_(__ngs._19).ObjectRegistry;var k={};var l=0;k.add=function(o){if(typeof o!="function"){return undefined}this[++l]=o;return l};var g=typeof $_GETENGINEENV!=="undefined"?$_GETENGINEENV():undefined;var c=(typeof g=="object"&&g.useCoreTimeout);var h=a.singleton({classname:"Time",mFrameTime:0,mFrameDelta:0,initialize:function(){d.register(this);if(m.meetsBinaryVersion("1.8")){this._createSendGen(this.__objectRegistryId)}var q=__ngs.r_(__ngs._12).MessageListener;var p=__ngs.r_(__ngs._18).LifecycleEmitter;var o=q.subclass({initialize:function(r){p.addListener(this,this.onLifecycleUpdate);this.mTime=r},onLifecycleUpdate:function(r){switch(r){case p.Event.Resume:this.mTime.mFrameTime=0;break}}});this.mLifeListener=new o(this);if(c){NGSetTimeoutInternal=this.setTimeout.bind(this);NGSetIntervalInternal=this.setInterval.bind(this);NGClearTimeoutInternal=this.clearTimeout.bind(this);NGClearIntervalInternal=this.clearInterval.bind(this)}else{this.setTimeout=setTimeout;this.setInterval=setInterval;this.clearTimeout=clearTimeout;this.clearInterval=clearInterval}},getFrameTime:function(){return this.mFrameTime},getFrameDelta:function(){return this.mFrameDelta},getRealTime:function(){return(new Date()).getTime()},$_frameTimeRecv:function(o){this.mFrameDelta=this.mFrameTime?o-this.mFrameTime:1;this.mFrameTime=o;if(this._updateEmitter){this._updateEmitter.emit(this.mFrameDelta)}},setTimeout:function(p,q){var o=k.add(p);if(o){this._setTimeoutSendGen(o,q)}return o},setInterval:function(q,o){var p=k.add(q);if(p){this._setIntervalSendGen(p,o)}return p},clearTimeout:function(o){delete k[o];this._clearSendGen(o)},clearInterval:function(o){delete k[o];this._clearSendGen(o)},_fireTimerRecv:function(q,p){var o=q&&k[q];if(p){delete k[q]}o?o():console.log("Could not find closure for "+q)},_classId:351,$_frameTimeRecvGen:function(o){if((o.length-o.idx)!==1){NgLogE("Could not parse due to wrong argument count in Time.frameTime from command: "+o);return false}var p=n.parseInt(o[o.idx++]);if(p===undefined){NgLogE("Could not parse time in Time.frameTime from command: "+o);return false}return this._frameTimeRecv(p)},_fireTimerRecvGen:function(q){if((q.length-q.idx)!==2){NgLogE("Could not parse due to wrong argument count in Time.fireTimer from command: "+q);return false}var p=n.parseInt(q[q.idx++]);if(p===undefined){NgLogE("Could not parse cbId in Time.fireTimer from command: "+q);return false}var o=n.parseBool(q[q.idx++]);if(o===undefined){NgLogE("Could not parse remove in Time.fireTimer from command: "+q);return false}return this._fireTimerRecv(p,o)},$_createSendGen:function(o){n.appendToCommandString(23068670,[+o])},_setTimeoutSendGen:function(o,p){n.appendToCommandString(23003139,this,[+o,+p])},_setIntervalSendGen:function(p,o){n.appendToCommandString(23003140,this,[+p,+o])},_clearSendGen:function(o){n.appendToCommandString(23003141,this,[+o])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[351]=this._instance||this;PROC_METHOD_TABLE[23068671]=this.prototype._frameTimeRecvGen;PROC_METHOD_TABLE[23003142]=this.prototype._fireTimerRecvGen}});e.Time=h}};__ngs._20={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._6l);a.SHA1={b64_hmac_sha1:c.b64_hmac_sha1,hex_sha1:c.hex_sha1,b64_sha1:c.b64_sha1}}};__ngs._21={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var a=__ngs.r_(__ngs._1y).MessageEmitter;var b=__ngs.r_(__ngs._19).ObjectRegistry;var g=__ngs.r_(__ngs._6).Proc;var e=__ngs.r_(__ngs._1z).Time;c.UpdateEmitter=a.singleton({classname:"UpdateEmitter",initialize:function(){Core.ObjectRegistry.register(this);e.getFrameDelta();e._updateEmitter=this;this._createSendGen(this.__objectRegistryId);if(!Core.Capabilities.meetsBinaryVersion("1.8")){this._setListenerCountSendGen=function(){}}this._setListenerCountSendGen(0)},setTickRate:function(h){this._setTickRateSendGen(h)},addListener:function($super,l,k,h){$super(l,k,h);this._setListenerCountSendGen(this.getListenerCount())},removeListener:function($super,h){$super(h);this._setListenerCountSendGen(this.getListenerCount())},_classId:304,$_createSendGen:function(h){g.appendToCommandString(19988479,[+h])},_setTickRateSendGen:function(h){g.appendToCommandString(19922946,this,[+h])},_setListenerCountSendGen:function(h){g.appendToCommandString(19922947,this,[+h])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[304]=this._instance||this}})}};__ngs._22={_c:null,_d:function(){var b={exports:{}};var d=b.exports;this._c=b;var a=__ngs.r_(__ngs._z).Class;var n=__ngs.r_(__ngs._6).Proc;var c=__ngs.r_(__ngs._19).ObjectRegistry;var l=__ngs.r_(__ngs._7).Capabilities;var h=__ngs.r_(__ngs._1z).Time;var k=__ngs.r_(__ngs._1a).toMD5;var m=__ngs.r_(__ngs._14).Util;var g=__ngs.r_(__ngs._10).Base64;var e=d._LocalGameList=a.singleton({classname:"_LocalGameList",initialize:function(){c.register(this);this._createSendGen(this.__objectRegistryId);this.mGameList=[];var o=__ngs.r_(__ngs._a).Storage;this.mFile=o.FileSystem;this.mGameStore=o.KeyValueCache.global("Core.GameList");this.mLoadingGames={};this.mActiveGameKey="activeGames";this.mRequiredAvailableSpace=0;this.mSpaceAvailable=0;this.mSpaceFreeCallbacks=[];this._firstBootGameLaunch=true;this._getRepoSpaceSendGen();this._setStage(this.ProgressStage.BootFirst);this._reloadGameList();this._allowDeterminateProgress=true},ProgressStage:{BootFirst:{boot:[-1,0],progressBar:[0,0.25]},CheckConfiguration:{boot:[-1,0],progressBar:[0.25,0.25]},CheckManifest:{boot:[-1,0],progressBar:[0.25,0.25]},DownloadFiles:{boot:[0.1,0.9],progressBar:[0.25,0.75]},Launching:{boot:[-1,0],progressBar:[0.75,1]}},_setStage:function(o){this._progressStage=o;if(typeof o=="object"){this._progressMin=this._progressStage[this._hasProgressBar?"progressBar":"boot"][0];this._progressRange=this._progressStage[this._hasProgressBar?"progressBar":"boot"][1]}else{this._progressMin=-1;this._progressRange=0}console.log("min:",this._progressMin,"range:",this._progressRange);this._setProgress(0)},_nextStage:function(){switch(this._progressStage){case this.ProgressStage.BootFirst:this._setStage(this.ProgressStage.CheckConfiguration);break;case this.ProgressStage.CheckConfiguration:this._setStage(this.ProgressStage.CheckManifest);break;case this.ProgressStage.CheckManifest:this._setStage(this.ProgressStage.DownloadFiles);break;case this.ProgressStage.DownloadFiles:this._setStage(this.ProgressStage.Launching);break}},_classId:303,_updateGameRecvGen:function(p){if((p.length-p.idx)!==2){NgLogE("Could not parse due to wrong argument count in _LocalGameList.updateGame from command: "+p);return false}var o=n.parseString(p[p.idx++]);if(o===undefined){NgLogE("Could not parse url in _LocalGameList.updateGame from command: "+p);return false}var q=n.parseInt(p[p.idx++]);if(q===undefined){NgLogE("Could not parse id in _LocalGameList.updateGame from command: "+p);return false}return this._updateGameRecv(o,q)},_repoSpaceRecvGen:function(p){if((p.length-p.idx)!==1){NgLogE("Could not parse due to wrong argument count in _LocalGameList.repoSpace from command: "+p);return false}var o=n.parseInt(p[p.idx++]);if(o===undefined){NgLogE("Could not parse space in _LocalGameList.repoSpace from command: "+p);return false}return this._repoSpaceRecv(o)},_deleteGameRecvGen:function(p){if((p.length-p.idx)!==2){NgLogE("Could not parse due to wrong argument count in _LocalGameList.deleteGame from command: "+p);return false}var q=n.parseString(p[p.idx++]);if(q===undefined){NgLogE("Could not parse mdFive in _LocalGameList.deleteGame from command: "+p);return false}var o=n.parseString(p[p.idx++]);if(o===undefined){NgLogE("Could not parse game in _LocalGameList.deleteGame from command: "+p);return false}return this._deleteGameRecv(q,o)},_pauseUpdateRecvGen:function(p){if((p.length-p.idx)!==1){NgLogE("Could not parse due to wrong argument count in _LocalGameList.pauseUpdate from command: "+p);return false}var o=n.parseString(p[p.idx++]);if(o===undefined){NgLogE("Could not parse url in _LocalGameList.pauseUpdate from command: "+p);return false}return this._pauseUpdateRecv(o)},_resumeUpdateRecvGen:function(p){if((p.length-p.idx)!==1){NgLogE("Could not parse due to wrong argument count in _LocalGameList.resumeUpdate from command: "+p);return false}var o=n.parseString(p[p.idx++]);if(o===undefined){NgLogE("Could not parse url in _LocalGameList.resumeUpdate from command: "+p);return false}return this._resumeUpdateRecv(o)},_cancelUpdateRecvGen:function(p){if((p.length-p.idx)!==1){NgLogE("Could not parse due to wrong argument count in _LocalGameList.cancelUpdate from command: "+p);return false}var o=n.parseString(p[p.idx++]);if(o===undefined){NgLogE("Could not parse url in _LocalGameList.cancelUpdate from command: "+p);return false}return this._cancelUpdateRecv(o)},_allowBGUpdatesRecvGen:function(p){if((p.length-p.idx)!==1){NgLogE("Could not parse due to wrong argument count in _LocalGameList.allowBGUpdates from command: "+p);return false}var o=n.parseBool(p[p.idx++]);if(o===undefined){NgLogE("Could not parse allow in _LocalGameList.allowBGUpdates from command: "+p);return false}return this._allowBGUpdatesRecv(o)},_runGameRecvGen:function(p){if((p.length-p.idx)!==1){NgLogE("Could not parse due to wrong argument count in _LocalGameList.runGame from command: "+p);return false}var o=n.parseString(p[p.idx++]);if(o===undefined){NgLogE("Could not parse url in _LocalGameList.runGame from command: "+p);return false}return this._runGameRecv(o)},_finishGameRecvGen:function(o){if((o.length-o.idx)!==0){NgLogE("Could not parse due to wrong argument count in _LocalGameList.finishGame from command: "+o);return false}return this._finishGameRecv()},_exceptionForwardedRecvGen:function(o){if((o.length-o.idx)!==1){NgLogE("Could not parse due to wrong argument count in _LocalGameList.exceptionForwarded from command: "+o);return false}var p=n.parseString(o[o.idx++]);if(p===undefined){NgLogE("Could not parse exceptionString in _LocalGameList.exceptionForwarded from command: "+o);return false}return this._exceptionForwardedRecv(p)},_setHasCustomProgressBarRecvGen:function(p){if((p.length-p.idx)!==1){NgLogE("Could not parse due to wrong argument count in _LocalGameList.setHasCustomProgressBar from command: "+p);return false}var o=n.parseBool(p[p.idx++]);if(o===undefined){NgLogE("Could not parse hasProgressBar in _LocalGameList.setHasCustomProgressBar from command: "+p);return false}return this._setHasCustomProgressBarRecv(o)},$_gameUnbundledRecvGen:function(o){if((o.length-o.idx)!==0){NgLogE("Could not parse due to wrong argument count in _LocalGameList.gameUnbundled from command: "+o);return false}return this._gameUnbundledRecv()},$_createSendGen:function(o){n.appendToCommandString(19922943,[+o])},_updateDoneSendGen:function(p,o){n.appendToCommandString(19857411,this,[+p,n.encodeString(o)])},_getRepoSpaceSendGen:function(){n.appendToCommandString(19857412,this)},_setUpdateProgressSendGen:function(o){n.appendToCommandString(19857415,this,[+o])},_updateProgressSendGen:function(p,r,q,o){n.appendToCommandString(19857419,this,[n.encodeString(p),+r,+q,(o?1:0)])},_setProgressTextSendGen:function(o){n.appendToCommandString(19857423,this,[n.encodeString(o)])},_setSplashVisibleSendGen:function(o){n.appendToCommandString(19857424,this,[(o?1:0)])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[303]=this._instance||this;PROC_METHOD_TABLE[19857410]=this.prototype._updateGameRecvGen;PROC_METHOD_TABLE[19857413]=this.prototype._repoSpaceRecvGen;PROC_METHOD_TABLE[19857414]=this.prototype._deleteGameRecvGen;PROC_METHOD_TABLE[19857416]=this.prototype._pauseUpdateRecvGen;PROC_METHOD_TABLE[19857417]=this.prototype._resumeUpdateRecvGen;PROC_METHOD_TABLE[19857418]=this.prototype._cancelUpdateRecvGen;PROC_METHOD_TABLE[19857420]=this.prototype._allowBGUpdatesRecvGen;PROC_METHOD_TABLE[19857421]=this.prototype._runGameRecvGen;PROC_METHOD_TABLE[19857422]=this.prototype._finishGameRecvGen;PROC_METHOD_TABLE[19857425]=this.prototype._exceptionForwardedRecvGen;PROC_METHOD_TABLE[19857426]=this.prototype._setHasCustomProgressBarRecvGen;PROC_METHOD_TABLE[19922925]=this.prototype._gameUnbundledRecvGen},_updateGameRecv:function(o,p){this._getRepoSpaceSendGen();if(o in this.mLoadingGames){this.mLoadingGames[o].id=p;this.mLoadingGames[o].dlman.resume()}else{this.updateGame(o,p,(function(q,s,r){p=this.mLoadingGames[q].id;this._updateDoneSendGen(p,r||"")}).bind(this,o))}},mobageRunGame:function(o){this._gameRunner=o},_runGameRecv:function(o){if(this._gameRunner){console.log("_LGL running gameRunner "+o);this._gameRunner(o)}else{console.log("_LGL running game "+o);var p=__ngs.r_(__ngs._16)._int_LGL;p.launch(o,p.ProcID.Game)}},setFinishGameHandler:function(o){this._finishGameHandler=o},_finishGameRecv:function(){if(this._finishGameHandler){this._finishGameHandler()}else{console.log("_LocalGameList: finishGameHandler is not set")}},_repoSpaceRecv:function(p){this.mSpaceAvailable=p;console.log("SD card space available(b): "+this.mSpaceAvailable);for(var o=0;o<this.mSpaceFreeCallbacks.length;o++){(this.mSpaceFreeCallbacks[o])()}this.mSpaceFreeCallbacks.length=0},_deleteGameRecv:function(q,p){if(!p.match("http://games.mobage.com")){NgLogD("Deleting "+q);this.deleteGameFiles(q);var o=(function(){NgLogD("Finished deleting game from "+this.mActiveGameKey+" for "+q)}).bind(this);this._deleteGameFromStorage(q,o)}else{NgLogE("_LocalGameList unauthorized call to deleteGame from "+obj.game+"!")}},_deleteGameFromStorage:function(q,o){var p=this;this.mGameStore.getItem(this.mActiveGameKey,{},function(s,w){var v=JSON.parse(w);var t=false;var u;var r=[];for(u=0;u<v.length;++u){if(v[u].name==q){t=true}else{r.push(v[u])}}if(t){NgLogD("_LocalGameList found and removed "+q);p.mGameStore.setItem(p.mActiveGameKey,JSON.stringify(r),{blocking:true},o)}else{NgLogD("_LocalGameList failed to find and remove "+q);o("Could not remove item: "+s)}},true)},getGameConfig:function(p,o,s){if(typeof o=="function"){s=o;o=false}var r;if(o){r=p}else{var t=__ngs.r_(__ngs._14).Util;var q=t.NormalizeUrl(p);r=k(q)}NgLogT("@@@ _LocalGameList.getGameConfig readFile +");this.mFile.readFile(r+"/"+l._getConfigFile(),{},function(w,v){NgLogT("@@@ _LocalGameList.getGameConfig readFile -");var u={};if(w||!v){console.log("Could not get config from %s! err: %s",p,w)}else{u=JSON.parse(v)}s(u)})},getRepoSpace:function(){return this.mSpaceAvailable},getConfig:function(u,p,t,s){var q=__ngs.r_(__ngs._13).XHR;var r=__ngs.r_(__ngs._14).Util;var o=0;r.OperationWithRetries(function(v){var w=new q();w.onreadystatechange=function(){if(w.readyState==4){o=w.status;if(o==200){t(w.responseText)}else{if(o==404){console.log("no configuration file found at %s, using root server",u+p);t("{}")}else{v()}}}};w.setRequestHeader("X-Distribution",l.getDistributionName());w.open("GET",u+p+r.getCacheBustingString(),true);w.send()},function(){t(null,true,o)},s)},updateGame:function(x,q,r,v,z){var E=new RegExp(".*"+l.getBootGame());var w=x.match(E);if(w){this._firstBootGameLaunch=false}var C=__ngs.r_(__ngs._14).Util;x=C.NormalizeUrl(x);var p=C.GetMD5HashDirectoryFromUrl(x);this.mLoadingGames[x]={id:q};NgLogI("_LocalGameList.updateGame(): url = "+x+" name = "+p);var t={Android:"android","iPhone OS":"ios",flash:""};var u=__ngs.r_(__ngs._7).Capabilities;var D="/"+t[u.getPlatformOS()];this._setStage(this.ProgressStage.CheckConfiguration);var y="";var s=p+"/"+u._getConfigFile();this.mFile.readFile(s,{},function(F,G){if(G){var H=JSON.parse(G);y=H.contentUrl}});var B;var A=p+"/webgame.ngmanifest";this.mFile.readFile(A,{},function(F,G){B=false;if(G){try{var I=JSON.parse(G);console.log("note: Game manifest on disk is parseable. Just FYI.");B=true}catch(H){console.log("note: Could not parse game manifest on disk. Just FYI.");NgLogException(H)}}});var o=x+D+"/"+u._getConfigFile();NgLogI("_LocalGameList.updateGame(): downloading configuration.json, url = "+o);this.getConfig(x+D,"/"+u._getConfigFile(),(function(H,G,F){if(G){NgLogI("_LocalGameList.updateGame(): ERROR downloading configuration.json, url = "+o);this._setStage(-1);r(0,G);delete this.mLoadingGames[x]}else{var I=JSON.parse(H);if(!I.contentUrl){I.contentUrl=x+D}else{if(I.contentUrl==y&&B){NgLogI("_LocalGameList.updateGame(): Game is up to date! url = "+o);this._setStage(this.ProgressStage.Launching);this.mFile.writeFile(s,JSON.stringify(I),{},(function(J){if(J){NgLogE("gameUpdate failed to write config:"+J)}r(0,J);delete this.mLoadingGames[x]}).bind(this));return}}NgLogI("_LocalGameList.updateGame(): Downloading game! url = "+o);this._setStage(this.ProgressStage.CheckManifest);this._callDownloadManifest(I,x,p,v,z,(function(J,K){NgLogI("_LocalGameList.updateGame(): Finished Downloading game! url = "+o);if(!K){var L=this;this._reloadGameList({name:p,url:x},function(){if(r&&(typeof r=="function")){r(J,K);delete L.mLoadingGames[x]}})}else{r(J,K);delete this.mLoadingGames[x]}}).bind(this))}}).bind(this),v)},_allowBGUpdatesRecv:function(o){this._pauseOrResumeAll(o)},_pauseOrResumeAll:function(p){for(var o in this.mLoadingGames){if(p){console.log("Resuming download of "+o);this.resumeUpdate(o)}else{console.log("Pausing download of "+o);this.pauseUpdate(o)}}},pauseUpdate:function(o){if(this.mLoadingGames[o]){if(this.mLoadingGames[o].dlman){this.mLoadingGames[o].dlman.pause();this.mLoadingGames[o].userPause=true}}},_pauseUpdateRecv:function(o){this.pauseUpdate(o)},resumeUpdate:function(o){if(this.mLoadingGames[o]){if(this.mLoadingGames[o].dlman){this.mLoadingGames[o].dlman.resume();this.mLoadingGames[o].userPause=false}}},_resumeUpdateRecv:function(o){this.resumeUpdate(o)},cancelUpdate:function(p){if(this.mLoadingGames[p]){if(this.mLoadingGames[p].dlman){this.mLoadingGames[p].dlman.abort()}delete this.mLoadingGames[p];var o=__ngs.r_(__ngs._18).LifecycleEmitter;o.cancelEngineKeepAlive(e.classname+name)}},_cancelUpdateRecv:function(o){this.cancelUpdate(o)},_setProgress:function(o){if(o>1){o=1}if(o<0){o=-1}this._progress=o;if(o>=0&&this._allowDeterminateProgress){this._setUpdateProgressSendGen(this._progressMin+o*this._progressRange)}else{this._setUpdateProgressSendGen(-1)}},_setAllowDeterminateProgress:function(o){this._allowDeterminateProgress=o;this._setProgress(this._progress)},listenToProgress:function(o){this._privListener=o},_updateProgress:function(o,r,q,p){if(this._privListener){this._privListener(o,r,q,p)}if(this.mLoadingGames[o]&&this.mLoadingGames[o].id>=0){this._updateProgressSendGen(o,r,q,p)}},_callDownloadManifest:function(r,v,p,t,w,q){var s=r.contentUrl;var u=0;var y=this;var z=__ngs.r_(__ngs._2).DownloadManifest;var x=__ngs.r_(__ngs._16)._int_LGL.getManifestName(r);(function o(){var B=new z();B.mLocalGameList=y;var C=true;var A=__ngs.r_(__ngs._18).LifecycleEmitter;A.requestEngineKeepAlive(e.classname+p);r.omitJsUpdate=r.omitJsUpdate&&(l.getPlatformOS()=="iPhone OS");B._setConfig(r);B.start(s,p,{"webgame.ngmanifest":x},function(D,E){if(C){C=false;y._setStage(D<E?y.ProgressStage.DownloadFiles:y.ProgressStage.Launching);u=E}else{y._setProgress(D/E)}y._updateProgress(v,D,E)},function(E,F,D){A.cancelEngineKeepAlive(e.classname+p);if(w){if(q){q(u,E)}}else{if(E){NgLogE("Error: "+E);y._updateProgress(v,0,0,E);q(0,E)}else{if(q){q(u)}}}},false,t);if(y.mLoadingGames[v]){y.mLoadingGames[v].dlman=B}})()},freeSpace:function(p,o){this.mRequiredAvailableSpace=p;this.mSpaceFreeCallbacks.push((function(){if(this.mRequiredAvailableSpace>this.mSpaceAvailable){if(this._privListener){this._privListener("",0,0,"SD card is full")}else{console.log("Warning!! Mobage is not handling SD card full error!");var q=function(){if(this.mRequiredAvailableSpace>this.mSpaceAvailable){this.pruneGames(1);this.mSpaceFreeCallbacks.push(q)}else{o()}};q()}}else{o()}}).bind(this));this._getRepoSpaceSendGen()},pruneGames:function(q){var o=this;var p=function(s,t){return t.lastRun-s.lastRun};this.mGameStore.getItem(this.mActiveGameKey,{},function(s,u){var t=JSON.parse(u);t.sort(p);while(q--&&(t.length-1)){var r=t.pop();if(!(r.name in o.mLoadingGames)){o.deleteGameFiles(r.name)}else{t.push(r)}}o.mGameStore.setItem(o.mActiveGameKey,JSON.stringify(t),{})},true)},deleteGame:function(o,q){var s=__ngs.r_(__ngs._14).Util;var p=s.NormalizeUrl(o);var r=k(p);this.deleteGameFiles(r);this._deleteGameFromStorage(r,q)},deleteGameKeyValue:function(p){var o=__ngs.r_(__ngs._a).KeyValueCache;o.global(p).clear({})},deleteGameFiles:function(p){var o=this;o.mFile.deleteFile(p,{},function(q){if(q===""){NgLogI("Deleted")}else{NgLogD("Could not delete game")}o._getRepoSpaceSendGen()})},getGameList:function(){return this.mGameList},clearWatch:function(){var o=__ngs.r_(__ngs._d).FileSystem;o.deleteFile(".watch",{})},_reloadGameList:function(p,o){this.mGameStore.getItem(this.mActiveGameKey,{},(function(q,u){var t;if(u){t=JSON.parse(u)}else{t=[]}if(p){var s=true;for(var r in t){if(t[r].name==p.name){s=false;p.lastRun=t[r].lastRun;t[r]=p;break}}if(s){t.push(p)}this.mGameStore.setItem(this.mActiveGameKey,JSON.stringify(t),{})}this.mGameList=t;if(typeof o=="function"){o()}}).bind(this),true)},_getRunningGame:function(p){var o=function(q,s){return s.lastRun-q.lastRun};this._reloadGameList(false,(function(r){var t=this.mGameList;t.sort(o);var u=null;var q=t.length;for(var s=0;s<q;++s){if(t[s].lastRun){u=t[s];break}}if(u&&u.url){r(u.url)}}).bind(this,p))},_pausingGame:function(){this._pauseOrResumeAll(true)},_resumingGame:function(){this._getRunningGame((function(o){this.getGameConfig(o,(function(p){if(p.noBackgroundUpdates){this._pauseOrResumeAll(false)}}).bind(this))}).bind(this))},setSplashVisible:function(o){this._setSplashVisibleSendGen(o)},setProgressText:function(o){this._progressText=o;this._setProgressTextSendGen(o)},updateAvailable:function(p,o,q){var r=__ngs.r_(__ngs._16)._int_LGL;r.updateAvailable(p,o,q)},setExceptionHandler:function(o){this._exceptionHandler=o},_exceptionForwardedRecv:function(q){var o={};try{o=JSON.parse(q)}catch(p){console.log("ERROR: Unparseable exception: "+q)}if(this._exceptionHandler){this._exceptionHandler(o)}},_setHasCustomProgressBarRecv:function(o){this._hasProgressBar=o},registerUnbundleListener:function(o){if(this.unbundled){o()}else{this.unbundleListener=o}},$_gameUnbundledRecv:function(){this.unbundled=true;if(this.unbundleListener){this.unbundleListener()}}})}};__ngs._23={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var b;a.NativeAppLaunch=b}};__ngs._24={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._25).DiagnosticEmitter;var a=__ngs.r_(__ngs._19).ObjectRegistry;b.Diagnostics=d.singleton({classname:"Core_Diagnostics",initialize:function($super){$super("Core")}})}};__ngs._25={_c:null,_d:function(){var c={exports:{}};var e=c.exports;this._c=c;var k=__ngs.r_(__ngs._1y).MessageEmitter;var h=__ngs.r_(__ngs._12).MessageListener;var l=__ngs.r_(__ngs._6).Proc;var b=__ngs.r_(__ngs._z).Class;var g=__ngs.r_(__ngs._10).Base64;var d=__ngs.r_(__ngs._19).ObjectRegistry;var a=e.DiagnosticEmitter=k.subclass({classname:"DiagnosticEmitter",initialize:function(m){this.name=m;this.reset();this.listeners=0;this.native_listeners=0;this.collectors=[];this.native_collector=false;this.dirty=false;d.register(this);this._createSendGen(this.__objectRegistryId,m);e.DiagnosticRegistry.registerEmitter(this.name,this)},destroy:function(){e.DiagnosticRegistry.deregisterEmitter(this.name,this);k.prototype.destroy.apply(this);this._destroySendGen();d.unregister(this)},setInterval:function(m){if(m<=0){NgLogE("DiagnosticEmitter "+this.name+": attempt to set invalid interval "+m);return false}this._set_interval(m);return true},pushCollector:function(m){if(m&&!(m instanceof Function)){NgLogE("DiagnosticEmitter "+this.name+": attempt to set invalid collector")}this.collectors.push(m);if(this.getListenerCount()>0){this.update(m(0))}},removeCollector:function(n){for(var m=0;m<this.collectors.length;m++){if(this.collectors[m]==n){this.collectors.splice(m,1);return}}},reset:function(m){this.diags={name:this.name};if(m){this.update(m)}},update:function(n){if(n){this.dirty=true;for(var m in n){if(n.hasOwnProperty(m)){this.diags[m]=n[m]}}}},push:function(){this.emit(this.diags)},pushUpdate:function(m){this.update(m);this.push()},getDiags:function(){return this.diags},curryProducer:function(o,m){var n=this;return function(){if(n.listeners>0){var p=m.apply(o,arguments);n.update(p)}}},$startEvent:function(m){this._startEventSendGen(m,new Date().getTime())},$stopEvent:function(m){this._stopEventSendGen(m,new Date().getTime())},_classId:362,_updateDiagnosticsRecvGen:function(n){if((n.length-n.idx)!==1){NgLogE("Could not parse due to wrong argument count in DiagnosticEmitter.updateDiagnostics from command: "+n);return false}var m=l.parseObject(n[n.idx++]);if(m===undefined){NgLogE("Could not parse jsonData in DiagnosticEmitter.updateDiagnostics from command: "+n);return false}return this._updateDiagnosticsRecv(m)},_nativeCollectorRecvGen:function(n){if((n.length-n.idx)!==1){NgLogE("Could not parse due to wrong argument count in DiagnosticEmitter.nativeCollector from command: "+n);return false}var m=l.parseBool(n[n.idx++]);if(m===undefined){NgLogE("Could not parse exists in DiagnosticEmitter.nativeCollector from command: "+n);return false}return this._nativeCollectorRecv(m)},_nativeListenersRecvGen:function(n){if((n.length-n.idx)!==1){NgLogE("Could not parse due to wrong argument count in DiagnosticEmitter.nativeListeners from command: "+n);return false}var m=l.parseInt(n[n.idx++]);if(m===undefined){NgLogE("Could not parse num in DiagnosticEmitter.nativeListeners from command: "+n);return false}return this._nativeListenersRecv(m)},_tickRecvGen:function(m){if((m.length-m.idx)!==0){NgLogE("Could not parse due to wrong argument count in DiagnosticEmitter.tick from command: "+m);return false}return this._tickRecv()},$_sendStartTimesRecvGen:function(m){if((m.length-m.idx)!==1){NgLogE("Could not parse due to wrong argument count in DiagnosticEmitter.sendStartTimes from command: "+m);return false}var n=l.parseString(m[m.idx++]);if(n===undefined){NgLogE("Could not parse times in DiagnosticEmitter.sendStartTimes from command: "+m);return false}return this._sendStartTimesRecv(n)},$_createSendGen:function(m,n){l.appendToCommandString(23789567,[+m,l.encodeString(n)])},_destroySendGen:function(){l.appendToCommandString(23724034,this)},_currentListenersSendGen:function(m){l.appendToCommandString(23724035,this,[+m])},_collectNativeSendGen:function(m){l.appendToCommandString(23724038,this,[+m])},__runTestsSendGen:function(m){l.appendToCommandString(23724039,this,[l.encodeString(m)])},_setCurrentStateSendGen:function(m){l.appendToCommandString(23724041,this,[l.encodeObject(m)])},$_startEventSendGen:function(m,n){l.appendToCommandString(23789557,[l.encodeString(m),+n])},$_stopEventSendGen:function(m,n){l.appendToCommandString(23789556,[l.encodeString(m),+n])},__set_intervalSendGen:function(m){l.appendToCommandString(23724045,this,[+m])},$_getStartTimesSendGen:function(){l.appendToCommandString(23789554)},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[362]=this._instance||this;PROC_METHOD_TABLE[23724036]=this.prototype._updateDiagnosticsRecvGen;PROC_METHOD_TABLE[23724037]=this.prototype._nativeCollectorRecvGen;PROC_METHOD_TABLE[23724040]=this.prototype._nativeListenersRecvGen;PROC_METHOD_TABLE[23724042]=this.prototype._tickRecvGen;PROC_METHOD_TABLE[23789553]=this.prototype._sendStartTimesRecvGen},_set_interval:function(m){this.__set_intervalSendGen(m)},addListener:function(o,n,m){k.prototype.addListener.apply(this,[o,n,m]);this.listeners=k.prototype.getListenerCount.apply(this);this.sendCurrentListeners(this.listeners)},removeListener:function(m){k.prototype.removeListener.apply(this,[m]);this.listeners=k.prototype.getListenerCount.apply(this);this.sendCurrentListeners(this.listeners)},getListenerCount:function(){return this.listeners+this.native_listeners},sendCurrentListeners:function(m){this._currentListenersSendGen(m)},_updateDiagnosticsRecv:function(m){this.update(m)},_nativeCollectorRecv:function(m){this.native_collector=m},collectNative:function(m){this._collectNativeSendGen(m)},_nativeListenersRecv:function(m){this.native_listeners=m},$getStartTimes:function(m){this.stCallback=m;this._getStartTimesSendGen()},$_sendStartTimesRecv:function(q){if(this.stCallback){var p=JSON.parse(q);var m={};for(var n in p){var o=p[n];m[o.name+(o.isStart?"-start":"-finish")]={time:o.time,resMem:o.resMem}}this.stCallback({startup:m})}},setCurrentState:function(m){this._setCurrentStateSendGen(m)},_tickRecv:function(){if(this.getListenerCount()===0){return}for(var n=0;n<this.collectors.length;n++){var m=this.collectors[n];this.update(m(this.last))}if(this.dirty){this.dirty=false;this.emit(this.diags);this.setCurrentState(this.diags)}},_runTests:function(m){this.__runTestsSendGen(m)}});e.DiagnosticRegistry=b.singleton({classname:"DiagnosticRegistry",initialize:function(){d.register(this);this.registry={}},findEmitter:function(m){return this.registry[m]},createEmitter:function(m){var n=this.findEmitter(m);if(!n){n=new e.DiagnosticEmitter(m)}return n},listEmitters:function(){var n=[];for(var m in this.registry){n.push(m)}return n},registerEmitter:function(m,n){if(this.registry[m]){NgLogE("Duplicate registration of diagnostic emitter "+m);return false}this.registry[m]=n;return true},deregisterEmitter:function(m,n){if(this.registry[m]!=n){NgLogE("Non-registered deregistration attempt of diagnostic emitter "+m);return false}this.registry[m]=undefined;return true}})}};__ngs._26={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.Buffer=__ngs.r_(__ngs._6m).Buffer}};__ngs._27={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.UTF8=__ngs.r_(__ngs._6n).UTF8}};__ngs._28={_c:null,_d:function(){var g={exports:{}};var L=g.exports;this._c=g;var N=function(O){return typeof O==="number"&&O===O};var v=function(O){return typeof O==="number"&&((O%1)===0)};var q=function(O){return typeof O==="string"};var w=function(O){return typeof O==="function"};var J=function(O){return typeof O==="boolean"};var z=function(O){return typeof O==="undefined"};var K=function(O){return true};var x=function(O){return function(P){return P instanceof O}};var t={number:N,integer:v,string:q,"function":w,"boolean":J,"undefined":z,any:K};var s=function(O){if(O instanceof Array){return"["+O+"]"}else{if(typeof O==="string"){return"'"+O+"'"}else{if(typeof O==="function"){return"function"}else{return O}}}};var I=function(P,O,Q){this.type=P;this.check=O;this.verify=Q};I.prototype.toString=function(){return"#TypeDef("+s(this.type)+")"};var o=function(O){var P;if(typeof O==="string"){P=t[O];if(P===undefined){throw new TypeError("Unknown type '"+O+"'")}}else{if(typeof O==="function"){P=x(O)}}return P};var p=function(O,P){var Q=o(O);return new I(O,C(Q,false),P)};var A=function(O,P){var Q=o(O);return new I(O,C(Q,true),P)};var B=function(O,P){var Q=o(O);return new I(O,E(Q,0,false),P)};var d=function(O,P){var Q=o(O);return new I(O,E(Q,0,true),P)};var n=function(O,P){var Q=o(O);return new I(O,E(Q,1,false),P)};var m=function(O,P){var Q=o(O);return new I(O,E(Q,1,true),P)};var c=function(P){this.typeDefs=P;var O=P[P.length-1];if(typeof O==="function"){this.typeDefs=P.slice(0,-1);this.verify=O}else{this.typeDefs=P}};c.prototype.toString=function(){return"#TypeUnion("+this.typeDefs.join(", ")+")"};var b=function(){var O=Array.prototype.slice.call(arguments);return new c(O)};var H=function(P){var O=P[P.length-1];if(typeof O==="function"){this.typeDefs=P.slice(0,-1);this.verify=O}else{this.typeDefs=P}};H.prototype.toString=function(){return"#TypeArray("+this.typeDefs.join(", ")+")"};var h=function(){var O=Array.prototype.slice.call(arguments);return new H(O)};var r=function(P,O){this.obj=P;this.verify=O};r.prototype.toString=function(){return"#TypeObject()"};var u=function(P,O){if(typeof P!=="object"){throw TypeError("Object expected object parameter")}return new r(P,O)};var C=function(P,O){return function(S,Q,R){if(!(O&&z(Q))&&!P(Q)){if(typeof S.type==="function"){return R+" "+s(Q)+" is not a valid class instance"}else{return R+" "+s(Q)+" is not a valid "+S.type}}}};var E=function(Q,P,O){return function(U,R,S){var T;if(O&&z(R)){return}if(!(R instanceof Array)){return S+" "+s(R)+" is not an array"}if(R.length<P){return S+" "+s(R)+" must have at least "+P+" element"+((P!==1)?"s":"")}for(T=0;T<R.length;T++){if(!Q(R[T])){return S+"["+T+"] "+R[T]+" is not a valid "+U.type}}}};var k=function(Q,V,O){if(!(V instanceof Array)){return O+" "+V+" is not an array"}var W=Q[Q.length-1];var S=Q.length;var U;if(typeof W==="function"){var P=Q.length-1;U=W}var T;for(var R=0;R<S;R++){T=D(Q[R],V[R],O+"["+R+"]");if(T){return T}}if(U){T=U(V);if(T){return O+" "+T}}};var l=function(S,O,Q){if(typeof O!=="object"){return Q+" "+O+" is not an object"}var P;for(var R in S){P=D(S[R],O[R],Q+"."+R);if(P){return P}}};var M=function(S,O,Q){var P;var R=S.check;if(!R){throw new TypeError(S.type+" is not a valid TypeDef type!")}P=R(S,O,Q);if(P){return P}if(S.verify){P=S.verify(O);if(P){return Q+" "+P}}};var a=function(S,O,Q){var R,P,T=[];for(R=0;R<S.typeDefs.length;R++){P=D(S.typeDefs[R],O,Q);if(!P){return}T.push(P)}if(T){return T.join(", ")}if(S.verify){P=S.verify(O);if(P){return Q+" "+P}}};var G=function(S,O,Q){var R,P;for(R=0;R<S.typeDefs.length;R++){P=D(S.typeDefs[R],O[R],Q);if(P){return P}}if(S.verify){P=S.verify(O);if(P){return Q+" "+P}}};var F=function(S,O,Q){if(typeof O!=="object"){return Q+" "+O+" is not an object"}var P;for(var R in S.obj){P=D(S.obj[R],O[R],Q+"."+R);if(P){return P}}if(S.verify){P=S.verify(O);if(P){return Q+" "+P}}};var D=function(T,O,Q){var S,P,R;if(T instanceof Array){return k(T,O,Q)}else{if(T instanceof I){return M(T,O,Q)}else{if(T instanceof c){return a(T,O,Q)}else{if(T instanceof H){return G(T,O,Q)}else{if(T instanceof r){return F(T,O,Q)}else{if(typeof T==="object"){return l(T,O,Q)}}}}}}};var e=function(){var P=Array.prototype.slice.call(arguments);var T=P.shift();T=Array.prototype.slice.call(T);var R=P;var S=b.apply(undefined,R);var Q;var O=D(S,T,"arguments");if(O){console.log("validateArgs: "+O);Q=new TypeError(O);Q.stacklevel=2;throw Q}};var y=function(P,R){var O=D(R,P,"arguments");var Q;if(O){Q=new TypeError(O);Q.stacklevel=2;throw Q}};L.TypeCheck={validate:y,validateArgs:e,Arg:p,OptionalArg:A,ArgArray:B,OptionalArgArray:d,NonEmptyArgArray:n,OptionalNonEmptyArgArray:m,Or:b,Array:h,Object:u}}};__ngs._29={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._5).Core;a.Diagnostics=c.DiagnosticEmitter.singleton({classname:"Audio_Diagnostics",initialize:function($super){$super("Audio");this._includeDetails=false},includeDetails:function(){return this._includeDetails}})}};__ngs._2a={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._5).Core;a.Diagnostics=c.DiagnosticEmitter.singleton({classname:"Storage_Diagnostics",initialize:function($super){$super("Storage")}})}};__ngs._2b={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var g=__ngs.r_(__ngs._6).Proc;var b=__ngs.r_(__ngs._z).Class;function e(){this.animationCurve="EaseInOut";return this}var a=c.Commands=b.singleton({classname:"Commands",initialize:function(){var h=__ngs.r_(__ngs._19).ObjectRegistry;h.register(this);this.initializeNative(this.__objectRegistryId);this._tempCBs={};this._tempCBCount=0},FitMode:{None:0,Inside:1,Fill:2,Stretch:3,AspectWidth:5,AspectHeight:6,InsideNoUpscaling:7},Scaling:{Pixels:0,Points:1,Unit:2,Percent:3,iPhone:4},FontStyle:{Normal:0,Bold:1,Italic:2,BoldItalic:3},State:{Normal:0,Focused:1,Selected:2,Pressed:4,Checked:8,Custom:16711680,Disabled:1073741824},EnterKeyType:{Return:0,Done:1,Next:2,Submit:3,Go:4,Search:5,Send:6},InputType:{None:0,TextWithCorrection:1,Password:2,Numeric:4,Email:5,URL:6,Date:7,ANDROID_LANDSCAPE_FULLSCREEN:8},ButtonLayout:{CenterTextOver:0,StackImageLeft:1,StackImageTop:2,StackImageRight:3,StackImageBottom:4,CenterImageOver:5},SwipeDirection:{Left:1,Right:2,Up:3,Down:4},OrientationFlag:{Landscape:1,Portrait:2},Autodetect:{None:0,Phone:1},ResourceError:{None:0,Other:-1,File_Not_Found:-2,Out_Of_Memory:-3,Connectivity_Error:-4,Decode_Failed:-5},ScreenshotType:{Normal:0,GLOnly:1,UIOnly:2},_classId:337,$_eventOccurredRecvGen:function(k){if((k.length-k.idx)!==1){NgLogE("Could not parse due to wrong argument count in Commands.eventOccurred from command: "+k);return false}var h=g.parseObject(k[k.idx++]);if(h===undefined){NgLogE("Could not parse eventObject in Commands.eventOccurred from command: "+k);return false}return this._eventOccurredRecv(h)},$initializeNative:function(h){g.appendToCommandString(22151167,[+h])},$create:function(h,k){g.appendToCommandString(22151166,[+h,g.encodeString(k)])},destroy:function(){g.appendToCommandString(22085635,this)},setActive:function(h){g.appendToCommandString(22085636,this,[(h?1:0)])},setTouchable:function(h){g.appendToCommandString(22085637,this,[(h?1:0)])},enableEvent:function(h){g.appendToCommandString(22085638,this,[g.encodeString(h)])},disableEvent:function(h){g.appendToCommandString(22085639,this,[g.encodeString(h)])},setIsVisible:function(h){g.appendToCommandString(22085641,this,[(h?1:0)])},setEnabled:function(h){g.appendToCommandString(22085642,this,[(h?1:0)])},setState:function(h){g.appendToCommandString(22085643,this,[+h])},addSubview:function(h,k){g.appendToCommandString(22085644,this,[+h,+k])},removeFromSuperview:function(){g.appendToCommandString(22085645,this)},$startAnimation:function(h,k){g.appendToCommandString(22151154,[+h,g.encodeString(k)])},$executeAnimation:function(h){g.appendToCommandString(22151153,[g.encodeObject(h)])},setFrame:function(k,n,l,m){g.appendToCommandString(22085648,this,[+k,+n,+l,+m])},setOrigin:function(h,k){g.appendToCommandString(22085649,this,[+h,+k])},setAnchor:function(h,k){g.appendToCommandString(22085650,this,[+h,+k])},setSize:function(k,l){g.appendToCommandString(22085651,this,[+k,+l])},setTransform:function(m,k,o,n,l,h){g.appendToCommandString(22085652,this,[+m,+k,+o,+n,+l,+h])},setBackgroundColor:function(h){g.appendToCommandString(22085653,this,[g.encodeString(h)])},setImage:function(k,h){g.appendToCommandString(22085654,this,[+k,g.encodeString(h)])},setImageBorder:function(h,k){g.appendToCommandString(22085655,this,[+h,g.encodeObject(k)])},setImageFitMode:function(h){g.appendToCommandString(22085656,this,[+h])},setImageGravity:function(h,k){g.appendToCommandString(22085657,this,[+h,+k])},setImageOrigin:function(h,k){g.appendToCommandString(22085658,this,[+h,+k])},setImageAnchor:function(h,k){g.appendToCommandString(22085659,this,[+h,+k])},setImageSize:function(k,l){g.appendToCommandString(22085660,this,[+k,+l])},setImageInsets:function(m,n,h,k){g.appendToCommandString(22085661,this,[+m,+n,+h,+k])},setImageTransform:function(m,k,o,n,l,h){g.appendToCommandString(22085662,this,[+m,+k,+o,+n,+l,+h])},setText:function(h,k){g.appendToCommandString(22085663,this,[+h,g.encodeString(k)])},setTextColor:function(h,k){g.appendToCommandString(22085664,this,[+h,g.encodeString(k)])},setTextFont:function(k,h){g.appendToCommandString(22085665,this,[+k,g.encodeString(h)])},setTextShadow:function(h,k){g.appendToCommandString(22085666,this,[+h,g.encodeString(k)])},setTextSize:function(h){g.appendToCommandString(22085667,this,[+h])},setTextGravity:function(h,k){g.appendToCommandString(22085668,this,[+h,+k])},setTextInsets:function(m,n,h,k){g.appendToCommandString(22085669,this,[+m,+n,+h,+k])},setTextOverflow:function(h){g.appendToCommandString(22085670,this,[+h])},setTextMaxLines:function(h){g.appendToCommandString(22085671,this,[+h])},setTextMinSize:function(h){g.appendToCommandString(22085672,this,[+h])},setTitle:function(h,k){g.appendToCommandString(22085673,this,[+h,g.encodeString(k)])},setTitleColor:function(h,k){g.appendToCommandString(22085674,this,[+h,g.encodeString(k)])},setTitleFont:function(k,h){g.appendToCommandString(22085675,this,[+k,g.encodeString(h)])},setTitleShadow:function(h,k){g.appendToCommandString(22085676,this,[+h,g.encodeString(k)])},setTitleSize:function(h){g.appendToCommandString(22085677,this,[+h])},setTitleGravity:function(h,k){g.appendToCommandString(22085678,this,[+h,+k])},setTitleInsets:function(m,n,h,k){g.appendToCommandString(22085679,this,[+m,+n,+h,+k])},setTitleOverflow:function(h){g.appendToCommandString(22085680,this,[+h])},setTitleMaxLines:function(h){g.appendToCommandString(22085681,this,[+h])},setTitleMinSize:function(h){g.appendToCommandString(22085682,this,[+h])},setGradient:function(h,k){g.appendToCommandString(22085683,this,[+h,g.encodeObject(k)])},setStringValue:function(h){g.appendToCommandString(22085684,this,[g.encodeString(h)])},setFloatValue:function(h){g.appendToCommandString(22085685,this,[+h])},setIntValue:function(h){g.appendToCommandString(22085686,this,[+h])},setBoolValue:function(h){g.appendToCommandString(22085687,this,[(h?1:0)])},setButtonLayout:function(h){g.appendToCommandString(22085688,this,[+h])},setContentInsets:function(m,n,h,k){g.appendToCommandString(22085689,this,[+m,+n,+h,+k])},setBarGradient:function(h,k){g.appendToCommandString(22085690,this,[+h,g.encodeObject(k)])},setPlaceholderText:function(h){g.appendToCommandString(22085691,this,[g.encodeString(h)])},setPlaceholderTextColor:function(h){g.appendToCommandString(22085692,this,[g.encodeString(h)])},setPlaceholderTextShadow:function(h){g.appendToCommandString(22085693,this,[g.encodeString(h)])},setEnterKeyType:function(h){g.appendToCommandString(22085694,this,[+h])},setInputType:function(h){g.appendToCommandString(22085695,this,[+h])},setChecked:function(h){g.appendToCommandString(22085696,this,[(h?1:0)])},setScrollPosition:function(h,k){g.appendToCommandString(22085697,this,[+h,+k])},setScrollableSize:function(k,l){g.appendToCommandString(22085698,this,[+k,+l])},setSections:function(h){g.appendToCommandString(22085699,this,[g.encodeObject(h)])},setTitleView:function(h){g.appendToCommandString(22085700,this,[+h])},setSourceDocument:function(h){g.appendToCommandString(22085701,this,[g.encodeString(h)])},setChoices:function(k,l,h){g.appendToCommandString(22085702,this,[g.encodeObject(k),+l,+h])},show:function(){g.appendToCommandString(22085703,this)},hide:function(){g.appendToCommandString(22085704,this)},setPostData:function(h){g.appendToCommandString(22085705,this,[g.encodeString(h)])},loadPostURL:function(h){g.appendToCommandString(22085706,this,[g.encodeString(h)])},loadGetURL:function(h){g.appendToCommandString(22085707,this,[g.encodeString(h)])},loadURL:function(h,l,k){g.appendToCommandString(22085708,this,[g.encodeString(h),g.encodeObject(l),+k])},stopLoading:function(){g.appendToCommandString(22085709,this)},reload:function(){g.appendToCommandString(22085710,this)},invoke:function(h){g.appendToCommandString(22085711,this,[g.encodeString(h)])},goBack:function(){g.appendToCommandString(22085712,this)},goForward:function(){g.appendToCommandString(22085713,this)},setBasicAuthCredentials:function(h){g.appendToCommandString(22085714,this,[g.encodeObject(h)])},setRightImage:function(k,h){g.appendToCommandString(22085715,this,[+k,g.encodeString(h)])},setRightImageBorder:function(h,k){g.appendToCommandString(22085716,this,[+h,g.encodeObject(k)])},setRightImageFitMode:function(h){g.appendToCommandString(22085717,this,[+h])},setRightImageGravity:function(h,k){g.appendToCommandString(22085718,this,[+h,+k])},setRightImageOrigin:function(h,k){g.appendToCommandString(22085719,this,[+h,+k])},setRightImageAnchor:function(h,k){g.appendToCommandString(22085720,this,[+h,+k])},setRightImageSize:function(k,l){g.appendToCommandString(22085721,this,[+k,+l])},setRightImageInsets:function(m,n,h,k){g.appendToCommandString(22085722,this,[+m,+n,+h,+k])},setRightImageTransform:function(m,k,o,n,l,h){g.appendToCommandString(22085723,this,[+m,+k,+o,+n,+l,+h])},$setStatusBarHidden:function(h){g.appendToCommandString(22151076,[(h?1:0)])},pauseAds:function(){g.appendToCommandString(22085725,this)},resumeAds:function(){g.appendToCommandString(22085726,this)},setAdRefreshRate:function(h){g.appendToCommandString(22085727,this,[+h])},setAdAllowAutoplay:function(h){g.appendToCommandString(22085728,this,[(h?1:0)])},setAlpha:function(h){g.appendToCommandString(22085729,this,[+h])},postURL:function(h,k){g.appendToCommandString(22085730,this,[g.encodeString(h),g.encodeString(k)])},setProgressGradient:function(h,k){g.appendToCommandString(22085731,this,[+h,g.encodeObject(k)])},setSecondaryGradient:function(h,k){g.appendToCommandString(22085732,this,[+h,g.encodeObject(k)])},setProgress:function(h,k){g.appendToCommandString(22085733,this,[+h,+k])},useForUpdateProgress:function(h){g.appendToCommandString(22085734,this,[(h?1:0)])},setDarkStyle:function(h){g.appendToCommandString(22085735,this,[(h?1:0)])},$doCompositeImages:function(k,n,l,m,o){g.appendToCommandString(22151064,[+k,+n,g.encodeString(l),g.encodeObject(m),g.encodeString(o)])},$doChooseCamera:function(k,n,l,m,o){g.appendToCommandString(22151062,[+k,+n,g.encodeString(l),g.encodeObject(m),g.encodeString(o)])},setScrollable:function(h){g.appendToCommandString(22085739,this,[(h?1:0)])},setZoomable:function(h){g.appendToCommandString(22085740,this,[(h?1:0)])},addAnnotation:function(h){g.appendToCommandString(22085741,this,[+h])},removeAnnotation:function(h){g.appendToCommandString(22085742,this,[+h])},selectAnnotation:function(h){g.appendToCommandString(22085743,this,[+h])},setRegion:function(n,m,h,k,l){g.appendToCommandString(22085744,this,[+n,+m,+h,+k,(l?1:0)])},setView:function(h){g.appendToCommandString(22085745,this,[+h])},setCoordinate:function(k,h){g.appendToCommandString(22085746,this,[+k,+h])},setCalloutTitle:function(h){g.appendToCommandString(22085747,this,[g.encodeString(h)])},setCalloutSubtitle:function(h){g.appendToCommandString(22085748,this,[g.encodeString(h)])},setCalloutEnabled:function(h){g.appendToCommandString(22085749,this,[(h?1:0)])},setCalloutLeftView:function(h){g.appendToCommandString(22085750,this,[+h])},setCalloutRightView:function(h){g.appendToCommandString(22085751,this,[+h])},setCenterOffset:function(h,k){g.appendToCommandString(22085752,this,[+h,+k])},$doChoosePhoto:function(k,n,l,m,o,p){g.appendToCommandString(22151047,[+k,+n,g.encodeString(l),g.encodeObject(m),g.encodeString(o),+p])},setScrollIndicatorsVisible:function(h){g.appendToCommandString(22085754,this,[(h?1:0)])},$measureText:function(m,k,n,l,p,o){g.appendToCommandString(22151045,[g.encodeString(m),+k,+n,g.encodeString(l),+p,g.encodeString(o)])},setFocus:function(h){g.appendToCommandString(22085756,this,[(h?1:0)])},setViewportEnabled:function(h){g.appendToCommandString(22085757,this,[(h?1:0)])},clearAnimations:function(){g.appendToCommandString(22085758,this)},setStyle:function(h){g.appendToCommandString(22085759,this,[+h])},setVisibleInOrientations:function(h){g.appendToCommandString(22085760,this,[+h])},setAutodetection:function(h){g.appendToCommandString(22085761,this,[+h])},playVideo:function(k,h){g.appendToCommandString(22085762,this,[g.encodeString(k),g.encodeString(h)])},setLineHeight:function(h){g.appendToCommandString(22085763,this,[+h])},$hideKeyboard:function(){g.appendToCommandString(22151036)},$takeScreenshot:function(k,n,l,m,o){g.appendToCommandString(22151035,[+k,+n,g.encodeString(l),g.encodeObject(m),g.encodeString(o)])},setPluginsEnabled:function(h){g.appendToCommandString(22085766,this,[(h?1:0)])},$sendEmail:function(h,k){g.appendToCommandString(22151033,[g.encodeObject(h),g.encodeString(k)])},$sendSMS:function(h,k){g.appendToCommandString(22151032,[g.encodeObject(h),g.encodeString(k)])},$sendTweet:function(h,k){g.appendToCommandString(22151031,[g.encodeObject(h),g.encodeString(k)])},$getAvailableSharingServices:function(h){g.appendToCommandString(22151030,[g.encodeString(h)])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[337]=this._instance||this;PROC_METHOD_TABLE[22151160]=this.prototype._eventOccurredRecvGen},_eventOccurredRecv:function(h){(a.Window||__ngs.r_(__ngs._b).Window).doCommand(h)},registerTemporaryCallback:function(k){if(typeof k!="function"){return null}var h=(++this._tempCBCount).toString(36);a._tempCBs[h]=k;return h},takeTemporaryCallback:function(k){var h=a._tempCBs[k];delete a._tempCBs[k];return h},animate:function(m,n,o){if(typeof m=="function"){var h=(typeof o=="function")?o:n;var l=(typeof n=="number")?n:o;if(typeof l!="number"){l=400}a.startAnimation(l,a.registerTemporaryCallback(o));var k=new e();m(k);a.executeAnimation(k)}}});c.Commands.instantiate()}};__ngs._2c={_c:null,_d:function(){var c={exports:{}};var e=c.exports;this._c=c;var b=__ngs.r_(__ngs._2d).Element;var l=__ngs.r_(__ngs._2b).Commands;var a=__ngs.r_(__ngs._2e).Rect;var d=__ngs.r_(__ngs._19).ObjectRegistry;var k=__ngs.r_(__ngs._3g).Style;var g={normal:l.State.Normal,focused:l.State.Focused,pressed:l.State.Pressed,disabled:l.State.Disabled,selected:l.State.Focused,highlighted:l.State.Pressed};var h=e.AbstractView=b.subclass({type:"AbstractView",initialize:function($super,m){if(h._init){h._init()}this._assignedVisible=true;$super(m)},destroy:function($super){this.removeFromParent();$super()},getParent:function(){return this._parent},addToParent:function(m,n){m.addChild(this,n)},removeFromParent:function(){if(this._parent&&!this._parent._destroyed){this._parent.removeChild(this);this._parent=null}return this},addState:function(m){this.setState(this._state|m)},clearState:function(m){this.setState(this._state&~m)},getRoot:function(){return this._parent?this._parent.getRoot():undefined},getFrameIn:function(t){if(!t){return undefined}if(UI.Window===t){t=UI.Window.document}var o=this.getFrame();if(!o){return undefined}o=[0,0,o[2],o[3]];if(this===t){return o}var n=[];var u={};var x=this;do{u[x]=true;n.push(x);if(x===t){break}x=x.getParent()}while(x);var m=[];x=t;while(x&&!u[x]){m.push(x);x=x.getParent()}if(!x){var y=this.getRoot();if(y&&t.getRoot()){x=y;m.pop()}else{return undefined}}var w=n.indexOf(x);for(var s=w,p=w+m.length;s<p;++s){n[s]=m.pop()}for(var r=0;r<s;++r){var v=n[r].getFrame();if(v){if(typeof n[r].getFrameOffset==="function"){var q=n[r].getFrameOffset();v[0]+=q[0];v[1]+=q[1]}o[0]+=(r<w?v[0]:-v[0]);o[1]+=(r<w?v[1]:-v[1])}else{return undefined}}return o},_setVisible:function(n){var o=n&&this._assignedVisible&&this._parent&&this._parent._visible;if(this._visible!=o){this._visible=o;var m=(n?this.getOnAppear():this.getOnDisappear());if(typeof m=="function"){m.call(this)}}},clearAnimations:l.clearAnimations,$synthesizePropertyWithState:function(q,p){function m(r,v,t){var s="get"+r;var w="set"+r;var x=function(){return this[s].call(this,t)};var u=function(y){return this[w].call(this,y,t)};this.registerAccessors(v+r,x,u)}b.synthesizePropertyWithState.call(this,q,p);var n=q.charAt(0).toUpperCase()+q.substr(1);for(var o in g){m.call(this,n,o,g[o])}}});h._init=function(){delete h._init;if(b._init){b._init()}var p=function(){return this._visible};var o=function(q){this._assignedVisible=q;l.setIsVisible.call(this,q);this._setVisible(q)};h.registerAccessors("visible",p,o);h.synthesizeProperty("backgroundColor",l.setBackgroundColor);h.synthesizeProperty("enabled",function(q){this[(q?"clearState":"setState")](l.State.Disabled)});h.synthesizeProperty("state",l.setState);var n=function(){return this._frame};var m=function(r){if(this.sizeChanged){var q=this._frame?this._frame[2]:0;var s=this._frame?this._frame[3]:0}if(r instanceof a){this._frame=r.array()}else{if(r instanceof Array){this._frame=r}else{this._frame=Array.prototype.slice.call(arguments)}}l.setFrame.apply(this,this._frame);if(this.sizeChanged&&((q^this._frame[2])|(s^this._frame[3]))){this.sizeChanged(this._frame[2],this._frame[3],q,s)}};h.registerAccessors("frame",n,m);h.synthesizePropertyWithState("gradient",l.setGradient);h.synthesizeProperty("touchable",l.setTouchable);h.synthesizeProperty("alpha",l.setAlpha);h.synthesizeProperty("style",function(q){if(q instanceof k){l.setStyle.call(this,d.objectToId(q))}});h.registerEventType("appear");h.registerEventType("disappear");h.registerEventType("click");h.registerEventType("clickDown");h.registerEventType("clickCancel");h.registerEventType("swipe");h.registerEventType("longPress")}}};__ngs._2d={_c:null,_d:function(){var g={exports:{}};var e=g.exports;this._c=g;var d=__ngs.r_(__ngs._z).Class;var a=__ngs.r_(__ngs._2b).Commands;var c=__ngs.r_(__ngs._19).ObjectRegistry;var b=e.Element=d.subclass({$subclass:function(k){if(typeof this._init=="function"){this._init()}if(!k.classname&&k.type){var h=(""+k.type).replace(/\W/g,"_");k.classname="UI_"+h.charAt(0).toUpperCase()+h.substr(1)}return d.subclass.apply(this,arguments)},classname:"UI_Element",initialize:function(m){if(b._init){b._init()}this.register();var l=this._eventNames;if(l){for(var o in l){if(this[l[o]]){a.enableEvent.call(this,o)}}}var n=this._setters;if(n){for(var h in m){if(typeof n[h]=="function"){try{n[h].call(this,m[h])}catch(o){NgLogD("Unable to set "+this.type+"."+h)}}}}return this},register:function(){try{c.register(this);a.create(this.__objectRegistryId,this.type||this.classname)}catch(h){}finally{return this.__objectRegistryId}},retain:function(){(this.__retainCount)?++this.__retainCount:(this.__retainCount=1);return this},release:function(){if(--this.__retainCount===0){this.destroy()}},getAttribute:function(k){var h=this._getters[k];return(typeof h=="function")?h.call(this):undefined},setAttribute:function(h,k){var l=this._setters[h];if(typeof l=="function"){return l.call(this,k)}else{NgLogD("Unable to set "+this.type+"."+h)}return this},setAttributes:function(n){var l=this._setters;if(l){for(var h in n){if(typeof l[h]=="function"){try{l[h].call(this,n[h])}catch(m){NgLogD("Unable to set "+this.type+"."+h)}}}}return this},getAttributes:function(m){var h={};var l;if(m instanceof Array){for(var k=0;k<m.length;k++){l=m[k];h[l]=this._getters[l].call(this)}}else{for(l in this._getters){h[l]=this._getters[l].call(this)}}return h},enableEvent:a.enableEvent,toString:function(){return this.type+"("+this.__objectRegistryId+")"},destroy:function(){a.destroy.call(this);c.unregister(this);delete this.prototype;var m=function(){var n=new Error("Object is destroyed.");NgLogD(n.stack);throw n};for(var h in this){var k=(h.substring(0,1)==="_"||h.substring(0,2)==="on");if(this.hasOwnProperty(h)||!k){var l=typeof this[h];delete this[h];this[h]=("function"===l?m:undefined)}}this._destroyed=true},registerCallback:function(k,h){var l=++this.callbackCounter;var m=this;this.callbacks[l]=function(p,n){try{k(p,n);if(h){delete p.callbacks[l]}}catch(o){NgHandleException(o)}};return l},performCallback:function(k){var h=this.callbacks[k.callbackId];if(h){h(this,k.arguments)}},performEventCallback:function(l){try{var h=this._eventNames[l.eventType];var k=this["_"+h]||this[h];if(typeof k=="function"){k.call(this,l)}}catch(m){NgHandleException(m)}},$registerAccessors:function(n,t,r,p){var q=n.charAt(0).toUpperCase()+n.substr(1);var m=Boolean(p||false);var l=(this instanceof b)?this:this.prototype;var h;if(typeof t=="function"){if(!l.hasOwnProperty("_getters")){try{h=function(){return this};var s=l.superclass._getters;if(s){h.prototype=s}l._getters=new h()}catch(o){}}if(m){l["get"+q]=function(){NgLogD("WARNING: Use of get"+q+"() is deprecated. "+p);t.apply(this,arguments)}}else{l["get"+q]=t}l._getters[n]=t}if(typeof r=="function"){if(!l.hasOwnProperty("_setters")){try{h=function(){return this};var k=l.superclass._setters;if(k){h.prototype=k}l._setters=new h()}catch(o){}}if(m){l["set"+q]=function(){NgLogD("WARNING: Calling set"+q+"() is deprecated. "+p);r.apply(this,arguments)}}else{l["set"+q]=r}l._setters[n]=r}},$registerEventType:function(n){var p="on"+n.charAt(0).toUpperCase()+n.substr(1);var m="_"+p;var l=this.prototype;var r=function(){return this[m]||this[p]};var q=function(t){var s=(typeof t=="function");if(s){this[m]=t}else{delete this[m]}this.enableEvent(n,s)};if(!l.hasOwnProperty("_eventNames")){try{var k=function(){return this};var h=l.superclass._eventNames;if(h){k.prototype=h}l._eventNames=new k()}catch(o){}}l._eventNames[n]=p;this.registerAccessors(p,r,q);l.__defineGetter__(p.toLowerCase(),r);l.__defineSetter__(p.toLowerCase(),q)},$synthesizePropertyWithState:function(l,h){var n="_"+l+"Map";var k;if(l){k=function(o,p){p|=0;(this[n]||(this[n]={}))[p]=o;h.call(this,p,o);return this}}else{k=function(o,p){h.call(this,(p|0),o);return this}}var m=function(o){return(this[n]||0)[(o|0)]};this.registerAccessors(l,m,k)},$synthesizeCompoundProperty:function(l,h){var m="_"+l;var k;if(h){k=function(n){this[m]=(n instanceof Array)?n:Array.prototype.slice.call(arguments);h.apply(this,this[m]);return this}}else{k=function(n){this[m]=(n instanceof Array)?n:Array.prototype.slice.call(arguments);return this}}this.registerAccessors(l,function(){return this[m]},k)},$synthesizeProperty:function(l,h){var m="_"+l;var k;if(h){k=function(n){this[m]=n;h.apply(this,arguments);return this}}else{k=function(n){this[m]=n;return this}}this.registerAccessors(l,function(){return this[m]},k)},$bindPropertyState:function(l,o,m){var h=l[0].toUpperCase()+l.substr(1);var k="get"+h;var p="set"+h;var q=function(){return this[k].call(this,m)};var n=function(r){return this[p].call(this,r,m)};this.registerAccessors(o+h,q,n)}});b._init=function(){delete b._init;b.registerEventType("load");b.registerEventType("unload")}}};__ngs._2e={_c:null,_d:function(){var e={exports:{}};var h=e.exports;this._c=e;var c=__ngs.r_(__ngs._z).Class;var m=__ngs.r_(__ngs._2b).Commands;var k=__ngs.r_(__ngs._7).Capabilities;var d=h.ViewGeometry={};var b=d.Scale=h.Scale=c.singleton({initialize:function(){var n=k.getScreenUnits();this.iOSConversion=n;this.pointConversion=this.iOSConversion*160/72},Pixels:m.Scaling.Pixels,Points:m.Scaling.Points,Unit:m.Scaling.Unit,Percent:m.Scaling.Percent,iPhone:m.Scaling.iPhone,pointConversion:1,iOSConversion:1,getScale:function(n,o){switch(+n){case this.Points:return this.pointConversion;case this.Unit:return o;case this.Percent:return o/100;case this.iPhone:return this.iOSConversion}return 1}});var g=d.Gravity=h.Gravity={TopLeft:[0,0],TopCenter:[0.5,0],TopRight:[1,0],Left:[0,0.5],Center:[0.5,0.5],Right:[1,0.5],BottomLeft:[0,1],BottomCenter:[0.5,1],BottomRight:[1,1]};var l=d.FitModes=h.FitModes=m.FitMode;var a=d.Rect=h.Rect=c.subclass({initialize:function(n){if(n instanceof this.constructor){this.x=n.x;this.y=n.y;this.w=n.w;this.h=n.h}else{if(n instanceof Array){if(arguments.length==2&&arguments[0].length>=2&&arguments[1] instanceof Array&&arguments[1].length>=2){this.x=arguments[0][0];this.y=arguments[0][1];this.w=arguments[1][0];this.h=arguments[1][1]}else{if(arguments.length==1&&n.length>=4){this.x=n[0];this.y=n[1];this.w=n[2];this.h=n[3]}else{NgLogD("UI.ViewGeometry.Rect initialized with unparseable Array(s)")}}}else{if(arguments.length==4){this.x=arguments[0];this.y=arguments[1];this.w=arguments[2];this.h=arguments[3]}}}return this},isEmpty:function(){return(this.w*this.h<=0)||isNaN(this.x)||isNaN(this.y)||isNaN(this.w)||isNaN(this.h)},copy:function(){return new (this).constructor(this)},array:function(){return[this.x,this.y,this.w,this.h]},inset:function(q,u,n,o,p){if(arguments.length>4){var v=b.getScale(p,this.w);var s=b.getScale(p,this.h);q=Math.floor(q*s);u=Math.floor(u*v);n=Math.floor(n*s);o=Math.floor(o*v)}if(arguments.length<2){u=q}if(arguments.length<4){n=q;o=u}this.y+=q;this.h-=q+n;this.x+=o;this.w-=o+u;return this},sliceVertical:function(n,o){if(arguments.length>1){n=Math.floor(n*b.getScale(o,this.h))}var p=this.copy();if(n<0){p.h=-n;this.h+=n;p.y+=this.h}else{p.h=n;this.y+=n;this.h-=n}return p},sliceHorizontal:function(p,n){if(arguments.length>1){p=Math.floor(p*b.getScale(n,this.w))}var o=this.copy();if(p<0){o.w=-p;this.w+=p;o.x+=this.w}else{o.w=p;this.x+=p;this.w-=p}return o},toString:function(){return"Rect: {"+this.array().join(",")+"}"},getGrid:function(x,s,o){o=(o===true);var q=Math.floor(this.w/s);var w=Math.floor(this.h/x);var p=[];for(var v=0;v<x;v++){var u=[];for(var t=0;t<s;t++){var n=new this.constructor(this.x+t*q,this.y+v*w,q,w);(o?p:u).push(n)}if(!o){p.push(u)}}return p}})}};__ngs._2f={_c:null,_d:function(){var e={exports:{}};var c=e.exports;this._c=e;var b=__ngs.r_(__ngs._2d).Element;var d=__ngs.r_(__ngs._6o).ViewParent;var a=__ngs.r_(__ngs._2b).Commands;var g=c.WindowLayer=b.subclass({type:"windowlayer",initialize:function($super,h){if(g.init){g.init()}$super(h);if(g._init){g._init()}d.initialize.call(this);this._visible=true},getRoot:function(){return this},getParent:function(){return undefined},getChildCount:d.getChildCount,getChildren:d.getChildren,addChild:d.addChild,removeChild:d.removeChild});g.init=function(){delete g._init;if(b._init){b._init()}g.synthesizeProperty("level",a.setIntValue)}}};__ngs._2g={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;
/*!
sprintf() for JavaScript 0.6

Copyright (c) Alexandru Marasteanu <alexaholic [at) gmail (dot] com>
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:
    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.
    * Neither the name of sprintf() for JavaScript nor the
      names of its contributors may be used to endorse or promote products
      derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL Alexandru Marasteanu BE LIABLE FOR ANY
DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.


Changelog:
2007.04.03 - 0.1:
 - initial release
2007.09.11 - 0.2:
 - feature: added argument swapping
2007.09.17 - 0.3:
 - bug fix: no longer throws exception on empty paramenters (Hans Pufal)
2007.10.21 - 0.4:
 - unit test and patch (David Baird)
2010.05.09 - 0.5:
 - bug fix: 0 is now preceeded with a + sign
 - bug fix: the sign was not at the right position on padded results (Kamal Abdali)
 - switched from GPL to BSD license
2010.05.22 - 0.6:
 - reverted to 0.4 and fixed the bug regarding the sign of the number 0
 Note:
 Thanks to Raphael Pigulla <raph (at] n3rd [dot) org> (http://www.n3rd.org/)
 who warned me about a bug in 0.5, I discovered that the last update was
 a regress. I appologize for that.
**/
a.sprintf=function(){var t=function(p,c){for(var s=[];c>0;s[--c]=p){}return s.join("")};var h=[];var l=false;var n=1;var k;if(typeof(arguments[0])=="object"&&arguments[0].length){l=true;for(k=0;k<arguments[0].length;++k){h[k]=arguments[0][k]}}else{for(k=0;k<arguments.length;++k){h[k]=arguments[k]}}k=0;var v,q=h[k++],e=[],g,d,r,u,w="";while(q){if(g=/^[^\x25]+/.exec(q)){e.push(g[0])}else{if(g=/^\x25{2}/.exec(q)){e.push("%")}else{if(g=/^\x25(?:(\d+)\$)?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(q)){if(((v=h[g[1]||k++])===null)||(v===undefined)){throw ("Too few arguments.")}if(/[^s]/.test(g[7])&&(typeof(v)!="number")){throw ("Expecting number but found "+typeof(v))}switch(g[7]){case"b":v=v.toString(2);break;case"c":v=String.fromCharCode(v);break;case"d":v=parseInt(v,10);break;case"e":v=g[6]?v.toExponential(g[6]):v.toExponential();break;case"f":v=g[6]?parseFloat(v).toFixed(g[6]):parseFloat(v);break;case"o":v=v.toString(8);break;case"s":v=((v=String(v))&&g[6]?v.substring(0,g[6]):v);break;case"u":v=Math.abs(v);break;case"x":v=v.toString(16);break;case"X":v=v.toString(16).toUpperCase();break}v=(/[def]/.test(g[7])&&g[2]&&v>=0?"+"+v:v);r=g[3]?g[3]=="0"?"0":g[3].charAt(1):" ";u=g[5]-String(v).length-w.length;d=g[5]?t(r,u):"";e.push(w+(g[4]?v+d:d+v));if(l){++n}}else{throw ("Huh ?!")}}}q=q.substring(g[0].length)}if(l&&n>0){arguments[0].splice(0,n)}return e.join("")}}};__ngs._2h={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var g=__ngs.r_(__ngs._6).Proc;var a=__ngs.r_(__ngs._z).Class;var e=__ngs.r_(__ngs._2v).RenderTarget;var d=b.Animation=a.subclass({classname:"Animation",initialize:function(){var h=__ngs.r_(__ngs._19).ObjectRegistry;h.register(this);this._wrapMode=this.WrapMode.WrapNone;this._blendEnabled=true;this._blendMode=this.BlendMode.Alpha;this._filteringEnabled=true;this._loopingEnabled=true;this._totalDuration=0;this._frames=[];this._createSendGen(this.__objectRegistryId)},destroy:function(){this._destroySendGen();var h=__ngs.r_(__ngs._19).ObjectRegistry;h.unregister(this)},getWrapMode:function(){return this._wrapMode},getBlendEnabled:function(){return this._blendEnabled},getFilteringEnabled:function(){return this._filteringEnabled},getLoopingEnabled:function(){return this._loopingEnabled},getTotalDuration:function(){return this._totalDuration},getFrameCount:function(){return this._frames.length},getFrame:function(h){return this._frames[h]},setWrapMode:function(h){this._wrapMode=h;this._setWrapModeSendGen(h);return this},setBlendEnabled:function(h){this._blendEnabled=h;this._setBlendEnabledSendGen(h);return this},setBlendMode:function(h){this._blendMode=h;this._setBlendModeSendGen(h);return this},getBlendMode:function(){return this._blendMode},setFilteringEnabled:function(h){this._filteringEnabled=h;this._setFilteringEnabledSendGen(h);return this},setLoopingEnabled:function(h){this._loopingEnabled=h;this._setLoopingEnabledSendGen(h);return this},pushFrame:function(h){return this.spliceFrames(this._frames.length,0,h)},setFrame:function(h,k){return this.spliceFrames(h,1,k)},spliceFrames:function(h,r,s){var q;var l=arguments.length-2;var k;var t=false;for(q=0;q<l;++q){k=arguments[q+2];if(k&&k.getImage){if(k.getImage().classname==="RenderTarget"){t=true}}else{return this}}for(q=h;q<h+r;++q){this._totalDuration-=this._frames[q].getDuration()}this._frames.splice.apply(this._frames,arguments);if(t){this._spliceFrames2SendGen(h,r,l)}else{this._spliceFramesSendGen(h,r,l)}for(q=0;q<l;++q){k=arguments[q+2];var n=k.getDuration();var x=k.getSize();var p=k.getAnchor();var o=k.getUVs();var v=o.getOrigin();var w=o.getSize();var m=k.getImage();var u=0;if(m.classname==="RenderTarget"){u=m.__objectRegistryId;m=""}if(t){this._frame2SendGen(m,u,n,x.getWidth(),x.getHeight(),p.getX(),p.getY(),v.getX(),v.getY(),w.getWidth(),w.getHeight())}else{this._frameSendGen(m,n,x.getWidth(),x.getHeight(),p.getX(),p.getY(),v.getX(),v.getY(),w.getWidth(),w.getHeight())}this._totalDuration+=n}return this},$setTextureColorDepth:function(h){this._setTextureColorDepthSendGen(h)},$Frame:a.subclass({classname:"Frame",initialize:function(q,p,n,l,m){var h=__ngs.r_(__ngs._1w).Size;var o=__ngs.r_(__ngs._1v).Point;var k=__ngs.r_(__ngs._1x).Rect;this._image=q;this._duration=p||0;this._size=h.pool.get(n);if(l){this._anchor=o.pool.get(l)}else{this._anchor=o.pool.get(0.5,0.5)}if(m){this._uvs=k.pool.get(m)}else{this._uvs=k.pool.get(0,0,1,1)}},getImage:function(){return this._image},getDuration:function(){return this._duration},getSize:function(){return this._size},getAnchor:function(){return this._anchor},getUVs:function(){return this._uvs}}),WrapMode:{WrapNone:0,WrapU:1,WrapV:2,WrapUV:3},BlendMode:{Alpha:1,Add:2,Subtract:3},_classId:306,$_createSendGen:function(h){g.appendToCommandString(20119551,[+h])},_destroySendGen:function(){g.appendToCommandString(20054018,this)},_setWrapModeSendGen:function(h){g.appendToCommandString(20054019,this,[+h])},_setBlendEnabledSendGen:function(h){g.appendToCommandString(20054020,this,[(h?1:0)])},_setLoopingEnabledSendGen:function(h){g.appendToCommandString(20054021,this,[(h?1:0)])},_spliceFramesSendGen:function(l,h,k){g.appendToCommandString(20054022,this,[+l,+h,+k])},_frameSendGen:function(o,p,h,s,m,k,r,q,n,l){g.appendSubcommandToCommandString([g.encodeString(o),+p,+h,+s,+m,+k,+r,+q,+n,+l])},_setFilteringEnabledSendGen:function(h){g.appendToCommandString(20054024,this,[(h?1:0)])},_spliceFrames2SendGen:function(l,h,k){g.appendToCommandString(20054025,this,[+l,+h,+k])},_frame2SendGen:function(o,s,p,h,t,m,k,r,q,n,l){g.appendSubcommandToCommandString([g.encodeString(o),+s,+p,+h,+t,+m,+k,+r,+q,+n,+l])},_setBlendModeSendGen:function(h){g.appendToCommandString(20054027,this,[+h])},$_setTextureColorDepthSendGen:function(h){g.appendToCommandString(20119540,[+h])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[306]=this._instance||this}})}};__ngs._2i={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var e=__ngs.r_(__ngs._6).Proc;var a=__ngs.r_(__ngs._z).Class;var d=b.EmitterData=a.subclass({classname:"EmitterData",initialize:function(){var g=__ngs.r_(__ngs._19).ObjectRegistry;g.register(this);this._createSendGen(this.__objectRegistryId);this._callbackIndexCounter=1;this._callbacks=[]},destroy:function(){this._destroySendGen();var g=__ngs.r_(__ngs._19).ObjectRegistry;g.unregister(this)},isDataFormatSupported:function(h){var g=__ngs.r_(__ngs._7).Capabilities;if(g.meetsBinaryVersion){return(h===d.DataFormat.GravityEmitterData&&g.meetsBinaryVersion([1,8,0,0,0]))||(h===d.DataFormat.GravityEmitterData2&&g.meetsBinaryVersion([1,10,0,0,0]))}else{return false}},initFromData:function(g,l,k){var h;if(this.isDataFormatSupported(l)){if(typeof g==="string"||typeof g==="object"){h=this._callbackIndexCounter++;this._callbacks[h]=k;if(typeof g==="string"){this._initFromDataSendGen(g,l,h)}else{this._initFromDataSendGen(JSON.stringify(g),l,h)}}else{if(k&&typeof k==="function"){k({code:d.ErrorCode.TypeError,description:"Expected Object or String"},this)}}}else{if(k&&typeof k==="function"){k({code:d.ErrorCode.UnsupportedFormat,description:"Data Format Not Supported"},this)}}return this},mergeData:function(g){if(typeof g==="string"){this._mergeDataSendGen(g)}else{this._mergeDataSendGen(JSON.stringify(g))}return this},initFromJSONFile:function(g,l,k){var h;if(this.isDataFormatSupported(l)){if(typeof g==="string"){h=this._callbackIndexCounter++;this._callbacks[h]=k;this._initFromJSONFileSendGen(g,l,h)}else{k({code:d.ErrorCode.InvalidFilename,description:"Invalid filename"},this)}}else{if(k&&typeof k==="function"){k({code:d.ErrorCode.UnsupportedFormat,description:"Data Format Not Supported"},this)}}return this},_invokeCallbackRecv:function(l,k,h){var g=l&&this._callbacks[l];if(g){delete this._callbacks[l];if(k){g({code:h,description:k},this)}else{g(null,this)}}else{NgLogE("GL2.EmitterData._invokeCallbackRecv command : No registered callback found, id = "+l)}},DataFormat:{GravityEmitterData:0,GravityEmitterData2:1},ErrorCode:{TypeError:0,UnsupportedFormat:1,InvalidFilename:2,ParseError:3,DataError:4},_classId:367,_invokeCallbackRecvGen:function(l){if((l.length-l.idx)!==3){NgLogE("Could not parse due to wrong argument count in EmitterData.invokeCallback from command: "+l);return false}var k=e.parseInt(l[l.idx++]);if(k===undefined){NgLogE("Could not parse callbackId in EmitterData.invokeCallback from command: "+l);return false}var h=e.parseString(l[l.idx++]);if(h===undefined){NgLogE("Could not parse description in EmitterData.invokeCallback from command: "+l);return false}var g=e.parseInt(l[l.idx++]);if(g===undefined){NgLogE("Could not parse code in EmitterData.invokeCallback from command: "+l);return false}return this._invokeCallbackRecv(k,h,g)},$_createSendGen:function(g){e.appendToCommandString(24117247,[+g])},_destroySendGen:function(){e.appendToCommandString(24051714,this)},_initFromDataSendGen:function(g,k,h){e.appendToCommandString(24051715,this,[e.encodeString(g),+k,+h])},_initFromJSONFileSendGen:function(g,k,h){e.appendToCommandString(24051716,this,[e.encodeString(g),+k,+h])},_mergeDataSendGen:function(g){e.appendToCommandString(24051718,this,[e.encodeString(g)])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[367]=this._instance||this;PROC_METHOD_TABLE[24051717]=this.prototype._invokeCallbackRecvGen}})}};__ngs._2j={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var g=__ngs.r_(__ngs._6).Proc;var b=__ngs.r_(__ngs._2n).Node;var e=__ngs.r_(__ngs._2i).EmitterData;var d=a.Emitter=b.subclass({classname:"Emitter",initialize:function(){},destroy:function(){},play:function(){this._playSendGen()},stop:function(h){var k=(h===undefined)?d.StopMode.Soft:h;this._stopSendGen(k)},setData:function(h){this._setDataSendGen(h.__objectRegistryId)},setDoneCallback:function(h){this._doneCallback=h},setDeadCallback:function(h){this._deadCallback=h},_invokeDoneCallbackRecv:function(){if(this._doneCallback){this._doneCallback(this)}},_invokeDeadCallbackRecv:function(){if(this._deadCallback){this._deadCallback(this)}},StopMode:{Soft:0,Hard:1},_classId:368,_invokeDoneCallbackRecvGen:function(h){if((h.length-h.idx)!==0){NgLogE("Could not parse due to wrong argument count in Emitter.invokeDoneCallback from command: "+h);return false}return this._invokeDoneCallbackRecv()},_invokeDeadCallbackRecvGen:function(h){if((h.length-h.idx)!==0){NgLogE("Could not parse due to wrong argument count in Emitter.invokeDeadCallback from command: "+h);return false}return this._invokeDeadCallbackRecv()},$_createSendGen:function(h){g.appendToCommandString(24182783,[+h])},_destroySendGen:function(){g.appendToCommandString(24117250,this)},_setDataSendGen:function(h){g.appendToCommandString(24117251,this,[+h])},_playSendGen:function(){g.appendToCommandString(24117252,this)},_stopSendGen:function(h){g.appendToCommandString(24117253,this,[+h])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[368]=this._instance||this;PROC_METHOD_TABLE[24117254]=this.prototype._invokeDoneCallbackRecvGen;PROC_METHOD_TABLE[24117255]=this.prototype._invokeDeadCallbackRecvGen}})}};__ngs._2k={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._6).Proc;var a=__ngs.r_(__ngs._z).Class;var e=b.Font=a.subclass({classname:"Font",initialize:function(g,l,h){this._isFontValid=false;this._fontFamily="";this._options=e.OptionFlags.DefaultOptions;this._location=e.FontLocation.Default;this._size=18;if(g&&typeof(g)=="string"){this._fontFamily=g}if(l&&typeof(l)=="object"){if(l.readFontAsync){this._options|=e.OptionFlags.ReadFontAsync}if(l.location){this._location=l.location}if(l.size){this._size=l.size}}else{h=l}this._nextCbId=1;this._cb={};this._storeCb=function(m){var n=-1;if(m&&typeof(m)=="function"){n=this._nextCbId++;this._cb[n]=m}return n};this._restoreCb=function(n){var m=function(){};if(n>=0){m=this._cb[n];delete this._cb[n]}return m};var k=__ngs.r_(__ngs._19).ObjectRegistry;k.register(this);this._createSendGen(this.__objectRegistryId,this._storeCb(h),this._fontFamily,this._options,this._location,this._size)},destroy:function(){this._destroySendGen();var g=__ngs.r_(__ngs._19).ObjectRegistry;g.unregister(this)},_onCreateCbRecv:function(m,h,l){var g=m&&this._restoreCb(m);if(g){var k=h?{code:h,description:l}:null;if(!k){this._isFontValid=true}g(k,this)}},getFontFamily:function(){return this._fontFamily},getFontLocation:function(){return this._location},getFontSize:function(){return this._size},ErrorCode:{NoError:0,Unknown:-1,NotFound:-2,Unsupported:-3},FontLocation:{Default:0,System:1,Bundled:2,Manifest:3},OptionFlags:{DefaultOptions:0,ReadFontAsync:1},_classId:369,_onCreateCbRecvGen:function(l){if((l.length-l.idx)!==3){NgLogE("Could not parse due to wrong argument count in Font.onCreateCb from command: "+l);return false}var k=d.parseInt(l[l.idx++]);if(k===undefined){NgLogE("Could not parse callbackId in Font.onCreateCb from command: "+l);return false}var g=d.parseInt(l[l.idx++]);if(g===undefined){NgLogE("Could not parse errCode in Font.onCreateCb from command: "+l);return false}var h=d.parseString(l[l.idx++]);if(h===undefined){NgLogE("Could not parse errStr in Font.onCreateCb from command: "+l);return false}return this._onCreateCbRecv(k,g,h)},$_createSendGen:function(k,n,h,l,g,m){d.appendToCommandString(24248319,[+k,+n,d.encodeString(h),+l,+g,+m])},_destroySendGen:function(){d.appendToCommandString(24182786,this)},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[369]=this._instance||this;PROC_METHOD_TABLE[24182787]=this.prototype._onCreateCbRecvGen}})}};__ngs._2l={_c:null,_d:function(){var h={exports:{}};var d=h.exports;this._c=h;var k=__ngs.r_(__ngs._6).Proc;var c=__ngs.r_(__ngs._19).ObjectRegistry;var b=__ngs.r_(__ngs._z).Class;var g=__ngs.r_(__ngs._2n).Node;var e=__ngs.r_(__ngs._2m).MotionData;var a=d.MotionController=b.subclass({classname:"MotionController",initialize:function(l){c.register(this);this._motionData=l;this._syncCallbacks={};this._timeScale=1;this._createSendGen(this.__objectRegistryId,l.__objectRegistryId)},destroy:function(){this._destroySendGen();c.unregister(this)},bind:function(m,o,p){var l,n;if(p instanceof Array){l=0;for(n=0;n<p.length;n++){l=l|p[n]}}else{if(typeof p==="number"){l=p}else{l=a.SyncFlags.All}}delete this._syncCallbacks[m];this._bindSendGen(m,o.__objectRegistryId,l);return this},unbind:function(l){delete this._syncCallbacks[l];this._unbindSendGen(l);return this},play:function(l){var m=l||a.PlayMode.Normal;this._playSendGen(m);return this},stop:function(){this._stopSendGen();return this},syncContinuous:function(m,o){var l,n;if(o instanceof Array){l=0;for(n=0;n<o.length;n++){l=l|o[n]}}else{if(typeof o==="number"){l=o}else{l=a.SyncFlags.All}}delete this._syncCallbacks[m];this._syncContinuousSendGen(m,l);return this},syncFrames:function(m,o,q,r){if(!(o instanceof Array)){throw new Error("TypeError: Expected frameArray to be an Array")}var l,n,p;if(q instanceof Array){l=0;for(n=0;n<q.length;n++){l=l|q[n]}}else{if(typeof q==="number"){l=q}else{l=a.SyncFlags.All}}if(r&&typeof r==="function"){this._syncCallbacks[m]=r;p=true}else{delete this._syncCallbacks[m];p=false}this._syncFramesSendGen(m,l,p,o.length);for(n=0;n<o.length;n++){this._frameSendGen(o[n])}return this},setTimeScale:function(l){this._setTimeScaleSendGen(l);this._timeScale=l;return this},getTimeScale:function(){return this._timeScale},_invokeCallbackRecv:function(m,n){var l=m&&this._syncCallbacks[m];if(l){l(this,n)}else{NgLogE("GL2.MotionController._invokeCallbackRecv command : No registered callback found, name = "+m)}},SyncFlags:{None:0,Position:1,Rotation:2,Scale:4,Alpha:8,Color:16,Ease:32,All:63},PlayMode:{Normal:0,Loop:1},_classId:363,_invokeCallbackRecvGen:function(m){if((m.length-m.idx)!==2){NgLogE("Could not parse due to wrong argument count in MotionController.invokeCallback from command: "+m);return false}var l=k.parseString(m[m.idx++]);if(l===undefined){NgLogE("Could not parse name in MotionController.invokeCallback from command: "+m);return false}var n=k.parseFloat(m[m.idx++]);if(n===undefined){NgLogE("Could not parse frame in MotionController.invokeCallback from command: "+m);return false}return this._invokeCallbackRecv(l,n)},$_createSendGen:function(m,l){k.appendToCommandString(23855103,[+m,+l])},_destroySendGen:function(){k.appendToCommandString(23789570,this)},_bindSendGen:function(l,n,m){k.appendToCommandString(23789571,this,[k.encodeString(l),+n,+m])},_unbindSendGen:function(l){k.appendToCommandString(23789572,this,[k.encodeString(l)])},_syncContinuousSendGen:function(l,m){k.appendToCommandString(23789573,this,[k.encodeString(l),+m])},_syncFramesSendGen:function(m,o,n,l){k.appendToCommandString(23789574,this,[k.encodeString(m),+o,(n?1:0),+l])},_frameSendGen:function(l){k.appendSubcommandToCommandString([+l])},_playSendGen:function(l){k.appendToCommandString(23789576,this,[+l])},_stopSendGen:function(){k.appendToCommandString(23789577,this)},_setTimeScaleSendGen:function(l){k.appendToCommandString(23789579,this,[+l])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[363]=this._instance||this;PROC_METHOD_TABLE[23789578]=this.prototype._invokeCallbackRecvGen}})}};__ngs._2m={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var e=__ngs.r_(__ngs._6).Proc;var a=__ngs.r_(__ngs._z).Class;var c=b.MotionData=a.subclass({classname:"MotionData",initialize:function(){var g=__ngs.r_(__ngs._19).ObjectRegistry;g.register(this);this._createSendGen(this.__objectRegistryId);this._callbackIndexCounter=1;this._callbacks=[]},destroy:function(){this._destroySendGen();var g=__ngs.r_(__ngs._19).ObjectRegistry;g.unregister(this)},isDataFormatSupported:function(h){var g=__ngs.r_(__ngs._7).Capabilities;if(g.meetsBinaryVersion){if(g.meetsBinaryVersion([1,9,5,0,0])){return(h==c.DataFormat.FlashClassicTween||h==c.DataFormat.FlashClassicTween2||h==c.DataFormat.MultiChannel)}else{if(g.meetsBinaryVersion([1,7,0,0,0])){return h===c.DataFormat.FlashClassicTween}}}else{return false}},initFromData:function(g,l,k){var h;if(this.isDataFormatSupported(l)){if(typeof g==="string"||typeof g==="object"){h=this._callbackIndexCounter++;this._callbacks[h]=k;if(typeof g==="string"){this._initFromDataSendGen(g,l,h)}else{this._initFromDataSendGen(JSON.stringify(g),l,h)}}else{if(k&&typeof k==="function"){k("Expected Object or String")}}}else{if(k&&typeof k==="function"){k("Data Format Not Supported")}}return this},initFromJSONFile:function(g,l,k){var h;if(this.isDataFormatSupported(l)){if(typeof g==="string"){h=this._callbackIndexCounter++;this._callbacks[h]=k;this._initFromJSONFileSendGen(g,l,h)}else{k("Invalid filename")}}else{if(k&&typeof k==="function"){k("Data Format Not Supported")}}return this},_invokeCallbackRecv:function(k,h){var g=k&&this._callbacks[k];if(g){delete this._callbacks[k];g(h,this)}else{NgLogE("GL2.MotionData._invokeCallbackRecv command : No registered callback found, id = "+k)}},DataFormat:{FlashClassicTween:0,FlashClassicTween2:1,MultiChannel:2},_classId:364,_invokeCallbackRecvGen:function(k){if((k.length-k.idx)!==2){NgLogE("Could not parse due to wrong argument count in MotionData.invokeCallback from command: "+k);return false}var h=e.parseInt(k[k.idx++]);if(h===undefined){NgLogE("Could not parse callbackId in MotionData.invokeCallback from command: "+k);return false}var g=e.parseString(k[k.idx++]);if(g===undefined){NgLogE("Could not parse error in MotionData.invokeCallback from command: "+k);return false}return this._invokeCallbackRecv(h,g)},$_createSendGen:function(g){e.appendToCommandString(23920639,[+g])},_destroySendGen:function(){e.appendToCommandString(23855106,this)},_initFromDataSendGen:function(g,k,h){e.appendToCommandString(23855107,this,[e.encodeString(g),+k,+h])},_initFromJSONFileSendGen:function(g,k,h){e.appendToCommandString(23855108,this,[e.encodeString(g),+k,+h])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[364]=this._instance||this;PROC_METHOD_TABLE[23855109]=this.prototype._invokeCallbackRecvGen}})}};__ngs._2n={_c:null,_d:function(){var d={exports:{}};var g=d.exports;this._c=d;var m=__ngs.r_(__ngs._6).Proc;var b=__ngs.r_(__ngs._z).Class;var e=__ngs.r_(__ngs._19).ObjectRegistry;var l=__ngs.r_(__ngs._1v).Point;var h=__ngs.r_(__ngs._1u).Vector;var c=__ngs.r_(__ngs._1t).Color;var a=__ngs.r_(__ngs._1x).Rect;var k=g.Node=b.subclass({classname:"Node",initialize:function(){e.register(this);this._parent=null;this._position=l.pool.get();this._scale=h.pool.get(1,1);this._color=c.pool.get(1,1,1);this._alpha=1;this._rotation=0;this._depth=0;this._visible=true;this._touchable=true;this._childrenDepthGrouped=true;this._children=[];this._clipRect=a.pool.get(0,0,-1,-1);this._clipRectEnabled=false;this._createSendGen(this.__objectRegistryId)},destroy:function(){var n=this._children;while(n.length){this.removeChild(n[0])}if(this._parent){this._parent.removeChild(this)}l.pool.put(this._position);h.pool.put(this._scale);c.pool.put(this._color);a.pool.put(this._clipRect);this._destroySendGen();e.unregister(this)},getPosition:function(){return this._position},getScale:function(){return this._scale},getColor:function(){return this._color},getAlpha:function(){return this._alpha},getRotation:function(){return this._rotation},getDepth:function(){return this._depth},getVisible:function(){return this._visible},getTouchable:function(){return this._touchable},getChildrenDepthGrouped:function(){return this._childrenDepthGrouped},getClipRect:function(){return this._clipRect},getClipRectEnabled:function(){return this._clipRectEnabled},getParent:function(){return this._parent},getChildren:function(){return this._children.slice()},setPosition:function(n,q){var o=this._position;o.setAll(n,q);this._setPositionSendGen(o.getX(),o.getY());return this},setScale:function(o){var n=this._scale;if(typeof o==="number"&&arguments.length===1){n.setAll(o,o)}else{n.setAll.apply(n,arguments)}this._setScaleSendGen(n.getX(),n.getY());return this},setColor:function(n){var o=this._color;o.setAll.apply(o,arguments);this._setColorSendGen(o.getRed(),o.getGreen(),o.getBlue());return this},setAlpha:function(n){this._alpha=n;this._setAlphaSendGen(n);return this},setRotation:function(n){this._rotation=n;this._setRotationSendGen(n);return this},setDepth:function(n){if(this._depth!=n){this._depth=n;this._setDepthSendGen(n)}return this},setVisible:function(n){if(this._visible!=n){this._visible=n;this._setVisibleSendGen(n)}return this},setTouchable:function(n){this._touchable=n;this._setTouchableSendGen(n);return this},setChildrenDepthGrouped:function(n){if(this._childrenDepthGrouped!=n){this._childrenDepthGrouped=n;this._setChildrenDepthGroupedSendGen(n)}return this},addChild:function(n){this._children.push(n);n._didAddToParent(this);this._addChildSendGen(e.objectToId(n));return this},removeChild:function(o){o._willRemoveFromParent();var n=this._children.indexOf(o);if(n==-1){throw new Error("removeChild called for a node that is not a child")}this._children.splice(n,1);this._removeChildSendGen(e.objectToId(o));return this},screenToLocal:function(B){var A=this._parent;if(!A){return undefined}B=A.screenToLocal(B);if(!B){return undefined}var z=B.getX();var w=B.getY();var o=this._position;z-=o.getX();w-=o.getY();if(this._rotation!=0){var n=this._rotation*Math.PI/180;var q=Math.cos(n);var v=Math.sin(n);var u=q*z+v*w;var t=-v*z+q*w;z=u;w=t}var C=this._scale;B.setX(z/C.getX());B.setY(w/C.getY());return B},localToScreen:function(B){var z=B.getX();var w=B.getY();var D=this._scale;z*=D.getX();w*=D.getY();if(this._rotation!=0){var n=-this._rotation*Math.PI/180;var q=Math.cos(n);var v=Math.sin(n);var u=q*z+v*w;var t=-v*z+q*w;z=u;w=t}var o=this._position;z+=o.getX();w+=o.getY();var A=this._parent;if(!A){return undefined}var C=l.pool.get(z,w);B=A.localToScreen(C);l.pool.put(C);if(!B){return undefined}return B},setClipRect:function(q){var p=this._clipRect;p.setAll.apply(p,arguments);var r=p.getOrigin();var n=p.getSize();this._setClipRectSendGen(r.getX(),r.getY(),n.getWidth(),n.getHeight());return this},setClipRectEnabled:function(n){if(this._clipRectEnabled!=n){this._clipRectEnabled=n;this._setClipRectEnabledSendGen(n)}return this},_didAddToParent:function(n){if(this._parent){this._parent.removeChild(this)}this._parent=n},_willRemoveFromParent:function(){this._parent=null},_synchronizeNodeRecv:function(n,p,o){this._position.setAll(n,p);this._rotation=o},_synchronizeNodePosRecv:function(n,o){this._position.setAll(n,o)},_synchronizeNodeRotRecv:function(n){this._rotation=n},_synchronizeNodeScaleRecv:function(o,n){this._scale.setAll(o,n)},_synchronizeNodeAlphaRecv:function(n){this._alpha=n},_synchronizeNodeColorRecv:function(p,o,n){this._color.setAll(p,o,n)},_classId:307,_synchronizeNodeRecvGen:function(p){if((p.length-p.idx)!==3){NgLogE("Could not parse due to wrong argument count in Node.synchronizeNode from command: "+p);return false}var n=m.parseFloat(p[p.idx++]);if(n===undefined){NgLogE("Could not parse x in Node.synchronizeNode from command: "+p);return false}var q=m.parseFloat(p[p.idx++]);if(q===undefined){NgLogE("Could not parse y in Node.synchronizeNode from command: "+p);return false}var o=m.parseFloat(p[p.idx++]);if(o===undefined){NgLogE("Could not parse rotation in Node.synchronizeNode from command: "+p);return false}return this._synchronizeNodeRecv(n,q,o)},_synchronizeNodePosRecvGen:function(o){if((o.length-o.idx)!==2){NgLogE("Could not parse due to wrong argument count in Node.synchronizeNodePos from command: "+o);return false}var n=m.parseFloat(o[o.idx++]);if(n===undefined){NgLogE("Could not parse x in Node.synchronizeNodePos from command: "+o);return false}var p=m.parseFloat(o[o.idx++]);if(p===undefined){NgLogE("Could not parse y in Node.synchronizeNodePos from command: "+o);return false}return this._synchronizeNodePosRecv(n,p)},_synchronizeNodeRotRecvGen:function(o){if((o.length-o.idx)!==1){NgLogE("Could not parse due to wrong argument count in Node.synchronizeNodeRot from command: "+o);return false}var n=m.parseFloat(o[o.idx++]);if(n===undefined){NgLogE("Could not parse rotation in Node.synchronizeNodeRot from command: "+o);return false}return this._synchronizeNodeRotRecv(n)},_synchronizeNodeScaleRecvGen:function(n){if((n.length-n.idx)!==2){NgLogE("Could not parse due to wrong argument count in Node.synchronizeNodeScale from command: "+n);return false}var p=m.parseFloat(n[n.idx++]);if(p===undefined){NgLogE("Could not parse sx in Node.synchronizeNodeScale from command: "+n);return false}var o=m.parseFloat(n[n.idx++]);if(o===undefined){NgLogE("Could not parse sy in Node.synchronizeNodeScale from command: "+n);return false}return this._synchronizeNodeScaleRecv(p,o)},_synchronizeNodeAlphaRecvGen:function(n){if((n.length-n.idx)!==1){NgLogE("Could not parse due to wrong argument count in Node.synchronizeNodeAlpha from command: "+n);return false}var o=m.parseFloat(n[n.idx++]);if(o===undefined){NgLogE("Could not parse alpha in Node.synchronizeNodeAlpha from command: "+n);return false}return this._synchronizeNodeAlphaRecv(o)},_synchronizeNodeColorRecvGen:function(p){if((p.length-p.idx)!==3){NgLogE("Could not parse due to wrong argument count in Node.synchronizeNodeColor from command: "+p);return false}var q=m.parseFloat(p[p.idx++]);if(q===undefined){NgLogE("Could not parse red in Node.synchronizeNodeColor from command: "+p);return false}var o=m.parseFloat(p[p.idx++]);if(o===undefined){NgLogE("Could not parse green in Node.synchronizeNodeColor from command: "+p);return false}var n=m.parseFloat(p[p.idx++]);if(n===undefined){NgLogE("Could not parse blue in Node.synchronizeNodeColor from command: "+p);return false}return this._synchronizeNodeColorRecv(q,o,n)},$_createSendGen:function(n){m.appendToCommandString(20185087,[+n])},_destroySendGen:function(){m.appendToCommandString(20119554,this)},_setPositionSendGen:function(n,o){m.appendToCommandString(20119555,this,[+n,+o])},_setScaleSendGen:function(n,o){m.appendToCommandString(20119556,this,[+n,+o])},_setColorSendGen:function(p,o,n){m.appendToCommandString(20119557,this,[+p,+o,+n])},_setAlphaSendGen:function(n){m.appendToCommandString(20119558,this,[+n])},_setRotationSendGen:function(n){m.appendToCommandString(20119559,this,[+n])},_setDepthSendGen:function(n){m.appendToCommandString(20119560,this,[+n])},_setVisibleSendGen:function(n){m.appendToCommandString(20119561,this,[(n?1:0)])},_setTouchableSendGen:function(n){m.appendToCommandString(20119562,this,[(n?1:0)])},_setChildrenDepthGroupedSendGen:function(n){m.appendToCommandString(20119563,this,[(n?1:0)])},_addChildSendGen:function(n){m.appendToCommandString(20119564,this,[+n])},_removeChildSendGen:function(n){m.appendToCommandString(20119565,this,[+n])},_setClipRectSendGen:function(n,q,o,p){m.appendToCommandString(20119567,this,[+n,+q,+o,+p])},_setClipRectEnabledSendGen:function(n){m.appendToCommandString(20119568,this,[(n?1:0)])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[307]=this._instance||this;PROC_METHOD_TABLE[20119566]=this.prototype._synchronizeNodeRecvGen;PROC_METHOD_TABLE[20119569]=this.prototype._synchronizeNodePosRecvGen;PROC_METHOD_TABLE[20119570]=this.prototype._synchronizeNodeRotRecvGen;PROC_METHOD_TABLE[20119571]=this.prototype._synchronizeNodeScaleRecvGen;PROC_METHOD_TABLE[20119572]=this.prototype._synchronizeNodeAlphaRecvGen;PROC_METHOD_TABLE[20119573]=this.prototype._synchronizeNodeColorRecvGen}})}};__ngs._2o={_c:null,_d:function(){var b={exports:{}};var e=b.exports;this._c=b;var l=__ngs.r_(__ngs._6).Proc;var a=__ngs.r_(__ngs._z).Class;var h=__ngs.r_(__ngs._2n).Node;var g=__ngs.r_(__ngs._2h).Animation;var c=__ngs.r_(__ngs._2u).Texture;var d=__ngs.r_(__ngs._19).ObjectRegistry;var k=e.Primitive=h.subclass({classname:"Primitive",initialize:function(){this._animation=null;this._ownsAnimation=false;var m=__ngs.r_(__ngs._1y).MessageEmitter;this._animationCompleteEmitter=new m();this._type=this.Type.Triangles;this._vertexes=[]},destroy:function(){var m=this._unhookOwnedAnimation();if(m){m.destroy()}this._animationCompleteEmitter.destroy()},getVertexCount:function(){return this._vertexes.length},getVertex:function(m){return this._vertexes[m]},getType:function(){return this._type},getAnimation:function(){if(this._ownsAnimation){return null}return this._animation},getAnimationCompleteEmitter:function(){return this._animationCompleteEmitter},setAnimation:function(o,n){var m=this._unhookOwnedAnimation();this._animation=o;this._setAnimationSendGen(d.objectToId(o),n||0);if(m){m.destroy()}},setImage:function(s,p,n,o){var r=this._unhookOwnedAnimation();var m=Array.prototype.slice.call(arguments,0);if(s.classname==="Texture"){m[0]=s.getFilename()}m.splice(1,0,0);var t=new g.Frame(m[0],m[1],m[2],m[3],m[4]);var q=new g();q.pushFrame(t);this._animation=q;this._ownsAnimation=true;this._setAnimationSendGen(d.objectToId(q),0);if(r){r.destroy()}return this},setType:function(m){this._type=m;this._setTypeSendGen(m);return this},pushVertex:function(m){return this.spliceVertexes(this._vertexes.length,0,m)},setVertex:function(m,n){return this.spliceVertexes(m,1,n)},spliceVertexes:function(n,u,p){this._vertexes.splice.apply(this._vertexes,arguments);var m=arguments.length-2;this._spliceVertexesSendGen(n,u,m);for(var r=0;r<m;++r){var t=arguments[r+2];var s=t.getPosition();var o=t.getUV();var q=t.getColor();this._vertexSendGen(s.getX(),s.getY(),o.getX(),o.getY(),q.getRed(),q.getGreen(),q.getBlue())}return this},$Vertex:a.subclass({classname:"Vertex",initialize:function(m,o,n){var p=__ngs.r_(__ngs._1v).Point;var q=__ngs.r_(__ngs._1t).Color;this._position=p.pool.get(m);this._uv=p.pool.get(o);this._color=q.pool.get(n)},getPosition:function(){return this._position},getUV:function(){return this._uv},getColor:function(){return this._color}}),_unhookOwnedAnimation:function(){var m=undefined;if(this._ownsAnimation){this._setAnimationSendGen(0,0);m=this._animation;this._animation=null;this._ownsAnimation=false}this._animation=null;this._image=null;return m},Type:{Triangles:0,TriangleStrip:1,TriangleFan:2,LineList:3},_classId:308,_animationCompleteRecvGen:function(m){if((m.length-m.idx)!==0){NgLogE("Could not parse due to wrong argument count in Primitive.animationComplete from command: "+m);return false}return this._animationCompleteRecv()},$_createSendGen:function(m){l.appendToCommandString(20250623,[+m])},_spliceVertexesSendGen:function(o,m,n){l.appendToCommandString(20185090,this,[+o,+m,+n])},_vertexSendGen:function(n,s,p,o,r,q,m){l.appendSubcommandToCommandString([+n,+s,+p,+o,+r,+q,+m])},_setTypeSendGen:function(m){l.appendToCommandString(20185092,this,[+m])},_setAnimationSendGen:function(n,m){l.appendToCommandString(20185093,this,[+n,+m])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[308]=this._instance||this;PROC_METHOD_TABLE[20185094]=this.prototype._animationCompleteRecvGen}})}};__ngs._2p={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var g=__ngs.r_(__ngs._6).Proc;var b=__ngs.r_(__ngs._z).Class;var a=__ngs.r_(__ngs._19).ObjectRegistry;var e=c.Touch=b.subclass({classname:"Touch",initialize:function(){this._id=0;this._action={};var h=__ngs.r_(__ngs._1v).Point;this._position=new h();this._targetIds=null;this._targetIdMap={}},getTouchTargets:function(){var m=this._targetIds;var h=[];if(m){for(var l=0;l<m.length;l++){var k=a.idToObject(m[l]);if(k){h.push(k)}}}return h},getIsInside:function(h){return(a.objectToId(h) in this._targetIdMap)},getPosition:function(){return this._position},getId:function(){return this._id},getAction:function(){return this._action},_setId:function(h){this._id=h},_setAction:function(h){this._action=h},_setPosition:function(h){this._position.setAll(arguments)},_setTargetIds:function(h){this._targetIds=h.slice();this._targetIdMap={};for(var k=0;k<h.length;k++){this._targetIdMap[h[k]]=null}},Action:{Start:0,End:1,Move:2},_classId:312,__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[312]=this._instance||this}})}};__ngs._2q={_c:null,_d:function(){var e={exports:{}};var a=e.exports;this._c=e;var d=__ngs.r_(__ngs._2n).Node;var c=__ngs.r_(__ngs._2s).Sprite;var g=__ngs.r_(__ngs._6).Proc;var b=a.TouchTarget=d.subclass({classname:"TouchTarget",initialize:function(){var k=__ngs.r_(__ngs._1w).Size;var l=__ngs.r_(__ngs._1v).Point;var h=__ngs.r_(__ngs._1y).MessageEmitter;this._size=new k();this._anchor=new l(0,0);this._touchEmitter=new h()},destroy:function(){},getSize:function(){return this._size},getAnchor:function(){return this._anchor},getTouchEmitter:function(){return this._touchEmitter},setSize:function(h){var k=this._size;k.setAll.apply(k,arguments);this._setSizeSendGen(k.getWidth(),k.getHeight());return this},setAnchor:function(k){var h=this._anchor;h.setAll.apply(h,arguments);this._setAnchorSendGen(h.getX(),h.getY());return this},_classId:313,$_createSendGen:function(h){g.appendToCommandString(20578303,[+h])},_setSizeSendGen:function(k,h){g.appendToCommandString(20512770,this,[+k,+h])},_setAnchorSendGen:function(h,k){g.appendToCommandString(20512771,this,[+h,+k])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[313]=this._instance||this}})}};__ngs._2r={_c:null,_d:function(){var d={exports:{}};var h=d.exports;this._c=d;var n=__ngs.r_(__ngs._6).Proc;var b=__ngs.r_(__ngs._z).Class;var l=__ngs.r_(__ngs._1v).Point;var g=__ngs.r_(__ngs._19).ObjectRegistry;var e=__ngs.r_(__ngs._2p).Touch;var m=__ngs.r_(__ngs._2w).Diagnostics;var k=__ngs.r_(__ngs._2n).Node;var c=[];if(typeof $APP_REQUIREPATHMAP!="undefined"){$APP_REQUIREPATHMAP["NGCore/Client/GL2/Root.js"]=h}var a=h.Root=b.singleton({classname:"Root",initialize:function(){g.register(this);m.pushCollector(this.nodesInGraph.bind(this));this._children=[];this._createSendGen(this.__objectRegistryId);this._touchTracking={}},addChild:function(o){this._children.push(o);o._didAddToParent(this);this._addChildSendGen(g.objectToId(o))},removeChild:function(p){p._willRemoveFromParent();var o=this._children.indexOf(p);if(o==-1){throw new Error("removeChild called for a node that is not a child")}this._children.splice(o,1);this._removeChildSendGen(g.objectToId(p))},screenToLocal:function(o){return l.pool.get(o)},localToScreen:function(o){return l.pool.get(o)},_onTouchEventRecv:function(A,B,w,v,s,C){var t=new e();var u,r,q;t._setId(A);t._setAction(B);t._setPosition(w,v);t._setTargetIds(C);switch(B){case e.Action.Start:for(var z in C){var p=C[z];r=g.idToObject(p);if(r&&r.getTouchEmitter().chain(t)){this._touchTracking[A]=p;break}}break;case e.Action.End:q=this._touchTracking[A];if(q){r=g.idToObject(q);if(r){r.getTouchEmitter().chain(t)}delete this._touchTracking[t.getId()]}break;case e.Action.Move:q=this._touchTracking[A];if(q){r=g.idToObject(q);if(r){r.getTouchEmitter().chain(t)}}break}},_classId:309,_onTouchEventRecvGen:function(s){if((s.length-s.idx)<5){NgLogE("Could not parse due to wrong argument count in Root.onTouchEvent from command: "+s);return false}var p=n.parseInt(s[s.idx++]);if(p===undefined){NgLogE("Could not parse touchId in Root.onTouchEvent from command: "+s);return false}var t=n.parseInt(s[s.idx++]);if(t===undefined){NgLogE("Could not parse touchAction in Root.onTouchEvent from command: "+s);return false}var o=n.parseFloat(s[s.idx++]);if(o===undefined){NgLogE("Could not parse x in Root.onTouchEvent from command: "+s);return false}var u=n.parseFloat(s[s.idx++]);if(u===undefined){NgLogE("Could not parse y in Root.onTouchEvent from command: "+s);return false}var r=n.parseInt(s[s.idx++]);if(r===undefined){NgLogE("Could not parse touchTargetCount in Root.onTouchEvent from command: "+s);return false}for(var q=0;q<r;q++){c[q]=this._touchTargetRecvGen(s)}c.length=r||0;return this._onTouchEventRecv(p,t,o,u,r,c)},_touchTargetRecvGen:function(o){if((o.length-o.idx)<1){NgLogE("Could not parse due to wrong argument count in Root.touchTarget from command: "+o);return false}var p=n.parseInt(o[o.idx++]);if(p===undefined){NgLogE("Could not parse nodeId in Root.touchTarget from command: "+o);return false}return p},$_createSendGen:function(o){n.appendToCommandString(20316159,[+o])},_addChildSendGen:function(o){n.appendToCommandString(20250626,this,[+o])},_removeChildSendGen:function(o){n.appendToCommandString(20250627,this,[+o])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[309]=this._instance||this;PROC_METHOD_TABLE[20250628]=this.prototype._onTouchEventRecvGen;PROC_METHOD_TABLE[20250629]=this.prototype._touchTargetRecvGen},nodesInGraph:function(p){var r={graph_nodes:0};var o=this._children.slice();while(o.length>0){var q=o.shift();o=o.concat(q._children);r.graph_nodes++}return r}})}};__ngs._2s={_c:null,_d:function(){var g={exports:{}};var b=g.exports;this._c=g;var k=__ngs.r_(__ngs._6).Proc;var a=__ngs.r_(__ngs._19).ObjectRegistry;var d=__ngs.r_(__ngs._2n).Node;var h=__ngs.r_(__ngs._2h).Animation;var e=__ngs.r_(__ngs._2u).Texture;var c=b.Sprite=d.subclass({classname:"Sprite",initialize:function(){this._clubObject=null;this._animation=null;this._ownsAnimation=false;var l=__ngs.r_(__ngs._1y).MessageEmitter;this._animationCompleteEmitter=new l()},destroy:function(){var l=this._unhookOwnedAnimation();if(l){l.destroy()}this._animationCompleteEmitter.destroy()},getAnimation:function(){if(this._ownsAnimation){return null}return this._animation},getAnimationCompleteEmitter:function(){return this._animationCompleteEmitter},setAnimation:function(n,m){var l=this._unhookOwnedAnimation();this._animation=n;this._setAnimationSendGen(a.objectToId(n),m||0);if(l){l.destroy()}return this},setImage:function(r,o,m,n){var q=this._unhookOwnedAnimation();var l=Array.prototype.slice.call(arguments,0);if(r.classname==="Texture"){l[0]=r.getFilename()}l.splice(1,0,0);var s=new h.Frame(l[0],l[1],l[2],l[3],l[4]);var p=new h();p.pushFrame(s);this._animation=p;this._ownsAnimation=true;this._setAnimationSendGen(a.objectToId(p),0);if(q){q.destroy()}return this},_unhookOwnedAnimation:function(){var l=undefined;if(this._ownsAnimation){this._setAnimationSendGen(0,0);l=this._animation;this._animation=null;this._ownsAnimation=false}this._animation=null;return l},_animationCompleteRecv:function(){this._animationCompleteEmitter.emit(this)},_classId:310,_animationCompleteRecvGen:function(l){if((l.length-l.idx)!==0){NgLogE("Could not parse due to wrong argument count in Sprite.animationComplete from command: "+l);return false}return this._animationCompleteRecv()},$_createSendGen:function(l){k.appendToCommandString(20381695,[+l])},_setAnimationSendGen:function(m,l){k.appendToCommandString(20316162,this,[+m,+l])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[310]=this._instance||this;PROC_METHOD_TABLE[20316163]=this.prototype._animationCompleteRecvGen}})}};__ngs._2t={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var g=__ngs.r_(__ngs._6).Proc;var a=__ngs.r_(__ngs._z).Class;var c=__ngs.r_(__ngs._2n).Node;var h=__ngs.r_(__ngs._2k).Font;var e=b.Text=c.subclass({classname:"Text",initialize:function(m){var k=__ngs.r_(__ngs._1w).Size;var l=__ngs.r_(__ngs._1v).Point;this._size=new k();this._anchor=new l(0.5,0.5);this._horizontalAlign=this.HorizontalAlign.Center;this._verticalAlign=this.VerticalAlign.Middle;this._text="";if(m){this.setText(m)}this._fontFamily="";this._fontSize=18;this._overflowMode=this.OverflowMode.Multiline;this._fontLocation=this.FontLocation.Default;this._font=null;this._callbackIdCounter=1;this._callbacks={};this._textMarkup="";this._usingMarkup=false},destroy:function(){},getSize:function(){return this._size},getAnchor:function(){return this._anchor},getHorizontalAlign:function(){return this._horizontalAlign},getVerticalAlign:function(){return this._verticalAlign},getText:function(){return this._text},getTextMarkup:function(){return this._markupText},getFontFamily:function(){return this._fontFamily},getFontSize:function(){return this._fontSize},getOverflowMode:function(){return this._overflowMode},setSize:function(k){var l=this._size;l.setAll.apply(l,arguments);this._setSizeSendGen(l.getWidth(),l.getHeight());return this},setAnchor:function(l){var k=this._anchor;k.setAll.apply(k,arguments);this._setAnchorSendGen(k.getX(),k.getY());return this},setHorizontalAlign:function(k){this._horizontalAlign=k;this._setHorizontalAlignSendGen(k);return this},setVerticalAlign:function(k){this._verticalAlign=k;this._setVerticalAlignSendGen(k);return this},setText:function(k){this._text=k;this._usingMarkup=false;this._setTextSendGen(k);return this},setTextMarkup:function(k,l,n){this._markupText=k;this._usingMarkup=true;var m=this._callbackIdCounter++;this._callbacks[m]=n;this._setTextMarkupSendGen(k,l,m);return this},_setTextMarkupCbRecv:function(l,k){var m=l&&this._callbacks[l];if(m){delete this._callbacks[l];m(k)}},isFormatSupported:function(k){if(Core.Capabilities.meetsBinaryVersion("1.10")){return(k==this.MarkupFormat.ColorMarkupFormat)}return false},setFontFamily:function(k){this._fontFamily=k;this._setFontFamilySendGen(k);this._font=null;return this},setFontSize:function(k){this._fontSize=k;this._setFontSizeSendGen(k);this._font=null;return this},setOverflowMode:function(k){this._overflowMode=k;this._setOverflowModeSendGen(k);return this},setFontLocation:function(k){this._fontLocation=k;this._setFontLocationSendGen(k);this._font=null;return this},measureArea:function(l){var k=this._callbackIdCounter++;this._callbacks[k]=l;this._measureAreaSendGen(k)},_measureAreaCbRecv:function(l,k){var m=l&&this._callbacks[l];if(m){delete this._callbacks[l];m(k)}},setFont:function(l){this._font=l;var k=__ngs.r_(__ngs._19).ObjectRegistry;this._setFontSendGen(k.objectToId(l));return this},HorizontalAlign:{Left:0,Center:1,Right:2},VerticalAlign:{Top:0,Middle:1,Bottom:2},OverflowMode:{ReduceFontSize:0,Multiline:1},FontLocation:{Default:0,System:1,Bundled:2,Manifest:3},ErrorCode:{UnknownError:-1,MarkupTextParseError:1,UnsupportedMarkupFormat:2},MarkupFormat:{ColorMarkupFormat:1},_classId:311,_measureAreaCbRecvGen:function(m){if((m.length-m.idx)!==2){NgLogE("Could not parse due to wrong argument count in Text.measureAreaCb from command: "+m);return false}var l=g.parseInt(m[m.idx++]);if(l===undefined){NgLogE("Could not parse callbackId in Text.measureAreaCb from command: "+m);return false}var k=g.parseObject(m[m.idx++]);if(k===undefined){NgLogE("Could not parse result in Text.measureAreaCb from command: "+m);return false}return this._measureAreaCbRecv(l,k)},_setTextMarkupCbRecvGen:function(m){if((m.length-m.idx)!==2){NgLogE("Could not parse due to wrong argument count in Text.setTextMarkupCb from command: "+m);return false}var l=g.parseInt(m[m.idx++]);if(l===undefined){NgLogE("Could not parse callbackId in Text.setTextMarkupCb from command: "+m);return false}var k=g.parseObject(m[m.idx++]);if(k===undefined){NgLogE("Could not parse result in Text.setTextMarkupCb from command: "+m);return false}return this._setTextMarkupCbRecv(l,k)},$_createSendGen:function(k){g.appendToCommandString(20447231,[+k])},_destroySendGen:function(){g.appendToCommandString(20381698,this)},_setSizeSendGen:function(l,k){g.appendToCommandString(20381699,this,[+l,+k])},_setAnchorSendGen:function(k,l){g.appendToCommandString(20381700,this,[+k,+l])},_setHorizontalAlignSendGen:function(k){g.appendToCommandString(20381701,this,[+k])},_setVerticalAlignSendGen:function(k){g.appendToCommandString(20381702,this,[+k])},_setTextSendGen:function(k){g.appendToCommandString(20381703,this,[g.encodeString(k)])},_setFontFamilySendGen:function(k){g.appendToCommandString(20381704,this,[g.encodeString(k)])},_setFontSizeSendGen:function(k){g.appendToCommandString(20381705,this,[+k])},_setOverflowModeSendGen:function(k){g.appendToCommandString(20381706,this,[+k])},_setFontLocationSendGen:function(k){g.appendToCommandString(20381707,this,[+k])},_measureAreaSendGen:function(k){g.appendToCommandString(20381708,this,[+k])},_setFontSendGen:function(k){g.appendToCommandString(20381710,this,[+k])},_setTextMarkupSendGen:function(k,l,m){g.appendToCommandString(20381711,this,[g.encodeString(k),+l,+m])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[311]=this._instance||this;PROC_METHOD_TABLE[20381709]=this.prototype._measureAreaCbRecvGen;PROC_METHOD_TABLE[20381712]=this.prototype._setTextMarkupCbRecvGen}})}};__ngs._2u={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var e=__ngs.r_(__ngs._6).Proc;var a=__ngs.r_(__ngs._z).Class;var c=b.Texture=a.subclass({classname:"Texture",initialize:function(k,l,g){this._isImageValid=false;this._filename="";this._options=c.OptionFlags.Default;this._minFilter=c.FilterMode.Linear;this._magFilter=c.FilterMode.Linear;this._wrapS=c.WrapMode.Clamp;this._wrapT=c.WrapMode.Clamp;if(k&&typeof(k)=="string"){this._filename=k}if(l&&typeof(l)=="object"){if(l.readImageAsync){this._options|=c.OptionFlags.ReadImageAsync}if(l.truecolorDepth16){this._options|=c.OptionFlags.TruecolorDepth_BPP16}if(l.minFilter){this._minFilter=l.minFilter}if(l.magFilter){this._magFilter=l.magFilter}if(l.wrapS){this._wrapS=l.wrapS}if(l.wrapT){this._wrapT=l.wrapT}}else{g=l}this._nextCbId=1;this._cb={};this._storeCb=function(m){var n=-1;if(m&&typeof(m)=="function"){n=this._nextCbId++;this._cb[n]=m}return n};this._restoreCb=function(n){var m=function(){};if(n>=0){m=this._cb[n];delete this._cb[n]}return m};var h=__ngs.r_(__ngs._19).ObjectRegistry;h.register(this);this._createSendGen(this.__objectRegistryId,this._storeCb(g),this._filename,this._options,this._minFilter,this._magFilter,this._wrapS,this._wrapT)},destroy:function(){this._destroySendGen();var g=__ngs.r_(__ngs._19).ObjectRegistry;g.unregister(this)},getFilename:function(){return this._filename},setFilterModes:function(g,h){this._minFilter=g;this._magFilter=h;this._setFilterModesSendGen(g,h);return this},getFilterModes:function(){return{minFilter:this._minFilter,magFilter:this._magFilter}},setWrapModes:function(h,g){this._wrapS=h;this._wrapT=g;this._setWrapModesSendGen(h,g);return this},getWrapModes:function(){return{wrapS:this._wrapS,wrapT:this._wrapT}},$readImageInfo:function(g,h){if(!this._readCallbacks){this._readCallbacks={uidGenerator:1}}this._readCallbacks[++this._readCallbacks.uidGenerator]=h;this._readImageInfoSendGen(this._readCallbacks.uidGenerator,g)},_onCreateCbRecv:function(m,h,l){this._isImageValid=!h;var g=m&&this._restoreCb(m);if(g){var k=h?{code:h,description:l}:null;g(k,this)}},$_readImageInfoCbRecv:function(p,k,o,m,h,l){var g=p&&this._readCallbacks[p];if(g){delete this._readCallbacks[p];var n=k?{code:k,description:o}:null;g(n,m,h,l)}},ErrorCode:{NoError:0,Unknown:-1,NotFound:-2,Unsupported:-3},FilterMode:{Nearest:1,Linear:2},OptionFlags:{Default:0,ReadImageAsync:1,TruecolorDepth_BPP16:2},WrapMode:{Clamp:1,Repeat:2},_classId:365,_onCreateCbRecvGen:function(l){if((l.length-l.idx)!==3){NgLogE("Could not parse due to wrong argument count in Texture.onCreateCb from command: "+l);return false}var k=e.parseInt(l[l.idx++]);if(k===undefined){NgLogE("Could not parse callbackId in Texture.onCreateCb from command: "+l);return false}var g=e.parseInt(l[l.idx++]);if(g===undefined){NgLogE("Could not parse errCode in Texture.onCreateCb from command: "+l);return false}var h=e.parseString(l[l.idx++]);if(h===undefined){NgLogE("Could not parse errStr in Texture.onCreateCb from command: "+l);return false}return this._onCreateCbRecv(k,g,h)},$_readImageInfoCbRecvGen:function(o){if((o.length-o.idx)!==6){NgLogE("Could not parse due to wrong argument count in Texture.readImageInfoCb from command: "+o);return false}var n=e.parseInt(o[o.idx++]);if(n===undefined){NgLogE("Could not parse callbackId in Texture.readImageInfoCb from command: "+o);return false}var h=e.parseInt(o[o.idx++]);if(h===undefined){NgLogE("Could not parse errCode in Texture.readImageInfoCb from command: "+o);return false}var m=e.parseString(o[o.idx++]);if(m===undefined){NgLogE("Could not parse errStr in Texture.readImageInfoCb from command: "+o);return false}var l=e.parseInt(o[o.idx++]);if(l===undefined){NgLogE("Could not parse width in Texture.readImageInfoCb from command: "+o);return false}var g=e.parseInt(o[o.idx++]);if(g===undefined){NgLogE("Could not parse height in Texture.readImageInfoCb from command: "+o);return false}var k=e.parseBool(o[o.idx++]);if(k===undefined){NgLogE("Could not parse hasAlpha in Texture.readImageInfoCb from command: "+o);return false}return this._readImageInfoCbRecv(n,h,m,l,g,k)},$_createSendGen:function(g,p,l,n,h,o,m,k){e.appendToCommandString(23986175,[+g,+p,e.encodeString(l),+n,+h,+o,+m,+k])},_destroySendGen:function(){e.appendToCommandString(23920642,this)},_setFilterModesSendGen:function(g,h){e.appendToCommandString(23920643,this,[+g,+h])},_setWrapModesSendGen:function(h,g){e.appendToCommandString(23920644,this,[+h,+g])},$_readImageInfoSendGen:function(h,g){e.appendToCommandString(23986169,[+h,e.encodeString(g)])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[365]=this._instance||this;PROC_METHOD_TABLE[23920645]=this.prototype._onCreateCbRecvGen;PROC_METHOD_TABLE[23986170]=this.prototype._readImageInfoCbRecvGen}})}};__ngs._2v={_c:null,_d:function(){var e={exports:{}};var c=e.exports;this._c=e;var h=__ngs.r_(__ngs._6).Proc;var b=__ngs.r_(__ngs._z).Class;var a=__ngs.r_(__ngs._19).ObjectRegistry;var d=__ngs.r_(__ngs._2n).Node;var g=c.RenderTarget=b.subclass({classname:"RenderTarget",initialize:function(m,k,l){a.register(this);this._children=[];this._width=m;this._height=k;this._isOpaque=l?true:false;this._createSendGen(this.__objectRegistryId,m,k,this._isOpaque);this._callbackIndexCounter=1;this._callbacks=[]},destroy:function(){var k=this._children;while(k.length){this.removeChild(k[0])}this._destroySendGen();a.unregister(this)},addChild:function(k){this._children.push(k);k._didAddToParent(this);this._addChildSendGen(a.objectToId(k));return this},removeChild:function(l){l._willRemoveFromParent();var k=this._children.indexOf(l);if(k===-1){throw new Error("removeChild called for a node that is not a child")}this._children.splice(k,1);this._removeChildSendGen(a.objectToId(l));return this},update:function(){this._updateSendGen();return this},setAutoUpdate:function(l){var k=(l||(l===undefined))?true:false;this._setAutoUpdateSendGen(k);return this},setClearEnable:function(l){var k=(l||(l===undefined))?true:false;this._setClearEnableSendGen(k);return this},setClearColor:function(){var n,m,k,l;if(arguments.length===1){l=arguments[0];n=l.getRed();m=l.getGreen();k=l.getBlue()}else{n=arguments[0];m=arguments[1];k=arguments[2]}this._setClearColorSendGen(n,m,k);return this},setClearColorAlpha:function(k){this._setClearColorAlphaSendGen(k);return this},save:function(m,o,r){var q=0;if(r){q=this._callbackIndexCounter++;this._callbacks[q]=r}var k=o?o.getOrigin().getX():-1;var p=o?o.getOrigin().getY():-1;var l=o?o.getSize().getWidth():-1;var n=o?o.getSize().getHeight():-1;this._saveSendGen(q,m,k,p,l,n)},_invokeCallbackRecv:function(m,l){var k=m&&this._callbacks[m];if(k){delete this._callbacks[m];k(l)}else{NgLogE("invokeCallbackRecv command : No registered callback found, id = "+m)}},setBackingStoreEnable:function(l){var k=(l||(l===undefined))?true:false;this._setBackingStoreEnableSendGen(k);return this},_classId:353,_invokeCallbackRecvGen:function(m){if((m.length-m.idx)!==2){NgLogE("Could not parse due to wrong argument count in RenderTarget.invokeCallback from command: "+m);return false}var l=h.parseInt(m[m.idx++]);if(l===undefined){NgLogE("Could not parse callbackId in RenderTarget.invokeCallback from command: "+m);return false}var k=h.parseString(m[m.idx++]);if(k===undefined){NgLogE("Could not parse error in RenderTarget.invokeCallback from command: "+m);return false}return this._invokeCallbackRecv(l,k)},$_createSendGen:function(n,m,k,l){h.appendToCommandString(23199743,[+n,+m,+k,(l?1:0)])},_destroySendGen:function(){h.appendToCommandString(23134210,this)},_addChildSendGen:function(k){h.appendToCommandString(23134211,this,[+k])},_removeChildSendGen:function(k){h.appendToCommandString(23134212,this,[+k])},_updateSendGen:function(){h.appendToCommandString(23134213,this)},_setAutoUpdateSendGen:function(k){h.appendToCommandString(23134214,this,[(k?1:0)])},_setClearEnableSendGen:function(k){h.appendToCommandString(23134215,this,[(k?1:0)])},_setClearColorSendGen:function(m,l,k){h.appendToCommandString(23134216,this,[+m,+l,+k])},_setClearColorAlphaSendGen:function(k){h.appendToCommandString(23134217,this,[+k])},_saveSendGen:function(p,m,n,l,o,k){h.appendToCommandString(23134218,this,[+p,h.encodeString(m),+n,+l,+o,+k])},_setBackingStoreEnableSendGen:function(k){h.appendToCommandString(23134220,this,[(k?1:0)])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[353]=this._instance||this;PROC_METHOD_TABLE[23134219]=this.prototype._invokeCallbackRecvGen}})}};__ngs._2w={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var d=__ngs.r_(__ngs._25).DiagnosticEmitter;var c=a.Diagnostics=d.singleton({classname:"GL2_Diagnostics",initialize:function($super){$super("GL2")}})}};__ngs._2x={_c:null,_d:function(){var g={exports:{}};var l=g.exports;this._c=g;var n,m;var b=4;var c=__ngs.r_(__ngs._z).Class;var k=__ngs.r_(__ngs._19).ObjectRegistry;var o=__ngs.r_(__ngs._6).Proc;var h=__ngs.r_(__ngs._2u).Texture;var d=__ngs.r_(__ngs._2v).RenderTarget;var e=function(q){var r={};if(q instanceof Object){r={};for(var p in q){if(q.hasOwnProperty(p)){r[p]=q[p]}}}return r};var a=function(r,q){if(r instanceof Object){for(var p in q){if(!r.hasOwnProperty(p)){r[p]=q[p]}}}return r};n=l.FixedMaterial=c.subclass({classname:"FixedMaterial",initialize:function(){var p;k.register(this);this._blendMode=n.BlendMode.Alpha;this._stages=[];for(p=0;p<b;++p){this._stages.push({texture:null,texEnvMode:n.TexEnvMode.Modulate,texEnvColor:[0,0,0,0],combineOptions:e(m),})}this._createSendGen(this.__objectRegistryId)},destroy:function(){this._destroySendGen();k.unregister(this)},setBlendMode:function(p){this._blendMode=p;this._setBlendModeSendGen(p);return this},getBlendMode:function(){return this._blendMode},setTexture:function(p,q){if(this._stages[p]){this._stages[p].texture=q;this._setTextureSendGen(p,q?q.__objectRegistryId:0)}return this},getTexture:function(p){if(this._stages[p]){return this._stages[p].texture}},setTexEnvMode:function(q,p){if(this._stages[q]){this._stages[q].texEnvMode=p;this._setTexEnvModeSendGen(q,p)}return this},getTexEnvMode:function(p){if(this._stages[p]){return this._stages[p].texEnvMode}},setTexEnvColor:function(q,p){if(this._stages[q]&&(p instanceof Array)&&(p.length==4)){var r=p.slice();this._stages[q].texEnvColor=r;this._setTexEnvColorSendGen(q,r[0],r[1],r[2],r[3])}return this},getTexEnvColor:function(p){if(this._stages[p]){return this._stages[p].texEnvColor.slice()}},setCombineOptions:function(p,q){if(this._stages[p]){var r=a(e(q),m);this._stages[p].combineOptions=r;this._setCombineOptionsSendGen(p,r.combineRGB,r.combineAlpha,r.src0RGB,r.src1RGB,r.src2RGB,r.src0Alpha,r.src1Alpha,r.src2Alpha,r.operand0RGB,r.operand1RGB,r.operand2RGB,r.operand0Alpha,r.operand1Alpha,r.operand2Alpha,r.scaleRGB,r.scaleAlpha)}return this},getCombineOptions:function(p){if(this._stages[p]){return e(this._stages[p].combineOptions)}},TexEnvMode:{Add:0,Modulate:1,Decal:2,Blend:3,Replace:4,Combine:5},CombineMode:{Replace:0,Modulate:1,Add:2,AddSigned:3,Interpolate:4,Subtract:5,Dot3:6,Dot3RGBA:7},CombineSrc:{Constant:0,PrimaryColor:1,Previous:2,Texture:3,Texture0:4,Texture1:5,Texture2:6,Texture3:7,Texture4:8,Texture5:9,Texture6:10,Texture7:11},CombineOperand:{SrcAlpha:0,OneMinusSrcAlpha:1,SrcColor:2,OneMinusSrcColor:3},BlendMode:{Opaque:0,Alpha:1,PreMultipliedAlpha:2,Add:3,Subtract:4},_classId:370,$_createSendGen:function(p){o.appendToCommandString(24313855,[+p])},_destroySendGen:function(){o.appendToCommandString(24248322,this)},_setTextureSendGen:function(p,q){o.appendToCommandString(24248323,this,[+p,+q])},_setTexEnvModeSendGen:function(q,p){o.appendToCommandString(24248324,this,[+q,+p])},_setTexEnvColorSendGen:function(s,u,t,p,q){o.appendToCommandString(24248325,this,[+s,+u,+t,+p,+q])},_setBlendModeSendGen:function(p){o.appendToCommandString(24248326,this,[+p])},_setCombineOptionsSendGen:function(A,C,B,z,v,p,D,q,w,x,r,E,F,u,y,t,s){o.appendToCommandString(24248327,this,[+A,+C,+B,+z,+v,+p,+D,+q,+w,+x,+r,+E,+F,+u,+y,+t,+s])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[370]=this._instance||this}});m={combineRGB:n.CombineMode.Modulate,combineAlpha:n.CombineMode.Modulate,src0RGB:n.CombineSrc.Texture,src1RGB:n.CombineSrc.Previous,src2RGB:n.CombineSrc.Constant,src0Alpha:n.CombineSrc.Texture,src1Alpha:n.CombineSrc.Previous,src2Alpha:n.CombineSrc.Constant,operand0RGB:n.CombineOperand.SrcColor,operand1RGB:n.CombineOperand.SrcColor,operand2RGB:n.CombineOperand.SrcAlpha,operand0Alpha:n.CombineOperand.SrcAlpha,operand1Alpha:n.CombineOperand.SrcAlpha,operand2Alpha:n.CombineOperand.SrcAlpha,scaleRGB:1,scaleAlpha:1,}}};__ngs._2y={_c:null,_d:function(){var g={exports:{}};var c=g.exports;this._c=g;var k=__ngs.r_(__ngs._6).Proc;var b=__ngs.r_(__ngs._19).ObjectRegistry;var a=__ngs.r_(__ngs._z).Class;var e=__ngs.r_(__ngs._2n).Node;var d=__ngs.r_(__ngs._2x).FixedMaterial;var h=c.Mesh=e.subclass({classname:"Mesh",initialize:function(){this._primType=h.PrimType.Triangles;this._material=null;this._numVertexAttribsMap={};this._numIndices=0},destroy:function(){},setPrimType:function(l){this._primType=l;this._setPrimTypeSendGen(l);return this},getPrimType:function(){return this._primType},setMaterial:function(l){if(l){this._material=l;this._setMaterialSendGen(l.__objectRegistryId)}else{this._setMaterialSendGen(0)}return this},getMaterial:function(){return this._material},setIndices:function(l){this.spliceIndices.apply(this,[0,this._numIndices].concat(l));return this},spliceIndices:function(p,o){var m=Array.prototype.slice.call(arguments,2);var n,l=m.length;this._spliceIndicesSendGen(p,o,l);for(n=0;n<l;n++){this._indexSendGen(m[n])}this._numIndices=this._numIndices-o+l;return this},setVertexAttribs:function(m,o,n){var l=this._numVertexAttribsMap[m]||0;this.spliceVertexAttribs.apply(this,[m,o,0,l].concat(n));return this},spliceVertexAttribs:function(n,r,s,p){var q=Array.prototype.slice.call(arguments,4);var o,m=q.length;switch(r){case h.AttribType.Float:this._spliceVertexAttribsSendGen(n,r,0,p,m);for(o=0;o<m;o++){this._attribFloatSendGen(q[o])}break;case h.AttribType.Vec2:this._spliceVertexAttribsSendGen(n,r,0,p,m);for(o=0;o<m;o++){this._attribVec2SendGen(q[o][0],q[o][1])}break;case h.AttribType.Vec3:this._spliceVertexAttribsSendGen(n,r,0,p,m);for(o=0;o<m;o++){this._attribVec3SendGen(q[o][0],q[o][1],q[o][2])}break;case h.AttribType.Vec4:this._spliceVertexAttribsSendGen(n,r,0,p,m);for(o=0;o<m;o++){this._attribVec4SendGen(q[o][0],q[o][1],q[o][2],q[o][3])}break;default:break}var l=this._numVertexAttribsMap[n]||0;this._numVertexAttribsMap[n]=l-p+m;return this},PrimType:{Points:0,LineStrip:1,LineLoop:2,Lines:3,TriangleStrip:4,TriangleFan:5,Triangles:6},AttribType:{Float:0,Vec2:1,Vec3:2,Vec4:3},_classId:371,$_createSendGen:function(l){k.appendToCommandString(24379391,[+l])},_setPrimTypeSendGen:function(l){k.appendToCommandString(24313858,this,[+l])},_setMaterialSendGen:function(l){k.appendToCommandString(24313859,this,[+l])},_spliceIndicesSendGen:function(n,l,m){k.appendToCommandString(24313860,this,[+n,+l,+m])},_indexSendGen:function(l){k.appendSubcommandToCommandString([+l])},_spliceVertexAttribsSendGen:function(m,o,p,l,n){k.appendToCommandString(24313862,this,[k.encodeString(m),+o,+p,+l,+n])},_attribFloatSendGen:function(l){k.appendSubcommandToCommandString([+l])},_attribVec2SendGen:function(l,m){k.appendSubcommandToCommandString([+l,+m])},_attribVec3SendGen:function(l,n,m){k.appendSubcommandToCommandString([+l,+n,+m])},_attribVec4SendGen:function(l,o,n,m){k.appendSubcommandToCommandString([+l,+o,+n,+m])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[371]=this._instance||this}})}};__ngs._2z={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var g=__ngs.r_(__ngs._2c).AbstractView;var a=__ngs.r_(__ngs._2b).Commands;var e=__ngs.r_(__ngs._b).Window;var c=__ngs.r_(__ngs._6o).ViewParent;var h=b.View=g.subclass({type:"view",initialize:function($super,k){if(h._init){h._init()}c.initialize.call(this);return $super(k)},addChild:c.addChild,removeChild:c.removeChild,getChildCount:c.getChildCount,getChildren:c.getChildren,layoutSubviews:function(){},_setVisible:function($super,o){var n=this._visible;$super(o);if(this._visible!=n){var k=this._children.length;for(var m=0;m<k;m++){this._children[m]._setVisible(o)}}}});h._init=function(){delete h._init;if(g._init){g._init()}h.synthesizePropertyWithState("image",a.setImage);h.synthesizePropertyWithState("imageBorder",a.setImageBorder);h.synthesizeCompoundProperty("imageGravity",a.setImageGravity);h.synthesizeProperty("imageFit",a.setImageFitMode);h.synthesizeProperty("visibleInOrientations",a.setVisibleInOrientations)}}};__ngs._30={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._2c).AbstractView;var a=__ngs.r_(__ngs._2b).Commands;var e=b.Label=d.subclass({type:"label",initialize:function($super,g){if(e._init){e._init()}$super(g)}});e._init=function(){delete e._init;if(d._init){d._init()}e.synthesizePropertyWithState("text",a.setText);e.synthesizePropertyWithState("textFont",a.setTextFont);e.synthesizePropertyWithState("textColor",a.setTextColor);e.synthesizePropertyWithState("textShadow",a.setTextShadow);e.synthesizeCompoundProperty("textGravity",a.setTextGravity);e.synthesizeProperty("textSize",a.setTextSize);e.synthesizeCompoundProperty("textInsets",a.setTextInsets);e.synthesizeProperty("lineHeight",a.setLineHeight)}}};__ngs._31={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var e=__ngs.r_(__ngs._2c).AbstractView;var a=__ngs.r_(__ngs._2b).Commands;var c=b.Image=e.subclass({initialize:function($super,g){if(c._init){c._init()}$super(g)},type:"image"});c._init=function(){delete c._init;if(e._init){e._init()}c.synthesizePropertyWithState("image",a.setImage);c.synthesizePropertyWithState("imageBorder",a.setImageBorder);c.synthesizeCompoundProperty("imageGravity",a.setImageGravity);c.synthesizeCompoundProperty("imageTransform",a.setImageTransform);c.synthesizeProperty("imageFit",a.setImageFitMode);c.registerEventType("imageLoaded");c.registerEventType("imageLoadFailed")}}};__ngs._32={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var e=__ngs.r_(__ngs._2c).AbstractView;var b=__ngs.r_(__ngs._2b).Commands;var a=c.Button=e.subclass({type:"button",Layout:b.ButtonLayout,initialize:function($super,g){if(a._init){a._init()}$super(g)}});a._init=function(){delete a._init;if(e._init){e._init()}a.synthesizePropertyWithState("image",b.setImage);a.registerEventType("imageLoaded");a.registerEventType("imageLoadFailed");a.synthesizeCompoundProperty("imageInsets",b.setImageInsets);a.synthesizeProperty("imageFit",b.setImageFitMode);a.synthesizeCompoundProperty("imageGravity",b.setImageGravity);a.synthesizeCompoundProperty("imageTransform",b.setImageTransform);a.synthesizePropertyWithState("imageBorder",b.setImageBorder);a.synthesizePropertyWithState("text",b.setText);a.synthesizePropertyWithState("textColor",b.setTextColor);a.synthesizePropertyWithState("textFont",b.setTextFont);a.synthesizePropertyWithState("textShadow",b.setTextShadow);a.synthesizeCompoundProperty("textGravity",b.setTextGravity);a.synthesizeProperty("textSize",b.setTextSize);a.synthesizeCompoundProperty("textInsets",b.setTextInsets)}}};__ngs._33={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var e=__ngs.r_(__ngs._2c).AbstractView;var a=__ngs.r_(__ngs._2b).Commands;var d=__ngs.r_(__ngs._7).Capabilities.OpenGL;var g=b.GLView=e.subclass({type:"glview",initialize:function($super,h){if(g._init){g._init()}$super(h)}});g._init=function(){delete g._init;if(e._init){e._init()}g.synthesizeProperty("active",a.setActive);g.registerAccessors("OGLExtensions",function(){return d.getExtensions()},function(){});g.registerEventType("sizeChanged");g.registerEventType("activeChanged")}}};__ngs._34={_c:null,_d:function(){var c={exports:{}};var d=c.exports;this._c=c;var g=__ngs.r_(__ngs._12).MessageListener;var e=__ngs.r_(__ngs._1i).KeyEmitter;var l=__ngs.r_(__ngs._b).Window;var k=__ngs.r_(__ngs._7).Capabilities;var b=__ngs.r_(__ngs._2d).Element;var a=__ngs.r_(__ngs._2z).View;var n=__ngs.r_(__ngs._2b).Commands;var m=g.subclass({classname:"UI_NavController_KeyListener"});var h=d.NavController=a.subclass({initialize:function($super,p){if(h._init){h._init()}this.navStack=[];var o=k.getPlatformOS()=="Android";this._useBackButton=!o;this.keyListener=new m();e.addListener(this.keyListener,this.onKeyPressed.bind(this));$super(p)},setUseBackButton:function(o){this._useBackButton=o;if(o){this._createBackButton()}else{if(this.backButton){this.backButton.removeFromParent()}}},clear:function(o){return this.backToView(undefined)},getTopView:function(){return(this.navStack.length>0)?this.navStack[(this.navStack.length-1)]:undefined},navStackDepth:function(){return this.navStack.length},depthOfView:function(p){var o=this.navStack.indexOf(p);if(o==-1){return -1}return this.navStack.length-o-1},viewAtDepth:function(o){if(o>=this.navStack.length){return null}return this.navStack[this.navStack.length-o-1]},removeDeepView:function(p){var o=this.navStack.indexOf(p);if(o==-1){NgLogE("NavController: trying to remove a nonexistent view from the nav stack!");return}this.navStack.splice(o,1)},_viewTransition:function(r,o,q){var t=this.getFrame();var p=t[2];var s=t[3];if(o){o.setFrame((q?-p:p),0,p,s);this.addChild(o)}n.animate(function(){if(r){r.setFrame((q?p:-p),0,p,s)}if(o){o.setFrame(0,0,p,s)}},400,function(){if(r){r.removeFromParent()}});this._createBackButton()},forwardToView:function(o,p){var q=this.getTopView();if(o&&(!this._delegate||(this._delegate&&typeof this._delegate.navControllerShouldPush=="function"&&this._delegate.navControllerShouldPush(this,o)))){o.performEventCallback({eventType:"push",navController:this});this.navStack.push(o);this._viewTransition(q,o,false,p)}},back:function(){var o=this.navStack.pop();if(o&&(!this._delegate||(this._delegate&&typeof this._delegate.navControllerShouldPop=="function"&&this._delegate.navControllerShouldPop(this,o)))){o.performEventCallback({eventType:"pop",navController:this})}else{return null}this._viewTransition(o,this.getTopView(),true);return o},backToView:function(p,s){var r=[];var q=this.navStack.pop();var o=q;if(q){do{if(q&&(!this._delegate||(this._delegate&&typeof this._delegate.navControllerShouldPop=="function"&&this._delegate.navControllerShouldPop(this,q)))){r.push(q);q.performEventCallback({eventType:"pop",navController:this})}else{break}if(this.getTopView()==p){break}}while((q=this.navStack.pop()))}if(r.length>0){this._viewTransition(o,this.getTopView(),true,s)}return r},loadApp:function(){},onBackPressed:function(){if(this.navStack.length>1){this.back();return true}return false},onKeyPressed:function(o){if((o.code===e.Keycode.back)&&(this.navStack.length>1)){this.back();return true}return false},_delegate:null,setDelegate:function(o){this._delegate=o},delegate:function(){return this._delegate},_createBackButton:function(){if(!this._useBackButton){return}if(!this.backButton){this.backButton=new UI.Button({normalText:"Back",textSize:13,normalTextColor:"FF",normalTextShadow:"00 1.5 {0,-1}",frame:[-2,20,l.outerWidth/5,l.outerHeight/12],normalGradient:{corners:"0 8 8 0",outerLine:"00 1.5",innerShadow:"99FF 2.0 {0,-1}",gradient:["FFCC 0.0","FF80 1.0"]},highlightedGradient:{corners:"0 8 8 0",outerLine:"00 1.5",innerLine:"FF00 15 {0,-1}",gradient:["FF50 0.0","FF80 1.0"]}});this.backButton.onclick=this.bind(this.onBackPressed)}if(this.navStack.length>1){if(!this.backButton.getParent()){l.document.addChild(this.backButton)}}else{if(this.backButton.getParent()){this.backButton.removeFromParent()}}}});h._init=function(){delete h._init;if(a._init){a._init()}}}};__ngs._35={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._2c).AbstractView;var a=__ngs.r_(__ngs._2b).Commands;var e=b.WebView=d.subclass({type:"webview",initialize:function($super,g){if(e._init){e._init()}this._canGoBack=false;this._canGoForward=false;return $super(g)},_onShouldLoad:function(h){NgLogD("Should Load "+h.url+" ???????");var g=this.getOnShouldload();if(typeof g=="function"){if(!Boolean(g.call(this,h))){return}}this.loadUrl(h.url)},performEventCallback:function($super,g){try{if(g.eventType=="shouldload"){this._onShouldLoad(g);return}if(g.eventType=="pageload"){this._canGoBack=g.canGoBack=Boolean(JSON.parse(g.canGoBack));this._canGoForward=g.canGoForward=Boolean(JSON.parse(g.canGoForward))}$super(g)}catch(h){NgHandleException(h)}},invoke:a.invoke,loadUrl:function(g,k,h){a.loadURL.call(this,g,k||null,+(h||0))},loadDocument:a.setSourceDocument,postUrl:function(h,l){var g;if(typeof l=="object"){var m=[];for(var k in l){m.push(encodeURIComponent(k)+"="+encodeURIComponent(l[k]))}g=m.join("&")}else{g=l}a.postURL.call(this,h,g)},stopLoading:a.stopLoading,reload:a.reload,goBack:a.goBack,goForward:a.goForward,canGoBack:function(){return this._canGoBack},canGoForward:function(){return this._canGoForward},setBasicAuthCredential:function(k,g,l,h){a.setBasicAuthCredentials.call(this,{host:k,realm:g,username:l,password:h})},setViewportEnabled:a.setViewportEnabled,setAutodetection:function(g){a.setAutodetection.call(this,g)}});e._init=function(){delete e._init;if(d._init){d._init()}e.synthesizeProperty("scrollable",a.setScrollable);e.synthesizeProperty("pluginsEnabled",a.setPluginsEnabled);e.registerEventType("startload");e.registerEventType("pageload");e.registerEventType("error");e.registerEventType("pageevent");e.registerEventType("shouldload");e.registerEventType("externalLink")}}};__ngs._36={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var g=__ngs.r_(__ngs._2z).View;var a=__ngs.r_(__ngs._2e);var b=__ngs.r_(__ngs._2b).Commands;var e=c.ScrollView=g.subclass({type:"scrollview",initialize:function($super,h){if(e._init){e._init()}this._scrollPosition=[0,0];return $super(h)},updateScrollPosition:function(h){this._scrollPosition=h},performEventCallback:function($super,h){if(h.eventType=="scroll"){this.updateScrollPosition(h.scrollPosition)}$super(h)},getFrameOffset:function(){var h=this._frame;if(h){return[-this._scrollPosition[0],-this._scrollPosition[1]]}else{return undefined}}});e._init=function(){delete e._init;if(g._init){g._init()}e.synthesizeCompoundProperty("contentSize",b.setScrollableSize);e.synthesizeCompoundProperty("scrollPosition",b.setScrollPosition);e.synthesizeCompoundProperty("scrollIndicatorsVisible",b.setScrollIndicatorsVisible);g.synthesizeProperty("visibleInOrientations",b.setVisibleInOrientations);e.registerEventType("scroll");e.registerEventType("scrollEnded")}}};__ngs._37={_c:null,_d:function(){var e={exports:{}};var d=e.exports;this._c=e;var g=__ngs.r_(__ngs._2c).AbstractView;var h=__ngs.r_(__ngs._36).ScrollView;var a=__ngs.r_(__ngs._2e);var b=__ngs.r_(__ngs._2b).Commands;var c=d.ListView=h.subclass({type:"listview",initialize:function($super,k){if(c._init){c._init()}$super(k);this._sections=[];this._scrollPosition=[0,0];this.enableEvent("scroll",true);this._ownedViews=[];this._queuedViews={};this._cellDivider=0;return this},destroy:function($super){var k=this._ownedViews.length;for(var m=0;m<k;m++){this._ownedViews[m].release()}this._ownedViews=null;$super()},addChild:function($super,l,k){if(k=="cell"){k=this._cellDivider++}else{if((k||-1)>=0){k+=this._cellDivider}}$super(l,k)},_viewForItem:function(l){if(l._currentView instanceof g){return l._currentView}var n=l._reuseId;var k=this._queuedViews[n];var m=null;while(k&&k.length>0){if((m=k.pop()) instanceof g){break}}if(!(m instanceof g)){m=l._onCreateView(l);if(m instanceof g){this._ownedViews.push(m.retain());this.addChild(m,"cell")}else{console.log("Error creating view for list item with reuse id "+n)}}return m},_queueViewForItem:function(l){if(!l){NgLogE("ListView::_queueViewForItem called with undefined item");return}var m=l._currentView;if(m instanceof g){var n=l._reuseId;var k=this._queuedViews[n]||(this._queuedViews[n]=[]);k.push(m)}l._setCurrentView()},_removeQueuedViews:function(){for(var n in this._queuedViews){if(!this._queuedViews.hasOwnProperty(n)){continue}n=this._queuedViews[n];for(var m=0,k=n.length;m<k;m++){n[m].removeFromParent()}}this._cellDivider=0},flushSections:function(){for(var k in this._sections){if(!this._sections.hasOwnProperty(k)){continue}var l=this._sections[k];l.flush();l.calculateItemPositions()}this._removeQueuedViews()},reloadData:function(){this.flushSections();this.calculateSectionPositions();this.updateScrollPosition(this._scrollPosition)},getSections:function(){return this._sections},setSections:function(m){this.flushSections();var k;for(k in this._sections){if(this._sections.hasOwnProperty(k)){this._sections[k].setListView(null)}}this._sections=m;var l=[];for(k in m){if(m.hasOwnProperty(k)){l.push(0+(m[k].__objectRegistryId||0))}}b.setSections.call(this,l);this.reloadData()},calculateSectionPositions:function(){if(!this.getFrame()){console.log("UI.ListView Warning: You probably called setSections before you actually set a frame.");return}this._stackedSections={};var n=0;var m=this._sections.length;for(var o=0;o<m;o++){var q=this._sections[o];this._stackedSections[n]=q;q.setListView(this);q.setYPosition(n);var k=this._scrollPosition[1]-n;q.updateVisibleRange(k,k+this._frame[3]);var p=q._measureHeight();q._setFrame(0,n,this._frame[2],p);n+=p}this.setContentSize([this._frame[2],n])},updateScrollPosition:function(m){if(this._scrollPosition[1]===m[1]){return}this._scrollPosition=m;var l=this._frame[3];for(var n in this._stackedSections){if(this._stackedSections.hasOwnProperty(n)){var o=this._stackedSections[n];var k=m[1]-n;o.updateVisibleRange(k,k+l)}}},_onScroll:function(){},enableEvent:function($super,k,l){if((k=="scroll")&&!l){return}$super(k,l)}});c._init=function(){delete c._init;if(h._init){h._init()}c.synthesizeProperty("header");c.synthesizeProperty("footer")}}};__ngs._38={_c:null,_d:function(){var c={exports:{}};var e=c.exports;this._c=c;var a=__ngs.r_(__ngs._2d).Element;var b=__ngs.r_(__ngs._2e);var d=__ngs.r_(__ngs._19).ObjectRegistry;var h=__ngs.r_(__ngs._5).Core;var m=__ngs.r_(__ngs._2b).Commands;var k=__ngs.r_(__ngs._39).ListViewItem;var g=5;var l=5;if(h.Capabilities.getPlatformOS()==="iPhone OS"){g=1;l=2}var n=e.ListViewSection=a.subclass({type:"listview-section",initialize:function($super,o){if(n._init){n._init()}this._visibleRange=[0,0];this._headerHeight=0;this._titleHeight=0;delete this._measuredHeight;this._needsLayout=false;$super(o)},addItemToVisible:function(o,q){if(!(o instanceof k)){return}if(o._currentView instanceof a){return}var r=this._listView._viewForItem(o);var p=this._listView.getFrame()[2];if(this._rowHeight>0){r.setFrame(0,this._yPosition+this._titleHeight+q*this._rowHeight,p,this._rowHeight)}else{r.setFrame(0,this._yPosition+this._cellPositions[q],p,o._height||0)}o._setCurrentView(r);if(!r.getParent()){this._listView.addChild(r,"cell")}},_setFrame:function(p,q,o,r){m.setFrame.call(this,p,q,o,r);if(this._titleView){this._titleView.setFrame(p,q,o,this._titleHeight)}},flush:function(){for(var p=this._visibleRange[0],o=this._visibleRange[1];p<o&&p<this._items.length;p++){this._listView._queueViewForItem(this._items[p])}this._visibleRange=[0,0]},updateVisibleRange:function(p,s){var o=this._getMeasuredHeight();var r=this._items.length;var x=this._rowHeight>0?this._rowHeight:o/r;p-=x*g;s+=x*l;var q=this._visibleRange[0];var v=this._visibleRange[1];var w=r>0&&x>0?Math.max(0,Math.floor(p/x)):0;var u=r>0&&x>0?Math.min(r,w+Math.floor((s-p)/x)):0;if(this._cellPositions){while(w<r&&this._cellPositions[w]<p){w++}while(w>0&&this._cellPositions[w]>p){w--}if(w>=r){w=Math.max(0,r-1)}while(u<r&&this._cellPositions[u]<s){u++}while(u>w&&this._cellPositions[u]>s){u--}p=this._cellPositions[w];s=u===0?p:(this._cellPositions[u-1]+(this._items[u-1]._height||0))}if(s<0||p>o){for(var t=this._visibleRange[0];t<this._visibleRange[1]&&t<this._items.length;t++){this._listView._queueViewForItem(this._items[t])}this._visibleRange=[0,0];return}if(q==w&&v==u){return}if(q==v){for(t=w;t<u;t++){this.addItemToVisible(this._items[t],t)}}else{if(q<w){do{this._listView._queueViewForItem(this._items[q])}while(++q<w)}if(v>u){while(v-->u){this._listView._queueViewForItem(this._items[v])}v=u}if(q>w){while(q-->w){this.addItemToVisible(this._items[q],q)}q=w}if(v<u){do{this.addItemToVisible(this._items[v],v)}while(++v<u)}}this._visibleRange=[w,u]},setListView:function(o){this._listView=o;delete this._measuredHeight;return this},_getMeasuredHeight:function(){return this._measuredHeight||this._measureHeight()},_measureHeight:function(){if(!this._rowHeight||this._rowHeight<0){var r=this._titleHeight+this._headerHeight;var o=[];var p=this._items.length;for(var q=0;q<p;q++){o.push(r);r+=this._items[q]._height||0}this._cellPositions=o;return this._measuredHeight=r}delete this._cellPositions;return this._measuredHeight=this._titleHeight+this._headerHeight+this._rowHeight*this._items.length},calculateItemPositions:function(){}});n._init=function(){delete n._init;if(a._init){a._init()}var r=function(){if(this.listViewMonitor){this.listViewMonitor.setTitleView(this)}r._superfunc.apply(this,Array.prototype.slice.call(arguments))};var q=function(t){if(this._titleView&&this._titleView.listViewMonitor==this){delete this._titleView.listViewMonitor}this._titleView=t;if(t.listViewMonitor!=this){t.listViewMonitor=this;if(!r._superfunc){r._superfunc=t.setFrame}if(t.setFrame!=r){t.registerAccessors("frame",null,r)}}this._titleHeight=t.getFrame()[3]||0;delete this._measuredHeight;m.setTitleView.call(this,d.objectToId(t));return this};var o=function(){return this._titleView};n.registerAccessors("titleView",o,q);n.synthesizeProperty("rowHeight");var p=function(t){t=(t instanceof Array)?t:Array.prototype.slice.call(arguments);this.flush();this._items=t;delete this._measuredHeight;if(!this._listView){return}this._listView.reloadData()};var s=function(){return this._items};n.registerAccessors("items",s,p);n.synthesizeProperty("yPosition")}}};__ngs._39={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var a=__ngs.r_(__ngs._z).Class;var d=b.ListViewItem=a.subclass({type:"listview-item",_reuseId:"__default__",_currentView:null,_onCreateView:function(){},_onReleaseView:function(e){},_onSetView:function(e){},setOnCreateView:function(e){this._onCreateView=e},setOnReleaseView:function(e){this._onReleaseView=e},setOnSetView:function(e){this._onSetView=e},setHeight:function(e){this._height=e},getHeight:function(){return this._height},_setCurrentView:function(e){if(e instanceof a){this._onSetView(e)}else{this._onReleaseView(this._currentView)}this._currentView=e;return this},getCurrentView:function(){return this._currentView},initialize:function(e){if(e){this._reuseId=e}return this}})}};__ngs._3a={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var e=__ngs.r_(__ngs._2z).View;var a=__ngs.r_(__ngs._2b).Commands;var d=b.CellView=e.subclass({type:"cell",initialize:function($super,g){if(d._init){d._init()}$super(g)}});d._init=function(){delete d._init;if(e._init){e._init()}d.synthesizePropertyWithState("image",a.setImage);d.synthesizePropertyWithState("imageBorder",a.setImageBorder);d.synthesizeCompoundProperty("imageInsets",a.setImageInsets);d.synthesizeProperty("imageFit",a.setImageFitMode);d.synthesizeCompoundProperty("imageGravity",a.setImageGravity);d.synthesizeCompoundProperty("imageTransform",a.setImageTransform);d.synthesizePropertyWithState("rightImage",a.setRightImage);d.synthesizePropertyWithState("rightImageBorder",a.setRightImageBorder);d.synthesizeCompoundProperty("rightImageInsets",a.setRightImageInsets);d.synthesizeProperty("rightImageFit",a.setRightImageFitMode);d.synthesizeCompoundProperty("rightImageGravity",a.setRightImageGravity);d.synthesizeCompoundProperty("rightImageTransform",a.setRightImageTransform);d.registerEventType("imageLoaded");d.registerEventType("imageLoadFailed");d.synthesizePropertyWithState("title",a.setTitle);d.synthesizePropertyWithState("titleColor",a.setTitleColor);d.synthesizePropertyWithState("titleFont",a.setTitleFont);d.synthesizePropertyWithState("titleShadow",a.setTitleShadow);d.synthesizeCompoundProperty("titleGravity",a.setTitleGravity);d.synthesizeProperty("titleSize",a.setTitleSize);d.synthesizeCompoundProperty("titleInsets",a.setTitleInsets);d.synthesizePropertyWithState("text",a.setText);d.synthesizePropertyWithState("textColor",a.setTextColor);d.synthesizePropertyWithState("textShadow",a.setTextShadow);d.synthesizePropertyWithState("textFont",a.setTextFont);d.synthesizeCompoundProperty("textGravity",a.setTextGravity);d.synthesizeProperty("textSize",a.setTextSize);d.synthesizeCompoundProperty("textInsets",a.setTextInsets)}}};__ngs._3b={_c:null,_d:function(){var e={exports:{}};var c=e.exports;this._c=e;var h=__ngs.r_(__ngs._2c).AbstractView;var b=__ngs.r_(__ngs._2b).Commands;var g=__ngs.r_(__ngs._b);var a={normal:{gradient:["FFED 0.000","FFA4 1.000"],insets:"{4.0,4.0,4.0,4.0}",outerLine:"FF51 2.0",outerShadow:"0000 0.0 {0.0,0.0}",corners:"3.0 3.0 3.0 3.0"},pressed:{innerShadow:"FF00 6.0 {0.0,-1.0}",gradient:["FF80 0.000","FF80 1.000"],insets:"{4.0,4.0,4.0,4.0}",outerLine:"FF51 2.0",outerShadow:"0000 0.0 {0.0,0.0}",corners:"3.0 3.0 3.0 3.0"},checked:{innerLine:"FF27A227 2.0",corners:"3.0 3.0 3.0 3.0",insets:"{4.0,4.0,4.0,4.0}",gradient:["FF2CFF2B 0.000","FF179117 1.000"],outerShadow:"0000 0.0 {0.0,0.0}",outerLine:"FF51 3.0",innerShadow:"FF97FE97 1.0 {0.0,0.0}"},checkedpressed:{innerShadow:"FF0F610F 5.0 {0.0,-1.0}",gradient:["FF179117 0.000","FF179117 1.000"],insets:"{4.0,4.0,4.0,4.0}",outerLine:"FF2B512B 3.0",outerShadow:"0000 0.0 {0.0,0.0}",corners:"3.0 3.0 3.0 3.0"},disabled:{innerShadow:"0000 0.0 {0.0,0.0}",gradient:["66B6 0.000","66CA 1.000"],insets:"{4.0,4.0,4.0,4.0}",outerLine:"7FE0 3.0",outerShadow:"0000 0.0 {0.0,0.0}",corners:"3.0 3.0 3.0 3.0"}};var d=c.CheckBox=h.subclass({type:"checkbox",initialize:function($super,k){if(d._init){d._init()}this._checked=false;$super();this.setGradient(a.normal,b.State.Normal);this.setGradient(a.pressed,b.State.Pressed);this.setGradient(a.checked,b.State.Checked);this.setGradient(a.checkedpressed,b.State.Checked|b.State.Pressed);this.setGradient(a.disabled,b.State.Disabled);this.setImageInsets([4,4,4,4]);this.setAttributes(k)},performEventCallback:function($super,k){if(k.eventType=="click"){this._checked=k.checked;if(this._checked){this._state=this._state|b.State.Checked}else{this._state=this._state&~b.State.Checked}}$super(k)}});d._init=function(){delete d._init;if(h._init){h._init()}d.synthesizePropertyWithState("image",b.setImage);d.bindPropertyState("image","checked",b.State.Checked);d.synthesizeCompoundProperty("imageInsets",b.setImageInsets);d.registerEventType("imageLoaded");d.registerEventType("imageLoadFailed");d.synthesizePropertyWithState("text",b.setText);d.bindPropertyState("text","checked",b.State.Checked);d.synthesizePropertyWithState("textColor",b.setTextColor);d.bindPropertyState("textColor","checked",b.State.Checked);d.synthesizePropertyWithState("textShadow",b.setTextShadow);d.bindPropertyState("textShadow","checked",b.State.Checked);d.synthesizeCompoundProperty("textGravity",b.setTextGravity);d.synthesizeProperty("textSize",b.setTextSize);d.synthesizePropertyWithState("textFont",b.setTextFont);d.bindPropertyState("textFont","checked",b.State.Checked);d.synthesizeCompoundProperty("textInsets",b.setTextInsets);d.synthesizeProperty("checked",b.setChecked)}}};__ngs._3c={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._2c).AbstractView;var a=__ngs.r_(__ngs._2b).Commands;var e=b.EditText=d.subclass({type:"edittext",initialize:function($super,g){if(e._init){e._init()}$super(g);this.setOnClick=this.setOnClickCancel=function(){NgLogE("WARNING: Click and ClickCancel events do not work on EditText objects.")}},InputTypes:a.InputType,EnterKeyTypes:a.EnterKeyType,performEventCallback:function($super,g){try{switch(g.eventType){case"change":this._text=g.text;default:$super(g)}}catch(h){NgHandleException(h)}},getText:function(){return this._text||""},setText:function(g){this._text=g;a.setText.call(this,0,g)},focus:function(){a.setFocus.call(this,true)},blur:function(){a.setFocus.call(this,false)},setFocus:function(g){try{throw new Error("EditText.setFocus is deprecated and should not be used. Please use .focus() and .blur().")}catch(h){NgHandleException(h)}a.setFocus.call(this,g)}});e._init=function(){delete e._init;if(d._init){d._init()}e.registerAccessors("text",e.prototype.getText,e.prototype.setText);e.synthesizeProperty("placeholder",a.setPlaceholderText);e.synthesizeProperty("placeholderColor",a.setPlaceholderTextColor);e.synthesizeProperty("placeholderShadow",a.setPlaceholderTextShadow);e.synthesizeProperty("inputType",a.setInputType);e.synthesizeProperty("enterKeyType",a.setEnterKeyType);e.synthesizePropertyWithState("textColor",a.setTextColor);e.synthesizePropertyWithState("textShadow",a.setTextShadow);e.synthesizeCompoundProperty("textGravity",a.setTextGravity);e.synthesizeProperty("textSize",a.setTextSize);e.synthesizePropertyWithState("textFont",a.setTextFont);e.registerEventType("change");e.registerEventType("focus");e.registerEventType("blur");e.registerEventType("action")}}};__ngs._3d={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var e=__ngs.r_(__ngs._2c).AbstractView;var a=__ngs.r_(__ngs._2b).Commands;var d=b.EditTextArea=e.subclass({type:"edittextarea",initialize:function($super,g){if(d._init){d._init()}$super(g)},performEventCallback:function($super,g){try{switch(g.eventType){case"change":this._text=g.text;$super(g);break;case"focus":case"blur":$super(g);break}}catch(h){NgHandleException(h)}},getText:function(){return this._text||""},setText:function(g){this._text=g;a.setText.call(this,0,g)},focus:function(){a.setFocus.call(this,true)},blur:function(){a.setFocus.call(this,false)}});d._init=function(){delete d._init;if(e._init){e._init()}d.registerAccessors("text",d.prototype.getText,d.prototype.setText);d.synthesizeProperty("placeholder",a.setPlaceholderText);d.synthesizeProperty("placeholderColor",a.setPlaceholderTextColor);d.synthesizeProperty("placeholderShadow",a.setPlaceholderTextShadow);d.synthesizePropertyWithState("textColor",a.setTextColor);d.synthesizePropertyWithState("textShadow",a.setTextShadow);d.synthesizeCompoundProperty("textGravity",a.setTextGravity);d.synthesizeProperty("textSize",a.setTextSize);d.synthesizePropertyWithState("textFont",a.setTextFont);d.registerEventType("change");d.registerEventType("focus");d.registerEventType("blur")}}};__ngs._3e={_c:null,_d:function(){var e={exports:{}};var d=e.exports;this._c=e;var c=__ngs.r_(__ngs._2d).Element;var b=__ngs.r_(__ngs._2b).Commands;var a=d.ProgressDialog=c.subclass({type:"progressdialog",initialize:function($super,g){if(a._init){a._init()}return $super(g)},show:b.show,hide:b.hide});a._init=function(){delete a._init;if(c._init){c._init()}a.synthesizePropertyWithState("title",b.setTitle);a.synthesizePropertyWithState("text",b.setText)}}};__ngs._3f={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var b=__ngs.r_(__ngs._2d).Element;var a=__ngs.r_(__ngs._2b).Commands;var e=c.Toast=b.subclass({type:"toast",initialize:function($super,g){if(e._init){e._init()}$super(g)},show:a.show});e._init=function(){delete e._init;if(b._init){b._init()}e.synthesizePropertyWithState("text",a.setText);e.registerEventType("disappear")}}};__ngs._3g={_c:null,_d:function(){var g={exports:{}};var d=g.exports;this._c=g;var c=__ngs.r_(__ngs._2d).Element;var b=__ngs.r_(__ngs._2b).Commands;var e={normal:b.State.Normal,focused:b.State.Focused,selected:b.State.Selected,pressed:b.State.Pressed,disabled:b.State.Disabled};var a=d.Style=c.subclass({type:"style",classname:"UI_Style",initialize:function($super,h){if(a._init){a._init()}$super(h)},$synthesizePropertyWithState:function(n,m){function h(o,s,q){var p="get"+o;var t="set"+o;var u=function(){return this[p].call(this,q)};var r=function(v){return this[t].call(this,v,q)};this.registerAccessors(s+o,u,r)}c.synthesizePropertyWithState.call(this,n,m);var k=n.charAt(0).toUpperCase()+n.substr(1);for(var l in e){h.call(this,k,l,e[l])}}});a._init=function(){delete a._init;if(c._init){c._init()}a.synthesizePropertyWithState("gradient",b.setGradient);a.synthesizePropertyWithState("image",b.setImage);a.synthesizePropertyWithState("imageBorder",b.setImageBorder);a.synthesizeProperty("imageFit",b.setImageFitMode);a.synthesizeCompoundProperty("imageInsets",b.setImageInsets);a.synthesizeCompoundProperty("imageGravity",b.setImageGravity);a.synthesizeCompoundProperty("imageTransform",b.setImageTransform);a.synthesizePropertyWithState("text",b.setText);a.synthesizePropertyWithState("textColor",b.setTextColor);a.synthesizePropertyWithState("textFont",b.setTextFont);a.synthesizePropertyWithState("textShadow",b.setTextShadow);a.synthesizeCompoundProperty("textGravity",b.setTextGravity);a.synthesizeProperty("textSize",b.setTextSize);a.synthesizeCompoundProperty("textInsets",b.setTextInsets);a.synthesizeProperty("lineHeight",b.setLineHeight);a.synthesizePropertyWithState("rightImage",b.setRightImage);a.synthesizePropertyWithState("rightImageBorder",b.setRightImageBorder);a.synthesizeProperty("rightImageFit",b.setRightImageFitMode);a.synthesizeCompoundProperty("rightImageInsets",b.setRightImageInsets);a.synthesizeCompoundProperty("rightImageGravity",b.setRightImageGravity);a.synthesizeCompoundProperty("rightImageTransform",b.setRightImageTransform);a.synthesizePropertyWithState("title",b.setTitle);a.synthesizePropertyWithState("titleColor",b.setTitleColor);a.synthesizePropertyWithState("titleFont",b.setTitleFont);a.synthesizePropertyWithState("titleShadow",b.setTitleShadow);a.synthesizeCompoundProperty("titleGravity",b.setTitleGravity);a.synthesizeProperty("titleSize",b.setTitleSize);a.synthesizeCompoundProperty("titleInsets",b.setTitleInsets)}}};__ngs._3h={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var e=__ngs.r_(__ngs._2c).AbstractView;var a=__ngs.r_(__ngs._2b).Commands;var d=b.Spinner=e.subclass({type:"spinner",initialize:function($super,g){if(d._init){d._init()}return $super(g)}});d._init=function(){delete d._init;if(e._init){e._init()}d.synthesizeProperty("darkStyle",a.setDarkStyle)}}};__ngs._3i={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var g=__ngs.r_(__ngs._2c).AbstractView;var b=__ngs.r_(__ngs._2b).Commands;var e=__ngs.r_(__ngs._b);var a=c.ProgressBar=g.subclass({type:"progressbar",initialize:function($super,h){if(a._init){a._init()}return $super(h)},useForUpdateProgress:b.useForUpdateProgress});a._init=function(){delete a._init;if(g._init){g._init()}a.synthesizePropertyWithState("progressGradient",b.setProgressGradient);a.synthesizePropertyWithState("secondaryGradient",b.setSecondaryGradient);var h=function(l){var k=(l instanceof Array)?l:Array.prototype.slice.call(arguments);while(k.length<2){k.push(0)}b.setProgress.apply(this,k)};a.synthesizeCompoundProperty("progress",h)}}};__ngs._3j={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._5).Core;a.Diagnostics=c.DiagnosticEmitter.singleton({classname:"UI_Diagnostics",initialize:function($super){$super("UI")}})}};__ngs._3k={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var e=__ngs.r_(__ngs._2c).AbstractView;var a=__ngs.r_(__ngs._2b).Commands;var d=b.AdView=e.subclass({type:"adview",initialize:function($super,g){if(d._init){d._init()}$super(g);this.onappear=this.bind(this._onappear);this.ondisappear=this.bind(this._ondisappear);this.onclick=this.bind(this._onclick)},onappear:function(){},ondisappear:function(){},_onappear:function($super,g){($super||function(){})(g)},_ondisappear:function($super,g){($super||function(){})(g)},performEventCallback:function($super,g){if(g.eventType=="click"){NgLogD("AD WAS CLICKED in AdView wooo!!!!");($super||function(){})(g)}if(g.eventType=="load"){NgLogD("AD WAS LOADED in AdView wooo!!!!");($super||function(){})(g)}},pauseAds:function(){a.pauseAds.call(this)},resumeAds:function(){a.resumeAds.call(this)},setRefreshRate:function(g){a.setAdRefreshRate.call(this,g)},setAutoplay:function(g){a.setAdRefreshRate.call(this,g)},getAdEventMetadata:function(){NgLogD("AD EventMetetData was requested!");var g="DefaultAdEventMetaData";return g}});d._init=function(){delete d._init;if(e._init){e._init()}d.synthesizeProperty("active",a.setActive);d.registerEventType("click");d.registerEventType("load")}}};__ngs._3l={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._2c).AbstractView;var a=__ngs.r_(__ngs._2b).Commands;var e=b.DocumentView=d.subclass({type:"documentview",initialize:function($super,g){if(e._init){e._init()}$super(g)}});e._init=function(){delete e._init;if(d._init){d._init()}e.synthesizeProperty("documentURL",a.setSourceDocument)}}};__ngs._3m={_c:null,_d:function(){var e={exports:{}};var c=e.exports;this._c=e;var g=__ngs.r_(__ngs._2c).AbstractView;var a=__ngs.r_(__ngs._2e);var b=__ngs.r_(__ngs._2b).Commands;var d=c.CheckoutView=g.subclass({type:"checkoutview",initialize:function($super,h){if(d._init){d._init()}$super(h)}});d._init=function(){delete d._init;if(g._init){g._init()}d.registerAccessors("postData",null,b.setPostData);d.registerAccessors("postURL",null,b.loadPostURL);d.registerAccessors("getURL",null,b.loadGetURL)}}};__ngs._3n={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var e=__ngs.r_(__ngs._2c).AbstractView;var b=__ngs.r_(__ngs._2b).Commands;var g=__ngs.r_(__ngs._3o).MapAnnotation;var a=c.MapView=e.subclass({type:"mapview",initialize:function($super,h){this._annotations=[];this._region=[];return $super(h)},getCenterCoordinate:function(){return[this._region[0],this._region[1]]},setCenterCoordinate:function(k,l,h){this._region[0]=k;this._region[1]=l;if(!this._region[2]){this._region[2]=0.05}if(!this._region[3]){this._region[3]=0.05}this.setRegion(this._region[0],this._region[1],this._region[2],this._region[3],h)},getCoordinateSpan:function(){return[this._region[2],this._region[3]]},selectAnnotation:function(h){if(h instanceof g){var k=this._annotations.indexOf(h);if(k!=-1){b.selectAnnotation.call(this,h.__objectRegistryId);return}}b.selectAnnotation.call(this,-1)},addAnnotation:function(h){if(h instanceof g){this._annotations.push(h);b.addAnnotation.call(this,h.__objectRegistryId)}else{throw {message:this.type+".addAnnotation: "+h+" is not a MapAnnotation!"}}return this},removeAnnotation:function(h){if(h instanceof g){var k=this._annotations.indexOf(h);if(k!=-1){this._annotations.splice(k,1)}b.removeAnnotation.call(this,h.__objectRegistryId)}else{throw {message:this.type+".removeAnnotation: "+h+" is not a MapAnnotation!"}}return h},updateRegionFits:function(k,l,h,m){this._region[0]=k;this._region[1]=l;this._region[2]=h;this._region[3]=m},performEventCallback:function($super,h){if(h.eventType=="regionchange"){this.updateRegionFits(h.latitude,h.longitude,h.latitudeDelta,h.longitudeDelta)}$super(h)}});(function(){a.synthesizeProperty("scrollable",b.setScrollable);a.synthesizeProperty("zoomable",b.setZoomable);a.synthesizeCompoundProperty("region",b.setRegion);a.registerEventType("regionchange")})()}};__ngs._3o={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var b=__ngs.r_(__ngs._2d).Element;var a=__ngs.r_(__ngs._2b).Commands;var e=c.MapAnnotation=b.subclass({type:"mapannotation",initialize:function($super,g){return $super(g)},setCalloutLeftView:function(g){this._calloutLeftView=g;a.setCalloutLeftView.call(this,g.__objectRegistryId)},getCalloutLeftView:function(){return this._calloutLeftView},setCalloutRightView:function(g){this._calloutRightView=g;a.setCalloutRightView.call(this,g.__objectRegistryId)},getCalloutRightView:function(){return this._calloutRightView},setView:function(g){this._view=g;a.setView.call(this,g.__objectRegistryId)},getView:function(){return this._view},setImage:function(h){console.log("WARNING : MapAnnotation.setImage has been deprecated. Use MapAnnotation.setView instead.");var g=new UI.Image();g.setImage(h);g.setFrame([0,0,40,40]);this.setView(g)},performEventCallback:function($super,g){$super(g)}});(function(){e.synthesizeCompoundProperty("coordinate",a.setCoordinate);e.synthesizeCompoundProperty("centerOffset",a.setCenterOffset);e.synthesizeProperty("calloutTitle",a.setCalloutTitle);e.synthesizeProperty("calloutSubtitle",a.setCalloutSubtitle);e.synthesizeProperty("calloutEnabled",a.setCalloutEnabled);e.registerEventType("select");e.registerEventType("deselect")})()}};__ngs._3p={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._2c).AbstractView;var a=__ngs.r_(__ngs._2b).Commands;var e=b.CutSceneView=d.subclass({type:"_cutsceneview",initialize:function($super,g){if(e._init){e._init()}return $super(g)},destroy:function($super){if(this.cbId){a.takeTemporaryCallback(this.cbId)}$super()},play:function(h,g){this.cbId=(typeof g=="function")?a.registerTemporaryCallback(g.bind(this)):"";a.playVideo.call(this,h,this.cbId)}});e._init=function(){delete e._init;if(d._init){d._init()}}}};__ngs._3q={_c:null,_d:function(){var e={exports:{}};var d=e.exports;this._c=e;var c=__ngs.r_(__ngs._19).ObjectRegistry;var b=__ngs.r_(__ngs._z).Class;var g=__ngs.r_(__ngs._6).Proc;var a=d._int_Util=b.singleton({classname:"_int_Util",initialize:function(){this._callbackID=0;this._callbacks=[];this.valid=!Core.Capabilities.meetsBinaryVersion("1.3.5.10");Core.ObjectRegistry.register(this);this._createSendGen(this.__objectRegistryId)},ProcID:{Persist:-1,Game:-2},_classId:350,_signCallbackRecvGen:function(l){if((l.length-l.idx)!==2){NgLogE("Could not parse due to wrong argument count in _int_Util.signCallback from command: "+l);return false}var h=g.parseString(l[l.idx++]);if(h===undefined){NgLogE("Could not parse signature in _int_Util.signCallback from command: "+l);return false}var k=g.parseInt(l[l.idx++]);if(k===undefined){NgLogE("Could not parse callbackID in _int_Util.signCallback from command: "+l);return false}return this._signCallbackRecv(h,k)},$_verifiedRecvGen:function(k){if((k.length-k.idx)!==1){NgLogE("Could not parse due to wrong argument count in _int_Util.verified from command: "+k);return false}var h=g.parseInt(k[k.idx++]);if(h===undefined){NgLogE("Could not parse b in _int_Util.verified from command: "+k);return false}return this._verifiedRecv(h)},$_msgFromBuilderRecvGen:function(k){if((k.length-k.idx)!==1){NgLogE("Could not parse due to wrong argument count in _int_Util.msgFromBuilder from command: "+k);return false}var h=g.parseString(k[k.idx++]);if(h===undefined){NgLogE("Could not parse data in _int_Util.msgFromBuilder from command: "+k);return false}return this._msgFromBuilderRecv(h)},$_createSendGen:function(h){g.appendToCommandString(23003135,[+h])},_destroySendGen:function(){g.appendToCommandString(22937602,this)},_signSendGen:function(k,l,h){g.appendToCommandString(22937603,this,[g.encodeString(k),+l,g.encodeString(h)])},$_adTapjoySendActionCompleteSendGen:function(h){g.appendToCommandString(23003131,[g.encodeString(h)])},$_msgToBuilderSendGen:function(h){g.appendToCommandString(23003129,[g.encodeString(h)])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[350]=this._instance||this;PROC_METHOD_TABLE[22937604]=this.prototype._signCallbackRecvGen;PROC_METHOD_TABLE[23003130]=this.prototype._verifiedRecvGen;PROC_METHOD_TABLE[23003128]=this.prototype._msgFromBuilderRecvGen},$_verifiedRecv:function(h){this.valid=true;if(this._verifiedCallback){this._verifiedCallback()}},sign:function(k,h,l){if(this.valid){this._callbacks[this._callbackID]=l;this._signSendGen(k,this._callbackID++,h)}else{l(false)}},_signCallbackRecv:function(h,l){var k=this._callbacks[parseInt(l)];if(k){k(h)}},signable:function(){return this.valid},registerVerifiedCB:function(h){if(this.valid){h()}else{this._verifiedCallback=h}},$msgToBuilder:function(h,k){k.target=h;this._msgToBuilderSendGen(JSON.stringify(k))},$_msgFromBuilderRecv:function(k){var l=JSON.parse(k);var h=this.builderCom[l.target];if(typeof h=="function"){h(l)}},registerBuilderListener:function(k,h){if(!this.builderCom){this.builderCom={}}this.builderCom[k]=h},$adTapjoySendActionComplete:function(h){console.log("_int_Util.adTapjoysendActionComplete: "+h);this._adTapjoySendActionCompleteSendGen(h)}})}};__ngs._3r={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var g=__ngs.r_(__ngs._6).Proc;var a=__ngs.r_(__ngs._z).Class;var c=__ngs.r_(__ngs._7).Capabilities;var e=64*1024;b.Socket=a.subclass({classname:"Socket",initialize:function(l,k){this._protocol=(l===undefined)?this.Protocol.TCP4:l;this._security=(k===undefined)?this.Security.SecNone:k;this._isStream=(this._protocol!=this.Protocol.UDP4);this._isServer=false;this._state=this.State.CLOSED;this._maxSndBufSize=e;this._curSndBufSize=0;this._rcvBuf="";this._rcvBufInfo=[];this._EOS=false;this._localAddr=null;this._peerAddr=null;this._nextCbId=1;this._pendingChildren=[];this._cb={};this._onReadable=null;this._onWritable=null;this._onError=null;this._storeCb=function(m){var n=-1;if(m){n=this._nextCbId++;this._cb[n]=m?m:function(){}}return n};this._restoreCb=function(n){var m=this._cb[n];delete this._cb[n];return m};if(this._parentId===undefined||this._childId===undefined){this._parentId=-1;this._childId=-1}else{this._state=this.State.READY;this._isServer=true}var h=__ngs.r_(__ngs._19).ObjectRegistry;h.register(this);this._createSendGen(this.__objectRegistryId,this._protocol,this._security,this._parentId,this._childId)},setOption:function(m,l,h){if(m===this.Option.OpUnboundedSendBuf){this._maxSndBufSize=l?0:e}var k=this._storeCb(h);this._setOptionSendGen(m,l,"",k)},getOption:function(l,h){var k=this._storeCb(h);this._getOptionSendGen(l,k)},setOnReadable:function(h){this._onReadable=h},setOnWritable:function(h){this._onWritable=h},setOnError:function(h){this._onError=h},bind:function(h,l){if(this._state==this.State.CLOSED){var k=this._storeCb(l);this._bindSendGen(h,0,k)}},addMembership:function(n,l,o){if(!this._isStream){var k=0;var h=1;if(typeof(l)=="object"){if(l){if(l.loop){k|=this.MulticastFlag.loop}if(l.ttl){h=l.ttl}}}else{o=l}var m=this._storeCb(o);this._addMembershipSendGen(n,k,h,m)}},dropMembership:function(k,l){if(!this._isStream){var h=this._storeCb(l);this._dropMembershipSendGen(k,h)}},connect:function(h){if(this._isStream){if(this._state==this.State.CLOSED){this._state=this.State.CONNECTING;if(!h.cn){h.cn=""}this._connectSendGen(h.host,h.port,h.cn)}}else{if(this._state==this.State.CLOSED||this._state==this.State.READY){if(!this._peerAddr){this._state=this.State.CONNECTING}this._connectSendGen(h.host,h.port,"")}}},listen:function(){if(this._state==this.State.CLOSED){if(this._isStream){var h=8;this._state=this.State.LISTENING;this._listenSendGen(h)}}},accept:function(){var h=null;if(this._isStream&&this._state==this.State.LISTENING){var k=this._pendingChildren.shift();if(k){h=new TcpServerSocket(this._protocol,this._security,k.parentId,k.childId);h._peerAddr={host:k.host,port:k.port};h._localAddr=this._localAddr}}return h},send:function(k,h,n){if(this._isStream){if(this._state!=this.State.READY){return this.Error.Invalid}}else{if(this._state==this.State.CLOSED){this._state=this.State.READY}else{if(this._state!=this.State.CONNECTING&&this._state!=this.State.READY){return this.Error.Invalid}}}if(h===undefined){h=-1}else{if(typeof(h)=="object"){n=h;h=-1}}if(h<0||h>k.getSize()){h=k.getSize()}if(this._maxSndBufSize){var m=this._maxSndBufSize-this._curSndBufSize;if(h>m){if(!this._isStream){return b.Socket.Error.TryAgain}h=m;if(!h){return 0}}}var l=k.readBytes(h);if(!n){n={host:"",port:0}}this._curSndBufSize+=l.length;this._sendSendGen(l,n.host,n.port);return l.length},recv:function(k,h,n){if(this._state!=this.State.READY&&this._state!=this.State.CLOSING){return this.Error.Invalid}if(h===undefined){h=-1}else{if(typeof(h)=="object"){n=h;h=-1}}var l=k.getSize();if(this._isStream){if(!this._rcvBuf.length){return this._EOS?0:b.Socket.Error.TryAgain}if(h<0||h>=this._rcvBuf.length){k.writeBytes(this._rcvBuf);this._rcvBuf=""}else{k.writeBytes(this._rcvBuf.slice(0,h));this._rcvBuf=this._rcvBuf.slice(h)}if(n){n.host=this._peerAddr.host;n.port=this._peerAddr.port}}else{if(!this._rcvBufInfo.length){this._rcvBuf="";return b.Socket.Error.TryAgain}var m=this._rcvBufInfo.shift();h=m.size;if(h>0){k.writeBytes(this._rcvBuf.slice(0,h));this._rcvBuf=this._rcvBuf.slice(h)}if(n){n.host=m.host;n.port=m.port}}if(k.getSize()>0){this._updateSendGen(this.UpdateId.U_SizeRcvd,k.getSize(),"")}return k.getSize()-l},shutdown:function(){if(this._state==this.State.READY){this._state=this.State.CLOSING;this._shutdownSendGen(0)}},close:function(){this._closeSendGen();this._state=this.State.CLOSED;var h=__ngs.r_(__ngs._19).ObjectRegistry;h.unregister(this)},getState:function(){return this._state},getSizeWritable:function(){if(this._maxSndBufSize){return this._maxSndBufSize-this._curSndBufSize}if(e>this._curSndBufSize){return e-this._curSndBufSize}return 0},getSizeReadable:function(){return this._rcvBuf.length},getBufferedSize:function(){return this._curSndBufSize},getPeerAddr:function(){return this._peerAddr},getLocalAddr:function(){return this._localAddr},_onSetOptionCbRecv:function(k,m,l,o){if(k===this.Option.OpUnboundedSendBuf&&c.compareBinaryVersion(1,8)<0){l=0}var h=m&&this._restoreCb(m);if(h){var n=l?{code:l,description:o}:null;h(n,this)}},_onGetOptionCbRecv:function(k,q,m,n,l,p){if(k===this.Option.OpUnboundedSendBuf){if(c.compareBinaryVersion(1,8)<0){l=0}q=this._maxSndBufSize?0:1}var h=n&&this._restoreCb(n);if(h){var o=l?{code:l,description:p}:null;h(o,this,q)}},_onBindCbRecv:function(n,k,m,l,p){if(!l){this._localAddr={host:n,port:k}}var q=!l&&!this._isStream&&this._state==this.State.CLOSED;if(q){this._state=this.State.READY}var h=m&&this._restoreCb(m);if(h){var o=l?{code:l,description:p}:null;h(o,this,k)}q=q&&this._state==this.State.READY&&this._curSndBufSize==0;if(q&&this._onWritable){this._onWritable(this)}},_onConnectRecv:function(k,h){if(this._state==this.State.CONNECTING){this._state=this.State.READY;this._peerAddr={host:k,port:h};if(this._onWritable&&this._curSndBufSize==0){this._onWritable(this)}}},_onAcceptRecv:function(l,h,m,k){this._pendingChildren.push({host:l,port:h,parentId:m,childId:k});if(this._onReadable){this._onReadable(this)}},_onReceiveRecv:function(h,l,k){var m=h.length;if(m>0){this._rcvBuf+=h}if(this._isStream){if(!m){this._EOS=true}}else{this._rcvBufInfo.push({size:m,host:l,port:k})}if(this._onReadable){this._onReadable(this)}},_onErrorRecv:function(h,l){var k=h?{code:h,description:l}:null;if(this._onError&&k){this._onError(k,this)}},_onUpdateRecv:function(k,l,h){switch(k){case this.UpdateId.U_SizeSent:this._curSndBufSize-=l;if(this._onWritable&&this._curSndBufSize==0&&this._state==this.State.READY){this._onWritable(this)}break;default:NgLogE("Unknown OnUpdate ID "+k)}},_onMembershipCbRecv:function(l,k,n){var h=l&&this._restoreCb(l);if(h){var m=k?{code:k,description:n}:null;h(m,this)}},Protocol:{UDP4:0,TCP4:1},Security:{SecNone:0,SecSSL:1},State:{CLOSED:0,CONNECTING:1,LISTENING:2,READY:3,CLOSING:4},Option:{OpSendBufSize:0,OpRecvBufSize:1,OpNoDelay:2,OpConnectionTimeout:3,OpShutdownTimeout:4,OpReuseAddr:5,OpUnboundedSendBuf:6},Error:{Unknown:-1,Invalid:-2,NotSupported:-3,TryAgain:-4,AddrInUse:-5,NoMemory:-6,NotConnected:-7,ConnectionTimeout:-8,ShutdownTimeout:-9,SSLError:-10,Unreachable:-11,ConnectionRefused:-12},MulticastFlag:{McLoop:1},UpdateId:{U_NOP:0,U_SizeSent:1,U_SizeRcvd:1},_classId:360,_onSetOptionCbRecvGen:function(n){if((n.length-n.idx)!==4){NgLogE("Could not parse due to wrong argument count in Socket.onSetOptionCb from command: "+n);return false}var h=g.parseInt(n[n.idx++]);if(h===undefined){NgLogE("Could not parse opId in Socket.onSetOptionCb from command: "+n);return false}var l=g.parseInt(n[n.idx++]);if(l===undefined){NgLogE("Could not parse cbId in Socket.onSetOptionCb from command: "+n);return false}var k=g.parseInt(n[n.idx++]);if(k===undefined){NgLogE("Could not parse errCode in Socket.onSetOptionCb from command: "+n);return false}var m=g.parseString(n[n.idx++]);if(m===undefined){NgLogE("Could not parse errStr in Socket.onSetOptionCb from command: "+n);return false}return this._onSetOptionCbRecv(h,l,k,m)},_onGetOptionCbRecvGen:function(o){if((o.length-o.idx)!==6){NgLogE("Could not parse due to wrong argument count in Socket.onGetOptionCb from command: "+o);return false}var h=g.parseInt(o[o.idx++]);if(h===undefined){NgLogE("Could not parse opId in Socket.onGetOptionCb from command: "+o);return false}var p=g.parseInt(o[o.idx++]);if(p===undefined){NgLogE("Could not parse numVal in Socket.onGetOptionCb from command: "+o);return false}var l=g.parseString(o[o.idx++]);if(l===undefined){NgLogE("Could not parse strVal in Socket.onGetOptionCb from command: "+o);return false}var m=g.parseInt(o[o.idx++]);if(m===undefined){NgLogE("Could not parse cbId in Socket.onGetOptionCb from command: "+o);return false}var k=g.parseInt(o[o.idx++]);if(k===undefined){NgLogE("Could not parse errCode in Socket.onGetOptionCb from command: "+o);return false}var n=g.parseString(o[o.idx++]);if(n===undefined){NgLogE("Could not parse errStr in Socket.onGetOptionCb from command: "+o);return false}return this._onGetOptionCbRecv(h,p,l,m,k,n)},_onBindCbRecvGen:function(o){if((o.length-o.idx)!==5){NgLogE("Could not parse due to wrong argument count in Socket.onBindCb from command: "+o);return false}var m=g.parseString(o[o.idx++]);if(m===undefined){NgLogE("Could not parse lhost in Socket.onBindCb from command: "+o);return false}var h=g.parseInt(o[o.idx++]);if(h===undefined){NgLogE("Could not parse lport in Socket.onBindCb from command: "+o);return false}var l=g.parseInt(o[o.idx++]);if(l===undefined){NgLogE("Could not parse cbId in Socket.onBindCb from command: "+o);return false}var k=g.parseInt(o[o.idx++]);if(k===undefined){NgLogE("Could not parse errCode in Socket.onBindCb from command: "+o);return false}var n=g.parseString(o[o.idx++]);if(n===undefined){NgLogE("Could not parse errStr in Socket.onBindCb from command: "+o);return false}return this._onBindCbRecv(m,h,l,k,n)},_onConnectRecvGen:function(k){if((k.length-k.idx)!==2){NgLogE("Could not parse due to wrong argument count in Socket.onConnect from command: "+k);return false}var l=g.parseString(k[k.idx++]);if(l===undefined){NgLogE("Could not parse rhost in Socket.onConnect from command: "+k);return false}var h=g.parseInt(k[k.idx++]);if(h===undefined){NgLogE("Could not parse rport in Socket.onConnect from command: "+k);return false}return this._onConnectRecv(l,h)},_onAcceptRecvGen:function(k){if((k.length-k.idx)!==4){NgLogE("Could not parse due to wrong argument count in Socket.onAccept from command: "+k);return false}var m=g.parseString(k[k.idx++]);if(m===undefined){NgLogE("Could not parse rhost in Socket.onAccept from command: "+k);return false}var h=g.parseInt(k[k.idx++]);if(h===undefined){NgLogE("Could not parse rport in Socket.onAccept from command: "+k);return false}var n=g.parseInt(k[k.idx++]);if(n===undefined){NgLogE("Could not parse parentId in Socket.onAccept from command: "+k);return false}var l=g.parseInt(k[k.idx++]);if(l===undefined){NgLogE("Could not parse childId in Socket.onAccept from command: "+k);return false}return this._onAcceptRecv(m,h,n,l)},_onReceiveRecvGen:function(l){if((l.length-l.idx)!==3){NgLogE("Could not parse due to wrong argument count in Socket.onReceive from command: "+l);return false}var h=g.parseBinary(l[l.idx++]);if(h===undefined){NgLogE("Could not parse buf in Socket.onReceive from command: "+l);return false}var m=g.parseString(l[l.idx++]);if(m===undefined){NgLogE("Could not parse rhost in Socket.onReceive from command: "+l);return false}var k=g.parseInt(l[l.idx++]);if(k===undefined){NgLogE("Could not parse rport in Socket.onReceive from command: "+l);return false}return this._onReceiveRecv(h,m,k)},_onErrorRecvGen:function(l){if((l.length-l.idx)!==2){NgLogE("Could not parse due to wrong argument count in Socket.onError from command: "+l);return false}var h=g.parseInt(l[l.idx++]);if(h===undefined){NgLogE("Could not parse errCode in Socket.onError from command: "+l);return false}var k=g.parseString(l[l.idx++]);if(k===undefined){NgLogE("Could not parse errStr in Socket.onError from command: "+l);return false}return this._onErrorRecv(h,k)},_onUpdateRecvGen:function(l){if((l.length-l.idx)!==3){NgLogE("Could not parse due to wrong argument count in Socket.onUpdate from command: "+l);return false}var k=g.parseInt(l[l.idx++]);if(k===undefined){NgLogE("Could not parse updateId in Socket.onUpdate from command: "+l);return false}var m=g.parseInt(l[l.idx++]);if(m===undefined){NgLogE("Could not parse val in Socket.onUpdate from command: "+l);return false}var h=g.parseString(l[l.idx++]);if(h===undefined){NgLogE("Could not parse optional in Socket.onUpdate from command: "+l);return false}return this._onUpdateRecv(k,m,h)},_onMembershipCbRecvGen:function(m){if((m.length-m.idx)!==3){NgLogE("Could not parse due to wrong argument count in Socket.onMembershipCb from command: "+m);return false}var k=g.parseInt(m[m.idx++]);if(k===undefined){NgLogE("Could not parse cbId in Socket.onMembershipCb from command: "+m);return false}var h=g.parseInt(m[m.idx++]);if(h===undefined){NgLogE("Could not parse errCode in Socket.onMembershipCb from command: "+m);return false}var l=g.parseString(m[m.idx++]);if(l===undefined){NgLogE("Could not parse errStr in Socket.onMembershipCb from command: "+m);return false}return this._onMembershipCbRecv(k,h,l)},$_createSendGen:function(h,l,k,n,m){g.appendToCommandString(23658495,[+h,+l,+k,+n,+m])},_setOptionSendGen:function(h,m,k,l){g.appendToCommandString(23592962,this,[+h,+m,g.encodeString(k),+l])},_getOptionSendGen:function(h,k){g.appendToCommandString(23592963,this,[+h,+k])},_bindSendGen:function(k,h,l){g.appendToCommandString(23592964,this,[+k,+h,+l])},_connectSendGen:function(k,h,l){g.appendToCommandString(23592965,this,[g.encodeString(k),+h,g.encodeString(l)])},_listenSendGen:function(h){g.appendToCommandString(23592966,this,[+h])},_sendSendGen:function(h,l,k){g.appendToCommandString(23592967,this,[g.encodeBinary(h),g.encodeString(l),+k])},_shutdownSendGen:function(h){g.appendToCommandString(23592968,this,[+h])},_closeSendGen:function(){g.appendToCommandString(23592969,this)},_addMembershipSendGen:function(m,k,h,l){g.appendToCommandString(23592970,this,[g.encodeString(m),+k,+h,+l])},_dropMembershipSendGen:function(k,h){g.appendToCommandString(23592971,this,[g.encodeString(k),+h])},_updateSendGen:function(k,l,h){g.appendToCommandString(23592972,this,[+k,+l,g.encodeString(h)])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[360]=this._instance||this;PROC_METHOD_TABLE[23592973]=this.prototype._onSetOptionCbRecvGen;PROC_METHOD_TABLE[23592974]=this.prototype._onGetOptionCbRecvGen;PROC_METHOD_TABLE[23592975]=this.prototype._onBindCbRecvGen;PROC_METHOD_TABLE[23592976]=this.prototype._onConnectRecvGen;PROC_METHOD_TABLE[23592977]=this.prototype._onAcceptRecvGen;PROC_METHOD_TABLE[23592978]=this.prototype._onReceiveRecvGen;PROC_METHOD_TABLE[23592979]=this.prototype._onErrorRecvGen;PROC_METHOD_TABLE[23592980]=this.prototype._onUpdateRecvGen;PROC_METHOD_TABLE[23592981]=this.prototype._onMembershipCbRecvGen}});TcpServerSocket=b.Socket.subclass({classname:"TcpServerSocket",initialize:function($super,l,k,m,h){this._parentId=m;this._childId=m;$super(l,k)}})}};__ngs._3s={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var d=__ngs.r_(__ngs._6).Proc;var a=__ngs.r_(__ngs._z).Class;b.DNS=a.singleton({classname:"DNS",initialize:function(){this._nextCbId=1;this._cb={};this._storeCb=function(g){var h=-1;if(g){h=this._nextCbId++;this._cb[h]=g?g:function(){}}return h};this._restoreCb=function(h){var g=this._cb[h];delete this._cb[h];return g};var e=__ngs.r_(__ngs._19).ObjectRegistry;e.register(this);this._createSendGen(this.__objectRegistryId)},resolve:function(h,e){var g=this._storeCb(e);this._resolveSendGen(h,0,g)},_onResolveCbRecv:function(k,h,g,l){var e=k&&this._restoreCb(k);if(e){if(g){e({code:g,description:l},[])}else{e(null,h?JSON.parse(h):[])}}else{NgLogE("Callback not found for DNS.resolve, id: "+k)}},Error:{Unknown:-100,Invalid:-101,NotSupported:-102,NotFound:-103},_classId:361,_onResolveCbRecvGen:function(l){if((l.length-l.idx)!==4){NgLogE("Could not parse due to wrong argument count in DNS.onResolveCb from command: "+l);return false}var h=d.parseInt(l[l.idx++]);if(h===undefined){NgLogE("Could not parse cbId in DNS.onResolveCb from command: "+l);return false}var g=d.parseString(l[l.idx++]);if(g===undefined){NgLogE("Could not parse addrs in DNS.onResolveCb from command: "+l);return false}var e=d.parseInt(l[l.idx++]);if(e===undefined){NgLogE("Could not parse errCode in DNS.onResolveCb from command: "+l);return false}var k=d.parseString(l[l.idx++]);if(k===undefined){NgLogE("Could not parse errStr in DNS.onResolveCb from command: "+l);return false}return this._onResolveCbRecv(h,g,e,k)},$_createSendGen:function(e){d.appendToCommandString(23724031,[+e])},_resolveSendGen:function(h,e,g){d.appendToCommandString(23658498,this,[d.encodeString(h),+e,+g])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[361]=this._instance||this;PROC_METHOD_TABLE[23658499]=this.prototype._onResolveCbRecvGen}})}};__ngs._3t={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._5).Core;a.Diagnostics=c.DiagnosticEmitter.singleton({classname:"Network_Diagnostics",initialize:function($super){$super("Network")}})}};__ngs._3u={_c:null,_d:function(){var g={exports:{}};var z=g.exports;this._c=g;var b=__ngs.r_(__ngs._5).Core;var q=__ngs.r_(__ngs._h).Network;var n={DEFAULT_HTTP_PORT:80,DEFAULT_HTTPS_PORT:443,WS_GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",CRLF:"\r\n",UNI_SUR_HIGH_START:55296,UNI_SUR_LOW_END:57343,UNI_REPLACEMENT_CHAR:65533,UNI_MAX_LEGAL_UTF32:1114111,TrailingUTF8Bytes:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,5,5,5,5],OffsetsFromUTF8:[0,12416,925824,63447168,4194836608,2181570688]};var y={Continuation:0,Text:1,Binary:2,Close:8,Ping:9,Pong:10};var p={SyntaxError:"SyntaxError",SecurityError:"SecurityError",InvalidAccessError:"InvalidAccessError",InvalidStateError:"InvalidStateError"};var e=function(D){var C=b.toMD5(D);var A=[];for(var B=0;B<16;++B){A.push(String.fromCharCode(parseInt(C.substr(B*2,2),16)))}return A.join("")};var c=function(D){var C=b.SHA1.hex_sha1(D);var A=[];for(var B=0;B<20;++B){A.push(String.fromCharCode(parseInt(C.substr(B*2,2),16)))}return A.join("")};var r=function(A){var B=e(Math.random().toString(16)+(new Date()).getTime().toString(16));return b.Base64.encodeBinary(B)};var l=function(A){var B=c(A.concat(n.WS_GUID));return b.Base64.encodeBinary(B)};var k=function(B,C){var A=new b.Buffer();A.writeUint16(u.StatusCode.Normal,0);A.writeBytes(b.UTF8.encode(C),2);return A};var o=function(A){var C={};var B=new b.Buffer(A);C.code=B.readUint16();C.reason=b.UTF8.decode(B.toString());return C};var w=function(A){if(!A){NgLogE("buffer is null");return false}if(!(A instanceof b.Buffer)){NgLogE("not an instance of Core.Buffer");return false}for(var B=0;B<A.getSize();B++){var C=0;var D=n.TrailingUTF8Bytes[A.get(B)];if(D+B>=A.getSize()){console.log("isValidUTF8: error 1, i="+B);return false}if(!t(A,B,D+1)){console.log("isValidUTF8: error 2, i="+B);return false}switch(D){case 5:C+=A.get(B);B++;C<<=6;case 4:C+=A.get(B);B++;C<<=6;case 3:C+=A.get(B);B++;C<<=6;case 2:C+=A.get(B);B++;C<<=6;case 1:C+=A.get(B);B++;C<<=6;case 0:C+=A.get(B);break;default:break}C-=n.OffsetsFromUTF8[D];if(C<=n.UNI_MAX_LEGAL_UTF32){if(C>=n.UNI_SUR_HIGH_START&&C<=n.UNI_SUR_LOW_END){console.log("isValidUTF8: error 3");return false}}else{console.log("isValidUTF8: error 4");return false}}return true};var t=function(B,D,C){var A;var E=D+C;switch(C){default:return false;case 4:if((A=(B.get(--E)))<128||A>191){return false}case 3:if((A=(B.get(--E)))<128||A>191){return false}case 2:if((A=(B.get(--E)))>191){return false}switch(B.get(D)){case 224:if(A<160){return false}break;case 237:if(A>159){return false}break;case 240:if(A<144){return false}break;case 244:if(A>143){return false}break;default:if(A<128){return false}}case 1:if(B.get(D)>=128&&B.get(D)<194){return false}}if(B.get(D)>244){return false}return true};var m=function(A,B){B.forEach(function(D,C){return(D^A[C%4])})};var h=m;var x=function(A){if(A<=999){return false}if(A<=2999){switch(A){case u.StatusCode.Normal:case u.StatusCode.GoingAway:case u.StatusCode.ProtocolError:case u.StatusCode.NotSupported:case u.StatusCode.Inconsistent:case u.StatusCode.NotAcceptable:case u.StatusCode.MessageTooLarge:case u.StatusCode.NoExtensionReply:case u.StatusCode.UnexpectedError:return true;default:break}return false}if(A<=4999){return true}return false};var v=function(G,E,A){var C=(!E||E.getSize()<126)?0:((E.getSize()<65536)?2:8);var F=new b.Buffer();F.writeUint8((G.fin?128:0)|G.opcode);switch(C){case 0:F.writeUint8((A?128:0)|(E?E.getSize():0));break;case 2:F.writeUint8((A?128:0)|126);F.writeUint16(E.getSize());break;default:F.writeUint8((A?128:0)|127);F.writeUint32(Math.floor(E.getSize()/4294967296));F.writeUint32(Math.floor(E.getSize()%4294967296));break}if(A){var D=[];var B;for(B=0;B<4;++B){D.push(Math.floor(Math.random()*256))}for(B=0;B<D.length;++B){F.writeUint8(D[B])}if(E){m(D,E)}}if(E){F.writeBytes(E)}return F};var s=b.Class.subclass({classname:"FrameParser",State:{HEAD:0,PLEN:1,MKEY:2,BODY:3},initialize:function(A){this._wsId=A;this._state=this.State.HEAD;this._subIdx=0;this._plen=0;this._plenwidth=0;this._masked=false;this._payload=new b.Buffer();this._keys=[];this._header={fin:false,opcode:y.Continuation,clear:function(){this.fin=false;this.opcode=y.Continuation}};this._defrag={clear:function(){this.opcode=y.Continuation;this.frame=null},push:function(C,B){if(!this.frame){this.frame=new b.Buffer();this.opcode=C}if(this.opcode!==y.Continuation){this.frame.writeBytes(B)}else{NgLogE("invalid opcode "+this.opcode)}},join:function(C){if(!this.frame){this.frame=new b.Buffer()}this.frame.writeBytes(C);var B=this.frame;this.clear();return B},hasFragments:function(){return this.frame?true:false}};this._defrag.clear();this._onWsFrame=null;this._onWsError=null},reset:function(){this._state=this.State.HEAD;this._subIdx=0;this._plen=0;this._plenwidth=0;this._masked=false;this._payload.clear();this._keys=[];this._header.clear()},setOnFrame:function(A){this._onWsFrame=A},setOnError:function(A){this._onWsError=A},_processFrame:function(){if(this._masked&&this._payload.getSize()>0){h(this._keys,this._payload)}var D=null;var A;var C=this._header.opcode;if(this._header.fin){if(C==y.Continuation){if(this._defrag.opcode!==y.Continuation){C=this._defrag.opcode;D=this._defrag.join(this._payload);this._defrag.clear()}else{NgLogE("a continuation has no previous fragment");if(this._onWsError){this._onWsError(u.StatusCode.UnexpectedError,"received continuation frame while no previous fragment")}return false}}else{if(C==y.Text||C==y.Binary){if(this._defrag.hasFragments()){NgLogW("unfragmented non-control frame has previous fragment");this._defrag.clear();if(this._onWsError){this._onWsError(u.StatusCode.UnexpectedError,"received unfragmented non-control frame while there is previous fragment(s)")}return false}D=this._payload}else{D=this._payload}}}else{if(C==y.Continuation){if(this._defrag.hasFragments()){this._defrag.push(C,this._payload)}else{if(this._onWsError){this._onWsError(u.StatusCode.UnexpectedError,"received a continuation frame while there is no previous fragment(s)")}return false}}else{if(C==y.Text||C==y.Binary){if(this._defrag.hasFragments()){if(this._onWsError){this._onWsError(u.StatusCode.UnexpectedError,"received a fragment with illegal opcode while there is previous fragment(s)")}return false}this._defrag.push(C,this._payload)}else{NgLogE("received fragmented control frame: opcode="+C);if(this._onWsError){this._onWsError(u.StatusCode.UnexpectedError,"received fragmented control frame")}return false}}}if(D!==null){switch(C){case y.Text:if(w(D)){this._onWsFrame({opcode:C,data:b.UTF8.decode(D.toString())})}else{if(this._onWsError){this._onWsError(u.StatusCode.UnexpectedError,"received frame contains invalid UTF8)")}return false}break;case y.Binary:this._onWsFrame({opcode:C,data:D});break;case y.Close:NgLogD("case: OpCode.Close: frameSize="+D.getSize());if(D.getSize()>0){if(D.getSize()<2){if(this._onWsError){this._onWsError(u.StatusCode.ProtocolError,"data field in close frame too short")}return false}var B=D.readUint16();if(w(D)){if(x(B)){this._onWsFrame({opcode:C,code:B,data:b.UTF8.decode(D.toString())})}else{if(this._onWsError){this._onWsError(u.StatusCode.ProtocolError,"close frame contains invalid status code "+B)}return false}}else{if(this._onWsError){this._onWsError(u.StatusCode.ProtocolError,"data field in close frame contains invalid utf8")}return false}}else{this._onWsFrame({opcode:C,code:null,data:null})}break;case y.Ping:case y.Pong:this._onWsFrame({opcode:C,data:D});break;default:NgLogW("opcode="+C+" not supported");break}}else{NgLogD("WS("+this._wsId+"): current frame is null: opcode="+C)}this.reset();return true},parse:function(A){while(A.getSize()>0){var C;var B;switch(this._state){case this.State.HEAD:C=A.readUint8();if(C&112){NgLogE("illegal non-zero reserved bits");A.clear();this.reset();if(this._onWsError){this._onWsError(u.StatusCode.ProtocolError,"illegal non-zero reserved bits")}break}this._header.fin=(C&128)?true:false;this._header.opcode=(C&15);if((this._header.opcode>=3&&this._header.opcode<=7)||(this._header.opcode>=11&&this._header.opcode<=15)){NgLogE("illegal use of reserved opcode");A.clear();this.reset();if(this._onWsError){this._onWsError(u.StatusCode.ProtocolError,"illegal use of reserved opcode");break}break}this._state=this.State.PLEN;break;case this.State.PLEN:C=A.readUint8();if(this._plenwidth===0){this._masked=(C&128)?true:false;this._plen=(C&127);if(this._plen<126){if(this._masked){this._state=this.State.MKEY}else{this._state=this.State.BODY;if(this._plen===0){this._payload.clear();if(!this._processFrame()){A.clear();this.reset();break}}}}else{if(this._header.opcode!=y.Continuation&&this._header.opcode!=y.Text&&this._header.opcode!=y.Binary){NgLogE("WS("+this._wsId+"): illegal control frame length: "+this._plen);A.clear();this.reset();if(this._onWsError){this._onWsError(u.StatusCode.ProtocolError,"control frame too long")}break}if(this._plen==126){this._plen=0;this._plenwidth=2;this._subIdx=0}else{this._plen=0;this._plenwidth=8;this._subIdx=0}}}else{this._plen=(this._plen*256)+C;this._subIdx++;if(this._subIdx==this._plenwidth){this._subIdx=0;if(this._masked){this._state=this.State.MKEY}else{this._state=this.State.BODY;if(this._plen===0){this._payload.clear();if(!this._processFrame()){A.clear();this.reset();break}}}}}break;case this.State.MKEY:this._keys[this._subIdx]=A.readUint8();this._subIdx++;if(this._subIdx==4){this._state=this.State.BODY;if(this._plen===0){this._payload.clear();if(!this._processFrame()){A.clear();this.reset();break}}}break;case this.State.BODY:B=this._plen-this._payload.getSize();if(B>A.getSize()){B=A.getSize()}this._payload.writeBytes(A.readBytes(B));if(this._plen==this._payload.getSize()){if(!this._processFrame()){A.clear();this.reset();break}}break;default:NgLogE("unknown parsing state");break}}}});var a=b.Class.subclass({classname:"HttpParser",State:{StatusLine:0,Headers:1,Content:2},initialize:function(){this._state=this.State.StatusLine;this._line="";this._pending="";this._headers={};this._onStatusLine=null;this._onHeaders=null;this._onContent=null},setOnStatusLine:function(A){this._onStatusLine=A},setOnHeaders:function(A){this._onHeaders=A},setOnContent:function(A){this._onContent=A},parse:function(C){var F,B,D,E;var A=function(G){return G.replace(/^\s+|\s+$/g,"")};if(this._pending.length>0){C=this._pending.concat(C);this._pending=""}while(C.length>0){switch(this._state){case this.State.StatusLine:F=C.indexOf(n.CRLF);if(F<0){this._pending=C;return 0}this._line+=C.substring(0,F);C=C.substr(F+2);this._state=this.State.Headers;F=this._line.indexOf(" ");B=this._line.substring(0,F);this._line=this._line.substr(F+1);F=this._line.indexOf(" ");D=parseInt(A(this._line.substring(0,F)),10);this._line=this._line.substr(F+1);this._onStatusLine(A(B),D,A(this._line));this._line="";break;case this.State.Headers:F=C.indexOf(n.CRLF);if(F<0){this._pending=C;return 0}this._line+=C.substring(0,F);C=C.substr(F+2);if(this._line.length>0){E=this._line.split(":");this._line="";this._headers[A(E[0]).toLowerCase()]=A(E[1])}else{this._onHeaders(this._headers);this._state=this.State.Content}break;case this.State.Content:this._onContent(C);C="";break;default:NgLogD("WS: unexpected state");return -1}}return 0},getHeader:function(A){return this._headers[A.toLowerCase()]}});var d=0;var u=z.WS=b.Class.subclass({classname:"WS",initialize:function(A,B){this._wsId=d++;this._readyState=u.CONNECTING;this._bufferedAmount=0;this._extensions="";this._protocol="";this._url=A;this.__defineGetter__("url",function(){return this._url});this.__defineGetter__("readyState",function(){return this._readyState});this.__defineGetter__("bufferedAmount",function(){return this._getBufferedSize()});this.__defineGetter__("extensions",function(){return this._extensions});this.__defineGetter__("protocol",function(){return this._protocol});this._clearEvHandles=function(){this.onopen=null;this.onerror=null;this.onclose=null;this.onmessage=null};this._clearEvHandles();this._protocols=B;this._soc=null;this._handshaking=false;this._httpStatus=0;this._wsKey="";this._httpParser=new a();this._httpParser.setOnStatusLine(this._onHttpStatusLine.bind(this));this._httpParser.setOnHeaders(this._onHttpHeaders.bind(this));this._httpParser.setOnContent(this._onHttpContent.bind(this));this._frameParser=new s(this._wsId);this._frameParser.setOnFrame(this._onWsFrame.bind(this));this._frameParser.setOnError(this._onWsError.bind(this));this._uri=q.URL.parse(A);if(!this._uri.port){if(this._uri.protocol==="ws:"){this._uri.port=80}else{if(this._uri.protocol==="wss:"){this._uri.port=443}else{NgLogE("WS("+this._wsId+"): invaid scheme: "+this._uri.protocol)}}}NgLogD("WS("+this._wsId+"): uri="+JSON.stringify(this._uri));if(b.Capabilities.getPlatformOS()==="flash"){this._connect(this._uri.hostname)}else{q.DNS.resolve(this._uri.hostname,this._onResolverComplete.bind(this))}},CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3,StatusCode:{Normal:1000,GoingAway:1001,ProtocolError:1002,NotSupported:1003,ClosedAbnormally:1006,Inconsistent:1007,NotAcceptable:1008,MessageTooLarge:1009,NoExtensionReply:1010,UnexpectedError:1011},close:function(C,D){if(!this._soc){return}if(this._readyState==u.CLOSED){return}if(this._readyState==u.CLOSING){return}if(this._readyState==u.CONNECTING&&!this._handshaking){NgLogD("WS("+this._wsId+"): closing underlying socket");this._soc.close();this._soc=null;this._readyState=u.CLOSED;return}this._readyState=u.CLOSING;var A=null;if(C&&D){A=k(C,D)}var B=v({fin:true,opcode:y.Close},A,true);this._soc.send(B);this._soc.shutdown()},send:function(B){var C=null;if(!this._soc){return}if(typeof B==="string"){var A=new b.Buffer(b.UTF8.encode(B));C=v({fin:true,opcode:y.Text},A,true)}else{C=v({fin:true,opcode:y.Binary},B,true)}this._soc.send(C)},_onHttpStatusLine:function(A,C,B){NgLogD("WS("+this._wsId+"): onStatusLine(): ver="+A+" sc="+C+" "+B);this._httpStatus=C},_onHttpHeaders:function(){NgLogD("WS("+this._wsId+"): onHeaders()");var A;if(this._httpStatus==101){A=this._httpParser.getHeader("sec-websocket-accept");if(A!=l(this._wsKey)){this._readyState=u.CLOSED;NgLogD("WS("+this._wsId+"): closing underlying socket");this._soc.close();this._soc=null;if(this.onerror){this.onerror("Sec-WebSocket-Accept header is missing or invalid")}this._clearEvHandles();return}A=this._httpParser.getHeader("sec-websocket-protocol");if(A){this._protocol=A}this._readyState=u.OPEN;if(this.onopen){this.onopen()}}else{this._readyState=u.CLOSED;NgLogD("WS("+this._wsId+"): closing underlying socket");this._soc.close();this._soc=null;if(this.onerror){this.onerror("Failed to upgrade to WebSocket ("+this._httpStatus+")")}this._clearEvHandles()}},_onHttpContent:function(A){NgLogD("WS("+this._wsId+"): content "+A.length+" bytes");if(this._readyState==u.OPEN){this._frameParser.parse(new b.Buffer(A))}},_onWsFrame:function(D){NgLogD("WS("+this._wsId+"): opcode="+D.opcode+" readyState="+this._readyState);var B;if(D.opcode==y.Text){if(this.onmessage){this.onmessage({data:D.data})}}else{if(D.opcode==y.Binary){if(this.onmessage){this.onmessage({data:D.data})}}else{if(D.opcode==y.Close){NgLogD("WS("+this._wsId+"): ev="+JSON.stringify(D));var C=(D.code!==null)?D.code:u.StatusCode.Normal;var E=(D.data!==null)?D.data:"Normal closure";if(this._readyState==u.OPEN){if(this._soc){var A=null;if(C&&E){A=k(C,E)}B=v({fin:true,opcode:y.Close},A,true);this._soc.send(B);this._soc.shutdown()}}this._readyState=u.CLOSED;if(this._soc){NgLogD("WS("+this._wsId+"): closing underlying socket on Close frame");this._soc.close();this._soc=null}if(this.onclose){this.onclose({wasClean:true,code:C,reason:E})}this._clearEvHandles()}else{if(D.opcode==y.Ping){NgLogD("WS("+this._wsId+"): received Ping with data: "+(D.data!==null)?D.data.toString():"");if(this._readyState==u.OPEN){B=v({fin:true,opcode:y.Pong},D.data,true);this._soc.send(B)}}else{if(D.opcode==y.Pong){NgLogD("WS("+this._wsId+"): received Pong with data: "+(D.data!==null)?D.data.toString():"")}else{NgLogD("WS("+this._wsId+"): opcode="+D.opcode+" not supported")}}}}}},_onWsError:function(A,B){this._readyState=u.CLOSED;if(this._soc){NgLogD("WS("+this._wsId+"): closing underlying socket on error");this._soc.close();this._soc=null}if(this.onclose){this.onclose({wasClean:true,code:A,reason:B})}this._clearEvHandles()},_onResolverComplete:function(B,A){if(B){NgLogE("DNS error: "+B);if(this.onerror){this.onerror("Failed to locate server at "+this._uri.host+", "+B)}this._clearEvHandles();return}this._connect(A[0])},_connect:function(D){var A=this;var C=new b.Buffer();var B=false;NgLogD("WS("+A._wsId+"): connecting to "+D+":"+A._uri.port);if(this._uri.protocol==="wss:"){A._soc=new q.Socket(q.Socket.Protocol.TCP4,q.Socket.Security.SecSSL)}else{A._soc=new q.Socket(q.Socket.Protocol.TCP4)}A._soc.setOption(q.Socket.Option.OpUnboundedSendBuf,1);A._soc.setOnWritable(function(E){if(!B){NgLogD("WS("+A._wsId+"): socket connected");B=true;A._handshaking=true;A._wsKey=r();C.writeBytes("GET "+(A._uri.path?A._uri.path:"/")+" HTTP/1.1\r\nHost: "+A._uri.host+"\r\nUpgrade: websocket\r\nConnection: Upgrade\r\nSec-WebSocket-Key: "+A._wsKey+"\r\nSec-WebSocket-Version: 13\r\n");if(A._protocols){C.writeBytes("Sec-WebSocket-Protocol: ");if(typeof(A._protocols)==="string"){C.writeBytes(A._protocols+"\r\n")}else{C.writeBytes(A._protocols.join(", ")+"\r\n")}}C.writeBytes("\r\n");console.log("Sending data:",C);A._soc.send(C)}else{if(C.getSize()>0){A._soc.send(C)}}});A._soc.setOnReadable(function(G){var F=new b.Buffer();var E=A._soc.recv(F);if(E<0){NgLogD("WS("+A._wsId+"): connection reset");if(A._readyState!=u.CLOSED){A._readyState=u.CLOSED;NgLogD("WS("+this._wsId+"): closing underlying socket");A._soc.close();A._soc=null;if(A.onclose){A.onclose({wasClean:false,code:u.StatusCode.ClosedAbnormally,reason:"Connection closed abnormally"})}A._clearEvHandles()}return}if(E===0){NgLogD("WS("+A._wsId+"): end-of-stream: state="+A._readyState);if(A._soc){NgLogD("WS("+this._wsId+"): closing underlying socket");A._soc.close();A._soc=null}if(A._readyState!=u.CLOSED){A._readyState=u.CLOSED;if(A.onclose){A.onclose({wasClean:false,code:u.StatusCode.ClosedAbnormally,reason:"Connection closed abnormally"})}A._clearEvHandles()}return}NgLogD("WS("+A._wsId+"): received "+F.getSize()+" bytes, state="+A._readyState);if(A._readyState==u.CONNECTING){if(A._handshaking){A._httpParser.parse(F.toString())}}else{if(A._readyState==u.OPEN||A._readyState==u.CLOSING){A._frameParser.parse(F)}}});A._soc.setOnError(function(F,E){NgLogD("WS("+A._wsId+"): socket error: "+F.description);NgLogD("WS("+this._wsId+"): closing underlying socket");A._soc.close();A._soc=null;if(A._readyState!=u.CLOSED){A._readyState=u.CLOSED;if(A.onclose){A.onclose({wasClean:false,code:u.StatusCode.ClosedAbnormally,reason:"err.description"})}A._clearEvHandles()}});if(this._uri.protocol!=="wss:"){A._soc.connect({host:D,port:A._uri.port})}else{A._soc.connect({host:D,port:A._uri.port,cn:this._uri.hostname})}},_getBufferedSize:function(){if(!this._soc){return 0}return this._soc.getBufferedSize()}})}};__ngs._3v={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var a=__ngs.r_(__ngs._z).Class;var d={"http:":{slashes:true},"https:":{slashes:true},"ws:":{slashes:true},"wss:":{slashes:true},"file:":{slashes:true},"mailto:":{slashes:false}};b.URL=a.singleton({initialize:function(){},parse:function(g){var e={};var k;var h;k=g.indexOf(":");if(k>=0){e.protocol=g.slice(0,k+1).toLowerCase();h=d[e.protocol];if(h){g=g.slice(k+(h.slashes?3:1))}else{if(g.substr(k+1,2)==="//"){g=g.slice(k+3)}else{g=g.slice(k+1)}}k=g.search(/[\/?]/);if(k<0){e.host=g;g=""}else{e.host=g.slice(0,k);g=g.slice(k+((g[k]==="?")?0:1))}k=e.host.indexOf("@");if(k>=0){e.auth=e.host.slice(0,k);e.host=e.host.slice(k+1)}h=e.host.split(":");e.hostname=h[0];if(h[1]){e.port=parseInt(h[1],10)}}h=g.split("?");e.pathname=((h[0].length===0||h[0][0]!=="/")?"/":"")+h[0];if(h[1]){e.search="?"+h[1]}e.path=e.pathname+(e.search?e.search:"");return e}})}};__ngs._3w={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._20).SHA1;a.b64_hmac_sha1=c.b64_hmac_sha1;a.hex_sha1=c.hex_sha1;a.b64_sha1=c.b64_sha1}};__ngs._3x={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.Social={};a.Social.Common=new (__ngs.r_(__ngs._6p).RequireLoader)({Appdata:function(){return __ngs.r_(__ngs._6q).Appdata},Auth:function(){return __ngs.r_(__ngs._6r).Auth},Blacklist:function(){return __ngs.r_(__ngs._6s).Blacklist},Config:function(){return __ngs.r_(__ngs._6t).Config},People:function(){return __ngs.r_(__ngs._6u).People},Profanity:function(){return __ngs.r_(__ngs._6v).Profanity},Request:function(){return __ngs.r_(__ngs._6w).Request},RemoteNotification:function(){return __ngs.r_(__ngs._6x).RemoteNotification},Service:function(){return __ngs.r_(__ngs._6y).Service},Analytics:function(){return __ngs.r_(__ngs._6z).Analytics},Leaderboard:function(){return __ngs.r_(__ngs._70).Leaderboard}});a.Social.US=new (__ngs.r_(__ngs._6p).RequireLoader)({DataModel:function(){return __ngs.r_(__ngs._71).DataModel},User:function(){return __ngs.r_(__ngs._72).User},Game:function(){return __ngs.r_(__ngs._73).Game},FullGamercard:function(){return __ngs.r_(__ngs._74).FullGamercard},Leaderboard:function(){return __ngs.r_(__ngs._75).Leaderboard},Achievement:function(){return __ngs.r_(__ngs._76).Achievement},Score:function(){return __ngs.r_(__ngs._77).Score},AppData:function(){return __ngs.r_(__ngs._78).AppData},Cache:function(){return __ngs.r_(__ngs._79).Cache},AB:function(){return __ngs.r_(__ngs._7a).AB},Session:function(){return __ngs.r_(__ngs._7b).Session},Dispatcher:function(){return __ngs.r_(__ngs._7c).Dispatcher},Reward:function(){return __ngs.r_(__ngs._7d).Reward}});a.Social.US.Service=new (__ngs.r_(__ngs._6p).RequireLoader)({Leaderboards:function(){return __ngs.r_(__ngs._7e).Leaderboards},Friends:function(){return __ngs.r_(__ngs._7f).Friends},Profile:function(){return __ngs.r_(__ngs._7g).Profile},ButtonOverlays:function(){return __ngs.r_(__ngs._7h).ButtonOverlays},GameLaunchPayload:function(){return __ngs.r_(__ngs._7i).GameLaunchPayload},Achievements:function(){return __ngs.r_(__ngs._7j).Achievements}});a.Bank=__ngs.r_(__ngs._7k).Bank}};__ngs._3y={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var d=__ngs.r_(__ngs._7l).DialogController;var b=__ngs.r_(__ngs._7m).PopUpView;a.PopUpController=d.subclass({classname:"PopUpController",initialize:function($super,e){var g="none";if(e&&e.id){g=e.id}this._okCB=null;if(e&&e.cb){this._okCB=e.cb}this._dismissCB=null;if(e&&e.cbDismiss){this._dismissCB=e.cbDismiss}this._buttons="two";if(e&&e.buttons){this._buttons=e.buttons}this._otherData={};if(e){this._otherData=e}this._destroyCB=this._otherData.destroyCB;TFAnalytics.reportGameEvent("POPUP",{popupid:g,popupname:this._otherData.title});$super(b);this.getView().showShade();if(this._buttons=="one"){this.getView().cancelButton.setVisible(false);this.getView().okButton.setPosition(this.getView()._definitions.cancelButton.info.alt_pos_x,this.getView()._definitions.okButton.pos_y);TFUtils.changeImageOnSprite(this.getView().reg1Image,this.getView()._definitions.reg1Image.info.asset2)}},dismissDialog:function($super){$super();if(this._destroyCB){this._destroyCB()}},onOk:function(){if(this._okCB){console.log("PopUpController > onOK > Invoking _okCB");this._okCB()}else{console.log("PopUpController > onOK > _okCB undefined")}this.dismissDialog()},onDismiss:function(e){if(TFGameData._mainTutorialFlag==true&&e.info&&e.info.buttontype=="cancel"){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"POPUPCANCELBUTTON"})}if(this._dismissCB){console.log("PopUpController > onDismiss > invoking dismiss CB");this._dismissCB()}else{console.log("PopUpController > onDismiss > _dismissCB undefined")}this.dismissDialog()}})}};__ngs._3z={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=Core.Class.singleton({classname:"RemoteCall",initialize:function(){this._authenticated=false;this._authenticatedCredentials={};this._oauthTokens={};this._configVersion="";this._binaryVersion="";this._jsVersion="";this._clientEnv="development";this._mobageId="";this._mobageGamertag="";this._customXhr=null;this._headers={};this._invokedCalls=[];this._counter=0},setup:function(g){var d=__ngs.r_(__ngs._7n).ObjectRequestXhr;this.setObjectRequest(d);var e="";if(Core.Capabilities.getPlatformOS()=="Android"){e="android"}else{if(Core.Capabilities.getPlatformOS()=="iPhone OS"){e="ios"}}var h={"X-Content-Tag":"default","tf-client-os":e};this.setHeaders(h);this.setServer(g)},setObjectRequest:function(d){this._customXhr=d},setOauthTokens:function(d){this._oauthTokens=d},setAuthenticatedCredentials:function(d){this._authenticatedCredentials=d},setServer:function(d){this.serverUrl=d},setBinaryVersion:function(d){this._binaryVersion=d+""},setJSVersion:function(d){this._jsVersion=d+""},setConfigVersion:function(d){this._configVersion=d+""},setClientEnvironment:function(d){this._clientEnv=d+""},setMobageGamertag:function(d){this._mobageGamertag=d+""},setMobageId:function(d){this._mobageId=d+""},setHeaders:function(d){this._headers=d},setHeader:function(e,d){this._headers[e]=d},authenticate:function(d){if(typeof d!=="function"){throw new Error("Server.authenticate: cb parameter must be a callback function.")}var h,e;if(Core.Capabilities.getPlatformOS()=="Android"){h="QlZjbTHKuYejSfvJZog";e="JumPT8Omeao1UB5TLHwkGyA0kncDd1B5TMz9yVg22rA"}else{if(Core.Capabilities.getPlatformOS()=="iPhone OS"){h="qALYFvg3NCVn6hZ1QyHNkQ";e="ClBRGZMJUvN9BqU6kRa5xbnbGtrRYPd7ne6F7KsH0k"}}if((!h)||(!e)){d("Could not get consumerKey and consumerSecret from configuration.json.");return}var g={consumerKey:h,consumerSecret:e};this._getTempTokens(g,function(m,k,n,l){if(m){d("RemoteCall.authenticate _getTempTokens failed : "+m);return}this._getOAuthTokens(k,n,l,function(r,q,p,o){if(r){d("RemoteCall.authenticate _getOAuthTokens failed : "+r);return}if(!p||!p.oauth_token||!p.oauth_token_secret){d("NgServer.authenticate _getOAuthTokens failed : oauthparams"+JSON.stringify(p));return}this._authenticated=true;q.token=p.oauth_token;q.tokenSecret=p.oauth_token_secret;this.setAuthenticatedCredentials(q);this.setOauthTokens(n);console.log("RemoteCall.authenticate New login flow");d(null,o)}.bind(this))}.bind(this))},_getTempTokens:function(e,d){var h=new this._customXhr(e);var g={oauth_token:"",oauth_callback:"oob"};h.request("GET",this.serverUrl+"/OAuth/request_temp_token",g,this._headers,function(l,k){if(l){d("/OAuth/request_temp_token Error: "+l);return}if(k.status==Server.OAUTH_AUTHENTICATION_FAILURE){d("/OAuth/request_temp_token STATUS "+Server.OAUTH_AUTHENTICATION_FAILURE+" : Unauthorized");return}var o;try{o=JSON.parse(k.data)}catch(n){d("/OAuth/request_temp_token Error parsing response data into a JSON object:"+k.data);return}var m=__ngs.r_(__ngs._3x).Social;m.Common.Auth.authorizeToken(o.oauth_token,function(q,p){console.log("Social.Common.Auth.authorizeToken callback: error:"+q+" verifier:"+p);if(q){d(q);return}d(null,p,o,e);return})})},_getOAuthTokens:function(e,h,k,d){k.token=h.oauth_token;k.tokenSecret=h.oauth_token_secret;var g={oauth_token:h.oauth_token,oauth_token_secret:h.oauth_token_secret};var l=new this._customXhr(k);l.request("GET",this.serverUrl+"/OAuth/request_token?oauth_verifier="+e+"&binaryVersion="+this._binaryVersion+"&clientEnv="+this._clientEnv,g,this._headers,function(n,m){if(n){d("/OAuth/request_token Error: "+n);return}if(m.status==Server.OAUTH_AUTHENTICATION_FAILURE){d("/OAuth/request_token STATUS "+Server.OAUTH_AUTHENTICATION_FAILURE+" : Unauthorized");return}if(m.status==Server.WRONG_BINARY_VERSION||m.status==Server.WRONG_CONFIG_VERSION){if(!Server.generalDataRetrieving(undefined,undefined,m.status)){return}}var p;try{p=JSON.parse(m.data)}catch(o){d("/OAuth/request_token Error parsing response data into a JSON object:"+m.data);return}if(!p){d("/OAuth/request_token Error: response.data is null or undefined - "+JSON.stringify(m));return}if(!p.oauthTokens){d("/OAuth/request_token Error: response.data.oauthTokens is null or undefined - "+JSON.stringify(m));return}if(!p.userData){d("/OAuth/request_token Error: response.data.userData is null or undefined - "+JSON.stringify(m));return}d(null,k,p.oauthTokens,p.userData)})},invoke:function(g,k,e,h){var d=__ngs.r_(__ngs._7o).SerializationQueue;d._push(function(l){var m=function(p,o,n){this._handleResponse(p,o,n);l()}.bind(this,this._counter);this._invokedCalls[this._counter]={endpoint:g,method:k,args:e,originalCb:h,cb:m};this._makeAuthenticatedRequest(g,k,e,m);this._counter++}.bind(this))},_makeAuthenticatedRequest:function(e,h,d,g){if(!this._authenticated){this.authenticate(function(m,o,k,n,l){if(l){n("RemoteCall._makeAuthenticatedRequest Authentication Error : "+l);return}console.log("RemoteCall._makeAuthenticatedRequest OAuth Authentication completed successfully.");this._makeRequest(m,o,k,n)}.bind(this,e,h,d,g))}else{this._makeRequest(e,h,d,g)}},_addGameClientData:function(d){if(d===undefined){d={}}d.jsVersion=this._jsVersion;d.binaryVersion=this._binaryVersion;d.configVersion=this._configVersion;d.clientEnv=this._clientEnv;d.msgId=this._mobageId+"-"+new Date().getTime();d.mobageId=this._mobageId;d.gamerTag=this._mobageGamertag;return d},_makeRequest:function(l,n,e,m){if(n==undefined){n=""}var h={handler:n};if(e instanceof Array){h.args=e}else{for(var g in e){h[g]=e[g]}}this._addGameClientData(h);var k=new this._customXhr(this._authenticatedCredentials);var d=this.serverUrl+l;console.log("RemoteCall._makeRequest called. endpoint="+l+" , method="+n+", headers="+JSON.stringify(this._headers)+" , args="+JSON.stringify(e)+" , data="+JSON.stringify(h));k.request("POST",d,h,this._headers,m)},_handleUnauthorizedRequest:function(e){console.log("RemoteCall._handleUnauthorizedRequest Encountered an unauthorized request. Authenticating again.");this._authenticated=false;this._authenticatedCredentials={};this._oauthTokens={};var d=this._invokedCalls[e];this._makeAuthenticatedRequest(d.endpoint,d.method,d.args,d.cb)},_handleResponse:function(d,p,h){var n=this._invokedCalls[d];var g=p;var l=undefined;var k=h?h.status:undefined;console.log("RemoteCall._handleResponse endpoint="+n.endpoint+" and method="+n.method);console.log("RemoteCall._handleResponse error="+JSON.stringify(p)+", response="+JSON.stringify(h));if(p){}else{if(k==Server.OAUTH_AUTHENTICATION_FAILURE){this._handleUnauthorizedRequest(d);return}else{if(k!=200){g="Error: "+k}else{try{h.data=h.data.replace(/\"gamerTag\":null/g,'"gamerTag":"UnkownSignature"');l=JSON.parse(h.data)}catch(o){console.log("RemoteCall._handleResponse Error parsing response data into a JSON object:"+h.data);l={data:h.data}}}}}var m=Server.generalDataRetrieving(g,l,k,n.method);if(n.originalCb&&m){n.originalCb(g,l,k)}this._invokedCalls[d]=undefined}});a.RemoteCall=c}};__ngs._40={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var d=__ngs.r_(__ngs._3z).RemoteCall;var c=Core.Class.subclass({classname:"RemoteObject",initialize:function(){},invoke:function(h,k,g,e){d.invoke(h,k,g,e)}});a.RemoteObject=c}};__ngs._41={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._40).RemoteObject;var d=c.subclass({classname:"RemoteBattle",initialize:function(e){console.log("RemoteBattle.initialize called. session=%s",JSON.stringify(e));this._id=e._token},requestEnemies:function(g,e){console.log("RemoteBattle.requestEnemies called. level="+g);this.invoke("/objects/battle","requestEnemies",[g],e)},fight:function(h,g,e){console.log("RemoteBattle.fight called. Opponent : "+h);this.invoke("/objects/battle","fight",[h,g],e)},fightBoss:function(h,k,l,g,e){console.log("RemoteBattle.fightBoss called.");this.invoke("/objects/battle","fightBoss",[h,k,l,g],e)},requestEnemyDeck:function(g,e){console.log("RemoteBattle.requestEnemyDeck called. Opponent : "+g);this.invoke("/objects/battle","requestEnemyDeck",[g],e)}});a.RemoteBattle=d}};__ngs._42={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var d=__ngs.r_(__ngs._40).RemoteObject;var b=d.subclass({classname:"RemoteMission",initialize:function(e){console.log("RemoteMission.initialize called. session=%s",JSON.stringify(e));this._id=e._token},roundCompleted:function(g,e){this.invoke("/objects/mission","roundCompleted",[g],e)},getLuckyChance:function(g,h,e){this.invoke("/objects/mission","getLuckyChance",[g,h],e)},popAward:function(h,g,e){this.invoke("/objects/mission","popAward",[h,g],e)}});a.RemoteMission=b}};__ngs._43={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._40).RemoteObject;var d=c.subclass({classname:"RemoteEvent",initialize:function(e){console.log(this.classname+".initialize called. session=%s",JSON.stringify(e));this._id=e._token},register:function(g,e){console.log(this.classname+".register called.");this.invoke("/objects/event","register",[g],e)},getEventInfo:function(g,e){console.log(this.classname+".getEventInfo called.");this.invoke("/objects/event","getEventInfo",[],e)},getRaidBossRewardList:function(e){console.log(this.classname+".getRaidBossRewardList called.");this.invoke("/objects/event","getRaidBossRewardList",[],e)},getBossInfo:function(g,e){console.log(this.classname+".getBossInfo called.");this.invoke("/objects/event","getBossInfo",[g],e)},generateBoss:function(e){console.log(this.classname+".generateBoss called.");this.invoke("/objects/event","generateBoss",[],e)},fightBoss:function(g,h,e){console.log(this.classname+".fightBoss called.");this.invoke("/objects/event","fightBoss",[g,h],e)},consumeItemsAndFightEventBoss:function(g,h,k,e){console.log(this.classname+".consumeItemsAndFightEventBoss called.");this.invoke("consumeItemsAndFightBoss",[g,h,k],e)},callForHelp:function(g,e){console.log(this.classname+".callForHelp called.");this.invoke("/objects/event","callForHelp",[g],e)},acceptHelpRequest:function(g,h,e){console.log(this.classname+".acceptHelpRequest called.");this.invoke("/objects/event","acceptHelpRequest",[g,h],e)},getHelpRequests:function(e){console.log(this.classname+".getHelpRequests called.");this.invoke("/objects/event","getHelpRequests",[],e)},getBossDamageLeaderboard:function(g,e){console.log(this.classname+".getBossDamageLeaderboard called.");this.invoke("/objects/event","getBossDamageLeaderboard",[g],e)},getPlayerInfo:function(g,e){this.invoke("/objects/event","getPlayerInfo",[g],e)},getRaidBossRewards:function(g,e){console.log(this.classname+".getRaidBossRewards called.");this.invoke("/objects/event","getRaidBossRewards",[g],e)},getRanking:function(h,g,e){console.log(this.classname+".getRanking called.");this.invoke("/objects/event","getRanking",[h,g],e)},getRankingByIndex:function(g,h,e){console.log(this.classname+".getRankingByIndex called.");this.invoke("/objects/event","getRankingByIndex",[g,h],e)},getDailyRanking:function(h,g,e){console.log(this.classname+".getDailyRanking called.");this.invoke("/objects/event","getDailyRanking",[h,g],e)},seenEventFinal:function(g,e){console.log(this.classname+".seenEventFinal called.");this.invoke("/objects/event","seenEventFinal",[g],e)},dummy:undefined});a.RemoteEvent=d}};__ngs._44={_c:null,_d:function(){this._c={exports:{motions:{tfc_1:{source:[{x:731,y:-352,frameRate:24}],Keyframe:[{index:0,x:0,y:0},{y:20,index:1,x:0},{y:10,index:4,x:0},{index:5,x:0,y:10},{y:562,index:8,x:0},{y:1198,index:14,x:0},{y:1518,index:15,x:0},{y:1486,index:16,x:0},{index:19,x:0,y:1486},{index:20,x:0,y:1486},{y:688,index:26,x:0},{y:5,index:30,x:0},{y:0,index:31,x:0},{index:32,x:0,y:0}]},tfc_10:{source:[{x:-269,y:376,rotation:0,frameRate:24}],Keyframe:[{index:0,x:0,y:0,rotation:0},{index:5,x:0,y:0,rotation:0},{index:8,x:0,y:0,rotation:0},{y:424,index:12,x:0,rotation:0},{x:399,y:791,rotation:90,index:16},{index:19,x:399,y:791,rotation:90},{index:20,x:399,y:791,rotation:90},{x:0,y:392,rotation:0,index:24},{y:326,index:26,x:0,rotation:0},{y:0,index:31,x:0,rotation:0},{index:32,x:0,y:0,rotation:0}]},tfc_8:{source:[{x:-305,y:2596,rotation:0,frameRate:24}],Keyframe:[{index:0,x:0,y:0,rotation:0},{x:60,index:2,y:0,rotation:0},{y:466,rotation:90,index:5,x:60},{y:133,index:8,x:60,rotation:90},{y:-1064,index:14,x:60,rotation:90},{y:-1077,index:15,x:60,rotation:90},{y:-1071,index:16,x:60,rotation:90},{x:725,index:18,y:-1071,rotation:90},{index:19,x:725,y:-1071,rotation:90},{index:20,x:725,y:-1071,rotation:90},{x:260,y:126,index:26,rotation:90},{x:0,y:0,rotation:0,index:31},{index:32,x:0,y:0,rotation:0}]},tfc_7:{source:[{x:639,y:3040,frameRate:24}],Keyframe:[{index:0,x:0,y:0},{index:2,x:0,y:0},{y:-66,index:3,x:0},{index:5,x:0,y:-66},{y:-399,index:8,x:0},{y:-1596,index:14,x:0},{y:-1776,index:15,x:0},{y:-1769,index:16,x:0},{index:19,x:0,y:-1769},{index:20,x:0,y:-1769},{y:-372,index:26,x:0},{y:0,index:31,x:0},{index:32,x:0,y:0}]},tfc_6_1:{source:[{x:2216,y:2763,scaleX:1,scaleY:1,rotation:0,frameRate:24}],Keyframe:[{index:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1},{x:-259,y:80,rotation:-45,index:2,scaleX:1,scaleY:1},{x:-372,y:372,rotation:-90,index:4,scaleX:1,scaleY:1},{x:-366,index:5,y:372,rotation:-90,scaleX:1,scaleY:1},{x:-332,y:67,index:8,rotation:-90,scaleX:1,scaleY:1},{x:-199,y:-1264,index:14,rotation:-90,scaleX:1,scaleY:1},{y:-1403,index:16,x:-199,rotation:-90,scaleX:1,scaleY:1},{x:-266,y:-1310,index:19,rotation:-90,scaleX:1,scaleY:1},{index:20,x:-266,y:-1310,rotation:-90,scaleX:1,scaleY:1},{y:93,index:26,x:-266,rotation:-90,scaleX:1,scaleY:1},{x:-332,y:299,index:29,rotation:-90,scaleX:1,scaleY:1},{x:-275,y:173,scaleX:0.999,scaleY:0.999,rotation:-60,index:30},{x:-144,y:53,scaleX:0.998,scaleY:0.998,rotation:-30,index:31},{x:0,y:0,scaleX:1,scaleY:1,rotation:0,index:32}]},tfc_3:{source:[{x:1944,y:-204,frameRate:24}],Keyframe:[{index:0,x:0,y:0},{y:20,index:1,x:0},{x:-304,y:10,index:4},{x:-350,y:17,index:5},{y:569,index:8,x:-350},{x:-337,y:1205,index:14},{y:1525,index:15,x:-337},{y:1493,index:16,x:-337},{index:19,x:-337,y:1493},{index:20,x:-337,y:1493},{y:695,index:26,x:-337},{x:-57,y:6,index:30},{x:0,y:0,index:31},{index:32,x:0,y:0}]},tfc_4:{source:[{x:2048,y:328,scaleX:1,scaleY:1,rotation:0,frameRate:24}],Keyframe:[{index:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1},{index:5,x:0,y:0,rotation:0,scaleX:1,scaleY:1},{y:560,index:8,x:0,rotation:0,scaleX:1,scaleY:1},{y:1200,index:14,x:0,rotation:0,scaleX:1,scaleY:1},{y:1520,index:15,x:0,rotation:0,scaleX:1,scaleY:1},{x:2,y:1490,scaleX:0.999,scaleY:0.999,rotation:-18,index:16},{x:8,y:1209,scaleX:1,scaleY:1,rotation:-90,index:19},{index:20,x:8,y:1209,rotation:-90,scaleX:1,scaleY:1},{y:411,index:26,x:8,rotation:-90,scaleX:1,scaleY:1},{x:-131,y:82,scaleX:0.999,scaleY:0.999,rotation:-18,index:29},{x:0,y:0,scaleX:1,scaleY:1,rotation:0,index:31},{index:32,x:0,y:0,rotation:0,scaleX:1,scaleY:1}]},tfc_2:{source:[{x:1340,y:-238,frameRate:24}],Keyframe:[{index:0,x:0,y:0},{y:20,index:1,x:0},{y:10,index:4,x:0},{index:5,x:0,y:10},{y:562,index:8,x:0},{x:80,y:1198,index:14},{x:200,y:1624,index:15},{x:240,y:1632,index:16},{index:19,x:240,y:1632},{index:20,x:240,y:1632},{y:834,index:26,x:240},{x:48,y:34,index:30},{x:0,y:0,index:31},{index:32,x:0,y:0}]},tfc_6:{source:[{x:1552,y:2460,rotation:0,frameRate:24}],Keyframe:[{index:0,x:0,y:0,rotation:0},{x:-64,index:2,y:0,rotation:0},{y:-66,index:3,x:-64,rotation:0},{x:734,y:1264,rotation:-90,index:6},{y:1064,index:8,x:734,rotation:-90},{y:-133,index:14,x:734,rotation:-90},{y:-306,index:15,x:734,rotation:-90},{index:16,x:734,y:-306,rotation:-90},{x:335,y:-319,index:19,rotation:-90},{index:20,x:335,y:-319,rotation:-90},{x:1865,y:1077,index:26,rotation:-90},{x:1796,y:-332,rotation:0,index:27},{x:0,y:0,index:31,rotation:0},{index:32,x:0,y:0,rotation:0}]},tfc_5:{source:[{x:2245,y:1309,scaleY:1,frameRate:24,scaleX:1}],Keyframe:[{index:0,x:0,y:0,scaleX:1,scaleY:1},{y:409,scaleY:1.64,index:4,x:0,scaleX:1},{y:425,scaleY:1.569,index:5,x:0,scaleX:1},{y:286,scaleY:1.357,index:8,x:0,scaleX:1},{y:0,scaleY:0.316,index:14,x:0,scaleX:1},{y:400,index:15,x:0,scaleX:1,scaleY:0.316},{y:264,index:16,x:0,scaleX:1,scaleY:0.316},{y:81,scaleY:0.16,index:19,x:0,scaleX:1},{index:20,x:0,y:81,scaleX:1,scaleY:0.16},{y:340,scaleY:1.313,index:26,x:0,scaleX:1},{y:409,scaleY:1.48,index:28,x:0,scaleX:1},{y:399,scaleY:1.588,index:31,x:0,scaleX:1},{y:0,scaleY:1,index:32,x:0,scaleX:1}]},tfc_9:{source:[{x:-260,y:1452,scaleY:1,frameRate:24,scaleX:1}],Keyframe:[{index:0,x:0,y:0,scaleX:1,scaleY:1},{y:399,index:2,x:0,scaleX:1,scaleY:1},{index:5,x:0,y:399,scaleX:1,scaleY:1},{y:200,index:8,x:0,scaleX:1,scaleY:1},{y:-266,scaleY:0.395,index:14,x:0,scaleX:1},{y:-306,scaleY:0.148,index:19,x:0,scaleX:1},{index:20,x:0,y:-306,scaleX:1,scaleY:0.148},{y:133,scaleY:1.306,index:26,x:0,scaleX:1},{y:226,scaleY:1.263,index:30,x:0,scaleX:1},{y:0,scaleY:1,index:31,x:0,scaleX:1},{index:32,x:0,y:0,scaleX:1,scaleY:1}]}}}}}};__ngs._45={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var g=__ngs.r_(__ngs._5).Core;var e=function(h,m,l){var k=1-h;return 3*k*k*h*m+3*k*h*h*l+h*h*h};var a=g.Class.subclass({classname:"AnimationManager",initialize:function(){this._queuedAnimations=[];this._isRunning=0},destroy:function(){while(this._queuedAnimations.length>0){this._queuedAnimations[0].destroy()}this._queuedAnimations=[]},registerQueue:function(h){if(!(h instanceof c)){return}h._manager=this;this._queuedAnimations.push(h)},unregisterQueue:function(h){for(var l=0;l<this._queuedAnimations.length;l++){if(h==this._queuedAnimations[l]){this._queuedAnimations.splice(l,1);break}}},abort:function(){}});var c=g.MessageListener.subclass({classname:"AnimationQueue",initialize:function(h){g.UpdateEmitter.addListener(this,this._tick.bind(this,undefined));this._queue=new Array();this._start=0;if(h instanceof a){h.registerQueue(this)}else{this._manager=undefined}},reset:function(){this._queue=new Array();this._start=0;this.now=undefined;this.locked=undefined},destroy:function($super){g.UpdateEmitter.removeListener(this);this._queue=[];this._start=0;this._loop=undefined;this.now=undefined;this.locked=undefined;if(this._manager!==undefined){this._manager.unregisterQueue(this)}$super()},register:function(h){if(!(h instanceof a)){throw new Error("Trying to register Animation queue to invalid instance of AnimationManager")}h.registerQueue(this);return this},pushAnimation:function(k,l){var h=new c.Animation(k,l);this._queue.push(h);return this},pushFrames:function(k,l){var h=new c.Animation(k,l,true);this._queue.push(h);return this},tween:function(k,l){if(this._queue.length==0){throw new Error("Cannot add tween property to an empty AnimationQueue.")}if(typeof(k)!="function"){throw new Error("Trying to add invalid parameter function to AnimationQueue.tween.")}if(typeof(l)!="function"){throw new Error("Trying to add invalid setter function to AnimationQueue.tween.")}var h=this._queue[this._queue.length-1];h.addProperty(k,l);return this},tick:function(k){if(this._queue.length==0){throw new Error("Cannot add tick to an empty AnimationQueue.")}if(typeof(k)!="function"){throw new Error("Trying to add invalid function callback in AnimationQueue.tick.")}var h=this._queue[this._queue.length-1];h.addTick(k);return this},pushCallback:function(k){if(typeof(k)!="function"){throw new Error("Error adding non-function callback to AnimationQueue.")}var h=new c.Animation(0,c.Curve.Linear);h.setCallback(k);this._queue.push(h);return this},concat:function(h){if(!(h instanceof c)){throw new Error("Error concatenating non-AnimationQueue to AnimationQueue.")}this._queue=this._queue.concat.apply(this._queue,h._queue);return this},startLooped:function(){this._loop=true;this._startQueue=this._queue.slice(0);this.start()},start:function(){if(this._start!=0){return this}this._start=g.Time.getFrameTime();this._tick();return this},flush:function(){this._tick(Number.MAX_VALUE);return this},_tick:function(k){if(this.locked){if(this.now){setTimeout(this._tick.bind(this,k),0)}return}if(this._start==0){return}this.locked=true;if(typeof(k)=="undefined"){k=g.Time.getFrameTime()}var h=this._queue[0];if(this._start<0){this._start=k}while(h instanceof c.Animation){if(h.tick(this._start,k)){this._start=h.chopTime(this._start);if(this._queue[0]==h){this._queue.shift().destroy()}h=this._queue[0];if(this._start<0){this.locked=undefined;return}}else{this.locked=undefined;return}}if(this._loop&&k!=Number.MAX_VALUE){this.reset();this._queue=this._startQueue.slice(0);this.start()}else{this.destroy()}},$Animation:g.Class.subclass({initialize:function(h,l,k){if(typeof(l)!="function"){l=c.Curve.Linear}this._curve=l;this.start=0;if(k!==undefined&&k){this._frames=Math.floor(h);this._duration=Math.floor(h)}else{this._frames=-1;this._duration=h}this._properties=[];this._ticks=[]},destroy:function(){},setCallback:function(h){this._callback=h;this._duration=0},addTick:function(h){this._ticks.push(h)},addProperty:function(h,k){this._properties.push([h,k])},tick:function(p,m){if(typeof(this._callback)=="function"){this._callback();return true}if(p<0){this.start=p=m}var h=false;var n=1;if(this._frames>=0){this._duration--;if(this._duration<1){h=true;this._duration=0}if(this._frames>0){n-=(this._duration/this._frames)}n=Math.min(Math.max(n,0),1)}else{if(this._duration>0){n=(m-p)/this._duration}if(n>=1){n=1;h=true}}n=this._curve(n);for(var l=0;l<this._properties.length;l++){var o=this._properties[l];o[1](o[0](n))}for(var l=0;l<this._ticks.length;l++){this._ticks[l]()}return h},chopTime:function(h){if(this._frames>=0){return -Infinity}if(h<0){h=this.start}return h+this._duration}}),$Curve:g.Class.singleton({initialize:function(){this.Linear=function(h){return Math.min(1,Math.max(0,h))};this.Ease=this.generateCurve(0.25,0.1,1,1);this.EaseIn=this.generateCurve(0.42,0,1,1);this.EaseOut=this.generateCurve(0,0,0.58,1);this.EaseInOut=this.generateCurve(0.42,0,0.58,1);this.Linger=this.generateCurve(0,1,1,0)},generateCurve:function(l,r,k,p,h){if(typeof(h)=="undefined"){h=256}var q=[];for(var o=0;o<=h;o++){var s=o/h;var n=e(s,l,k);var m=e(s,r,p);q.push([n,m])}return(function(x){if(x>1){return 1}if(x<0){return 0}var v=0,z=this.length-1,w;while(v<=z){w=Math.floor((v+z)/2);if(this[w][0]<x){v=w+1;continue}if(this[w][0]>x){z=w-1;continue}return this[w][1]}if(v>=this.length){return 1}if(z<=0){return 0}var u=x-this[z][0];var y=this[v][0]-this[z][0];u=u/y;return u*(this[v][1]-this[z][1])+this[z][1]}).bind(q)}}),$Interpolate:g.Class.singleton({initialize:function(){},scalar:function(k,h){return(function(m,n,l){return((n-m)*l+m)}).bind(undefined,k,h)},scalarBounded:function(k,h){return(function(m,n,l){return(n-m)*Math.min(Math.max(l,0),1)+m}).bind(undefined,k,h)},point:function(k,h){return(function(m,n,l){var p=m.getX();var o=m.getY();return new g.Point((n.getX()-p)*l+p,(n.getY()-o)*l+o)}).bind(undefined,new g.Point(k),new g.Point(h))},rect:function(k,h){return(function(o,p,n){var r=o.getOrigin().getX();var q=o.getOrigin().getY();var l=o.getSize().getWidth();var m=o.getSize().getHeight();return new g.Rect((p.getOrigin().getX()-r)*n+r,(p.getOrigin().getY()-q)*n+q,(p.getSize().getWidth()-l)*n+l,(p.getSize().getHeight()-m)*n+m)}).bind(undefined,new g.Rect(k),new g.Rect(h))},components:function(k,h){return(function(o,p,n){var l=[];for(var m=0;m<o.length;m++){l[m]=((p[m]-o[m])*n+o[m])}return l}).bind(undefined,k.slice(),h.slice())},cubicCurve:function(m,l,k,h){return(function(v,s,r,q,o){if(o<0){o=0}if(o>1){o=1}var p=1-o;var n=v[0]*p*p*p+s[0]*3*p*p*o+r[0]*3*p*o*o+q[0]*o*o*o;var u=v[1]*p*p*p+s[1]*3*p*p*o+r[1]*3*p*o*o+q[1]*o*o*o;return[n,u]}).bind(undefined,m,l,k,h)}})});c.Curve.instantiate();b.AnimationQueue=c;b.AnimationManager=a}};__ngs._46={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var d=__ngs.r_(__ngs._7p).View;var b=__ngs.r_(__ngs._7q).BottomHudViewDefinition;a.BottomHudView=d.subclass({classname:"BottomHudView",initialize:function($super,e){$super(e,b);this.deckButton.setSelectOnTouch(true);this.cardButton.setSelectOnTouch(true);this.fusionButton.setSelectOnTouch(true);this.colleButton.setSelectOnTouch(true);this.dexButton.setSelectOnTouch(true);this["deckLabel"].setText(Localization.getString("ui_team").toUpperCase());this["cardLabel"].setText(Localization.getString("ui_base").toUpperCase());this["fusionLabel"].setText(Localization.getString("ui_upgrade").toUpperCase());this["colleLabel"].setText(Localization.getString("ui_transscan").toUpperCase());this["dexLabel"].setText(Localization.getString("ui_cyberdex").toUpperCase())},destroy:function($super){$super()},setPressedButton:function(e){if(e=="DeckViewController"){this["deckButton"].setEnabled(false);this["deckButton"].setTouchable(false);this["tabSelectedDeck"].setVisible(true)}else{this["deckButton"].setEnabled(true);this["deckButton"].setTouchable(true);this["tabSelectedDeck"].setVisible(false)}if(e=="FusionSelectionViewController"||e=="CardSelectionViewController"){this["cardButton"].setEnabled(false);this["cardButton"].setTouchable(false);this["tabSelectedCards"].setVisible(true)}else{this["cardButton"].setEnabled(true);this["cardButton"].setTouchable(true);this["tabSelectedCards"].setVisible(false)}if(e=="FusionViewController"){this["fusionButton"].setEnabled(false);this["fusionButton"].setTouchable(false);this["tabSelectedFusion"].setVisible(true)}else{this["fusionButton"].setEnabled(true);this["fusionButton"].setTouchable(true);this["tabSelectedFusion"].setVisible(false)}if(e=="TransformViewController"){this["colleButton"].setEnabled(false);this["colleButton"].setTouchable(false);this["tabSelectedTransform"].setVisible(true)}else{this["colleButton"].setEnabled(true);this["colleButton"].setTouchable(true);this["tabSelectedTransform"].setVisible(false)}if(e=="CollectionViewController"){this["dexButton"].setEnabled(false);this["dexButton"].setTouchable(false);this["tabSelectedDex"].setVisible(true)}else{this["dexButton"].setEnabled(true);this["dexButton"].setTouchable(true);this["tabSelectedDex"].setVisible(false)}this["deckButton"].stateChanged();this["cardButton"].stateChanged();this["fusionButton"].stateChanged();this["colleButton"].stateChanged();this["dexButton"].stateChanged()}})}};__ngs._47={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._5).Core;a.UpdateStacker=c.MessageListener.singleton({classname:"UpdateStacker",initialize:function(){this._functionsCalls=new Array();c.UpdateEmitter.addListener(this,this._onUpdate.bind(this),999)},_onUpdate:function(e){if(this._functionsCalls[0]){for(var d in this._functionsCalls[0]){this._functionsCalls[0][d]()}}this._functionsCalls.splice(0,1)},pushToNextUpdate:function(d){if(!this._functionsCalls[0]){this._functionsCalls[0]=new Array()}this._functionsCalls[0].push(d)},pushToIndexedUpdate:function(e,d){if(!this._functionsCalls[d]){this._functionsCalls[d]=new Array()}this._functionsCalls[d].push(e)}})}};__ngs._48={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var a=__ngs.r_(__ngs._7r).Audio;b.TFSoundManager=Core.Class.singleton({classname:"TFSoundManager",content:"Content/Audio/",sfx:"SFX2/",music:"Music/",ATTACK_1:0,ATTACK_2:1,ATTACK_3:2,CLICK:3,OPEN:5,POD:4,ENEMY_ATTACK_1:6,ENEMY_ATTACK_2:7,ATTACK_4:8,CANNON_HIT:9,ELDER_SHOT1:10,ELDER_SHOT2:11,HUMAN_SHOT1:12,MELEE_HIT1:13,SWARM_SHOT1:14,SWARM_SHOT2:15,MUSIC_DEFAULT:"MAIN_MENU_BACK",initialize:function(){this.soundEnabled=true;this.musicEnabled=true;if(TFGameData._devConfigJSON){if(TFGameData._devConfigJSON.disableMusic){this.musicEnabled=false}if(TFGameData._devConfigJSON.disableSFX){this.soundEnabled=false}}if(Core.Capabilities.getPlatformOS()=="Android"){this._extension=".ogg"}else{if(Core.Capabilities.getPlatformOS()=="iPhone OS"){this._extension=".caf"}}this.m_lastMusicStat="";this.m_lastSoundStat="";this._listener=new Core.MessageListener();this._loadJsonFromFile(this.content+"audioMap.json",this.setupAudioList.bind(this));this._loadJsonFromFile(this.content+"musicMap.json",this.setupMusicList.bind(this));this.sounds={};this.musics={};this.audiodata={};this.preloadSFX=false},_loadJsonFromFile:function(e,d){this._filesLoading++;Storage.FileSystem.readFile(e,{binary:true},function(g,k){this._filesLoading--;if(g){console.log("TFSoundManager.loadJsonFromFile: Could not load JSON because",g);d(g);return}var h;try{h=JSON.parse(k)}catch(l){console.log("TFSoundManager.loadJsonFromFile: Error parsing JSON because",l.toString());d(l.toString());return}d(undefined,h)}.bind(this))},setupAudioList:function(d,g){this.audiodata=g||{};if(this.preloadSFX){console.log("TFSoundManager.setupAudioList %s",JSON.stringify(this.audiodata));for(var e in this.audiodata){this.sounds[e]=new a.Effect(this.content+this.sfx+this.audiodata[e]+this._extension)}}},setupMusicList:function(e,h){console.log("TFSoundManager.setupMusicList %s",JSON.stringify(h));for(var g in h){console.log("  TFSoundManager.setupMusicList adding  "+h[g]);this.musics[g]=this.content+this.music+h[g]+".mp3";var d=this.musics[g];console.log("TFSoundManager.setupMusicList added: "+d)}},createSoundForKey:function(d){if(this.audiodata[d]){this.sounds[d]=new a.Effect(this.content+this.sfx+this.audiodata[d]+this._extension);return true}return false},playSound:function(d){if(!this.soundEnabled){return}console.log("Trying to play "+d);if(!this.sounds[d]){console.log("TFSoundManager.playSound soundId %s not found.",d);if(!this.createSoundForKey(d)){return}}if((this._audioEffect)&&(this._audioEffect.getIsPlaying()===true)&&(d==this.m_lastSoundStat)&&(!this._playingBattle)){return}this._audioEffect=new a.ActiveEffect(this.sounds[d]);this._audioEffect.play();this._audioEffect.getPlayCompleteEmitter().addListener(this._listener,this._cleanAudioFX.bind(this));this.m_lastSoundStat=d;return this._audioEffect},playMusic:function(e,d){console.log("TFSoundManager.playMusic trying to play "+e);if(!this.musicEnabled){return}if(!e){console.log("TFSoundManager.playmusic default music");this.setMusicEnabled(true,this.musics[this.MUSIC_DEFAULT]);return}if(!this.musics[e]){console.log("TFSoundManager.playmusic musicId %s not found.",e);return}this.setMusicEnabled(true,this.musics[e],d);console.log("TFSoundManager.playmusic musicId %s OK.",e)},stopMusic:function(){a.Music.stop()},_cleanAudioFX:function(d){console.log(" TFSoundManager > _cleanAudioFX > cleaning :  "+d);d.destroy()},setMusicEnabled:function(d,g,e){console.log("TFSoundManager.setMusicEnabled playing "+g+" (playOnce "+e+")");this.musicEnabled=d;if(this.musicEnabled&&g){if(a.Music.getIsPlaying()&&g==this.m_lastMusicStat){return}a.Music.setPath(g);a.Music.play();a.Music.setVolume(1)}else{if(!this.musicEnabled){a.Music.stop()}}this.m_lastMusicStat=g;if(e){a.Music.setLoop(false)}else{a.Music.setLoop(true)}},setSoundsEnabled:function(d){this.soundEnabled=d}})}};__ngs._49={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var a=__ngs.r_(__ngs._63).TFFormulas;b.TFDeckManager=Core.Class.singleton({classname:"TFDeckManager",MAX_TOP_CARDS:20,initialize:function(){console.log("TFDeckManager.initialize called.");this.m_deck=TFUserData.decks[TFGameData.DECK_INDEX.MAIN];this.m_autobotsDeck=TFUserData.decks[TFGameData.DECK_INDEX.AUTOBOTS];this.m_decepticonDeck=TFUserData.decks[TFGameData.DECK_INDEX.DECEPTICONS];this.calculateAttackPower(TFGameData.DECK_INDEX.MAIN);this.calculateAttackPower(TFGameData.DECK_INDEX.AUTOBOTS);this.calculateAttackPower(TFGameData.DECK_INDEX.DECEPTICONS);console.log("TFDeckManager.initialize Main Deck %s",JSON.stringify(this.m_deck));this.m_recomendedMainDeck=null;this.m_recomendedMainDeckHash=null;this.m_recomendedAutobotDeck=null;this.m_recomendedAutobotDeckHash=null;this.m_recomendedDecepticonDeck=null;this.m_recomendedDecepticonDeckHash=null;this.calculations=0},resetHash:function(){this.m_recomendedMainDeckHash=null;this.m_recomendedAutobotDeckHash=null;this.m_recomendedDecepticonDeckHash=null},refreshDeckData:function(){this.m_deck=TFUserData.decks[TFGameData.DECK_INDEX.MAIN];this.m_autobotsDeck=TFUserData.decks[TFGameData.DECK_INDEX.AUTOBOTS];this.m_decepticonDeck=TFUserData.decks[TFGameData.DECK_INDEX.DECEPTICONS]},getDeckWithIndex:function(d){var e;switch(d){case TFGameData.DECK_INDEX.MAIN:e=this.m_deck;break;case TFGameData.DECK_INDEX.AUTOBOTS:e=this.m_autobotsDeck;break;case TFGameData.DECK_INDEX.DECEPTICONS:e=this.m_decepticonDeck;break;default:e={}}return e},isValidDeck:function(e){var d=true;for(var g in e){var h=e[g];if(h.length===0){d=false;break}}return d},getDeck:function(e){var d=this.m_deck;if(e==TFGameData.FACTION.AUTOBOTS){d=this.m_autobotsDeck}else{if(e==TFGameData.FACTION.AUTOBOTS){d=this.m_decepticonDeck}}return d},getRecommendedDeck:function(e){this.calculateRecommendedMainDeck();console.log("TFDeckManager.getRecommendedDeck Calculations done: ",this.calculations);var d=this.m_recomendedMainDeck;if(e==TFGameData.FACTION.AUTOBOTS){this.calculateRecommendedAutobotDeck();d=this.m_recomendedAutobotDeck}else{if(e==TFGameData.FACTION.DECEPTICONS){this.calculateRecommendedDecepticonDeck();d=this.m_recomendedDecepticonDeck}}return d},getRecommendedDeckWithIndex:function(d){var e;if(d==TFGameData.DECK_INDEX.AUTOBOTS){e=this.getRecommendedDeck(TFGameData.FACTION.AUTOBOTS)}else{if(d==TFGameData.DECK_INDEX.DECEPTICONS){e=this.getRecommendedDeck(TFGameData.FACTION.DECEPTICONS)}else{e=this.getRecommendedDeck()}}return e},isInMainDeck:function(l){var d=false;for(var g in this.m_deck){var h=this.m_deck[g];for(var e in h){if(h[e].gear==l||h[e].pilot==l){d=true;break}}}return d},isInAutobotDeck:function(l){var d=false;for(var g in this.m_autobotsDeck){var h=this.m_autobotsDeck[g];for(var e in h){if(h[e].gear==l||h[e].pilot==l){d=true;break}}}return d},isInDecepticonDeck:function(l){var d=false;for(var g in this.m_decepticonDeck){var h=this.m_decepticonDeck[g];for(var e in h){if(h[e].gear==l||h[e].pilot==l){d=true;break}}}return d},setDeckWithIndex:function(e,g,d){TFSceneDirector.showWaitingSpinner("TFDeckManager > setDeckWithIndex",true);switch(g){case TFGameData.DECK_INDEX.MAIN:this.setMainDeck(e,d,true);break;case TFGameData.DECK_INDEX.AUTOBOTS:this.setAutobotsDeck(e,d,true);break;case TFGameData.DECK_INDEX.DECEPTICONS:this.setDecepticonsDeck(e,d,true);break}},setMainDeck:function(g,d,h){var e=this.m_deck;var k=null;var l=null;this.m_deck=g;Server.setMainDeck(g,function(n,o,p){TFSceneDirector.dismisWaitingSpinner();if(o){k=o;if(h!=false){TFUtils.showErrorMessages(p);var m=new UI.Toast();m.setText(Localization.getString("ui_maindecknotsaved"));m.setOnDisappear(function(){this.destroy()}.bind(m));m.show();this.m_deck=e;this.calculateAttackPower(TFGameData.DECK_INDEX.MAIN)}}else{l=p;TFUserData.decks[p.deck]=p.deckData;TFUserData.cards=p.cards.slice(0)}if(d){d(k,l)}}.bind(this,g))},setAutobotsDeck:function(g,d){var e=this.m_autobotsDeck;this.m_autobotsDeck=g;Server.setAutobotsDeck(g,function(k,l,m){TFSceneDirector.dismisWaitingSpinner();if(l){TFUtils.showErrorMessages(m);var h=new UI.Toast();h.setText(Localization.getString("ui_autodecknotsaved"));h.setOnDisappear(function(){this.destroy()}.bind(h));h.show();this.m_autobotsDeck=e;this.calculateAttackPower(TFGameData.DECK_INDEX.AUTOBOTS)}else{TFUserData.decks[m.deck]=m.deckData;TFUserData.cards=m.cards.slice(0)}if(d){d()}}.bind(this,g))},setDecepticonsDeck:function(g,d){var e=this.m_decepticonDeck;this.m_decepticonDeck=g;Server.setDecepticonsDeck(g,function(k,l,m){TFSceneDirector.dismisWaitingSpinner();if(l){TFUtils.showErrorMessages(m);var h=new UI.Toast();h.setText(Localization.getString("ui_decdecknotsaved"));h.setOnDisappear(function(){this.destroy()}.bind(h));h.show();this.m_decepticonDeck=e;this.calculateAttackPower(TFGameData.DECK_INDEX.DECEPTICONS)}else{TFUserData.decks[m.deck]=m.deckData;TFUserData.cards=m.cards.slice(0)}if(d){d()}}.bind(this,g))},calculateRecommendedMainDeck:function(){var m=Core.SHA1.hex_sha1(JSON.stringify(TFUserData.getCards()));if(this.m_recomendedMainDeckHash==m){return}this.calculations++;var g=TFCardsManager.getPlayerWeaponCards();var h=TFCardsManager.getPlayerTransformerCards();g.sort(this.cardCompare);h.sort(this.cardCompare);var l=g.slice(0,this.MAX_TOP_CARDS);var d=h.slice(0,this.MAX_TOP_CARDS);this.addRemainingSignatureWeapons(d,g,l);var e=this.bestMatchesByStatus(d,l);var k=this.makeDeckFromBestMatches(e);this.m_recomendedMainDeck=k;this.m_recomendedMainDeckHash=m},addRemainingSignatureWeapons:function(d,h,k){for(var g=this.MAX_TOP_CARDS;g<h.length;++g){var l=TFCardsManager.getCardDefinition(h[g].definitionId);if(l.tfLink.length>0){for(var e=0;e<d.length;++e){if(l.tfLink.indexOf(d[e].definitionId)>-1){k.push(h[g]);break}}}}},calculateRecommendedAutobotDeck:function(){var m=Core.SHA1.hex_sha1(JSON.stringify(TFCardsManager.getFilteredPlayerCards({factionId:TFGameData.FACTION.AUTOBOTS})));if(this.m_recomendedAutobotDeckHash==m){return}this.calculations++;var g=TFCardsManager.getFilteredPlayerCards({type:TFGameData.CARD_TYPE.WEAPON,factionId:TFGameData.FACTION.AUTOBOTS});var h=TFCardsManager.getFilteredPlayerCards({type:TFGameData.CARD_TYPE.TRANSFORMER,factionId:TFGameData.FACTION.AUTOBOTS});g.sort(this.cardCompare);h.sort(this.cardCompare);var l=g.slice(0,this.MAX_TOP_CARDS);var d=h.slice(0,this.MAX_TOP_CARDS);this.addRemainingSignatureWeapons(d,g,l);var e=this.bestMatchesByStatus(d,l);var k=this.makeDeckFromBestMatches(e,3);this.m_recomendedAutobotDeck=k;this.m_recomendedAutobotDeckHash=m},calculateRecommendedDecepticonDeck:function(){var m=Core.SHA1.hex_sha1(JSON.stringify(TFCardsManager.getFilteredPlayerCards({factionId:TFGameData.FACTION.DECEPTICONS})));if(this.m_recomendedDecepticonDeckHash==m){return}this.calculations++;var g=TFCardsManager.getFilteredPlayerCards({type:TFGameData.CARD_TYPE.WEAPON,factionId:TFGameData.FACTION.DECEPTICONS});var h=TFCardsManager.getFilteredPlayerCards({type:TFGameData.CARD_TYPE.TRANSFORMER,factionId:TFGameData.FACTION.DECEPTICONS});g.sort(this.cardCompare);h.sort(this.cardCompare);var l=g.slice(0,this.MAX_TOP_CARDS);var d=h.slice(0,this.MAX_TOP_CARDS);this.addRemainingSignatureWeapons(d,g,l);var e=this.bestMatchesByStatus(d,l);var k=this.makeDeckFromBestMatches(e,3);this.m_recomendedDecepticonDeck=k;this.m_recomendedDecepticonDeckHash=m},hasColission:function(g,e){var d=false;if(g&&e){if((g.transformer.id==e.transformer.id)||(g.weapon.id==e.weapon.id)){d=true}}return d},bestMatchesByStatus:function(k,m){var d=[];var h=[];for(var l in k){for(var g in m){var e=TFCardsManager.getUnitPower(k[l],m[g],"status2",0);d.push({transformer:k[l],weapon:m[g],status:e,power:a.power(e)});e=TFCardsManager.getUnitPower(k[l],m[g],"status2",1);h.push({transformer:k[l],weapon:m[g],status:e,power:a.power(e)})}}d.sort(function(o,n){return n.power-o.power});h.sort(function(o,n){return n.power-o.power});return[d,h]},cardCompare:function(g,d){var e=TFCardsManager.getCardStatus(g);var h=TFCardsManager.getCardStatus(d);return Math.sqrt(h.status1*9+h.status2*2+h.status3*13)-Math.sqrt(e.status1*9+e.status2*2+e.status3*13)},makeDeckFromBestMatches:function(e,l){if(l===undefined){l=9}var m=[];var k=[];var d=[];deck={status1:[],status2:[],status3:[]};bestMatches=e[0];var h;for(var g=0;g<3;g++){h=bestMatches.shift();while(m.indexOf(h.transformer.id)!=-1||k.indexOf(h.weapon.id)!=-1){h=bestMatches.shift()}d.push(h);m.push(h.transformer.id);k.push(h.weapon.id);while(this.hasColission(h,bestMatches[0])){bestMatches.shift()}}bestMatches=e[1];for(g=3;g<l;g++){h=bestMatches.shift();while(m.indexOf(h.transformer.id)!=-1||k.indexOf(h.weapon.id)!=-1){h=bestMatches.shift()}d.push(h);m.push(h.transformer.id);k.push(h.weapon.id);while(this.hasColission(h,bestMatches[0])){bestMatches.shift()}}for(g in d){console.log("STATUS "+JSON.stringify(d[g]))}if(l<=3){deck.status2=[{gear:d[0].transformer.id,pilot:d[0].weapon.id}];deck.status1=[{gear:d[1].transformer.id,pilot:d[1].weapon.id}];deck.status3=[{gear:d[2].transformer.id,pilot:d[2].weapon.id}]}else{deck.status2=[{gear:d[0].transformer.id,pilot:d[0].weapon.id},{gear:d[3].transformer.id,pilot:d[3].weapon.id},{gear:d[4].transformer.id,pilot:d[4].weapon.id}];deck.status1=[{gear:d[1].transformer.id,pilot:d[1].weapon.id},{gear:d[5].transformer.id,pilot:d[5].weapon.id},{gear:d[6].transformer.id,pilot:d[6].weapon.id}];deck.status3=[{gear:d[2].transformer.id,pilot:d[2].weapon.id},{gear:d[7].transformer.id,pilot:d[7].weapon.id},{gear:d[8].transformer.id,pilot:d[8].weapon.id}]}return deck},getOpponentDeckStats:function(v){var q={hp:0,attack:0,defense:0};for(var w in v){var l=v[w];var o=0;for(var d in l){var g=l[d].gearDefinitionId;var p=l[d].gearXp;var e=l[d].pilotDefinitionId;var n=l[d].pilotXp;var u={definitionId:g,xp:p};var t={definitionId:e,xp:n};var m=TFCardsManager.getUnitPower(u,t,w,o);for(var h in m){q[h]+=m[h]}o++}}return q},getDeckStats:function(p){console.log("TFDeckManager > getDeckStats > deck="+JSON.stringify(p));var m={hp:0,attack:0,defense:0};for(var q in p){var g=p[q];var l=0;for(var d in g){var n=TFUserData.getCard(g[d].gear);var o=TFUserData.getCard(g[d].pilot);var h=TFCardsManager.getUnitPower(n,o,q,l);console.log("TFDeckManager > getDeckStats > stats for "+d+": "+JSON.stringify(h));for(var e in h){m[e]+=h[e]}l++}}return m},calculateAttackPower:function(d){if(d===undefined){d=TFGameData.DECK_INDEX.MAIN}var e=this.getDeckWithIndex(d);var g=this.getDeckStats(e);var h=g.attack;switch(d){case TFGameData.DECK_INDEX.MAIN:this.attackMain=h;break;case TFGameData.DECK_INDEX.AUTOBOTS:this.attackAuto=h;break;case TFGameData.DECK_INDEX.DECEPTICONS:this.attackDecep=h;break}},getAttackPower:function(d){retval=0;switch(d){case TFGameData.DECK_INDEX.MAIN:retval=this.attackMain;break;case TFGameData.DECK_INDEX.AUTOBOTS:retval=this.attackAuto;break;case TFGameData.DECK_INDEX.DECEPTICONS:retval=this.attackDecep;break;default:retval=this.attackMain;break}return retval},checkDecks:function(d){this.decksHealed=0;if(this.m_deck&&this.m_deck.status1&&this.m_deck.status1.length==3&&this.m_deck.status2&&this.m_deck.status2.length==3&&this.m_deck.status3&&this.m_deck.status3.length==3){console.log("TFDeckManager > checkDecks > Main Deck OK");this.decksHealedCallback(d)}else{var e=this.getRecommendedDeckWithIndex(TFGameData.DECK_INDEX.MAIN);this.setMainDeck(e,this.decksHealedCallback.bind(this,d))}if(this.m_autobotsDeck&&this.m_autobotsDeck.status1&&this.m_autobotsDeck.status1.length==1&&this.m_autobotsDeck.status2&&this.m_autobotsDeck.status2.length==1&&this.m_autobotsDeck.status3&&this.m_autobotsDeck.status3.length==1){console.log("TFDeckManager > checkDecks > Autobot deck OK");this.decksHealedCallback(d)}else{var e=this.getRecommendedDeckWithIndex(TFGameData.DECK_INDEX.AUTOBOTS);this.setAutobotsDeck(e,this.decksHealedCallback.bind(this,d))}if(this.m_decepticonDeck&&this.m_decepticonDeck.status1&&this.m_decepticonDeck.status1.length==1&&this.m_decepticonDeck.status2&&this.m_decepticonDeck.status2.length==1&&this.m_decepticonDeck.status3&&this.m_decepticonDeck.status3.length==1){console.log("TFDeckManager > checkDecks > Decepticon deck OK");this.decksHealedCallback(d)}else{var e=this.getRecommendedDeckWithIndex(TFGameData.DECK_INDEX.DECEPTICONS);this.setDecepticonsDeck(e,this.decksHealedCallback.bind(this,d))}},decksHealedCallback:function(d){this.decksHealed++;if(this.decksHealed==3){d()}}})}};__ngs._4a={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.TFImageManager=Core.Class.singleton({classname:"TFImageManager",_imageQuality:"/Images2x/",_videoQuality:"/Videos1x/",ACHIEVEMENTS:{item:{101:"Content/Images8x/UI/StoreItems/store_mini_energy_capsule.png",201:"Content/Images8x/UI/StoreItems/store_mini_energy_capsule copy.png",401:"Content/Images8x/UI/StoreItems/store_mini_energy_capsule.png",501:"Content/Images8x/UI/StoreItems/store_mini_energy_capsule.png"},currency:{1:"Content/Images8x/UI/icon/icon_currency.png"}},initialize:function(){console.log("TFImageManager.initialize called.");console.log("TFImageManager.initialize : Overriding GL2.Animation.Frame.initialize");GL2.Animation.Frame.prototype.oldInitialize=GL2.Animation.Frame.prototype.initialize;GL2.Animation.Frame.prototype.initialize=function(){var g=Array.prototype.slice.call(arguments);if(g[0]&&g[0].indexOf){if(g[0].indexOf("./")===0){g[0]=g[0].slice(2)}var e=__ngs.r_(__ngs._4a).TFImageManager;g[0]=e.getCorrectImagePath(g[0])}this.oldInitialize.apply(this,g)};console.log("TFImageManager.initialize : Overriding GL2.Texture.initialize");GL2.Texture.prototype.oldInitialize=GL2.Texture.prototype.initialize;GL2.Texture.prototype.initialize=function(){var g=Array.prototype.slice.call(arguments);if(g[0]&&g[0].indexOf){if(g[0].indexOf("./")===0){g[0]=g[0].slice(2)}var e=__ngs.r_(__ngs._4a).TFImageManager;g[0]=e.getCorrectImagePath(g[0])}this.oldInitialize.apply(this,g)};console.log("TFImageManager.initialize : Overriding GL2.Sprite.setImage");GL2.Sprite.prototype.oldSetImage=GL2.Sprite.prototype.setImage;GL2.Sprite.prototype.setImage=function(){var g=Array.prototype.slice.call(arguments);if(g[0]&&g[0].indexOf){if(g[0].indexOf("./")===0){g[0]=g[0].slice(2)}var e=__ngs.r_(__ngs._4a).TFImageManager;g[0]=e.getCorrectImagePath(g[0])}this.oldSetImage.apply(this,g)};GL2.Sprite.prototype.getSize=function(){return this._animation.getFrame(0).getSize()};var d=GL2.Animation;var c=Core.ObjectRegistry;GL2.Sprite.prototype.setRepeatableImage=function(n,k,g,h){var m=this._unhookOwnedAnimation();var e=Array.prototype.slice.call(arguments,0);if(n.classname==="Texture"){e[0]=n.getFilename()}e.splice(1,0,0);var o=new d.Frame(e[0],e[1],e[2],e[3],e[4]);var l=new d();l.setWrapMode(d.WrapMode.WrapUV);l.pushFrame(o);this._animation=l;this._ownsAnimation=true;this._setAnimationSendGen(c.objectToId(l),0);if(m){m.destroy()}return this};GL2.Node.prototype.addData=function(e,h,g){if(!this._tfdata){this._tfdata={}}if(!this._tfanimtrack){this._tfanimtrack={}}if(g===true){this._tfanimtrack[e]=h}else{this._tfdata[e]=h}};GL2.Node.prototype.oldTFDestroy=GL2.Node.prototype.destroy;GL2.Node.prototype.destroy=function(){var e;for(e in this._tfdata){this[this._tfdata[e]]=null}this._tfdata=null;for(e in this._tfanimtrack){this[this._tfanimtrack[e]].destroy();this[this._tfanimtrack[e]]=null}this._tfanimtrack=null;this.oldTFDestroy.apply(this)};this._imageCounts={}},getCorrectVideoPath:function(d){var c;c=d.replace("/Videos2x/",this._videoQuality);return c},getCorrectImagePath:function(d){var c;if(d==""||!d){d="Content/Images8x/misc/1pxclear.png"}if(d.indexOf("./")===0){d=d.slice(2)}c=d.replace("/Images8x/",this._imageQuality);if(Core.Capabilities.getPlatformOS()=="iPhone OS"){if(c.indexOf("/missions/")>=0||c.indexOf("/cards/")>=0||c.indexOf("/event_raidboss/")>=0||c.indexOf("/local_cards/")>=0){c=c.replace("png","pvr")}}if(this._imageCounts[c]){this._imageCounts[c]=this._imageCounts[c]+1}else{this._imageCounts[c]=1}if(c.indexOf("/misc/")>=0){c=c.replace("/misc/","/misc2/")}return c},dumpImageCounts:function(){console.log("=====================");console.log("IMAGE REFERENCE COUNT");console.log("---------------------");for(var c in this._imageCounts){console.log(c+": "+this._imageCounts[c])}console.log("=====================")},patchParticleJSON:function(d){var c=JSON.stringify(d);c=c.replace(/\/Images8x\//g,this._imageQuality);return JSON.parse(c)},getImageForAchievementReward:function(c){return this.ACHIEVEMENTS[c.type][c.id]},destroy:function(){}})}};__ngs._4b={_c:null,_d:function(){var a={exports:{}};var e=a.exports;this._c=a;var m=__ngs.r_(__ngs._4e).GLButton;var k=__ngs.r_(__ngs._7s).TFButton;var l=__ngs.r_(__ngs._7t).GLList;var b=__ngs.r_(__ngs._7u).GLText;var d=__ngs.r_(__ngs._7v).CustomProgressBar;var h=__ngs.r_(__ngs._7w).ComboBox;var g=__ngs.r_(__ngs._45).AnimationManager;var c=__ngs.r_(__ngs._45).AnimationQueue;e.UILoader=Core.Class.singleton({classname:"UILoader",DEBUG_DYNAMIC_LOADER:false,LABELCOLORTYPE:{playerName:[170,224,255],xp:[240,240,240],level:[240,240,240],itemName:[239,239,123],alliesPoints:[240,240,240],battlePoints:[240,240,240],credits:[173,255,154],test:[255,20,147]},initialize:function(){this._am=new g();this._jsonData={};this._jsonDataCallbacks={}},loadViewDataJSON:function(p,n){console.log("(DYNAMICJSON) UILoader > loadViewDataJSON "+p);if(this._jsonData[p]){console.log("(DYNAMICJSON) UILoader > loadViewDataJSON > using cached view definition "+JSON.stringify(this._jsonData[p]).substring(0,150)+"...");n(this._jsonData[p])}else{if(this._jsonDataCallbacks[p]){console.log("(DYNAMICJSON) UILoader > loadViewDataJSON > load in progress - saving callback "+this._jsonDataCallbacks[p].length);this._jsonDataCallbacks[p].push(n)}else{var o="Content/ViewDef/"+p+".json";console.log("(DYNAMICJSON) UILoader > loadViewDataJSON > loading view definition "+o);this._jsonDataCallbacks[p]=[];this._jsonDataCallbacks[p].push(n);Storage.FileSystem.readFile(o,{binary:true},function(q,w,r,x,t){if(x){console.log("(DYNAMICJSON) UILoader > loadViewDataJSON > Could not load JSON because",x);throw new Error("Could not load "+q);return}var y;try{y=JSON.parse(t);console.log("(DYNAMICJSON) UILoader > loadViewDataJSON > data="+JSON.stringify(y))}catch(u){console.log("(DYNAMICJSON) UILoader > loadViewDataJSON > Error parsing JSON because",u.toString());y=u.toString()}this._jsonData[w]=y;var v=this._jsonDataCallbacks[w];for(var s in v){console.log("(DYNAMICJSON) UILoader > loadViewDataJSON > invoking callback "+s);v[s](y)}this._jsonDataCallbacks[w]=undefined}.bind(this,o,p,n))}}},loadView:function(o,n){console.log("(DYNAMICJSON) UILoader > loadView");var p;var s;for(p in o.images){s=o.images[p];if(this.DEBUG_DYNAMIC_LOADER){console.log("(DYNAMICJSON) UILoader > loadView > image:"+s.name)}if(s){this.createImage(s,n)}}for(p in o.tfbuttons){s=o.tfbuttons[p];if(this.DEBUG_DYNAMIC_LOADER){console.log("(DYNAMICJSON) UILoader > loadView > tfbutton:"+s.name)}if(s){this.createTFButton(s,n)}}for(p in o.buttons){s=o.buttons[p];if(this.DEBUG_DYNAMIC_LOADER){console.log("(DYNAMICJSON) UILoader > loadView > button:"+s.name)}if(s){this.createButton(s,n)}}for(p in o.labels){s=o.labels[p];if(this.DEBUG_DYNAMIC_LOADER){console.log("(DYNAMICJSON) UILoader > loadView > label:"+s.name)}if(s){this.createLabel(s,n)}}for(p in o.lists){s=o.lists[p];if(this.DEBUG_DYNAMIC_LOADER){console.log("(DYNAMICJSON) UILoader > loadView > list:"+s.name)}if(s){this.createListView(s,n)}}for(p in o.progressBar){s=o.progressBar[p];if(this.DEBUG_DYNAMIC_LOADER){console.log("(DYNAMICJSON) UILoader > loadView > progressBar:"+s.name)}if(s){this.createProgressBar(s,n)}}for(var p in o.groups){s=o.groups[p];if(this.DEBUG_DYNAMIC_LOADER){console.log("(DYNAMICJSON) UILoader > loadView > group:"+s.name)}n._definitions[s.name]=s;var q=s.groupDefinition;if(o.groupDefinitions&&o.groupDefinitions[q]){var r=new GL2.Node();r._definitions=new Array();r.getParentController=function(){return n.getParentController()};if(s.pos_x!==undefined&&s.pos_y!==undefined){r.setPosition(s.pos_x,s.pos_y)}if(s.visible!==undefined){r.setVisible(s.visible)}if(s.depth!==undefined){r.setDepth(s.depth)}if(s.scale!==undefined){r.setScale(s.scale[0],s.scale[1])}if(s.alpha!==undefined){r.setAlpha(s.alpha)}if(s.info){r.info=JSON.parse(JSON.stringify(s.info))}n[s.name]=r;n.addChild(r);this.loadView(o.groupDefinitions[q],r)}}for(var p in o.comboBoxs){s=o.comboBoxs[p];if(this.DEBUG_DYNAMIC_LOADER){console.log("(DYNAMICJSON) UILoader > loadView > comboBox:"+s.name)}if(s){this.createComboBox(s,n)}}for(var p in o.UIEditText){s=o.UIEditText[p];if(this.DEBUG_DYNAMIC_LOADER){console.log("(DYNAMICJSON) UILoader > loadView > UIEditText:"+s.name)}if(s){this.createUIEditText(s,n)}}},createListView:function(r,o){o._definitions[r.name]=r;if(!r.width||!r.height){return}var u=null;console.log("UILoader > createListView > data.action > "+JSON.stringify(r.action));if(r.action){u=o.getParentController()[r.action].bind(o.getParentController())}var t=false;if(r.clippingEnabled){t=true}var s=new l(r.width,r.height,u,t,r.pos_x,r.pos_y,o);if(r.itemWidth&&r.itemHeight){s.setItemSize(new Core.Size(r.itemWidth,r.itemHeight))}if(o.addClippingObject){o.addClippingObject(s)}else{o.getParent().addClippingObject(s)}if(r.scrollable===false){s.setScrollable(false)}o.addChild(s);s.setPosition(r.pos_x,r.pos_y);var p;if(o.getParentController()){p=o.getParentController().fetchListItems(r.name)}else{}var n=r.pos_y?r.pos_y:0;for(var q in p){s.addItem(p[q]);n+=r.itemHeight}o._totalHeight=0;if(o._totalHeight<n){o._totalHeight=n}if(r.depth){s.setDepth(r.depth)}if(r.info){s.info=JSON.parse(JSON.stringify(r.info))}o[r.name]=s},createImage:function(s,n){n._definitions[s.name]=s;if(s.pos_y&&s.size_y&&n._totalHeight<(s.pos_y+s.size_y)){n._totalHeight=s.pos_y+s.size_y}var r=0;var o=0;if(s.anchor_x){r=s.anchor_x}if(s.anchor_y){o=s.anchor_y}var q=[0,0,1,1];if(s.flip_x){q=[1,0,-1,1]}if(s.flip_y){q=[0,1,1,-1]}if(s.flip_x&&s.flip_y){q=[1,1,-1,-1]}if(s.repeat){if(s.repeat[0]){q[2]=s.repeat[0]*q[2]}if(s.repeat[1]){q[3]=s.repeat[1]*q[3]}}var p=new GL2.Sprite();if(Math.abs(q[0])<=1&&Math.abs(q[1])<=1&&Math.abs(q[2])<=1&&Math.abs(q[3])<=1){p.setImage(s.asset,[s.size_x,s.size_y],[r,o],q)}else{p.setRepeatableImage(s.asset,[s.size_x,s.size_y],[r,o],q)}p.setPosition(s.pos_x,s.pos_y);p.data=s;if(s.alpha!==undefined){p.setAlpha(s.alpha)}if(s.visible!==undefined){p.setVisible(s.visible)}if(s.depth){p.setDepth(s.depth)}if(s.color!==undefined){p.setColor(s.color[0]/255,s.color[1]/255,s.color[2]/255)}if(s.rotation){p.setRotation(s.rotation)}if(s.info){p.info=JSON.parse(JSON.stringify(s.info))}if(s.scale){p.setScale(s.scale[0],s.scale[1])}n[s.name]=p;n.addData(s.name,p);n.addChild(p);if((s.transition_in)){this.transitionInNode(p,s)}},createTFButton:function(p,n){n._definitions[p.name]=p;if(p.pos_y&&p.size_y&&n._totalHeight<(p.pos_y+p.size_y)){n._totalHeight=p.pos_y+p.size_y}var o;if(n.getParentController()&&n.getParentController()[p.action]){o=new k(n.getParentController()[p.action].bind(n.getParentController()),Localization.getString(p.text),p.type)}else{o=new k(undefined,Localization.getString(p.text),p.type)}o.setSize(new Core.Size(p.size_x,p.size_y));if(p.anchor_x!==undefined&&p.anchor_y!==undefined){o.setAnchor(new Core.Point(p.anchor_x,p.anchor_y))}o.setPosition(p.pos_x,p.pos_y);if(p.rotation){o.setRotation(p.rotation)}if(p.fontType!==undefined){o.setFontFamily(p.fontType)}if(p.font_size!==undefined){o.setFontSize(p.font_size)}if(p.text_color!==undefined){o.setTextColor(p.text_color);o.setTextUnselectedColor(p.text_color)}if(p.text_selected_color!==undefined){o.setTextSelectedColor(p.text_selected_color)}if(p.textOffsetX!==undefined){o.setTextOffsetX(p.textOffsetX)}if(p.textOffsetY!==undefined){o.setTextOffsetY(p.textOffsetY)}if(p.depth!==undefined){o.setDepth(p.depth)}if(p.alpha!==undefined){o.setAlpha(p.alpha)}if(p.visible!==undefined){o.setVisible(p.visible)}if(p.enabled!==undefined){o.setEnabled(p.enabled)}if(p.sound!==undefined){o.setSoundList(p.sound)}if(p.randomSound!==undefined){o.setRandomSound(p.randomSound)}if(p.info){o.info=JSON.parse(JSON.stringify(p.info))}if(p.feedback!==undefined){o.setFeedback(p.feedback)}if(p.ignore!==undefined){o.setIgnore(p.ignore)}if(p.highlightCallback){if(n.getParentController()&&n.getParentController()[p.highlightCallback]){o.setHighlightCallback(n.getParentController()[p.highlightCallback].bind(n.getParentController()))}}if(p.relaxedDebounce){o.setRelaxedDebounce(true)}if(p.debounce!==undefined){o.setDebounce(p.debounce)}n[p.name]=o;n.addChild(o)},createButton:function(q,n){n._definitions[q.name]=q;if(q.pos_y&&q.size_y&&n._totalHeight<(q.pos_y+q.size_y)){n._totalHeight=q.pos_y+q.size_y}var p;var o=[0,0,1,1];if(q.flip_x){o=[1,0,-1,1]}if(q.flip_y){o=[0,1,1,-1]}if(q.flip_x&&q.flip_y){o=[1,1,-1,-1]}if(n.getParentController()&&n.getParentController()[q.action]){p=new m(n.getParentController()[q.action].bind(n.getParentController()),q.asset,Localization.getString(q.text),o)}else{p=new m(undefined,q.asset,Localization.getString(q.text),o)}p.setSize(new Core.Size(q.size_x,q.size_y));if(q.anchor_x!==undefined&&q.anchor_y!==undefined){p.setAnchor(new Core.Point(q.anchor_x,q.anchor_y))}p.setImage(q.asset);p.setPosition(q.pos_x,q.pos_y);if(q.rotation){p.setRotation(q.rotation)}if(q.fontType!==undefined){p.setFontFamily(q.fontType)}if(q.font_size!==undefined){p.setFontSize(q.font_size)}if(q.fontColor!==undefined){p.setFontColor(q.fontColor[0]/255,q.fontColor[1]/255,q.fontColor[2]/255)}if(q.color!==undefined){p.setColor(q.color[0]/255,q.color[1]/255,q.color[2]/255)}if(q.rotation){p.setRotation(q.rotation)}if(q.depth!==undefined){p.setDepth(q.depth)}if(q.alpha!==undefined){p.setAlpha(q.alpha)}if(q.visible!==undefined){p.setVisible(q.visible)}if(q.multiAsset!==undefined){p.setMultiAsset(q.multiAsset)}if(q.enabled!==undefined){p.setEnabled(q.enabled)}if(q.sound!==undefined){p.setSoundList(q.sound)}if(q.randomSound!==undefined){p.setRandomSound(q.randomSound)}if(q.info){p.info=JSON.parse(JSON.stringify(q.info))}if(q.feedback!==undefined){p.setFeedback(q.feedback)}if(q.ignore!==undefined){p.setIgnore(q.ignore)}if(q.setSelectOnTouch){p.setSelectOnTouch(true)}if(q.highlightCallback){if(n.getParentController()&&n.getParentController()[q.highlightCallback]){p.setHighlightCallback(n.getParentController()[q.highlightCallback].bind(n.getParentController()))}}if(q.relaxedDebounce){p.setRelaxedDebounce(true)}if(q.debounce!==undefined){p.setDebounce(q.debounce)}n[q.name]=p;n.addChild(p);if((q.transition_in)){this.transitionInNode(p,q)}},createLabel:function(p,n){n._definitions[p.name]=p;if(p.pos_y&&p.size_y&&n._totalHeight<(p.pos_y+p.size_y)){n._totalHeight=p.pos_y+p.size_y}var o=this._createLabel(p);n[p.name]=o;n.addChild(o);if((p.transition_in)){this.transitionInNode(o,p)}},_createLabel:function(p){var o=new b();if(p.size_x!==undefined&&p.size_y!==undefined){o.setSize(p.size_x,p.size_y)}if(p.toUpperCase){o.setText(Localization.getString(p.text).toUpperCase());o._toUpperCase=true}else{o.setText(Localization.getString(p.text))}o.setPosition(p.pos_x,p.pos_y);o.data=p;if(p.anchor_x!==undefined&&p.anchor_y!==undefined){o.setAnchor(new Core.Point(p.anchor_x,p.anchor_y))}if(p.alpha!==undefined){o.setAlpha(p.alpha)}if(p.depth){o.setDepth(p.depth)}if(p.rotation){o.setRotation(p.rotation)}if(p.color!==undefined){o.setColor(p.color[0]/255,p.color[1]/255,p.color[2]/255)}if(p.dropShadowVisible!==undefined){o.setDropShadowVisible(p.dropShadowVisible)}if(p.dropShadowPosition!==undefined){o.setDropShadowPosition(p.dropShadowPosition[0],p.dropShadowPosition[1])}if(p.dropShadowColor!==undefined){o.setDropShadowColor(p.dropShadowColor[0]/255,p.dropShadowColor[1]/255,p.dropShadowColor[2]/255)}if(p.visible!==undefined){o.setVisible(p.visible)}if(p.fontType!==undefined){o.setFontLocation(GL2.Text.FontLocation.Manifest);o.setFontFamily(p.fontType)}if(p.font_size){o.setFontSize(p.font_size)}else{o.setFontSize(18)}if(p.horizontalAlign==="left"){o.setHorizontalAlign(GL2.Text.HorizontalAlign.Left)}else{if(p.horizontalAlign==="right"){o.setHorizontalAlign(GL2.Text.HorizontalAlign.Right)}else{if(p.horizontalAlign==="middle"){o.setHorizontalAlign(GL2.Text.HorizontalAlign.Center)}else{if(p.horizontalAlign==="center"){o.setHorizontalAlign(GL2.Text.HorizontalAlign.Center)}}}}if(p.verticalAlign==="middle"){o.setVerticalAlign(GL2.Text.VerticalAlign.Middle)}else{if(p.verticalAlign==="center"){o.setVerticalAlign(GL2.Text.VerticalAlign.Middle)}else{if(p.verticalAlign==="top"){o.setVerticalAlign(GL2.Text.VerticalAlign.Top)}else{if(p.verticalAlign==="bottom"){o.setVerticalAlign(GL2.Text.VerticalAlign.Bottom)}}}}if(p.overflowMode==="multi-line"){o.setOverflowMode(GL2.Text.OverflowMode.Multiline)}else{if(p.overflowMode==="shrink"){o.setOverflowMode(GL2.Text.OverflowMode.ReduceFontSize)}}if(p.info){o.info=JSON.parse(JSON.stringify(p.info))}if(p.colorType){var n=this.setColorType(p.colorType);o.setColor(n)}return o},createProgressBar:function(p,n){n._definitions[p.name]=p;if(p.pos_y&&p.size_y&&n._totalHeight<(p.pos_y+p.size_y)){n._totalHeight=p.pos_y+p.size_y}var o=new d(p.size_x,p.size_y,p.emptyImage,p.fillImage,p.glowImage,p.showText,p.middleImage);o.setPosition(p.pos_x,p.pos_y);if(o.emptyBar&&(p.emptyColor!==undefined)){o.emptyBar.setColor(p.emptyColor[0]/255,p.emptyColor[1]/255,p.emptyColor[2]/255)}if(o.middleBar&&(p.middleColor!==undefined)){o.middleBar.setColor(p.middleColor[0]/255,p.middleColor[1]/255,p.middleColor[2]/255)}if(o.fillBar&&(p.fillColor!==undefined)){o.fillBar.setColor(p.fillColor[0]/255,p.fillColor[1]/255,p.fillColor[2]/255)}if(p.value!==undefined){o.setProgress(p.value)}if(p.depth!==undefined){o.setDepth(p.depth)}if(p.visible!==undefined){o.setVisible(p.visible)}if(p.color!==undefined){o.setFillBarColor(p.color)}n[p.name]=o;n.addChild(o)},createComboBox:function(t,w){w._definitions[t.name]=t;var q=300;var p=80;if(t.size_x&&t.size_y){q=t.size_x;p=t.size_y}var n=300;if(t.max_size_y){n=t.max_size_y}var y=80;if(t.cell_size_y){y=t.cell_size_y}var o=300;if(t.cell_size_x){o=t.cell_size_x}var v=1;if(t.gridX){v=t.gridX}var u=1;if(t.gridY){u=t.gridY}var x=new h(v,u,w.getParentController(),new Core.Size(q,p),new Core.Size(o,y),n,t);for(var s in t.options){var r=t.options[s];x.addOption(r)}console.log("UILoader > createComboBox > view.getParentController() : "+w.getParentController()+" | data.action : "+JSON.stringify(t));x.callback=w.getParentController()[t.action].bind(w.getParentController());x.setPosition(t.pos_x,t.pos_y);if(t.depth){x.setDepth(t.depth)}w[t.name]=x;w.addChild(x)},createUIEditText:function(F,v){v._definitions[F.name]=F;var A=(F.frameWidth)?F.frameWidth:UI.Window.getWidth()*0.7;var y=(F.frameHeight)?F.frameHeight:UI.Window.getHeight()*0.7;var x=(F.textSize)?F.textSize:12;var q=(F.backgroundColor)?F.backgroundColor:"FFFFFF";var p=(F.textColor)?F.textColor:"000000";var E=(F.offsetX)?F.offsetX:0;var D=(F.offsetY)?F.offsetY:0;var C=(F.fontType);var s=(F.posX)?F.posX:(UI.Window.getWidth()-A)/2+E;var r=(F.posY)?F.posY:(UI.Window.getHeight()-y)/2+D;var o=(F.visible)?F.visible:false;var B=F.action;var w=F.buttonAsset;var t=(F.buttonLabel)?F.buttonLabel:"OK";var z=(F.buttonVisible)?F.buttonVisible:false;var H=UI.Window.getWidth()/640;var n=UI.Window.getHeight()/960;A=A*H;y=y*n;s=s*H;r=r*n;x=Math.floor(x*n);var u=new UI.EditText();u.setFrame([s,r,A,y]);u.setTextSize(x);u.setBackgroundColor(q);u.setVisible(o);u.setTextColor(p);if(C){u.setTextFont(C)}var G=new UI.Button();if(w){G.setImage(w);G.setImageFit(UI.Commands.FitMode.Stretch)}G.setText(Localization.getString(t));G.setFrame([s,r,80,80]);G.setVisible(z);u.data=F;v[F.name]=u;v[F.name+"_button"]=G},transitionInNode:function(o,p){var n=new c(this._am);if(p.transition_in.start_delay){n.pushAnimation(p.transition_in.start_delay,c.Curve.Linger)}n.pushAnimation(p.transition_in.duration,c.Curve.Linear);if(p.transition_in.type==="slide"){n.tween(c.Interpolate.scalar(p.pos_x,p.transition_in.new_x),function(q){o.setPosition(q,o.getPosition().getY())})}else{if(p.transition_in.type==="fade_in"){n.tween(c.Interpolate.scalar(p.alpha,p.transition_in.new_alpha),function(q){o.setAlpha(q)})}}n.start()},setColorType:function(o){if(this.LABELCOLORTYPE[o]){console.log("UILoader > setColorType : "+o);var n=[this.LABELCOLORTYPE[o][0]/255,this.LABELCOLORTYPE[o][1]/255,this.LABELCOLORTYPE[o][2]/255]}else{console.log("UILoader > setColorType : color not found. Setting default");var n=[240/255,240/255,240/255]}return n}})}};__ngs._4c={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.TFUpdateEmitter=Core.Class.singleton({classname:"TFUpdateEmitter",initialize:function(){this._time=0;this._ElementsData=[];this._tagCounter={};this._period=1000;if(!this.listener){this.listener=new Core.MessageListener();Core.UpdateEmitter.addListener(this.listener,this.update.bind(this))}},update:function(c){if(!this._ElementsData){this._time=0;return}if(this._ElementsData.length<=0){this._time=0;return}this._time+=c;for(var e=0;e<this._ElementsData.length;e++){var d=this._ElementsData[e];if(d){var g=d.period||this._period;if(d.ltCheck){if((this._time-d.ltCheck)>=g){if(d.cb){d.cb()}else{console.log("TFUpdateEmitter -> update -> cb not Found")}this._ElementsData[e].ltCheck=this._time}}else{if(!d.ltCheck){this._ElementsData[e].ltCheck=this._time}}}else{this.removeElements(e);e--}}},addElements:function(d,h,c){var g={};if(h){g.period=h}var e=d||"default";g.tag=e;g.cb=c;this._ElementsData.push(g);this._increaseTagCounter(e);return this._ElementsData.length-1},_increaseTagCounter:function(c){var d=c||"default";if(this._tagCounter[d]){this._tagCounter[d]++}else{this._tagCounter[d]=1}},removeElements:function(c){if(c>=this._ElementsData.length){return}return this._ElementsData.splice(c,1)},_decreaseTagCounter:function(c){var d=c||"default";if(this._tagCounter[d]){this._tagCounter[d]--}else{this._tagCounter[d]=0}},getTagCounter:function(c){var d=c||"default";return this._tagCounter[d]},releaseElements:function(c){var d=c||"default";for(var g=0;g<this._ElementsData.length;g++){if(this.getTagCounter(d)<=0){break}var e=this._ElementsData[g];if(e.tag==d){this.removeElements(g);this._decreaseTagCounter(d);g--}}}})}};__ngs._4d={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var a=__ngs.r_(__ngs._n).ViewController;var c=__ngs.r_(__ngs._7x).SplashScreenView;b.SplashScreenViewController=a.subclass({classname:"SplashScreenViewController",CLASSICINTRO:"Content/Videos2x/title_intro.m4v",FIRSTTIMEINTRO:"Content/Videos1x/title_intro.mp4",initialize:function($super){$super();this.createView(c);this._listener=new Core.MessageListener();this._govar=false;this._videoToPlay=this.CLASSICINTRO;this._videoName="intro";Core.UpdateEmitter.addListener(this._listener,this.playStartClip.bind(this));var e="5edb0994d60e3667b8bb2d14de3593cb";Storage.FileSystem.stat(e,{},function(h,g){if(h){console.log(this,"An error occurred while retrieving file Firstime app starts: "+h.description);Storage.FileSystem.writeFile(e,"nothingspecial",{},function(k){if(k){console.log(this,"An error occurred while writing "+e+": "+k)}else{this._videoToPlay=this.FIRSTTIMEINTRO;this._videoName="firsttimeintro"}this._govar=true}.bind(this))}else{console.log(this,"Retrieved file information: "+JSON.stringify(g));this._govar=true}}.bind(this))},playStartClip:function(){if(this._govar!==true){return}TFAnalytics.reportGameEvent("VIDEOSTART",{name:this._videoName});Core.UpdateEmitter.removeListener(this._listener);this._govar=false;var e=__ngs.r_(__ngs._4a).TFImageManager;var h=__ngs.r_(__ngs._p).TFAppDelegate;var k=__ngs.r_(__ngs._7y).IntroCutScene;var g=new k(e.getCorrectVideoPath(this._videoToPlay),640,960);g.setOnCompleteCallback(function(){TFSceneDirector._introPlaying=false;var l=Localization.getString("ui_loading");if(l=="ui_loading"){l="Loading"}this.getView().loadingLabel.setText(l);TFAnalytics.reportGameEvent("VIDEOSTOP",{name:this._videoName})}.bind(this));g.setGLView(h._glView);if(this._videoToPlay==this.CLASSICINTRO){g.setSkipOnTouch(true)}g.play();setTimeout(function(){TFSceneDirector._node.setVisible(true)},1000);this.getView().loading.setTextFontSize(24)},destroy:function($super){this._listener.destroy();$super()},setProgress:function(e){if(this._doOnce!==true&&TFSceneDirector._introPlaying==false){this.getView().loading.setVisible(true);var g=Localization.getString("ui_dlnewcontent");if(g=="ui_dlnewcontent"){g="Loading"}this.getView().loadingLabel.setText(g);this._doOnce=true}this.getView().loading.setProgress(e)}})}};__ngs._4e={_c:null,_d:function(){var b={exports:{}};var e=b.exports;this._c=b;var h=__ngs.r_(__ngs._5).Core;var l=__ngs.r_(__ngs._f).GL2;var a=__ngs.r_(__ngs._4).Device;var g=__ngs.r_(__ngs._48).TFSoundManager;var c=__ngs.r_(__ngs._7u).GLText;var k=__ngs.r_(__ngs._45).AnimationManager;var d=__ngs.r_(__ngs._45).AnimationQueue;e.GLButton=l.TouchTarget.subclass({classname:"GLButton",initialize:function(m,o,p,n){this.kDebounceTime=500;this._enabled=true;this._feedback=true;this._ignoreInternal=false;this._touchListener=new h.MessageListener();this.getTouchEmitter().addListener(this._touchListener,this.onTouch.bind(this));this._redirectTouchTargets={};this._uvs=n;this.setImage(o);this.setText(p);this._soundArray=["DIGITAL"];this._randomSound=false;this.setOnPressCallback(m);this._origColor=[1,1,1];this._debugTouches=false;this._am=new k()},setDebounce:function(m){if(typeof(m)!="number"){throw new Error("Unexpected object type "+typeof(m)+" passed into GLButton.setDebounce()")}this.kDebounceTime=m},setFeedback:function(m){if(this._feedback==m){return}this._feedback=m;this.stateChanged()},setColor:function(o,n,m){this._origColor=[o,n,m];if(this._pic){this._pic.setColor(o,n,m)}if(this._textLabel){this._textLabel.setColor(o,n,m)}},setEnabled:function(m){if(this._enabled==m){return}this._enabled=m;this.stateChanged()},setIgnore:function(m){this.ignore=m},setSelectOnTouch:function(m){this._selectOnTouch=m},_cb:function(n){if(this._soundArray.length>0){if(this._randomSound){var m=Math.floor(Math.random()*this._soundArray.length)}else{g.playSound(this._soundArray[0])}}if(this._cbHook){this._cbHook(n)}},setOnPressCallback:function(m){if(m){this._cbHook=m}},setSize:function(m){l.TouchTarget.prototype.setSize.call(this,m);if(this._pic){if(this._pic._animation&&this._pic._animation.getFrame(0)){var n=new l.Animation.Frame(this._picName,0,m,this.getAnchor());this._pic._animation.pushFrame(n);this._pic._animation.spliceFrames(0,1)}}if(this._textLabel){this._textLabel.setPosition(m.getWidth()/2,m.getHeight()/2)}},setAnchor:function(m){l.TouchTarget.prototype.setAnchor.call(this,m);if(this._pic){if(this._pic._animation&&this._pic._animation.getFrame(0)){var n=new l.Animation.Frame(this._picName,0,this.getSize(),m);this._pic._animation.pushFrame(n);this._pic._animation.spliceFrames(0,1)}}},setPosition:function(n,m){l.TouchTarget.prototype.setPosition.call(this,n,m);if(this._textLabel){this._textLabel.setPosition((this.getAnchor().getX()-0.5)*-this.getSize().getWidth(),(this.getAnchor().getY()-0.5)*-this.getSize().getHeight())}},setImage:function(m){this._picName=m;if(this._picName){if(!this._pic){this._pic=new l.Sprite();this._pic.setDepth(1);this.addChild(this._pic);this._pic.setVisible(true)}this._pic.setImage(this._picName,this.getSize(),this.getAnchor(),this._uvs)}else{if(this._pic){this.removeChild(this._pic);this._pic.destroy();this._pic=undefined}}},getText:function(){return this._text},setText:function(m){this._text=m;if(this._text!==undefined){if(!this._textLabel){this._textLabel=new c();this._textLabel.setDepth(2);this.addChild(this._textLabel);this._textLabel.setVisible(true);this._textLabel.setAnchor(new h.Point(0.5,0.5));this._textLabel.setPosition(this.getSize().getWidth()/2,this.getSize().getHeight()/2);this._textLabel.setHorizontalAlign(l.Text.HorizontalAlign.Center);this._textLabel.setVerticalAlign(l.Text.VerticalAlign.Middle)}this._textLabel.setText(this._text)}else{if(this._textLabel){this.removeChild(this._textLabel);this._textLabel.destroy();this._textLabel=undefined}}},setHighlightCallback:function(m){console.log("GLButton > setHighlightCallback");this._highlightCallback=m},setRelaxedDebounce:function(m){console.log("GLButton > setRelaxedDebounce > value="+m);this.relaxedDebounce=m},onTouch:function(n){var m;if(this._debugTouches){console.log("GLButton::onTouch - touch="+((n.getAction()==l.Touch.Action.Start)?"START":((n.getAction()==l.Touch.Action.Move)?"MOVE":(n.getAction()==l.Touch.Action.End)?"END":"???"))+", ignore="+this.ignore+", enabled="+this._enabled+", visible="+this.getVisible()+", tracking="+this.trackingId+", moving="+this._moving)}if((this.ignore===true)||(this._ignoreInternal===true)){return}if(!this._enabled){return false}if(!this.getVisible()){return false}var m=this.getParent();while(m){if(m.getVisible&&!m.getVisible()){return false}m=m.getParent?m.getParent():undefined}if(this._redirectTouchTargets[n.getId()]){if(TFUtils.DEBUG_REDIRECTED_TOUCHES){console.log("(TOUCHREDIRECT) Redirecting touch("+n.getId()+") to new callback")}this._redirectTouchTargets[n.getId()](n);if(n.getAction()==l.Touch.Action.End){if(TFUtils.DEBUG_REDIRECTED_TOUCHES){console.log("(TOUCHREDIRECT) Removing touch("+n.getId()+") redirection")}this._redirectTouchTargets[n.getId()]=undefined}return}switch(n.getAction()){case l.Touch.Action.Start:if(this._trackingId&&this._trackingId!=n.getId()){return true}this._initial=n.getPosition();this._oldHighlighted=this._highlighted;this.setHighlighted(true);this._trackingId=n.getId();TFSceneDirector.disableGlobalTouches("GLButton");break;case l.Touch.Action.Move:if(this._trackingId!=n.getId()){return}if(!n.getIsInside(this)||(Math.sqrt((this._initial._y-n._position._y)*(this._initial._y-n._position._y))>45)){this._trackingId=undefined;this.setHighlighted(this._oldHighlighted);TFSceneDirector.enableGlobalTouches("GLButton [REDIRECT]");if(!this._inhibitTouchRedirect){if(TFUtils.DEBUG_REDIRECTED_TOUCHES){console.log("(TOUCHREDIRECT) Trying to redirect touch("+n.getId()+") to parent node")}m=this.getParent();while(m){if(TFUtils.DEBUG_REDIRECTED_TOUCHES){console.log("(TOUCHREDIRECT) Parent classname="+m.classname)}if(m.redirectTouch){if(TFUtils.DEBUG_REDIRECTED_TOUCHES){console.log("(TOUCHREDIRECT) Redirecting touch("+n.getId()+") to new node")}this._redirectTouchTargets[n.getId()]=m.redirectTouch(n);break}m=m.getParent?m.getParent():undefined}}}break;case l.Touch.Action.End:if(this._trackingId!=n.getId()){return}this._trackingId=undefined;this.setHighlighted(false);if(n.getAction()==l.Touch.Action.End&&n.getIsInside(this)&&!this._moving){this.doActionWithDebounce()}this._moving=false;TFSceneDirector.enableGlobalTouches("GLButton [END]");break;default:return false}return true},emitTouch:function(p){var o=p.getTouchTargets();for(var n in o){if(o[n].classname=="TouchTarget"&&o[n].__type&&o[n].__type==TFGameData.TOUCH_SPECIAL_TYPE.TRAP){var m=o[n].getTouchEmitter().emit(p)}console.log("GLButton > emitTouch > emitter ret TRAP type : "+JSON.str)}for(var n in o){if(o[n].classname=="TouchTarget"&&o[n].__type&&o[n].__type==TFGameData.TOUCH_SPECIAL_TYPE.LIST){var m=o[n].getTouchEmitter().emit(p)}console.log("GLButton > emitTouch > emitter ret LIST type : "+JSON.str)}},_ccTouchesBegan:function(m){return false},_ccTouchesMoved:function(m){},_ccTouchesEnded:function(m){},destroyListeners:function(){if(this.__updateListener){this.__updateListener.destroy()}this.__updateListener=null;if(this.__touchListener){this.__touchListener.destroy()}this.__touchListener=null},doActionWithDebounce:function(){var m=this._lastTap;this._lastTap=new Date();if(m){if((this._lastTap-m)<this.kDebounceTime){if(this.relaxedDebounce){this._lastTap=m}return}}if(this._cb&&(this.ignore!==true)&&(this._ignoreInternal!==true)){this._ignoreInternal=true;this._cb(this);this._ignoreInternal=false}},setHighlighted:function(m){if(this._highlighted==m){return}this._highlighted=m;if(this._highlightCallback){console.log("GLButton > setHighlighted > invoking highlight callback");this._highlightCallback(this._highlighted)}this.stateChanged()},setSelected:function(m){if(this._selectedPic&&m){this._selected=true;this.setImage(this._selectedPic);this.stateChanged();this._enabled=false}else{if(this._selectedPic){this.setImage(this._onPic);this._selected=false;this._enabled=true;this.stateChanged()}}},stateChanged:function(){if(!this._enabled){if(this._offPic){this.setImage(this._offPic)}else{if(this._pic){this._pic.setColor(new h.Color(this._origColor[0]*0.5,this._origColor[1]*0.5,this._origColor[2]*0.5));this._pic.setAlpha(0.8)}}return}if(this._selected&&this._selectedPic){this.setImage(this._selectedPic);return}if(this._onPic&&this._onPic!=this._pic){this.setImage(this._onPic)}if(this._selectOnTouch){if(this._highlighted){this.setImage(this._selectedPic)}else{if(this._onPic){this.setImage(this._onPic)}else{this.setImage(undefined)}}if(this._pic){this._pic.setColor(new h.Color(this._origColor[0],this._origColor[1],this._origColor[2]));this._pic.setAlpha(1)}return}if(this._pic&&this._feedback){this._pic.setAlpha(1);if(this._highlighted){this._pic.setColor(new h.Color(this._origColor[0]*0.5,this._origColor[1]*0.5,this._origColor[2]*0.5))}else{this._pic.setColor(new h.Color(this._origColor[0],this._origColor[1],this._origColor[2]))}}},setImageColor:function(n,m,o){if(this._pic){this._pic.setColor(n,m,o)}},setVisible:function(m){if(this._trackingId&&!m){if(this._trackingId){TFSceneDirector.enableGlobalTouches("GLButton [setVisible]")}this._trackingId=undefined;this.setHighlighted(false);this._moving=false;this.stateChanged()}l.TouchTarget.prototype.setVisible.call(this,m);this.setTouchable(m);if(this._pic){this._pic.setVisible(m)}if(this._textLabel){this._textLabel.setVisible(m)}},setFontFamily:function(m){if(this._textLabel){this._textLabel.setFontLocation(l.Text.FontLocation.Manifest);this._textLabel.setFontFamily(m)}},setFontSize:function(m){if(this._textLabel){this._textLabel.setFontSize(m)}},setFontColor:function(o,n,m){if(this._textLabel){this._textLabel.setColor(o,n,m)}},setAlpha:function(m){if(this._pic){this._pic.setAlpha(m)}if(this._textLabel){this._textLabel.setAlpha(m)}},setMultiAsset:function(m){if(m.onAsset!==undefined){this._onPic=m.onAsset}if(m.offAsset!==undefined){this._offPic=m.offAsset}if(m.selectedAsset!==undefined){this._selectedPic=m.selectedAsset}},setSoundList:function(m){this._soundArray=m},setRandomSound:function(m){this._randomSound=m},destroyAllChildren:function(n){var m=n._children;while(m&&m.length){this.destroyAllChildren(m[0]);console.log("Destoying "+m[0].classname);m[0].destroy()}},destroy:function($super){if(this._trackingId){TFSceneDirector.enableGlobalTouches("GLButton [DESTROY]")}if(this._am){this._am.destroy();this._am=undefined}this.getTouchEmitter().removeListener(this._touchListener);this._touchListener.destroy();this.destroyAllChildren(this);var m=__ngs.r_(__ngs._19).ObjectRegistry;if(this._pic&&m.isObjectRegistered(this._pic)){this._pic.destroy()}if(this._textLabel&&m.isObjectRegistered(this._textLabel)){this._textLabel.destroy()}this._textLabel=null;this._pic=null;this._lastTap=null;$super()}})}};__ngs._4f={_c:null,_d:function(){var g={exports:{}};var d=g.exports;this._c=g;var c=__ngs.r_(__ngs._n).ViewController;var b=__ngs.r_(__ngs._7z).TutorialChooseView;var e=__ngs.r_(__ngs._45).AnimationQueue;var k=__ngs.r_(__ngs._s).TFUtils;var h=__ngs.r_(__ngs._x).TFManifestManager;var a=__ngs.r_(__ngs._4a).TFImageManager;d.TutorialChooseViewController=c.subclass({classname:"TutorialChooseViewController",initialize:function($super,l){$super();this.createView(b);if(l){this._bgScale=l;this.getView().background.setScale(this._bgScale)}this.getView().title2.setText(Localization.getString("tutorial_main_leaderselection"));this.loadData();TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"03_CHOOSELEADERSHOWN"})},destroy:function($super){$super()},loadData:function(){this._cards=this.getCards();if(this._cards.length<3&&this._selectionCards.length<6){TFSceneDirector.showHome();TFUserData.setNewTutorialState("main","end");TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"B01_SKIPTUTORIAL_NOLEADERCARDS"});if(TFUserData.getCards().length<=6){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"B_TUTORIALSETINITIALDECK"});Server.setInitialPack(""+TFGameData._selectedFaction,function(){Server.getAllUserCards(function(r,u){if(r){var q={okButtonText:Localization.getString("ui_tryagain")};k.showErrorMessages(Localization.getString("ui_checkconn"),function(){TFSceneDirector.loadGame()},q);return}TFUserData.syncFrom(u);console.log("TutorialChooseViewController > loadData > about to preload assets");var t=this._cards[0].definitionId;this.preloadCardAssets(t,u);for(var s in u.cards){if(u.cards[s].definitionId==this._cards[0].definitionId){TFSceneDirector._mainSelectedCard.id=u.cards[s].id;break}}}.bind(this))}.bind(this))}return}var p=TFCardsManager.getCardDefinition(this._cards[0].definitionId);var o="autobot";if(TFGameData._selectedFaction==null||TFGameData._selectedFaction==undefined){TFGameData._selectedFaction=(TFUserData.sideSelected=="Autobot")?1:2}if(TFGameData._selectedFaction==TFGameData.FACTION.DECEPTICONS){this.getView().factionImage.setImage(this.getView()._definitions.factionImage.info.asset2);o="decepticon"}if(this._cards.length>2){for(var m=1;m<=this._cards.length;m++){if(m>3){break}var n=this.getCardName(this._cards[m-1].definitionId);this.getView()["name"+m].setText(Localization.getString(n));this.getView()["card"+m].info.name=n;this.getView()["card"+m].setImage("./Content/Images8x/UI/17_tutorial/tutorial_"+o+"_card_"+this._cards[m-1].definitionId+"_name.png")}var l=this.createAnimationQueue();l.pushAnimation(500,e.Curve.Linear);l.pushCallback(function(){for(var t=1;t<=3;t++){var u=t;this.getView()["card"+u].setVisible(true);var s=this.getView()._definitions["card"+u].pos_x;var r=this.getView()._definitions["card"+u].pos_y;var v=new Core.Point(s,r);var q=new Core.Point(this.getView()._definitions["card"+u].info.new_x,this.getView()._definitions["card"+u].info.new_y);this.animateLeaderCards("card"+u,v,q)}}.bind(this));l.start()}if(TFUserData.getCards().length<=6){this.getView().back.setVisible(true)}},getCardName:function(m){if(m){var l=TFCardsManager.getCardDefinition(m).name;return l}},animateLeaderCards:function(n,o,m){var l=this.createAnimationQueue();l.pushAnimation(500,e.Curve.Linear);l.tween(e.Interpolate.point(o,m),function(p){if(this.getView()){this.getView()[n].setPosition(p.getX(),p.getY())}}.bind(this));l.pushCallback(function(){this.getView()[n].setFeedback(true);this.showNames()}.bind(this));l.start()},showNames:function(l){for(var m=1;m<=3;m++){if(l==undefined||l==true){this.getView()["name"+m].setVisible(true)}else{this.getView()["name"+m].setVisible(false)}}},getCards:function(){var o=new Array();this._mainCardSelectionView=true;if(!this._arrayIndex){this._arrayIndex=0}if(!this._selectionCards){this._selectionCards=TFUserData.getCards()}for(var m=this._arrayIndex;m<this._selectionCards.length;m++){NgLogD("***************************cardssss===="+JSON.stringify(this._selectionCards[m]));var p=TFCardsManager.getCardDefinition(this._selectionCards[m].definitionId);if((p.cardFormId==1||p.cardFormId==2)){if((!this._mainCardSelectionView&&TFSceneDirector._transformCard1Selected&&p.id!=TFSceneDirector._mainSelectedCard.definitionId+1)||(this._mainCardSelectionView&&p.cardFormId==2)){}else{var n=true;if(this._mainCardSelectionView){for(var l in this._selectionCards){if(this._selectionCards[m].definitionId==this._selectionCards[l].definitionId-1&&this._selectionCards[l].locked!=true){n=false}}}if((this._selectionCards[m].locked==true)||(this._mainCardSelectionView&&n)){NgLogD("***********************************lockedd=="+m)}else{o.push(this._selectionCards[m])}}}}return o},onCardClick:function(m){if(this._cardClicked){return}TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"04_TUTORIALLEADERCLICKED",LeaderSelected:Localization.getString(m.info.name)});this._selectedCardObject=m;if(TFUserData.sideSelected=="Autobot"){var o="AUTOBOTS"}else{var o="DECEPTICONS"}var n=new Object();if(m.info.name){this._leaderName=Localization.getString(m.info.name);n.fusionCost=Localization.getString("tutorial_faction_select_01")+" "+Localization.getString(o)+" "+Localization.getString("tutorial_faction_select_02")+" "+this._leaderName+" "+Localization.getString("tutorial_faction_select_03")}n.title="";n.cb=function(){if(!this.getView()){return}this._cardClicked=true;this.getView().back.setVisible(false);if(TFUserData.getCards().length<=6){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"06_TUTORIALSETINITIALDECK"});Server.setInitialPack(""+TFGameData._selectedFaction,function(r,q){if(r){console.log("setInitialPack error: "+JSON.stringify(r));TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"06b_SetInitDeckERROR"});var p={okButtonText:Localization.getString("ui_tryagain")};k.showErrorMessages(Localization.getString("ui_checkconn"),function(){TFSceneDirector.loadGame()},p);return}Server.getAllUserCards(function(t,w){if(t){var s={okButtonText:Localization.getString("ui_tryagain")};k.showErrorMessages(Localization.getString("ui_checkconn"),function(){TFSceneDirector.loadGame()},s);return}TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"SetInitDeckSUCCESS"});TFUserData.syncFrom(w);var v=this._cards[m.info.id-1].definitionId;this.preloadCardAssets(v,w);for(var u in w.cards){if(w.cards[u].definitionId==this._cards[m.info.id-1].definitionId){TFSceneDirector._mainSelectedCard.id=w.cards[u].id;break}}}.bind(this));this.onCardClickContinue(m)}.bind(this))}else{console.log("TutorialChooseViewController > onCardClick > already had more than 6 cards");Server.getAllUserCards(function(q,t){if(q){var p={okButtonText:Localization.getString("ui_tryagain")};k.showErrorMessages(Localization.getString("ui_checkconn"),function(){TFSceneDirector.loadGame()},p);return}TFUserData.syncFrom(t);var s=this._cards[m.info.id-1].definitionId;this.preloadCardAssets(s,t);for(var r in t.cards){if(t.cards[r].definitionId==this._cards[m.info.id-1].definitionId){TFSceneDirector._mainSelectedCard.id=t.cards[r].id;break}}}.bind(this));this.onCardClickContinue(m)}}.bind(this);var l=__ngs.r_(__ngs._3y).PopUpController;TFSceneDirector._showDialog(new l(n))},preloadCardAssets:function(o,p){var q=o;if(q%10==1){q=q+1}else{if(q%10==2){q=q-1}}console.log("TutorialChooseViewController > preloadCardAssets > pre-downloading leader thumbnails: "+o+","+q);h.downloadAsset(a.getCorrectImagePath(k.getCardImagePath(o)),function(){});h.downloadAsset(a.getCorrectImagePath(k.getCardImagePath(q)),function(){});var m=[];for(var n in p.cards){if(m.indexOf(p.cards[n].definitionId)>-1){continue}var l=TFCardsManager.getCardDefinition(p.cards[n].definitionId);if(l.type==TFGameData.CARD_TYPE.WEAPON||l.rarity==3){console.log("TutorialChooseViewController > preloadCardAssets > _not_ predownloading thumbnail",p.cards[n].definitionId);continue}console.log("TutorialChooseViewController > preloadCardAssets > pre-downloading thumbnail: "+p.cards[n].definitionId);h.downloadAsset(a.getCorrectImagePath(k.getCardImagePath(p.cards[n].definitionId)),function(){});m.push(p.cards[n].definitionId)}m=[];for(var n in p.cards){if(m.indexOf(p.cards[n].definitionId)>-1){continue}var l=TFCardsManager.getCardDefinition(p.cards[n].definitionId);if(l.type==TFGameData.CARD_TYPE.WEAPON||l.rarity==3){console.log("TutorialChooseViewController > preloadCardAssets > _not_ predownloading full card",p.cards[n].definitionId);continue}console.log("TutorialChooseViewController > preloadCardAssets > pre-downloading full card : "+p.cards[n].definitionId);h.downloadAsset(a.getCorrectImagePath(k.getCardFullImagePath(p.cards[n].definitionId)),function(){});m.push(p.cards[n].definitionId)}console.log("TutorialChooseViewController > preloadCardAssets > requesting flattened leader assets",o);h.downloadAsset(a.getCorrectImagePath(k.getCardFullImagePath(o)),function(){})},onCardClickContinue:function(o){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"05_TUTORIALLEADERCONFIRMED",LeaderConfirmed:this._leaderName});this._selectedCardObject.setFeedback(false);this.getView().back.setVisible(false);this.getView().factionImage.setVisible(false);this.showNames(false);var u=new Object();u.usercard=this._cards[o.info.id-1];u.destroyCB=function(){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"09_LEADERFULLSCREENDISMISS"});this.showAltForm()}.bind(this);var r=__ngs.r_(__ngs._80).FullScreenCardController;TFSceneDirector._showDialog(new r(u,true));var v=__ngs.r_(__ngs._r).TFCardsManager;var l=__ngs.r_(__ngs._63).TFFormulas;TFSceneDirector._transformCard1Selected=true;TFSceneDirector._selectedLeader=this._cards[o.info.id-1];TFSceneDirector._mainSelectedCard=this._cards[o.info.id-1];var m=v.getCardDefinition(this._cards[o.info.id-1].definitionId);var p=l.getStatusForLevel(m,1);TFSceneDirector._mainSelectedCard.rarity=m.rarity;TFSceneDirector._mainSelectedCard.stats=p;TFSceneDirector._mainSelectedCard.name=m.name;this.getView().title2.setVisible(false);for(var n=1;n<4;n++){this.getView()["card"+n].setVisible(false)}this.getView()["card"+(o.info.id)].setVisible(true);this.getView()["card"+(o.info.id)].setPosition(320,480);if(TFUserData.sideSelected=="Autobot"){var s="Ironhide"}else{var s="Shockwave"}var t=new Object();if(Localization.getString("tutorial_main_title_05")=="tutorial_main_title_05"){t.title=" "}else{t.title=Localization.getString("tutorial_main_title_05")}t.text=Localization.getString("tutorial_main_text_05")+" "+Localization.getString(s)+" "+Localization.getString("tutorial_main_text_051");t.Id="tutorial_main_title_05";t.cb=function(){var w=this.createAnimationQueue();w.pushAnimation(50,e.Curve.Linear);w.pushCallback(function(){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"07_LEADERTUTORIAL1DISMISS"});var y=new Object();y.title=Localization.getString("tutorial_main_title_06");y.text=Localization.getString("tutorial_main_text_06")+" "+this._leaderName+Localization.getString("tutorial_main_text_061");y.Id="tutorial_main_title_06";y.cb=function(){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"08_LEADERTUTORIAL2DISMISS"})};var z=__ngs.r_(__ngs._81).TutorialBubbleView;var x=TFSceneDirector.showTutorialDialog(z,y);x.getView().bubble1.setPosition(-320,-100)}.bind(this));w.start()}.bind(this);var q=__ngs.r_(__ngs._81).TutorialBubbleView;this._tutorialController=TFSceneDirector.showTutorialDialog(q,t);this._tutorialController.getView().bubble1.setPosition(-320,-100)},fadeOutToFullScreen:function(n,o,l){var m=this.createAnimationQueue();m.pushAnimation(900,e.Curve.Linear);m.tween(e.Interpolate.scalar(1,0),function(p){n.setAlpha(p)}.bind(this));m.pushCallback(function(){var q=new Object();q.usercard=o;q.destroyCB=function(){if(l){l()}}.bind(this);var p=__ngs.r_(__ngs._80).FullScreenCardController;TFSceneDirector._showDialog(new p(q,true))}.bind(this));m.start()},showAltForm:function(){if(TFSceneDirector._mainSelectedCard){var n=TFSceneDirector._mainSelectedCard.definitionId;var w=null;if(n%10==1){n=n+1}else{if(n%10==2){n=n-1}}var l=TFUserData.getCards();for(var p in l){if(n==l[p].definitionId){w=l[p]}}var v=new Object();v.usercard=w;v.destroyCB=function(){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"11_ALTFORMCARDDISMISS"});var z=__ngs.r_(__ngs._55).TransformViewController;var y=new z(true);TFSceneDirector.pushViewController(y)}.bind(this);var t=__ngs.r_(__ngs._80).FullScreenCardController;TFSceneDirector._showDialog(new t(v,true));if(!TFSceneDirector._selectedFusionCards){TFSceneDirector._selectedFusionCards=new Array()}TFSceneDirector._selectedFusionCards[0]=w;TFSceneDirector._transformCard2Selected=true;var x=__ngs.r_(__ngs._r).TFCardsManager;var o=__ngs.r_(__ngs._63).TFFormulas;var m=x.getCardDefinition(w.definitionId);var r=o.getStatusForLevel(m,1);TFSceneDirector._selectedFusionCards[0].stats=r;var u=new Object();u.title=Localization.getString("tutorial_main_title_07");u.text=Localization.getString("tutorial_main_text_07")+" "+this._leaderName+Localization.getString("tutorial_main_text_071");u.Id="tutorial_main_title_07";u.cb=function(){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"10_ALTFORMTUTORIALDISMISS"})}.bind(this);var s=__ngs.r_(__ngs._81).TutorialBubbleView;var q=TFSceneDirector.showTutorialDialog(s,u);q.getView().bubble1.setPosition(-320,-100)}},onBack:function(){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"TUTORIALBACKPRESSED"});var l=__ngs.r_(__ngs._4g).SideSelectionViewController;TFSceneDirector.pushViewController(new l(this._bgScale))}})}};__ngs._4g={_c:null,_d:function(){var k={exports:{}};var d=k.exports;this._c=k;var b=__ngs.r_(__ngs._n).ViewController;var e=__ngs.r_(__ngs._82).SideSelectionView;var c=__ngs.r_(__ngs._4e).GLButton;var a=__ngs.r_(__ngs._49).TFDeckManager;var h=__ngs.r_(__ngs._45).AnimationQueue;var g=__ngs.r_(__ngs._48).TFSoundManager;d.SideSelectionViewController=b.subclass({classname:"SideSelectionViewController",initialize:function($super,o){$super();this.createView(e);var p={displayed:false,animated:true,timeout:1000};var s={displayed:false,animated:true,timeout:1000};this.setHudDisplayData(p,s);this.getView().selectionImage.setText(Localization.getString("Select your Faction"));this.getView().selectionImage.setVisible(true);this.getView().background.setVisible(true);this.getView().scanline.setVisible(true);var u=TFSceneDirector.getWorkingArea();var l=this.getView()._definitions.background.pos_x;var m=0-this.getView()._definitions.scanline.size_y-u.offsetY/u.scaleY;var q=TFGlobals.nativeResolution.y+this.getView()._definitions.scanline.size_y+u.offsetY/u.scaleY;var r=this.createAnimationQueue();var n=this.createAnimationQueue();var v=false;r.pushAnimation(25000,h.Curve.Linear);r.tween(h.Interpolate.scalar(m,q),function(w){this.getView().scanline.setPosition(l,w);if(w==q){this.getView().scanline.setRotation(180)}}.bind(this));r.pushAnimation(25000,h.Curve.Linear);r.tween(h.Interpolate.scalar(q,m),function(w){this.getView().scanline.setPosition(l,w);if(w==m){this.getView().scanline.setRotation(0)}}.bind(this));r.startLooped();if(o){this.getView().background.setScale(o)}else{var t=this.getView().background.getScale().getY();n.pushAnimation(25000,h.Curve.EaseInOut);n.tween(h.Interpolate.scalar(1,1.1),function(w,x){this.getView().background.setScale(w*x);this._bgScale=x}.bind(this,t));n.pushAnimation(25000,h.Curve.EaseInOut);n.tween(h.Interpolate.scalar(1.1,1),function(w,x){this.getView().background.setScale(w*x);this._bgScale=x}.bind(this,t));n.startLooped()}setTimeout(function(){if(this.getView()&&!this.sideSelected){this.getView().autobotLabel.setVisible(true);this.getView().decepticonLabel.setVisible(true)}g.playMusic("MAIN_MENU_BACK")}.bind(this),1400);TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"01_SELECTFACTIONSHOWN"})},sideClick:function(m){if(this.sideSelected){return}TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"02_FACTIONSELECTED",SelectedFaction:""+m.info.type});this.sideSelected=true;TFGameData._selectedFaction=m.info.type;var n=m.info.type;this.resetRunningAnimations();this.getView().selectionImage.setVisible(false);this.getView().selectionLabel.setVisible(true);this.getView().autobotLabel.setVisible(false);this.getView().decepticonLabel.setVisible(false);this.getView().scanline.setVisible(false);if(TFGameData._selectedFaction==1){TFUserData.sideSelected="Autobot";this.getView().card2.setVisible(false);this.getView().selectionLabel.setText(Localization.getString("tutorial_main_autobotselected"))}else{TFUserData.sideSelected="Decepticon";this.getView().card1.setVisible(false);this.getView().selectionLabel.setText(Localization.getString("tutorial_main_decepticonselected"))}var o=new Core.Point(this.getView()._definitions["card"+TFGameData._selectedFaction].transition_in.new_x,this.getView()._definitions["card"+TFGameData._selectedFaction].pos_y);var l=this.createAnimationQueue();l.pushAnimation(800,h.Curve.Linear);l.tween(h.Interpolate.point(o,new Core.Point(320,200)),function(p){this.getView()["card"+TFGameData._selectedFaction].setPosition(p.getX(),p.getY())}.bind(this));l.pushCallback(function(){this._cards=TFGameData._starterPacksJSON;TFUserData.cards=new Array();for(var q in this._cards[n].specialCards){var p=new Object();p.definitionId=this._cards[n].specialCards[q];TFUserData.cards.push(p)}var r=__ngs.r_(__ngs._4f).TutorialChooseViewController;TFSceneDirector.pushViewController(new r(this.getView().background.getScale().getY()))}.bind(this));l.start()},destroy:function($super){$super()}})}};__ngs._4h={_c:null,_d:function(){var d={exports:{}};var g=d.exports;this._c=d;var c=__ngs.r_(__ngs._n).ViewController;var b=__ngs.r_(__ngs._83).GashaView;var e=__ngs.r_(__ngs._45).AnimationQueue;var k=__ngs.r_(__ngs._s).TFUtils;var l=__ngs.r_(__ngs._x).TFManifestManager;var m=__ngs.r_(__ngs._4a).TFImageManager;var a=__ngs.r_(__ngs._4).Device;var h=__ngs.r_(__ngs._k).Server;g.GashaViewController=c.subclass({classname:"GashaViewController",initialize:function($super,r,q,s){this._callbacksToCollect=0;$super();if(r){this._data=r;this.preDownloadAssets()}this.createView(b);var n=0;this.animateBridgeInterval=250;this.finalDistance=84489;this._gashaConfig=q;this._gashaInfo=s;this._listener=new Core.MessageListener();this._playing=false;this.playerTappedOpen=false;var p={displayed:false,animated:false,timeout:n};var o={displayed:false,animated:false,timeout:n};this.setHudDisplayData(p,o);setTimeout(this._animateStart.bind(this),n);setTimeout(this._animateDecimal.bind(this),n+100);TFUserData.blockBack=true},destroy:function($super){$super()},onOpen:function(n){TFSceneDirector.showDownloadSpinner("Gasha pre-download",Localization.getString("ui_downloadspinner_gasha"));this.playerTappedOpen=true;n.setEnabled(false);this._playing=false;this.goForSpaceBridge()},preDownloadAssets:function(){if(this._data){for(var q=0;q<this._data.newCards.length;++q){var n=TFCardsManager.getCardDefinition(this._data.newCards[q].definitionId);var p;var o=null;if(n.transformable){p=n.evolution[0][0];o=n.evolution[0][1]}else{o=n.id}this._callbacksToCollect+=1;l.downloadAsset(m.getCorrectImagePath(k.getCardFullImagePath(o)),this.collectCallback.bind(this))}}},collectCallback:function(){this._callbacksToCollect--;this.goForSpaceBridge()},goForSpaceBridge:function(){if(this._callbacksToCollect<=0&&this._playing===false&&this.playerTappedOpen){this._playing=true;Core.UpdateEmitter.removeListener(this._listener);TFSceneDirector.destroyDownloadSpinner();this._callbacksToCollect=0;if(this.spaceBridge()===false){this.getView().bothud.activateBridgeButton.setEnabled(true)}}},_animateStart:function(){var n=this.createAnimationQueue();var o=this;n.pushAnimation(this.animateBridgeInterval,e.Curve.EaseIn);n.tween(e.Interpolate.scalar(0,1),function(p){if(this.bridgeLeft1){this.bridgeLeft1.setAlpha(p)}if(this.bridgeRight1){this.bridgeRight1.setAlpha(p)}if(this.distanceNumber){this.setDistanceNumber(Math.round(3000*p))}}.bind(this.getView()));n.pushAnimation(this.animateBridgeInterval,e.Curve.EaseIn);n.tween(e.Interpolate.scalar(0,0.9),function(p){if(this.bridgeLeft2){this.bridgeLeft2.setAlpha(p)}if(this.bridgeRight2){this.bridgeRight2.setAlpha(p)}if(this.distanceNumber){this.setDistanceNumber(Math.round(3000+(5000*p/0.9)))}}.bind(this.getView()));n.pushAnimation(this.animateBridgeInterval,e.Curve.EaseIn);n.tween(e.Interpolate.scalar(0,0.8),function(p){if(this.bridgeLeft3){this.bridgeLeft3.setAlpha(p)}if(this.bridgeRight3){this.bridgeRight3.setAlpha(p)}if(this.distanceNumber){this.setDistanceNumber(Math.round(8000+(10000*p/0.8)))}}.bind(this.getView()));n.pushAnimation(this.animateBridgeInterval,e.Curve.EaseIn);n.tween(e.Interpolate.scalar(0,0.7),function(p){if(this.bridgeLeft4){this.bridgeLeft4.setAlpha(p)}if(this.bridgeRight4){this.bridgeRight4.setAlpha(p)}if(this.distanceNumber){this.setDistanceNumber(Math.round(18000+(12000*p/0.7)))}}.bind(this.getView()));n.pushAnimation(this.animateBridgeInterval,e.Curve.EaseIn);n.tween(e.Interpolate.scalar(0,0.6),function(p){if(this.bridgeLeft5){this.bridgeLeft5.setAlpha(p)}if(this.bridgeRight5){this.bridgeRight5.setAlpha(p)}if(this.distanceNumber){this.setDistanceNumber(Math.round(30000+(15000*p/0.6)))}}.bind(this.getView()));n.pushAnimation(this.animateBridgeInterval,e.Curve.EaseIn);n.tween(e.Interpolate.scalar(0,0.5),function(p){if(this.bridgeLeft6){this.bridgeLeft6.setAlpha(p)}if(this.bridgeRight6){this.bridgeRight6.setAlpha(p)}if(this.distanceNumber){this.setDistanceNumber(Math.round(45000+(18000*p/0.5)))}}.bind(this.getView()));n.pushAnimation(this.animateBridgeInterval,e.Curve.EaseIn);n.tween(e.Interpolate.scalar(0,0.4),function(p){if(this.bridgeLeft7){this.bridgeLeft7.setAlpha(p)}if(this.bridgeRight7){this.bridgeRight7.setAlpha(p)}if(this.distanceNumber){this.setDistanceNumber(Math.round(63000+((o.finalDistance-63000)*p/0.4)))}}.bind(this.getView()));n.pushCallback(this._showBotHud.bind(this));n.start()},_animateDecimal:function(){var n=this.createAnimationQueue();var o=this;n.pushAnimation(1000,e.Curve.EaseIn);n.tween(e.Interpolate.scalar(0,1),function(p){if(this.decimalNumber&&Math.round(p*10)%2==0){var q=Math.abs(Math.floor(Math.random()*10-1));this.setDecimalNumber(q)}}.bind(this.getView()));n.startLooped()},_showBotHud:function(){var n=this.createAnimationQueue();n.pushAnimation(250,e.Curve.EaseOut);n.tween(e.Interpolate.scalar(550,0),function(o){if(this){this.setPosition(this.getPosition().getX(),o)}}.bind(this.getView().bothud));n.pushCallback(this._randomDistance.bind(this));n.start()},_randomDistance:function(){var n=this.createAnimationQueue();var o=this;this._parallaxEffect();n.pushAnimation(1000,e.Curve.EaseIn);n.tween(e.Interpolate.scalar(0,1),function(p){if(this.distanceNumber&&p>0.9){var q=Math.round(o.finalDistance-Math.random());this.setDistanceNumber(q)}}.bind(this.getView()));n.startLooped()},_parallaxEffect:function(){var o=[];o.push(this.getView()["bridgeLeft1"]);o.push(this.getView()["bridgeRight1"]);o.push(this.getView()["bridgeLeft2"]);o.push(this.getView()["bridgeRight2"]);o.push(this.getView()["bridgeLeft3"]);o.push(this.getView()["bridgeRight3"]);o.push(this.getView()["bridgeLeft4"]);o.push(this.getView()["bridgeRight4"]);o.push(this.getView()["bridgeLeft5"]);o.push(this.getView()["bridgeRight5"]);o.push(this.getView()["bridgeLeft6"]);o.push(this.getView()["bridgeRight6"]);o.push(this.getView()["bridgeLeft7"]);o.push(this.getView()["bridgeRight7"]);o.push(this.getView()["overlay"]);o.push(this.getView()["bg"]);var n=__ngs.r_(__ngs._84).Parallaxer;this.getView().parallaxer=new n([2,2,1.5,1.5,1.1,1.1,0.8,0.8,0.7,0.7,0.5,0.5,0.3,0.3,0.4,0.3],o);this.getView().parallaxer.start()},spaceBridge:function(){if(!h.isConnectionAvailable()){k.showErrorMessages(Localization.getString("ui_pleasecheckconnection"));return false}var s=__ngs.r_(__ngs._48).TFSoundManager;s.stopMusic();if(TFGameData._mainTutorialFlag==true){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"18_SPACEBRIDGECLICKED"})}else{TFAnalytics.reportGameEvent("GASHA",{Step:"SPACEBRIDGECLICKED"})}var n="Content/Videos2x/gacha.mp4";var t="TF_Satellite_V2";var r=100;var v="unknown";if(this._data){var w=this._data;var o=w.newCards;if(o&&(o.length>0)){var q={};q.rewardcnt=o.length;q.gashaPoints=this._data.gashaPoints;if(this._gashaConfig){q.gashaType=this._gashaConfig.type}if(this._gashaInfo){q.gashaCurency=this._gashaInfo.currency;q.gashaName=this._gashaInfo.name;q.gashaSku=this._gashaInfo.sku;q.gashaValue=this._gashaInfo.value}for(var p in o){var u=o[p];q["id"+p]=u.id;q["definitionId"+p]=u.definitionId}TFAnalytics.reportGameEvent("GASHAREWARD",q);card=o[0];cardDefinition=TFCardsManager.getCardDefinition(card.definitionId);if(cardDefinition.type==TFGameData.CARD_TYPE.WEAPON){}}else{v=o?"Rewards array length == 0":"Rewards array undefined"}}else{v="Server data undefined"}TFSceneDirector.fadeOut([0,0,0],function(){TFSceneDirector.disableGlobalTouches("JY: space bridge fade out");var x=__ngs.r_(__ngs._4a).TFImageManager;var z=__ngs.r_(__ngs._p).TFAppDelegate;var A=__ngs.r_(__ngs._7y).IntroCutScene;var y=new A(x.getCorrectVideoPath(n),640,960);y.setOnCompleteCallback(function(){TFSceneDirector.disableGlobalTouches("JY: reward fade in disable");if(TFGameData._mainTutorialFlag===true||TFUserData.getTutorialState("main")=="space-bridge"){TFUserData.setNewTutorialState("main","end")}TFSceneDirector.showGachaRewards(o);TFSceneDirector.fadeIn([1,1,1],function(){TFUserData.blockBack=false;s.playMusic("MAIN_MENU_BACK");TFSceneDirector.enableGlobalTouches("JY: reward fade in enable")});TFAnalytics.reportGameEvent("VIDEOSTOP",{name:"spacebridge"})}.bind(this));y.setGLView(z._glView);TFSceneDirector._fadeLayer.setBackgroundColor("FFFFFFFF");y.setSkipOnTouch(true);TFAnalytics.reportGameEvent("VIDEOSTART",{name:"spacebridge"});y.play();setTimeout(s.playSound.bind(s,t),r)}.bind(this))},setBottomHudView:function(o){var n=__ngs.r_(__ngs._85).BottomHudMedalView;o.updateHudWithView(n)},afterViewDisplayed:function(){if(TFUserData.getTutorialState("main")=="space-bridge"){var o=new Object();o.title=Localization.getString("tutorial_main_title_04");o.text=Localization.getString("tutorial_main_text_04");o.Id="tutorial_main_title_04";o.cb=function(){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"17_SPACEBRIDGETUTORIALDISMISS"})};var p=__ngs.r_(__ngs._81).TutorialBubbleView;var n=TFSceneDirector.showTutorialDialog(p,o);n.getView().bubble1.setPosition(-320,-100)}}})}};__ngs._4i={_c:null,_d:function(){var e={exports:{}};var c=e.exports;this._c=e;var b=__ngs.r_(__ngs._n).ViewController;var d=__ngs.r_(__ngs._45).AnimationQueue;var a=__ngs.r_(__ngs._86).TopHudView;c.TopHudViewController=b.subclass({classname:"TopHudViewController",initialize:function($super){$super();this.createView(a);TFSceneDirector.shiftUIElementLeft(this.getView().lgButtonPanel);TFSceneDirector.shiftUIElementLeft(this.getView().smButtonPanel);this.getView().lgButtonPanel.button.setSelectOnTouch(true);this.getView().smButtonPanel.button.setSelectOnTouch(true);this.update()},update:function(){console.log("TOPHUD-------------update called");this.setPlayerName(TFUserData.getGamerTag());this.setLevel(TFUserData.getLevel());this.setLevelProgress(TFUserData.getLevelProgress()*100);this.setCredits(TFUserData.currency);this.updateCardsCount()},updateCardsCount:function(){var k=TFCardsManager.getFilteredPlayerCards({type:TFGameData.CARD_TYPE.WEAPON});var l=TFCardsManager.getFilteredPlayerCards({type:TFGameData.CARD_TYPE.TRANSFORMER});var h=TFCardsManager.getFilteredLimboCards({type:TFGameData.CARD_TYPE.WEAPON});var n=TFCardsManager.getFilteredLimboCards({type:TFGameData.CARD_TYPE.TRANSFORMER});var m=(l.length+n.length)+"/"+TFUserData.maxGearCards;var g=(k.length+h.length)+"/"+TFUserData.maxPilotCards;this.getView().cardPanel.tfCardsLabel.setText(m);this.getView().cardPanel.wpCardsLabel.setText(g);console.log("TOPHUD updateCardsCount-------------this.getView().cardPanel.tfCardsLabel "+this.getView().cardPanel.tfCardsLabel.getText());console.log("TOPHUD updateCardsCount------------- cards in limbo "+(h.length+n.length));if(h.length>0||n.length>0){this.getView().cardPanel.discardAlertButton.setEnabled(true);if(n.length){this.getView().cardPanel.tfCardsLabel.setColor(1,0,0)}if(h.length){this.getView().cardPanel.wpCardsLabel.setColor(1,0,0)}if(!this._animationQ){this.displayAlert(k,l,h,n)}}else{TFGameData._justOverflowFlag=false;this.getView().cardPanel.discardAlertButton.setEnabled(false);this.getView().cardPanel.discardAlertButton.setAlpha(0);this.getView().cardPanel.tfCardsLabel.setColor(1,1,1);this.getView().cardPanel.wpCardsLabel.setColor(1,1,1);this.getView().cardPanel.wpCardsLabel.setAlpha(1);this.getView().cardPanel.tfCardsLabel.setAlpha(1);this.getView().cardPanel.tfIcon.setAlpha(1);this.getView().cardPanel.wpIcon.setAlpha(1);if(this._animationQ){this._animationQ.destroy();this._animationQ=undefined}}},updateFriendsPoints:function(){this.getView().mainPanel.friendPointsLabel.setText(TFUserData.gashaPoints||"0")},updateBattlePoints:function(){this.getView().mainPanel.battlePointsLabel.setText(TFUserData.battlePoints||"0")},_updateDiscardTime:function(){var g=TFUtils.timeToHuman((TFUserData.limboDate-Server.getServerTime())/1000,true);if(this._discardTime!=g){this.getView().cardPanel.discardAlertButton.setText(Localization.getString("ui_discard")+" : "+g);this._discardTime=g}},displayAlert:function(h,k,g,l){this._animationQ=this.createAnimationQueue();this._animationQ.pushCallback(this._updateDiscardTime.bind(this));this._animationQ.pushAnimation(1000,d.Curve.Linear).tween(d.Interpolate.scalar(1,0),function(m){this.getView().cardPanel.wpCardsLabel.setAlpha(m);this.getView().cardPanel.tfCardsLabel.setAlpha(m);this.getView().cardPanel.tfIcon.setAlpha(m);this.getView().cardPanel.wpIcon.setAlpha(m)}.bind(this));this._animationQ.pushCallback(this._updateDiscardTime.bind(this));this._animationQ.pushAnimation(1000,d.Curve.Linear).tween(d.Interpolate.scalar(0,1),function(m){this.getView().cardPanel.discardAlertButton.setAlpha(m)}.bind(this));this._animationQ.pushCallback(this._updateDiscardTime.bind(this));this._animationQ.pushAnimation(1000,d.Curve.Linear);this._animationQ.pushCallback(this._updateDiscardTime.bind(this));this._animationQ.pushAnimation(1000,d.Curve.Linear).tween(d.Interpolate.scalar(1,0),function(m){this.getView().cardPanel.discardAlertButton.setAlpha(m)}.bind(this));this._animationQ.pushCallback(this._updateDiscardTime.bind(this));this._animationQ.pushAnimation(1000,d.Curve.Linear).tween(d.Interpolate.scalar(0,1),function(m){this.getView().cardPanel.wpCardsLabel.setAlpha(m);this.getView().cardPanel.tfCardsLabel.setAlpha(m);this.getView().cardPanel.tfIcon.setAlpha(m);this.getView().cardPanel.wpIcon.setAlpha(m)}.bind(this));this._animationQ.pushCallback(this._updateDiscardTime.bind(this));this._animationQ.pushAnimation(1000,d.Curve.Linear);this._animationQ.startLooped()},onCardsAlertPressed:function(){var g=__ngs.r_(__ngs._87).OverLimitCardsController;TFSceneDirector._showDialog(new g())},setPlayerName:function(g){var h=13;if(g.length>h){g=g.slice(0,h-2);g=g+"..."}this.getView().mainPanel.playerNameLabel.setText(g.toUpperCase())},setLevelProgress:function(g){console.log("TopHudViewController > setLevelProgress > percent="+g);this.getView().mainPanel.xpBar.setProgress(g)},setLevel:function(g){console.log("TopHudViewController > setLevel > level="+g);this.getView().mainPanel.levelLabel.setText(Localization.getString("ui_level_uc")+" "+g)},setCredits:function(g){this.getView().mainPanel.creditsLabel.setText(Localization.getString(g))},updateHudForViewController:function(l){console.log(" updating hud for "+l.classname);this.updateCardsCount();this.updateFriendsPoints();this.updateBattlePoints();var n=__ngs.r_(__ngs._3x).Social;if(l.classname=="StoreViewController"||l.classname=="RBStoreViewController"||l.classname=="StoreItemViewController"){var h=[],g=Math.ceil(Device.LayoutEmitter.getHeight()*0.07);if(g>45){h=[210,45]}else{h=[g*3.5,g]}var m=[Device.LayoutEmitter.getWidth()-h[0],0];var k=new UI.ViewGeometry.Rect(m,h);if(!this._mobaVisible){n.Common.Service.showBalanceButton(k,function(){},l.classname)}this._mobaVisible=true}else{if(this._mobaVisible){n.Common.Service.hideBalanceButton()}this._mobaVisible=false}if(l.classname=="LandingViewController"||l.classname=="FriendsViewController"){if(!this._commVisible){n.Common.Service.showCommunityButton(UI.ViewGeometry.Gravity.TopRight)}this._commVisible=true}else{if(this._commVisible){n.Common.Service.hideCommunityButton()}this._commVisible=false}l.setLeftButton(this)},onLeftButtonPressed:function(g){if(this._blocked===true||TFSceneDirector._blocked===true){return}this._blocked=true;if(this._behaviourCallback){this._behaviourCallback()}setTimeout(function(){this._blocked=false}.bind(this),100)},useLeftButtonAsDeckButton:function(g){this._behaviourCallback=function(){TFSceneDirector.onBackButton();if(g){g()}}},useLeftButtonAsHomeButton:function(){this._behaviourCallback=TFSceneDirector.onBackButton.bind(TFSceneDirector)},useLeftButtonAsBackButton:function(g){this.getView().mainPanel.leftButton.setText(Localization.getString("ui_back_uc"));this.getView().mainPanel.leftButton.setOnPressCallback(g)},destroy:function($super){$super()}})}};__ngs._4j={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var a=__ngs.r_(__ngs._n).ViewController;var g=__ngs.r_(__ngs._46).BottomHudView;var b=__ngs.r_(__ngs._4v).StoreGashaView;var e=__ngs.r_(__ngs._4x).StoreItemView;var h=__ngs.r_(__ngs._4c).TFUpdateEmitter;c.BottomHudViewController=a.subclass({classname:"BottomHudViewController",initialize:function($super){$super();this.createView(g);this.setEnabled(false);this._stageId=-1;this._worldId=-1},destroy:function($super){h.releaseElements("BottomHudViewController");$super()},updateHudForViewController:function(k){console.log("BottomHudViewController updating hud for "+k.classname);k.setBottomHudView(this);this.setPressedButton(k.classname,k._viewName);this.updateNavData();this.updateBattleEnegydata();this.updateEnergy()},updateEnergy:function(){var k=this._view;if(!k){return}if(!this._ltExpEnergy){this._ltExpEnergy=-1}if(!this._ltBtlEnergy){this._ltBtlEnergy=-1}if((k.setExploreEnergy)&&(this._ltExpEnergy!=TFUserData.getExploreEnergy())){this._ltExpEnergy=TFUserData.getExploreEnergy();k.setExploreEnergy(TFUserData.getExploreEnergy(),TFUserData.getMaxExploreEnergy())}if((k.setBattleEnergy)&&(this._ltBtlEnergy!=TFUserData.getBattleEnergy())){this._ltBtlEnergy=TFUserData.getBattleEnergy();k.setBattleEnergy(TFUserData.getBattleEnergy())}if(this.pauseUpdate===true){return}if(this.getView()&&this.getView().updateBattleEnergyTimer&&this.getView().shiftBattleEnergyBarDown&&this.getView().hideTimeLeftString){if(this.battleEnergyRechargeTime>0){this.battleEnergyRechargeTime-=1;this.getView().updateBattleEnergyTimer(this.battleEnergyRechargeTime)}else{if(TFUserData.getBattleEnergy()!=TFUserData.getMaxBattleEnergy()){this.pauseUpdate=true;this.setupBattleEnergyLeft.bind(this)}else{if(TFUserData.getBattleEnergy()==TFUserData.getMaxBattleEnergy()){this.getView().hideTimeLeftString()}}}}},updateHudWithView:function(l){if(!l){this.setEnabled(false);return}this._view.destroy();this._view=undefined;h.releaseElements("BottomHudViewController");this.createView(l);this.setEnabled(true);if(this._view.classname==="BottomHudOpponentSelectView"){this.setupBattleEnergyLeft();TFSceneDirector.shiftUIElementRight(this._view);var k=this.updateEnergy.bind(this);h.addElements("BottomHudViewController",1000,k)}else{if(this._view.classname==="BottomHudFriendsView"){TFSceneDirector.shiftUIElementLeft(this._view)}else{if(this._view.classname==="BottomHudSearchFriendsView"){TFSceneDirector.shiftUIElementLeft(this._view)}}}},updateEventStoreButton:function(k){console.log("JY: view is "+this._view.classname);this._view.setButtonEnabled("eventSpaceBridgeButton",k)},setEnabled:function(k){this.getView().setVisible(k);this.getView().setTouchable(k)},setPressedButton:function(l,k){this.getView().setPressedButton(l,k)},onDeckButtonPressed:function(){this.setPressedButton("DeckViewController");TFSceneDirector.showCardList(undefined,undefined,undefined,undefined,"crossfade")},onFusionButtonPressed:function(){this.setPressedButton("FusionViewController");TFSceneDirector.showFreshFusion("crossfade")},onColleButtonPressed:function(){this.setPressedButton("TransformViewController");TFSceneDirector.showFreshTransform(false,"crossfade")},onCardButtonPressed:function(){if(TFUserData._fusionSelectViewShowing){return}this.setPressedButton("FusionSelectionViewController");TFSceneDirector.showSellCards("crossfade")},onDexButtonPressed:function(){this.setPressedButton("CollectionViewController");TFSceneDirector.showCollection("crossfade")},onEventGachaButtonPressed:function(){this.setPressedButton("RBStoreViewController","Gasha");var k=__ngs.r_(__ngs._4z).RBStoreGashaView;TFSceneDirector.showRBStore(k,"crossfade")},onStoreButtonPressed:function(){this.setPressedButton("StoreViewController","Item");var k=__ngs.r_(__ngs._4x).StoreItemView;TFSceneDirector.showItemStore(k,"crossfade")},onSpaceBridgeButtonPressed:function(){this.setPressedButton("StoreViewController","Gasha");var k=__ngs.r_(__ngs._4v).StoreGashaView;TFSceneDirector.showStore(k,"crossfade")},onInventoryButtonPressed:function(){this.setPressedButton("InventoryViewController");TFSceneDirector.showInventory("crossfade")},updateNavData:function(){if(this._view.classname!="BottomHudAltView"){return}if(this._worldId>0){this._view.enableMisionNav(true)}else{this._view.enableMisionNav(false)}if(this._stageId>0){this._view.enableListNav(true)}else{this._view.enableListNav(false)}},updateBattleEnegydata:function(){if(this._view.classname!="BottomHudOpponentSelectView"){return}else{this._view.setBattleEnergy(TFUserData.getBattleEnergy())}},setupBattleEnergyLeft:function(){if(TFUserData.getMaxBattleEnergy()-TFUserData.getBattleEnergy()>0){var k=TFGameData._configJSON.battleEnergyPeriod*60;this.battleEnergyRechargeTime=k-Math.round((Server.getTime()-TFUserData.getLastBattleTimeStamp())/1000);for(;this.battleEnergyRechargeTime<0;){this.battleEnergyRechargeTime+=k}this.updateEnergy();console.log("BottomHudViewController > setupBattleEnergyLeft > this.battleEnergyRechargeTime : "+this.battleEnergyRechargeTime)}else{if(this.getView()&&this.getView().shiftBattleEnergyBarDown&&this.getView().hideTimeLeftString){this.battleEnergyRechargeTime=0;this.getView().shiftBattleEnergyBarDown();this.getView().hideTimeLeftString()}}this.pauseUpdate=false},setStage:function(k){this._worldId=k.worldId;this._stageId=k.stageId},onMissionNav:function(){console.log("stage onMissionNav %s %s",this._worldId,this._stageId);this.updateNavData();TFSceneDirector.showStageSelect(this._worldId)},onListNav:function(){console.log("stage onListNav %s %s",this._worldId,this._stageId);this.updateNavData();TFSceneDirector.showMissionSelect(this._worldId,this._stageId)},onWorldNav:function(){this.updateNavData();TFSceneDirector.showWorldSelect()},onRequest:function(){TFSceneDirector.showRequests()},onAllies:function(){TFSceneDirector.showFriends()},showItemStore:function(){TFSceneDirector.showItemStore(e)},showSpaceBridge:function(){TFSceneDirector.showStore(b)},onFriendsButtonPressed:function(){TFSceneDirector.showFriends()},onInviteFriendAction:function(){TFSceneDirector.showSearchFriends()},onGetEnergyButtonPressed:function(){if(TFUserData.getItemQuantity(101)>0||TFUserData.getItemQuantity(102)>0||TFUserData.getItemQuantity(301)>0){TFSceneDirector.showInventory("slideleft")}else{TFSceneDirector.showItemStore(e)}},onBattleEnergyButton:function(){if(TFUserData.getItemQuantity(201)>0||TFUserData.getItemQuantity(202)>0||TFUserData.getItemQuantity(301)>0){TFSceneDirector.showInventory("slideleft")}else{TFSceneDirector.showItemStore(e)}}})}};__ngs._4k={_c:null,_d:function(){var e={exports:{}};var b=e.exports;this._c=e;var a=__ngs.r_(__ngs._n).ViewController;var d=__ngs.r_(__ngs._45).AnimationQueue;var g=__ngs.r_(__ngs._s).TFUtils;var c=__ngs.r_(__ngs._7t).GLList;b.TutorialDialogViewController=a.subclass({classname:"TutorialDialogViewController",initialize:function($super,k,h){$super();this._otherData=h;this.createView(k,h)},onDismiss:function(h){h.setIgnore(true);TFSceneDirector.dismissTutorialDialog()},createView:function($super,m,l){$super(m);if(l){this._otherData=l;if(l.cb){this._destroyCB=l.cb}else{this._destroyCB=undefined}}else{this._otherData=undefined;this._destroyCB=undefined}if(m.classname=="TutorialBubbleView"){var k=0;if(UI.Window._height>TFSceneDirector._workingArea.height){k=(UI.Window._height-TFSceneDirector._workingArea.height)/2}if(TFUserData.sideSelected=="Decepticon"){g.changeImageOnSprite(this.getView().bubble1.icon,this.getView().bubble1._definitions.icon.info.asset2);g.changeImageOnSprite(this.getView().bubble2.icon,this.getView().bubble2._definitions.icon.info.asset2)}var h="bubble1";if(this._otherData.topBubble){this.getView().bubble1.setVisible(false);this.getView().bubble2.setVisible(true);h="bubble2"}if(k){this.getView()[h].setPosition(this.getView()._definitions[h].pos_x,this.getView()._definitions[h].pos_y+k)}if(this._otherData.closeButton==false){this.getView()[h].okButton.setVisible(false)}if(this._otherData){this.getView()[h].title.setText(Localization.getString(this._otherData.title));this.getView()[h].text.setText(Localization.getString(this._otherData.text));if(!this._otherData.title||this._otherData.title.length<2){this.getView()[h].text.setPosition(this.getView()[h]._definitions.text.transition_in.new_x,142)}var n=50;if(this._otherData.arrow_pos){this.getView().arrow1.setVisible(true);this.getView().arrow1.setPosition(this._otherData.arrow_pos[0],this._otherData.arrow_pos[1]);this._animateArrow(this.getView().arrow1,n,this._otherData.arrow_pos[0],this._otherData.arrow_pos[1])}}}},_animateArrow:function(k,m,n,l){var h=this.createAnimationQueue();h.pushAnimation(250,d.Curve.EaseIn).tween(d.Interpolate.scalar(n-m,n+m),function(o){k.setPosition(o,k.getPosition().getY())}.bind(this.getView()));h.pushAnimation(250,d.Curve.EaseOut).tween(d.Interpolate.scalar(n+m,n-m),function(o){k.setPosition(o,k.getPosition().getY())}.bind(this.getView()));h.startLooped()},onSort:function(h){switch(h.info.sortType){case"Overallhigh":TFUserData.sortCardsOverAll(true);break;case"Overalllow":TFUserData.sortCardsOverAll(false);break;case"Rarityhigh":TFUserData.sortCardsRarity(true);break;case"Raritylow":TFUserData.sortCardsRarity(false);break;case"XPhigh":TFUserData.sortCardsXP(true);break;case"XPlow":TFUserData.sortCardsXP(false);break;case"Rangedhigh":TFUserData.sortCardsRanged(true);break;case"Rangedlow":TFUserData.sortCardsRanged(false);break;case"Meleehigh":TFUserData.sortCardsMelee(true);break;case"Meleelow":TFUserData.sortCardsMelee(false);break;case"Specialhigh":TFUserData.sortCardsSpecial(true);break;case"Speciallow":TFUserData.sortCardsSpecial(false);break}this.refreshListOnSort()},refreshListOnSort:function(){var h=this._otherData;var k=null;h._arrayIndex=0;k=h.fetchListItems();h.getView()["cardList"].destroy();h.getView()["cardList"]=new c(h._listWidth,h._listHeight,undefined,undefined,undefined,undefined,h.getView());h.getView()["cardList"].setItemSize(new Core.Size(h._listItemWidth,h._listItemHeight));h.getView()["cardList"].setPosition(h._listPos_x,h._listPos_y);h.getView()["cardList"].setScrollable(false);h.getView().addChild(h.getView()["cardList"]);for(var l in k){h.getView()["cardList"].addItem(k[l])}if(h._nextpage){h.getView()["nextButton"].setVisible(true)}else{h.getView()["nextButton"].setVisible(false)}h.getView()["prevButton"].setVisible(false);TFSceneDirector.dismissTutorialDialog()},destroy:function($super){this._otherData=null;$super()}})}};__ngs._4l={_c:null,_d:function(){var d={exports:{}};var g=d.exports;this._c=d;var c=__ngs.r_(__ngs._n).ViewController;var o=__ngs.r_(__ngs._88).MissionSelectView;var k=__ngs.r_(__ngs._48).TFSoundManager;var n=__ngs.r_(__ngs._4a).TFImageManager;var h=__ngs.r_(__ngs._s).TFUtils;var m=__ngs.r_(__ngs._x).TFManifestManager;var e=__ngs.r_(__ngs._45).AnimationQueue;var b=__ngs.r_(__ngs._63).TFFormulas;var a=__ngs.r_(__ngs._89).CardThumbnailView;var l=__ngs.r_(__ngs._4c).TFUpdateEmitter;g.MissionSelectViewController=c.subclass({classname:"MissionSelectViewController",MUSIC_KEY_MINIGAME:"MISSION_MINIGAME_BACK",MUSIC_KEY:"MAIN_MENU_BACK",initialize:function($super,s,p){k.playMusic(this.MUSIC_KEY);$super();this._worldId=s;this._stageId=p;this._unlockedMissions=0;this._missions=TFGameData.getMissionsForStage(this._worldId,this._stageId);for(var r=1;r<=this._missions.length;r++){if(TFUserData.isMissionUnlocked(this._missions[r-1].id)){this._unlockedMissions++}}this.createView(o);this.getView()["missionList"].setScrollable(false);var u=TFGameData.getStage(this._worldId,this._stageId).stageName;this.getView()["stageNameLabel"].setText(Localization.getString(u));if(TFSceneDirector.missionScrollPos){var v=TFSceneDirector.missionScrollPos["mission."+this._worldId+"."+this._stageId];if(v){this.getView().setPosition(this.getView().getPosition().getX(),v)}}var t={displayed:true,animated:true,timeout:1000};var q={displayed:true,animated:true,timeout:1000};if(this._worldId==91||this._worldId==92){h.changeImageOnSprite(this.getView().backgroundStage,"Content/Images8x/UI/BG/bg_mission_map.jpg")}else{h.changeImageOnSprite(this.getView().backgroundStage,"Content/Images8x/UI/BG/location_bg_0"+this._worldId+".jpg")}this.setHudDisplayData(t,q)},_setMissionDataOnCell:function(w,v,y){var p=TFGameData.getCardRewardsForMission(v.id);var z=TFUserData.getCardsEarnedForMission(v.id);console.log("Rewards %s",JSON.stringify(p));console.log("Earned %s",JSON.stringify(z));for(j=0;j<p.length;j++){var x=p[j];var u=w._cardPanels[j];var s=u.cardImage;if(!s){h.createToast((j+1)+" awarded in a mission ");continue}u.setVisible(true);var B={anchor:[0.5,0.5],showSpinner:true};var A=z.indexOf(x)>-1?true:false;if(!A){B.showBack=true}var q=TFCardsManager.getCardDefinition(x);if(q.type==TFGameData.CARD_TYPE.WEAPON){B.weapon=true}u.updateWithCard(x,B)}w.missionName.setText(Localization.getString(v.missionName));w.xpReward.setText(v.xpReward);w.energyConsumeGroup.energyCost.setText(v.energyPerRound);w.missionBackground.setVisible(false);var r=TFUserData.getRoundsCompletedForMission(v.id);var t=TFGameData.getTotalRoundsForMission(v.id);if(r<t){w.completionGroup.progressPercent.setText(""+Math.round(r/t*100))}else{w.completionGroup.progressPercent.setVisible(false);w.completionGroup.percentageLabel.setVisible(false);h.changeImageOnSprite(w.completionGroup.completionBg,w.completionGroup.completionBg.info.asset2)}w.startButton.info.missionId=v.id;w.missionNumberGroup.missionNumberText.setText(""+y)},_setBossDataOnCell:function(q,p){q.bossName.setText(Localization.getString(p.name));if(TFUserData.isStageBossComplete(this._stageId)){q._cardPanel.updateWithCard(p.pilotId,{anchor:[0.5,0],weapon:true,showSpinner:true})}q.missionBackground.setVisible(false);if(TFUserData.isStageBossComplete(this._stageId)){h.changeImageOnSprite(q.completionGroup.completionBg,q.completionGroup.completionBg.info.asset2);q.goButton.setVisible(false);q.completionGroup.percentageLabel.setVisible(false);q.completionGroup.progressPercent.setVisible(false)}else{h.changeImageOnSprite(q.completionGroup.completionBg,q.completionGroup.completionBg.info.asset1);q.missionBackgroundFade.setVisible(false);q.completionLabel.setVisible(false);q.completionGroup.progressPercent.setText("0")}},onCardSelected:function(r){var u=r.info.cardID;var s={};var t=TFCardsManager.getCardDefinition(u);var q=b.getStatusForLevel(t,1);s.stats=q;s.CardDefinition=u;s.cbDismiss=function(){this._blocked=false}.bind(this);var p;if(t.type==TFGameData.CARD_TYPE.TRANSFORMER){p=__ngs.r_(__ngs._80).FullScreenCardController}else{p=__ngs.r_(__ngs._8a).FullScreenWeaponCardController}TFSceneDirector._showDialog(new p(s,true))},fetchListItems:function(q){var v=[];this._missionsCounter=0;for(var s=0;s<this._missions.length;s++){var z=this._missions[s];if(TFUserData.isMissionUnlocked(z.id)){this._missionsCounter++;var p=__ngs.r_(__ngs._7p).View;var y=__ngs.r_(__ngs._8b).MissionSelectCellView;var A=new y(this,z);this._setMissionDataOnCell(A,z,s+1);v.push(A);z.cellView=A}}if(TFUserData.isStageBossUnlocked(this._worldId,this._stageId)){if(TFUserData.getTutorialState("mission")=="start"){this._missionsCounter=0;var u=new Object();u.title=Localization.getString("tutorial_mission_title_08");u.text=Localization.getString("tutorial_mission_text_08");u.Id="tutorial_mission_title_08";var w=__ngs.r_(__ngs._81).TutorialBubbleView;var t=TFSceneDirector.showTutorialDialog(w,u);t.getView().bubble1.setPosition(-320,-100)}var x=__ngs.r_(__ngs._8c).BossSelectCellViewDefinition;var A=new p(this,x);this._boss=TFGameData.getBossForStage(this._worldId,this._stageId);this._boss.cellView=A;var r=A._definitions.bossWeaponCard.size_x;var B=A._definitions.bossWeaponCard.size_y;A._cardPanel=new a(this,this._boss.pilotId,r,B,{showBack:true,anchor:[0.5,0],weapon:true,showSpinner:true});A.addChild(A._cardPanel);A._cardPanel.setPosition(A._definitions.bossWeaponCard.pos_x,A._definitions.bossWeaponCard.pos_y);this._setBossDataOnCell(A,this._boss);v.push(A)}return v.reverse()},prepareSpinner:function(t){var q=[75/1.5,75/1.5];var p=[116/1.5,48/1.5];console.log("MissionSelectViewController > prepareSpinner > cellView._definitions : "+JSON.stringify(t._definitions.missionBackground));var r=t._definitions.missionBackground.size_x;var s=t._definitions.missionBackground.size_y;console.log("MissionSelectViewController > prepareSpinner > s_width : "+r+" | s_height : "+s);t._spinnerBack=new GL2.Sprite();t._spinnerBack.setImage("Content/Images8x/UI/card_frames/loading_graphic.png",p,[0.5,0.5],[0,0,1,1]);t._spinnerBack.setAlpha(0);t._spinnerWheel=new GL2.Sprite();t._spinnerWheel.setImage("Content/Images8x/UI/card_frames/loading_spinner.png",q,[0.5,0.5],[0,0,1,1]);t._spinnerWheel.setAlpha(0);t._spinnersprite=new GL2.Sprite();t._spinnersprite.setImage("Content/Images8x/misc2/1pxwhite.png",[r,s],[0.5,0.5],[0,0,1,1]);t._spinnersprite.setAlpha(0);t._spinnershade=new GL2.Sprite();t._spinnershade.setImage("Content/Images8x/misc2/1pxblack.png",[r,s],[0.5,0.5],[0,0,1,1]);t._spinnershade.setDepth(1000);t._spinnershade.setPosition(t._definitions.missionBackground.pos_x+r/2,t._definitions.missionBackground.pos_y+s/2);t._spinnershade.setDepth(-1);t._spinnershade.addChild(t._spinnersprite);t._spinnershade.addChild(t._spinnerBack);t._spinnershade.addChild(t._spinnerWheel);t._spinnerBack.setPosition(r/2-q[0]/2-30,-s/2+50);t._spinnerWheel.setPosition(r/2-q[0]/2-30,-s/2+50);t.addChild(t._spinnershade);t.spinnerRemoved=false;t._spinnerStartQueue=new e(this._am);t._spinnerStartQueue.pushAnimation(50,e.Curve.EaseOut);t._spinnerStartQueue.tween(e.Interpolate.scalar(0,1),function(u){console.log("MissionSelectViewController > prepareSpinner > cellview.spinnerRemoved : "+this.spinnerRemoved)}.bind(t));t._spinnerStartQueue.pushAnimation(100,e.Curve.EaseIn);t._spinnerStartQueue.tween(e.Interpolate.scalar(0,1),function(u){if(this.spinnerRemoved==true){return}this._spinnersprite.setAlpha(u);this._spinnerBack.setAlpha(u);this._spinnerWheel.setAlpha(u)}.bind(t));t._spinnerStartQueue.start();md=new GL2.MotionData();md.initFromJSONFile("Content/AnimationData/card_spinner_anim.json",GL2.MotionData.DataFormat.FlashClassicTween,function(u,v){if(u){console.log("SPINNER error :"+JSON.stringify(u))}else{if(this.spinnerRemoved==true){return}mc=new GL2.MotionController(v);mc.bind("spinner",this._spinnerWheel,GL2.MotionController.SyncFlags.Rotation);mc.bind("spinnerAlpha",this._spinnersprite,GL2.MotionController.SyncFlags.Alpha);this._mc=mc;mc.play(GL2.MotionController.PlayMode.Loop)}}.bind(t))},onSceneTransitionDone:function(){for(var r=0;r<this._missions.length;r++){var t=this._missions[r];if(TFUserData.isMissionUnlocked(t.id)){if(!m.isFileDownloaded(n.getCorrectImagePath("Content/Images8x/missions/preview/"+t.missionImages.preview))){this.prepareSpinner(t.cellView)}h.setRemoteImageOnSprite(t.cellView.missionBackground,"Content/Images8x/missions/preview/"+t.missionImages.preview,this.transitionToImage.bind(this,t.cellView));t.cellView.missionBackground.setVisible(true);t.cellView.missionBackground.setAlpha(0)}}if(TFUserData.isStageBossUnlocked(this._worldId,this._stageId)){this._boss.cellView.missionBackground.setVisible(true);this._boss.cellView.missionBackground.setAlpha(0);var q=new Core.Size(this._boss.cellView._definitions.missionBackground.size_x,this._boss.cellView._definitions.missionBackground.size_y);var p=this._boss.bossUVArray;var s;if(p){s=new Core.Rect(p[0],p[1],p[2],p[3])}else{s=new Core.Rect(0,0.1,1,0.35)}this._boss.cellView.missionBackground.setImage("Content/Images8x/misc2/1pxclear.png",q,[0,0],s);if(!m.isFileDownloaded(n.getCorrectImagePath(h.getCardFullImagePath(this._boss.gearId)))){this.prepareSpinner(this._boss.cellView)}h.setRemoteImageOnSprite(this._boss.cellView.missionBackground,h.getCardFullImagePath(this._boss.gearId),this.transitionToImage.bind(this,this._boss.cellView))}},transitionToImage:function(q){q.spinnerRemoved=true;var p=this.createAnimationQueue();p.pushAnimation(this._unlockedMissions*75,e.Curve.EaseOut);p.pushAnimation(1000,e.Curve.EaseOut).tween(e.Interpolate.scalar(0,1),function(r){this.setAlpha(r)}.bind(q.missionBackground));p.pushCallback(function(r){this.destroySpinner(r)}.bind(this,q));p.start()},destroySpinner:function(p){p.spinnerRemoved=true;if(p._spinnerBack&&p._spinnerBack.__objectRegistryId){p._spinnerBack.destroy()}if(p._spinnerWheel&&p._spinnerWheel.__objectRegistryId){p._spinnerWheel.destroy()}if(p._spinnersprite&&p._spinnersprite.__objectRegistryId){p._spinnersprite.destroy()}if(p._spinnershade&&p._spinnershade.__objectRegistryId){p._spinnershade.destroy()}if(p._mc&&p._mc.__objectRegistryId){p._mc.stop();p._mc.destroy()}},onGoButton:function(q){if(TFUserData.getTutorialState("mission")=="start"||TFUserData.getTutorialState("missionstage1")=="start"){TFAnalytics.reportGameEvent("MISSIONTUTORIAL",{Step:"BossFightGoClick"})}var p=__ngs.r_(__ngs._8d).BossFightViewController;TFSceneDirector.pushViewController(new p(TFGameData.getMissionsForStage(this._worldId,this._stageId)[0].id,this._boss,this.classname))},onStartButton:function(p){k.playMusic(this.MUSIC_KEY_MINIGAME);TFSceneDirector.hideBottomHud(false);if(TFUserData.getTutorialState("mission")=="start"||TFUserData.getTutorialState("missionstage1")=="start"){TFAnalytics.reportGameEvent("MISSIONTUTORIAL",{Step:"06_MissionStartButtonClick : "+p.info.missionId})}TFSceneDirector.showDoItMission(p.info.missionId);if(TFUserData.hasSeenMission(p.info.missionId)===false){TFAnalytics.reportGameEvent("MISSIONSTART",{missionid:TFGameData.getFuzzyMisionId(p.info.missionId)})}},destroy:function($super){l.releaseElements("BottomHudViewController");$super()},afterViewDisplayed:function(){if(TFUserData.getTutorialState("mission")=="start"){var s=30;var q=140;var p=360;this._arrow=SpriteFactoryCache.createSpriteWithCachedAnimation(h.getArrowImage(),[120,70],[0,0],[1,0,-1,1]);this._arrow.setPosition(q,p);this.getView().addChild(this._arrow);var v=this.createAnimationQueue();v.pushAnimation(250,e.Curve.EaseIn).tween(e.Interpolate.scalar(q-s,q+s),function(A){this._arrow.setPosition(A,this._arrow.getPosition().getY())}.bind(this));v.pushAnimation(250,e.Curve.EaseOut).tween(e.Interpolate.scalar(q+s,q-s),function(A){this._arrow.setPosition(A,this._arrow.getPosition().getY())}.bind(this));v.startLooped()}if(TFUserData.getTutorialState("missionstage1")=="start"){var w=new Object();w.title=Localization.getString("tutorial_mission_title_022");w.text=Localization.getString("tutorial_mission_text_022");w.Id="tutorial_mission_title_02";w.cb=function(){TFAnalytics.reportGameEvent("MISSIONTUTORIAL",{Step:"05_MissionSelectDismiss"})};var x=__ngs.r_(__ngs._81).TutorialBubbleView;var t=TFSceneDirector.showTutorialDialog(x,w);t.getView().bubble1.setPosition(-320,-100)}if(TFUserData.getTutorialState("mission")=="start"&&this._missionsCounter==2){var w=new Object();w.title=Localization.getString("tutorial_mission_title_023");w.text=Localization.getString("tutorial_mission_text_023");w.Id="tutorial_mission_title_023";w.cb=function(){TFAnalytics.reportGameEvent("MISSIONTUTORIAL",{Step:"10_MissionSelectDismiss"})};var x=__ngs.r_(__ngs._81).TutorialBubbleView;var t=TFSceneDirector.showTutorialDialog(x,w);t.getView().bubble1.setPosition(-320,-100)}else{var r=__ngs.r_(__ngs._8e).FullScreenMissionController;var u=false;var y=TFUserData.missionsState;var z=null;for(missionIndex in y){z=y[missionIndex].stageId;if(z==this._stageId){u=true;break}}if(!u&&TFGameData.getStage(this._worldId,this._stageId).introSlideShow){var w=new Object();w.image=TFGameData.getStage(this._worldId,this._stageId).campaignStageIntroCharacter;w.message=TFGameData.getStage(this._worldId,this._stageId).campaignStageIntroDialog;w.cb=function(){};TFSceneDirector._showDialog(new r(w,true))}}},setBottomHudView:function(r){var q=__ngs.r_(__ngs._8f).BottomHudAltView;r.updateHudWithView(q);var p=r.updateEnergy.bind(r);l.addElements("BottomHudViewController",10000,p)}})}};__ngs._4m={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var a=__ngs.r_(__ngs._n).ViewController;var g=__ngs.r_(__ngs._8g).StageSelectView;var c=__ngs.r_(__ngs._45).AnimationQueue;var e=__ngs.r_(__ngs._4c).TFUpdateEmitter;b.StageSelectViewController=a.subclass({classname:"StageSelectViewController",initialize:function($super,n){$super();TFUserData.bossCounter=0;this.createView(g);this._worldId=n;var k=TFGameData.getStagesForWorld(this._worldId);var r=TFGameData.getWorld(this._worldId);var l=TFGameData.getWorldName(this._worldId);this.getView()["worldNameLabel"].setText(Localization.getString(l));var p,w,u,t;for(var o=1;o<=k.length;o++){u=k[o-1];var h=TFUserData.isStageUnlocked(this._worldId,u.id);w=this.getView()["stage"+o+"ProgressLabel"];p=this.getView()["stage"+o+"Button"];t=this.getView()["stage"+o+"ProgressBar"];p.setPosition(u.stagePositionX,u.stagePositionY);w.setPosition(u.stagePositionX,u.stagePositionY+70);t.setPosition(u.stagePositionX,u.stagePositionY+65);p.setVisible(true);if(h){t.setVisible(true)}else{p.setEnabled(false);p.setAlpha(0.8)}p.info.id=u.id;p.info.buttonIndex=o;var v=Math.round(TFUserData.getStageProgress(this._worldId,u.id)*100);w.setText(v+"%");t.setProgress(v);if(r.faction==TFGameData.FACTION.AUTOBOTSTRING){p.setImage("./Content/Images8x/UI/02_mission/mission_autobot.png")}else{if(r.faction==TFGameData.FACTION.DECEPTICONSTRING){p.setImage("./Content/Images8x/UI/02_mission/mission_decepticon.png")}}var q=__ngs.r_(__ngs._s).TFUtils;if(this._worldId==91||this._worldId==92){q.changeImageOnSprite(this.getView().stageBackground,"Content/Images8x/UI/BG/bg_mission_map.jpg")}else{q.changeImageOnSprite(this.getView().stageBackground,"Content/Images8x/UI/BG/location_bg_0"+this._worldId+".jpg")}}this.getView().setAlpha(0);this.getView().setScale(0.5);this.getView().setPosition(TFGlobals.nativeResolution.x/4,-TFGlobals.nativeResolution.y/4);this.createAnimationQueue().pushAnimation(800,c.Curve.Linear).pushAnimation(200,c.Curve.EaseOut).tween(c.Interpolate.scalar(0.5,1),function(x){this.setScale(x);this.setPosition(TFGlobals.nativeResolution.x/2*(1-x),TFGlobals.nativeResolution.y/2*(1-x))}.bind(this.getView())).start();this.createAnimationQueue().pushAnimation(800,c.Curve.Linear).pushAnimation(200,c.Curve.EaseOut).tween(c.Interpolate.scalar(0,1),function(x){this.setAlpha(x)}.bind(this.getView())).start();var m={displayed:true,animated:true,timeout:0};var s={displayed:true,animated:true,timeout:0};this.setHudDisplayData(m,s)},onStageSelected:function(n){var h=TFGameData.getStagesForWorld(this._worldId);var o;for(var m=1;m<=h.length;m++){o=this.getView()["stage"+m+"Button"];o.setIgnore(true)}if(this._arrow){this.getView().removeChild(this._arrow);this._arrow.destroy();this._arrow=undefined}this.resetRunningAnimations();console.log("stage selected "+n.info.id);if(TFUserData.getTutorialState("mission")=="start"||TFUserData.getTutorialState("missionstage1")=="start"){TFAnalytics.reportGameEvent("MISSIONTUTORIAL",{Step:"04_StageSelected : "+n.info.id})}var q=this.getView();q.clickedButton=n;var r,p;for(var m=1;m<=h.length;m++){r=this.getView()["stage"+m+"ProgressLabel"];p=this.getView()["stage"+m+"ProgressBar"];r.setVisible(false);p.setVisible(false)}r=this.getView()["stage"+n.info.buttonIndex+"ProgressLabel"];p=this.getView()["stage"+n.info.buttonIndex+"ProgressBar"];r.setVisible(false);p.setVisible(false);this.createAnimationQueue().pushAnimation(200,c.Curve.EaseIn).tween(c.Interpolate.scalar(1,5),function(s){this.setScale(s);this.setAlpha((5-s)/4)}.bind(n)).start();this.createAnimationQueue().pushAnimation(200,c.Curve.EaseIn).tween(c.Interpolate.scalar(1,1.2),function(v,u){for(var t=1;t<=v.length;t++){var s=this["stage"+t+"Button"];if(s!=this.clickedButton){s.setScale(u);s.setAlpha((1.2-u)/0.2)}}}.bind(q,h)).start();this.createAnimationQueue().pushAnimation(300,c.Curve.Linear).pushAnimation(200,c.Curve.EaseInOut).tween(c.Interpolate.scalar(1,0),function(s){this.stageBackground.setAlpha(s)}.bind(q)).start();var l=q.stageBackground.getPosition().getX();var k=q.stageBackground.getPosition().getY();this.createAnimationQueue().pushAnimation(500,c.Curve.EaseInOut).tween(c.Interpolate.scalar(1,10),function(s){this.stageBackground.setScale(s);this.stageBackground.setPosition(l-(s-1)*(n.getPosition().getX()-l),k-(s-1)*(n.getPosition().getY()-k))}.bind(q)).pushCallback(function(s){console.log("Choosing mission (world="+this._worldId+", stage="+s.info.id+")");TFSceneDirector.showMissionSelect(this._worldId,s.info.id)}.bind(this,n)).start()},destroy:function($super){e.releaseElements("BottomHudViewController");$super()},afterViewDisplayed:function(){if(TFUserData.getTutorialState("missionstage1")=="start"){var h=this.createAnimationQueue();h.pushAnimation(1000);h.pushCallback(function(){if(!this.getView()){return}var s=new Object();s.title=Localization.getString("tutorial_mission_title_02");s.text=Localization.getString("tutorial_mission_text_02");s.Id="tutorial_mission_title_02";s.cb=function(){TFAnalytics.reportGameEvent("MISSIONTUTORIAL",{Step:"03_StageSelectDismiss"})};var w=__ngs.r_(__ngs._81).TutorialBubbleView;var q=TFSceneDirector.showTutorialDialog(w,s);q.getView().bubble1.setPosition(-320,-100);var u=30;var v=270;var t=260;this._arrow=SpriteFactoryCache.createSpriteWithCachedAnimation(TFUtils.getArrowImage(),[120,70],[0,0],[1,0,-1,1]);this._arrow.setPosition(v,t);this._arrow.setScale(-1,1);this.getView().addChild(this._arrow);var r=this.createAnimationQueue();r.pushAnimation(250,c.Curve.EaseIn).tween(c.Interpolate.scalar(v-u,v+u),function(x){this._arrow.setPosition(x,this._arrow.getPosition().getY())}.bind(this));r.pushAnimation(250,c.Curve.EaseOut).tween(c.Interpolate.scalar(v+u,v-u),function(x){this._arrow.setPosition(x,this._arrow.getPosition().getY())}.bind(this));r.startLooped()}.bind(this));h.start()}else{var o=__ngs.r_(__ngs._8h).FullScreenMissionView;var p=false;var l=TFUserData.missionsState;var k=null;for(missionIndex in l){k=l[missionIndex].worldId;if(k==this._worldId){p=true;break}}if(!p&&TFGameData.getWorld(this._worldId).introSlideShow){var n=new Object();n.image=TFGameData.getWorld(this._worldId).campaignWorldIntroCharacter;n.message=TFGameData.getWorld(this._worldId).campaignWorldIntroDialog;n.cb=function(){};var m=__ngs.r_(__ngs._8e).FullScreenMissionController;TFSceneDirector._showDialog(new m(n,true))}}},setBottomHudView:function(l){var k=__ngs.r_(__ngs._8f).BottomHudAltView;l.updateHudWithView(k);var h=l.updateEnergy.bind(l);e.addElements("BottomHudViewController",10000,h)}})}};__ngs._4n={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var a=__ngs.r_(__ngs._n).ViewController;var c=__ngs.r_(__ngs._45).AnimationQueue;var g=__ngs.r_(__ngs._8i).WorldSelectView;var h=__ngs.r_(__ngs._s).TFUtils;var e=__ngs.r_(__ngs._4c).TFUpdateEmitter;b.WorldSelectViewController=a.subclass({classname:"WorldSelectViewController",initialize:function($super){$super();this.createView(g);this._counter=0;this._worlds=TFGameData.getWorlds();for(var m=1;m<=this._worlds.length;m++){var l=this.getView()["world"+m+"Button"];var o=this._worlds[m-1];l.setPosition(o.worldPositionX,o.worldPositionY);if(TFUserData.isWorldUnlocked(o.id)){l.setVisible(true);this._counter++;l.info.id=o.id;if(o.faction==TFGameData.FACTION.AUTOBOTSTRING){l.setImage("./Content/Images8x/UI/02_mission/mission_autobot.png")}else{if(o.faction==TFGameData.FACTION.DECEPTICONSTRING){l.setImage("./Content/Images8x/UI/02_mission/mission_decepticon.png")}}}}var n={displayed:true,animated:true,timeout:0};var k={displayed:true,animated:true,timeout:0};this.setHudDisplayData(n,k)},onWorldSelected:function(o){var p;for(var n=1;n<=TFGameData.numberOfWorlds();n++){p=this.getView()["world"+n+"Button"];p.setIgnore(true)}if(this._arrow){this.getView().removeChild(this._arrow);this._arrow.destroy();this._arrow=undefined}this.resetRunningAnimations();console.log("world selected "+o.info.id);if(TFUserData.getTutorialState("missionstage1")=="start"||TFUserData.getTutorialState("mission")=="stageComplete"){TFAnalytics.reportGameEvent("MISSIONTUTORIAL",{Step:"02_WorldSelected : "+o.info.id})}var k=this.getView();k.clickedButton=o;this.createAnimationQueue().pushAnimation(200,c.Curve.EaseIn).tween(c.Interpolate.scalar(1,5),function(q){this.setScale(q);this.setAlpha((5-q)/4)}.bind(o)).start();this.createAnimationQueue().pushAnimation(200,c.Curve.EaseIn).tween(c.Interpolate.scalar(1,1.2),function(s){for(var q=1;q<=TFGameData.numberOfWorlds();q++){var r=this["world"+q+"Button"];if(r!=this.clickedButton){r.setScale(s);r.setAlpha((1.2-s)/0.2)}}}.bind(k)).start();this.createAnimationQueue().pushAnimation(300,c.Curve.Linear).pushAnimation(200,c.Curve.EaseInOut).tween(c.Interpolate.scalar(1,0),function(q){this.planetImage.setAlpha(q)}.bind(k)).start();var m=k.planetImage.getPosition().getX();var l=k.planetImage.getPosition().getY();this.createAnimationQueue().pushAnimation(500,c.Curve.EaseInOut).tween(c.Interpolate.scalar(1,10),function(q){this.planetImage.setScale(q);this.planetImage.setPosition(m-(q-1)*(o.getPosition().getX()-m),l-(q-1)*(o.getPosition().getY()-l))}.bind(k)).pushCallback(function(q){TFSceneDirector.showStageSelect(q.info.id)}.bind(this,o)).start();TFSceneDirector.setStage({worldId:o.info.id,stageId:-1})},destroy:function($super){e.releaseElements("BottomHudViewController");$super()},setBottomHudView:function(m){var l=__ngs.r_(__ngs._8f).BottomHudAltView;m.updateHudWithView(l);var k=m.updateEnergy.bind(m);e.addElements("BottomHudViewController",10000,k)},afterViewDisplayed:function(){if(TFUserData.getTutorialState("missionstage1")=="start"){var m=new Object();m.title=Localization.getString("tutorial_mission_title_01");m.text=Localization.getString("tutorial_mission_text_01");m.Id="tutorial_mission_title_01";m.cb=function(){TFAnalytics.reportGameEvent("MISSIONTUTORIAL",{Step:"01_WorldSelectDismiss"})};var q=__ngs.r_(__ngs._81).TutorialBubbleView;var l=TFSceneDirector.showTutorialDialog(q,m);l.getView().bubble1.setPosition(-320,-100);var o=30;var p=120;var n=340;this._arrow=SpriteFactoryCache.createSpriteWithCachedAnimation(h.getArrowImage(),[120,70],[0,0],[1,0,-1,1]);this._arrow.setPosition(p,n);this.getView().addChild(this._arrow);var k=this.createAnimationQueue();k.pushAnimation(250,c.Curve.EaseIn).tween(c.Interpolate.scalar(p-o,p+o),function(r){this._arrow.setPosition(r,this._arrow.getPosition().getY())}.bind(this));k.pushAnimation(250,c.Curve.EaseOut).tween(c.Interpolate.scalar(p+o,p-o),function(r){this._arrow.setPosition(r,this._arrow.getPosition().getY())}.bind(this));k.startLooped()}if(TFUserData.getTutorialState("mission")=="stageComplete"&&this._counter>1){var m=new Object();m.title=Localization.getString("tutorial_mission_title_09");m.text=Localization.getString("tutorial_mission_text_09");m.Id="tutorial_mission_title_09";m.cb=function(){TFAnalytics.reportGameEvent("MISSIONTUTORIAL",{Step:"11_END2_WorldSelectDismiss"})};var q=__ngs.r_(__ngs._81).TutorialBubbleView;var l=TFSceneDirector.showTutorialDialog(q,m);l.getView().bubble1.setPosition(-320,-100);TFUserData.setNewTutorialState("mission","end")}}})}};__ngs._4o={_c:null,_d:function(){var h={exports:{}};var e=h.exports;this._c=h;var c=__ngs.r_(__ngs._n).ViewController;var g=__ngs.r_(__ngs._45).AnimationQueue;var k=__ngs.r_(__ngs._4p).DeckGridView;var b=__ngs.r_(__ngs._49).TFDeckManager;var a=__ngs.r_(__ngs._89).CardThumbnailView;var d=__ngs.r_(__ngs._63).TFFormulas;e.DeckViewController=c.subclass({classname:"DeckViewController",cardsPosSize:{card2:[321,312,188,270,0],card1:[110,386,151,250,0],card3:[533,417,149,250,0],card5:[71,540,92,138,1],card4:[147,568,92,138,0],card9:[493,569,92,138,8],card8:[570,597,92,138,0],card6:[269,516,96,162,10],card7:[368,540,96,162,0]},map:{status2:[2,6,7],status1:[1,5,4],status3:[3,9,8]},initialize:function($super,r,s,l,q,m){$super();this.m_currentView=r;this._totalPower=0;this._totalOriginalPower=0;this._cardPanels=[];b.instantiate();console.log("DeckViewController.initialize deck="+JSON.stringify(s));if(l===undefined){l=TFGameData.DECK_INDEX.MAIN}this.m_originalDeck=b.getDeckWithIndex(l);this.m_deckIndex=l;if(s===undefined||s===null){this.m_drawDeck=this.m_originalDeck}else{this.m_drawDeck=s;this.recomended=true}this.origStat=b.getDeckStats(this.m_originalDeck);this.drawStat=b.getDeckStats(this.m_drawDeck);console.log("DeckViewController.initialize m_drawDeck="+JSON.stringify(this.m_drawDeck));TFCardsManager.loadCardListDetails();this.createView(r);if(r===k){TFSceneDirector.shiftUIElementUp(this.getView().mainButtonGroup);TFSceneDirector.shiftUIElementUp(this.getView().autobotButtonGroup);TFSceneDirector.shiftUIElementUp(this.getView().decepticonButtonGroup);TFSceneDirector.stretchUIElementVertically(this.getView().backgroundImage,true)}this.activateTab(l,q);var n={displayed:true,animated:true,timeout:0,mode:"button_only"};var p={displayed:true,animated:true,timeout:0};this.setHudDisplayData(n,p);if(l==TFGameData.DECK_INDEX.AUTOBOTS||l==TFGameData.DECK_INDEX.DECEPTICONS){var r=this.getView();r.bottomFrame.setVisible(false);r.bottomRightFrame.setVisible(false);r.bottomLeftFrame.setVisible(false);r.bottomAltFrame.setVisible(true);r.bottomAltRightFrame.setVisible(true);r.bottomAltLeftFrame.setVisible(true);var o=r.editLabel.getPosition();o.setY(o.getY()-105);r.editLabel.setPosition(o)}this.drawCards();this.setDeckPowerLabels()},destroy:function($super){$super()},drawCards:function(){var t=1;var D=this.prepDeck(this.m_drawDeck);var w=this.prepDeck(this.m_originalDeck);var u=this.getView();var B=0;if(this.m_drawDeck.status1){B=this.m_drawDeck.status1.length}for(var z=0;z<B;z++){for(var v in this.m_drawDeck){if(v=="status1"||v=="status2"||v=="status3"){var A=w[v];var x=D[v];var E=A[z]["gear"].definitionId;var q=x[z]["gear"].definitionId;var o=(E!=q);var l=TFCardsManager.getCardDefinition(q);var C=l.rarity;var m=l.factionId;var F=l.name;var y=l.prefix;t=this.map[v][z];this.draw(x[z]["gear"],x[z]["pilot"],v,z,C,m,o,this.recomended,l.transformable,z==0,t);var r=TFCardsManager.getUnitPower(x[z]["gear"],x[z]["pilot"],v,z);var p=TFCardsManager.getUnitPower(A[z]["gear"],A[z]["pilot"],v,z);this.setLabels(r,p,v,F,y,this.recomended,t);var n=Localization.getString(F);if(y){n=Localization.getString(F)+" ("+Localization.getString(y)+")"}n=n.toUpperCase();u["card"+t+"Name"].setText(n)}}}if(this.recomended){u.confirm.setEnabled(true);u.cancel.setEnabled(true);u.confirm.setVisible(true);u.cancel.setVisible(true);u.recomend.setVisible(false);u.recomend.setEnabled(false);u.edit.setVisible(false)}else{u.confirm.setVisible(false);u.cancel.setVisible(false);u.confirm.setEnabled(false);u.cancel.setEnabled(false);u.recomend.setEnabled(true);u.recomend.setVisible(true)}},draw:function(y,t,u,n,B,o,v,p,s,r,m){var q=this.cardsPosSize["card"+m][2];var z=this.cardsPosSize["card"+m][3];var x=this.cardsPosSize["card"+m][0]-this.cardsPosSize["card"+m][2]/2;var w=this.cardsPosSize["card"+m][1]-this.cardsPosSize["card"+m][3]/2;var l=new a(this,undefined,q,z,{showSpinner:true},false,true,true);l.setPosition(x,w);this.getView().addChild(l);this._cardPanels[m]=l;if(this.cardsPosSize["card"+m][4]!=0){l.setDepth(this.cardsPosSize["card"+m][4])}if(s){l.setScale(0.97);l.setPosition(x+1,w);l.setDepth(this.cardsPosSize["card"+m][4]+20)}else{l.hideMainFrame()}l.cardImage.info.transformer=y.id;l.cardImage.info.weapon=t.id;l.cardImage.info.status=u;l.cardImage.info.commander=n;var A={showSpinner:true};A.glow=v&&p;A.id=y.id;if(r&&(u=="status2")){A.leader=true}l.updateWithCard(y.definitionId,A)},setLabels:function(w,x,s,o,u,q,l){console.log("DeckGridItemView.setHpAttack hpAttack = %s",JSON.stringify(w));var p=w.attack;var r=w.hp;var A=w.defense;var n=d.power(w);if(x&&x.attack){var m=d.power(x);if(m>0){this._totalOriginalPower+=m}}this._totalPower+=n;var y;var z;var t;if((w.attack)>(x.attack)){y=[0,1,0]}if((w.attack)<(x.attack)){y=[1,0,0]}if((w.hp)>(x.hp)){z=[0,1,0]}if((w.hp)<(x.hp)){z=[1,0,0]}if((w.defense)>(x.defense)){t=[0,1,0]}if((w.defense)<(x.defense)){t=[1,0,0]}if(l<=3){this.getView()["label"+l].setScale(1.3);this.getView()["label"+l].setPosition(this.getView()._definitions["label"+l].pos_x,this.getView()._definitions["label"+l].pos_y)}this.getView()["label"+l].attValue.setText(Localization.getString(p));this.getView()["label"+l].hpValue.setText(Localization.getString(r));this.getView()["label"+l].defValue.setText(Localization.getString(A));if(y){this.getView()["label"+l].attValue.setColor(y[0],y[1],y[2])}if(z){this.getView()["label"+l].hpValue.setColor(z[0],z[1],z[2])}if(t){this.getView()["label"+l].defValue.setColor(t[0],t[1],t[2])}var v=s.charAt(s.length-1);this.getView()["label"+l].attValue.setVisible(q||this._editMode);this.getView()["label"+l].hpValue.setVisible(q||this._editMode);this.getView()["label"+l].defValue.setVisible(q||this._editMode);this.getView()["label"+l].attLabel.setVisible(q||this._editMode);this.getView()["label"+l].hpLabel.setVisible(q||this._editMode);this.getView()["label"+l].defLabel.setVisible(q||this._editMode)},onCardSelected:function(n){var p=n.info;var r=p.transformer;var m=TFUserData.getCard(r);var o={};var q=TFCardsManager.getCardDefinition(m.definitionId);o.definitionId=m.definitionId;o.type=q.type;o.usercard=m;var l=__ngs.r_(__ngs._80).FullScreenCardController;TFSceneDirector._showDialog(new l(o,true))},onEditSelected:function(l){TFSceneDirector.showUnitEdit(l.info,this.m_deckIndex)},onEdit:function(o){var l=1;this._editMode=true;this.getView().edit.setVisible(false);this.getView().cancel.setVisible(true);this.getView().cancel.setEnabled(true);this.getView().editLabel.setVisible(true);var m=__ngs.r_(__ngs._4e).GLButton;this._shade=new m(undefined,"./Content/Images8x/misc/1pxwhite.png");this._shade.setFeedback(false);this._shade.setAnchor(new Core.Point(0.5,0.5));this._shade.setSize(new Core.Size(TFSceneDirector.getScreenWidth()/TFSceneDirector._workingArea.scaleX,TFSceneDirector.getScreenHeight()/TFSceneDirector._workingArea.scaleY));this._shade.setImageColor(0,0,0);this._shade.setDepth(20);this._shade.setAlpha(0.7);this._shade.setPosition(320,480);this.getView().addChild(this._shade);for(var n in this._cardPanels){this._cardPanels[n].setDepth(100);this._cardPanels[n].showMainFrame();this._cardPanels[n].setOnPressCallback(this.onEditSelected.bind(this));l++}},onShow:function(l){if(this._ignoreCommands===true){return}if(l.info.id==1){TFSceneDirector.showCardList(k,null,this.m_deckIndex)}else{TFSceneDirector.showCardList(DeckListView,null,this.m_deckIndex)}},onRecomend:function(m){if(this._ignoreCommands===true){return}this._ignoreCommands=true;TFSceneDirector.showCardList(this.m_currentView,b.getRecommendedDeckWithIndex(this.m_deckIndex),this.m_deckIndex,null,"crossfade",true);this._ignoreCommands=false;if(TFUserData.getTutorialState("team")=="interim"){var n={};n.title=Localization.getString("tutorial_team_title_02");n.text=Localization.getString("tutorial_team_text_02");var o=__ngs.r_(__ngs._81).TutorialBubbleView;var l=TFSceneDirector.showTutorialDialog(o,n);l.getView().bubble1.setPosition(-320,-100)}},onCancel:function(){if(this._editMode==true){this._editMode=false;this.getView().edit.setVisible(true);this.getView().cancel.setVisible(false);this.getView().cancel.setEnabled(false);this.getView().editLabel.setVisible(false);this._shade.destroy();for(var m in this._cardPanels){this._cardPanels[m].setOnPressCallback(this.onCardSelected.bind(this));this._cardPanels[m].setDepth(this.cardsPosSize["card"+m][4]);if(this._cardPanels[m].isTransformable()!=true){this._cardPanels[m].hideMainFrame()}else{this._cardPanels[m].setDepth(this.cardsPosSize["card"+m][4]+20)}}var l=1;while(l<=9){this.getView()["label"+l].attValue.setVisible(false);this.getView()["label"+l].hpValue.setVisible(false);this.getView()["label"+l].defValue.setVisible(false);this.getView()["label"+l].attLabel.setVisible(false);this.getView()["label"+l].hpLabel.setVisible(false);this.getView()["label"+l].defLabel.setVisible(false);l++}return}if(this._ignoreCommands===true){return}this._ignoreCommands=true;TFSceneDirector.showCardList(this.m_currentView,null,this.m_deckIndex,undefined,"crossfade");this._ignoreCommands=false},activateTab:function(m,u){var r=10;var n=[this.getView().mainButtonGroup,this.getView().autobotButtonGroup,this.getView().decepticonButtonGroup];console.log("deckIndex="+m+", prevDeckIndex="+u);var v;if(m==TFGameData.DECK_INDEX.MAIN){v=this.getView().mainButtonGroup}else{if(m==TFGameData.DECK_INDEX.AUTOBOTS){v=this.getView().autobotButtonGroup}else{if(m==TFGameData.DECK_INDEX.DECEPTICONS){v=this.getView().decepticonButtonGroup}}}var s;if(u==TFGameData.DECK_INDEX.MAIN){s=this.getView().mainButtonGroup}else{if(u==TFGameData.DECK_INDEX.AUTOBOTS){s=this.getView().autobotButtonGroup}else{if(u==TFGameData.DECK_INDEX.DECEPTICONS){s=this.getView().decepticonButtonGroup}}}v.button.setSelected(true);if(s){s.button.setSelected(false);s.setPosition(s.getPosition().getX(),s.getPosition().getY()+r);var t=s.getPosition().getY()+0;var p=this.createAnimationQueue();p.pushAnimation(400,g.Curve.Linear).tween(g.Interpolate.scalar(t,t-r),function(w,x){w.setPosition(w.getPosition().getX(),x)}.bind(this,s));setTimeout(p.start.bind(p),10);var q=v.getPosition().getY()+0;var l=this.createAnimationQueue();l.pushAnimation(400,g.Curve.Linear).tween(g.Interpolate.scalar(q,q+r),function(w,x){w.setPosition(w.getPosition().getX(),x)}.bind(this,v));setTimeout(l.start.bind(l),10)}else{v.setPosition(v.getPosition().getX(),v.getPosition().getY()+r)}for(var o=0;o<n.length;++o){if(n[o]!=v){n[o].button.setSelected(false)}}},onAutobotMiniDeck:function(l){if(this.m_deckIndex===TFGameData.DECK_INDEX.AUTOBOTS){return}if(this._ignoreCommands===true){return}this._ignoreCommands=true;TFSceneDirector.showCardList(null,null,TFGameData.DECK_INDEX.AUTOBOTS,this.m_deckIndex);this._ignoreCommands=false},onDecepticonMiniDeck:function(l){if(this.m_deckIndex===TFGameData.DECK_INDEX.DECEPTICONS){return}if(this._ignoreCommands===true){return}this._ignoreCommands=true;TFSceneDirector.showCardList(null,null,TFGameData.DECK_INDEX.DECEPTICONS,this.m_deckIndex);this._ignoreCommands=false},onMainDeck:function(l){if(this.m_deckIndex===TFGameData.DECK_INDEX.MAIN){return}if(this._ignoreCommands===true){return}this._ignoreCommands=true;TFSceneDirector.showCardList(null,null,TFGameData.DECK_INDEX.MAIN,this.m_deckIndex);this._ignoreCommands=false},onConfirm:function(){if(this._ignoreCommands===true){return}this._ignoreCommands=true;var m={hp:0,attack:0,defense:0};for(var l in m){m[l]=this.drawStat[l]-this.origStat[l]}TFAnalytics.reportGameEvent("DECKRECOMMEND",{totalhpchange:m.hp,totalattackchange:m.attack,totaldefensechange:m.defense});b.setDeckWithIndex(b.getRecommendedDeckWithIndex(this.m_deckIndex),this.m_deckIndex,function(){TFSceneDirector.showCardList(null,null,this.m_deckIndex,undefined,"crossfade");this._ignoreCommands=false;if(TFUserData.getTutorialState("team")=="interim"){var o={};o.title=Localization.getString("tutorial_team_title_03");o.text=Localization.getString("tutorial_team_text_03");var p=__ngs.r_(__ngs._81).TutorialBubbleView;var n=TFSceneDirector.showTutorialDialog(p,o);n.getView().bubble1.setPosition(-320,-100);TFUserData.setNewTutorialState("team","end")}}.bind(this))},prepDeck:function(n){var m={};for(var p in n){var l=n[p];m[p]=[];for(var o=0;o<l.length;o++){m[p].push({gear:TFUserData.getCard(n[p][o]["gear"]),pilot:TFUserData.getCard(n[p][o]["pilot"])})}}return m},setDeckPowerLabels:function(){var l=null;var m=this.getView();if(this._totalPower>this._totalOriginalPower){l=[0,1,0]}if(this._totalPower<this._totalOriginalPower){l=[1,0,0]}if(l){m.stat2.setColor(l[0],l[1],l[2])}m.stat2.setText(this._totalPower.toFixed(0));if(this.m_deckIndex!=TFGameData.DECK_INDEX.MAIN){if(this.m_deckIndex===TFGameData.DECK_INDEX.DECEPTICONS){this.getView().factionText.setText(Localization.getString("ui_teamdeck_decepticon"))}this.getView().factionText.setVisible(true)}},afterViewDisplayed:function(){if(TFUserData.getTutorialState("team")=="start"){var m={};m.title=Localization.getString("tutorial_team_title_01");m.text=Localization.getString("tutorial_team_text_01");var n=__ngs.r_(__ngs._81).TutorialBubbleView;var l=TFSceneDirector.showTutorialDialog(n,m);l.getView().bubble1.setPosition(-320,-100);TFUserData.setNewTutorialState("team","interim")}}})}};__ngs._4p={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var d=__ngs.r_(__ngs._7p).View;var b=__ngs.r_(__ngs._8j).DeckGridViewDefinition;a.DeckGridView=d.subclass({classname:"DeckGridView",initialize:function($super,e){$super(e,b)},destroy:function($super){$super()}})}};__ngs._4q={_c:null,_d:function(){var e={exports:{}};var d=e.exports;this._c=e;var b=__ngs.r_(__ngs._n).ViewController;var a=__ngs.r_(__ngs._8k).UnitDetailView;var c=__ngs.r_(__ngs._63).TFFormulas;d.UnitDetailViewController=b.subclass({classname:"UnitDetailViewController",initialize:function($super,l,g){$super();this.createView(a);this.draw(l);this._unit=l;this._deckIndex=g;var k={displayed:true,animated:true,timeout:300,mode:"button_only"};var h={displayed:false,animated:true,timeout:300};this.setHudDisplayData(k,h)},destroy:function($super){$super()},draw:function(n){var g=this.getView();console.log("unit.transformer="+n.transformer+" "+JSON.stringify(n.transformer));var l=TFUserData.getCard(n.transformer);this._card=l;console.log("unit.weapon="+n.weapon+" "+JSON.stringify(n.weapon));var k=TFUserData.getCard(n.weapon);console.log("******* UNIT ****** "+JSON.stringify(l)+" "+JSON.stringify(k));console.log(JSON.stringify(TFCardsManager.getCardDefinition(l.definitionId)));g.draw(l,k,n.status,n.commander);var m=TFCardsManager.getCardStatus(l);var o=TFCardsManager.getWeaponActivatedStatus(l,k);g.setData(m,o);var p=TFCardsManager.getUnitPower(l,k,n.status,n.commander);g.setHpAttack(p);var h=TFCardsManager.getActivatedSkillsFromUnit(l.definitionId,k.definitionId);h.maxedOut=TFCardsManager.isMaxedOut(l);g.setSkillDecals(h,l);g.setLevel(TFCardsManager.getCardLevel(l));g.setMaxedOut(TFCardsManager.isMaxedOut(l));g._tfPanel.cardImage.info.id=n.transformer;g._wpPanel.cardImage.info.id=n.weapon;this._originalCallBack=TFSceneDirector._topHudViewController._behaviourCallback},afterViewDisplayed:function(){TFSceneDirector._topHudViewController.getView().smButtonPanel.button.setOnPressCallback(this.onBackSelected.bind(this))},onEdit:function(){TFSceneDirector.showUnitEdit(this._unit,this._deckIndex)},onBackSelected:function(){TFSceneDirector.showCardList(undefined,undefined,this._deckIndex);TFSceneDirector._topHudViewController.getView().smButtonPanel.button.setOnPressCallback(this._originalCallBack)},onCardSelected:function(k){var p=k.info.id;var h=TFUserData.getCard(p);var l={};var o=TFCardsManager.getCardDefinition(h.definitionId);l.definitionId=h.definitionId;l.type=o.type;l.usercard=h;var n;if(o.type==TFGameData.CARD_TYPE.TRANSFORMER){var g=__ngs.r_(__ngs._80).FullScreenCardController;n=TFSceneDirector._showDialog(new g(l,true))}else{var m=__ngs.r_(__ngs._8a).FullScreenWeaponCardController;n=TFSceneDirector._showDialog(new m(l,true))}},onBonusButton:function(){TFSceneDirector.showUnitBonus(this._unit,this._deckIndex,this)}})}};__ngs._4r={_c:null,_d:function(){var g={exports:{}};var e=g.exports;this._c=g;var c=__ngs.r_(__ngs._n).ViewController;var h=__ngs.r_(__ngs._8l).UnitEditView;var d=__ngs.r_(__ngs._63).TFFormulas;var b=__ngs.r_(__ngs._49).TFDeckManager;var k=__ngs.r_(__ngs._s).TFUtils;var a=__ngs.r_(__ngs._89).CardThumbnailView;e.UnitEditViewController=c.subclass({classname:"UnitEditViewController",tempDeck:null,tempStat:null,tempRank:null,tempClass:null,cardsPerPage:4,cardsToSelectPageList:[],currentPage:null,currentData:null,newData:null,cardsInDecks:null,deckIndex:null,initialize:function($super,p,l){$super();this.createView(h);this.draw(p);this._unit=p;this._originalUnit=JSON.parse(JSON.stringify(p));if(!l){this.deckIndex=TFGameData.DECK_INDEX.MAIN}else{this.deckIndex=l}this.setTransformersCardListToSelect();if(TFUserData.tempUnit&&TFUserData.tempDeck){this._unit=TFUserData.tempUnit;this.tempDeck=TFUserData.tempDeck}else{this.tempDeck=JSON.parse(JSON.stringify(b.getDeckWithIndex(this.deckIndex)))}var m=p.status;var q=p.commander;if(m=="status1"){this.tempStat=TFGameData.STAT_TYPE.MELEE}else{if(m=="status2"){this.tempStat=TFGameData.STAT_TYPE.RANGE}else{this.tempStat=TFGameData.STAT_TYPE.SPEED}}if(q===0){this.tempRank=TFGameData.DECK_RANK.COMMANDER}else{if(q==1){this.tempRank=TFGameData.DECK_RANK.LEFT_WING}else{this.tempRank=TFGameData.DECK_RANK.RIGHT_WING}}this.getAndSetOriginalValues(p);if(TFUserData.tempUnit&&TFUserData.tempDeck){this.calculateAdvantages(this._unit);this.draw(this._unit)}var o={displayed:true,animated:true,timeout:1000,mode:"button_only"};var n={displayed:false,animated:true,timeout:1000};this.setHudDisplayData(o,n);this._originalCallBack=TFSceneDirector._topHudViewController._behaviourCallback},afterViewDisplayed:function(){TFSceneDirector._topHudViewController.getView().smButtonPanel.button.setOnPressCallback(this.onBackSelected.bind(this))},destroy:function($super){$super()},draw:function(q){var l=this.getView();var o=TFUserData.getCard(q.transformer);this._card=o;var n=TFUserData.getCard(q.weapon);l.draw(o,n,q.status,q.commander);var p=TFCardsManager.getCardStatus(o);var r=TFCardsManager.getWeaponActivatedStatus(o,n);l.setData(p,r);var s=TFCardsManager.getUnitPower(o,n,q.status,q.commander);l.setHpAttack(s);var m=TFCardsManager.getActivatedSkillsFromUnit(o.definitionId,n.definitionId);l.setSkillDecals(m,o);l.setLevel(TFCardsManager.getCardLevel(o));l.setMaxedOut(TFCardsManager.isMaxedOut(o));l._tfCardPanel.cardImage.info.id=TFGameData.CARD_TYPE.TRANSFORMER;l._wpCardPanel.cardImage.info.id=TFGameData.CARD_TYPE.WEAPON;if(this.tempClass==TFGameData.CARD_TYPE.TRANSFORMER){l._tfCardPanel.setGlow(true);l._wpCardPanel.setGlow(false)}else{l._tfCardPanel.setGlow(false);l._wpCardPanel.setGlow(true)}if(this.newData!==null){l.paintValues(this.newData)}},onBackSelected:function(){TFUserData.tempUnit=null;TFUserData.tempDeck=null;TFSceneDirector.showUnitDetails(this._originalUnit,this.deckIndex);TFSceneDirector._topHudViewController.getView().smButtonPanel.button.setOnPressCallback(this._originalCallBack)},onCardSelected:function(p){if(p.info.buttonType=="new"){this.onNewCardSelected(p);return}this._cardSelected=p;var n={};var o=TFCardsManager.getCardDefinition(p);var m=d.getStatusForLevel(o,1);n.asset=k.getCardImagePath(p);n.stats=m;n.stats.status1="MELEE "+n.stats.status1;n.stats.status2="RANGED "+n.stats.status2;n.stats.status3="SPECIAL "+n.stats.status3;var l=__ngs.r_(__ngs._80).FullScreenCardController;TFSceneDirector._showDialog(new l(n,true));TFSceneDirector._dialogViewController.getView().stat1.setPosition(-200,390);TFSceneDirector._dialogViewController.getView().stat2.setPosition(0,390);TFSceneDirector._dialogViewController.getView().stat3.setPosition(200,390);TFSceneDirector._dialogViewController.getView().actionButton.setOnPressCallback(this.onActionSelected.bind(this));TFSceneDirector._dialogViewController.getView().actionButton.info.id=p;TFSceneDirector._dialogViewController.getView().actionButton.setVisible(true)},setBottomHudView:function(l){l.updateHudWithView(null)},onTransformerSelected:function(){this.tempClass=TFGameData.CARD_TYPE.TRANSFORMER;this.setTransformersCardListToSelect()},onWeaponSelected:function(){this.tempClass=TFGameData.CARD_TYPE.WEAPON;this.setWeaponsCardListToSelect()},onNewCardSelected:function(m){var n=m.info.cardId;var l=this._unit;if(this.tempClass==TFGameData.CARD_TYPE.TRANSFORMER){l.transformer=n}else{l.weapon=n}this.tempDeck=TFCardsManager.changeCardInDeck(this.tempDeck,n,this.tempClass,this.tempStat,this.tempRank);this.calculateAdvantages(l);this.draw(l)},setTransformersCardListToSelect:function(){this.getView()._tfCardPanel.setGlow(true);this.getView()._wpCardPanel.setGlow(false);this.tempClass=TFGameData.CARD_TYPE.TRANSFORMER;if(this.deckIndex==TFGameData.DECK_INDEX.AUTOBOTS){filter={factionId:TFGameData.FACTION.AUTOBOTS,type:TFGameData.CARD_TYPE.TRANSFORMER}}else{if(this.deckIndex==TFGameData.DECK_INDEX.DECEPTICONS){filter={factionId:TFGameData.FACTION.DECEPTICONS,type:TFGameData.CARD_TYPE.TRANSFORMER}}else{filter={type:TFGameData.CARD_TYPE.TRANSFORMER}}}var l=TFCardsManager.getFilteredPlayerCards(filter);l.sort(this.cardCompare);this._setCardListSelect(l)},setWeaponsCardListToSelect:function(){this.getView()._tfCardPanel.setGlow(false);this.getView()._wpCardPanel.setGlow(true);this.tempClass=TFGameData.CARD_TYPE.WEAPON;var l;if(this.deckIndex==TFGameData.DECK_INDEX.AUTOBOTS){l={factionId:TFGameData.FACTION.AUTOBOTS,type:TFGameData.CARD_TYPE.WEAPON}}else{if(this.deckIndex==TFGameData.DECK_INDEX.DECEPTICONS){l={factionId:TFGameData.FACTION.DECEPTICONS,type:TFGameData.CARD_TYPE.WEAPON}}else{l={type:TFGameData.CARD_TYPE.WEAPON}}}var m=TFCardsManager.getFilteredPlayerCards(l);m.sort(this.cardCompare);this._setCardListSelect(m)},cardCompare:function(n,l){var m=TFCardsManager.getCardStatus(n);var o=TFCardsManager.getCardStatus(l);return(o.status1+o.status2+o.status3)-(m.status1+m.status2+m.status3)},_setCardListSelect:function(q){this.cardsToSelectPageList=[];var r=Math.ceil(q.length/this.cardsPerPage);for(var m=0;m<r;m++){var n=this.cardsPerPage*m;var l=q.length<this.cardsPerPage*(m+1)?q.length-1:this.cardsPerPage*(m+1)-1;var o=[];for(var p=n;p<=l;p++){o.push(q[p].id)}this.cardsToSelectPageList.push(o)}this.currentPage=0;this._assignCards()},applyChanges:function(){var o=b.getDeckStats(b.getDeck(this.deckIndex));var l=b.getDeckStats(this.tempDeck);if(this.deckIndex==TFGameData.DECK_INDEX.MAIN){b.setMainDeck(this.tempDeck)}else{if(this.deckIndex==TFGameData.DECK_INDEX.AUTOBOTS){b.setAutobotsDeck(this.tempDeck)}else{b.setDecepticonsDeck(this.tempDeck)}}var n={hp:0,attack:0,defense:0};for(var m in n){n[m]=l[m]-o[m]}TFAnalytics.reportGameEvent("DECKUSEREDIT",{totalhpchange:n.hp,totalattackchange:n.attack,totaldefensechange:n.defense});TFUserData.tempUnit=null;TFUserData.tempDeck=null;TFSceneDirector.showUnitDetails(this._unit,this.deckIndex)},onLeftSelected:function(){if(this.currentPage>0){this.currentPage--;this._assignCards()}},onRightSelected:function(){if(this.currentPage<this.cardsToSelectPageList.length-1){this.currentPage++;this._assignCards()}},_assignCards:function(){var r=this.getView();var s=this.cardsPerPage-this.cardsToSelectPageList[this.currentPage].length;var q;var o=(this.tempClass==TFGameData.CARD_TYPE.TRANSFORMER)?this.getView()._definitions.transformerPanel.info.card_w:this.getView()._definitions.weaponPanel.info.card_w;var t=(this.tempClass==TFGameData.CARD_TYPE.TRANSFORMER)?this.getView()._definitions.transformerPanel.info.card_h:this.getView()._definitions.weaponPanel.info.card_h;for(q=0;q<this.cardsToSelectPageList[this.currentPage].length;q++){var n=TFUserData.getCard(this.cardsToSelectPageList[this.currentPage][q]);var p=n.definitionId;var u={unit:n,anchor:[0.5,0.5],showSpinner:true};if(this.tempClass==TFGameData.CARD_TYPE.WEAPON){u.weapon=true}if(b.isInMainDeck(n.id)){u.mainDecal=true}if(b.isInAutobotDeck(n.id)){u.autobotDecal=true}else{if(b.isInDecepticonDeck(n.id)){u.decepticonDecal=true}}if(r["card"+(q+1)]._thumbnailPanel){r["card"+(q+1)].removeChild(r["card"+(q+1)]._thumbnailPanel);r["card"+(q+1)]._thumbnailPanel=undefined}var m=new a(this,p,o,t,u);r["card"+(q+1)]._thumbnailPanel=m;r["card"+(q+1)].addChild(r["card"+(q+1)]._thumbnailPanel);var n=TFCardsManager.getCardDefinition(p);var l=Localization.getString(n.name).toUpperCase();if(n.prefix){l=l+" ("+Localization.getString(n.prefix).toUpperCase()+")"}r["card"+(q+1)].name.setText(l);r["card"+(q+1)].name.setOverflowMode(GL2.Text.OverflowMode.Multiline);m.cardImage.info.cardId=this.cardsToSelectPageList[this.currentPage][q];m.setVisible(true);m.cardImage.setEnabled(true);m.cardImage.info.buttonType="new"}r.leftButton.setEnabled((this.currentPage==0)?false:true);r.rightButton.setEnabled((this.currentPage==(this.cardsToSelectPageList.length-1))?false:true)},getAndSetOriginalValues:function(o){this.currentData={TRANSFORMER:null,WEAPON:null,HPATTACK:null};var m=TFUserData.getCard(o.transformer);var l=TFUserData.getCard(o.weapon);var n=TFCardsManager.getCardStatus(m);var p=TFCardsManager.getWeaponActivatedStatus(m,l);var q=TFCardsManager.getUnitPower(m,l,o.status,o.commander);this.currentData.TRANSFORMER=n;this.currentData.WEAPON=p;this.currentData.HPATTACK=q},calculateAdvantages:function(r){this.newData={TRANSFORMER:null,WEAPON:null,HPATTACK:null};var n=TFUserData.getCard(r.transformer);var q=TFUserData.getCard(r.weapon);var m=TFCardsManager.getCardStatus(n);var p=TFCardsManager.getWeaponActivatedStatus(n,q);var o=TFCardsManager.getUnitPower(n,q,r.status,r.commander);this.newData.TRANSFORMER=m;this.newData.WEAPON=p;this.newData.HPATTACK=o;var u=null;var t=null;var l=null;for(u in this.newData.TRANSFORMER){t=this.currentData.TRANSFORMER[u];l=this.newData.TRANSFORMER[u];if(l>t){this.newData.TRANSFORMER[u]="U"}else{if(l<t){this.newData.TRANSFORMER[u]="L"}else{this.newData.TRANSFORMER[u]="E"}}}for(u in this.newData.WEAPON){t=Math.floor(this.currentData.WEAPON[u]*100);l=Math.floor(this.newData.WEAPON[u]*100);if(l>t){this.newData.WEAPON[u]="U"}else{if(l<t){this.newData.WEAPON[u]="L"}else{this.newData.WEAPON[u]="E"}}}for(u in this.newData.HPATTACK){t=this.currentData.HPATTACK[u];l=this.newData.HPATTACK[u];if(l>t){this.newData.HPATTACK[u]="U"}else{if(l<t){this.newData.HPATTACK[u]="L"}else{this.newData.HPATTACK[u]="E"}}}},onBonusButton:function(){TFSceneDirector.showUnitBonus(this._originalUnit,this.deckIndex,this);TFUserData.tempUnit=this._unit;TFUserData.tempDeck=this.tempDeck}})}};__ngs._4s={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var b=__ngs.r_(__ngs._n).ViewController;var a=__ngs.r_(__ngs._8m).UnitBonusView;c.UnitBonusViewController=b.subclass({classname:"UnitBonusViewController",HIDE:0.3,initialize:function($super,l,e,h){$super();this.deckIndex=e;this._unit=l;this.createView(a);this.draw(l);this._callController=h;var k={displayed:true,animated:true,timeout:300,mode:"button_only"};var g={displayed:false,animated:true,timeout:0};this.setHudDisplayData(k,g)},destroy:function($super){$super()},draw:function(n){var e=this.getView();var m=TFUserData.getCard(n.transformer);var l=TFUserData.getCard(n.weapon);var p=TFCardsManager.getBonusFromUnit(m.definitionId,l.definitionId);var h=TFCardsManager.getActivatedSkillsFromUnit(m.definitionId,l.definitionId);(p.maxLevel)?(this.getView().maxLevelDesc.setText((p.maxLevel*100).toFixed(1)+this.getView().maxLevelDesc.getText())):(this.unavailableBonus(this.getView().maxLevelDesc,this.getView().maxLevel));(p.changeForm)?this.getView().changeFormDesc.setText((p.changeForm*100).toFixed(1)+this.getView().changeFormDesc.getText()):(this.unavailableBonus(this.getView().changeFormDesc,this.getView().changeForm));(p.faction)?this.getView().factionDesc.setText((p.faction*100).toFixed(1)+"% "+Localization.getString("ui_bonus_all_stats")):(this.unavailableBonus(this.getView().factionDesc,this.getView().faction));(p._class)?this.getView().classBDesc.setText((p._class*100).toFixed(1)+"% "+Localization.getString("ui_bonus_all_stats")):(this.unavailableBonus(this.getView().classBDesc,this.getView().classB));(p.speciality)?this.getView().specialDesc.setText((p.speciality*100).toFixed(1)+"% "+Localization.getString("ui_bonus_all_stats")):(this.unavailableBonus(this.getView().specialDesc,this.getView().special));(p.character)?this.getView().characDesc.setText((p.character*100).toFixed(1)+"% "+Localization.getString("ui_bonus_all_stats")):(this.unavailableBonus(this.getView().characDesc,this.getView().charac));var o=this.getView().initialDesc.getText();this.unavailableBonus(this.getView().initialDesc,this.getView().initial);this.unavailableBonus(this.getView().battleDesc,this.getView().battle);for(var g in p.abilities){if(p.abilities[g].type=="initial"){this.getView().initialDesc.setText((p.abilities[g].value*100).toFixed(1)+o+" "+p.abilities[g].name);this.getView().initialDesc.setAlpha(1);this.getView().initial.setAlpha(1)}else{if(p.abilities[g].type=="battle"){this.getView().battleDesc.setText((p.abilities[g].value*100).toFixed(1)+o+" "+p.abilities[g].name);this.getView().battleDesc.setAlpha(1);this.getView().battle.setAlpha(1)}}}this.getView().setSkillDecals(h,m);this._originalCallBack=TFSceneDirector._topHudViewController._behaviourCallback},afterViewDisplayed:function(){TFSceneDirector._topHudViewController.getView().smButtonPanel.button.setOnPressCallback(this.onBackSelected.bind(this))},onBackSelected:function(){if(this._callController.classname=="UnitEditViewController"){TFSceneDirector.showUnitEdit(this._unit,this.deckIndex)}else{if(this._callController.classname=="UnitDetailViewController"){TFSceneDirector.showUnitDetails(this._unit,this.deckIndex)}}TFSceneDirector._topHudViewController.getView().smButtonPanel.button.setOnPressCallback(this._originalCallBack)},unavailableBonus:function(e,g){e.setText(Localization.getString("ui_notavailable"));e.setAlpha(this.HIDE);g.setAlpha(this.HIDE)}})}};__ngs._4t={_c:null,_d:function(){var b={exports:{}};var e=b.exports;this._c=b;var a=__ngs.r_(__ngs._n).ViewController;var c=__ngs.r_(__ngs._8n).MissionExploreView;var d=__ngs.r_(__ngs._45).AnimationQueue;var h=__ngs.r_(__ngs._s).TFUtils;var k=__ngs.r_(__ngs._48).TFSoundManager;var g=__ngs.r_(__ngs._3y).PopUpController;var m=__ngs.r_(__ngs._x).TFManifestManager;var n=__ngs.r_(__ngs._4a).TFImageManager;var l=__ngs.r_(__ngs._4c).TFUpdateEmitter;e.MissionExploreViewController=a.subclass({classname:"MissionExploreViewController",MUSIC_KEY_MINIGAME:"MISSION_MINIGAME_BACK",MUSIC_KEY_LEVEL_UP:"LEVEL_UP",MUSIC_KEY_END_AUTOBOTS:"COMPLETE_MISION_AUTOBOT",MUSIC_KEY_END_DECEPTICONS:"COMPLETE_MISION_DECEPTICON",SOUND_KEY_FLY_IN:"Mission_Fly_In_01",SOUND_KEY_FLY_OUT:"Mission_Fly_Out_01",SOUND_KEY_IMPACT_TARGET:["Mission_Impact_01","Mission_Impact_02","Mission_Impact_03","Mission_Impact_04","Mission_Impact_05"],SOUND_KEY_MISSILE_TAPPED:["Missile_Tapped_Good","Missile_Tapped_Great","Missile_Tapped_Perfect"],SOUND_KEY_MISSILE_FIRE:"Mission_Missile_Fire_01",SOUND_KEY_MISSILE_FLAYING:"Mission_Missile_Flying",SOUND_KEY_MISSILE_PLAYER_FIRE:"Mission_Player_Fire_01",SOUND_KEY_REWARD_POPUP:"Misisons_Reward_PopUp_02",SOUND_KEY_MISSILE_LOCK:"Mission_Missile_Lock_01",SOUND_KEY_EVENT_BOSS:"RaidBoss_Discovered_01",_blocker:false,initialize:function($super,q){TFSceneDirector.showDownloadSpinner("Backgrounds download in MissionExploreViewController",Localization.getString("ui_downloadspinner_mission"));TFSceneDirector.setDownloadSpinnerBackground("Content/Images8x/UI/BG/bg_mission_planet.jpg",true);$super();this.createView(c);k.playMusic(this.MUSIC_KEY_MINIGAME,true);this._worldId=TFGameData.getWorldIdForMission(q);this._stageId=TFGameData.getStageIdForMission(q);this._missionId=q;TFUserData._currentMission=this._missionId;this._missionData=TFGameData.getMission(q);this._firstTimer=false;var r=__ngs.r_(__ngs._8e).FullScreenMissionController;var A=false;var z=TFUserData.missionsState;var y=null;for(missionIndex in z){y=z[missionIndex].missionId;if(y==this._missionId){A=true}}if(!A&&this._missionData.introSlideShow){this._firstTimer=true;var w=new Object();w.image=this._missionData.campaignMissionIntroCharacter;w.message=this._missionData.campaignMissionIntroDialog;w.cb=function(){};TFSceneDirector._showDialog(new r(w,true))}this.m_missionCompleted=false;var p=TFUserData.getRoundsCompletedForMission(q)/TFGameData.getTotalRoundsForMission(q);if(p>=1){this.m_missionCompleted=true}if(this._missionData){this._miniGameData=this._missionData.minigame}this.getView().missionName.setText(Localization.getString(this._missionData.missionName));this.getView().backGround.setPosition(Math.random()*-2000+this.getView().backGround.getPosition().getX(),this.getView().backGround.getPosition().getY());this.getView().backGround2.setPosition(Math.random()*-4000+this.getView().backGround.getPosition().getX(),this.getView().backGround.getPosition().getY());this._updateScreenInfo();if(TFGameData._devConfigJSON&&TFGameData._devConfigJSON.disableMiniGame){this._minigameflag=false}else{this._minigameflag=true}var t={displayed:true,animated:true,timeout:1000,mode:"button_only"};var x={displayed:false,animated:false,timeout:0};this.setHudDisplayData(t,x);TFSceneDirector.shiftUIElementUp(this.getView().dropshadow);TFSceneDirector.shiftUIElementUp(this.getView().numberContainerLeft);TFSceneDirector.shiftUIElementUp(this.getView().numberContainerright);TFSceneDirector.shiftUIElementUp(this.getView().hudTop);TFSceneDirector.shiftUIElementUp(this.getView().hudTopLineLeft);TFSceneDirector.shiftUIElementUp(this.getView().hudTopLineLeftEnd);TFSceneDirector.shiftUIElementUp(this.getView().hudTopLineRight);TFSceneDirector.shiftUIElementUp(this.getView().hudTopLineRightEnd);TFSceneDirector.shiftUIElementUp(this.getView().bonus);TFSceneDirector.shiftUIElementUp(this.getView().missionProgress);TFSceneDirector.shiftUIElementUp(this.getView().missionProgressNumber);TFSceneDirector.shiftUIElementUp(this.getView().missionProgressPercent);TFSceneDirector.shiftUIElementUp(this.getView().missionName);TFSceneDirector.shiftUIElementUp(this.getView().backGround);TFSceneDirector.shiftUIElementUp(this.getView().backGround2);TFSceneDirector.shiftUIElementDown(this.getView().hudBottom);TFSceneDirector.shiftUIElementDown(this.getView().hudBottomLine);TFSceneDirector.shiftUIElementDown(this.getView().bothud);TFSceneDirector.shiftUIElementDown(this.getView().bars);var u=__ngs.r_(__ngs._62).TFParticleManager;u.instantiate();this.exhaust1=u.createEmitter("exhaust");this.exhaust1.play();this.exhaust1Node=new GL2.Node();this.exhaust1Node.setDepth(-1);this.exhaust1Node.addChild(this.exhaust1);this.getView().mainCard.addChild(this.exhaust1Node);this.exhaust2=u.createEmitter("exhaust");this.exhaust2.play();this.exhaust2Node=new GL2.Node();this.exhaust2Node.setDepth(-1);this.exhaust2Node.addChild(this.exhaust2);this.getView().mainCard.addChild(this.exhaust2Node);this.emitters=[];var o;for(var v=0;v<4;v++){o=u.createEmitter("tf_smoke");this.getView()["scope"+(v+1)].addChild(o);this.getView()["scope"+(v+1)].smoke=o;this.emitters.push(o);o=u.createEmitter("tf_explosion");this.getView()["scope"+(v+1)].addChild(o);this.getView()["scope"+(v+1)].explosion=o;this.emitters.push(o);o=u.createEmitter("tf_contrail");o.setDepth(-1111);this.getView()["scope"+(v+1)].addChild(o);this.getView()["scope"+(v+1)].contrail=o;this.emitters.push(o)}if(TFGameData.getWorld(this._worldId).faction==TFGameData.FACTION.AUTOBOTSTRING){h.changeImageOnSprite(this.getView().mainCard,"Content/Images8x/UI/02_mission/exploration_ramjet.png");this.exhaust1Node.setPosition(-35,95);this.exhaust2Node.setPosition(70,100)}else{if(TFGameData.getWorld(this._worldId).faction==TFGameData.FACTION.DECEPTICONSTRING){h.changeImageOnSprite(this.getView().mainCard,"Content/Images8x/UI/02_mission/exploration_swoop.png");this.exhaust1Node.setPosition(-20,65);this.exhaust2Node.setPosition(10,100)}}this.backgroundsDownloaded=0;m.downloadAsset(n.getCorrectImagePath("Content/Images8x/missions/bg/"+this._missionData.missionImages.background),function(){});m.downloadAsset(n.getCorrectImagePath("Content/Images8x/missions/bg/"+this._missionData.missionImages.foreground),function(){});m.downloadAsset(n.getCorrectImagePath("Content/Images8x/missions/bg/"+this._missionData.missionImages.background),function(){});m.downloadAsset(n.getCorrectImagePath("Content/Images8x/missions/bg/"+this._missionData.missionImages.foreground),function(){});h.setRemoteImageOnSprite(this.getView().backGround,"Content/Images8x/missions/bg/"+this._missionData.missionImages.background,this.backgroundDownloadDone.bind(this));h.setRemoteImageOnSprite(this.getView().backGround2,"Content/Images8x/missions/bg/"+this._missionData.missionImages.foreground,this.backgroundDownloadDone.bind(this));this._bgAnimationDuration=1500;this._missileGuyAnimationDuration=500;this._botHudAnimationDuration=300;this._progNumAnimationDuration=700;this._misslesFiredThisRound=0;TFUserData.eventBossEncountered=undefined;var s=this._updateEnergyBar.bind(this);l.addElements("MissionExploreView",1000,s);setTimeout(this._checkLevelUp.bind(this),600);this.getView().bonus.bonusCurrency.setText(TFUserData.currency)},backgroundDownloadDone:function(){this.backgroundsDownloaded++;if(this.backgroundsDownloaded==2){TFSceneDirector.destroyDownloadSpinner()}},destroy:function($super){if(this.exhaust1){this.exhaust1.destroy()}if(this.exhaust2){this.exhaust2.destroy()}for(var o in this.emitters){if(this.emitters[o]){this.emitters[o].destroy()}}l.releaseElements("MissionExploreView");this._blocker=false;$super();TFSceneDirector.enableBack()},_resetScreen:function(){console.log("MissionExploreViewController > _resetScreen");if(this.getView()){this.getView().missionName.setVisible(true)}console.log("Displaying top hud");this._showBotHud();this._showTopHud();TFSceneDirector.enableBack()},_hideTopHud:function(){TFSceneDirector.hideTopHud(false)},_showTopHud:function(){TFSceneDirector.showTopHud(true,"button_only")},_hideBotHud:function(){if(!this.getView()){return}var o=this.createAnimationQueue();o.pushAnimation(this._botHudAnimationDuration,d.Curve.EaseIn);o.tween(d.Interpolate.scalar(0,550),function(p){if(this){this.setPosition(this.getPosition().getX(),p);TFSceneDirector.shiftUIElementDown(this)}}.bind(this.getView().bothud));o.start()},_showBotHud:function(){if(!this.getView()){return}var o=this.createAnimationQueue();o.pushAnimation(this._botHudAnimationDuration,d.Curve.EaseOut);o.tween(d.Interpolate.scalar(550,0),function(p){if(this){this.setPosition(this.getPosition().getX(),p);TFSceneDirector.shiftUIElementDown(this)}}.bind(this.getView().bothud));o.start()},_updateScreenInfo:function(){this._updateLevelProgressBar();this._updateMissionBar();this._updateEnergyBar()},_updateMissionBar:function(p){var o=TFUserData.getRoundsCompletedForMission(this._missionId)/TFGameData.getTotalRoundsForMission(this._missionId);o=o>1?1:o;if(this._currentProgress==undefined){this._currentProgress=o;this.getView().missionProgressNumber.setText(Math.floor(o*100)+"")}else{this.createAnimationQueue().pushAnimation(this._progNumAnimationDuration,d.Curve.Linear).tween(d.Interpolate.scalar(this._currentProgress,o),function(q){if(this){this.setText(Math.floor(q*100)+"")}}.bind(this.getView().missionProgressNumber)).pushCallback(function(){this._currentProgress=o}.bind(this)).start()}},_updateEnergyBar:function(){if(this.getView().bars){this.getView().bars.energyBar.setProgress(TFUserData.getExploreEnergy()/TFUserData.getMaxExploreEnergy()*100)}},_updateLevelProgressBar:function(){if(this.getView().bars){this.getView().bars.xpBar.setProgress(TFUserData.getLevelProgress()*100)}},onBack:function(){if(!this._blocker){this._blocker=true;TFSceneDirector.showMissionSelect(this._worldId,this._stageId)}},onMissionExplore:function(){if(TFUserData.getTutorialState("missionstage1")=="start"){TFAnalytics.reportGameEvent("MISSIONTUTORIAL",{Step:"08_MissionExploreClick"})}if(!Server.isConnectionAvailable()){h.showErrorMessages(Localization.getString("ui_pleasecheckconnection"));return}if(!this._blocker){this._blocker=true;TFSceneDirector.disableBack("Back disable during mission minigame.");if(TFUserData.getTutorialState("missionstage1")=="start"){if(this.getView()&&this._arrow){this.resetRunningAnimations();this.getView().removeChild(this._arrow);this._arrow.destroy();this._arrow=undefined}}if(this._firstTimer===true){TFAnalytics.reportGameEvent("MISSIONENTER",{missionid:TFGameData.getFuzzyMisionId(this._missionId)});this._firstTimer=false}TFAnalytics.reportGameEvent("MISSIONENTER",{missionid:TFGameData.getFuzzyMisionId(this._missionId),missionprogress:TFUserData.getMissionProgressFuzzy(this._missionId)});TFUserData.setExploreEnergy(TFUserData.getExploreEnergy()-this._missionData.energyPerRound);this._updateEnergyBar();k.playMusic(this.MUSIC_KEY_MINIGAME);this._hideBotHud();this._hideTopHud();this._serverReturnedFlag=false;this._serverData=undefined;Server.completeRound(this._missionId,this.completeRoundCallback.bind(this))}},_startBackgroundAnimation:function(){var r=100*(Math.random()>0.5?(Math.random()*4+8):-(Math.random()*4+8));var s=100*(Math.random()>0.5?(Math.random()*4+4):-(Math.random()*4+4));if(!this.getView()){return}this.getView().backGround.originalPosition=new Core.Point(this.getView().backGround.getPosition().getX(),this.getView().backGround.getPosition().getY());this.getView().backGround2.originalPosition=new Core.Point(this.getView().backGround2.getPosition().getX(),this.getView().backGround2.getPosition().getY());console.log("MissionExploreViewController > _startBackgroundAnimation > background position : "+JSON.stringify(this.getView().backGround._position));console.log("MissionExploreViewController > _startBackgroundAnimation > background2 position : "+JSON.stringify(this.getView().backGround2._position));console.log("MissionExploreViewController > _startBackgroundAnimation > background Size : "+JSON.stringify(this.getView().backGround._animation._frames[0]._size));console.log("MissionExploreViewController > _startBackgroundAnimation > background Size : "+JSON.stringify(this.getView().backGround2._animation._frames[0]._size));console.log("MissionExploreViewController > xMovement : "+r);if(this.getView().backGround._position._x+r<-this.getView().backGround._animation._frames[0]._size._width+640||this.getView().backGround._position._x+r>0||this.getView().backGround2._position._x+r*2<-this.getView().backGround2._animation._frames[0]._size._width+640||this.getView().backGround2._position._x+r*2>0){r=-r;console.log("MissionExploreViewController > xMovement changed due background limitation : "+r)}var o=TFSceneDirector.getWorkingArea();var q=-268+o.offsetY/o.scaleY;var p=-o.offsetY/o.scaleY;this._backGroundAnim=this.createAnimationQueue();this._backGroundAnim.pushAnimation(this._bgAnimationDuration,d.Curve.EaseOut);this._backGroundAnim.tween(d.Interpolate.point(new Core.Point(0,0),new Core.Point(r,s)),function(v,t,u){if(this&&this.backGround&&this.backGround.setPosition){this.backGround.setPosition(this.backGround.originalPosition.getX()+u.getX(),Math.max(v,Math.min(this.backGround.originalPosition.getY()+u.getY(),t)))}if(this&&this.backGround2&&this.backGround2.setPosition){this.backGround2.setPosition(this.backGround2.originalPosition.getX()+2*u.getX(),Math.max(v,Math.min(this.backGround2.originalPosition.getY()+u.getY(),t)))}}.bind(this.getView(),q,p));this._backGroundAnim.start()},_stopBackgroundAnimation:function(){if(this._backGroundAnim){this._backGroundAnim.destroy()}},_animateMissileGuyFloating:function(){this._floatingAnim=this.createAnimationQueue();this._floatingAnim.pushAnimation(500,d.Curve.EaseInOut);this._floatingAnim.tween(d.Interpolate.scalar(0,1),function(){this.mainCard.setPosition(this.mainCard.getPosition().getX(),this.mainCard.getPosition().getY()+1)}.bind(this.getView()));this._floatingAnim.pushAnimation(500,d.Curve.EaseInOut);this._floatingAnim.tween(d.Interpolate.scalar(0,1),function(){this.mainCard.setPosition(this.mainCard.getPosition().getX(),this.mainCard.getPosition().getY()-1)}.bind(this.getView()));this._floatingAnim.startLooped();this._startCameraDriftAnimation()},_startCameraDriftAnimation:function(){this._cameraDriftAnim=this.createAnimationQueue();this._cameraDriftAnim.pushAnimation(4000,d.Curve.Linear);this.getView().backGround.originalPosition=new Core.Point(this.getView().backGround.getPosition().getX(),this.getView().backGround.getPosition().getY());this.getView().backGround2.originalPosition=new Core.Point(this.getView().backGround2.getPosition().getX(),this.getView().backGround2.getPosition().getY());this._cameraDriftAnim.tween(d.Interpolate.scalar(0,1),function(p){var o=20;this.backGround.setPosition(this.backGround.originalPosition.getX()+Math.cos(p*2*Math.PI)*o,this.backGround.originalPosition.getY()+Math.sin(p*2*Math.PI)*o);this.backGround2.setPosition(this.backGround2.originalPosition.getX()+Math.cos(p*2*Math.PI)*o,this.backGround2.originalPosition.getY()+Math.sin(p*2*Math.PI)*o)}.bind(this.getView()));this._cameraDriftAnim.startLooped()},_stopMissileGuyFloating:function(){if(this._floatingAnim){this._floatingAnim.destroy()}this._stopCameraDriftAnimation()},_stopCameraDriftAnimation:function(){if(this._cameraDriftAnim){this._cameraDriftAnim.destroy()}},_animateMissileGuyIn:function(){k.playSound(this.SOUND_KEY_FLY_IN);var o=new Core.Point(320,480);var p=new Core.Point(Math.random()*2560,-400);this.createAnimationQueue().pushAnimation(this._missileGuyAnimationDuration,d.Curve.EaseOut).tween(d.Interpolate.point(p,o),function(q){if(this.mainCard){this.mainCard.setPosition(q.getX(),q.getY())}}.bind(this.getView())).pushCallback(function(){if(TFUserData.getTutorialState("missionstage1")=="start"){var r=new Object();r.title=Localization.getString("tutorial_mission_title_04");r.text=Localization.getString("tutorial_mission_text_04");r.Id="tutorial_mission_title_04";r.topBubble=true;r.cb=function(){TFAnalytics.reportGameEvent("MISSIONTUTORIAL",{Step:"09_MissileGuyTutorialDismiss"});setTimeout(function(){this._fireMissiles();this._animateMissileGuyFloating();this._stopBackgroundAnimation()}.bind(this),600)}.bind(this);var s=__ngs.r_(__ngs._81).TutorialBubbleView;var q=TFSceneDirector.showTutorialDialogTransparentBack(s,r);TFUserData.setNewTutorialState("missionstage1","end")}else{this._fireMissiles();this._animateMissileGuyFloating();this._stopBackgroundAnimation()}}.bind(this)).start()},_animateMissileGuyOut:function(){console.log("MissionExploreViewController > _animateMissileGuyOut");this._stopMissileGuyFloating();k.playSound(this.SOUND_KEY_FLY_OUT);var p=this.getView().mainCard.getPosition();var o=new Core.Point(Math.random()*2560,-400);this.createAnimationQueue().pushAnimation(this._missileGuyAnimationDuration,d.Curve.EaseIn).tween(d.Interpolate.point(p,o),function(q){if(this.mainCard){this.mainCard.setPosition(q.getX(),q.getY())}}.bind(this.getView())).start()},_scopeAnimationTick:function(o){if(this&&!this.hit){this.scoreValue=0;this.frameCount++;this.setPosition(320+(this.xOffset*o),480+(this.yOffset*o));if(o>0.5){this.activeReticle.setVisible(true);this.scoreValue=1-(o-0.5);k.playSound("Mission_Missile_Lock_01")}this.missile.setScale(10*o);this.missile.setRotation(this.missile.getRotation()+1.5*this.rotIncrement/Math.abs(this.rotIncrement))}},_scopeAnimationStart:function(o){this._misslesFiredThisRound++;k.playSound(this.SOUND_KEY_MISSILE_FIRE);k.playSound(this.SOUND_KEY_MISSILE_FLAYING);this._enableScope(o);o.missile.parentScope=o;o.hit=undefined;var p=[400,600];o.setPosition(320,480);o.frameCount=0;o.xOffset=Math.random()*p[0]-p[0]/2;o.yOffset=Math.random()*p[1]-p[1]/2;o.rotIncrement=o.xOffset/this._miniGameData.missileLife*30;this.createAnimationQueue().pushAnimation(this._miniGameData.missileLife/2,d.Curve.EaseInOut).tween(d.Interpolate.scalar(5,0.5),o.countdownReticle.setScale.bind(o.countdownReticle)).pushCallback(o.countdownReticle.setVisible.bind(o.countdownReticle,false)).pushCallback(o.activeReticle.setVisible.bind(o.inactiveReticle,false)).start();this.createAnimationQueue().pushAnimation(this._miniGameData.missileLife,d.Curve.Linear).tween(d.Interpolate.scalar(0,1),this._scopeAnimationTick.bind(o)).pushCallback(this._scopeAnimationComplete.bind(this,o)).start()},_scopeAnimateLabel:function(o){o.resultLabel.setVisible(true);if(o.resultLabel.getText()==Localization.getString("ui_miss_uc")){o.scoreLabel.setVisible(false)}else{o.scoreLabel.setVisible(true);o.scoreLabel.setAlpha(1)}o.scoreLabel.setPosition(0,(o.getPosition().getY()<200)?200:-200);k.playSound(o.sfx);this.createAnimationQueue().pushAnimation(400,d.Curve.EaseOut).tween(d.Interpolate.scalar(1.4,2),function(p){this.resultLabel.setScale(p)}.bind(o)).pushCallback(function(){this.resultLabel.setVisible(false)}.bind(o)).pushAnimation(100,d.Curve.Linear).pushAnimation(300,d.Curve.EaseIn).tween(d.Interpolate.scalar(1,0),function(p){this.scoreLabel.setAlpha(p)}.bind(o)).pushCallback(function(){this.scoreLabel.setVisible(false)}.bind(o)).start()},_scopeAnimationComplete:function(o){this._misslesFiredThisRound--;this._disableScope(o);if(!o.hit){k.playSound(this.SOUND_KEY_IMPACT_TARGET[Math.floor(Math.random()*this.SOUND_KEY_IMPACT_TARGET.length)]);o.resultLabel.setText(Localization.getString("ui_miss_uc"));o.resultLabel.setColor(255/255,0,0);o.resultLabel.setPosition(0,150);this._scopeAnimateLabel(o);TFSceneDirector.shakeView(this)}this.completeMiniGame()},_fireMissiles:function(){this._misslesFiredThisRound=0;if(!this.getView()){console.log("MissionExploreViewController > _fireMissiles > Screen destroyed, returning");return}var q=0;if(this._miniGameData.numberOfGoldMissiles>=1){q=Math.floor((Math.random()*this._miniGameData.numberOfGoldMissiles)+1)}var p=0;for(var p=0;p<q;p++){var o=this._miniGameData.missileDelay*p+this._miniGameData.missileDelay*(Math.random()/5)*(Math.ceil(Math.random()-0.5));setTimeout(this._scopeAnimationStart.bind(this,this.getView()["scope"+(p+1)]),o)}var o=this._miniGameData.missileDelay*p+this._miniGameData.missileDelay*(Math.random()/5)*(Math.ceil(Math.random()-0.5));setTimeout(this.shootSpecialTarget.bind(this),o)},_showFinalCurrencyReward:function(){var o=this.getView().bonus;o.centerText.setAlpha(0);o.centerText.setText(""+this._currencyReward+" "+Localization.getString("ui_credits"));this.createAnimationQueue().pushAnimation(300,d.Curve.Linear).tween(d.Interpolate.scalar(0.2,1),function(p){this.centerText.setAlpha(p)}.bind(o)).pushAnimation(400,d.Curve.Linear).pushAnimation(400,d.Curve.Linear).tween(d.Interpolate.scalar(1,0),function(p){this.centerText.setAlpha(p)}.bind(o)).pushAnimation(300,d.Curve.Linear).pushCallback(function(q,p){q.centerText.setText("");q.centerText.setPosition(p)}.bind(this,o,o.centerText._position.clone())).start();this.createAnimationQueue().pushAnimation(600,d.Curve.Linear).pushCallback(function(p){this.setText(""+p)}.bind(o.centerText,this._currencyReward)).pushAnimation(600,d.Curve.EaseOut).tween(d.Interpolate.point(o.centerText._position,o.bonusCurrency._position),function(p){this.setPosition(p)}.bind(o.centerText)).start();this.createAnimationQueue().pushAnimation(600,d.Curve.Linear).pushAnimation(600,d.Curve.Linear).tween(d.Interpolate.scalar(0,this._currencyReward),function(r,p,q){o.centerText.setText(""+Math.floor(r-q));o.bonusCurrency.setText(""+Math.floor(p-r+q))}.bind(o,this._currencyReward,TFUserData.currency)).start()},startMiniGame:function(){k.playMusic(this.MUSIC_KEY_MINIGAME);if(this._miniGameRunning){return}this._currencyReward=0;this._exploreEnergyReward=0;this._miniGameRunning=true;this.getView().missionName.setVisible(false);setTimeout(this._animateMissileGuyIn.bind(this),this._bgAnimationDuration-this._missileGuyAnimationDuration)},shootSpecialTarget:function(){if(Math.random()<=this._miniGameData.energyChance){this._scopeAnimationStart(this.getView().scope4);setTimeout(this._animateMissileGuyOut.bind(this),this._miniGameData.missileLife)}else{this._animateMissileGuyOut()}},_enableScope:function(o){if(o&&o.missile){o.inactiveReticle.setVisible(true);o.countdownReticle.setVisible(true);o.missile.setVisible(true);o.contrail.play()}},_disableScope:function(o){if(o&&o.missile){o.activeReticle.setVisible(false);o.inactiveReticle.setVisible(false);o.countdownReticle.setVisible(false);o.missile.setVisible(false);o.contrail.stop()}},targetClick:function(p){var q=p.parentScope;if(q.scoreValue==0){console.log("Target NOT Intercepted (tapped too early)");return}console.log("Target Intercepted");q.hit=true;this._disableScope(q);q.smoke.play();q.explosion.play();var r=Math.round(q.scoreValue*100);console.log("Score is "+r);var o;if(q.info&&q.info.special){o=Math.round(r/100*this._miniGameData.energy);this._exploreEnergyReward+=o}else{o=Math.round(r/100*this._miniGameData.gold);this._currencyReward+=o}if(r>85){q.scoreLabel.setText(o+"");q.resultLabel.setText(Localization.getString("ui_minigameperfect_uc"));q.resultLabel.setColor(245/255,255/255,0/255);q.sfx=this.SOUND_KEY_MISSILE_TAPPED[2]}else{if(r>50){q.scoreLabel.setText(o+"");q.resultLabel.setText(Localization.getString("ui_minigamegreat_uc"));q.resultLabel.setColor(255/255,255/255,245/255);q.sfx=this.SOUND_KEY_MISSILE_TAPPED[1]}else{if(r>0){q.scoreLabel.setText(o+"");q.resultLabel.setText(Localization.getString("ui_minigamegood_uc"));q.resultLabel.setColor(200/255,200/255,200/255);q.sfx=this.SOUND_KEY_MISSILE_TAPPED[0]}}}q.resultLabel.setPosition(0,(q.getPosition().getY()<200)?150:-150);if(this._serverData){this._serverData.newReward.bonus=this._currencyReward}this._scopeAnimateLabel(q)},completeRoundCallback:function(p,o){console.log("MissionExploreViewController > completeRoundCallback");this._blocker=false;if(p){console.log("completeRound error: "+JSON.stringify(p));this._serverData=false;this._serverReturnedFlag=true;this.completeMiniGame();h.showErrorMessages(o);this._resetScreen();return}this._startBackgroundAnimation();console.log("completeRound data: "+JSON.stringify(o));console.log("MissionExploreViewController > completeRoundCallback > Data > credits : "+o.credits);this._serverData=o;this._serverReturnedFlag=true;this._guid=this._serverData.newReward.guid;if(this._serverData.newReward.type==TFGameData.REWARD_TYPE.GOLD&&this._minigameflag){this.startMiniGame()}else{this.completeMiniGame()}},completeMiniGame:function(){console.log("MissionExploreViewController > completeMiniGame");if(!this._serverReturnedFlag){return}if(this._misslesFiredThisRound!=0){return}this._miniGameRunning=false;if(!this._serverData){this._resetScreen();return}var o=this._serverData;if(o&&o.missionState){TFUserData.setExploreEnergy(o.energy);if(o.notEnoughEnergy){TFSceneDirector.showOutOfEnergy("explore");return}TFUserData.setMissionState(o.missionState.missionId,o.missionState);TFUserData.setLastReward(o.newReward);var p=TFUserData.setTotalXp(o.xp);if(o.cards){TFUserData.cards=o.cards}if(o.cardsLimbo){TFUserData.cardsLimbo=o.cardsLimbo}if(o.newReward.type==TFGameData.REWARD_TYPE.CARD){}if(o.newReward.type==TFGameData.REWARD_TYPE.GOLD){if(o.newReward.increase){o.newReward.found=o.newReward.increase}else{o.newReward.found=o.newReward.value-TFUserData.currency}TFUserData.setTotalCurrency(o.newReward.value)}this._updateScreenInfo();TFSceneDirector.getTopHudViewController().update();if(!this.m_missionCompleted&&o.missionState.progress==1){TFUserData.missionCompleted=this._missionId}this._navigate()}if(o.newReward.type==TFGameData.REWARD_TYPE.GOLD){if(this._exploreEnergyReward>0||this._currencyReward>0){Server.popAward(this._exploreEnergyReward,this._currencyReward,this.popAwardCB.bind(this))}}},_navigate:function(){setTimeout(function(){var o=this._serverData;if(!o){return this._checkLevelUp()}TFUserData.eventBossEncountered=undefined;k.playSound(this.SOUND_KEY_REWARD_POPUP);if(o.newReward.type==TFGameData.REWARD_TYPE.GOLD){this._showFinalCurrencyReward();this._checkLevelUp()}else{if(o.newReward.type==TFGameData.REWARD_TYPE.CARD){this.showUnknownSignatureScreen(this.receiveCard.bind(this,o))}else{if(o.newReward.type==TFGameData.REWARD_TYPE.LUCKYCHANCE){this.showUnknownSignatureScreen(this.luckyChance.bind(this,o))}else{if(o.newReward.type==TFGameData.REWARD_TYPE.BATTLECHANCE){this.showUnknownSignatureScreen(this.battleChance.bind(this))}else{if(o.newReward.type==TFGameData.REWARD_TYPE.ENEMYCHANCE){this.showUnknownSignatureScreen(this.enemyChance.bind(this,o.newReward.value))}else{if(o.newReward.type==TFGameData.REWARD_TYPE.EVENTBOSS){this.showUnknownSignatureScreen(this.eventBoss.bind(this))}}}}}}}.bind(this),1000)},_checkLevelUp:function(){console.log("MissionExploreViewController > _checkLevelUp");TFSceneDirector.enableGlobalTouches("MissionExploreViewController [_checkLevelUp]");var o=TFUserData.getLevelUp();if(o){TFUserData.clearLevelUp();Server.getCurrentUser(this.reloadInfoUser.bind(this));k.playMusic(this.MUSIC_KEY_LEVEL_UP,true);TFUserData.setExploreEnergy(TFUserData.getMaxExploreEnergy());TFUserData.setBattleEnergy(TFUserData.getMaxBattleEnergy());var p=new Object();p.infoLevel=o;p.destroyCB=this._checkMissionComplete.bind(this);var q=__ngs.r_(__ngs._8o).LevelUpController;TFSceneDirector._showDialog(new q(p,true))}else{this._checkMissionComplete()}},_checkMissionComplete:function(){console.log("MissionExploreViewController > _checkMissionComplete");if(TFUserData.missionCompleted!=undefined){if(TFGameData.getWorld(this._worldId).faction==TFGameData.FACTION.AUTOBOTSTRING){k.playMusic(this.MUSIC_KEY_END_AUTOBOTS,true)}else{k.playMusic(this.MUSIC_KEY_END_DECEPTICONS,true)}var o=__ngs.r_(__ngs._8p).MissionCompleteController;TFSceneDirector._showDialog(new o({destroyCB:this._checkAskToRate.bind(this)},true))}else{this._checkAskToRate()}},_checkAskToRate:function(p){console.log("MissionExploreViewController > _checkAskToRate");if(TFUserData.getAskToRate()){TFUserData.clearAskToRate();var o=new Object();o.title=Localization.getString("ui_rateus");o.fusionCost=Localization.getString("ui_enjoyingtf");o.cb=h.rateGame;o.destroyCB=this._checkAfterMissionComplete.bind(this);TFSceneDirector._showDialog(new g(o))}else{this._checkAfterMissionComplete()}},_checkAfterMissionComplete:function(){if(TFUserData.eventBossEncountered){console.log("MissionExploreViewController > _checkAfterMissionComplete > boss encountered - moving to boss details");var p=TFUserData.eventBossEncountered.id;TFUserData.eventBossEncountered=undefined;TFUserData.missionCompleted=undefined;k.playMusic();TFSceneDirector.showRBBossById(p,TFSceneDirector.showRBMain.bind(TFSceneDirector));return}else{if(TFUserData.missionCompleted!=undefined){TFUserData.missionCompleted=undefined;if(TFUserData.isStageBossComplete(this._stageId)){TFSceneDirector.setStage({worldId:this._worldId,stageId:-1});TFSceneDirector.showStageSelect(this._worldId)}else{TFSceneDirector.showMissionSelect(this._worldId,this._stageId)}}else{console.log("MissionExploreViewController > _checkAfterMissionComplete > no boss - no mission complete - resetting screen");this._resetScreen()}}if(!TFGameData._justOverflowFlag&&TFUserData.cardsLimbo&&TFUserData.cardsLimbo.length>0){var o=__ngs.r_(__ngs._87).OverLimitCardsController;TFSceneDirector._showDialog(new o());TFGameData._justOverflowFlag=true}},receiveCard:function(s){var u;console.log("MissionExploreViewController > receiveCard > serverData : "+JSON.stringify(s));if(s.newReward.value.inLimbo){u=TFUserData.getLimboCard(s.newReward.value.id)}else{u=TFUserData.getCard(s.newReward.value.id)}var q=__ngs.r_(__ngs._r).TFCardsManager;if(u){if(s.newReward.value.isNew){u.isNew=true}else{u.isNew=false}var r=q.getCardDefinition(u.definitionId);if(r.type==TFGameData.CARD_TYPE.TRANSFORMER){var o=function(){if(!TFUserData.getLevelUp()&&!TFUserData.missionCompleted&&TFUserData.isCardTransScannable(u)){var v={};v.title=Localization.getString("ui_transscan_uc");v.fusionCost=Localization.getString("ui_transcanavailable");v.cancelButtonText=Localization.getString("ui_cancel");v.okButtonText=Localization.getString("ui_transscan");v.cb=TFSceneDirector.showTransform.bind(TFSceneDirector);v.cbDismiss=this._checkLevelUp.bind(this);TFSceneDirector._showDialog(new g(v))}else{this._checkLevelUp()}}.bind(this);var p=__ngs.r_(__ngs._80).FullScreenCardController;TFSceneDirector._showDialog(new p({usercard:u,destroyCB:o,showBanner:true},true))}else{var t=__ngs.r_(__ngs._8a).FullScreenWeaponCardController;TFSceneDirector._showDialog(new t({usercard:u,destroyCB:this._checkLevelUp.bind(this)},true))}}else{TFSceneDirector.enableGlobalTouches("MissionExploreViewController [receiveCard]");this._checkLevelUp()}},_startUnknownSignatureAnimation:function(){this.signatureQueue1=this.createAnimationQueue();this.signatureQueue2=this.createAnimationQueue();var p=280-Math.random()*45;var o=280+Math.random()*45;this.signatureQueue1.pushAnimation(1800+Math.random()*200,d.Curve.Linear);this.signatureQueue1.tween(d.Interpolate.scalar(0,-p),function(q){this.setRotation(q)}.bind(this.getView().unknownSignature.detectedHud1));this.signatureQueue2.pushAnimation(1800+Math.random()*200,d.Curve.Linear);this.signatureQueue2.tween(d.Interpolate.scalar(0,o),function(q){this.setRotation(q)}.bind(this.getView().unknownSignature.detectedHud2));this.signatureQueue1.pushAnimation(1800+Math.random()*200,d.Curve.Linear);this.signatureQueue1.tween(d.Interpolate.scalar(-p,0),function(q){this.setRotation(q)}.bind(this.getView().unknownSignature.detectedHud1));this.signatureQueue2.pushAnimation(1800+Math.random()*200,d.Curve.Linear);this.signatureQueue2.tween(d.Interpolate.scalar(o,0),function(q){this.setRotation(q)}.bind(this.getView().unknownSignature.detectedHud2));this.signatureQueue1.pushAnimation(1800+Math.random()*200,d.Curve.Linear);this.signatureQueue1.tween(d.Interpolate.scalar(0,p),function(q){this.setRotation(q)}.bind(this.getView().unknownSignature.detectedHud1));this.signatureQueue2.pushAnimation(1800+Math.random()*200,d.Curve.Linear);this.signatureQueue2.tween(d.Interpolate.scalar(0,-o),function(q){this.setRotation(q)}.bind(this.getView().unknownSignature.detectedHud2));this.signatureQueue1.pushAnimation(1800+Math.random()*200,d.Curve.Linear);this.signatureQueue1.tween(d.Interpolate.scalar(p,0),function(q){this.setRotation(q)}.bind(this.getView().unknownSignature.detectedHud1));this.signatureQueue2.pushAnimation(1800+Math.random()*200,d.Curve.Linear);this.signatureQueue2.tween(d.Interpolate.scalar(-o,0),function(q){this.setRotation(q)}.bind(this.getView().unknownSignature.detectedHud2));this.signatureQueue1.startLooped();this.signatureQueue2.startLooped()},_stopUnknownSignatureAnimation:function(){if(this.signatureQueue1){this.signatureQueue1.destroy()}if(this.signatureQueue2){this.signatureQueue2.destroy()}},showUnknownSignatureScreen:function(o){var p=this.createAnimationQueue();p.pushAnimation(600,d.Curve.Linear);p.pushCallback(function(q){this.showUnknownSignatureCallback=q;this.getView().unknownSignature.setVisible(true);this.getView().unknownSignature.tapArea.setEnabled(true);this._startCameraDriftAnimation();this._startUnknownSignatureAnimation()}.bind(this,o));p.start()},preloadLuckyChanceCards:function(p){var r=TFGameData.getLuckyChanceWithId(p.newReward.value).cards;for(var q=0;q<r.length;++q){var o=h.getCardImagePath(r[q].id);if(!m._dynamicManifestData[n.getCorrectImagePath(o)]){console.log("BattleViewController > $preloadBattleCards > Card : "+r[q].id+" not found, preload failed")}else{m.downloadAsset(n.getCorrectImagePath(o),function(s){console.log("BattleViewController > $preloadBattleCards > Asset : "+s+" ready")})}}},luckyChance:function(o){var p=new Object();p.title=Localization.getString("ui_combatcache");p.fusionCost=Localization.getString("ui_chancetowinrare");p.cancelButtonText=Localization.getString("ui_cancel");p.okButtonText=Localization.getString("");p.cbDismiss=this._checkLevelUp.bind(this);p.cb=function(){var q=__ngs.r_(__ngs._8q).LuckyChanceViewController;TFSceneDirector.pushViewController(new q(this._missionId,o.newReward))}.bind(this);TFSceneDirector._showDialog(new g(p));TFSceneDirector.enableGlobalTouches("MissionExploreViewController [luckyChance]")},enemyChance:function(p){var o=TFGameData.getEnemyWithId(p);var q=new Object();q.title=Localization.getString("ui_bossintercept");q.fusionCost=Localization.getString("ui_deploycampaignsquad");q.cancelButtonText=Localization.getString("ui_retreat");q.okButtonText=Localization.getString("ui_fight");q.image=h.getCardImagePath(o.gearId);q.background=false;q.cbDismiss=this._checkLevelUp.bind(this);q.cb=function(){var r=__ngs.r_(__ngs._8d).BossFightViewController;TFSceneDirector.hideTopHud();TFSceneDirector.pushViewController(new r(this._missionId,o,this.classname),"crossfade")}.bind(this);TFSceneDirector._showDialog(new g(q));TFSceneDirector.enableGlobalTouches("MissionExploreViewController [enemyChance]")},popAwardCB:function(p,o){if(p){console.log("popAwardCB error: "+JSON.stringify(p));h.showErrorMessages(o);return}console.log("popAwardCB data: "+JSON.stringify(o));if(o.currencyBonus>0){TFUserData.setTotalCurrency(o.currency)}if(o.energyBonus>0){TFUserData.setExploreEnergy(o.energy)}TFSceneDirector.getTopHudViewController().update()},battleChance:function(){var o=new Object();o.title=Localization.getString("ui_pvpambush");o.fusionCost=Localization.getString("ui_battleanotherplayerwithout")+" \n\n"+Localization.getString("ui_earnbpfree");o.cancelButtonText=Localization.getString("ui_retreat");o.okButtonText=Localization.getString("ui_fight");o.cbDismiss=this._checkLevelUp.bind(this);o.cb=this.getEnemy.bind(this);TFSceneDirector._showDialog(new g(o));TFSceneDirector.enableGlobalTouches("MissionExploreViewController [battleChance]")},getEnemy:function(){console.log("MissionExploreViewController::getEnemy");if(TFUserData.enemies&&(TFUserData.enemies.length>0)){TFUserData.setSelectedOpponent(Math.floor(Math.random()*TFUserData.enemies.length));TFUserData._battleChanceMissionId=this._missionId;TFUserData._battleChanceGuid=this._guid;if(!TFUserData._battleChanceGuid){TFUserData._battleChanceGuid=true}TFSceneDirector.showConfirmBattle()}else{var o=TFUserData.getLevel();Server.getBattleEnemies(o,function(q,r){if(q){console.log("Error occurred while searching for Battle Opponents");h.showErrorMessages(r);return}var p=r.enemies;if(p.length==0){h.createToast("No Opponents found");return}TFUserData.syncFrom(r);TFUserData.setSelectedOpponent(Math.floor(Math.random()*p.length));TFUserData._battleChanceMissionId=this._missionId;TFUserData._battleChanceGuid=this._guid;if(!TFUserData._battleChanceGuid){TFUserData._battleChanceGuid=true}console.log("MissionExploreViewController > getEnemy > GUID : "+TFUserData._battleChanceGuid);TFSceneDirector.showConfirmBattle()}.bind(this))}},eventBoss:function(){console.log("MissionExploreViewController > eventBoss");TFAnalytics.reportGameEvent("RAIDBOSSPOPUP");k.playSound(this.SOUND_KEY_EVENT_BOSS);var o={};o.title=Localization.getString("ui_missioneventboss1");o.text=Localization.getString("ui_missioneventboss2");o.cancelButtonText=Localization.getString("ui_retreat");o.okButtonText=Localization.getString("ui_fight");o.background=false;o.destroyCB=this._checkLevelUp.bind(this);o.noDestroyOnOk=true;o.cb=function(){console.log("MissionExploreViewController > eventBoss > invoking ok callback");Server.generateBoss(function(r,q){if(r){console.log("MissionExploreViewController::eventBoss - Error : "+JSON.stringify(r));TFAnalytics.reportGameEvent("RAIDBOSSENCOUNTER",{error:JSON.stringify(r)});h.showErrorMessages(q,this.eventBoss.bind(this));return}console.log("MissionExploreViewController::eventBoss - response : "+JSON.stringify(q));if(q){TFAnalytics.reportGameEvent("RAIDBOSSENCOUNTER",{eventid:TFUserData.curEventId,instanceid:q.id,boss_hp:q.hp,bossid:q.definitionId,epoints:TFUserData.eventPoints})}TFUserData.eventBossEncountered=q;this._checkLevelUp()}.bind(this))}.bind(this);var p=__ngs.r_(__ngs._8r).EventBossPopUpController;TFSceneDirector._showDialog(new p(o));TFSceneDirector.enableGlobalTouches("MissionExploreViewController [eventBoss]")},setBottomHudView:function(p){var o=__ngs.r_(__ngs._8f).BottomHudAltView;p.updateHudWithView(o)},afterViewDisplayed:function(){if(TFUserData.getTutorialState("missionstage1")=="start"){var r=new Object();r.title=Localization.getString("tutorial_mission_title_03");r.text=Localization.getString("tutorial_mission_text_03");r.Id="tutorial_mission_title_03";r.cb=function(){TFAnalytics.reportGameEvent("MISSIONTUTORIAL",{Step:"07_MissionExploreDismiss"})};var v=__ngs.r_(__ngs._81).TutorialBubbleView;var p=TFSceneDirector.showTutorialDialog(v,r);p.getView().bubble1.setPosition(-320,-100);var q=__ngs.r_(__ngs._4e).GLButton;var t=30;var u=390;var s=616;this._arrow=new q(undefined,h.getArrowImage(),null,[1,0,-1,1]);this._arrow.setSize(new Core.Size(120,70));this._arrow.setPosition(u,s);TFSceneDirector.shiftUIElementDown(this._arrow);this._arrow.setFeedback(false);setTimeout(function(){if(this.getView()){this.getView().addChild(this._arrow)}}.bind(this),10);var o=this.createAnimationQueue();o.pushAnimation(250,d.Curve.EaseIn).tween(d.Interpolate.scalar(u-t,u+t),function(w){this._arrow.setPosition(w,this._arrow.getPosition().getY())}.bind(this));o.pushAnimation(250,d.Curve.EaseOut).tween(d.Interpolate.scalar(u+t,u-t),function(w){this._arrow.setPosition(w,this._arrow.getPosition().getY())}.bind(this));o.startLooped()}},reloadInfoUser:function(p,o){if(p){console.log("MissionExplorerViewController.reloadInfoUser Error, cannot retrieve used data! error=%s",JSON.stringify(p))}else{if(o){TFUserData.syncFrom(o);NotificationCenter.updateNotifications()}}},onTapToInvestigate:function(){console.log("MissionExploreViewController > onTapToInvestigate > called");this.getView().unknownSignature.tapArea.setEnabled(false);this.getView().unknownSignature.setVisible(false);this._stopCameraDriftAnimation();this._stopUnknownSignatureAnimation();TFSceneDirector.disableGlobalTouches("MissionExploreViewController");this.showUnknownSignatureCallback()}})}};__ngs._4u={_c:null,_d:function(){var e={exports:{}};var d=e.exports;this._c=e;var b=__ngs.r_(__ngs._n).ViewController;var c=__ngs.r_(__ngs._4v).StoreGashaView;var g=__ngs.r_(__ngs._4x).StoreItemView;var h=__ngs.r_(__ngs._8s).PaymentController;var a=__ngs.r_(__ngs._3y).PopUpController;d.StoreViewController=b.subclass({classname:"StoreViewController",initialize:function($super,k){$super();this._tx=null;this._payment=null;TFUserData.updateGasha();if(k===undefined){k=c}this._viewName="Gasha";this._storeDef="default";this.createView(k);this.getView()._totalHeight=1400;var m={displayed:true,animated:true,timeout:0};var l={displayed:true,animated:true,timeout:0};this._setupStoreGashaView();this.setHudDisplayData(m,l)},_setupStoreGashaView:function(){this.loadStoreData();var k=this.getView(true);var l=0;do{var m="item"+l;TFSceneDirector.shiftUIElementUp(k[m]);l++}while(k["item"+l]);TFSceneDirector.stretchUIElementVertically(this.getView(false).backgroundImage)},destroy:function($super){$super();if(this._interval!==undefined){clearInterval(this._interval)}},onPremiumAction:function(k){if(!Server.isConnectionAvailable()){TFUtils.showErrorMessages(Localization.getString("ui_pleasecheckconnection"));return}this._payment=new h(null,this.onPremiumActionSuccess.bind(this,k),null);this._payment.createSimpleTransaction(k.sku,k.name)},onPremiumActionSuccess:function(l,k){this._tx=k;this.executeGasha({type:l.id,txId:k.id,single:true,isPremium:true});if(TFUserData.gachaSalesBought===undefined){TFUserData.gachaSalesBought=[]}TFUserData.gachaSalesBought[l.id]=true},onGashaAction:function(k){if(!Server.isConnectionAvailable()){TFUtils.showErrorMessages(Localization.getString("ui_pleasecheckconnection"));return}var l=k.info.id;this._gasha=l;if(l.sku.length>0){this.onPremiumAction(l)}else{if(l.currency=="socialPoints"){if(TFUserData.isFreeGashaReady()){this.confirmGasha({type:l.id,txId:1,single:true,isFreeGasha:true})}else{this.confirmGasha({type:l.id,txId:0})}}else{this.confirmGasha({type:l.id,txId:0})}}},onGetMoreMobacoinButton:function(){if(this._blocked===true){return}this._blocked=true;this.getView(false).setPremiumGashaButtonEnabled(true);this._blocked=false},onGoToBattleButton:function(){if(this._blocked===true){return}this._blocked=true;TFSceneDirector.showOpponents("slideleft");this._blocked=false},onCheerButton:function(){if(this._blocked===true){return}this._blocked=true;TFSceneDirector.showFriends();this._blocked=false},onExploreButton:function(){if(this._blocked===true){return}this._blocked=true;TFSceneDirector.showWorldSelect();this._blocked=false},loadStoreData:function(){var s=this.getView(false);var t=this.getView(true);var n=TFUtils.GetCloneOfArray(TFGameData.getStoreData(this._storeDef));n.sort(function(x,w){return x.sort-w.sort});var l=n.length;console.log("JY: data = "+JSON.stringify(n));for(var o=0;o<l;o++){console.log("i = "+o+" length = "+l+" data = "+JSON.stringify(n[o]));if(n[o].enabled===false){continue}var p="item"+o;var k=n[o];console.log("JY: toLoad "+JSON.stringify(k));var r=k.gachaType;console.log("JY: gacha json = "+JSON.stringify(TFGameData._gashaPacksJSON[k.gachaID]));var q=TFGameData._gashaPacksJSON[k.gachaID][0];var u=k.gachaSaleID;if(u!=undefined){var v=true;var m=TFUserData.getEventPurchases(TFUserData.curEventId);if(!this.hasBoughtGacha(u)){console.log("JY: using sale id "+u);v=false;q=TFGameData._gashaPacksJSON[u][0]}s.setSaleItemEnabled(p,!v)}this.setupBaseDataForItem(p,q);this.setupReadyDataForItem(p,q,r)}},hasBoughtGacha:function(l){var k=TFUserData.getEventPurchases(TFUserData.curEventId);return(k!==undefined&&k[l]!==undefined)||(TFUserData.gachaSalesBought!==undefined&&TFUserData.gachaSalesBought[l]!==undefined)},setupBaseDataForItem:function(m,n){var k=this.getView(false);var l=this.getView(true);k.setGashaDataForItem(m,n);k.setBannerImageForItem(m);k.setNameTextForItem(m,Localization.getString(n.name));k.setDescTextForItem(m,Localization.getString(n.description));if(n.topRightText&&l[m].topRightText){k.setItemTopRightText(m,Localization.getString(n.topRightText))}},setupReadyDataForItem:function(l,o,m){var k=this.getView(false);var n=false;switch(m){case"premium":k.updatePremiumCurrencyIconsForItem(l);k.setPremiumItemEnabled(l,TFUserData.isGashaReady(o));k.setTextForItemLabel(l,"priceText",o.value.toString());break;case"medal":k.setItemCurrencyText(l,TFUserData.gashaAmount(o));break;case"socialPoints":if(TFUserData.isFreeGashaReady()){k.setItemCurrencyText(l,"1");k.setAPIconVisible(l,false);n=true}else{k.setAPIconVisible(l,true);k.setNameTextForItem(l,Localization.getString("gachaSet_0_name"));k.setDescTextForItem(l,Localization.getString("gachaSet_0_description"));k.setTextForItemLabel(l,"priceText"," / "+o.value.toString()+" ");k.setItemCurrencyText(l,TFUserData.gashaPoints)}break;case"battlePoints":k.setItemPriceText(l,o.value);k.setItemCurrencyText(l,TFUserData.battlePoints);break;default:console.log("StoreViewController > loadStoreData > setupReadyDataForItem > ERROR: no type given for gacha item "+i);break}n=n||TFUserData.isGashaReady(o);k.setItemReady(l,n)},confirmGasha:function(m){this._gashaConfig=m;var k=TFUserData.lastAndNextFreeGashaDates["isEligable"];var l={};if(k||!m.isFreeGasha){l.text=Localization.getString("ui_confirmwantsb");l.fusionCost="";l.buttons="";l.cb=this.executeGasha.bind(this,m)}else{l.text=Localization.getString("ui_cantgetagaintoday");l.fusionCost="";l.buttons="one";l.cb=null}TFSceneDirector._showDialog(new a(l))},executeGasha:function(l){TFSceneDirector.disableGlobalTouches("StoreViewController > executeGasha");var k=(l.single===true)?"single":"multi";if(l.isPremium){Server.closePremiumSpaceBridgeTransaction(l.txId,this.showSpaceBridge.bind(this),false)}else{Server.requestCards(l.type,k,l.txId,this.showSpaceBridge.bind(this),false)}},showSpaceBridge:function(n,o){TFSceneDirector.enableGlobalTouches("StoreViewController > showSpaceBridge");if(!n){console.log("StoreViewController > showSpaceBridge > data="+JSON.stringify(o));for(var l in o){if(o.hasOwnProperty(l)){console.log("   "+l+" : "+JSON.stringify(o[l]))}}var m=o;var p=m.newCards;TFUserData.gashaPoints=m.gashaPoints;TFUserData.medals=m.medals;TFUserData.collectionRewards=m.collectionRewards;TFUserData.setLastAndNextFreeGashaDates(m.lastAndNextFreeGashaDates);TFUserData.setBattlePoints(o.battlePoints);TFUserData.addGiftsToInbox(m.newGifts);var k=__ngs.r_(__ngs._4h).GashaViewController;TFSceneDirector.pushViewController(new k(o,this._gashaConfig,this._gasha));TFUserData.lastAndNextFreeGashaDates["isEligable"]=TFUserData.freeGashaEligable}else{console.log("StoreViewController > showSpaceBridge > err="+JSON.stringify(n));h.cancelPendingTransactions()}this._tx=null;this._payment=null},setBottomHudView:function(l){var k=__ngs.r_(__ngs._8t).BottomHudStoresInventoryView;l.updateHudWithView(k);l.updateEventStoreButton((TFUserData.curEventId!=undefined))}})}};__ngs._4v={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var e=__ngs.r_(__ngs._7p).View;var d=__ngs.r_(__ngs._8u).StoreGashaViewDefinition;var b=__ngs.r_(__ngs._8v).GLScrollView;a.StoreGashaView=b.subclass({classname:"StoreGashaView",initialize:function($super,g,h){var k=d;if(h){k=h}$super(g,k)},destroy:function($super){$super()},updatePremiumCurrencyIconsForItem:function(g){if(Core.Capabilities.getPlatformOS()=="Android"){TFUtils.changeImageOnSprite(this._scrollArea[g].mobacoinIcon,"Content/Images8x/UI/icon/icon_mobacoin.png");TFUtils.changeImageOnSprite(this._scrollArea[g].getMoreMobacionIcon,"Content/Images8x/UI/icon/icon_mobacoin.png");if(this._scrollArea[g].mobacoinIcon2!=undefined){TFUtils.changeImageOnSprite(this._scrollArea[g].mobacoinIcon2,"Content/Images8x/UI/icon/icon_mobacoin.png")}}},setGashaDataForItem:function(g,h){this._scrollArea[g].buyButton.info.id=h},setTextForItemLabel:function(h,g,k){if(this._scrollArea[h][g]){this._scrollArea[h][g].setText(k)}},setBannerImageForItem:function(m){var l=this._scrollArea[m];var h=["BGImagePart1","BGImagePart2","BGImagePart3"];for(var k in h){if(l.bgImage[h[k]]){var n=l.bgImage[h[k]];if(n.info){var g=n.info.asset_dir+"/"+TFUserData.curEventId+"/";if(n.info["asset_name_"+TFUserData.curEventId]){g=g+n.info["asset_name_"+TFUserData.curEventId]}else{g=g+n.info.asset_name}TFUtils.changeImageOnSprite(n,g)}}}},setNameTextForItem:function(g,h){this._scrollArea[g].nameText.setText(h)},setDescTextForItem:function(g,h){this._scrollArea[g].descText.setText(h)},setItemCurrencyText:function(h,g){console.log("StoreGashaView > setItemCurrencyText > currency="+g);if(g===undefined){g=0}this._scrollArea[h].currencyText.setText(g.toString())},setAPIconVisible:function(g,h){this._scrollArea[g].friendPointsIcon.setVisible(h)},setItemPriceText:function(h,g){this._scrollArea[h].priceText.setText(" / "+g.toString())},setItemTopRightText:function(g,h){if(this._scrollArea[g].topRightText===undefined){return}this._scrollArea[g].topRightText.setText(h)},setSaleItemEnabled:function(k,h){var g=this._scrollArea[k];g.mobacoinIcon2.setVisible(h);g.newPricePointer.setVisible(h);g.priceSlash.setVisible(h);g.newPriceText.setVisible(h)},setPremiumItemEnabled:function(h,g){this._scrollArea[h].premiumGashaButtonImage.setVisible(g);this._scrollArea[h].getMoreMobacionIcon.setVisible(!g);this._scrollArea[h].staticGetMoreText.setVisible(!g);this.setBuyButtonEnabled(h,g)},setBuyButtonEnabled:function(h,g){this._scrollArea[h].buyButton.setEnabled(g);this._scrollArea[h].buyButton.setVisible(g);this._scrollArea[h].altButton.setEnabled(!g);this._scrollArea[h].altButton.setVisible(!g)},setItemReady:function(h,g){if(!g){this._scrollArea[h].currencyText.setColor(1,0.1,0.1)}this.setBuyButtonEnabled(h,g)}})}};__ngs._4w={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var a=__ngs.r_(__ngs._n).ViewController;var d=__ngs.r_(__ngs._4x).StoreItemView;var e=__ngs.r_(__ngs._8s).PaymentController;b.StoreItemViewController=a.subclass({classname:"StoreItemViewController",initialize:function($super,g){$super();this._tx=null;this._payment=null;TFUserData.updateGasha();if(g===undefined){g=d}this._viewName="Item";this.createView(g);var k={displayed:true,animated:true,timeout:1000};var h={displayed:true,animated:true,timeout:1000};TFSceneDirector.shiftUIElementUp(this.getView().item);TFSceneDirector.stretchUIElementVertically(this.getView().backgroundImage);this.setHudDisplayData(k,h)},destroy:function($super){$super();if(this._interval!==undefined){clearInterval(this._interval)}},fetchListItems:function(l){console.log("JY: fetchListItems");var m=__ngs.r_(__ngs._8w).StoreTopView;var n=__ngs.r_(__ngs._8x).StoreTopViewDefinition;var h=new m(this,n);var g=[h];var k=this.getItemList();return g.concat(k)},getItemList:function(){console.log("JY: getItemList");var h=[];var m=__ngs.r_(__ngs._8y).StoreElementView;var l=__ngs.r_(__ngs._8z).StoreElementViewDefinition;var g;for(var k in TFGameData._itemPacksJSON){if(TFGameData._itemPacksJSON[k].visibility===false){continue}g=new m(this,l);g.nameLabel.setText(Localization.getString(TFGameData._itemPacksJSON[k].name));g.descriptionLabel.setText(Localization.getString(TFGameData._itemPacksJSON[k].description));g.costLabel.setText(TFGameData._itemPacksJSON[k].price.toString());TFUtils.changeImageOnSprite(g.elementImage,"Content/Images8x/UI/StoreItems/"+TFGameData._itemPacksJSON[k].img);if(Core.Capabilities.getPlatformOS()=="Android"){TFUtils.changeImageOnSprite(g.currencyImage,"Content/Images8x/UI/icon/icon_mobacoin.png")}else{TFUtils.changeImageOnSprite(g.currencyImage,"Content/Images8x/UI/icon/icon_currency_cybercash.png")}g.actionButton.info.sku=TFGameData._itemPacksJSON[k].sku;g.actionButton.info.id=TFGameData._itemPacksJSON[k].id;g.actionButton.info.description=TFGameData._itemPacksJSON[k].name;g.sort=TFGameData._itemPacksJSON[k].sort;g.actionButton.setOnPressCallback(this.purshcaseItem.bind(this));h.push(g)}return h},purshcaseItem:function(g){console.log("JY: purchaseItem");if(!Server.isConnectionAvailable()){TFUtils.showErrorMessages(Localization.getString("ui_pleasecheckconnection"));return}this._pucharseitem=g.info.id;this._payment=new e(null,this.onTXPurchase.bind(this),null);this._payment.createSimpleTransaction(g.info.sku,g.info.description)},onTXPurchase:function(g){console.log("JY: onTXPurchase");this._tx=g;Server.purchaseItem(g.id,this.popUp.bind(this),false)},popUp:function(h,m){console.log("JY: popUp");var g=__ngs.r_(__ngs._3y).PopUpController;var k={};var l=m;if(h){TFUtils.showErrorMessages(m);e.cancelPendingTransactions()}else{TFUserData.items=m.allItems;k.title=Localization.getString("ui_purchaseresult");k.fusionCost=Localization.getString("ui_itemsuccessfuladd");k.cancelButtonText=Localization.getString("ui_continue");k.okButtonText=Localization.getString("ui_inventory");k.cb=TFSceneDirector.showInventory.bind(TFSceneDirector);TFSceneDirector._showDialog(new g(k))}this._tx=null;this._payment=null},setBottomHudView:function(h){var g=__ngs.r_(__ngs._8t).BottomHudStoresInventoryView;h.updateHudWithView(g);h.updateEventStoreButton((TFUserData.curEventId!=undefined))}})}};__ngs._4x={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var d=__ngs.r_(__ngs._7p).View;var b=__ngs.r_(__ngs._90).StoreItemViewDefinition;a.StoreItemView=d.subclass({classname:"StoreItemView",initialize:function($super,e){$super(e,b)},destroy:function($super){$super()}})}};__ngs._4y={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var a=__ngs.r_(__ngs._4u).StoreViewController;var b=__ngs.r_(__ngs._4v).StoreGashaView;var e=__ngs.r_(__ngs._8s).PaymentController;c.RBStoreViewController=a.subclass({classname:"RBStoreViewController",initialize:function($super,g){$super();this._tx=null;this._payment=null;TFUserData.updateGasha();if(g===undefined){g=b}this._viewName="Gasha";this._storeDef=TFUserData.curEventId;this.createView(g);this.getView()._totalHeight=1500;var k={displayed:true,animated:true,timeout:1000};var h={displayed:true,animated:true,timeout:1000};this._setupStoreGashaView();this.setHudDisplayData(k,h)},destroy:function($super){$super();if(this._interval!==undefined){clearInterval(this._interval)}},onGashaAction:function(g){if(!Server.isConnectionAvailable()){TFUtils.showErrorMessages(Localization.getString("ui_pleasecheckconnection"));return}var h=g.info.id;this._gasha=h;Server.getEventInfo(TFUserData.curEventId,true,this.receiveEventInfo.bind(this,h))},receiveEventInfo:function(k,h,g){if(h){return}if(k.sku.length>0){this.onPremiumAction(k)}else{if(k.currency=="socialPoints"){if(TFUserData.isFreeGashaReady()){this.confirmGasha({type:k.id,txId:1,single:true,isFreeGasha:true})}else{this.confirmGasha({type:k.id,txId:0})}}else{this.confirmGasha({type:k.id,txId:0})}}},setBottomHudView:function(h){var g=__ngs.r_(__ngs._8t).BottomHudStoresInventoryView;h.updateHudWithView(g);h.updateEventStoreButton((TFUserData.curEventId!=undefined))}})}};__ngs._4z={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var g=__ngs.r_(__ngs._7p).View;var e=__ngs.r_(__ngs._91).RBStoreGashaViewDefinition;var c=__ngs.r_(__ngs._8v).GLScrollView;var a=__ngs.r_(__ngs._4v).StoreGashaView;b.RBStoreGashaView=a.subclass({classname:"RBStoreGashaView",initialize:function($super,h,k){$super(h,e)},destroy:function($super){$super()}})}};__ngs._50={_c:null,_d:function(){var g={exports:{}};var d=g.exports;this._c=g;var b=__ngs.r_(__ngs._n).ViewController;var e=__ngs.r_(__ngs._7t).GLList;var h=__ngs.r_(__ngs._92).GiftInboxView;var c=__ngs.r_(__ngs._63).TFFormulas;var a=__ngs.r_(__ngs._89).CardThumbnailView;d.GiftInboxViewController=b.subclass({classname:"GiftInboxViewController",initialize:function($super){$super();this._giftLength=0;this._page=0;this._elementsPerPage=10;this.createView(h);this._listWidth=this._view._viewData.lists[0].width;this._listHeight=this._view._viewData.lists[0].height;this._listItemHeight=this._view._viewData.lists[0].itemHeight;this._listItemWidth=this._view._viewData.lists[0].itemWidth;this._listPos_x=this._view._viewData.lists[0].pos_x;this._listPos_y=this._view._viewData.lists[0].pos_y;this._bottomView.prevButton.setVisible(false);var l={displayed:true,animated:true,timeout:1000};var k={displayed:false,animated:true,timeout:1000};this.setHudDisplayData(l,k);if(this._giftLength===0){this._view.message.setVisible(true);this._view.inventoryButton.setVisible(true);this._view.inventoryButton.setEnabled(true);this._view.spaceBridgeButton.setVisible(true);this._view.spaceBridgeButton.setEnabled(true)}},destroy:function($super){$super()},fetchListItems:function(o){var l=this.getInboxList();var p=__ngs.r_(__ngs._93).GiftInboxBottomView;var r=__ngs.r_(__ngs._94).GiftInboxBottomViewDefinition;this._bottomView=new p(this,r);this._bottomView.prevButton.setVisible(true);this._bottomView.nextButton.setVisible(true);this._topView=new p(this,r);this._topView.acceptAllButton.setVisible(true);this._topView.acceptAllButton.setOnPressCallback(this.onAcceptAllAction.bind(this));var s=[];if(this._giftArray.length>0){s.push(this._topView)}var n=this._elementsPerPage*this._page;var q=this._elementsPerPage*this._page+this._elementsPerPage;for(var m=n;m<q&&m<l.length;m++){s.push(l[m])}if(this._giftArray.length>this._elementsPerPage){s.push(this._bottomView)}this._giftLength=s.length;return s},getInboxList:function(){var r=[];var o=__ngs.r_(__ngs._95).GiftInboxElementView;var q=__ngs.r_(__ngs._96).GiftInboxElementViewDefinition;this._giftArray=TFUserData.getInboxList();this._amountGift=this._giftArray.length-1;console.log("giftArray="+JSON.stringify(this._giftArray));var l;if(this._giftArray.length>0){for(var p in this._giftArray){var k=this._giftArray[p];l=new o(this,q);l.descriptionLabel.setText(Localization.getString(k._desc));l.amountLabel.setText(Localization.getString("ui_amount")+" "+k._amount);if(k.type==70){var n=TFCardsManager.getCardDefinition(k.value);var m={anchor:[0.5,0.5],showSpinner:true};if(n.type==TFGameData.CARD_TYPE.WEAPON){m.weapon=true}this._cardPanel=new a(this,k.value,l._definitions.elementImage.size_x*0.785,l._definitions.elementImage.size_y,m);this._cardPanel.setPosition(l._definitions.elementImage.pos_x+l._definitions.elementImage.size_x*0.5,l._definitions.elementImage.pos_y+l._definitions.elementImage.size_y*0.5);l.addChild(this._cardPanel)}else{TFUtils.changeImageOnSprite(l.elementImage,k._img)}l.actionButton.setOnPressCallback(this.onAcceptOneAction.bind(this,this._giftArray[p].id));r.push(l)}}else{if(this._view){this._view.message.setVisible(true);this._view.inventoryButton.setVisible(true);this._view.inventoryButton.setEnabled(true);this._view.spaceBridgeButton.setVisible(true);this._view.spaceBridgeButton.setEnabled(true)}}return r},onCardSelected:function(m){var p=m.info.cardID;var n={};var o=TFCardsManager.getCardDefinition(p);var l=c.getStatusForLevel(o,1);n.stats=l;n.CardDefinition=p;var k;if(o.type==TFGameData.CARD_TYPE.TRANSFORMER){k=__ngs.r_(__ngs._80).FullScreenCardController}else{k=__ngs.r_(__ngs._8a).FullScreenWeaponCardController}TFSceneDirector._showDialog(new k(n,true))},reloadInfoUser:function(m,l){console.log("GiftInboxViewController.reloadInfoUser called ");if(m){console.log("GiftInboxViewController.reloadInfoUser Error, cannot retrieve used data! error=%s",JSON.stringify(m))}else{TFUserData.syncFrom(l);TFSceneDirector.getTopHudViewController().update();this.refreshList();if(!TFGameData._justOverflowFlag&&TFUserData.cardsLimbo&&TFUserData.cardsLimbo.length>0){var k=__ngs.r_(__ngs._87).OverLimitCardsController;TFSceneDirector._showDialog(new k());TFGameData._justOverflowFlag=true}}},getInfoGiftFromServer:function(l,k){if(l){return}},refreshList:function(){if(this.getView()&&this.getView()["giftInboxList"]){cells=this.fetchListItems();this.getView()["giftInboxList"].destroy();this.getView()["giftInboxList"]=new e(this._listWidth,this._listHeight,undefined,undefined,undefined,undefined,this.getView());this.getView()["giftInboxList"].setItemSize(new Core.Size(this._listItemWidth,this._listItemHeight));this.getView()["giftInboxList"].setPosition(this._listPos_x,this._listPos_y);this.getView().addChild(this.getView()["giftInboxList"]);for(var k in cells){this.getView()["giftInboxList"].addItem(cells[k])}console.log("UNBLOCKING ACTIONS claimResult");this._blocked=false}TFSceneDirector._blocked=null;TFSceneDirector.enableBack()},onNext:function(){var k=Math.floor(this._amountGift/this._elementsPerPage);if(this._page<k){this._page++;this.refreshList()}if(this._page==k){this._bottomView.nextButton.setVisible(false);this._bottomView.prevButton.setVisible(true)}},onPrev:function(){var k=0;if(this._page>=1){this._page--;this.refreshList()}if(this._page==k){this._bottomView.prevButton.setVisible(false);this._bottomView.nextButton.setVisible(true)}},onAcceptOneAction:function(k){if(this._blocked){console.log("ACTION BLOCKED onAcceptOneAction id="+k);return}console.log("BLOCKING ACTIONS onAcceptOneAction id="+k);this._blocked=true;TFSceneDirector._blocked=true;TFSceneDirector.disableBack("AcceptOneGift");Server.giftingClaimOne(k,this.claimResult.bind(this))},onAcceptAllAction:function(m){if(this._blocked){console.log("ACTION BLOCKED onAcceptAllAction id="+m);return}m.setEnabled(false);console.log("BLOCKING ACTIONS onAcceptAllAction id="+m);this._blocked=true;TFSceneDirector._blocked=true;TFSceneDirector.disableBack("AcceptAllGifts");var k=[];for(var l in this._giftArray){k.push(this._giftArray[l].id)}Server.giftingClaimAll(k,this.claimResult.bind(this))},claimResult:function(k,m){var l=m;if(k){TFUtils.showErrorMessages(m,function(){this._blocked=false;TFSceneDirector.enableBack();TFSceneDirector._blocked=false}.bind(this))}else{Server.getCurrentUser(this.reloadInfoUser.bind(this))}},onGoInventory:function(){console.log("--------------------------inventory");TFSceneDirector.showInventory()},onSpaceBridge:function(){TFSceneDirector.showStore()}})}};__ngs._51={_c:null,_d:function(){var g={exports:{}};var d=g.exports;this._c=g;var b=__ngs.r_(__ngs._n).ViewController;var e=__ngs.r_(__ngs._97).CollectionView;var a=__ngs.r_(__ngs._r).TFCardsManager;var c=__ngs.r_(__ngs._63).TFFormulas;d.CollectionViewController=b.subclass({classname:"CollectionViewController",initialize:function($super){$super();this.createView(e);TFSceneDirector.stretchUIElementHorizontally(this.getView().backgroundImage,true);this._totalCardsList=[];this._historyCardsList=[];this._transformersList=[];this._weaponsList=[];this._transformersHistoryList=[];this._weaponsHistoryList=[];this.getView(false).pageMaxLabel.setText(" / 26");this._maxCardsPerPage=this.getView(false)._definitions.cardArea.info.num_rows*this.getView(false)._definitions.cardArea.info.num_cols;this.getView(false).prevPageButton.setDebounce(0);this.getView(false).nextPageButton.setDebounce(0);TFSceneDirector.stretchUIElementVertically(this.getView(false).backgroundImage);TFSceneDirector.showWaitingSpinner("pelao ql","noTimeOut");Server.getCardsHistory(false,function(l,m){TFSceneDirector.dismisWaitingSpinner();if(l){console.log("CollectionViewController.reloadInfoUser Error, cannot retrieve used data! error=%s",JSON.stringify(l))}else{TFUserData.syncFrom(m)}this.discriminateCardsType();this.onTransformersSelected();this.updateCardList()}.bind(this));var k={displayed:true,animated:true,timeout:1000,mode:"button_only"};var h={displayed:true,animated:true,timeout:1000};this.setHudDisplayData(k,h)},destroy:function($super){$super()},discriminateCardsType:function(){var m=a.getAllCards();var s=a.getHistoryCardsClon();for(var q=0;q<m.length;q++){if(m[q].enabled){if(m[q].type==TFGameData.CARD_TYPE.TRANSFORMER){this._transformersList.push(m[q]);for(var t in s){var p=s[t];if(m[q].id==Object.keys(p)){this._transformersHistoryList.push(s[t]);index=s.indexOf(p);if(index!=-1){s.splice(index,1)}break}}}else{if(m[q].type==TFGameData.CARD_TYPE.WEAPON){this._weaponsList.push(m[q]);for(var r in s){var n=s[r];if(m[q].id==Object.keys(n)){this._weaponsHistoryList.push(s[r]);index2=s.indexOf(n);if(index2!=-1){s.splice(index2,1)}break}}}}}}for(var o in TFUserData.cards){var h=a.getCardDefinition(TFUserData.cards[o].definitionId);var l={};l[h.id]=0;if(h.type==TFGameData.CARD_TYPE.TRANSFORMER){this._transformersHistoryList.push(l)}else{this._weaponsHistoryList.push(l)}}this._tfpages=Math.ceil(this._transformersList.length/this._maxCardsPerPage);this._weaponPages=Math.ceil(this._weaponsList.length/this._maxCardsPerPage)},onTransformersSelected:function(){if(this._blocked===true){return}this._weapon=false;var h=this.getView()._definitions.cardArea.info.card_w;var l=this.getView()._definitions.cardArea.info.card_h;for(var k in this.getView()._cardPanels){this.getView()._cardPanels[k].layout(h,l,{anchor:[0.5,0.5]})}this.getView(false).pageMaxLabel.setText(" / "+this._tfpages);this._totalCardsList=this._transformersList;this._historyCardsList=this._transformersHistoryList;this._maxPage=this._tfpages;this.updateCardList()},onweaponsSelected:function(){if(this._blocked===true){return}this._weapon=true;var h=this.getView()._definitions.cardArea.info.card_w;var l=this.getView()._definitions.cardArea.info.card_h;for(var k in this.getView()._cardPanels){this.getView()._cardPanels[k].layout(h,l,{weapon:true,anchor:[0.5,0.5]})}this.getView(false).pageMaxLabel.setText(" / "+this._weaponPages);this._totalCardsList=this._weaponsList;this._historyCardsList=this._weaponsHistoryList;this._maxPage=this._weaponPages;this.updateCardList()},onCardSelected:function(l){var p=l.info.id+(this._cardPage*this._maxCardsPerPage);var o=l.info.cardID;var m={};var n=a.getCardDefinition(o);var k=c.getStatusForLevel(n,1);m.stats=k;m.CardDefinition=o;m.cbDismiss=function(){this._blocked=false}.bind(this);var h;if(n.type==TFGameData.CARD_TYPE.TRANSFORMER){h=__ngs.r_(__ngs._80).FullScreenCardController}else{h=__ngs.r_(__ngs._8a).FullScreenWeaponCardController}TFSceneDirector._showDialog(new h(m,true))},updateCardList:function(q){if(q&&this._blocked===true){return}if(q){q.setEnabled(false)}this._blocked=true;var u;if(q===undefined){u=0}else{if(q.info.id==-99){u=0}else{if(q.info.id==99){u=this._maxPage-1}else{u=q.info.id}}}if(u<0){u=0}if(u>=this._maxPage){u=this._maxPage-1}this.getView(false).setPageLabel(u+1);this._cardPage=u;var k=this._totalCardsList;var h=this._historyCardsList;var l=false;if(k.length>this._maxCardsPerPage){l=true}this.getView(false).nextPageButton.setEnabled(l);this.getView(false).nextPageButton.info.id=this._cardPage+1;var r=Math.min(k.length,this._maxCardsPerPage);var t=0;for(var p=(r*this._cardPage);p<(r*(this._cardPage+1));p++){if(k[p]){this.getView(false).setCardImageBack(k[p].id,(t+1),this._weapon);this.getView(false).setCards((t+1));var s=k[p].id;for(var v in h){var o=h[v];if(s==Object.keys(o)){this.getView(false).setCardImageFront(k[p].id,(t+1),this._weapon);break}}t++}else{r=t;break}}if(r<this._maxCardsPerPage){for(p=r;p<this._maxCardsPerPage;p++){this.getView(false).hideCards((p+1))}}if(q){q.setEnabled(true)}var m=false;if(this._cardPage!==0){m=true}var n=true;if(this._cardPage>=this._maxPage-1){n=false}this.getView(false).nextPageButton.setEnabled(n);this.getView(false).prevPageButton.setEnabled(m);this.getView(false).prevPageButton.info.id=this._cardPage-1;this.getView(false).firstPageButton.setEnabled(m);this.getView(false).lastPageButton.setEnabled(n);this._blocked=false},fuseType:function(h){TFUserData._fuseType=h.info.type;var k=h.info.type==1?2:1;h.setEnabled(false);h.setVisible(false);this.getView()["fusetype"+k].setEnabled(true);this.getView()["fusetype"+k].setVisible(true);if(h.info.type==1){this.onTransformersSelected()}else{if(h.info.type==2){this.onweaponsSelected()}}},afterViewDisplayed:function(){if((TFUserData.getTutorialState("cyberdex")=="start")){var k=new Object();k.title=Localization.getString("tutorial_cyberdex_title_01");k.text=Localization.getString("tutorial_cyberdex_text_01");var l=__ngs.r_(__ngs._81).TutorialBubbleView;var h=TFSceneDirector.showTutorialDialog(l,k);h.getView().bubble1.setPosition(-320,-100);TFUserData.setNewTutorialState("cyberdex","end")}}})}};__ngs._52={_c:null,_d:function(){var e={exports:{}};var c=e.exports;this._c=e;var b=__ngs.r_(__ngs._n).ViewController;var d=__ngs.r_(__ngs._98).InventoryView;var g=__ngs.r_(__ngs._99).InventoryCellView;var a=__ngs.r_(__ngs._3y).PopUpController;c.InventoryViewController=b.subclass({classname:"InventoryViewController",initialize:function($super){$super();this._cellsAmount=10;this.createView(d);TFSceneDirector.stretchUIElementVertically(this.getView().backgroundImage);this.showItemsOnPage(0);this.selectedButton=undefined;var k={displayed:true,animated:true,timeout:0};var h={displayed:true,animated:true,timeout:0};this.setHudDisplayData(k,h)},destroy:function($super){$super()},setBottomHudView:function(k){var h=__ngs.r_(__ngs._8t).BottomHudStoresInventoryView;k.updateHudWithView(h);k.updateEventStoreButton((TFUserData.curEventId!=undefined))},showItemsOnPage:function(r){console.log("InventoryViewController > showItemsOnPage > page="+r);var s=0;var v,t=0;var w;var u=new g();var n=25;this._page=r;if(this._items){for(var o in this._items){this.getView().items.removeChild(this._items[o])}}this._items=[];this.hideItemTop();for(var o in this.getView()._definitions.items.info.layout){v=320;var k=this.getView()._definitions.items.info.layout[o];console.log("InventoryViewController > showItemsOnPage > rowInfo["+o+"]="+JSON.stringify(k));if(typeof(k)==="string"){if(k==="newpage"){t=0;s++;console.log("InventoryViewController > showItemsOnPage > new page ("+s+")");this.getView().navButtons.setVisible(true);this.getView().navButtons.prevPageButton.setEnabled(r);this.getView().navButtons.nextPageButton.setEnabled(!r)}else{console.log("InventoryViewController > showItemsOnPage > unrecognized item in layout '"+k+"'")}}else{if(s==r){console.log("InventoryViewController > showItemsOnPage > drawing page "+r);if(Object.prototype.toString.call(k)==="[object Array]"){v-=((u._definitions.image.size_x*k.length)+(n*(k.length-1)))*0.5;for(var m in k){var h=k[m];console.log("InventoryViewController > showItemsOnPage > row item info: "+JSON.stringify(h));w=new g(this);w.itemInfo=h;this._items.push(w);this.getView().items.addChild(w);w.setPosition(v,t);console.log("InventoryViewController > showItemsOnPage > position="+v+","+t);var q;var p=0;switch(h.type){case TFGameData.GIFT_TYPE.ITEM:var l=TFGameData.getItemDesc(h.id);q="Content/Images8x/UI/StoreItems/"+l.image;p=TFUserData.getItemQuantity(h.id);break;case TFGameData.GIFT_TYPE.MEDALS:q=TFGameData.getMedalImagePath(h.id);p=TFUserData.getMedalQuantity(h.id);break}TFUtils.changeImageOnSprite(w.image,q);console.log("InventoryViewController > showItemsOnPage > amount="+p);if(p==0){w.button.setIgnore(false);w.image.setColor(0,0,0);w.button.setEnabled(false)}else{w.count.setText(p)}v+=u._definitions.image.size_x+n}t+=u._definitions.image.size_y+n}else{console.log("InventoryViewController > showItemsOnPage > unrecognized non-string non-array in layout: "+JSON.stringify(k))}}}}},onPrevPage:function(){this.showItemsOnPage(0)},onNextPage:function(){this.showItemsOnPage(1)},onItemSelected:function(k){var l=k.getParent();console.log("InventoryViewController > onItemSelected > itemInfo="+JSON.stringify(l.itemInfo));this.showItemTop(l);for(var h in this._items){var m=this._items[h];m.button.setHighlighted(m==l)}},showItemTop:function(h){console.log("InventoryViewController > showItemTop > itemInfo="+JSON.stringify(h.itemInfo));this.getView().usePanel.setVisible(true);this.getView().usePanel.useButton.inventoryItem=h;this.getView().usePanel.useButton.setVisible(true);switch(h.itemInfo.type){case TFGameData.GIFT_TYPE.ITEM:var k=TFGameData.getItemDesc(h.itemInfo.id);this.getView().usePanel.benefitLabel.setText(Localization.getString(k.name));this.getView().usePanel.descriptionLabel.setText(Localization.getString(k.description));this.getView().usePanel.useButton.setText(Localization.getString("ui_use_uc"));break;case TFGameData.GIFT_TYPE.MEDALS:this.getView().usePanel.benefitLabel.setText(Localization.getString(h.itemInfo.id));this.getView().usePanel.descriptionLabel.setText(Localization.getString("ui_"+h.itemInfo.id+"_description"));this.getView().usePanel.useButton.setText(Localization.getString("ui_go_uc"));if(!TFUserData.curEventId&&(h.itemInfo.id.indexOf("Event")!=-1)){this.getView().usePanel.useButton.setVisible(false)}break}},hideItemTop:function(){console.log("InventoryViewController > hideItemTop");this.getView().usePanel.setVisible(false)},onUseItemSelected:function(k){var h=k.inventoryItem.itemInfo;console.log("InventoryViewController > onUseItemSelected > itemInfo="+JSON.stringify(h));switch(h.type){case TFGameData.GIFT_TYPE.ITEM:var m=TFGameData.getItemDesc(h.id);if(m.type=="fusion"){TFSceneDirector.showFreshFusion()}else{if(m.stat=="battle_energy"){this.itemFullMsg=Localization.getString("ui_battlecubesalreadyfull")}else{if(m.stat=="explore_energy"){this.itemFullMsg=Localization.getString("ui_energonalreadyfull")}else{if(m.stat=="total_recovery"){this.itemFullMsg=Localization.getString("ui_energonandbattlecubesalreadyfull")}}}Server.useItem(m.id,this.onItemUsage.bind(this,k.inventoryItem),false)}break;case TFGameData.GIFT_TYPE.MEDALS:if(TFGameData.isEventMedal(h.id)){if(TFUserData.curEventId){TFSceneDirector.showRBStore()}else{var l={};l.fusionCost=Localization.getString("ui_cantuseeventmedals");l.buttons="one";l.cb=null;TFSceneDirector._showDialog(new a(l))}}else{TFSceneDirector.showStore()}break}},onItemUsage:function(l,h,n){console.log("InventoryViewController > onItemUsage > itemInfo="+JSON.stringify(l.itemInfo));var m={AlreadyMaxExploreEnergy:"ui_energonalreadyfull",AlreadyMaxBattleEnergy:"ui_battlecubesalreadyfull",AlreadyMaxEnergy:"ui_energonandbattlecubesalreadyfull"};var k={};if(!h){k.title=Localization.getString("ui_itemused");k.fusionCost=Localization.getString("ui_itemhasbeenused");k.buttons="one";k.cb=null;TFUserData.syncFrom(n);this.showItemsOnPage(this._page);TFSceneDirector._showDialog(new a(k))}else{if(this.itemFullMsg){TFUtils.showErrorMessages(this.itemFullMsg);this.itemFullMsg=null}else{if(m[n]){TFUtils.showErrorMessages(Localization.getString(m[n]))}else{TFUtils.showErrorMessages(Localization.getString("ui_erroritem"))}}}}})}};__ngs._53={_c:null,_d:function(){var b={exports:{}};var e=b.exports;this._c=b;var c=__ngs.r_(__ngs._9a).FusionView;var k=__ngs.r_(__ngs._5l).FusionSelectionViewController;var g=__ngs.r_(__ngs._s).TFUtils;var d=__ngs.r_(__ngs._45).AnimationQueue;var h=__ngs.r_(__ngs._48).TFSoundManager;var l=__ngs.r_(__ngs._r).TFCardsManager;var a=__ngs.r_(__ngs._89).CardThumbnailView;e.FusionViewController=ViewController.subclass({classname:"FusionViewController",SOUND_KEY:"OUT_OF_BATTLE_POINTS_01",initialize:function($super,r,p){$super();console.log("FusionViewController initialize");if(!this.getView()){this.createView(c)}TFSceneDirector.stretchUIElementVertically(this.getView().backgroundImage);var n=this.getView()._definitions.mainCard.size_x;var t=this.getView()._definitions.mainCard.size_y;this._mainPanel=new a(this,undefined,n,t,{anchor:[0.5,0.5],showSpinner:true});this.getView().addChild(this._mainPanel);this._mainPanel.setPosition(this.getView().mainCard.getPosition());this._mainPanel.cardImage.info.main=true;this._mainPanel.setDepth(100);this._mainPanel._glow=new GL2.Sprite();this._mainPanel._glow.setImage("Content/Images8x/UI/06_fusion/upgrade_glow.png",[n+70,t+70],[0.5,0.5],[0,0,1,1]);this._mainPanel.addChild(this._mainPanel._glow);this._mainPanel._glow.setAlpha(0);this._mainPanel._glow.setDepth(100);this._mainPanel._glowWp=new GL2.Sprite();this._mainPanel._glowWp.setImage("Content/Images8x/UI/06_fusion/upgrade_glow.png",[n+70,n+70],[0.5,0.5],[0,0,1,1]);this._mainPanel.addChild(this._mainPanel._glowWp);this._mainPanel._glowWp.setAlpha(0);this._mainPanel._glowWp.setDepth(100);this._fusePanels=[];n=this.getView()._definitions.fuseCard1.size_x;t=this.getView()._definitions.fuseCard1.size_y;for(var o=0;o<TFGlobals.fusionCardsMaxCount.value;o++){this._fusePanels.push(new a(this,undefined,n,t,{anchor:[0.5,0.5],showSpinner:true}));this.getView().addChild(this._fusePanels[this._fusePanels.length-1]);var s="fuseCard"+(o+1);this._fusePanels[o].setPosition(this.getView()[s].getPosition());this._fusePanels[o]._glow=new GL2.Sprite();this._fusePanels[o]._glow.setImage("Content/Images8x/UI/06_fusion/material_glow.png",[n+30,t+30],[0.5,0.5],[0,0,1,1]);this._fusePanels[o].addChild(this._fusePanels[o]._glow);this._fusePanels[o]._glow.setAlpha(0);this._fusePanels[o]._glow.setDepth(100);this._fusePanels[o]._glowWp=new GL2.Sprite();this._fusePanels[o]._glowWp.setImage("Content/Images8x/UI/06_fusion/material_glow.png",[n+30,n+30],[0.5,0.5],[0,0,1,1]);this._fusePanels[o].addChild(this._fusePanels[o]._glowWp);this._fusePanels[o]._glowWp.setAlpha(0);this._fusePanels[o]._glowWp.setDepth(100)}if(TFUserData._fuseType==1){this.getView()["fusetype1"].setEnabled(false);this.getView()["fusetype2"].setEnabled(true);this.getView()["fusetype1"].setVisible(false);this.getView()["fusetype2"].setVisible(true)}else{this.getView()["fusetype1"].setEnabled(true);this.getView()["fusetype2"].setEnabled(false);this.getView()["fusetype1"].setVisible(true);this.getView()["fusetype2"].setVisible(false)}if(TFUserData.getTutorialState("fusion")=="start"){this._fusionTutorialFlag=true}this.loadDataStage();l.loadCardListDetails();var m={displayed:true,animated:true,timeout:0};var q={displayed:true,animated:true,timeout:0};this.setHudDisplayData(m,q)},destroy:function($super){var m=TFSceneDirector._animatingViewController;console.log("FusionViewController > destroy > previousController : "+m);if((m!="FusionViewController"&&m!="FusionSelectionViewController")||(m._className&&m._className=="sellCards")){console.log("FusionViewController > destroy > nullifing selected cards");TFSceneDirector._mainSelectedCard=null;TFSceneDirector._selectedFusionCards=null}$super();console.log("FusionViewController destroy")},clearView:function(){console.log("FusionViewController clearView");if(this.getView()){this.getView().fusionoverlay.setAlpha(1);this.getView().fusionoverlay1.setAlpha(1);this.getView().mainCardIcon.setAlpha(1);this.getView().fuseCardIcon1.setAlpha(1);this.getView().fuseCardIcon2.setAlpha(1);this.getView().fuseCardIcon3.setAlpha(1);this.getView().fuseCardIcon4.setAlpha(1);this.getView().fuseCardIcon5.setAlpha(1);this.getView().fuseCardIcon6.setAlpha(1);this.getView().fuseCardIcon7.setAlpha(1);this.getView().fuseCardIcon8.setAlpha(1);if(this.getView().mainCardIcon.getVisible()){this.getView().mainCardIcon.setAlpha(1)}for(var m=1;m<9;m++){if(this.getView()["fuseCardIcon"+m].getVisible()){this.getView()["fuseCardIcon"+m].setAlpha(1)}}this.getView().fusetype1.setAlpha(1);this.getView().fusetype2.setAlpha(1);this.getView().refreshButton.setAlpha(1);this.getView().fuseButton.setAlpha(1);this.getView().cost.setAlpha(1);if(this.exhaust1){if(this.exhaust1.getParent()){this.exhaust1.getParent().removeChild(this.exhaust1)}this.exhaust1.destroy();this.exhaust1=undefined}if(this.exhaust1Node){if(this.exhaust1Node.getParent()){this.exhaust1Node.getParent().removeChild(this.exhaust1Node)}this.exhaust1Node.destroy();this.exhaust1Node=undefined}this.getView()["fuseButton"].setVisible(false);TFUserData._fuseType=(TFUserData._fuseType)?TFUserData._fuseType:1;if(TFUserData._fuseType==1){this.getView()["fusetype1"].setEnabled(false);this.getView()["fusetype2"].setEnabled(true);this.getView()["fusetype1"].setVisible(false);this.getView()["fusetype2"].setVisible(true)}else{this.getView()["fusetype1"].setEnabled(true);this.getView()["fusetype2"].setEnabled(false);this.getView()["fusetype1"].setVisible(true);this.getView()["fusetype2"].setVisible(false)}this._mainPanel.updateWithCard(undefined);this.getView()["mainCardIcon"].setVisible(true);this.getView().refreshButton.setEnabled(false);this.getView().refreshButton.setVisible(false);for(var m=1;m<TFGlobals.fusionCardsMaxCount.value+1;m++){this.getView()["fuseCard"+m].setEnabled(false);this._fusePanels[m-1].updateWithCard(undefined);this.getView()["fuseCardIcon"+m].setVisible(false)}if(this.glowQueue){this.glowQueue.destroy();this.glowQueue=null}}TFSceneDirector._mainSelectedCard=null;TFSceneDirector._selectedFusionCards=null;this.updateCost();TFSceneDirector.showTopHud(false);TFSceneDirector.showBottomHud(false);this.getView().animateIcons();this._mainPanel._glow.setAlpha(0);this._mainPanel._glowWp.setAlpha(0);for(var m=0;m<TFGlobals.fusionCardsMaxCount.value;m++){this._fusePanels[m]._glow.setAlpha(0);this._fusePanels[m]._glowWp.setAlpha(0)}if(TFSceneDirector._mainSelectedCardAux||TFSceneDirector._mainSelectedCardAux2){TFSceneDirector._mainSelectedCard=TFSceneDirector._mainSelectedCardAux||TFSceneDirector._mainSelectedCardAux2;TFSceneDirector._mainSelectedCardAux2=TFSceneDirector._mainSelectedCard;TFSceneDirector._mainSelectedCardAux=null;TFSceneDirector.showFusion()}},loadDataStage:function(){console.log("FusionViewController > loadDataStage > TFSceneDirector._mainSelectedCard : "+JSON.stringify(TFSceneDirector._mainSelectedCard));if(TFSceneDirector._transformCard1Selected){TFSceneDirector._transformCard1Selected=false;TFSceneDirector._transformCard2Selected=false;TFSceneDirector._mainSelectedCard=null;TFSceneDirector._selectedFusionCards=null}if(TFSceneDirector._sellCardsSelected){TFSceneDirector._selectedFusionCards=null}var n=false;var m=false;var r=false;this.getView()["mainCardIcon"].setVisible(true);var p={anchor:[0.5,0.5],showSpinner:true};if(TFUserData._fuseType==2){p.weapon=true}if(TFSceneDirector._mainSelectedCard){n=true;this._mainPanel.updateWithCard(TFSceneDirector._mainSelectedCard.definitionId,p);this._mainPanel.enableTap();this.getView()["mainCardIcon"].setVisible(false);r=true;for(var q=1;q<TFGlobals.fusionCardsMaxCount.value+1;q++){this.getView()["fuseCard"+q].setEnabled(true);this.getView()["fuseCardIcon"+q].setVisible(true);for(var o in this.getView()._viewData.buttons){if(this.getView()._viewData.buttons[o].name==("fuseCard"+q)){this.getView()["fuseCard"+q].info.pos_x=this.getView()._viewData.buttons[o].pos_x;this.getView()["fuseCard"+q].info.pos_y=this.getView()._viewData.buttons[o].pos_y;break}}}}if(TFSceneDirector._selectedFusionCards){r=true;for(var q=1;q<TFSceneDirector._selectedFusionCards.length+1;q++){m=true;this._fusePanels[q-1].updateWithCard(TFSceneDirector._selectedFusionCards[q-1].definitionId,p);this._fusePanels[q-1].enableTap();this.getView()["fuseCardIcon"+q].setVisible(false);if(q>TFGlobals.fusionCardsMaxCount.value){break}}}else{TFSceneDirector.preservingCost=null}if(n&&m){this.getView()["fuseButton"].setVisible(true);this.getView()["fuseButton"].setIgnore(false);this.getView()["fusetype1"].setVisible(false);this.getView()["fusetype2"].setVisible(false);this.updateCost()}this.getView().refreshButton.setEnabled(r);this.getView().refreshButton.setVisible(r);this.getView().animateIcons()},updateCost:function(){console.log("FusionViewController updateCost");l.setFusionBaseCard(TFSceneDirector._mainSelectedCard);l.setFusionMaterialCards(TFSceneDirector._selectedFusionCards);var m=l.getFusionCost();if(m!=0){this.getView().cost.setVisible(true);this.getView().cost.currencyLabel.setText(m);if(m>TFUserData.getCurrency()){this.getView().cost.currencyLabel.setColor(1,0,0)}}else{TFSceneDirector.preservingCost=null;this.getView().cost.setVisible(false);this.getView().cost.currencyLabel.setColor(251,251,251)}},onBack:function(){console.log("FusionViewController onBack");console.log("back button touch");TFSceneDirector._mainSelectedCard=null;TFSceneDirector._selectedFusionCards=null;TFSceneDirector.showHome()},refreshButton:function(){console.log("FusionViewController refreshButton");console.log("Refresh touch");if(this._fusionTutorialFlag){TFAnalytics.reportGameEvent("UPGRADETUTORIAL",{Step:"ResetButtonPress"})}if(this._fuseTapped==true){return}if(this._blocked===true){return}this._blocked=true;TFSceneDirector._mainSelectedCardAux2=null;this.clearView();this._blocked=false},fuseType:function(m){console.log("FusionViewController fuseType");TFUserData._fuseType=m.info.type;var n=m.info.type==1?2:1;m.setEnabled(false);m.setVisible(false);this.getView()["fusetype"+n].setEnabled(true);this.getView()["fusetype"+n].setVisible(true);TFSceneDirector._mainSelectedCard=null;TFSceneDirector._mainSelectedCardAux=null;TFSceneDirector._mainSelectedCardAux2=null;this.clearView()},fuseButton:function(){console.log("FusionViewController fuseButton");if(this._fusionTutorialFlag){TFAnalytics.reportGameEvent("UPGRADETUTORIAL",{Step:"10_StartButtonPress"})}if(this._blocked===true){return}this._blocked=true;TFSceneDirector.disableBack("fuseButton");this.getView()["fuseButton"].setIgnore(true);if(this._fuseTapped==true){return}this._mainPanel.disableTap();this.getView().refreshButton.setEnabled(false);this.getView().refreshButton.setVisible(false);for(var p=0;p<TFGlobals.fusionCardsMaxCount.value;p++){this._fusePanels[p].disableTap()}this.oldStats=l.getCardStatus(TFSceneDirector._mainSelectedCard.card);var o=this;console.log("Fuse button touch");if(TFSceneDirector._mainSelectedCard&&TFSceneDirector._selectedFusionCards.length>0){l.setFusionBaseCard(TFSceneDirector._mainSelectedCard);l.setFusionMaterialCards(TFSceneDirector._selectedFusionCards);var n=l.getFusionCost();if(TFUserData._fuseType==1){var r="Character"}else{var r="Weapon"}var q=new Object();q.title=Localization.getString("ui_upgradecost");q.fusionCost=Localization.getString("ui_upgradewillcost")+" ";q.fusionCost2="\n"+Localization.getString("ui_asksurewantupgrade");q.fusionCostIcon=n;q.cbDismiss=function(){this.getView()["fuseButton"].setIgnore(false);this._blocked=false;TFSceneDirector.enableBack()}.bind(this);q.cb=function(){this._fuseTapped=true;if(o._fusionTutorialFlag){TFUserData.setNewTutorialState("fusion","fuse");TFAnalytics.reportGameEvent("UPGRADETUTORIAL",{Step:"11_ConfirmButtonPress"})}var t=new Array();for(var s in TFSceneDirector._selectedFusionCards){t.push(TFSceneDirector._selectedFusionCards[s].id)}Server.fuse(TFSceneDirector._mainSelectedCard.id,t,function(v,w){this._fuseTapped=false;var u=new Object();if(!v){if(w.level){if(w.playerCurrency){TFUserData.setTotalCurrency(w.playerCurrency)}u.success=true;u.level=w.level;u.incr_level=w.incr_level;u.oldStats=this.oldStats;u.lastXp=TFSceneDirector._mainSelectedCard.card.xp;u.type=TFSceneDirector._mainSelectedCard.type;u.newXp=w.xp;TFUserData._lastFusionResult=u;var x=l.getCardDefinition(TFSceneDirector._mainSelectedCard.definitionId);if(u.level<x.maxLevel){TFSceneDirector._mainSelectedCardAux=TFSceneDirector._mainSelectedCard}TFSceneDirector._mainSelectedCard.card.xp=w.xp;TFSceneDirector.preservingCost=null;this.fusionAnimation(u)}else{u.success=false;u.errorMsg="UpgradeError: error code: "+w.status.code;TFUserData._lastFusionResult=u;this._blocked=false;this._fuseTapped=false;TFSceneDirector.enableBack();this.getView()["fuseButton"].setIgnore(false)}}else{g.showErrorMessages(w);u.success=false;u.errorMsg=w;TFUserData._lastFusionResult=u;this._blocked=false;this._fuseTapped=false;TFSceneDirector.enableBack();this.getView()["fuseButton"].setIgnore(false)}}.bind(o))};var m=__ngs.r_(__ngs._3y).PopUpController;if(n<TFUserData.getCurrency()){TFSceneDirector._showDialog(new m(q))}else{console.log("###Not enough money");q.title=Localization.getString("ui_insufficientcredits");q.fusionCost=Localization.getString("ui_costofupgrade");q.fusionCost2=Localization.getString("ui_exceedsyourbalance");q.fusionCostNegative=n;q.buttons="one";q.cb=function(){this._blocked=false;TFSceneDirector.enableBack()}.bind(this);TFSceneDirector._showDialog(new m(q));h.playSound(this.SOUND_KEY)}}else{console.log("###Please select a Base Card and atleast 1 other Card")}},fusionAnimation:function(o){var n=this;var p=this.createAnimationQueue();var m=new Core.Point(n.getView()._definitions.mainCard.pos_x,n.getView()._definitions.mainCard.pos_y);p.pushCallback(function(){TFSceneDirector.hideBottomHud(true);TFSceneDirector.hideTopHud(true);this.getView().stopAnimatingIcons()}.bind(n)).pushAnimation(500);p.pushCallback(function(){var q=this.createAnimationQueue();q.pushAnimation(1000,d.Curve.Linear);q.tween(d.Interpolate.scalar(1,0),function(s){this.getView().fusionoverlay.setAlpha(s);this.getView().fusionoverlay1.setAlpha(s);this.getView().mainCardIcon.setAlpha(s);this.getView().fuseCardIcon1.setAlpha(s);this.getView().fuseCardIcon2.setAlpha(s);this.getView().fuseCardIcon3.setAlpha(s);this.getView().fuseCardIcon4.setAlpha(s);this.getView().fuseCardIcon5.setAlpha(s);this.getView().fuseCardIcon6.setAlpha(s);this.getView().fuseCardIcon7.setAlpha(s);this.getView().fuseCardIcon8.setAlpha(s);if(this.getView().mainCardIcon.getVisible()){this.getView().mainCardIcon.setAlpha(s)}for(var r=1;r<9;r++){if(this.getView()["fuseCardIcon"+r].getVisible()){this.getView()["fuseCardIcon"+r].setAlpha(s)}}this.getView().fusetype1.setAlpha(s);this.getView().fusetype2.setAlpha(s);this.getView().refreshButton.setAlpha(s);this.getView().fuseButton.setAlpha(s);this.getView().cost.setAlpha(s)}.bind(n));q.start()}.bind(n)).pushAnimation(500);p.pushCallback(function(){this.getView().refreshButton.setVisible(false);this.getView().fuseButton.setVisible(false);this.getView().refreshButton.setEnabled(false);this.getView().fuseButton.setEnabled(false)}.bind(n)).pushAnimation(500);p.pushCallback(function(){h.playSound("Upgrade_Start");var q=__ngs.r_(__ngs._62).TFParticleManager;q.instantiate();this.exhaust1=q.createEmitter("powerup");this.exhaust1.play();this.exhaust1Node=new GL2.Node();this.exhaust1.setScale(2);this.exhaust1Node.addChild(n.exhaust1);this.exhaust1Node.setPosition(0,0);this.getView().addChild(n.exhaust1Node);this.exhaust1Node.setDepth(-5)}.bind(n)).pushAnimation(500);p.pushCallback(function(){for(var r=1;r<=TFSceneDirector._selectedFusionCards.length;r++){var v=(new Core.Point(n.getView()["fuseCard"+r].info.pos_x,n.getView()["fuseCard"+r].info.pos_y));var q=this.createAnimationQueue();var u=Math.random()*300+1000;if(r==TFSceneDirector._selectedFusionCards.length){u=1000}var t=Math.abs(m._y-v._y)+Math.abs(m._x-v._y);q.pushAnimation(u/2,d.Curve.EaseIn);q.tween(d.Interpolate.scalar(0,1),function(w){if(TFUserData._fuseType==TFGameData.CARD_TYPE.TRANSFORMER){this._glow.setAlpha(w)}else{this._glowWp.setAlpha(w)}}.bind(n._fusePanels[r-1]));q.pushAnimation(u,d.Curve.EaseIn);q.tween(d.Interpolate.point(v,m),function(w,y,x){this.setPosition(x.getX(),x.getY())}.bind(n._fusePanels[r-1],t,v));q.start()}var s=this.createAnimationQueue();s.pushAnimation(1500,d.Curve.Linear);s.tween(d.Interpolate.scalar(0,1),function(w){if(TFUserData._fuseType==TFGameData.CARD_TYPE.TRANSFORMER){this._mainPanel._glow.setAlpha(w)}else{this._mainPanel._glowWp.setAlpha(w)}}.bind(n));s.start()}.bind(n)).pushAnimation(3000);p.pushCallback(function(){TFSceneDirector.getTopHudViewController().update();var r=new Object();r.usercard=TFSceneDirector._mainSelectedCard.usercard;r.callback=function(){this._blocked=false;this.clearView();TFSceneDirector.enableBack();if(this._fusionTutorialFlag){TFAnalytics.reportGameEvent("UPGRADETUTORIAL",{Step:"13_FusionRewardDismiss"})}}.bind(this);var s=__ngs.r_(__ngs._9b).FusionRewardController;TFSceneDirector._showDialog(new s(r));for(var q=1;q<=TFSceneDirector._selectedFusionCards.length;q++){n.getView()["fuseCard"+q].setPosition(n.getView()["fuseCard"+q].info.pos_x,n.getView()["fuseCard"+q].info.pos_y)}this.exhaust1Node.setDepth(101)}.bind(n));p.start();h.setMusicEnabled(false)},dummybutton:function(){console.log("FusionViewController dummybutton");console.log("dummybutton touch")},onCardSelected:function(m){if(this._blocked===true){return}if(m.info.main){this.gotoMainSelectView()}else{this.gotoSelectView()}},gotoMainSelectView:function(m){if(this._blocked===true){return}if(this._fusionTutorialFlag){TFAnalytics.reportGameEvent("UPGRADETUTORIAL",{Step:"02_GotoMainCardSelection"})}console.log("FusionViewController gotoMainSelectView");TFSceneDirector._mainSelectView=true;TFSceneDirector.showFusionCards(true,this.classname,undefined,true)},gotoSelectView:function(m){if(this._blocked===true){return}if(this._fusionTutorialFlag){TFAnalytics.reportGameEvent("UPGRADETUTORIAL",{Step:"06_GotoMaterialCardSelection"})}console.log("FusionViewController gotoSelectView");TFSceneDirector._materialSelectView=true;TFSceneDirector.showFusionCards(false,this.classname)},startTutorial:function(){console.log("FusionViewController startTutorial");var m=__ngs.r_(__ngs._4g).SideSelectionViewController;TFSceneDirector.pushViewController(new m())},afterViewDisplayed:function(){console.log("FusionViewController afterViewDisplayed");if(this._fusionTutorialFlag||TFUserData.getTutorialState("fusion")=="start"){var o=new Object();var m="";if(TFSceneDirector._mainSelectedCard&&TFSceneDirector._selectedFusionCards){o.title=Localization.getString("tutorial_fusion_title_05");o.text=Localization.getString("tutorial_fusion_text_05");o.tutorialId="tutorial_fusion_title_05";m="09_tut5Close"}else{if(TFSceneDirector._mainSelectedCard){o.title=Localization.getString("tutorial_fusion_title_03");o.text=Localization.getString("tutorial_fusion_text_03");o.tutorialId="tutorial_fusion_title_03";m="05_tut3Close"}else{o.title=Localization.getString("tutorial_fusion_title_01");o.text=Localization.getString("tutorial_fusion_text_01");o.tutorialId="tutorial_fusion_title_01";m="01_tut1Close"}}o.cb=function(){TFAnalytics.reportGameEvent("UPGRADETUTORIAL",{Step:m})};var p=__ngs.r_(__ngs._81).TutorialBubbleView;var n=TFSceneDirector.showTutorialDialog(p,o);n.getView().bubble1.setPosition(-320,-100)}}})}};__ngs._54={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var b=__ngs.r_(__ngs._n).ViewController;var a=__ngs.r_(__ngs._3y).PopUpController;c.ProfileViewController=b.subclass({classname:"ProfileViewController",initialize:function($super,h,e,k){$super();this.createView(e);this.otherData=k;this.fellowsList=[];console.log("ProfileViewController > initialize > otherData : "+JSON.stringify(k));var l={displayed:true,animated:true,timeout:300,mode:"button_only"};var g={displayed:false,animated:true,timeout:300};this.setHudDisplayData(l,g);Server.getPlayerProfile(h,this.receivePlayerInfo.bind(this));var l={displayed:true,animated:true,timeout:100,mode:"button_only"};var g={displayed:false,animated:true,timeout:100};var e=this.getView();if(this.otherData.greetSent&&e.cheerButton!==undefined){e.cheerButton.setText(Localization.getString("ui_cheered_uc"));e.cheerButton.setEnabled(false)}if(e&&e.allyButton){e.allyButton.setVisible(false)}this.setHudDisplayData(l,g)},destroy:function($super){$super()},fetchFriendsList:function(h,m){if(h){TFUtils.showErrorMessages(m);return}this.fellowsList=[];if(m.fellowsList){for(var l=0;l<m.fellowsList.length;l++){this.fellowsList.push(m.fellowsList[l].gamerTag)}}if(m.pendingList){for(var g=0;g<m.pendingList.length;g++){this.fellowsList.push(m.pendingList[g].gamerTag)}}if(m.waitingList){for(var e=0;e<m.waitingList.length;e++){this.fellowsList.push(m.waitingList[e].gamerTag)}}if(this.getView()&&this.getView().allyButton){this.getView().allyButton.setVisible(this._checkShouldShowInviteAllieButton())}},_checkShouldShowInviteAllieButton:function(){var e=true;for(var g=0;g<this.fellowsList.length;g++){if(this.fellowsList[g].toUpperCase()===this.gamerTag.toUpperCase()){e=false;break}}if(this.gamerTag==TFUserData.getGamerTag()){e=false}return e},receivePlayerInfo:function(e,h){console.log("ProfileViewController > receivePlayerInfo > error : "+JSON.stringify(e));console.log("ProfileViewController > receivePlayerInfo > data : "+JSON.stringify(h));if(e){TFUtils.showErrorMessages(h);return}console.log("ProfileViewController > receivePlayerInfo > full data");for(var g in h){if(h.hasOwnProperty(g)){console.log("   "+g+" : "+JSON.stringify(h[g]))}}this.name=h.name;this.gamerTag=h.gamerTag;this.level=h.level;this.xp=h.xp;this.wins=h.stats.wins;this.losses=h.stats.losses;this.totalCards=h.totalCards;this.collectionNumber=h.collectionNumber;this.pilotNumber=h.collectionNumberWeapons;this.gearNumber=h.collectionNumberTransformers;this.leaderCard=h.deck.status2[0].gearDefinitionId;if(this.getView()){this.getView().fillUpScreen();TFUtils.downloadAvatars([this.name],this.addAvatarInView.bind(this),{playerButton:{}})}Server.getAllUserFellows(this.fetchFriendsList.bind(this))},getLeaderCard:function(){return this.leaderCard},getPlayerName:function(){return this.name},getPlayerGamerTag:function(){return this.gamerTag},getLevelProgress:function(){var e=this.xp-TFGameData._levelsJSON[this.level].xpCumulative;var g;if(TFGameData._levelsJSON[this.level+1]==undefined){g=0}else{g=e/TFGameData._levelsJSON[this.level+1].xpRequired}return g},getLevel:function(){return this.level},getTransformerCards:function(){return this.gearNumber},getWeaponCards:function(){return this.pilotNumber},getCardsCollected:function(){return this.collectionNumber},addAvatarInView:function(g){var e=g.imageFile;Storage.FileSystem.stat(e,{},function(k,h){if(k){console.log("An error occurred while retrieving file information: "+k.description)}else{if(g&&g.playerButton){var l=new GL2.Texture(e,{readImageAsync:true},function(n,m){if(n){console.log("Unable to read image file: "+m.getFilename()+" error : "+n.description)}else{console.log("The image file was read: "+m.getFilename());if(this.getView()&&this.getView().classname=="ProfileView"){this.getView().setAvatar(e)}m.destroy()}}.bind(this))}}}.bind(this))},onCheerButtonPressed:function(){Server.cheerPlayer([this.name],this.cheerDone.bind(this))},cheerDone:function(h,e){if(h){console.log("[ERROR] ProfileViewController > cheerDone > Server error, returned "+JSON.stringify(h));TFUtils.showErrorMessages(e);return}console.log("ProfileViewController > cheerDone > serverResponse : "+JSON.stringify(e));this.getView().cheerButton.setText(Localization.getString("ui_cheered_uc"));this.getView().cheerButton.setEnabled(false);TFUserData.gashaPoints=e.gashaPoints;TFSceneDirector.getTopHudViewController().updateFriendsPoints();var g=TFUserData.sentNotifications["greets"];var k={};k.userId=this.name;k.dateSent=Server.getTime();g.push(k);var l={};l.title=Localization.getString("ui_congratsexcl");l.fusionCost=Localization.getString("ui_youearned")+" "+e.gashaPointIncrease+" "+Localization.getString("ui_allypointsexcl");l.buttons="one";l.cb=null;TFSceneDirector._showDialog(new a(l))},removeDone:function(g,e){if(g){console.log("ProfileViewController > removeDone > server error")}TFSceneDirector.onBackButton()},onRemoveButtonPressed:function(){var e={};e.text=Localization.getString("ui_confirmwantrf");e.fusionCost="";e.buttons="";e.cb=this._onremoveAction.bind(this);TFSceneDirector._showDialog(new a(e))},_onremoveAction:function(){Server.removeFellows(this.name,this.removeDone.bind(this));this.getView().removeButton.setEnabled(false)},getWins:function(){return this.wins},getLosses:function(){return this.losses},isCheered:function(){return this.otherData.isCheered},onAllyRequestButtonPressed:function(){if(TFUserData.fellowsCount+TFUserData.pendingFellowsCount<TFUserData.maxFellows){var e=this.createAnimationQueue();Server.sendInvite(this.name,this.inviteSent.bind(this));this.getView().allyButton.setEnabled(false)}else{var g=new Object();g.title="You can't send more requests";g.fusionCost="";g.buttons="one";g.cb=null;TFSceneDirector._showDialog(new a(g))}},inviteSent:function(e,h){if(e){var g=new Object();g.title=Localization.getString("ui_errorsendingallyreq");g.fusionCost="";g.buttons="one";g.cb=function(){TFSceneDirector.onBackButton()};TFSceneDirector._showDialog(new a(g));return}var g=new Object();if(h&&h.error==="friend_max_error_other_user_max"){g.title=Localization.getString("ui_allyrequestfailedfull")}else{g.title=Localization.getString("ui_allyreqsentto")+" "+this.gamerTag;g.cb=function(){TFSceneDirector.onBackButton()}}g.fusionCost="";g.buttons="one";TFSceneDirector._showDialog(new a(g));return},onRemovePendingInvitationButtonPressed:function(){this.getView().removeButton.setEnabled(false);Server.cancelInvite(this.name,this.inviteCancelled.bind(this))},inviteCancelled:function(e,h){if(e){var g=new Object();g.title=Localization.getString("ui_errorcancellingpendingreq");g.fusionCost="";g.buttons="one";g.cb=function(){TFSceneDirector.onBackButton()};TFSceneDirector._showDialog(new a(g));return}var g=new Object();g.title=this.gamerTag.toUpperCase()+" "+Localization.getString("ui_reqcancelled");g.fusionCost="";g.buttons="one";g.cb=function(){TFSceneDirector.onBackButton()};TFSceneDirector._showDialog(new a(g));return}})}};__ngs._55={_c:null,_d:function(){var d={exports:{}};var g=d.exports;this._c=d;var c=__ngs.r_(__ngs._n).ViewController;var b=__ngs.r_(__ngs._9c).TransformView;var e=__ngs.r_(__ngs._45).AnimationQueue;var a=__ngs.r_(__ngs._89).CardThumbnailView;var k=__ngs.r_(__ngs._48).TFSoundManager;var h=__ngs.r_(__ngs._3y).PopUpController;var l=__ngs.r_(__ngs._80).FullScreenCardController;g.TransformViewController=c.subclass({classname:"TransformViewController",initialize:function($super,o){$super();if(!this.getView()){this.createView(b)}TFSceneDirector.stretchUIElementVertically(this.getView().backgroundImage);TFSceneDirector.stretchUIElementVertically(this.getView().darkLayer);var m=this.getView()._definitions.card1.size_x;var q=this.getView()._definitions.card1.size_y;this._tfCardPanel=new a(this,undefined,m,q,{anchor:[0.5,0.5]});this._tfCardPanel.setPosition(this.getView()._definitions.card1.pos_x,this.getView()._definitions.card1.pos_y);this._tfCardPanel.cardImage.info.main=true;this.getView().addChild(this._tfCardPanel);this._tfCardPanel.setDepth(100);this._altCardPanel=new a(this,undefined,m,q,{anchor:[0.5,0.5]});this._altCardPanel.setPosition(this.getView()._definitions.card2.pos_x,this.getView()._definitions.card2.pos_y);this.getView().addChild(this._altCardPanel);this._altCardPanel.setDepth(100);this._tfCardPanel.setClipRectEnabled(true);this._altCardPanel.setClipRectEnabled(true);console.log("TransformViewController isTutorial="+o);if(o||(TFGameData._mainTutorialFlag===true)){this._tfCardPanel.disableTap();this._altCardPanel.disableTap();this.getView().refreshView.setVisible(false);this.getView().refreshView.setEnabled(false)}this._isTutorial=o;this.cardButtonIconHeight=180;this.cardButtonImageHeight=222;this.maxLevelMultiplierLeft=5;this.maxLevelMultiplierRight=5;if(!TFGameData._mainTutorialFlag){this.setBonusPercentage()}this.loadDataStage();var p={displayed:true,animated:true,timeout:0};var n={displayed:true,animated:true,timeout:0};this.setHudDisplayData(p,n)},destroy:function($super){var m=TFSceneDirector._animatingViewController;if((m!="TransformViewController"&&m!="TransformSelectionViewController")||(m._className&&m._className=="sellCards")){TFSceneDirector._transformCard1Selected=null;TFSceneDirector._transformCard2Selected=null;TFSceneDirector._mainSelectedCard=null;TFSceneDirector._selectedFusionCards=null}$super()},loadDataStage:function(){if(!TFSceneDirector._transformCard1Selected&&TFSceneDirector._mainSelectedCard){TFSceneDirector._transformCard2Selected=false;TFSceneDirector._mainSelectedCard=null;TFSceneDirector._selectedFusionCards=null}if(!this._isTutorial){if(!TFSceneDirector._transformCard1Selected&&!TFSceneDirector._mainSelectedCard){this.getView()["refreshView"].setEnabled(false);this.getView()["refreshView"].setVisible(false);if(this.getView()["card1"]){this._animateCardButton(this.getView()["card1"])}}else{this.getView()["refreshView"].setEnabled(true);this.getView()["refreshView"].setVisible(true)}}if(TFSceneDirector._transformCard1Selected&&TFSceneDirector._mainSelectedCard){this.getView()["card2"].setEnabled(true);this.getView().card1.setVisible(false);this.getView().staticRobotFormText.setVisible(false);this._tfCardPanel.updateWithCard(TFSceneDirector._mainSelectedCard.definitionId,{anchor:[0.5,0.5],showSpinner:true});if(TFSceneDirector._mainSelectedCard.stats){var m=TFSceneDirector._mainSelectedCard.stats;this.getView().stat11.setText(Math.round(m.status1*this.maxLevelMultiplierLeft/100));this.getView().stat21.setText(Math.round(m.status2*this.maxLevelMultiplierLeft/100));this.getView().stat31.setText(Math.round(m.status3*this.maxLevelMultiplierLeft/100))}if(!TFSceneDirector._transformCard2Selected){this._animateCardButton(this.getView()["card2"])}}else{this.getView().staticRobotFormText.setVisible(true)}if(TFSceneDirector._transformCard2Selected&&TFSceneDirector._selectedFusionCards&&TFSceneDirector._selectedFusionCards[0]){this.getView().card2.setVisible(false);this.getView().staticAltFormText.setVisible(false);this._altCardPanel.updateWithCard(TFSceneDirector._selectedFusionCards[0].definitionId,{anchor:[0.5,0.5],showSpinner:true});if(TFSceneDirector._selectedFusionCards[0].stats){var m=TFSceneDirector._selectedFusionCards[0].stats;this.getView().stat12.setText(Math.round(m.status1*this.maxLevelMultiplierRight/100));this.getView().stat22.setText(Math.round(m.status2*this.maxLevelMultiplierRight/100));this.getView().stat32.setText(Math.round(m.status3*this.maxLevelMultiplierRight/100));if(TFSceneDirector._mainSelectedCard.stats){var o=TFSceneDirector._mainSelectedCard.stats;this.getView().statMid1.setText("+"+(Math.round(o.status1*this.maxLevelMultiplierLeft/100)+Math.round(m.status1*this.maxLevelMultiplierRight/100)));this.getView().statMid2.setText("+"+(Math.round(o.status2*this.maxLevelMultiplierLeft/100)+Math.round(m.status2*this.maxLevelMultiplierRight/100)));this.getView().statMid3.setText("+"+(Math.round(o.status3*this.maxLevelMultiplierLeft/100)+Math.round(m.status3*this.maxLevelMultiplierRight/100)));var n=TFGameData._configJSON.fusionContributionBases[TFSceneDirector._mainSelectedCard.rarity-1]+TFGameData._configJSON.fusionContributionBases[TFSceneDirector._selectedFusionCards[0].rarity-1];this.getView().showCost(n)}}}else{this.getView().staticAltFormText.setVisible(true)}if(TFSceneDirector._transformCard1Selected&&TFSceneDirector._transformCard2Selected){this.getView()["transformButton"].setEnabled(true)}},_animateCardButton:function(m){this._cardAnimationQueue=this.createAnimationQueue();this._cardAnimationQueue.pushAnimation(500,e.Curve.EaseIn);this._cardAnimationQueue.tween(e.Interpolate.scalar(0.3,1),function(n){if(m){m.setAlpha(n)}}.bind(this.getView()));this._cardAnimationQueue.pushAnimation(500,e.Curve.EaseOut);this._cardAnimationQueue.tween(e.Interpolate.scalar(1,0.3),function(n){if(m){m.setAlpha(n)}}.bind(this.getView()));this._cardAnimationQueue.startLooped()},onCardSelected:function(m){if(m.info.main){this.baseCardClick()}else{this.materialCardClick()}},baseCardClick:function(){if(TFUserData.getCards().length<1){TFUtils.createToast("No Cards");return}TFSceneDirector.showTransformCards(true,this.classname,this._isTutorial,true)},materialCardClick:function(){TFSceneDirector.showTransformCards(false,this.classname,this._isTutorial,true)},refreshView:function(){if(this._transformTapped===true){return}TFSceneDirector._transformCard1Selected=false;TFSceneDirector._transformCard2Selected=false;TFSceneDirector._mainSelectedCard=null;TFSceneDirector._selectedFusionCards=null;TFSceneDirector._transformCard1Selected=false;TFSceneDirector._transformCard2Selected=false;TFSceneDirector._mainSelectedCard=null;TFSceneDirector._selectedFusionCards=null;TFSceneDirector.showFreshTransform(false)},transform:function(){if(this._transformTapped===true){return}TFSceneDirector.disableGlobalTouches(this," > transform");TFSceneDirector.disableBack("transform");if(TFUserData.getTutorialState("main")=="start"){if(this._arrow){this.getView().removeChild(this._arrow);this._arrow.destroy();this._arrow=undefined}this.resetRunningAnimations()}if(TFSceneDirector._transformCard1Selected&&TFSceneDirector._transformCard2Selected){var o=new Array();o.push(TFSceneDirector._mainSelectedCard.id);o.push(TFSceneDirector._selectedFusionCards[0].id);var m=TFSceneDirector._mainSelectedCard.definitionId+2;if(TFGameData._mainTutorialFlag==true){var q=0}else{var q=TFGameData._configJSON.fusionContributionBases[TFSceneDirector._mainSelectedCard.rarity-1]+TFGameData._configJSON.fusionContributionBases[TFSceneDirector._selectedFusionCards[0].rarity-1]}var p=false;if(q<TFUserData.getCurrency()){var n=new Object();n.title=Localization.getString("ui_transscantitle");n.fusionCost=Localization.getString("ui_transscanningwillcost")+"   ";n.fusionCost2="\n"+Localization.getString("ui_asksurewanttransscan");n.transformCostIcon=q;n.cbDismiss=function(){this._transformTapped=false;TFSceneDirector.enableBack()}.bind(this);n.cb=function(){this._transformTapped=true;this.getView().refreshView.setVisible(false);this.getView().refreshView.setEnabled(false);this.getView()["transformButton"].setEnabled(false);this._tfCardPanel.disableTap();this._altCardPanel.disableTap();if(TFGameData._mainTutorialFlag==true){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"13_CONFIRMTRANS-SCAN"})}else{TFAnalytics.reportGameEvent("TRANS-SCAN",{Step:"CONFIRMTRANS-SCAN"})}Server.fusionSpecial(o,m,function(t,s){console.log("TransformViewController > transform > resultCardId="+m);if(TFGameData._mainTutorialFlag==true){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"14_TRANS_SCANSERVERRESPONSE",TransScanerror:t})}else{TFAnalytics.reportGameEvent("TRANS-SCAN",{Step:"TRANS_SCANSERVERRESPONSE",error:t})}if(t){console.log("fusionSpecial error: "+JSON.stringify(t));if(t==149){var u={};u.title=Localization.getString("ui_alert");u.text=Localization.getString("ui_bothcardsindeck");u.okButtonText=Localization.getString("ui_todeck");u.cb=function(){TFSceneDirector._mainSelectedCard=undefined;TFSceneDirector._transformCard1Selected=false;TFSceneDirector.onTeamButton()}.bind(TFSceneDirector);u.cbDismiss=function(){this._transformTapped=false;this.getView().refreshView.setVisible(true);this.getView().refreshView.setEnabled(true);this.getView().transformButton.setEnabled(true);this._tfCardPanel.enableTap();this._altCardPanel.enableTap()}.bind(this);TFSceneDirector._showDialog(new h(u))}else{var r=null;if(TFGameData._mainTutorialFlag==true){r={okButtonText:Localization.getString("ui_exitapp")}}TFUtils.showErrorMessages(Localization.getString("ui_checkconn"),function(){if(TFGameData._mainTutorialFlag==true){Device.LifecycleEmitter.exitProcess()}else{this._transformTapped=false;TFSceneDirector.enableBack();this.getView().refreshView.setVisible(true);this.getView().refreshView.setEnabled(true);this.getView()["transformButton"].setEnabled(true);this._tfCardPanel.enableTap();this._altCardPanel.enableTap()}}.bind(this),r);TFSceneDirector.dismisWaitingSpinner();return}}else{if(s){console.log("TransformViewController > transform > response="+JSON.stringify(s));this.startParticles(function(){if(m){var w=TFUserData.getCard(s.addedCardId);var z=TFCardsManager.getCardDefinition(w.definitionId);var y=new Object();y.definitionId=w.definitionId;y.type=z.type;y.usercard=w;if(TFGameData._mainTutorialFlag==true){TFSceneDirector.dismissTutorialDialog();y.destroyCB=function(){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"15_TRANS_SCANRESULTCARDDISMISS"});var C=new Object();C.newCards=TFUserData.getCardsOfFaction(TFGameData._selectedFaction);var B=__ngs.r_(__ngs._4h).GashaViewController;TFSceneDirector.pushViewController(new B(C));TFSceneDirector.enableBack();this.showHud();if(this.getView()&&this.getView().darkLayer){this.getView().darkLayer.setAlpha(0)}}.bind(this)}else{y.destroyCB=function(){TFAnalytics.reportGameEvent("TRANS-SCAN",{Step:"TRANS_SCANRESULTCARDDISMISS"});if(TFUserData.getTutorialState("transscan")=="start"){TFUserData.setNewTutorialState("transscan","end")}this.showHud()}.bind(this)}TFSceneDirector._showDialog(new l(y,true));if(TFGameData._mainTutorialFlag==true){var x=new Object();if(Localization.getString("tutorial_main_title_022")=="tutorial_main_title_022"){x.title=" "}else{x.title=Localization.getString("tutorial_main_title_022")}x.text=Localization.getString("tutorial_main_text_022");x.Id="tutorial_main_title_022";x.cb=function(){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"16_TRANS_SCANRESULTTUTORIALDISMISS"})};var A=__ngs.r_(__ngs._81).TutorialBubbleView;this._tutorialController=TFSceneDirector.showTutorialDialog(A,x);this._tutorialController.getView().bubble1.setPosition(-320,-100)}if(s.playerCurrency){TFUserData.setTotalCurrency(s.playerCurrency)}this.refreshView();if(s.decks){TFUserData.decks=s.decks;var v=__ngs.r_(__ngs._49).TFDeckManager;v.refreshDeckData()}this._transformTapped=false;TFSceneDirector.enableBack();this._tfCardPanel.enableTap();this._altCardPanel.enableTap()}if(s.finalCurrency){TFUserData.setTotalCurrency(s.finalCurrency)}this.refreshView();if(s.cards){TFUserData.cards=s.cards}if(s.cardsLimbo){TFUserData.cardsLimbo=s.cardsLimbo}if(s.decks){TFUserData.decks=s.decks;var v=__ngs.r_(__ngs._49).TFDeckManager;v.refreshDeckData()}TFSceneDirector.getTopHudViewController().update()}.bind(this))}}}.bind(this))}.bind(this)}else{var n=new Object();n.title=Localization.getString("ui_insufficientcredits");n.fusionCost=Localization.getString("ui_costoftransscan");n.fusionCost2=Localization.getString("ui_exceedsyourbalance");n.fusionCostNegative=q;n.buttons="one";p=true}if(TFGameData._mainTutorialFlag==true&&!p){if(n.cb){n.cb()}TFSceneDirector.enableBack()}else{TFSceneDirector._showDialog(new h(n))}}else{NgLogD("****************************both cards not selected")}TFSceneDirector.enableGlobalTouches(this," > transform > popups displayed")},startParticles:function(m){this.removeHud();var n=this.getView().localToScreen(new Core.Point(320,0));this._tfCardPanel.setClipRect(new Core.Rect(0,0,n._x,960));this._altCardPanel.setClipRect(new Core.Rect(n._x,0,n._x,960));this.animateDarkLayer(function(o){this.createLinesEmitter();this.createAnimatedEmitter(o)}.bind(this,m))},animateDarkLayer:function(n){var m=this.createAnimationQueue();m.pushAnimation(1000,e.Curve.Linear);m.tween(e.Interpolate.scalar(0,0.7),function(o){this.getView().darkLayer.setAlpha(o)}.bind(this));m.pushCallback(function(o){o()}.bind(this,n));m.start()},removeHud:function(){TFSceneDirector.hideTopHud(true);TFSceneDirector.hideBottomHud(true)},showHud:function(){TFSceneDirector.showTopHud(true);TFSceneDirector.showBottomHud(true)},createLinesEmitter:function(){var m=__ngs.r_(__ngs._62).TFParticleManager;m.instantiate();this.emitterScanLaser=m.createEmitter("scanLaser");this.emitterScanFog=m.createEmitter("scanFog");k.playSound("TransScan_v2");this.emitterNode=new GL2.Node();this.emitterNode.addChild(this.emitterScanLaser);this.emitterNode.addChild(this.emitterScanFog);this.getView().addChild(this.emitterNode);this.emitterScanLaser.setDepth(130);this.emitterScanFog.setDepth(130);this.emitterNode.setDepth(130);this.emitterScanLaser.setScale(2,1.9);this.emitterScanFog.setScale(2,1.9);this.emitterNode.setPosition(TFGlobals.nativeResolution.x/2,this.getView()._definitions.transformButton.pos_y-50);this.emitterScanFog.play();this.emitterScanLaser.play()},createAnimatedEmitter:function(n){var p=__ngs.r_(__ngs._62).TFParticleManager;p.instantiate();var q=2000;var m=this.createAnimationQueue();this.emitterScanLine1=p.createEmitter("scanLine");this.emitterScanLine2=p.createEmitter("scanLine");this.getView().addChild(this.emitterScanLine1);this.getView().addChild(this.emitterScanLine2);this.emitterScanLine1.setDepth(130);this.emitterScanLine2.setDepth(130);this.emitterScanLine1.setScale(1,3);this.emitterScanLine2.setScale(1,3);this.emitterScanLine1.play();this.emitterScanLine2.play();m.pushAnimation(q,e.Curve.Linear);var r=new Core.Point(this.getView()._definitions.card1.pos_x,this.getView()._definitions.card1.pos_y-this.getView()._definitions.card1.size_y*0.5);var o=new Core.Point(this.getView()._definitions.card1.pos_x,this.getView()._definitions.card1.pos_y+this.getView()._definitions.card1.size_y*0.5);m.tween(e.Interpolate.point(r,o),function(s){this.emitterScanLine1.setPosition(this.getView()._definitions.card1.pos_x,s.getY());this.emitterScanLine2.setPosition(this.getView()._definitions.card2.pos_x,s.getY())}.bind(this)).pushAnimation(100);m.pushCallback(this.cardsFusionAnimation.bind(this)).pushAnimation(3500);m.pushCallback(n.bind(this)).pushAnimation(3000);m.pushCallback(function(){if(this.emitterFusionCard){this.emitterFusionCard.destroy()}if(this.emitterScanLine1){this.emitterScanLine1.destroy()}if(this.emitterScanLine2){this.emitterScanLine2.destroy()}if(this.emitterFusionCardCenter){this.emitterFusionCardCenter.destroy()}if(this.emitterScanFog){this.emitterScanFog.destroy()}if(this.emitterScanLaser){this.emitterScanLaser.destroy()}if(this.emitterNode){this.emitterNode.destroy()}this._tfCardPanel.setPosition(this.getView()._definitions.card1.pos_x,this.getView()._definitions.card1.pos_y);this._altCardPanel.setPosition(this.getView()._definitions.card2.pos_x,this.getView()._definitions.card2.pos_y)}.bind(this));m.start()},cardsFusionAnimation:function(){var t=__ngs.r_(__ngs._62).TFParticleManager;t.instantiate();var r=2000;var q=this.createAnimationQueue();var p=this.createAnimationQueue();var o=this.createAnimationQueue();q.pushAnimation(r,e.Curve.Linear);var m=new Core.Point(this.getView()._definitions.card1.pos_x,this.getView()._definitions.card1.pos_y);var s=new Core.Point(this.getView()._definitions.staticTotalText.pos_x+this._tfCardPanel.width/2,this.getView()._definitions.card1.pos_y);q.tween(e.Interpolate.point(m,s),function(v){this._tfCardPanel.setPosition(v.getX(),this.getView()._definitions.card1.pos_y)}.bind(this));q.start();p.pushAnimation(r,e.Curve.Linear);var n=new Core.Point(this.getView()._definitions.card2.pos_x,this.getView()._definitions.card2.pos_y);var u=new Core.Point(this.getView()._definitions.staticTotalText.pos_x-this._altCardPanel.width/2,this.getView()._definitions.card2.pos_y);p.tween(e.Interpolate.point(n,u),function(v){this._altCardPanel.setPosition(v.getX(),this.getView()._definitions.card2.pos_y)}.bind(this));p.start();o.pushAnimation(500);o.pushCallback(function(){this.emitterFusionCard=t.createEmitter("cardFusion");this.getView().addChild(this.emitterFusionCard);this.emitterFusionCard.setDepth(130);this.emitterFusionCard.setPosition((TFGlobals.nativeResolution.x/2)-30,this.getView()._definitions.card1.pos_y);this.emitterFusionCard.setScale(-1,-3);this.emitterFusionCard.play();this.emitterFusionCard2=t.createEmitter("cardFusion");this.getView().addChild(this.emitterFusionCard2);this.emitterFusionCard2.setDepth(130);this.emitterFusionCard2.setPosition((TFGlobals.nativeResolution.x/2)+30,this.getView()._definitions.card2.pos_y);this.emitterFusionCard2.setScale(1,3);this.emitterFusionCard2.play()}.bind(this));o.start();this.emitterFusionCardCenter=t.createEmitter("cardFusionCenter");this.getView().addChild(this.emitterFusionCardCenter);this.emitterFusionCardCenter.setPosition(this.getView()._definitions.staticTotalText.pos_x,this.getView()._definitions.card1.pos_y);this.emitterFusionCardCenter.setScale(1.5,1.5);this.emitterFusionCardCenter.setDepth(130);this.emitterFusionCardCenter.play()},setBonusPercentage:function(){var n=__ngs.r_(__ngs._r).TFCardsManager;if(this.getView().percentageLeft){if(TFSceneDirector._transformCard1Selected){var p=n.getCardLevel(TFSceneDirector._mainSelectedCard.usercard);var o=n.getCardDefinition(TFSceneDirector._mainSelectedCard.definitionId);if(p>=o.maxLevel){this.maxLevelMultiplierLeft=10;this.getView().staticMaxLevelInputTextLeft.setText(Localization.getString("ui_maxlevel_uc"))}this.getView().percentageLeft.setText(this.maxLevelMultiplierLeft)}else{this.getView().percentageLeft.setText(Localization.getString("ui_waitingforinput"));this.getView().percentageLeft.setFontSize(25);this.getView().percentageLeft.setPosition(224,488);this.getView().staticPercentageLeft.setVisible(false);this.getView().staticMaxLevelInputTextLeft.setVisible(false)}}if(this.getView().percentageRight){if(TFSceneDirector._transformCard2Selected){var m=n.getCardLevel(TFSceneDirector._selectedFusionCards[0].usercard);var q=n.getCardDefinition(TFSceneDirector._selectedFusionCards[0].definitionId);if(m>=q.maxLevel){this.maxLevelMultiplierRight=10;this.getView().staticMaxLevelInputTextRight.setText(Localization.getString("ui_maxlevel_uc"))}this.getView().percentageRight.setText(this.maxLevelMultiplierRight)}else{this.getView().percentageRight.setText(Localization.getString("ui_waitingforinput"));this.getView().percentageRight.setFontSize(25);this.getView().percentageRight.setPosition(570,488);this.getView().staticPercentageRight.setVisible(false);this.getView().staticMaxLevelInputTextRight.setVisible(false)}}},onBack:function(){console.log("back button touch");TFSceneDirector._transformCard1Selected=false;TFSceneDirector._transformCard2Selected=false;TFSceneDirector._mainSelectedCard=null;TFSceneDirector._selectedFusionCards=null;if(this._isTutorial){var m=__ngs.r_(__ngs._4g).SideSelectionViewController;TFSceneDirector.pushViewController(new m())}else{TFSceneDirector.showHome()}},afterViewDisplayed:function(){if(TFUserData.getTutorialState("main")=="start"&&!TFGameData._tutorialRunning){this.continueTutorial();var p={displayed:false,animated:true,timeout:0};var n={displayed:false,animated:true,timeout:0};this.setHudDisplayData(p,n)}else{if(TFUserData.getTutorialState("transscan")=="start"){var o=new Object();if(TFSceneDirector._transformCard1Selected&&TFSceneDirector._transformCard2Selected){o.title=Localization.getString("tutorial_transscan_title_04");o.text=Localization.getString("tutorial_transscan_text_04");o.Id="tutorial_transscan_title_04"}else{o.title=Localization.getString("tutorial_transscan_title_01");o.text=Localization.getString("tutorial_transscan_text_01");o.Id="tutorial_transscan_title_01"}if(TFSceneDirector._transformCard1Selected==TFSceneDirector._transformCard2Selected){var q=__ngs.r_(__ngs._81).TutorialBubbleView;var m=TFSceneDirector.showTutorialDialog(q,o);m.getView().bubble1.setPosition(-320,-100)}}}},continueTutorial:function(){if(TFSceneDirector._mainSelectedCard){this.getView().showCost(Localization.getString("ui_free"));if(this._cardAnimationQueue){this._cardAnimationQueue.destroy();this.getView().card2.setAlpha(1)}if(!TFSceneDirector._transformCard1Selected){var n="card1"}else{if(TFSceneDirector._transformCard1Selected&&TFSceneDirector._transformCard2Selected){var q=new Object();if(Localization.getString("tutorial_main_title_02")=="tutorial_main_title_02"){q.title=" "}else{q.title=Localization.getString("tutorial_main_title_02")}q.text=Localization.getString("tutorial_main_text_02");q.Id="tutorial_main_title_02";q.cb=function(){if(TFGameData._mainTutorialFlag==true){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"12_TRANS_SCANTUTORIALDISMISS"})}else{TFAnalytics.reportGameEvent("TRANS-SCAN",{Step:"TRANS_SCANTUTORIALDISMISS"})}};var n="transformButton";var s=__ngs.r_(__ngs._81).TutorialBubbleView;this._tutorialController=TFSceneDirector.showTutorialDialog(s,q);this._tutorialController.getView().bubble1.setPosition(-320,-100);var p=this.getView()._definitions[n].pos_x;var o=this.getView()._definitions[n].pos_y;var r=30;p=p+120;o=o-35;this._arrow=SpriteFactoryCache.createSpriteWithCachedAnimation(TFUtils.getArrowImage(),[120,70],[0,0]);this._arrow.setPosition(p,o);this._arrow.setDepth(4);this.getView().addChild(this._arrow);var m=this.createAnimationQueue();m.pushAnimation(250,e.Curve.EaseIn).tween(e.Interpolate.scalar(p-r,p+r),function(t){this._arrow.setPosition(t,this._arrow.getPosition().getY())}.bind(this));m.pushAnimation(250,e.Curve.EaseOut).tween(e.Interpolate.scalar(p+r,p-r),function(t){this._arrow.setPosition(t,this._arrow.getPosition().getY())}.bind(this));m.startLooped()}}}}})}};__ngs._56={_c:null,_d:function(){var b={exports:{}};var e=b.exports;this._c=b;var h=__ngs.r_(__ngs._3x).Social;var a=__ngs.r_(__ngs._n).ViewController;var c=__ngs.r_(__ngs._45).AnimationQueue;var r=__ngs.r_(__ngs._9d).HomeView;var l=__ngs.r_(__ngs._48).TFSoundManager;var p=__ngs.r_(__ngs._r).TFCardsManager;var k=__ngs.r_(__ngs._49).TFDeckManager;var o=__ngs.r_(__ngs._4a).TFImageManager;var d=__ngs.r_(__ngs._60).TFImageCache;var q=__ngs.r_(__ngs._61).TFEventManager;var m=__ngs.r_(__ngs._4c).TFUpdateEmitter;var n=__ngs.r_(__ngs._9e).ProfileView;var g=__ngs.r_(__ngs._3y).PopUpController;e.HomeViewController=a.subclass({classname:"HomeViewController",MUSIC_KEY:"MAIN_MENU_BACK",twitter_msg:null,initialize:function($super,s){if(!TFUserData._dumpedCards){TFUserData._dumpedCards=true;console.log(this.classname+" > initialize > Dumping user cards:");TFUtils.dumpObject(TFUserData.cards);console.log(this.classname+" > initialize > Dumping user limbo cards:");TFUtils.dumpObject(TFUserData.cardsLimbo)}l.playMusic(this.MUSIC_KEY);$super();this.createView(r,function(){console.log("this.classname="+this.classname);console.log("device name="+Core.Capabilities.getDeviceName());TFSceneDirector.shiftUIElementUp(this.getView(false).techOverlay);TFSceneDirector.shiftUIElementUp(this.getView(false).bgCard1);TFSceneDirector.shiftUIElementUp(this.getView(false).bgCard2);TFSceneDirector.shiftUIElementDown(this.getView(false).dropshadow);TFSceneDirector.stretchUIElementHorizontally(this.getView(false).bgCard1,true);TFSceneDirector.stretchUIElementHorizontally(this.getView(false).bgCard2,true);TFSceneDirector.stretchUIElementHorizontally(this.getView(false).dropshadow,true);TFSceneDirector.shiftUIElementUp(this.getView(false).topBlack);TFSceneDirector.shiftUIElementUp(this.getView(false).dropshadow2);TFSceneDirector.stretchUIElementHorizontally(this.getView(false).topBlack);TFSceneDirector.stretchUIElementHorizontally(this.getView(false).dropshadow2);this.getView()._totalHeight=this.getView()._definitions.bottomButtons.pos_y+this.getView().bottomButtons._definitions.feedBackButton.pos_y+(1-this.getView().bottomButtons._definitions.feedBackButton.anchor_y)*this.getView().bottomButtons._definitions.feedBackButton.size_y;var x=this.getView(false).bgCardReflection1;x.getParent().removeChild(x);this.getView(false).bgCard1.addChild(x);this.getView(false).bgCard1._reflection=x;x=this.getView(false).bgCardReflection2;x.getParent().removeChild(x);this.getView(false).bgCard2.addChild(x);this.getView(false).bgCard2._reflection=x;x=this.getView(false).dim1;x.getParent().removeChild(x);this.getView(false).bgCard1.addChild(x);x=this.getView(false).dim2;x.getParent().removeChild(x);this.getView(false).bgCard2.addChild(x);this.thisBackground=this.getView(false).bgCard1;this.nextBackground=this.getView(false).bgCard2;this.bgStartingPosition=new Core.Point(this.thisBackground.getPosition().getX(),this.thisBackground.getPosition().getY());this.setRandomBgImage();TFUserData.updateGasha();var u=this.updateEnergy.bind(this);m.addElements("HomeViewController",1000,u);if(s===true){this.getView(true).setPosition(0,960);l.playSound("TRANSFORM_SHORT_02")}if(TFUserData._fuseType===undefined){TFUserData._fuseType=1}this._messagesAdded=[];this.updateMessages();var w={displayed:true,animated:true,timeout:150};var v={displayed:false,animated:true,timeout:150};this.setHudDisplayData(w,v);o.dumpImageCounts();d.dumpImageCache();if(TFGameData._mainTutorialFlag){this._mainTutorialFlag=true;TFGameData._mainTutorialFlag=false;TFGameData._mainTutorialEndedFlag=true}TFUserData.curEventId=q.runningEvent?q.runningEvent.eventId:undefined;console.log("HomeViewController > initialize > saving current event ID="+TFUserData.curEventId);if(!TFUserData.curEventId){this.getView().eventButton.setVisible(false)}else{if(!q.eventVisible()){this.getView().eventButton.setVisible(false)}else{this.updateEventTimeLeft();var t=this.createAnimationQueue();t.pushAnimation(4000,c.Curve.Linear);t.pushAnimation(50,c.Curve.Linear);t.tween(c.Interpolate.scalar(0,20),function(y){this.getView().eventButton.eventExclaim.setScale(1+0.5*y/20);this.getView().eventButton.eventExclaim.setRotation(y)}.bind(this));t.pushAnimation(100,c.Curve.Linear);t.tween(c.Interpolate.scalar(20,-20),function(y){this.getView().eventButton.eventExclaim.setRotation(y)}.bind(this));t.pushAnimation(100,c.Curve.Linear);t.tween(c.Interpolate.scalar(-20,20),function(y){this.getView().eventButton.eventExclaim.setRotation(y)}.bind(this));t.pushAnimation(100,c.Curve.Linear);t.tween(c.Interpolate.scalar(20,-20),function(y){this.getView().eventButton.eventExclaim.setRotation(y)}.bind(this));t.pushAnimation(100,c.Curve.Linear);t.tween(c.Interpolate.scalar(-20,20),function(y){this.getView().eventButton.eventExclaim.setRotation(y)}.bind(this));t.pushAnimation(100,c.Curve.Linear);t.tween(c.Interpolate.scalar(20,-20),function(y){this.getView().eventButton.eventExclaim.setRotation(y)}.bind(this));t.pushAnimation(100,c.Curve.Linear);t.tween(c.Interpolate.scalar(-20,20),function(y){this.getView().eventButton.eventExclaim.setRotation(y)}.bind(this));t.pushAnimation(100,c.Curve.Linear);t.tween(c.Interpolate.scalar(20,-20),function(y){this.getView().eventButton.eventExclaim.setRotation(y)}.bind(this));t.pushAnimation(50,c.Curve.Linear);t.tween(c.Interpolate.scalar(-20,0),function(y){this.getView().eventButton.eventExclaim.setScale(1-0.5*y/20);this.getView().eventButton.eventExclaim.setRotation(y)}.bind(this));t.startLooped()}}if(TFUtils.onDev()){this.getView().eventIntroButton.setVisible(this.getView().eventButton.getVisible())}}.bind(this))},onSceneTransitionStart:function(){this.resetRunningAnimations()},onSceneTransitionDone:function(){var s=TFUserData.getUnseenEventFinal();if(s&&(s.length>0)&&!q.eventHidden(s[0])){console.log("Unseen event epilogues="+JSON.stringify(s)+", curEvent="+TFUserData.curEventId);if(!TFUserData.curEventId||(TFUserData.curEventId!=s[0])){Server.eventActive(TFUserData.curEventId,this.receiveEventActive.bind(this,s[0]))}}},receiveEventActive:function(u,v,t,s){console.log("HomeViewController > receiveEventActive > eventId="+u+", eventActive="+v+", error="+t+", response="+JSON.stringify(s));if(!v&&(u!=undefined)){TFSceneDirector.showRBEpilogue(u)}},updateEventTimeLeft:function(){var s=false;var u=q.runningEvent;if(u){var v=Server.getServerTime();var t=new Date(u.expirationTime).valueOf();var w=Localization.getString("ui_timeleftcolon")+" ";if(v<t){var x=t-v;if(this._fullTimeLeft&&TFUtils.onDev()){w+=TFUtils.timeToHuman(x/1000,true)}else{w+=TFUtils.timeToHumanTwoElement(x/1000)}}else{this.getView().eventButton.button.setText(Localization.getString("ui_eventcomplete_uc"));this.getView().eventButton.eventExclaim.setVisible(false);this.getView().eventButton.eventArrow.setVisible(false);if(TFUserData.hasJoinedEvent(TFUserData.curEventId)){w=Localization.getString("ui_collectrewards_uc")}else{this.getView().eventButton.button.setTextOffsetY(0);w=""}s=true}if(this.getView()){this.getView().eventButton.eventTimeLeft.setText(w)}}if(!this._killAnimations&&!s){setTimeout(this.updateEventTimeLeft.bind(this),1000)}},updateEnergy:function(){var s=this.getView(false);if(!s){return}if(!this._ltExpEnergy){this._ltExpEnergy=-1}if(!this._ltBtlEnergy){this._ltBtlEnergy=-1}if(this._ltExpEnergy!=TFUserData.getExploreEnergy()){this._ltExpEnergy=TFUserData.getExploreEnergy();s.setExploreEnergy(TFUserData.getExploreEnergy(),TFUserData.getMaxExploreEnergy())}if(this._ltBtlEnergy!=TFUserData.getBattleEnergy()){this._ltBtlEnergy=TFUserData.getBattleEnergy();s.setBattleEnergy(TFUserData.getBattleEnergy())}},updateBattleEnergy:function(t){var s=this.getView(false);if(!s){return}if(s){s.setBattleEnergy(TFUserData.getBattleEnergy())}},setRandomBgImage:function(){this._bgImages=[];var s=q.runningEvent?q.runningEvent.eventId:undefined;console.log("HomeViewController > setRandomBgImage > eventId="+s);if(s&&q.eventVisible()){console.log("HomeViewController > setRandomBgImage > cycling event images");this._cycleBgImagesUp=true;if(!TFGameData.isReady()){console.log("HomeViewController > setRandomBgImage > game data not ready - trying later");setTimeout(this.setRandomBgImage(),1000)}var C=this.getView(false)._definitions.background.info;var A=C.event_asset_dir+"/"+s+"/";A=A+((C["event_image_"+s])?C["event_image_"+s]:C.event_image);this._bgImages.push(A)}else{console.log("HomeViewController > setRandomBgImage > cycling deck images");var E=TFGameData.DECK_INDEX.MAIN;var t=p.getTransformerCardsIdFromDeck(E);for(var v in t){var B=TFUserData.getCard(t[v]);console.log("card id to cycle="+B.definitionId);var D=TFUtils.getCardFullImagePath(B.definitionId);this._bgImages.push(D)}}if(this._bgImages.length>0){var z=Math.floor((Math.random()*this._bgImages.length));var y=this._bgImages[z];this.prevImagePath=y;if(TFAppDelegate._glView.getActive()){TFUtils.setRemoteImageOnSprite(this.thisBackground,y);TFUtils.setRemoteImageOnSprite(this.thisBackground._reflection,y)}if(this._cycleBgImagesUp){var u=this.bgStartingPosition.getY();this.thisBackground.setPosition(this.bgStartingPosition.getX(),u-100);this.thisBackground.setAlpha(1);this.thisBackground.setDepth(-1);this.nextBackground.setDepth(-2);var x=1000;var w=this.createAnimationQueue();w.pushAnimation(8000,c.Curve.EaseInOut);w.tween(c.Interpolate.scalar(-100,-400),function(F,G){F.setPosition(F.getPosition().getX(),u+G)}.bind(this,this.thisBackground));w.pushAnimation(4000,c.Curve.Linear);w.pushAnimation(8000,c.Curve.EaseInOut);w.tween(c.Interpolate.scalar(-400,-100),function(F,G){F.setPosition(F.getPosition().getX(),u+G)}.bind(this,this.thisBackground));w.pushAnimation(4000,c.Curve.Linear);setTimeout(w.startLooped.bind(w),10)}else{var u=this.bgStartingPosition.getY()-200;this.thisBackground.setPosition(this.bgStartingPosition.getX(),u);this.thisBackground.setAlpha(0);this.thisBackground.setDepth(-1);this.nextBackground.setDepth(-2);var x=1000;var w=this.createAnimationQueue();w.pushAnimation(250,c.Curve.Linear);w.pushAnimation(x,c.Curve.Linear);w.tween(c.Interpolate.scalar(0,1),function(F,G){F.setAlpha(G);F.setPosition(F.getPosition().getX(),u+25*(x/1000)*G)}.bind(this,this.thisBackground));w.pushAnimation(8000-x,c.Curve.EaseOut);w.tween(c.Interpolate.scalar(25*(x/1000),200),function(F,G){F.setPosition(F.getPosition().getX(),u+G)}.bind(this,this.thisBackground));w.pushAnimation(2000,c.Curve.Linear);w.pushCallback(this.nextRandomBgImage.bind(this));w.pushAnimation(1000,c.Curve.Linear);w.tween(c.Interpolate.scalar(0,1),function(F,G){F.setAlpha(1-G)}.bind(this,this.thisBackground));setTimeout(w.start.bind(w),10)}}else{return}},nextRandomBgImage:function(){if(this._killAnimations){return}var u;if(this._cycleBgImagesUp){u=this.bgStartingPosition.getY();this.nextBackground.setPosition(this.bgStartingPosition.getX(),u);this.nextBackground.setAlpha(1)}else{u=this.bgStartingPosition.getY()-400;this.nextBackground.setPosition(this.bgStartingPosition.getX(),u);this.nextBackground.setAlpha(1)}if(this._bgImages.length>0){var y=Math.floor((Math.random()*this._bgImages.length));var t=this._bgImages[y];var x=5;while((this.prevImagePath===t)&&(x>0)){y=Math.floor((Math.random()*this._bgImages.length));t=this._bgImages[y];x=x-1}if(x==0){console.log("Timed out trying to find a non-duplicate card image");this.nextBackground.setPosition(this.bgStartingPosition.getX(),this.bgStartingPosition.getY());return}this.prevImagePath=t;var s=this.createAnimationQueue();s.pushAnimation(16000,c.Curve.EaseOut);s.tween(c.Interpolate.scalar(0,400),function(z,A){z.setPosition(z.getPosition().getX(),u+A)}.bind(this,this.nextBackground));s.pushCallback(this.nextBackground.setDepth.bind(this.nextBackground,-1));s.pushCallback(this.thisBackground.setDepth.bind(this.thisBackground,-2));s.pushAnimation(2000,c.Curve.Linear);s.pushCallback(this.nextRandomBgImage.bind(this));s.pushAnimation(1000,c.Curve.Linear);s.tween(c.Interpolate.scalar(0,1),function(z,A){z.setAlpha(1-A)}.bind(this,this.nextBackground));if(TFAppDelegate._glView.getActive()){var v=0;var w=function(A){v++;if(v==2){A.start();var z=this.thisBackground;this.thisBackground=this.nextBackground;this.nextBackground=z}}.bind(this,s);TFUtils.setRemoteImageOnSprite(this.nextBackground,t,w);TFUtils.setRemoteImageOnSprite(this.nextBackground._reflection,t,w)}s.start()}},onMissionsButtonPressed:function(){if(this._blocked===true||TFSceneDirector._blocked===true){return}this._blocked=true;if(TFUserData.getTutorialState("homescreen")!="end"){return}if(this._mainTutorialFlag){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"ButtonPressMissions"})}var s=TFSceneDirector.getStage();if(s.worldId>0&&s.stageId>0){TFSceneDirector.showMissionSelect(s.worldId,s.stageId,"slideleft")}else{if(s.worldId>0){TFSceneDirector.showStageSelect(s.worldId,"slideleft")}else{TFSceneDirector.showWorldSelect("slideleft")}}setTimeout(function(){this._blocked=false}.bind(this),1000)},onFusionButtonPressed:function(){if(this._blocked===true||TFSceneDirector._blocked===true){return}this._blocked=true;if(TFUserData.getTutorialState("homescreen")!="end"){return}if(this._mainTutorialFlag){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"ButtonPressUpgrade"})}TFSceneDirector.showFreshFusion("crossfade");setTimeout(function(){this._blocked=false}.bind(this),1000)},onBattleButtonPressed:function(){if(this._blocked===true||TFSceneDirector._blocked===true){return}if(!Server.isConnectionAvailable()){TFUtils.showErrorMessages(Localization.getString("ui_pleasecheckconnection"));return}this._blocked=true;if(TFUserData.getTutorialState("homescreen")!="end"){return}if(this._mainTutorialFlag){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"ButtonPressBattle"})}TFSceneDirector.showOpponents("slideleft");setTimeout(function(){this._blocked=false}.bind(this),1000)},onAchievementsButtonPressed:function(){if(TFUserData.getTutorialState("homescreen")!="end"){return}if(this._mainTutorialFlag){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"ButtonPressAchievement"})}TFSceneDirector.showAchievements()},onStoreButtonPressed:function(){if(this._blocked===true||TFSceneDirector._blocked===true){return}this._blocked=true;if(TFUserData.getTutorialState("homescreen")!="end"){return}if(this._mainTutorialFlag){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"ButtonPressSpace-Bridge"})}if(q.eventVisible()){TFSceneDirector.showRBStore(undefined,"slideleft")}else{TFSceneDirector.showStore(undefined,"slideleft")}setTimeout(function(){this._blocked=false}.bind(this),1000)},updateMessages:function(u){var w;if(u===undefined){w=0}else{w=u.info.id}NotificationCenter.updateNotifications();this._messagepage=w;var v=NotificationCenter.getNotificationSet(TFGameData.NOTIFICATION_SETS.DEFAULT).concat(NotificationCenter.getNotificationSet(TFGameData.NOTIFICATION_SETS.SOCIAL));var t=0;var s=this.getView().inboxLabel.info.msg_y_inc;console.log("HomeViewController > updateMessages > messages length="+v.length);for(;t<v.length;t++){this.getView(false)._scrollArea.addChild(v[t]);v[t].setPosition(this.getView().inboxLabel.info.msg_x,this.getView().inboxLabel.info.msg_y_start+(s*t));console.log("HomeViewController > updateMessages > messages["+t+"] pos="+JSON.stringify(v[t].getPosition()));v[t].setDepth(1000);this._messagesAdded.push(v[t]);this.getView()._totalHeight+=s;this.getView().bg_messages_bottom_left.setPosition(this.getView().bg_messages_bottom_left.getPosition().getX(),this.getView().bg_messages_bottom_left.getPosition().getY()+s);this.getView().bg_messages_bottom_right.setPosition(this.getView().bg_messages_bottom_right.getPosition().getX(),this.getView().bg_messages_bottom_right.getPosition().getY()+s);this.getView().bottomButtons.setPosition(this.getView().bottomButtons.getPosition().getX(),this.getView().bottomButtons.getPosition().getY()+s)}if(v.length>0){this.getView().noMessagesLabel.setVisible(false)}},onInventoryButtonPressed:function(){if(this._blocked===true||TFSceneDirector._blocked===true){return}this._blocked=true;if(TFUserData.getTutorialState("homescreen")!="end"){return}if(this._mainTutorialFlag){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"ButtonPressInventory"})}TFSceneDirector.showInventory("slideleft");setTimeout(function(){this._blocked=false}.bind(this),1000)},onFriendsButtonPressed:function(){if(this._blocked===true||TFSceneDirector._blocked===true){return}this._blocked=true;if(TFUserData.getTutorialState("homescreen")!="end"){return}if(this._mainTutorialFlag){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"ButtonPressFriends"})}TFSceneDirector.showFriends("slideleft");setTimeout(function(){this._blocked=false}.bind(this),1000)},setBottomHudView:function(s){s.updateHudWithView(null)},setLeftButton:function(s){s.useLeftButtonAsDeckButton(function(){if(this._mainTutorialFlag){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"ButtonPressTeam"})}}.bind(this))},afterViewDisplayed:function(){if(TFUserData.getTutorialState("homescreen")=="start"){var s=new Object();s.title=Localization.getString("tutorial_home_title_01");s.text=Localization.getString("tutorial_home_text_01");s.Id="tutorial_home_title_01";s.cb=function(){TFAnalytics.reportGameEvent("HOMETUTORIAL",{Step:"HOME1TUTORIALDISMISS"});var u=new Object();u.title=Localization.getString("tutorial_home_title_02");u.text=Localization.getString("tutorial_home_text_02");u.Id="tutorial_home_title_02";var t=[this.getView()._definitions.StoreButton.pos_x-70,this.getView()._definitions.StoreButton.pos_y-35];u.cb=function(){TFAnalytics.reportGameEvent("HOMETUTORIAL",{Step:"HOME2TUTORIALDISMISS"});var w=new Object();w.title=Localization.getString("tutorial_home_title_03");w.text=Localization.getString("tutorial_home_text_03");w.Id="tutorial_home_title_03";var v=[120,137];w.cb=function(){TFAnalytics.reportGameEvent("HOMETUTORIAL",{Step:"HOME3TUTORIALDISMISS"});var y=new Object();y.title=Localization.getString("tutorial_home_title_04");y.text=Localization.getString("tutorial_home_text_04");y.Id="tutorial_home_title_04";var x=[this.getView()._definitions.fusionButton.pos_x+240,this.getView()._definitions.fusionButton.pos_y-35];y.cb=function(){TFAnalytics.reportGameEvent("HOMETUTORIAL",{Step:"HOME4TUTORIALDISMISS"});var A=new Object();A.title=Localization.getString("tutorial_home_title_05");A.text=Localization.getString("tutorial_home_text_05");A.Id="tutorial_home_title_05";var z=[this.getView()._definitions.battleButton.pos_x+20,this.getView()._definitions.battleButton.pos_y-35];A.cb=function(){TFAnalytics.reportGameEvent("HOMETUTORIAL",{Step:"HOME5TUTORIALDISMISS"});var C=new Object();C.title=Localization.getString("tutorial_home_title_06");C.text=Localization.getString("tutorial_home_text_06");C.Id="tutorial_home_title_06";var B=[this.getView()._definitions.missionsButton.pos_x+20,this.getView()._definitions.missionsButton.pos_y-35];C.cb=function(){TFAnalytics.reportGameEvent("HOMETUTORIAL",{Step:"HOME6TUTORIALDISMISS"});if(this._arrow&&this.getView()){this.stopTutorialAnimations();this.getView().removeChild(this._arrow);this._arrow=undefined;TFUserData.setNewTutorialState("homescreen","end")}}.bind(this);this.showNextTutorialDialog(C,B)}.bind(this);this.showNextTutorialDialog(A,z)}.bind(this);this.showNextTutorialDialog(y,x)}.bind(this);this.showNextTutorialDialog(w,v,false,90)}.bind(this);this.showNextTutorialDialog(u,t,true)}.bind(this);this.showNextTutorialDialog(s,null)}},showNextTutorialDialog:function(v,u,s,t){if(this._arrow&&this.getView()){this.stopTutorialAnimations();this.getView().removeChild(this._arrow);this._arrow=undefined}if(u){var w=30;pos_x=u[0];pos_y=u[1];if(s){this._arrow=SpriteFactoryCache.createSpriteWithCachedAnimation(TFUtils.getArrowImage(),[120,70],[0,0],[1,0,-1,1])}else{this._arrow=SpriteFactoryCache.createSpriteWithCachedAnimation(TFUtils.getArrowImage(),[120,70],[0,0])}this._arrow.setPosition(pos_x,pos_y);this._arrow.setDepth(8);if(t){this._arrow.setRotation(t);pos_x=pos_y}this.getView().addChild(this._arrow);this._arrowQueue=this.createAnimationQueue();this._arrowQueue.pushAnimation(250,c.Curve.EaseIn).tween(c.Interpolate.scalar(pos_x-w,pos_x+w),function(x){if(t){this._arrow.setPosition(this._arrow.getPosition().getX(),x)}else{this._arrow.setPosition(x,this._arrow.getPosition().getY())}}.bind(this));this._arrowQueue.pushAnimation(250,c.Curve.EaseOut).tween(c.Interpolate.scalar(pos_x+w,pos_x-w),function(x){if(t){this._arrow.setPosition(this._arrow.getPosition().getX(),x)}else{this._arrow.setPosition(x,this._arrow.getPosition().getY())}}.bind(this));this._arrowQueue.startLooped()}this._bubbleQueue=this.createAnimationQueue();this._bubbleQueue.pushAnimation(50,c.Curve.Linear);this._bubbleQueue.pushCallback(function(){var y=__ngs.r_(__ngs._81).TutorialBubbleView;var x=TFSceneDirector.showTutorialDialogTransparentBack(y,v);x.getView().bubble1.setPosition(-320,-210)});this._bubbleQueue.start()},stopTutorialAnimations:function(){if(this._arrowQueue){this._arrowQueue.destroy();this._arrowQueue=undefined}if(this._bubbleQueue){this._bubbleQueue.destroy();this._bubbleQueue=undefined}},onHelpPressed:function(){TFSceneDirector.disableGlobalTouches("HomeViewController > onHelpPressed");if(TFUserData.getTutorialState("homescreen")!="end"){TFSceneDirector.enableGlobalTouches("HomeViewController > onHelpPressed > early return");return}if(this._mainTutorialFlag){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"ButtonPressHelp"})}var y=TFSceneDirector.getScreenWidth();var u=TFSceneDirector.getScreenHeight();var t=new UI.ViewGeometry.Rect(0,u,y,u);this._baseView=new UI.View();this._baseView.setFrame(t.array());UI.Window.document.addChild(this._baseView);var x=new UI.ViewGeometry.Rect(0,0,y,u);this._webView=new UI.WebView();this._webView.setBackgroundColor("FF000000");this._webView.setFrame(x.array());this._baseView.addChild(this._webView);var w=new UI.ViewGeometry.Rect(y/32,y/32,y/10,y/10);this._cancelButton=new UI.Button();this._cancelButton.setFrame(w.array());this._cancelButton.setOnClick(this.onDismissHelp.bind(this));this._cancelButton.setText("X");this._cancelButton.setStyle(new UI.Style({gradient:{corners:"15",gradient:["FFF0 0.0","FFA0 1.0"]},pressedGradient:{corners:"15",gradient:["FF80 0.0","FFC0 1.0"]}}));this._baseView.addChild(this._cancelButton);var v;if(TFGameData&&TFGameData._configJSON&&TFGameData._configJSON.mainGameHelpUrl){v=TFGameData._configJSON.mainGameHelpUrl}if(!v){v="http://transformers-legends.com/guide/index.html?0002"}this._webView.setViewportEnabled(true);this._webView.loadUrl(v);var s=this.createAnimationQueue();s.pushAnimation(300,c.Curve.Linear).tween(c.Interpolate.scalar(u,0),function(z){this._baseView.setFrame(0,z,y,u)}.bind(this));s.start();TFSceneDirector._viewControllerStack.push({cb:this.onDismissHelp.bind(this)});TFSceneDirector._viewControllerStack.push({});this._helpDisplayed=true},onFeedbackPressed:function(){TFSceneDirector.disableGlobalTouches("HomeViewController > onFeedbackPressed");if(TFUserData.getTutorialState("homescreen")!="end"){TFSceneDirector.disableGlobalTouches("HomeViewController > onFeedbackPressed > early return");return}if(this._mainTutorialFlag){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"ButtonPressFeedback"})}var y=TFSceneDirector.getScreenWidth();var u=TFSceneDirector.getScreenHeight();var t=new UI.ViewGeometry.Rect(0,u,y,u);this._baseView=new UI.View();this._baseView.setFrame(t.array());UI.Window.document.addChild(this._baseView);var x=new UI.ViewGeometry.Rect(0,0,y,u);this._webView=new UI.WebView();this._webView.setBackgroundColor("FF000000");this._webView.setFrame(x.array());this._baseView.addChild(this._webView);var w=new UI.ViewGeometry.Rect(y/32,y/32,y/10,y/10);this._cancelButton=new UI.Button();this._cancelButton.setFrame(w.array());this._cancelButton.setOnClick(this.onDismissHelp.bind(this));this._cancelButton.setText("X");this._cancelButton.setStyle(new UI.Style({gradient:{corners:"15",gradient:["FFF0 0.0","FFA0 1.0"]},pressedGradient:{corners:"15",gradient:["FF80 0.0","FFC0 1.0"]}}));this._baseView.addChild(this._cancelButton);var v;if(TFGameData&&TFGameData._configJSON&&TFGameData._configJSON.mainGameFeedbackUrl){v=TFGameData._configJSON.mainGameFeedbackUrl}if(!v){v="http://transformerslegends.uservoice.com"}this._webView.setViewportEnabled(true);this._webView.loadUrl(v);var s=this.createAnimationQueue();s.pushAnimation(300,c.Curve.Linear).tween(c.Interpolate.scalar(u,0),function(z){this._baseView.setFrame(0,z,y,u)}.bind(this));s.start();TFSceneDirector._viewControllerStack.push({cb:this.onDismissHelp.bind(this)});TFSceneDirector._viewControllerStack.push({});this._helpDisplayed=true},onDismissHelp:function(){if(this._dismissInProc&&this._dismissInProc===true){return}this._dismissInProc=true;if(this._cancelButton){this._cancelButton.setEnabled(false)}console.log("onDismissHelp ",this._helpDisplayed);if(this._helpDisplayed!==true){return}this._helpDisplayed=false;var u=TFSceneDirector.getScreenWidth();var t=TFSceneDirector.getScreenHeight();var s=this.createAnimationQueue();s.pushAnimation(300,c.Curve.Linear).tween(c.Interpolate.scalar(0,t),function(v){this._baseView.setFrame(0,v,u,t)}.bind(this));s.pushCallback(function(){if(this._cancelButton){this._cancelButton.destroy();this._cancelButton=null}if(this._webView){this._webView.destroy();this._webView=null}if(this._baseView){this._baseView.destroy();this._baseView=null}TFSceneDirector.enableGlobalTouches("HomeViewController > onDismissHelp");this._dismissInProc=false}.bind(this));s.start();TFSceneDirector._viewControllerStack.pop();TFSceneDirector._viewControllerStack.pop()},onNewsPressed:function(){if(this._blocked===true||TFSceneDirector._blocked===true){return}this._blocked=true;if(TFUserData.getTutorialState("homescreen")!="end"){return}if(this._mainTutorialFlag){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"ButtonPressNews"})}TFSceneDirector.showLanding("slideleft");setTimeout(function(){this._blocked=false}.bind(this),1000)},onProfilePressed:function(){if(this._blocked===true||TFSceneDirector._blocked===true){return}if(!Server.isConnectionAvailable()){TFUtils.showErrorMessages(Localization.getString("ui_pleasecheckconnection"));return}this._blocked=true;if(TFUserData.getTutorialState("homescreen")!="end"){return}if(this._mainTutorialFlag){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"ButtonPressProfile"})}console.log("HomeViewController > onProfilePressed ");TFSceneDirector.showProfile(User.getUserId(),n,{},"slideleft");setTimeout(function(){this._blocked=false}.bind(this),1000)},onEventButtonPressed:function(){if(this._blocked===true||TFSceneDirector._blocked===true){return}this._blocked=true;var t=q.runningEvent;if(t&&t.eventId==TFUserData.curEventId){if(TFUserData.hasJoinedEvent(TFUserData.curEventId)){TFSceneDirector.showRBMain("slideleft");return}TFSceneDirector.showRBIntro("slideleft")}else{if(TFUserData.hasJoinedEvent(TFUserData.curEventId)){if(!TFUserData.hasSeenEventFinal(TFUserData.curEventId)){TFSceneDirector.showRBEpilogue(TFUserData.curEventId)}else{var s={};s.title=Localization.getString("ui_eventcomplete_uc");s.fusionCost=Localization.getString("ui_eventcompletedialog1");s.buttons="one";s.cb=null;TFSceneDirector._showDialog(new g(s))}}else{var s={};s.title=Localization.getString("ui_eventcomplete_uc");s.fusionCost=Localization.getString("ui_eventcompletedialog2");s.buttons="one";s.cb=null;TFSceneDirector._showDialog(new g(s))}}setTimeout(function(){this._blocked=false}.bind(this),1000)},onEventIntroButtonPressed:function(){if(this._blocked===true||TFSceneDirector._blocked===true){return}this._blocked=true;TFSceneDirector.showRBIntro("slideleft");setTimeout(function(){this._blocked=false}.bind(this),1000)},destroy:function($super){TFGameData._mainTutorialEndedFlag=false;this._killAnimations=true;this.bgStartingPosition=null;NotificationCenter.releaseNotifications();m.releaseElements("HomeViewController");this.onDismissHelp();$super()}})}};__ngs._57={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var b=__ngs.r_(__ngs._n).ViewController;var e=__ngs.r_(__ngs._9f).AchievementsView;var a=__ngs.r_(__ngs._4a).TFImageManager;c.AchievementsViewController=b.subclass({classname:"AchievementsViewController",initialize:function($super,k){$super();if(!k){this._page=1}else{this._page=k}this._itemsPerPage=6;this.createView(e);var h={displayed:true,animated:true,timeout:1000};var g={displayed:false,animated:true,timeout:1000};this.setHudDisplayData(h,g);this.setViewStartPositionY(50)},destroy:function($super){$super()},fetchListItems:function(m){var o=[];var t=__ngs.r_(__ngs._9g).AchievementsElementView;var p=__ngs.r_(__ngs._9h).AchievementsElementViewDefinition;var x;var v;var q=1;var w=this._page*this._itemsPerPage-this._itemsPerPage;for(var u in TFGameData._achievementsJSON){var n=TFGameData._achievementsJSON[u];if(n.hidden===true){continue}if(w-->0){continue}x=new t(this,p);v={};v.icon=a.getImageForAchievement(n.image);v.name=n.name;v.description=n.description;var s=1;for(var r in n.rewards){v["reward"+s]={};v["reward"+s].icon=a.getImageForAchievementReward(n.rewards[r]);v["reward"+s].amount=n.rewards[r].amount;v["reward"+s].name=n.rewards[r].name;s++}x._originalPos=x.rewards._position;x.setData(v);o.push(x);if(++q>this._itemsPerPage){break}}var g=__ngs.r_(__ngs._9i).AchievementsBottomView;x=new g(this);if(this._page>1){x.prevButton.setEnabled(true);x.prevButton.setVisible(true);x.prevButton.info.id=this._page-1}if(q>this._itemsPerPage){x.nextButton.setEnabled(true);x.nextButton.setVisible(true);x.nextButton.info.id=this._page+1}o.push(x);return o},changePage:function(g){TFSceneDirector.showAchievements(g.info.id)},onCollectSelected:function(g){}})}};__ngs._58={_c:null,_d:function(){var e={exports:{}};var b=e.exports;this._c=e;var a=__ngs.r_(__ngs._n).ViewController;var d=__ngs.r_(__ngs._9j).OutOfEnergyView;var g=__ngs.r_(__ngs._4x).StoreItemView;var c=__ngs.r_(__ngs._48).TFSoundManager;var h=__ngs.r_(__ngs._4c).TFUpdateEmitter;b.OutOfEnergyViewController=a.subclass({classname:"OutOfEnergyViewController",SOUND_KEY:"OUT_OF_ENERGY_01",initialize:function($super,k){$super();this.createView(d);c.playSound(this.SOUND_KEY);this._lastExploreEnergyUpdate=Server.getTime();this._source=k;this._useItem=null;var x=TFUserData.getItemQuantity(301);this.imagePrefix="Content/Images8x/UI/StoreItems/";var v;var z="";var r="";var p="";var n="";var l;if((k=="battle")||(k=="raidboss")){this.getView().title.setText(Localization.getString("ui_oobattlecubes"));var t=TFUserData.getItemQuantity(202);var m=TFUserData.getItemQuantity(201);if(m===0&&t===0&&x>0){l=TFGameData.getItemDesc(301);this._useItem=301;z=Localization.getString("ui_askliketouse")+" "+Localization.getString(l.name)+"?";r=Localization.getString(l.name)+" : ";p=""+x;n=Localization.getString("ui_use")+" "+Localization.getString(l.name);this.setFullRestorationAssets()}else{if(m>0){l=TFGameData.getItemDesc(201);this._useItem=201;z=Localization.getString("ui_askliketouse")+" "+Localization.getString(l.name)+"?";r=Localization.getString(l.name)+" : ";p=""+m;n=Localization.getString("ui_use")+" "+Localization.getString(l.name);this.getView().statLabel.setText("+"+l.variation)}else{if(t>0){l=TFGameData.getItemDesc(202);this._useItem=202;z=Localization.getString("ui_askliketouse")+" "+Localization.getString(l.name)+"?";r=Localization.getString(l.name)+" : ";p=""+t;n=Localization.getString("ui_use")+" "+Localization.getString(l.name)}else{l=TFGameData.getItemDesc(202);z=Localization.getString("ui_askliketobuy")+" "+Localization.getString(l.name)+"?";r=Localization.getString(l.name)+" : ";p=""+t;n=Localization.getString("ui_buy")+" "+Localization.getString(l.name)}}}this.getView().description.setText(Localization.getString(z));this.getView().amountTextLabel.setText(Localization.getString(r));this.getView().amountLabel.setText(Localization.getString(p));this.getView().useEnergyButton.setText(Localization.getString(n));TFUtils.changeImageOnSprite(this.getView().battleEnergyImage,this.imagePrefix+l.image);v=TFGameData._configJSON.battleEnergyPeriod*60;var s=v-Math.round((Server.getTime()-TFUserData.getLastBattleTimeStamp())/1000);var w=1000;cb=function(){s-=w/1000;if(s<=0){this.getView().timeLeftLabel.setText("  0")}else{this.getView().timeLeftLabel.setText(" "+TFUtils.timeToHumanTwoElement(s))}}.bind(this);h.addElements("OutOfEnergyViewController",w,cb)}else{if(k=="explore"){this.getView().title.setText(Localization.getString("ui_ooenergy"));this.getView().battleEnergyIcon1.setVisible(false);this.getView().battleEnergyIcon2.setVisible(false);this.getView().battleEnergyIcon3.setVisible(false);this.getView().energyIcon.setVisible(true);var o=TFUserData.getItemQuantity(102);var y=TFUserData.getItemQuantity(101);if(y===0&&o===0&&x>0){l=TFGameData.getItemDesc(301);this._useItem=301;z=Localization.getString("ui_askliketouse")+" "+Localization.getString(l.name)+"?";r=Localization.getString(l.name)+" : ";p=""+x;n=Localization.getString("ui_use")+" "+Localization.getString(l.name);this.setFullRestorationAssets()}else{if(y>0){l=TFGameData.getItemDesc(101);this._useItem=101;z=Localization.getString("ui_askliketouse")+" "+Localization.getString(l.name)+"?";r=Localization.getString(l.name)+" : ";p=""+y;n=Localization.getString("ui_use")+" "+Localization.getString(l.name);this.getView().statLabel.setText("+"+l.variation+" %")}else{if(o>0){l=TFGameData.getItemDesc(102);this._useItem=102;z=Localization.getString("ui_askliketouse")+" "+Localization.getString(l.name)+"?";r=Localization.getString(l.name)+" : ";p=""+o;n=Localization.getString("ui_use")+" "+Localization.getString(l.name)}else{l=TFGameData.getItemDesc(102);z=Localization.getString("ui_askliketobuy")+" "+Localization.getString(l.name)+"?";r=Localization.getString(l.name)+" : ";p=""+o;n=Localization.getString("ui_buy")+" "+Localization.getString(l.name)}}}this.getView().description.setText(Localization.getString(z));this.getView().amountTextLabel.setText(Localization.getString(r));this.getView().amountLabel.setText(Localization.getString(p));this.getView().useEnergyButton.setText(Localization.getString(n));TFUtils.changeImageOnSprite(this.getView().battleEnergyImage,this.imagePrefix+l.image);this.getView().missionButton.setText(Localization.getString("ui_battle_uc"));this.getView().missionButton.setOnPressCallback(TFSceneDirector.showOpponents.bind(TFSceneDirector));v=TFGameData._configJSON.exploreEnergyPeriod*60;var s=v*(TFUserData.getMaxExploreEnergy()-TFUserData.getExploreEnergy());var w=1000;cb=function(){s-=w/1000;if(s<=0){this.getView().timeLeftLabel.setText("  0")}else{if(s<=3600){this.getView().timeLeftLabel.setText(" "+TFUtils.timeToHuman(s))}else{if(s){this.getView().timeLeftLabel.setText(" "+TFUtils.timeToHumanLarge(s))}}}}.bind(this);h.addElements("OutOfEnergyViewController",w,cb)}}var q={displayed:true,animated:true,timeout:0,mode:"button_only"};var u={displayed:false,animated:true,timeout:0};this.setHudDisplayData(q,u)},setFullRestorationAssets:function(){var o=["battleEnergyIcon1","battleEnergyIcon2","battleEnergyIcon3","energyIcon"];for(var m in o){var n=this.getView()[o[m]].data.asset;var l=[this.getView()[o[m]].data.secondary.size_x,this.getView()[o[m]].data.secondary.size_y];var k=[this.getView()[o[m]].data.secondary.pos_x,this.getView()[o[m]].data.secondary.pos_y];this.getView()[o[m]].setImage(n,l,[0,0],[0,0,1,1]);this.getView()[o[m]].setPosition(k);this.getView()[o[m]].setVisible(true)}},onUseEnergy:function(k){if(this._useItem&&TFUserData.getItemQuantity(this._useItem)>0){Server.useItem(this._useItem,this.onItemUsage.bind(this),false)}else{TFSceneDirector.showItemStore(g)}},onItemUsage:function(l,o){var n={};var k=__ngs.r_(__ngs._3y).PopUpController;if(!l){var m=TFGameData.getItemDesc(this._useItem);TFUserData.syncFrom(o);n.title=sprintf(Localization.getString("ui_used"),Localization.getString(m.name));n.fusionCost=Localization.getString(m.description);n.buttons="one";n.cb=this.onContinue.bind(this);TFSceneDirector._showDialog(new k(n))}else{TFUtils.showErrorMessages(o)}},onContinue:function(k){if(this._source=="explore"){this.onMission()}else{if(this._source=="raidboss"){TFSceneDirector.onBackButton()}else{TFSceneDirector.showOpponents()}}},destroy:function($super){h.releaseElements("OutOfEnergyViewController");$super()},onMission:function(){var k=TFSceneDirector.getStage();if(k.worldId>0&&k.stageId>0){TFSceneDirector.showMissionSelect(k.worldId,k.stageId)}else{if(k.worldId>0){TFSceneDirector.showStageSelect(k.worldId)}else{TFSceneDirector.showWorldSelect()}}},onUpgrade:function(){TFSceneDirector.showFreshFusion()},onSpaceBridge:function(){TFSceneDirector.showStore()}})}};__ngs._59={_c:null,_d:function(){var c={exports:{}};var g=c.exports;this._c=c;var l=__ngs.r_(__ngs._9k).OpponentSelectView;var d=__ngs.r_(__ngs._9l).OpponentSelectCellViewDefinition;var k=__ngs.r_(__ngs._s).TFUtils;var e=__ngs.r_(__ngs._45).AnimationQueue;var a=__ngs.r_(__ngs._89).CardThumbnailView;var b=__ngs.r_(__ngs._63).TFFormulas;var h=__ngs.r_(__ngs._48).TFSoundManager;g.OpponentSelectViewController=ViewController.subclass({classname:"OpponentSelectViewController",MUSIC_KEY:"MAIN_MENU_BACK",initialize:function($super,o){h.playMusic(this.MUSIC_KEY);$super();if(!this._view){this.createView(l);TFSceneDirector.shiftUIElementUp(this.getView().HeaderLabel);TFSceneDirector.shiftUIElementUp(this.getView().opponentList);TFSceneDirector.stretchUIElementVertically(this.getView().backgroundImage)}if(!TFUserData._enemyLevel){TFUserData._enemyLevel=TFUserData.getLevel()}this.getEnemies(TFUserData.getLevel());this.getView().levelLabel.setText(TFUserData._enemyLevel+"");this._levelDisplayed=TFUserData._enemyLevel;var n={displayed:true,animated:true,timeout:1000,mode:"no_card_counts"};var m={displayed:true,animated:true,timeout:1000};this.setHudDisplayData(n,m);this._bgAnimationDuration=300;this._bottomHUDViewController=undefined},onIncrease:function(m){if(this._levelDisplayed-TFUserData.getLevel()>=10){return}this._levelDisplayed++;this.getView().refreshButton.setEnabled(true);this.getView().levelLabel.setText(this._levelDisplayed+"")},onDecrease:function(m){if(this._levelDisplayed==1||TFUserData.getLevel()-this._levelDisplayed>=10){return}this._levelDisplayed--;this.getView().refreshButton.setEnabled(true);this.getView().levelLabel.setText(this._levelDisplayed+"")},onRefreshList:function(){TFUserData._enemyLevel=this._levelDisplayed;this.getEnemies(TFUserData._enemyLevel)},_animateBgIn:function(){var m=this.createAnimationQueue();m.pushCallback(TFSceneDirector.hideTopHud.bind(TFSceneDirector,true));m.pushCallback(TFSceneDirector.hideBottomHud.bind(TFSceneDirector,true));m.pushAnimation(250,e.Curve.Linear);m.pushAnimation(this._bgAnimationDuration,e.Curve.EaseIn);m.tween(e.Interpolate.scalar(640,0),function(n){if(this.topBg){this.topBg.setPosition(this.topBg.getPosition().getX(),180-n)}if(this.botBg){this.botBg.setPosition(this.botBg.getPosition().getX(),870+n)}}.bind(this.getView()));m.pushAnimation(100,e.Curve.Linear);m.pushCallback(TFSceneDirector.showConfirmBattle.bind(TFSceneDirector));m.start()},getEnemies:function(m){this.getView().refreshButton.setEnabled(false);Server.getBattleEnemies(m,function(n,o){if(n){console.log("Error occurred while searching for Battle Opponents");k.showErrorMessages(o,TFSceneDirector.showHome.bind(TFSceneDirector));TFSceneDirector.showHome();return}TFUserData.syncFrom(o);this._updateCells()}.bind(this))},_updateCells:function(){if(!this.getView()){console.log("View was destroyed before server response");return}var o;var m=TFUserData.enemies;for(var n=0;n<10;n++){o=this.getView().opponentList.itemAtIndex(n);if(m&&m[n]){o.setVisible(true);o._cardPanel.updateWithCard(m[n].gear.definitionId,{leader:true,showSpinner:true});o.opponentName.setText((""+m[n].gamerTag).toUpperCase());o.opponentLevel.setText(m[n].level);if(m[n].pvpRewards){o.rewardPoints.setText(m[n].pvpRewards.battlePointsReward+" ")}o.wins.setText(m[n].wins+"")}}},onCardSelected:function(o){var r=o.info.cardID;var p={};var q=TFCardsManager.getCardDefinition(r);var n=b.getStatusForLevel(q,1);p.stats=n;p.CardDefinition=r;p.cbDismiss=function(){this._blocked=false}.bind(this);var m;if(q.type==TFGameData.CARD_TYPE.TRANSFORMER){m=__ngs.r_(__ngs._80).FullScreenCardController}else{m=__ngs.r_(__ngs._8a).FullScreenWeaponCardController}TFSceneDirector._showDialog(new m(p,true))},destroy:function($super){if(this._arrow){this._arrow.destroy();this._arrow=null}$super()},_buttonObstructed:function(s){var m=s.localToScreen(new Core.Point(0,0));var t=s.localToScreen(new Core.Point(s.getSize().getWidth(),s.getSize().getHeight()));var q=m.getY()+(t.getY()-m.getY())/2;if(this._bottomHUDViewController){var u=this._bottomHUDViewController.getView();if(u){var p=10000000;var o=u.getChildren();if(o&&o.length){for(var r=0;r<o.length;r++){var n=o[r].localToScreen(new Core.Point(0,0));if(n.getY()<p){p=n.getY()}}}if(q>p){return true}}}return false},onSelectOpponent:function(m){console.log("onSelectOpponent touch"+m.info.id);if(this._animating===true){return}if(this._buttonObstructed(m)){console.log("WARNING: opponent selection touch rejected due to obstruction");return}this._animating=true;if(TFUserData.getTutorialState("battle")=="start"){TFAnalytics.reportGameEvent("BATTLETUTORIAL",{Step:"03_OpponentSelect : "+m.info.id})}if(!Server.isConnectionAvailable()){k.showErrorMessages(Localization.getString("ui_pleasecheckconnection"));this._animating=false;return}TFUserData.setSelectedOpponent(m.info.id);if(TFUserData.getBattleEnergy()>0){this._animateBgIn()}else{TFSceneDirector.showOutOfEnergy("battle");this._animating=false}},fetchListItems:function(q){var n;var t=new Array();for(var p=0;p<10;p++){var s=__ngs.r_(__ngs._7p).View;var m=new s(this,d);m.setVisible(false);m.selectButton.info.id=p;var o=m._definitions.cardPanel.info.card_w;var r=m._definitions.cardPanel.info.card_h;n=new a(this,undefined,o,r,{showSpinner:true});n.disableTap();m.cardPanel.addChild(n);m._cardPanel=n;t.push(m)}return t},afterViewDisplayed:function(){if(TFUserData.getTutorialState("battle")=="start"){var m=new Object();m.title=Localization.getString("tutorial_battle_title_01");m.text=Localization.getString("tutorial_battle_text_01");m.cb=function(){var p=this.createAnimationQueue();p.pushAnimation(50,e.Curve.Linear);p.pushCallback(function(){TFAnalytics.reportGameEvent("BATTLETUTORIAL",{Step:"01_OpponentTutorial1Close"});var r=new Object();r.title=Localization.getString("tutorial_battle_title_02");r.text=Localization.getString("tutorial_battle_text_02");r.cb=function(){TFAnalytics.reportGameEvent("BATTLETUTORIAL",{Step:"02_OpponentTutorial2Close"})};var s=__ngs.r_(__ngs._81).TutorialBubbleView;var q=TFSceneDirector.showTutorialDialog(s,r);q.getView().bubble1.setPosition(-320,-100)});p.start()}.bind(this);var o=__ngs.r_(__ngs._81).TutorialBubbleView;var n=TFSceneDirector.showTutorialDialog(o,m);n.getView().bubble1.setPosition(-320,-100);setTimeout(function(){if(!this.getView()){return}var q=30;var r=390;var p=235;this._arrow=new GL2.Sprite();this._arrow.setImage(k.getArrowImage(),[120,70],[0,0],[1,0,-1,1]);this._arrow.setPosition(r,p);TFSceneDirector.shiftUIElementUp(this._arrow);this.getView().addChild(this._arrow);this._arrowQueue=this.createAnimationQueue();this._arrowQueue.pushAnimation(250,e.Curve.EaseIn).tween(e.Interpolate.scalar(r-q,r+q),function(s){if(this._arrow){this._arrow.setPosition(s,this._arrow.getPosition().getY())}}.bind(this));this._arrowQueue.pushAnimation(250,e.Curve.EaseOut).tween(e.Interpolate.scalar(r+q,r-q),function(s){if(this._arrow){this._arrow.setPosition(s,this._arrow.getPosition().getY())}}.bind(this));this._arrowQueue.startLooped()}.bind(this),1400)}},setBottomHudView:function(n){var m=__ngs.r_(__ngs._9m).BottomHudOpponentSelectView;n.updateHudWithView(m);this._bottomHUDViewController=n}})}};__ngs._5a={_c:null,_d:function(){var e={exports:{}};var h=e.exports;this._c=e;var d=__ngs.r_(__ngs._n).ViewController;var g=__ngs.r_(__ngs._45).AnimationQueue;var b=__ngs.r_(__ngs._9n).ConfirmBattleView;var l=__ngs.r_(__ngs._s).TFUtils;var k=__ngs.r_(__ngs._49).TFDeckManager;var m=__ngs.r_(__ngs._48).TFSoundManager;var c=__ngs.r_(__ngs._63).TFFormulas;var a=__ngs.r_(__ngs._89).CardThumbnailView;h.ConfirmBattleViewController=d.subclass({classname:"ConfirmBattleViewController",initialize:function($super){$super();this.createView(b);TFSceneDirector.shiftUIElementUp(this.getView().dropshadowTop);TFSceneDirector.shiftUIElementDown(this.getView().dropshadowBottom);this.opponent=TFUserData.getSelectedOpponent();this.deckReady=false;Server.getEnemyDeck(this.opponent.name,function(w,x){if(w){return}TFUserData.setOpponentDeck(x.deck);var v=0;if(TFUserData.getLevel()<this.opponent.level){v=-1}var y=k.getOpponentDeckStats(x.deck);TFAnalytics.reportGameEvent("PVPBATTLESTART",{targetuid:this.opponent.name,targetattack:y.attack,targethp:y.hp,targetlvl:this.opponent.level,lvlcomp:v,becost:1});var u=__ngs.r_(__ngs._9o).BattleViewController;u.preloadBattleCards();this.deckReady=true}.bind(this));var n;this.getView().playerBlock.name.setText(TFUserData.getGamerTag().toUpperCase());this.getView().playerBlock.level.setText(Localization.getString("ui_level_uc")+" "+TFUserData.getLevel());this.getView().playerBlock.wins.setText(Localization.getString("ui_battleswon_uc")+" "+TFUserData.stats.wins);var o=this.getView()._definitions.playerBlock.info.card_w;var t=this.getView()._definitions.playerBlock.info.card_h;n=new a(this,TFUserData.getDeckCard(2,0,TFGameData.CARD_TYPE.TRANSFORMER).definitionId,o,t,{leader:true,showSpinner:true});this.getView().playerBlock._cardPanel=n;this.getView().playerBlock.addChild(n);var r=this.getView()._definitions.playerBlock.info.card_pos_x;var q=this.getView()._definitions.playerBlock.info.card_pos_y;n.setPosition(r,q);n.disableTap();this.getView().opponentBlock.name.setText(this.opponent.gamerTag.toUpperCase());this.getView().opponentBlock.level.setText(Localization.getString("ui_level_uc")+" "+this.opponent.level);this.getView().opponentBlock.wins.setText(Localization.getString("ui_battleswon_uc")+" "+this.opponent.wins);o=this.getView()._definitions.opponentBlock.info.card_w;t=this.getView()._definitions.opponentBlock.info.card_h;n=new a(this,this.opponent.gear.definitionId,o,t,{leader:true,showSpinner:true});this.getView().opponentBlock._cardPanel=n;this.getView().opponentBlock.addChild(n);r=this.getView()._definitions.opponentBlock.info.card_pos_x;q=this.getView()._definitions.opponentBlock.info.card_pos_y;n.setPosition(r,q);n.disableTap();var s={displayed:true,animated:true,timeout:300,mode:"button_only"};var p={displayed:false,animated:true,timeout:300};this.setHudDisplayData(s,p);this._slideAnimationDuration=300;this._vsZoomAnimationDuration=400;setTimeout(this._slidePlayerIn.bind(this),300);TFSceneDirector.showBottomHud(false);TFSceneDirector.hideBottomHud(false)},onCardSelected:function(p){var s=p.info.cardID;var q={};var r=TFCardsManager.getCardDefinition(s);var o=c.getStatusForLevel(r,1);q.stats=o;q.CardDefinition=s;q.cbDismiss=function(){this._blocked=false}.bind(this);var n;if(r.type==TFGameData.CARD_TYPE.TRANSFORMER){n=__ngs.r_(__ngs._80).FullScreenCardController}else{n=__ngs.r_(__ngs._8a).FullScreenWeaponCardController}TFSceneDirector._showDialog(new n(q,true))},_slidePlayerIn:function(){var n=this.createAnimationQueue();n.pushCallback(function(){m.playSound("Battle_Player_Info_Wisp_04")}.bind(this));n.pushAnimation(this._slideAnimationDuration,g.Curve.EaseIn);n.tween(g.Interpolate.scalar(640,0),function(o){if(this.playerBlock){this.playerBlock.setPosition(o,this.playerBlock.getPosition().getY())}}.bind(this.getView()));n.pushCallback(this._slideOpponentIn.bind(this));TFSceneDirector.showBottomHud(false);TFSceneDirector.hideBottomHud(false);n.start()},_animateVSIn:function(){if(this.getView()){this.getView().vsImage.setVisible(true)}var n=this.createAnimationQueue();n.pushAnimation(this._vsZoomAnimationDuration,g.Curve.EaseIn);n.tween(g.Interpolate.scalar(10,0.5),function(o){if(this.getView().vsImage){this.getView().vsImage.setScale(o)}}.bind(this));n.pushCallback(function(){TFSceneDirector.shakeView(this);m.playSound("Battle_VS_Inpact_03");var o=this.createAnimationQueue();o.pushAnimation(this._slideAnimationDuration*2,g.Curve.Linear);o.tween(g.Interpolate.scalar(0,1),function(p){this.dropshadowTop.setAlpha(p);this.dropshadowBottom.setAlpha(p)}.bind(this.getView()));o.start()}.bind(this));n.start();this.getView().confirmButton.setVisible(true)},_animateVSOut:function(){if(this.getView()){this.getView().vsImage.setVisible(true)}var n=this.createAnimationQueue();n.pushAnimation(this._vsZoomAnimationDuration,g.Curve.EaseIn);n.tween(g.Interpolate.scalar(1,0),function(o){if(this.getView().vsImage){this.getView().vsImage.setAlpha(o)}}.bind(this));n.pushCallback(function(){var o=this.createAnimationQueue();o.pushAnimation(this._slideAnimationDuration*2,g.Curve.Linear);o.tween(g.Interpolate.scalar(1,0),function(p){this.dropshadowTop.setAlpha(p);this.dropshadowBottom.setAlpha(p)}.bind(this.getView()));o.start()}.bind(this));n.pushCallback(this._showBattleView.bind(this));n.start()},_slidePlayerOut:function(){var n=this.createAnimationQueue();n.pushAnimation(this._slideAnimationDuration,g.Curve.EaseIn);n.tween(g.Interpolate.scalar(0,640),function(o){if(this.playerBlock){this.playerBlock.setPosition(o,this.playerBlock.getPosition().getY())}}.bind(this.getView()));n.pushCallback(this._animateVSOut.bind(this));n.start()},_slideOpponentIn:function(){var n=this.createAnimationQueue();n.pushAnimation(this._slideAnimationDuration,g.Curve.EaseIn);n.tween(g.Interpolate.scalar(-640,0),function(o){if(this.opponentBlock){this.opponentBlock.setPosition(o,this.opponentBlock.getPosition().getY())}}.bind(this.getView()));n.pushCallback(function(){m.playSound("Battle_Player_Info_Wisp_01")}.bind(this));n.pushCallback(this._animateVSIn.bind(this));n.start()},_slideOpponentOut:function(){this.getView().confirmButton.setVisible(false);var n=this.createAnimationQueue();n.pushAnimation(this._slideAnimationDuration,g.Curve.EaseIn);n.tween(g.Interpolate.scalar(0,-640),function(o){if(this.opponentBlock){this.opponentBlock.setPosition(o,this.opponentBlock.getPosition().getY())}}.bind(this.getView()));n.pushCallback(this._slidePlayerOut.bind(this));n.start()},onBack:function(n){this.getView().confirmButton.setEnabled(false);if(TFUserData._battleChanceMissionId!=undefined){TFSceneDirector.showDoItMission(TFUserData._battleChanceMissionId);TFUserData._battleChanceMissionId=undefined}else{TFSceneDirector.showOpponents()}},onConfirm:function(o){TFSceneDirector.disableBack("Fight start/confirmed");if(!this.getView()){return}if(!Server.isConnectionAvailable()){l.showErrorMessages(Localization.getString("ui_pleasecheckconnection"));return}if(!this.deckReady){this.getView().confirmButton.setEnabled(false);setTimeout(this.onConfirm.bind(this,o),1000);return}TFSceneDirector.hideTopHud();if(TFUserData.getTutorialState("battle")=="start"){TFAnalytics.reportGameEvent("BATTLETUTORIAL",{Step:"05_BattleConfirmClick"});var p=new Object();p.title=Localization.getString("tutorial_battle_title_04");p.text=Localization.getString("tutorial_battle_text_04");p.Id="tutorial_battle_title_04";p.cb=function(){TFAnalytics.reportGameEvent("BATTLETUTORIAL",{Step:"06_BattleConfirmTut2Close"});var r=__ngs.r_(__ngs._9o).BattleViewController;TFSceneDirector.pushViewController(new r());TFSceneDirector.enableBack()};var q=__ngs.r_(__ngs._81).TutorialBubbleView;var n=TFSceneDirector.showTutorialDialog(q,p);n.getView().bubble1.setPosition(-320,-100)}else{this._slideOpponentOut()}},_showBattleView:function(){var n=__ngs.r_(__ngs._9o).BattleViewController;TFSceneDirector.pushViewController(new n());TFSceneDirector.enableBack()},destroy:function($super){$super()},afterViewDisplayed:function(){if(TFUserData.getTutorialState("battle")=="start"){var o=new Object();o.title=Localization.getString("tutorial_battle_title_03");o.text=Localization.getString("tutorial_battle_text_03");o.Id="tutorial_battle_title_03";o.cb=function(){TFAnalytics.reportGameEvent("BATTLETUTORIAL",{Step:"04_BattleConfirmTutClose"})};var p=__ngs.r_(__ngs._81).TutorialBubbleView;var n=TFSceneDirector.showTutorialDialog(p,o);n.getView().bubble1.setPosition(-320,-100)}}})}};__ngs._5b={_c:null,_d:function(){var g={exports:{}};var c=g.exports;this._c=g;var a=__ngs.r_(__ngs._n).ViewController;var e=__ngs.r_(__ngs._45).AnimationQueue;var d=__ngs.r_(__ngs._48).TFSoundManager;var h=__ngs.r_(__ngs._61).TFEventManager;var b=__ngs.r_(__ngs._9p).LandingView;c.LandingViewController=a.subclass({classname:"LandingViewController",MUSIC_KEY:"MAIN_MENU_BACK",initialize:function($super){$super();this.createView(b);var k=__ngs.r_(__ngs._9q).LandingNewsView;this._eventBanner=new k(this);this._eventBanner.addLoadDoneCallback(function(){this.getView().addChild(this._eventBanner);this._eventBanner.setVisible(false);setTimeout(this.updateEventBanner.bind(this),10);var m={displayed:false,animated:true,timeout:1000};var l={displayed:false,animated:true,timeout:1000};this.setHudDisplayData(m,l)}.bind(this))},updateEventBanner:function(){if(!this._eventBanner.viewIsLoaded()){this._eventBanner.addLoadDoneCallback(function(){this.updateEventBanner()}.bind(this));return}var l=TFSceneDirector.getWorkingArea();if(this._runningEvent){if(!h.runningEvent){console.log("LandingViewController > updateEventBanner > hiding event banner");var k=this.createAnimationQueue();k.pushCallback(function(){this._eventBanner.banner.button.setEnabled(false)}.bind(this));k.pushAnimation(300,e.Curve.EaseIn);k.tween(e.Interpolate.scalar(1,0),function(m,n){this._eventBanner.setPosition(m.screenWidth-n*(this._eventBanner._definitions.banner.info.size_x+(m.screenWidth-this._eventBanner._definitions.banner.info.size_x)*0.5),this._eventBanner.getPosition().getY())}.bind(this,l));k.pushAnimation(500,e.Curve.Linear);k.tween(e.Interpolate.scalar(0.8,0),function(m){this._eventBanner.banner.black.setAlpha(m);this._eventBanner.banner.dropshadow1.setAlpha(m);this._eventBanner.banner.dropshadow2.setAlpha(m)}.bind(this));k.pushCallback(function(){this._eventBanner.setVisible(false)}.bind(this));k.start();this._runningEvent=h.runningEvent}}else{if(h.eventVisible()){console.log("LandingViewController > updateEventBanner > showing event banner");this._eventBanner.updateWithEvent(h.runningEvent.eventId);var k=this.createAnimationQueue();k.pushCallback(function(m){this._eventBanner.setVisible(true);this._eventBanner.banner.button.setEnabled(true);this._eventBanner.banner.black.setAlpha(0);this._eventBanner.banner.dropshadow1.setAlpha(0);this._eventBanner.banner.dropshadow2.setAlpha(0);this._eventBanner.setPosition(m.screenWidth,480-this._eventBanner._definitions.banner.info.size_y*0.5)}.bind(this,l));k.pushAnimation(500,e.Curve.Linear);k.tween(e.Interpolate.scalar(0,0.8),function(m){this._eventBanner.banner.black.setAlpha(m);this._eventBanner.banner.dropshadow1.setAlpha(m);this._eventBanner.banner.dropshadow2.setAlpha(m)}.bind(this));k.pushAnimation(300,e.Curve.EaseIn);k.tween(e.Interpolate.scalar(0,1),function(m,n){this._eventBanner.setPosition(m.screenWidth-n*(this._eventBanner._definitions.banner.info.size_x+(m.screenWidth-this._eventBanner._definitions.banner.info.size_x)*0.5),this._eventBanner.getPosition().getY())}.bind(this,l));k.start();this._runningEvent=h.runningEvent}else{console.log("LandingViewController > updateEventBanner > no running event")}}},eventStarted:function(){this.updateEventBanner()},eventEnded:function(){this.updateEventBanner()},onSceneTransitionDone:function(){this.updateEventBanner()},onStartButtonPressed:function(){d.playMusic(this.MUSIC_KEY);NotificationCenter.updateNotifications();TFSceneDirector.showHome(true);TFAnalytics.reportGameEvent("STARTCLICKED",{newuser:TFUserData.newUser()})},setLeftButton:function(k){k.useLeftButtonAsDeckButton()},tweet:function(){var r=__ngs.r_(__ngs._81).TutorialBubbleView;this.twitter_msg="Testing tweet";var q=this.twitter_msg;this._twitterOpen=true;var n=q;var l="https://twitter.com/intent/tweet?text="+escape(n)+"";width=UI.Window.getWidth();height=UI.Window.getHeight();this._webView=new UI.View();this._webView.setFrame([0,0,width,height]);bgView=new UI.View();bgView.setFrame([0,0,width,height]);bgView.setBackgroundColor("000000");bgView.setAlpha(0.6);this._webView.addChild(bgView);var k=new UI.WebView();k.setFrame([width*0.05,height*0.25,width*0.9,height*0.5]);k.loadUrl(l);this._webView.addChild(k);var p=new UI.Button();p.setImage(TFUtils.getArrowImage());p.setFrame([width*0.95-80,height*0.75-79,80,80]);p.setOnClick(function(s){checked=s.checked;k.stopLoading();this._webView.removeChild(p);this._webView.removeChild(k);UI.Window.document.removeChild(this._webView);this._webView.destroy();k.destroy();p.destroy();this._webView=null;this._twitterOpen=false}.bind(this));this._webView.addChild(p);var o=this._webView.getChildren();for(object in o){var m=o[object]}UI.Window.document.addChild(this._webView)},makeGlobe:function(){this.numFrames=1;this.t=0;this.fpsTime=0;var n=[1,1,1,1];var w=new GL2.Texture("Content/Images8x/placeholders/earth.jpg",{wrapS:GL2.Texture.WrapMode.Repeat,wrapT:GL2.Texture.WrapMode.Clamp,minFilter:GL2.Texture.FilterMode.Linear,magFilter:GL2.Texture.FilterMode.Linear,readImageAsync:false});var z=new GL2.FixedMaterial().setTexture(0,w);var q,o,l,m;var B=36;var y=38;var p=[[0,0]];for(q=1;q<B;q++){l=(q/(B-1))*0.95;for(o=0;o<y;o++){m=(o/y)*2*Math.PI;p.push([l*Math.cos(m),l*Math.sin(m)])}}var k=[];for(q=0;q<p.length;q++){k[q]=n}var x=[];for(q=0;q<y;q++){x.push(0);x.push(q+1);x.push(((q+1)%y)+1)}var v,u,t,s;for(q=0;q<B-2;q++){for(o=0;o<y;o++){v=q*y+o+1;u=q*y+((o+1)%y)+1;t=(q+1)*y+o+1;s=(q+1)*y+((o+1)%y)+1;x.push(v,u,s,v,s,t)}}texCoords=[];for(q=0;q<p.length;q++){texCoords.push([(0.5*p[q][0])+0.5,(0.5*p[q][1])+0.5])}var A=new GL2.Mesh().setMaterial(z).setVertexAttribs("position",GL2.Mesh.AttribType.Vec2,p).setVertexAttribs("color",GL2.Mesh.AttribType.Vec4,k).setVertexAttribs("texCoord0",GL2.Mesh.AttribType.Vec2,texCoords).setIndices(x);A.positions=p;A.texCoords=texCoords;this.globe=A;this.globe.setPosition(320,480);this.globe.setScale(250);this.getView().addChild(this.globe);this._messageListener=new Core.MessageListener();Core.UpdateEmitter.addListener(this._messageListener,this.onUpdate.bind(this))},animateGlobe:function(o,w){var n=o.positions;var v=o.texCoords;var m,k,l,u,s,q,l,p;for(m=0;m<n.length;m++){u=n[m][0];s=n[m][1];q=Math.sqrt(1-u*u-s*s);if(q!==q){q=0}l=-Math.atan2(q,u);v[m][0]=(l+w)/(2*Math.PI);v[m][1]=(Math.asin(s)/Math.PI)+0.5}o.setVertexAttribs("texCoord0",GL2.Mesh.AttribType.Vec2,v)},onUpdate:function(k){this.t+=k;this.fpsTime+=k;this.numFrames++;this.animateGlobe(this.globe,this.t/1000/5)},onEventButtonPressed:function(k){TFUserData.curEventId=this._runningEvent.eventId;if(TFUserData.hasJoinedEvent(TFUserData.curEventId)){TFSceneDirector.showRBMain("slideleft");return}TFSceneDirector.showRBIntro("slideleft")},onEventButtonHighlight:function(k){console.log("RBMainViewController > onSpaceBridgeButtonHighlight > highlighted="+k);if(k){this._eventBanner.banner.banner1.setColor(0.5,0.5,0.5);this._eventBanner.banner.banner2.setColor(0.5,0.5,0.5);this._eventBanner.banner.banner2_overlay.setColor(0.5,0.5,0.5);this._eventBanner.banner.banner3.setColor(0.5,0.5,0.5);this._eventBanner.banner.textTopLeft.setColor(0.5*this._eventBanner.banner._definitions.textTopLeft.color[0]/255,0.5*this._eventBanner.banner._definitions.textTopLeft.color[1]/255,0.5*this._eventBanner.banner._definitions.textTopLeft.color[2]/255);this._eventBanner.banner.textBottomRight.setColor(0.5*this._eventBanner.banner._definitions.textBottomRight.color[0]/255,0.5*this._eventBanner.banner._definitions.textBottomRight.color[1]/255,0.5*this._eventBanner.banner._definitions.textBottomRight.color[2]/255);this._eventBanner.banner.textTopRight.setColor(0.5*this._eventBanner.banner._definitions.textTopRight.color[0]/255,0.5*this._eventBanner.banner._definitions.textTopRight.color[1]/255,0.5*this._eventBanner.banner._definitions.textTopRight.color[2]/255)}else{this._eventBanner.banner.banner1.setColor(1,1,1);this._eventBanner.banner.banner2.setColor(1,1,1);this._eventBanner.banner.banner2_overlay.setColor(1,1,1);this._eventBanner.banner.banner3.setColor(1,1,1);this._eventBanner.banner.textTopLeft.setColor(this._eventBanner.banner._definitions.textTopLeft.color[0]/255,this._eventBanner.banner._definitions.textTopLeft.color[1]/255,this._eventBanner.banner._definitions.textTopLeft.color[2]/255);this._eventBanner.banner.textBottomRight.setColor(this._eventBanner.banner._definitions.textBottomRight.color[0]/255,this._eventBanner.banner._definitions.textBottomRight.color[1]/255,this._eventBanner.banner._definitions.textBottomRight.color[2]/255);this._eventBanner.banner.textTopRight.setColor(this._eventBanner.banner._definitions.textTopRight.color[0]/255,this._eventBanner.banner._definitions.textTopRight.color[1]/255,this._eventBanner.banner._definitions.textTopRight.color[2]/255)}},destroy:function($super){if(this._messageListener){Core.UpdateEmitter.removeListener(this._messageListener)}$super()}})}};__ngs._5c={_c:null,_d:function(){var b={exports:{}};var d=b.exports;this._c=b;var a=__ngs.r_(__ngs._n).ViewController;var c=__ngs.r_(__ngs._9r).FriendsView;var k=__ngs.r_(__ngs._9s).FriendsCellView;var g=__ngs.r_(__ngs._9t).PaginationCellView;var n=__ngs.r_(__ngs._9u).FriendListTopCellView;var h=__ngs.r_(__ngs._s).TFUtils;var m=__ngs.r_(__ngs._l).User;var o=__ngs.r_(__ngs._7t).GLList;var l=__ngs.r_(__ngs._9v).FriendProfileView;var e=__ngs.r_(__ngs._3y).PopUpController;d.FriendsViewController=a.subclass({classname:"FriendsViewController",initialize:function($super){$super();console.log("TFUserData['sentNotifications']['greets'] : "+JSON.stringify(TFUserData.sentNotifications["greets"]));console.log("FriendsViewController initialize");this.createView(c);this.resultData=[];this.friendsCells=[];this.requestData=[];this.canCheer=false;this.page=0;this.cellsPerPage=10;TFSceneDirector.shiftUIElementUp(this.getView().friendList);TFSceneDirector.shiftUIElementUp(this.getView().totalAlliesGroup);TFSceneDirector.shiftUIElementRight(this.getView().totalAlliesGroup);TFSceneDirector.shiftUIElementUp(this.getView().sortComboBox);TFSceneDirector.shiftUIElementDown(this.getView().friendRequestButtonGroup);this.getView().friendRequestButtonGroup.requestLabel.setText(Localization.getString("ui_friendrequests"));var q={displayed:true,animated:true,timeout:0,mode:"no_card_counts"};var p={displayed:true,animated:true,timeout:0};this.setHudDisplayData(q,p);this.getView().sortComboBox.setVisible(false);this._updateAllyCountUI();Server.getAllUserFellows(this.fetchFriendsList.bind(this));this.getView()._totalHeight=this.getView()._definitions.friendList.pos_y},_updateAllyCountUI:function(){this.getView().totalAlliesGroup.alliesCount.setText(""+TFUserData.fellows.length);this.getView().totalAlliesGroup.alliesMaxCount.setText("/ "+TFUserData.maxFellows)},fetchDataFromServer:function(p,q){console.log("FriendsViewController fetchDataFromServer");if(p){h.showErrorMessages(data);return}this.requestData=q.invites.received;if(this.getView()){this.getView().friendRequestButtonGroup.requestLabel.setText(this.requestData.length+" "+Localization.getString("ui_friendrequests"));this.getView().friendRequestButtonGroup.requestButton.setEnabled(this.requestData.length>0);this.getView().friendRequestButtonGroup.setVisible(this.requestData.length>0);this.getView().friendRequestButtonGroup.requestButton.info.data=this.requestData;this.getView().sortComboBox.setVisible(true)}},fetchFriendsList:function(p,q){if(p){console.log("FriendsViewController fetchFriendsList - Error : "+JSON.stringify(p));h.showErrorMessages(q);return}console.log("FriendsViewController fetchFriendsList - responseP : "+JSON.stringify(q));if(q&&q.fellowsList){TFUserData.fellows=q.fellowsList}this.resultData=TFUserData.fellows;if(this.getView()){if(this.resultData.length>0){this.getView().staticFindAllies.setVisible(false)}this.addInvitesToList();this._updateAllyCountUI();this.getView().allyPointGroup.allyPoints.setText(TFUserData.gashaPoints);Server.getInvites(this.fetchDataFromServer.bind(this))}},destroy:function($super){console.log("FriendsViewController destroy");$super()},onPaginationNext:function(){console.log("FriendsViewController onPaginationNext");this.page++;this.pagination.prevButton.setEnabled(true);this.updateCellsOnPagination();if((this.page+1)*this.cellsPerPage>=this.resultData.length){this.pagination.nextButton.setEnabled(false)}},updateCellsOnPagination:function(){console.log("FriendsViewController updateCellsOnPagination");for(var s=0;s<this.cellsPerPage;++s){if(!this.resultData[s+(this.page*this.cellsPerPage)]){this.friendsCells[s].setVisible(false);this.friendsCells[s].friendCellCancelButton.setEnabled(false);this.friendsCells[s].friendCellButton.setEnabled(false);continue}this.friendsCells[s].setVisible(true);this.friendsCells[s].friendCellCancelButton.setEnabled(false);var r=this.resultData[s+(this.page*this.cellsPerPage)].gamerTag;var q=this.resultData[s+(this.page*this.cellsPerPage)].name;var t=this.resultData[s+(this.page*this.cellsPerPage)].level;this.friendsCells[s].playerName.setText(r.toUpperCase());this.friendsCells[s].playerLevel.setText(Localization.getString("ui_level")+" "+t);this.friendsCells[s].friendCellButton.setText(Localization.getString("ui_profile_uc"));this.friendsCells[s].friendCellButton.setEnabled(true);this.friendsCells[s].friendCellButton.setOnPressCallback(this.goToProfile.bind(this,q,this.resultData[s+(this.page*this.cellsPerPage)]));this.friendsCells[s].playerButton.setImage("Content/Images8x/UI/15_friends/user_default_icon.png");var p=this.resultData[s+(this.page*this.cellsPerPage)].name;h.downloadAvatars([p],this.addInviteToListAfterDownloadAvatars.bind(this),this.friendsCells[s])}},onPaginationPrev:function(){console.log("FriendsViewController onPaginationPrev");this.page--;this.pagination.nextButton.setEnabled(true);this.updateCellsOnPagination();if(this.page==0){this.pagination.prevButton.setEnabled(false)}},addInvitesToList:function(){console.log("FriendsViewController addInvitesToList");this.topCell=new n(this);this.topCell.actionButton.setText(Localization.getString("ui_cheerallallies_uc"));this.topCell.actionButton.setOnPressCallback(this.onCheerAll.bind(this));this.getView().friendList.addItem(this.topCell);this.getView()._totalHeight+=this.getView()._definitions.friendList.itemHeight;console.log("this.resultData : "+JSON.stringify(this.resultData));console.log("this.resultData.length : "+JSON.stringify(this.resultData.length));console.log("this.cellsPerPage : "+JSON.stringify(this.cellsPerPage));console.log("greets data: "+JSON.stringify(TFUserData.sentNotifications["greets"]));for(var t=0;t<this.resultData.length;t++){var v=this.resultData[t];var w=false;var s=TFUserData.sentNotifications["greets"];if(v.name&&s.length==0){this.canCheer=true;break}for(var q in s){var p=s[q];if(v.name==p.userId){w=true;break}}v.isCheered=w;if(!w){this.canCheer=true;break}}for(var u=0;u<this.resultData.length&&u<this.cellsPerPage;++u){var v=this.resultData[u];if(v.name!=TFUserData.name){this.addInviteToList(v)}}if(this.resultData.length>this.cellsPerPage){this.pagination=new g();this.pagination.nextButton.setOnPressCallback(this.onPaginationNext.bind(this));this.pagination.prevButton.setOnPressCallback(this.onPaginationPrev.bind(this));this.pagination.prevButton.setEnabled(false);this.getView().friendList.addItem(this.pagination);this.getView()._totalHeight+=this.getView()._definitions.friendList.itemHeight}var r=true;if(this.resultData.length<1){r=false}this.getView()["friendList"].itemAtIndex(0).actionButton.setEnabled(true);this.getView()["friendList"].itemAtIndex(0).actionButton.setVisible(true)},addInviteToList:function(u){console.log("FriendsViewController > addInviteToList : "+JSON.stringify(u));var q=new k();var s=u.name;var r=TFUserData.sentNotifications["greets"];console.log("greets : "+JSON.stringify(r));var p=null;var v=false;if(u.greetSent){v=true}q.playerName.setText(u.gamerTag.toUpperCase());q.playerLevel.setText(Localization.getString("ui_level")+" "+u.level);q.playerLastActionTimestamp.setText(u.lastActionTimestamp);var t=this.friendsCells.length;console.log("addInviteToList item : "+t);q.playerButton.setOnPressCallback(this.onPlayerButtonAction.bind(this,q.playerButton));q.friendCellButton.setText(Localization.getString("ui_profile_uc"));q.friendCellButton.setEnabled(true);q.friendCellButton.setOnPressCallback(this.goToProfile.bind(this,s,u));q.friendCellCancelButton.setVisible(false);q.friendCellCancelButton.setEnabled(false);this.friendsCells.push(q);this.getView().friendList.addItem(q);this.getView()._totalHeight+=this.getView()._definitions.friendList.itemHeight;h.downloadAvatars([s],this.addInviteToListAfterDownloadAvatars.bind(this),q)},addInviteToListAfterDownloadAvatars:function(q){var p=q.imageFile;Storage.FileSystem.stat(p,{},function(s,r){if(s){console.log("An error occurred while retrieving file information: "+s.description)}else{if(q&&q.playerButton){var t=new GL2.Texture(p,{readImageAsync:true},function(v,u){if(v){console.log("Unable to read image file: "+u.getFilename()+" error : "+v.description)}else{console.log("The image file was read: "+u.getFilename());q.playerButton.setImage(p);u.destroy()}})}}})},setBottomHudView:function(q){console.log("FriendsViewController setBottomHudView");var p=__ngs.r_(__ngs._9w).BottomHudFriendsView;q.updateHudWithView(p)},onPlayerButtonAction:function(p){if(p&&p.id){h.openMobageUserProfile(p.id)}},onCellAction:function(){console.log("FriendsViewController onCellAction");console.log("FriendsViewController > onCellAction > Called")},onCellCancelAction:function(){console.log("FriendsViewController onCellCancelAction")},fetchListItems:function(){console.log("FriendsViewController fetchListItems")},onComboBoxSelection:function(q){console.log("FriendsViewController sortList");var p=null;switch(q){case"atoz_down":p=TFUserData.sortFriendsByAlphabetical(this.friendsCells,true);break;case"atoz_up":p=TFUserData.sortFriendsByAlphabetical(this.friendsCells,false);break;case"level_down":p=TFUserData.sortFriendsByLevel(this.friendsCells,true);break;case"level_up":p=TFUserData.sortFriendsByLevel(this.friendsCells,false);break;case"lastonline_down":p=TFUserData.sortFriendsByLastActionTimestamp(this.friendsCells,true);break;case"lastonline_up":p=TFUserData.sortFriendsByLastActionTimestamp(this.friendsCells,false);break}if(p){this.refreshListAfterSort(p)}},refreshListAfterSort:function(u){console.log("FriendsViewController getComboBoxCellClass");var w=this.getView().friendList._size;var v=this.getView().friendList._itemSize;var q=this.getView().friendList._isScrollable;var t=this.getView().friendList._position._x;var s=this.getView().friendList._position._y;for(var r=0;r<this.friendsCells.length;r++){this.friendsCells[r]=u[r]}var p=this;for(var r=0;r<u.length;r++){element4=u[r];p.getView().friendList._elementsNode.removeChild(element4)}p.getView()["friendList"].destroy();p.getView()["friendList"]=new o(w[0],w[1],undefined,undefined,undefined,undefined,p.getView());p.getView()["friendList"].setItemSize(v);p.getView()["friendList"].setPosition(t,s);p.getView()["friendList"].setScrollable(undefined);p.getView().addChild(p.getView()["friendList"]);p.topCell=new n();p.topCell.actionButton.setText(Localization.getString("ui_cheerallallies_uc"));p.topCell.actionButton.setOnPressCallback(this.onCheerAll.bind(this));p.getView()["friendList"].addItem(p.topCell);this.getView()._totalHeight+=this.getView()._definitions.friendList.itemHeight;for(var r=0;r<u.length;r++){elementToAdd=u[r];p.getView()["friendList"].addItem(elementToAdd);this.getView()._totalHeight+=this.getView()._definitions.friendList.itemHeight}if(u.length==this.cellsPerPage&&this.resultData.length>this.cellsPerPage){this.pagination=new g();this.pagination.nextButton.setOnPressCallback(this.onPaginationNext.bind(this));this.pagination.prevButton.setOnPressCallback(this.onPaginationPrev.bind(this));this.pagination.prevButton.setEnabled(false);p.getView()["friendList"].addItem(this.pagination);this.getView()._totalHeight+=this.getView()._definitions.friendList.itemHeight}p.getView()["friendList"].itemAtIndex(0).actionButton.setEnabled(true);p.getView()["friendList"].itemAtIndex(0).actionButton.setVisible(true)},onInviteFriendAction:function(){console.log("FriendsViewController onInviteFriendAction");TFSceneDirector.showSearchFriends()},onCheerAll:function(){console.log("FriendsViewController onCheerAll");var s=TFUserData.sentNotifications["greets"];this.names=new Array();for(var q in s){console.log("FriendsViewController > onCheerAll > greets "+q+": "+JSON.stringify(s[q]))}for(var t=0;t<this.resultData.length;t++){console.log("FriendsViewController > onCheerAll > checking to cheer"+this.resultData[t].name);var r=this.resultData[t].name;var v=false;for(var q in s){var p=s[q];if(r==p.userId){console.log("FriendsViewController > onCheerAll > already cheered");v=true;break}}if(!v){console.log("FriendsViewController > onCheerAll > cheering "+r);this.names.push(r)}}if(this.names.length>0){Server.cheerPlayer(this.names,this.cheerAllDone.bind(this))}else{var u={};u.title="";u.fusionCost=Localization.getString("ui_alreadycheeredalliestoday");u.buttons="one";u.cb=null;TFSceneDirector._showDialog(new e(u))}},onViewPlayer:function(){console.log("FriendsViewController onViewPlayer")},removeFellow:function(p){console.log("FriendsViewController removeFellow");Server.removeFellows(this.resultData[p+(this.cellsPerPage*this.page)].name,this.fellowRemoved.bind(this,p))},cheerPlayer:function(p){console.log("FriendsViewController cheerPlayer - item : "+p+", name : "+this.resultData[p].name);Server.cheerPlayer([this.resultData[p].name],this.cheerDone.bind(this,p))},cheerDone:function(u,s,q){console.log("FriendsViewController cheerDone - item : "+JSON.stringify(u));if(s){console.log("[ERROR] FriendsViewController > cheerDone > Server error, returned "+JSON.stringify(s));h.showErrorMessages(q);return}console.log("FriendsViewController > cheerDone > serverResponse : "+JSON.stringify(q));var p=this.friendsCells[u-this.page*this.cellsPerPage];TFUserData.gashaPoints=q.gashaPoints;TFSceneDirector.getTopHudViewController().updateFriendsPoints();console.log("playerCell.playerName : "+JSON.stringify(p.playerName.getText()));var r=TFUserData.sentNotifications["greets"];var t={};t.userId=p.playerName.getText();t.dateSent=Server.getTime();r.push(t);var v={};if(q.gashaPointIncrease===0){v.title="";v.fusionCost="ui_alreadycheeredpersontoday"}else{v.title=Localization.getString("ui_congratsexcl");v.fusionCost=Localization.getString("ui_youearned")+" "+q.gashaPointIncrease+" "+Localization.getString("ui_allypointsexcl")}v.buttons="one";v.cb=null;TFSceneDirector._showDialog(new e(v))},cheerAllDone:function(r,p){console.log("FriendsViewController cheerAllDone");if(r){console.log("[ERROR] FriendsViewController > cheerAllDone > Server error, returned "+JSON.stringify(r));h.showErrorMessages(p);return}console.log("FriendsViewController > cheerAllDone > success, returned "+JSON.stringify(p));TFUserData.gashaPoints=p.gashaPoints;TFSceneDirector.getTopHudViewController().updateFriendsPoints();var q=TFUserData.sentNotifications["greets"];for(nameKey in this.names){name=this.names[nameKey];var s={};s.userId=name;s.dateSent=Server.getTime();q.push(s)}var t={};if(p.gashaPointIncrease===0){t.title="";t.fusionCost=Localization.getString("ui_alreadycheeredalliestoday")}else{t.title=Localization.getString("ui_congratsexcl");t.fusionCost=Localization.getString("ui_youearned")+" "+p.gashaPointIncrease+" "+Localization.getString("ui_allypointsexcl")}t.buttons="one";t.cb=null;TFSceneDirector._showDialog(new e(t))},openSendMessage:function(){console.log("FriendsViewController openSendMessage");this.getView()._popUpView.setVisible(true);this.getView()._popUpView._buttonOk.setOnClick(this.sendMessage.bind(this))},sendMessage:function(){console.log("FriendsViewController sendMessage");console.log("FriendsViewController.sendMessage ---- TO DO ---- "+this.getView()._popUpView._textArea.getText());this.getView()._popUpView._textArea.setText("");this.getView()._popUpView.setVisible(false)},fellowRemoved:function(q,p,r){if(p){h.showErrorMessages(r);return}console.log("FriendsViewController fellowRemoved");TFSceneDirector.showFriends()},onFriendRequestAction:function(p){console.log("FriendsViewController onFriendRequestAction");TFSceneDirector.showRequests(p.info.data)},onCheered:function(q){var p={};p.text=Localization.getString("ui_alreadycheeredpersontoday");p.fusionCost="";p.buttons="one";p.cb=null;TFSceneDirector._showDialog(new e(p))},goToProfile:function(r,q){var t=q.id;var s=TFUserData.sentNotifications["greets"];for(var u in s){var p=s[u];if(p.userId===t){q.greetSent=true;break}}TFSceneDirector.showProfile(r,l,q,"slideleft")}})}};__ngs._5d={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var a=__ngs.r_(__ngs._n).ViewController;var g=__ngs.r_(__ngs._9x).SearchFriendsView;var e=__ngs.r_(__ngs._9s).FriendsCellView;var h=__ngs.r_(__ngs._9y).ListMessageView;var c=__ngs.r_(__ngs._45).AnimationQueue;b.SearchFriendsViewController=a.subclass({classname:"SearchFriendsViewController",initialize:function($super){$super();console.log("SearchFriendsViewController > initialize");this.createView(g);TFSceneDirector.shiftUIElementUp(this.getView().totalAlliesGroup);TFSceneDirector.shiftUIElementRight(this.getView().totalAlliesGroup);TFSceneDirector.shiftUIElementUp(this.getView().allyPointGroup);var l={displayed:true,animated:true,timeout:1000};var k={displayed:true,animated:true,timeout:1000};this.setHudDisplayData(l,k);this.getView().totalAlliesGroup.alliesCount.setText(""+TFUserData.fellows.length);this.getView().totalAlliesGroup.alliesMaxCount.setText("/ "+TFUserData.maxFellows);this.getView().allyPointGroup.allyPoints.setText(TFUserData.gashaPoints)},destroy:function($super){$super();console.log("SearchFriendsViewController > destroy")},setBottomHudView:function(k){console.log("SearchFriendsViewController > setBottomHudView");var l=__ngs.r_(__ngs._9z).BottomHudSearchFriendsView;k.updateHudWithView(l)},onSearchByName:function(){this.getView().showSearchBox(true)},onRandomSearch:function(){console.log("SearchFriendsViewController > onRandomSearch");TFSceneDirector.showSearchFriendsResults(1,TFUserData.getLevel())},onMobageSearch:function(){console.log("SearchFriendsViewController > onMobageSearch");TFSceneDirector.showSearchFriendsResults(0)},onPendingInvites:function(){console.log("SearchFriendsViewController > onPendingInvites");TFSceneDirector.showPendingInvites()},confirmSearchByName:function(){var k=this.getView().getTextAreaText();if(k&&k.length<1||!k){return}console.log("SearchFriendsViewController > confirm Search - name : "+k+" "+k.length);this.getView().showSearchBox(false);TFSceneDirector.showSearchFriendsByNameResults(2,TFUserData.getLevel(),k)},cancelSearchByName:function(){this.getView().showSearchBox(false)}})}};__ngs._5e={_c:null,_d:function(){var e={exports:{}};var c=e.exports;this._c=e;var a=__ngs.r_(__ngs._n).ViewController;var d=__ngs.r_(__ngs._45).AnimationQueue;var g=__ngs.r_(__ngs._a0).PendingInvitesView;var h=__ngs.r_(__ngs._9s).FriendsCellView;var k=__ngs.r_(__ngs._9y).ListMessageView;var b=__ngs.r_(__ngs._a1).PendingProfileView;c.PendingInvitesViewController=a.subclass({classname:"PendingInvitesViewController",initialize:function($super){$super();console.log("PendingInvitesViewController > initialize");this.createView(g);TFSceneDirector.shiftUIElementUp(this.getView().pendingList);TFSceneDirector.shiftUIElementUp(this.getView().totalAlliesGroup);TFSceneDirector.shiftUIElementRight(this.getView().totalAlliesGroup);TFSceneDirector.shiftUIElementUp(this.getView().pendingLabel);var m={displayed:true,animated:true,timeout:1000};var l={displayed:true,animated:true,timeout:1000};this.resultData=[];this.friendsCells=[];this.loadingCells=[];this.completedCells=[];this.setHudDisplayData(m,l);this._updateAllyCountUI();Server.getInvites(this.fetchDataFromServer.bind(this));this.getView()._totalHeight=this.getView()._definitions.pendingList.pos_y},_updateAllyCountUI:function(){this.getView().totalAlliesGroup.alliesCount.setText(""+TFUserData.fellows.length);this.getView().totalAlliesGroup.alliesMaxCount.setText("/ "+TFUserData.maxFellows)},fetchListItems:function(){return[]},fetchDataFromServer:function(l,m){console.log("PendingInvitesViewController > fetchDataFromServer");console.log("PendingInvitesViewController > fetchDataFromServer> error : "+JSON.stringify(l)+" response : "+JSON.stringify(m));if(l){TFUtils.showErrorMessages(m);return}this.resultData=m.invites.sent;this.fillPendingInvitesList()},destroy:function($super){$super();console.log("SearchFriendsViewController > destroy")},setBottomHudView:function(l){console.log("SearchFriendsViewController > setBottomHudView");var m=__ngs.r_(__ngs._9z).BottomHudSearchFriendsView;l.updateHudWithView(m)},fillPendingInvitesList:function(){if(this.getView()){for(var m=0;m<this.resultData.length;++m){var l=this.resultData[m];this.addPendingToList(l)}}},addPendingToList:function(o){var l=new h();var n=this.friendsCells.length;var m=o.gamerTag;if(m===undefined){m=o.userId;TFAnalytics.reportGameEvent("ERR",{err:"User "+m+" has no gamerTag"})}l.playerButton.setOnPressCallback(this.onPlayerButtonAction.bind(this,l.playerButton));l.playerName.setText(m.toUpperCase());l.playerLevel.setText("");l.friendCellButton.setText(Localization.getString("ui_remove_uc"));l.friendCellButton.setOnPressCallback(this.cancelInvite.bind(this,n));l.friendCellCancelButton.setText("");l.friendCellCancelButton.setEnabled(true);l.friendCellCancelButton.setVisible(true);l.friendCellCancelButton.setText(Localization.getString("ui_profile_uc"));l.friendCellCancelButton.setOnPressCallback(this.goToProfile.bind(this,o));this.friendsCells.push(l);this.getView().pendingList.addItem(l);this.getView()._totalHeight+=this.getView()._definitions.pendingList.itemHeight;TFUtils.downloadAvatars([m],this.addPendingToListAfterDownloadAvatars.bind(this),l)},goToProfile:function(l){TFSceneDirector.showProfile(l.userId,b,l,"slideleft")},addPendingToListAfterDownloadAvatars:function(m){var l=m.imageFile;Storage.FileSystem.stat(l,{},function(o,n){if(o){console.log("An error occurred while retrieving file information: "+o.description)}else{if(m&&m.playerButton){var p=new GL2.Texture(l,{readImageAsync:true},function(r,q){if(r){console.log("Unable to read image file: "+q.getFilename()+" error : "+r.description)}else{console.log("The image file was read: "+q.getFilename());m.playerButton.setImage(l);q.destroy()}})}}})},onPlayerButtonAction:function(l){if(l&&l.id){TFUtils.openMobageUserProfile(l.id)}},cancelInvite:function(m){this.loadingCells[m]=new k(this,Localization.getString("ui_cancelinginvite"));this.loadingCells[m].setPosition(600,this.friendsCells[m]._position._y);this.getView().pendingList._elementsNode.addChild(this.loadingCells[m]);var l=this.createAnimationQueue();l.pushAnimation(300,d.Curve.EaseIn);l.tween(d.Interpolate.point(this.friendsCells[m]._position,new Core.Point(this.friendsCells[m]._position._x-600,this.friendsCells[m]._position._y)),function(n){this.setPosition(n.getX(),this._position._y)}.bind(this.friendsCells[m]));l.tween(d.Interpolate.scalar(1,0),function(n){this.setAlpha(n)}.bind(this.friendsCells[m]));l.tween(d.Interpolate.point(this.loadingCells[m]._position,new Core.Point(this.loadingCells[m]._position._x-600,this.loadingCells[m]._position._y)),function(n){this.setPosition(n.getX(),this._position._y)}.bind(this.loadingCells[m]));l.start();console.log("PendingInvitesViewController > sendInvite > inviteTo "+m);Server.cancelInvite(this.resultData[m].userId,this.inviteCancelled.bind(this,m));this.friendsCells[m].friendCellButton.setEnabled(false)},inviteCancelled:function(n,m,o){if(m){console.log("PendingInvitesViewController > inviteCancelled > error > "+JSON.stringify(m));TFUtils.showErrorMessages(o);return}if(!this.getView()){return}this.completedCells[n]=new k(this,sprintf(Localization.getString("ui_invitationtoxcancelled"),this.resultData[n].gamerTag));this.completedCells[n].setPosition(600,this.loadingCells[n]._position._y);this.getView().pendingList._elementsNode.addChild(this.completedCells[n]);var l=this.createAnimationQueue();l.pushAnimation(800,d.Curve.Linear);l.pushAnimation(400,d.Curve.EaseIn);l.tween(d.Interpolate.point(new Core.Point(0,this.loadingCells[n]._position._y),new Core.Point(-600,this.loadingCells[n]._position._y)),function(p){this.setPosition(p.getX(),this._position._y)}.bind(this.loadingCells[n]));l.tween(d.Interpolate.scalar(1,0),function(p){this.setAlpha(p)}.bind(this.loadingCells[n]));l.tween(d.Interpolate.point(this.completedCells[n]._position,new Core.Point(0,this.completedCells[n]._position._y)),function(p){this.setPosition(p.getX(),this._position._y)}.bind(this.completedCells[n]));l.start();TFUserData.pendingFellowsCount--}})}};__ngs._5f={_c:null,_d:function(){var b={exports:{}};var d=b.exports;this._c=b;var a=__ngs.r_(__ngs._n).ViewController;var c=__ngs.r_(__ngs._45).AnimationQueue;var l=__ngs.r_(__ngs._a2).SearchFriendsResultView;var k=__ngs.r_(__ngs._9s).FriendsCellView;var g=__ngs.r_(__ngs._9y).ListMessageView;var h=__ngs.r_(__ngs._a3).UnknownProfileView;var e=__ngs.r_(__ngs._3x).Social;d.SearchFriendsResultViewController=a.subclass({classname:"SearchFriendsResultViewController",initialize:function($super,p,q,m){$super();console.log("SearchFriendsResultViewController > initialize - name : "+m);console.log("TFUserData.maxFellows : "+TFUserData.maxFellows);console.log("TFUserData.fellowsCount : "+TFUserData.fellowsCount);console.log("TFUserData.pendingFellowsCount : "+TFUserData.pendingFellowsCount);this.mode=p;this.level=q;this.searchName=m;if(m){Server.getAllUsersByName(10,m,this.fetchDataFromServer.bind(this))}else{Server.getRandomPlayers(p,q,this.fetchDataFromServer.bind(this))}this.createView(l);this.resultData=[];this.friendsCells=[];this.loadingCells=[];this.completedCells=[];TFSceneDirector.shiftUIElementUp(this.getView().searchAgainButton);TFSceneDirector.shiftUIElementUp(this.getView().friendList);var o={displayed:true,animated:true,timeout:1000};var n={displayed:true,animated:true,timeout:1000};this.setHudDisplayData(o,n);this.getView()._totalHeight=this.getView()._definitions.friendList.pos_y},fetchDataFromServer:function(o,n){if(o){TFUtils.showErrorMessages(n);return}this.resultData=n;var m=n.length;for(var p=0;p<m;p++){if(n[p].name!=TFUserData.name){this.addPlayerToList(n[p])}}},destroy:function($super){$super();console.log("SearchFriendsResultViewController destroy")},setBottomHudView:function(n){var m=__ngs.r_(__ngs._9w).BottomHudFriendsView;n.updateHudWithView(m)},fetchListItems:function(){console.log("SearchFriendsResultViewController fetchListItems");return[]},addPlayerToList:function(p){console.log("SearchFriendsResultViewController > addPlayerToList > data="+JSON.stringify(p));var m=new k();var n=p.name;m.playerName.setText(p.gamerTag.toUpperCase());m.playerLevel.setText(Localization.getString("ui_levelcolon_uc")+" "+p.level);m.friendCellButton.setText(Localization.getString("ui_invite_uc"));var o=this.friendsCells.length;m.playerButton.setOnPressCallback(this.onPlayerButtonAction.bind(this,m.playerButton));m.friendCellButton.setOnPressCallback(this.sendInvite.bind(this,o));m.friendCellCancelButton.setEnabled(true);m.friendCellCancelButton.setVisible(true);m.friendCellCancelButton.setOnPressCallback(this.onProfileButton.bind(this,p));m.friendCellCancelButton.setText(Localization.getString("ui_profile_uc"));this.friendsCells.push(m);if(this.getView()){this.getView().friendList.addItem(m);this.getView()._totalHeight+=this.getView()._definitions.friendList.itemHeight}TFUtils.downloadAvatars([n],this.addPlayerToListAfterDownloadAvatars.bind(this),m)},onProfileButton:function(m){console.log("SearchFriendsResultViewController > onProfileButton > data="+JSON.stringify(m));TFSceneDirector.showProfile(m.name,h,m,"slideleft")},addPlayerToListAfterDownloadAvatars:function(n){var m=n.imageFile;Storage.FileSystem.stat(m,{},function(p,o){if(p){console.log("An error occurred while retrieving file information: "+p.description)}else{if(n&&n.playerButton){var q=new GL2.Texture(m,{readImageAsync:true},function(s,r){if(s){console.log("Unable to read image file: "+r.getFilename()+" error : "+s.description)}else{console.log("The image file was read: "+r.getFilename());n.playerButton.setImage(m);r.destroy()}})}}})},onPlayerButtonAction:function(m){if(m&&m.id){TFUtils.openMobageUserProfile(m.id)}},onCellAction:function(m){console.log("SearchFriendsResultViewController onCellAction");console.log("SearchFriendsResultViewController > onCellAction > sender "+m)},onListAction:function(m){console.log("SearchFriendsResultViewController onListAction");console.log("SearchFriendsResultViewController > onListAction > "+m)},sendInvite:function(p){console.log("SearchFriendsResultViewController sendInvite");if(TFUserData.fellowsCount+TFUserData.pendingFellowsCount<TFUserData.maxFellows){var n=this.createAnimationQueue();this.loadingCells[p]=new g(this,Localization.getString("ui_sendinginvite"));this.loadingCells[p].setPosition(600,this.friendsCells[p]._position._y);if(this.getView()){this.getView().friendList._elementsNode.addChild(this.loadingCells[p])}n.pushAnimation(300,c.Curve.EaseIn);n.tween(c.Interpolate.point(this.friendsCells[p]._position,new Core.Point(this.friendsCells[p]._position._x-600,this.friendsCells[p]._position._y)),function(q){this.setPosition(q.getX(),this._position._y)}.bind(this.friendsCells[p]));n.tween(c.Interpolate.scalar(1,0),function(q){this.setAlpha(q)}.bind(this.friendsCells[p]));n.tween(c.Interpolate.point(this.loadingCells[p]._position,new Core.Point(this.loadingCells[p]._position._x-600,this.loadingCells[p]._position._y)),function(q){this.setPosition(q.getX(),this._position._y)}.bind(this.loadingCells[p]));n.start();console.log("SearchFriendsResultViewController > sendInvite > inviteTo "+p);Server.sendInvite(this.resultData[p].name,this.inviteSent.bind(this,p));this.friendsCells[p].friendCellButton.setEnabled(false)}else{var o=new Object();var m=__ngs.r_(__ngs._3y).PopUpController;o.title="You can't send more requests";o.fusionCost="";o.buttons="one";o.cb=null;TFSceneDirector._showDialog(new m(o))}},onSearchAgain:function(){console.log("SearchFriendsResultViewController onSearchAgain");TFSceneDirector.showSearchFriendsByNameResults(this.mode,this.level,this.searchName)},onReset:function(){console.log("SearchFriendsResultViewController onReset");Server.cancelAllInvites(this.afterReset.bind(this))},afterReset:function(m,n){console.log("SearchFriendsResultViewController afterReset");if(m){TFUtils.showErrorMessages(n);return}TFSceneDirector.showSearchFriendsResults(this.mode,this.level)},inviteSent:function(q,o,r){console.log("ULAULA SearchFriendsResultViewController > inviteSent > data > "+JSON.stringify(r));console.log("ULAULA SearchFriendsResultViewController > inviteSent > this.resultData[item] > "+JSON.stringify(this.resultData[q]));var s=r;console.log("SearchFriendsResultViewController > inviteSent > errors > From server : "+JSON.stringify(o));if(s&&s.error){console.log("SearchFriendsResultViewController > inviteSent > errors > From user : "+JSON.stringify(s.error))}if(!o&&!(s&&s.error)){this.completedCells[q]=new g(this,sprintf(Localization.getString("ui_invitationsenttox"),this.resultData[q].gamerTag.toUpperCase()));this.completedCells[q].setPosition(600,this.loadingCells[q]._position._y)}else{this.completedCells[q]=new g(this,sprintf(Localization.getString("ui_cannotsendinvitationtox"),this.resultData[q].gamerTag.toUpperCase()));this.completedCells[q].setPosition(600,this.loadingCells[q]._position._y);var p=new Object();var n=__ngs.r_(__ngs._3y).PopUpController;p.title="Cannot send invitation to "+this.resultData[q].gamerTag.toUpperCase();p.fusionCost="";p.buttons="one";p.cb=null;TFSceneDirector._showDialog(new n(p))}if(this.getView()){this.getView().friendList._elementsNode.addChild(this.completedCells[q])}var m=this.createAnimationQueue();m.pushAnimation(800,c.Curve.Linear);m.pushAnimation(400,c.Curve.EaseIn);m.tween(c.Interpolate.point(new Core.Point(0,this.loadingCells[q]._position._y),new Core.Point(-600,this.loadingCells[q]._position._y)),function(t){this.setPosition(t.getX(),this._position._y)}.bind(this.loadingCells[q]));m.tween(c.Interpolate.scalar(1,0),function(t){this.setAlpha(t)}.bind(this.loadingCells[q]));m.tween(c.Interpolate.point(this.completedCells[q]._position,new Core.Point(0,this.completedCells[q]._position._y)),function(t){this.setPosition(t.getX(),this._position._y)}.bind(this.completedCells[q]));m.start();this.friendsCells[q].friendCellButton.setText(Localization.getString("ui_sent_uc"))}})}};__ngs._5g={_c:null,_d:function(){var h={exports:{}};var d=h.exports;this._c=h;var b=__ngs.r_(__ngs._n).ViewController;var k=__ngs.r_(__ngs._a4).BattleResultView;var g=__ngs.r_(__ngs._48).TFSoundManager;var e=__ngs.r_(__ngs._45).AnimationQueue;var c=__ngs.r_(__ngs._63).TFFormulas;var a=__ngs.r_(__ngs._89).CardThumbnailView;d.BattleResultViewController=b.subclass({classname:"BattleResultViewController",MUSIC_KEY_BATTLE_VICTORY:"Music_SceneTransition",MUSIC_KEY_LEVEL_UP:"LEVEL_UP",initialize:function($super){$super();this._slideAnimationDuration=300;this.createView(k);this.resultData=TFUserData.getLastBattleResult();var q=true;if(this.resultData&&this.resultData.playerWins){this.getView().resultLabel.resultLabel2.setText(Localization.getString("ui_victory_uc"));this.getView().opponentBlock.opponentBGMiddleWin.setVisible(false);this.getView().opponentBlock.opponentBGRightWin.setVisible(false);this.getView().opponentBlock.opponentBGMiddle.setVisible(true);this.getView().opponentBlock.opponentBGRight.setVisible(true);this.getView().opponentBlock.opponentBGMiddleDim.setVisible(true);this.getView().opponentBlock.opponentBGRightDim.setVisible(true);g.playMusic(this.MUSIC_KEY_BATTLE_VICTORY,true);TFUserData.updateBattleWin(true)}else{this.getView().resultLabel.resultLabel2.setText(Localization.getString("ui_defeated_uc"));this.getView().resultLabel.resultLabel2.setColor(255,0,0);this.getView().impactb.setVisible(false);this.getView().impactb2.setVisible(false);this.getView().impactb3.setVisible(false);this.getView().impacta.setVisible(false);this.getView().impacta2.setVisible(false);this.getView().impacta3.setVisible(false);TFUserData.updateBattleWin(false)}this.getView().resultLabel.resultLabel2.setText((this.resultData&&this.resultData.playerWins)?Localization.getString("ui_victory_uc"):Localization.getString("ui_defeated_uc"));this.getView().playerName.playerName2.setText(TFUserData.getGamerTag().toUpperCase());this.getView().playerBlock.level.setText(Localization.getString("ui_level_uc")+" "+TFUserData.getLevel());this.getView().playerBlock.wins.setText(Localization.getString("ui_battleswon_uc")+" "+TFUserData.stats.wins);var m=this.getView()._definitions.playerBlock.info.card_w;var w=this.getView()._definitions.playerBlock.info.card_h;panel=new a(this,TFUserData.getDeckCard(2,0,TFGameData.CARD_TYPE.TRANSFORMER).definitionId,m,w,{leader:true,showSpinner:true});this.getView().playerBlock._cardPanel=panel;this.getView().playerBlock.addChild(panel);var p=this.getView()._definitions.playerBlock.info.card_pos_x;var n=this.getView()._definitions.playerBlock.info.card_pos_y;panel.setAlpha(0);panel.setPosition(0,0);panel.disableTap();this.opponent=TFUserData.getSelectedOpponent();this.getView().opponentName.opponentName2.setText(this.opponent.gamerTag.toUpperCase());this.getView().opponentBlock.level.setText(Localization.getString("ui_level_uc")+" "+this.opponent.level);this.getView().opponentBlock.wins.setText(Localization.getString("ui_battleswon_uc")+" "+this.opponent.wins);m=this.getView()._definitions.opponentBlock.info.card_w;w=this.getView()._definitions.opponentBlock.info.card_h;panel2=new a(this,this.opponent.gear.definitionId,m,w,{leader:true,showSpinner:true});this.getView().opponentBlock._cardPanel=panel2;this.getView().opponentBlock.addChild(panel2);p=this.getView()._definitions.opponentBlock.info.card_pos_x;n=this.getView()._definitions.opponentBlock.info.card_pos_y;panel2.setAlpha(0);panel2.setPosition(p,n);panel2.disableTap();if(this.resultData){console.log("Battle resultData="+JSON.stringify(this.resultData));if(this.resultData.playerWins){if(TFUserData.isMaxLevel()){this.getView().xp.setText("+0")}else{this.getView().xp.setText("+"+this.resultData.rewards.xpReward)}this.getView().bp.setText("+"+this.resultData.rewards.battlePointsReward);this.getView().credits.setText("+"+this.resultData.rewards.goldReward);this._levelUpData=TFUserData.setTotalXp(TFUserData.getTotalXp()+this.resultData.rewards.xpReward);TFUserData.setBattlePoints(TFUserData.getBattlePoints()+this.resultData.rewards.battlePointsReward);console.log("BattleResultViewController > initialize > currency : "+TFUserData.currency);console.log("BattleResultViewController > initialize > gold : "+this.resultData.rewards.goldReward);TFUserData.setTotalCurrency(TFUserData.currency+this.resultData.rewards.goldReward);console.log("BattleResultViewController > initialize > currency2: "+TFUserData.currency);TFSceneDirector._topHudViewController.update()}else{this.getView().xp.setText("+0");this.getView().bp.setText("+0");if(this.resultData.rewards){this.getView().credits.setText("+"+0)}else{this.getView().credits.setText("+"+this.resultData.rewards)}}}if(q){if(this.resultData&&this.resultData.playerWins){var r=__ngs.r_(__ngs._a5)}else{var r=__ngs.r_(__ngs._a6)}var v=JSON.parse(JSON.stringify(r));for(var o in v.motions){if(v.motions[o].source){TFUtils.removeJsonOffsets(v.motions[o].source)}}var u=this;var t=new GL2.MotionData();t.initFromData(v,GL2.MotionData.DataFormat.FlashClassicTween,function(x,y){if(x){console.log("levelup animation error :"+JSON.stringify(x))}else{mc=new GL2.MotionController(y);syncFlags=GL2.MotionController.SyncFlags.All;mc.bind("banner_text",u.getView().resultLabel,syncFlags);mc.bind("banner_battle_result",u.getView().bannerBattle,syncFlags);mc.bind("player_them",panel2,syncFlags);if(this.resultData&&this.resultData.playerWins){mc.bind("player_broken_right",u.getView().opponentBlock.opponentBGRightDim,syncFlags);mc.bind("player_broken_middle",u.getView().opponentBlock.opponentBGMiddleDim,syncFlags);mc.bind("player_broken_lit_middle",u.getView().opponentBlock.opponentBGMiddle,syncFlags);mc.bind("player_broken_lit_right",u.getView().opponentBlock.opponentBGRight,syncFlags);mc.bind("player_frame_right",u.getView().playerBlock.playerBGRightWin,syncFlags);mc.bind("player_frame_middle",u.getView().playerBlock.playerBGMiddleWin,syncFlags);mc.bind("fx_b_3",u.getView().impactb3,syncFlags);mc.bind("fx_a_3",u.getView().impacta3,syncFlags);mc.bind("fx_b_2",u.getView().impactb2,syncFlags);mc.bind("fx_a_2",u.getView().impacta2,syncFlags);mc.bind("fx_b_1",u.getView().impactb,syncFlags);mc.bind("fx_a_1",u.getView().impacta,syncFlags)}else{mc.bind("player_frame_right",u.getView().playerBlock.playerBGRightWin,syncFlags);mc.bind("player_frame_middle",u.getView().playerBlock.playerBGMiddleWin,syncFlags);mc.bind("player_2_frame_right",u.getView().opponentBlock.opponentBGRightWin,syncFlags);mc.bind("player_2_frame_middle",u.getView().opponentBlock.opponentBGMiddleWin,syncFlags)}mc.bind("player_self",panel,syncFlags);mc.bind("dropshadow_black_bottom",u.getView().dropshadowBottom,syncFlags);mc.bind("dropshadow_black_top",u.getView().dropshadowTop,syncFlags);mc.syncFrames("banner_battle_result",[45],GL2.MotionController.SyncFlags.Position,function(z,A){u.getView().iconBP.setVisible(true);u.getView().iconCredits.setVisible(true);u.getView().staticXP.setVisible(true);u.getView().xp.setVisible(true);u.getView().bp.setVisible(true);u.getView().credits.setVisible(true);u.getView().playerName.playerName2.setVisible(true);u.getView().opponentName.opponentName2.setVisible(true);u.getView().opponentBlock.level.setVisible(true);u.getView().opponentBlock.wins.setVisible(true);u.getView().playerBlock.level.setVisible(true);u.getView().playerBlock.wins.setVisible(true)}.bind(u));this._mc=mc;this.getView().bannerBattle.setVisible(true);mc.play(GL2.MotionController.PlayMode.Normal)}}.bind(this))}var l={displayed:true,animated:true,timeout:300,mode:"no_card_counts"};var s={displayed:false,animated:true,timeout:300};this.setHudDisplayData(l,s);this._slidePlayerIn()},onCardSelected:function(n){var q=n.info.cardID;var o={};var p=TFCardsManager.getCardDefinition(q);var m=c.getStatusForLevel(p,1);o.stats=m;o.CardDefinition=q;o.cbDismiss=function(){this._blocked=false}.bind(this);var l;if(p.type==TFGameData.CARD_TYPE.TRANSFORMER){l=__ngs.r_(__ngs._80).FullScreenCardController}else{l=__ngs.r_(__ngs._8a).FullScreenWeaponCardController}TFSceneDirector._showDialog(new l(o,true))},_slidePlayerIn:function(){g.playSound("Battle_Player_Info_Wisp_04")},onEnemyDeckButton:function(){console.log("BattleResultViewController > onEnemyDeckButton");TFSceneDirector.showEnemyDeck()},onContinue:function(m){var l=TFUserData.getLevel();if(l>TFSceneDirector.oldLevel&&TFUserData._battleChanceMissionId===undefined){this.continueLevelUp(this._levelUpData)}else{this.continueNormal()}TFSceneDirector.oldLevel=null},continueNormal:function(){if(TFUserData.getTutorialState("battle")=="interim"){TFUserData.setNewTutorialState("battle","end");TFAnalytics.reportGameEvent("BATTLETUTORIAL",{Step:"08_END_BattleContinueClick"})}if(TFUserData._battleChanceMissionId!=undefined){TFSceneDirector.showDoItMission(TFUserData._battleChanceMissionId);TFUserData._battleChanceMissionId=undefined}else{TFSceneDirector.showOpponents()}},continueLevelUp:function(l){TFSceneDirector.enableGlobalTouches("BattleResultViewController [LevelUp]");TFUserData.clearLevelUp();g.playMusic(this.MUSIC_KEY_LEVEL_UP,true);TFUserData.setExploreEnergy(TFUserData.getMaxExploreEnergy());TFUserData.setBattleEnergy(TFUserData.getMaxBattleEnergy());var m=new Object();m.infoLevel=l;m.destroyCB=TFSceneDirector.showOpponents.bind(TFSceneDirector);var n=__ngs.r_(__ngs._8o).LevelUpController;TFSceneDirector._showDialog(new n(m,true))},onViewDeck:function(l){TFSceneDirector.showCardList()},destroy:function($super){if(this._mc){this._mc.destroy()}$super()},afterViewDisplayed:function(){if((TFUserData.getTutorialState("battle")=="start")){var m=new Object();m.title=Localization.getString("tutorial_battle_title_05");m.text=Localization.getString("tutorial_battle_text_05");m.Id="tutorial_battle_title_05";m.cb=function(){TFAnalytics.reportGameEvent("BATTLETUTORIAL",{Step:"07_BattleResultTutClose"})};var n=__ngs.r_(__ngs._81).TutorialBubbleView;var l=TFSceneDirector.showTutorialDialog(n,m);l.getView().bubble1.setPosition(-320,-100);TFUserData.setNewTutorialState("battle","interim")}}})}};__ngs._5h={_c:null,_d:function(){var d={exports:{}};var g=d.exports;this._c=d;var c=__ngs.r_(__ngs._n).ViewController;var l=__ngs.r_(__ngs._a7).BossResultView;var k=__ngs.r_(__ngs._48).TFSoundManager;var e=__ngs.r_(__ngs._45).AnimationQueue;var b=__ngs.r_(__ngs._63).TFFormulas;var a=__ngs.r_(__ngs._89).CardThumbnailView;var h=__ngs.r_(__ngs._3y).PopUpController;g.BossResultViewController=c.subclass({classname:"BossResultViewController",MUSIC_KEY_WIN_BOSS_AUTOBOTS:"COMPLETE_MISION_AUTOBOT",MUSIC_KEY_WIN_BOSS_DECEPTICONS:"COMPLETE_MISION_DECEPTICON",_bossDefeated:false,initialize:function($super,x,n,z){$super();this._slideAnimationDuration=300;this._callback=z;this._worldId=TFGameData.getWorldIdForMission(n);this._stageId=TFGameData.getStageIdForMission(n);this._missionId=n;this._deckIndex=TFGameData.getCorrectDeckForWorld(this._worldId);this._boss=x;this.createView(l);TFSceneDirector.shiftUIElementUp(this.getView().dropshadowTop);TFSceneDirector.shiftUIElementDown(this.getView().dropshadowBottom);this.resultData=TFUserData.getLastBattleResult();this.opponent=TFUserData.getSelectedOpponent();var q=this.getView().resultLabel;if(this.resultData&&this.resultData.playerWins){this.getView().winLoseFrame.resultLabel.setText(Localization.getString("ui_victory_uc"));TFUtils.changeImageOnSprite(this.getView().winLoseFrame.leftWinLoseFrame,"Content/Images8x/UI/12_battle/banner_green_left.png");TFUtils.changeImageOnSprite(this.getView().winLoseFrame.middleWinLoseFrame,"Content/Images8x/UI/12_battle/banner_green_middle.png");TFUtils.changeImageOnSprite(this.getView().winLoseFrame.rightWinLoseFrame,"Content/Images8x/UI/12_battle/banner_green_left.png");k.playMusic(this.MUSIC_KEY_BATTLE_VICTORY,true);TFUserData.updateBattleWin(true)}else{this.getView().winLoseFrame.resultLabel.setText(Localization.getString("ui_defeated_uc"));TFUtils.changeImageOnSprite(this.getView().winLoseFrame.leftWinLoseFrame,"Content/Images8x/UI/12_battle/banner_red_left.png");TFUtils.changeImageOnSprite(this.getView().winLoseFrame.middleWinLoseFrame,"Content/Images8x/UI/12_battle/banner_red_middle.png");TFUtils.changeImageOnSprite(this.getView().winLoseFrame.rightWinLoseFrame,"Content/Images8x/UI/12_battle/banner_red_left.png");TFUserData.updateBattleWin(false)}this.getView().playerBlock.name.setText(TFUserData.getGamerTag().toUpperCase());this.getView().playerBlock.level.setText(Localization.getString("ui_level_uc")+" "+TFUserData.getLevel());var r=this.getView()._definitions.playerBlock.info.card_w;var A=this.getView()._definitions.playerBlock.info.card_h;panel=new a(this,TFUserData.getDeckCard(2,0,TFGameData.CARD_TYPE.TRANSFORMER,this._deckIndex).definitionId,r,A,{showSpinner:true});this.getView().playerBlock._cardPanel=panel;this.getView().playerBlock.addChild(panel);var u=this.getView()._definitions.playerBlock.info.card_pos_x;var s=this.getView()._definitions.playerBlock.info.card_pos_y;panel.setPosition(u,s);panel.disableTap();this.getView().opponentBlock.name.setText(Localization.getString(this._boss.name));r=this.getView()._definitions.opponentBlock.info.card_w;A=this.getView()._definitions.opponentBlock.info.card_h;panel=new a(this,this._boss.gearId,r,A,{showSpinner:true});this.getView().opponentBlock._cardPanel=panel;this.getView().opponentBlock.addChild(panel);u=this.getView()._definitions.opponentBlock.info.card_pos_x;s=this.getView()._definitions.opponentBlock.info.card_pos_y;panel.setPosition(u,s);panel.disableTap();var o=__ngs.r_(__ngs._8e).FullScreenMissionController;var w=(this.resultData&&this.resultData.playerWins)?true:false;var B=w?this._boss.winDialog:this._boss.defeatDialog;this._bossDefeated=w?true:false;if(!w){if(TFGameData.getWorld(this._worldId).faction==TFGameData.FACTION.AUTOBOTSTRING){k.playMusic(this.MUSIC_KEY_WIN_BOSS_AUTOBOTS,true)}else{k.playMusic(this.MUSIC_KEY_WIN_BOSS_DECEPTICONS,true)}}if(TFGameData.getStage(this._worldId,this._stageId).boss.stageBossDialog){var v=new Object();v.image=TFGameData.getStage(this._worldId,this._stageId).boss.outroCharacter;v.message=B;v.cb=function(){};TFSceneDirector._showDialog(new o(v,true))}var m=this.getView().rewardLabel;if(this.resultData.rewards.enemyRewards){for(var t in this.resultData.rewards.enemyRewards){if(this.resultData.rewards.enemyRewards[t].type==TFGameData.REWARD_TYPE.GOLD){m.setText("+"+this.resultData.rewards.enemyRewards[t].value+" "+Localization.getString("ui_credits"))}}}console.log("-------------------------- update battleEnergy");if(this.resultData&&this.resultData.rewards){console.log("-------------------------- this.resultData "+JSON.stringify(this.resultData.rewards));if(this.resultData.rewards.maxExploreEnergy){TFUserData.setExploreMaxEnergy(this.resultData.rewards.maxExploreEnergy)}if(this.resultData.rewards.exploreEnergy){TFUserData.setExploreEnergy(this.resultData.rewards.exploreEnergy)}}var p={displayed:true,animated:true,timeout:1000,mode:"no_card_counts"};var y={displayed:false,animated:true,timeout:1000};this.setHudDisplayData(p,y);this.getView().continueButton.setEnabled(false);TFSceneDirector.disableBack("bossFightRewards")},showEnergyPopUp:function(){if(this.resultData.rewards.maxExploreEnergy){var m={};m.title=Localization.getString("ui_maxexploreenergy");m.fusionCost=Localization.getString("ui_maxexploreenergyhasincreased")+" "+this.resultData.rewards.maxExploreEnergy;m.buttons="one";TFSceneDirector._showDialog(new h(m))}},onCardSelected:function(o){var r=o.info.cardID;var p={};var q=TFCardsManager.getCardDefinition(r);var n=b.getStatusForLevel(q,1);p.stats=n;p.CardDefinition=r;p.cbDismiss=function(){this._blocked=false}.bind(this);var m;if(q.type==TFGameData.CARD_TYPE.TRANSFORMER){m=__ngs.r_(__ngs._80).FullScreenCardController}else{m=__ngs.r_(__ngs._8a).FullScreenWeaponCardController}TFSceneDirector._showDialog(new m(p,true))},_slidePlayerIn:function(){var m=this.createAnimationQueue();m.pushCallback(function(){k.playSound("Battle_Player_Info_Wisp_04")}.bind(this));m.pushAnimation(this._slideAnimationDuration,e.Curve.EaseIn);m.tween(e.Interpolate.scalar(640,0),function(n){if(this.playerBlock){this.playerBlock.setPosition(n,this.playerBlock.getPosition().getY())}}.bind(this.getView()));m.pushCallback(this._slideOpponentIn.bind(this));m.start()},_slideOpponentIn:function(){var m=this.createAnimationQueue();m.pushAnimation(this._slideAnimationDuration,e.Curve.EaseIn);m.tween(e.Interpolate.scalar(-640,0),function(n){if(this.opponentBlock){this.opponentBlock.setPosition(n,this.opponentBlock.getPosition().getY())}}.bind(this.getView()));m.pushCallback(function(){k.playSound("Battle_Player_Info_Wisp_01")}.bind(this));m.pushCallback(this._animateWinLoseFrame.bind(this));m.start()},_animateWinLoseFrame:function(){var m=this.createAnimationQueue();m.pushAnimation(this._slideAnimationDuration,e.Curve.EaseIn);m.tween(e.Interpolate.scalar(-640,0),function(n){this.winLoseFrame.setPosition(n,this.winLoseFrame.getPosition().getY())}.bind(this.getView()));m.pushCallback(function(){this.showCardReward();this.showTutorial()}.bind(this));m.start()},showCardReward:function(){var m=__ngs.r_(__ngs._80).FullScreenCardController;var r=__ngs.r_(__ngs._8a).FullScreenWeaponCardController;var q;if(this.resultData.rewards.card){q=this.resultData.rewards.card}else{if(this.resultData.rewards.enemyRewards){for(var p in this.resultData.rewards.enemyRewards){if(this.resultData.rewards.enemyRewards[p].type==TFGameData.REWARD_TYPE.CARD){q=this.resultData.rewards.enemyRewards[p].value;break}}}}if(q){if(this._missionId){var o=TFUserData.getCardsEarnedForMission(this._missionId);if(o.indexOf(q.definitionId)==-1){o.push(q.definitionId)}}defCard=TFCardsManager.getCardDefinition(q.definitionId);console.log("------------------------ defCard.type "+defCard.type);if(defCard.type==TFGameData.CARD_TYPE.TRANSFORMER){TFSceneDirector._showDialog(new m({usercard:q,destroyCB:function(){if(!TFGameData._justOverflowFlag&&TFUserData.cardsLimbo&&TFUserData.cardsLimbo.length>0){var s=__ngs.r_(__ngs._87).OverLimitCardsController;TFSceneDirector._showDialog(new s());TFGameData._justOverflowFlag=true}}},true))}else{var n=this;TFSceneDirector._showDialog(new r({usercard:q,destroyCB:function(){if(!TFGameData._justOverflowFlag&&TFUserData.cardsLimbo&&TFUserData.cardsLimbo.length>0){var s=__ngs.r_(__ngs._87).OverLimitCardsController;TFSceneDirector._showDialog(new s({destroyCB:n.showEnergyPopUp.bind(n)}));TFGameData._justOverflowFlag=true}else{n.showEnergyPopUp()}if((TFUserData.getTutorialState("mission")=="stageComplete")){TFAnalytics.reportGameEvent("MISSIONTUTORIAL",{Step:"BossResultWeaponCardDismiss"})}}},true))}}else{this.showEnergyPopUp()}this.getView().continueButton.setEnabled(true);TFSceneDirector.enableBack()},showTutorial:function(){if((TFUserData.getTutorialState("mission")=="stageComplete")){var n={};if(this.resultData&&this.resultData.playerWins){n.title=Localization.getString("tutorial_boss_title_02");n.text=Localization.getString("tutorial_boss_text_02");n.Id="tutorial_boss_title_02"}else{n.title=Localization.getString("tutorial_boss_title_02_defeat");n.text=Localization.getString("tutorial_boss_text_02_defeat");n.Id="tutorial_boss_title_02_defeat"}n.cb=function(){TFAnalytics.reportGameEvent("MISSIONTUTORIAL",{Step:"BossResultTutDismiss"})};var o=__ngs.r_(__ngs._81).TutorialBubbleView;var m=TFSceneDirector.showTutorialDialog(o,n);m.getView().bubble1.setPosition(-320,-100)}},onContinue:function(n){if((TFUserData.getTutorialState("mission")=="stageComplete")){TFAnalytics.reportGameEvent("MISSIONTUTORIAL",{Step:"END-BossResultContinueClick"})}if(this._bossDefeated&&TFGameData.getStage(this._worldId,this._stageId).outroSlideShow){var m=__ngs.r_(__ngs._8e).FullScreenMissionController;var o=new Object();o.image=TFGameData.getStage(this._worldId,this._stageId).campaignStageOutroCharacter;o.message=TFGameData.getStage(this._worldId,this._stageId).campaignStageOutroDialog;o.cb=function(){};TFSceneDirector._showDialog(new m(o,true))}if(this._callback){this._callback()}return},onViewDeck:function(m){TFSceneDirector.showCardList()},afterViewDisplayed:function(){this._slidePlayerIn()},destroy:function($super){$super()}})}};__ngs._5i={_c:null,_d:function(){var e={exports:{}};var b=e.exports;this._c=e;var a=__ngs.r_(__ngs._n).ViewController;var h=__ngs.r_(__ngs._a8).RequestFriendsView;var g=__ngs.r_(__ngs._9s).FriendsCellView;var d=__ngs.r_(__ngs._9t).PaginationCellView;var c=__ngs.r_(__ngs._9u).FriendListTopCellView;b.RequestFriendsViewController=a.subclass({classname:"RequestFriendsViewController",acceptStack:{},initialize:function($super,m){$super();this.createView(h);this.friendsCells=[];this.page=0;this.cellsPerPage=10;this.acceptedAll=false;TFSceneDirector.shiftUIElementUp(this.getView().friendList);TFSceneDirector.shiftUIElementUp(this.getView().totalAlliesGroup);TFSceneDirector.shiftUIElementRight(this.getView().totalAlliesGroup);var l={displayed:true,animated:true,timeout:1000};var k={displayed:true,animated:true,timeout:1000};this.setHudDisplayData(l,k);this._updateAllyCountUI();if(m){this.resultData=m;this.addInvitesToList()}else{this.resultData=[];Server.getInvites(this.fetchDataFromServer.bind(this))}},_updateAllyCountUI:function(){this.getView().totalAlliesGroup.alliesCount.setText(""+TFUserData.fellows.length);this.getView().totalAlliesGroup.alliesMaxCount.setText("/ "+TFUserData.maxFellows)},fetchDataFromServer:function(k,l){console.log("RequestFriendsViewController > fetchDataFromServer> error : "+JSON.stringify(k)+" response : "+JSON.stringify(l));if(k){TFUtils.showErrorMessages(l);return}if(!this.getView()){return}this.resultData=l.invites.received;this.addInvitesToList()},destroy:function($super){$super()},setBottomHudView:function(k){var l=__ngs.r_(__ngs._9z).BottomHudSearchFriendsView;k.updateHudWithView(l)},onListAction:function(k){},fetchListItems:function(){return[]},addInvitesToList:function(){this.topCell=new c();this.topCell.actionButton.setText(Localization.getString("ui_acceptall_uc"));this.topCell.actionButton.setOnPressCallback(this.onAcceptAll.bind(this));this.getView().friendList.addItem(this.topCell);for(var l=0;l<this.resultData.length&&l<this.cellsPerPage;++l){var k=this.resultData[l];this.addInviteToList(k)}if(this.resultData.length>this.cellsPerPage){this.pagination=new d();this.pagination.nextButton.setOnPressCallback(this.onPaginationNext.bind(this));this.pagination.prevButton.setOnPressCallback(this.onPaginationPrev.bind(this));this.pagination.prevButton.setEnabled(false);this.getView().friendList.addItem(this.pagination)}},onPaginationNext:function(){this.page++;this.pagination.prevButton.setEnabled(true);this.updateCellsOnPagination();if((this.page+1)*this.cellsPerPage>=this.resultData.length){this.pagination.nextButton.setEnabled(false)}},updateCellsOnPagination:function(){for(var k=0;k<this.cellsPerPage;++k){if(!this.resultData[k+(this.page*this.cellsPerPage)]){this.friendsCells[k].setVisible(false);this.friendsCells[k].friendCellCancelButton.setEnabled(false);this.friendsCells[k].friendCellButton.setEnabled(false);continue}this.friendsCells[k].setVisible(true);if(this.resultData[k+(this.page*this.cellsPerPage)].accepted){this.friendsCells[k].friendCellButton.setEnabled(false);this.friendsCells[k].friendCellButton.setText(Localization.getString("ui_accepted"))}else{this.friendsCells[k].friendCellButton.setEnabled(false);this.friendsCells[k].friendCellButton.setText(Localization.getString("ui_accept"))}this.friendsCells[k].friendCellCancelButton.setEnabled(true);this.friendsCells[k].friendCellButton.setEnabled(!this.acceptedAll);this.friendsCells[k].playerName.setText(this.resultData[k+(this.page*this.cellsPerPage)].gamerTag.toUpperCase());this.friendsCells[k].friendCellButton.setOnPressCallback(this.acceptInvite.bind(this,k+(this.page*this.cellsPerPage)))}},onPaginationPrev:function(){this.page--;this.pagination.nextButton.setEnabled(true);this.updateCellsOnPagination();if(this.page==0){this.pagination.prevButton.setEnabled(false)}},addInviteToList:function(n){var k=new g();var l="";if(n.gamerTag){l=n.gamerTag.toUpperCase()}else{l=n.name}k.playerName.setText(l);k.playerLevel.setText("");k.friendCellButton.setText(Localization.getString("ui_accept"));var m=this.friendsCells.length;k.friendCellButton.setOnPressCallback(this.acceptInvite.bind(this,m));k.friendCellCancelButton.setText(Localization.getString("ui_cancel"));k.friendCellCancelButton.setOnPressCallback(this.cancelInvite.bind(this,m));k.friendCellCancelButton.setEnabled(false);k.friendCellCancelButton.setVisible(false);this.friendsCells.push(k);this.getView().friendList.addItem(k)},cancelInvite:function(l){var k=this.friendsCells[l];Server.rejectInvite(this.resultData[l].userId,this.inviteCancelled.bind(this,l));k.friendCellButton.setEnabled(false);k.friendCellCancelButton.setEnabled(false)},inviteCancelled:function(n,m,l){if(m){TFUtils.showErrorMessages(l);return}var k=this.friendsCells[n];k.friendCellButton.setText("");k.friendCellCancelButton.setText(Localization.getString("ui_cancelled_uc"))},inviteAccepted:function(o,m,l){if(m){TFUtils.showErrorMessages(l);console.log("RequestFriendsViewController > inviteAccepted > pendingFellowsCount="+TFUserData.pendingFellowsCount);return}var k=this.friendsCells[o-this.page*this.cellsPerPage];k.friendCellButton.setText(Localization.getString("ui_accepted"));k.friendCellCancelButton.setText("");k.friendCellButton.setEnabled(false);k.friendCellCancelButton.setEnabled(false);this.resultData[o].accepted=true;this._updateAllyCountUI();delete this.acceptStack[o];console.log("RequestFriendsViewController > inviteAccepted > resultData length="+this.resultData.length);var p=true;for(var n in this.resultData){if(!this.resultData[n].accepted){console.log("RequestFriendsViewController > inviteAccepted > found unaccepted invite: "+JSON.stringify(this.resultData[n]));p=false;break}}if(p){console.log("RequestFriendsViewController > inviteAccepted > disabling accept all button");this.topCell.actionButton.setEnabled(false)}},acceptInvite:function(m){console.log("RequestFriendsViewController > inviteAccepted > fellowsCount="+TFUserData.fellowsCount);console.log("RequestFriendsViewController > inviteAccepted > pendingFellowsCount="+TFUserData.pendingFellowsCount);console.log("RequestFriendsViewController > inviteAccepted > maxFellows="+TFUserData.maxFellows);if(!this.acceptStack[m]){this.acceptStack[m]="true";if((TFUserData.fellowsCount+TFUserData.pendingFellowsCount)<TFUserData.maxFellows){TFUserData.pendingFellowsCount++;console.log("RequestFriendsViewController > inviteAccepted > pendingFellowsCount="+TFUserData.pendingFellowsCount);Server.acceptInvite([this.resultData[m].userId],this.inviteAccepted.bind(this,m))}else{var k=__ngs.r_(__ngs._3y).PopUpController;var l=new Object();l.title="You can't accept more friends";l.fusionCost="";l.buttons="one";l.cb=null;TFSceneDirector._showDialog(new k(l))}}},onAcceptAll:function(){var l=0;for(var m in this.resultData){if(!this.resultData[m].accepted){l++}}console.log("RequestFriendsViewController > onAcceptAll > resultData length="+this.resultData.length);console.log("RequestFriendsViewController > onAcceptAll > acceptsStillPending="+l);if(TFUserData.fellowsCount+l>TFUserData.maxFellows){var k=__ngs.r_(__ngs._3y).PopUpController;var o=new Object();o.title="You can't accept more friends";o.fusionCost="";o.buttons="one";o.cb=null;TFSceneDirector._showDialog(new k(o))}else{var n=new Array();for(var m=0;m<this.resultData.length;m++){n.push(this.resultData[m].userId)}Server.acceptInvite(n,this.allInviteAccepted.bind(this))}},allInviteAccepted:function(m,l){if(m){TFUtils.showErrorMessages(l);return}this.acceptedAll=true;for(var n=0;n<this.friendsCells.length;n++){var k=this.friendsCells[n];k.friendCellButton.setEnabled(false);k.friendCellButton.setText(Localization.getString("ui_accepted"))}this.topCell.actionButton.setEnabled(false);this._updateAllyCountUI()}})}};__ngs._5j={_c:null,_d:function(){var e={exports:{}};var c=e.exports;this._c=e;var b=__ngs.r_(__ngs._n).ViewController;var h=__ngs.r_(__ngs._a9).GreetsView;var g=__ngs.r_(__ngs._9s).FriendsCellView;var d=__ngs.r_(__ngs._9t).PaginationCellView;var a=__ngs.r_(__ngs._3y).PopUpController;c.GreetsViewController=b.subclass({classname:"GreetsViewController",initialize:function($super){$super();this.createView(h);this.resultData=[];this.friendsCells=[];this.page=0;Server.getAllUserFellows(this.fetchDataFromServer.bind(this));var l={displayed:true,animated:true,timeout:1000};var k={displayed:false,animated:true,timeout:1000};this.setHudDisplayData(l,k);this.getView()._totalHeight=this.getView()._definitions.greetList.pos_y},fetchDataFromServer:function(k,n){console.log("FRIENDS DATA FROM SERVER > error : "+JSON.stringify(k)+" response : "+JSON.stringify(n));this.resultData=n.pendingGreetsList;var m=[];for(var l=0;l<this.resultData.length;++l){m.push(this.resultData[l].name)}Server.acceptCheers(m,function(p,o){console.log("GreetsViewController > fetchDataFromServer > Greets accepted, server_error : "+JSON.stringify(p)+" server_response : "+JSON.stringify(o))});this.addGreetsToList()},destroy:function($super){this.destroyed=true;$super()},setBottomHudView:function(k){k.updateHudWithView(null)},checkIsCheered:function(o){var l=TFUserData.sentNotifications["greets"];var n=false;for(var m=0;m<l.length;m++){var k=l[m];if(o==k.userId){n=true;break}}return n},onGreetAllAction:function(q){var o=TFUserData.sentNotifications["greets"];this.names=new Array();for(var p=0;p<this.resultData.length;p++){var n=this.resultData[p].name;var s=false;for(var m in o){var l=o[m];if(n==l.userId){s=true}}if(!s){this.names.push(n)}}if(this.names.length>0){Server.cheerPlayer(this.names,this.greetAllDone.bind(this))}else{var r={};r.title="";r.fusionCost=Localization.getString("ui_alreadycheeredalliestoday");r.buttons="one";r.cb=null;TFSceneDirector._showDialog(new a(r))}},fetchListItems:function(){return[]},addGreetsToList:function(){for(var l=0;l<this.resultData.length;++l){if(this.destroyed===true){break}var k=this.resultData[l];this.addGreetToList(k)}},addGreetToList:function(m){var k=new g();k.playerName.setText(m.gamerTag.toUpperCase());k.playerLevel.setText(Localization.getString("ui_level_uc")+" : "+Localization.getString(m.level));k.friendCellButton.setText(Localization.getString("ui_cheerback_uc"));k.friendCellButton.setFontSize(28);var l=this.friendsCells.length;k.friendCellButton.setOnPressCallback(this.greetBack.bind(this,l));if(m.greetSent){k.friendCellButton.setEnabled(false);k.friendCellButton.setText(Localization.getString("ui_cheered_uc"))}k.friendCellCancelButton.setEnabled(false);k.friendCellCancelButton.setVisible(false);this.friendsCells.push(k);if(this.getView()&&this.getView().greetList&&this.destroyed!==true){this.getView().greetList.addItem(k);this.getView()._totalHeight+=this.getView()._definitions.greetList.itemHeight}},greetAccepted:function(p,n,l){if(n){TFUtils.showErrorMessages(l);return}var k=this.friendsCells[p];k.friendCellButton.setText(Localization.getString("ui_cheered_uc"));k.friendCellCancelButton.setText("");var m=TFUserData.sentNotifications["greets"];var o={};o.userId=k.playerName.getText();o.dateSent=new Date().getTime();m.push(o);var q={};if(l.gashaPointIncrease===0){q.title="";q.fusionCost="ui_alreadycheeredpersontoday"}else{q.title=Localization.getString("ui_congratsexcl");q.fusionCost=Localization.getString("ui_youearned")+" "+l.gashaPointIncrease+" "+Localization.getString("ui_allypointsexcl")}q.buttons="one";q.cb=null;TFSceneDirector._showDialog(new a(q))},greetBack:function(m){var k=this.friendsCells[m];var o=[this.resultData[m].name];var l=this.checkIsCheered(o);if(!l){Server.cheerPlayer([this.resultData[m].name],this.greetAccepted.bind(this,m));k.friendCellButton.setEnabled(false);k.friendCellCancelButton.setEnabled(false)}else{var n={};n.title="";n.fusionCost="ui_alreadycheeredpersontoday";n.buttons="one";n.cb=null;TFSceneDirector._showDialog(new a(n))}},greetAllDone:function(o,l){if(o){console.log("[ERROR] GreetsViewController > greetAllDone > Server error, returned "+JSON.stringify(o));TFUtils.showErrorMessages(l);return}console.log("GreetsViewController > greetAllDone > success, returned "+JSON.stringify(l));TFUserData.gashaPoints=l.gashaPoints;TFSceneDirector.getTopHudViewController().updateFriendsPoints();var n=TFUserData.sentNotifications["greets"];for(nameKey in this.names){name=this.names[nameKey];var q={};q.userId=name;q.dateSent=new Date().getTime();n.push(q);for(var p=0;p<this.resultData.length;p++){var m=this.resultData[p].name;if(m===name){var k=this.friendsCells[p];k.friendCellButton.setEnabled(false);k.friendCellCancelButton.setEnabled(false);k.friendCellButton.setText(Localization.getString("ui_cheered_uc"));k.friendCellCancelButton.setText("")}}}var r={};if(l.gashaPointIncrease===0){r.title="";r.fusionCost=Localization.getString("ui_alreadycheeredalliestoday")}else{r.title=Localization.getString("ui_congratsexcl");r.fusionCost=Localization.getString("ui_youearned")+" "+l.gashaPointIncrease+" "+Localization.getString("ui_allypointsexcl")}r.buttons="one";r.cb=null;TFSceneDirector._showDialog(new a(r))}})}};__ngs._5k={_c:null,_d:function(){var c={exports:{}};var h=c.exports;this._c=c;var g=__ngs.r_(__ngs._45).AnimationQueue;var p=__ngs.r_(__ngs._aa).FusionSelectionView;var d=__ngs.r_(__ngs._ab).FusionSelectCellViewDefinition;var e=__ngs.r_(__ngs._ac).FusionSelectOverlayViewDefinition;var n=__ngs.r_(__ngs._s).TFUtils;var q=__ngs.r_(__ngs._7t).GLList;var b=__ngs.r_(__ngs._63).TFFormulas;var m=__ngs.r_(__ngs._48).TFSoundManager;var a=__ngs.r_(__ngs._89).CardThumbnailView;var l=__ngs.r_(__ngs._49).TFDeckManager;var k=__ngs.r_(__ngs._3y).PopUpController;var o=__ngs.r_(__ngs._ad).FullScreenCardView;h.CardSelectionViewController=ViewController.subclass({classname:"CardSelectionViewController",initialize:function($super,t,w,x,y,r,u,v){$super();console.log("CardSelectionViewController > initialize > TFSceneDirector._mainSelectedCard : "+JSON.stringify(TFSceneDirector._mainSelectedCard));console.log("CardSelectionViewController > initialize > className="+w);TFUserData._fusionSelectViewShowing=true;this._mainCardSelectionView=t;this._className=w;this._cardsToShow=r;this._itemsPerPage=10;this._prevIndex=0;this._isTutorial=x;this._hideCost=y;this._isTempDeck=u;if(u){this._tempDeckString="tempDeck"}this._enableSort={ui_overall_true:true,ui_rarity_true:true,ui_xp_uc_true:true,ui_hp_true:true,ui_attack_true:true,ui_defense_true:true,ui_name_true:true,ui_overall_false:true,ui_rarity_false:true,ui_xp_uc_false:true,ui_hp_false:true,ui_attack_false:true,ui_defense_false:true,ui_name_false:true};if(this._className=="sellCards"||this._className=="gachaRewards"){TFSceneDirector._transformCard1Selected=false;TFSceneDirector._transformCard2Selected=false;TFSceneDirector._mainSelectedCard=null;TFSceneDirector._selectedFusionCards=null}if(TFSceneDirector._mainSelectedCardAux2){console.log("CardSelectionViewController initialize setting _mainSelectedCard from Aux2",JSON.stringify(TFSceneDirector._mainSelectedCardAux2));TFSceneDirector._mainSelectedCard=TFSceneDirector._mainSelectedCardAux2;TFSceneDirector._mainSelectedCardAux2=null}this.sortCards();if(!this.getView()){this.createView(p);TFSceneDirector.shiftUIElementUp(this.getView().nextButton);TFSceneDirector.shiftUIElementUp(this.getView().prevButton);TFSceneDirector.shiftUIElementUp(this.getView().cardList);TFSceneDirector.stretchUIElementVertically(this.getView(false).backgroundImage)}var s=__ngs.r_(__ngs._7p).View;this._overlayView=new s(this,e);TFSceneDirector.shiftUIElementUp(this._overlayView);this.getView(false).addChild(this._overlayView);TFSceneDirector.shiftUIElementDown(this._overlayView.costPanel);this._costBox=new GL2.Node();this.getView(false).addChild(this._costBox);this._costPanel=this._overlayView.costPanel;this._overlayView.removeChild(this._costPanel);this._costBox.addChild(this._costPanel);this._costPanel.costLabel.setText("0");if(this._view._viewData.lists[0]){this._listWidth=this._view._viewData.lists[0].width;this._listHeight=this._view._viewData.lists[0].height;this._listItemHeight=this._view._viewData.lists[0].itemHeight;this._listItemWidth=this._view._viewData.lists[0].itemWidth;this._listPos_x=this.getView().cardList.getPosition().getX();this._listPos_y=this.getView().cardList.getPosition().getY()}console.log("array length="+this._returnArray.length);this.getView().cardList.setScrollable(false);this.getView().nextButton.setPosition(this.getView()._definitions.nextButton.pos_x,this._listPos_y+this._listItemHeight*this._returnArray.length+30);this.getView().prevButton.setPosition(this.getView()._definitions.prevButton.pos_x,this._listPos_y+this._listItemHeight*this._returnArray.length+30);this._overlayView.doneButton.setVisible(false);if(this._className=="sellCards"||this._className=="gachaRewards"){this._overlayView.sellButton.setVisible(true);this._overlayView.sellButton.setEnabled(true);this._overlayView.cancelButton.setVisible(false);if(this._className=="gachaRewards"){this._overlayView.fusetype1.setVisible(false);this._overlayView.fusetype2.setVisible(false);this._overlayView.sortSelection.setVisible(false)}else{this._overlayView.fusetype1.setVisible(true);this._overlayView.fusetype2.setVisible(true)}this._costPanel.tstatus1Label.setText(Localization.getString("ui_sellprice_uc"));this._costBox.setVisible(false);TFUserData._fuseType=TFUserData._fuseType||TFGameData.CARD_TYPE.TRANSFORMER;if(TFUserData._fuseType==TFGameData.CARD_TYPE.WEAPON){this._overlayView.fusetype2.setVisible(false)}else{this._overlayView.fusetype1.setVisible(false)}if(v){this._overlayView.sellButton.setVisible(false);this._overlayView.sellButton.setEnabled(false)}}if(!this._hideCost){}this.getView().prevButton.setVisible(this._showPrevButton);this.getView().nextButton.setVisible(this._showNextButton);if(this._showPrevButton||this._showNextButton){this.getView()._totalHeight+=this.getView()._definitions.nextButton.size_y+40+100}if(this._isTutorial){this.getView().title.setVisible(true)}this.setHudDisplay()},destroy:function($super){console.log("CardSelectionViewController destroy");TFSceneDirector._sellCardsSelected=false;if(this._className=="sellCards"||this._className=="gachaRewards"){TFSceneDirector._selectedFusionCards=null}TFUserData._fusionSelectViewShowing=undefined;this._selectionCards=null;$super()},destroyCardView:function(){console.log("CardSelectionViewController destroyCardView");this.cardView.destroy()},setHudDisplay:function(){var s={displayed:true,animated:true,timeout:0};if(this._className=="sellCards"){var r={displayed:true,animated:true,timeout:0}}else{var r={displayed:false,animated:true,timeout:500}}this.setHudDisplayData(s,r)},sortCards:function(){if(this._className=="sellCards"){this._cardsToShow=TFUserData.sortCardsOverAll(false,this._cardsToShow)}},onDone:function(){console.log("CardSelectionViewController onDone");if(this._className=="sellCards"||this._className=="gachaRewards"){this.sellCards()}},onSell:function(){console.log("CardSelectionViewController onSell");var r,s;TFSceneDirector.hideBottomHud(true);if(this._sellEnabled){this._sellEnabled=false;this.sellCards()}else{if(this._className=="gachaRewards"){this._overlayView.continueButton.setVisible(false)}this._sellEnabled=true;this._overlayView.sellButton.setText(Localization.getString("ui_confirm"));this._overlayView.sellButton.setEnabled(false);this._overlayView.cancelButton.setVisible(true);this._overlayView.cancelButton.setEnabled(true);this._overlayView.fusetype1.setVisible(false);this._overlayView.fusetype2.setVisible(false);this._overlayView.fusetype1.setAlpha(0);this._overlayView.fusetype2.setAlpha(0);this._costBox.setVisible(true);s=0;do{r=this.getView().cardList.itemAtIndex(s);if(!r){break}var t=TFUserData.getCard(r.card.info.id);if(!t){r.checkBox.setVisible(false);s++;continue}r.checkBox.setVisible(r.card.info.card.decks&&r.card.info.card.decks.length==0);r.checkBox.setDebounce(0);r.checkBox.setSelected(false);s++}while(true)}},onSellCancel:function(){console.log("CardSelectionViewController onSellCancel");var r,s;if(this._className!="gachaRewards"){TFSceneDirector.showBottomHud(true)}else{this._overlayView.continueButton.setVisible(true)}if(this._sellEnabled){this._sellEnabled=false;this._overlayView.sellButton.setText(Localization.getString("ui_sell_uc"));this._overlayView.sellButton.setEnabled(true);this._overlayView.cancelButton.setVisible(false);this._overlayView.cancelButton.setEnabled(false);if(this._className!="gachaRewards"){if(TFUserData._fuseType==TFGameData.CARD_TYPE.TRANSFORMER){this._overlayView.fusetype2.setVisible(true)}else{this._overlayView.fusetype1.setVisible(true)}this._overlayView.fusetype1.setAlpha(1);this._overlayView.fusetype2.setAlpha(1)}this._costBox.setVisible(false);s=0;do{r=this.getView().cardList.itemAtIndex(s);if(!r){break}if(r.checkBox.info.toggleState==1){this.onCheck(r.checkBox)}r.checkBox.setVisible(false);s++}while(true);this._costPanel.costLabel.setText("0");this._costPanel.costLabel.setColor(255,255,255)}TFSceneDirector._selectedFusionCards=null},sellCompletedCallback:function(){if(this._isTempDeck){TFSceneDirector.showVaultCards()}else{TFSceneDirector.showSellCards()}},sellCards:function(){console.log("CardSelectionViewController sellCards");if(!TFSceneDirector._selectedFusionCards||TFSceneDirector._selectedFusionCards.length<1){console.log("No cards selected to sell");return}var x=0;var u=new Object();var w=TFSceneDirector._selectedFusionCards;for(var s in w){if(w[s].type==2){var r=[480,720,960,1440,1920];var v=w[s].level*r[w[s].rarity-1];x+=v}else{if(w[s].type==1){var t=w[s].stats;var v=Math.floor((t.status1+t.status2+t.status3)*0.25);x+=v}}}u.title=Localization.getString("ui_sellcards")+"!";u.fusionCost=Localization.getString("ui_confirmwanttosellcardsfor")+"\n";u.sellCost=x;u.cb=function(){TFUserData.setNewTutorialState("sellcards","end");var z=new Array();for(var y in w){z.push(w[y].id)}Server.sellMultiple(z,this._tempDeckString,function(C,B){if(C){console.log("sellMultiple error: "+C);n.showErrorMessages(B);this._sellEnabled=true}else{if(B){this.SOUND_KEY="SELL_01";m.playSound(this.SOUND_KEY);var E=new Object();E.title=Localization.getString("ui_congratsexcl");E.fusionCost=Localization.getString("ui_youearned")+" ";E.sellCost=B.earnings;E.buttons="one";E.cb=this.sellCompletedCallback.bind(this);TFSceneDirector._showDialog(new k(E));if(B.earnings){var A=TFUserData.getCurrency();TFUserData.setTotalCurrency(B.earnings+A)}if(B.cards&&B.cards.length>0){TFUserData.cards=B.cards;TFUserData.cardsLimbo=B.cardsLimbo}else{for(var D in w){TFUserData.removeCard(w[D].id)}}TFSceneDirector._selectedFusionCards=null;TFSceneDirector.getTopHudViewController().update();TFSceneDirector.showBottomHud(true)}}}.bind(this))}.bind(this);u.cbDismiss=function(){this._sellEnabled=true}.bind(this);TFSceneDirector._showDialog(new k(u))},onNext:function(){console.log("CardSelectionViewController onNext");this.refreshList(this._rangeMax+1,1);this.getView().prevButton.setVisible(this._showPrevButton);this.getView().nextButton.setVisible(this._showNextButton);var r=this.createAnimationQueue();r.pushAnimation(250,g.Curve.EaseOut);r.tween(g.Interpolate.scalar(this.getView().getPosition().getY(),0),function(s){this.getView().setPosition(this.getView().getPosition().getX(),s)}.bind(this));r.start()},onPrev:function(){console.log("CardSelectionViewController onPrev");this.refreshList(this._rangeMin-1,-1);this.getView().prevButton.setVisible(this._showPrevButton);this.getView().nextButton.setVisible(this._showNextButton);var r=this.createAnimationQueue();r.pushAnimation(250,g.Curve.EaseOut);r.tween(g.Interpolate.scalar(this.getView().getPosition().getY(),0),function(s){this.getView().setPosition(this.getView().getPosition().getX(),s)}.bind(this));r.start()},refreshList:function(u,t){console.log("CardSelectionViewController refreshList");cells=this.fetchListItems(undefined,u,t);this.getView()["cardList"].destroy();this.getView()["cardList"]=new q(this._listWidth,this._listHeight,undefined,undefined,undefined,undefined,this.getView());this.getView()["cardList"].setScrollable(false);this.getView()["cardList"].setItemSize(new Core.Size(this._listItemWidth,this._listItemHeight));this.getView()["cardList"].setPosition(this._listPos_x,this._listPos_y);this.getView().addChild(this.getView()["cardList"]);this.getView()._totalHeight=0;var r=this._listPos_y?this._listPos_y:0;for(var s in cells){this.getView()["cardList"].addItem(cells[s]);r+=this._listItemHeight}if(this.getView()._totalHeight<r){this.getView()._totalHeight=r}this.getView().nextButton.setPosition(this.getView()._definitions.nextButton.pos_x,this.getView()._totalHeight+30);this.getView().prevButton.setPosition(this.getView()._definitions.prevButton.pos_x,this.getView()._totalHeight+30);if(this._showPrevButton||this._showNextButton){this.getView()._totalHeight+=this.getView()._definitions.nextButton.size_y+40+100}},fuseType:function(s){console.log("CardSelectionViewController fuseType");TFUserData._fuseType=s.info.type;var t=(s.info.type==TFGameData.CARD_TYPE.TRANSFORMER)?TFGameData.CARD_TYPE.WEAPON:TFGameData.CARD_TYPE.TRANSFORMER;s.setVisible(false);this._overlayView["fusetype"+t].setVisible(true);this.refreshList();this.getView().prevButton.setVisible(this._showPrevButton);this.getView().nextButton.setVisible(this._showNextButton);var r=this.createAnimationQueue();r.pushAnimation(250,g.Curve.EaseOut);r.tween(g.Interpolate.scalar(this.getView().getPosition().getY(),0),function(u){this.getView().setPosition(this.getView().getPosition().getX(),u)}.bind(this));r.start()},onCardSelected:function(s){console.log("FusionSelectionViewController > onCardSelected");if(TFSceneDirector._dialogViewController&&TFSceneDirector._dialogViewController._view){return}var t=s.info;t.cbDismiss=function(){console.log("FUSION DISMISSED")}.bind(this);t.forceParallax=o.FORCE_PARALLAX_ON;var r;if(t.type==TFGameData.CARD_TYPE.TRANSFORMER){r=__ngs.r_(__ngs._80).FullScreenCardController}else{r=__ngs.r_(__ngs._8a).FullScreenWeaponCardController}TFSceneDirector._showDialog(new r(t,true))},onCheck:function(w){console.log("CardSelectionViewController onCheck");var y=0;if(w.info.toggleState==0){if(!TFSceneDirector._selectedFusionCards){TFSceneDirector._selectedFusionCards=new Array()}TFSceneDirector._selectedFusionCards.push(w.info);if(this._className=="sellCards"||this._className=="gachaRewards"){this._overlayView.sellButton.setEnabled(true);TFSceneDirector._sellCardsSelected=true}w.info.toggleState=1}else{if(w.info.toggleState==1){if(TFSceneDirector._selectedFusionCards){for(var t in TFSceneDirector._selectedFusionCards){if(w.info.id==TFSceneDirector._selectedFusionCards[t].id){TFSceneDirector._selectedFusionCards.splice(t,1);w.info.toggleState=0;if((this._className==="sellCards"||this._className==="gachaRewards")&&this._sellEnabled&&(TFSceneDirector._selectedFusionCards.length<1)){this._overlayView.sellButton.setEnabled(false);TFSceneDirector._sellCardsSelected=false}}}}}}w.setSelected(w.info.toggleState);w.setEnabled(true);if(this._className=="sellCards"||this._className=="gachaRewards"){var r=TFSceneDirector._selectedFusionCards;console.log("CardSelectionViewController > onCheck > Selected cards : "+JSON.stringify(r));var v=0;for(var s in r){if(r[s].type==2){var x=[480,720,960,1440,1920];var z=r[s].level*x[r[s].rarity-1];v+=z}else{if(r[s].type==1){var u=r[s].stats;var z=Math.floor((u.status1+u.status2+u.status3)*0.25);v+=z}}}this._costPanel.costLabel.setText(v||"0");this._costPanel.costLabel.setColor(255,255,255)}},selectButton:function(r){console.log("CardSelectionViewController selectButton")},onVaultButton:function(t){var s=t.info.index;var v=sprintf(Localization.getString("ui_cardinoverflowqueuelong"),s);var u={buttons:"one",text:v,title:" ",timeText2:true};var r=__ngs.r_(__ngs._87).OverLimitCardsController;TFSceneDirector._showDialog(new r(u))},_isValidCard:function(s){var r=this._selectionCards[s];var t=TFCardsManager.getCardDefinition(r.definitionId);if(TFUserData._fuseType!=t.type){console.log("*********************************** Card "+s+" ("+r.definitionId+") is "+((t.type==TFGameData.CARD_TYPE.WEAPON)?"WEAPON":"TRANSOFMER")+" type");return false}return true},_showCheckboxes:function(r,s){if(r||s){return false}return this._sellEnabled},_showSelectButtons:function(r){return false},fetchListItems:function(L,t,E){console.log("CardSelectionViewController fetchListItems");this._returnArray=new Array();console.log("***********************************firstIndex="+t+", inc="+E);t=t||0;E=E||1;if(!this._selectionCards){this._selectionCards=TFUserData.getCards()}if(this._cardsToShow){this._selectionCards=this._cardsToShow}console.log("***********************************NumberOfcards===="+this._selectionCards.length);console.log("***********************************cards===="+JSON.stringify(this._selectionCards));this._rangeMin=(E<0)?0:t;this._rangeMax=(E<0)?t:(this._selectionCards.length-1);for(var N=t;(N>=0)&&(N<this._selectionCards.length);N+=E){if(this._isValidCard(N)){var s=TFCardsManager.getCardDefinition(this._selectionCards[N].definitionId);var M=__ngs.r_(__ngs._7p).View;var I=new M(this,d);TFSceneDirector.shiftUIElementRight(I.background2);TFSceneDirector.stretchUIElementHorizontally(I.background2);TFSceneDirector.shiftUIElementRight(I.background3);var w={anchor:[0.5,0.5],showSpinner:true};w.id=this._selectionCards[N].id;if(s.type==TFGameData.CARD_TYPE.WEAPON){w.weapon=true}if(TFCardsManager.isInBase(this._selectionCards[N])){if(l.isInMainDeck(this._selectionCards[N].id)==true){w.mainDecal=true}for(var R in this._selectionCards[N].decks){if(this._selectionCards[N].decks[R]==TFGameData.DECK_INDEX.AUTOBOTS){w.autobotDecal=true}else{if(this._selectionCards[N].decks[R]==TFGameData.DECK_INDEX.DECEPTICONS){w.decepticonDecal=true}}}}var P=I._definitions.card.size_x;var u=I._definitions.card.size_y;var H=new a(this,this._selectionCards[N].definitionId,P,u,w);H.setPosition(I._definitions.card.pos_x,I._definitions.card.pos_y);I.addChild(H);I.name.setText(Localization.getString(s.name).toUpperCase());I.maxLevel.setText(Localization.getString("ui_maxlevel_uc")+": "+s.maxLevel);if(s.factionId==TFGameData.FACTION.DECEPTICONS){n.changeImageOnSprite(I.background2,"Content/Images8x/UI/Cell/card_cell_decepticon_mid.png");n.changeImageOnSprite(I.background3,"Content/Images8x/UI/Cell/card_cell_decepticon_right.png")}else{n.changeImageOnSprite(I.background2,"Content/Images8x/UI/Cell/card_cell_autobot_mid.png");n.changeImageOnSprite(I.background3,"Content/Images8x/UI/Cell/card_cell_autobot_right.png")}var A=n.GetCloneOfObject(I.selectButton.info);A.definitionId=this._selectionCards[N].definitionId;A.id=this._selectionCards[N].id;A.xp=this._selectionCards[N].xp;A.type=s.type;A.cardFormId=s.cardFormId;A.toggleState=0;A.rarity=s.rarity;A.factionId=s.factionId;A.name=s.name;A.decks=this._selectionCards[N].decks;TFCardsManager.loadCardListDetails();var r=TFCardsManager.getCardLevel(A);var S=TFCardsManager.getCardStatus(A);var Q=(A.xp-TFCardsManager._getXPForLevel(r,s.type))/(TFCardsManager._getXPForLevel(r+1,s.type)-TFCardsManager._getXPForLevel(r,s.type));I.level.setText(Localization.getString("ui_level_uc")+": "+r);var K=(A.decks&&A.decks.length>0);var J=(A.xp===undefined);I.checkBox.setVisible(this._showCheckboxes(K,J));var C=(r>=s.maxLevel);I.selectButton.setVisible(this._showSelectButtons(C));if(C){I.maxLevel.setVisible(false);I.levelBar.setVisible(false);I.level.setVisible(false);I.maxLevelReached.setText(Localization.getString("ui_maxlvleached_uc")+" : "+r)}if(S){var v=0;var z=0;var D=0;if(this._selectionCards[N].bonus){v=this._selectionCards[N].bonus.status1;z=this._selectionCards[N].bonus.status2;D=this._selectionCards[N].bonus.status3}if(s.type==TFGameData.CARD_TYPE.TRANSFORMER){I.status1.setText(""+(S.status1+v));I.status2.setText(""+(S.status2+z));I.status3.setText(""+(S.status3+D))}else{I.status1.setText(""+Math.floor(S.status1*100)+" %");I.status2.setText(""+Math.floor(S.status2*100)+" %");I.status3.setText(""+Math.floor(S.status3*100)+" %")}}if(I.levelBar){I.levelBar.setProgress((Q*100).toFixed(0))}if(TFSceneDirector._selectedFusionCards&&(!this._mainCardSelectionView||this._className=="sellCards"||this._className=="gachaRewards")){for(var G in TFSceneDirector._selectedFusionCards){if(this._selectionCards[N].id==TFSceneDirector._selectedFusionCards[G].id){A.toggleState=1;I.checkBox.setSelected(true);I.checkBox.setEnabled(true)}}}if(this._mainCardSelectionView){A.card=this._selectionCards[N]}A.level=r;A.stats=S;I.selectButton.info=A;I.checkBox.info=A;I.card.info=A;I.card.info.asset=n.getCardImagePath(this._selectionCards[N].definitionId);I.card.info.usercard=this._selectionCards[N];var B=TFCardsManager.getOverflowIndex(this._selectionCards[N]);if(B!==null&&!this._isTempDeck&&!TFCardsManager.isInBase(this._selectionCards[N])){I.vaultButton.setVisible(true);I.vaultCardAlert.setVisible(true);I.maxLevel.setVisible(false);I.maxLevelReached.setVisible(false);I.levelBar.setVisible(false);I.level.setPosition(I._definitions.level.pos_x+90,I._definitions.level.pos_y);I.level.setSize(I._definitions.level.size_x+150,I._definitions.level.size_y);I.level.setFontSize(26);I.level.setColor(1,1,1);var F=sprintf(Localization.getString("ui_cardinoverflowqueueshort"),B);I.level.setText(F);I.vaultButton.info.index=B}H.cardImage.info=A;this._returnArray.push(I);console.log("*********************************** Card "+N+" is ACCEPTED (card #"+this._returnArray.length+")");console.log("***** %s %s",JSON.stringify(s),this._selectionCards[N].definitionId);if(this._returnArray.length>=this._itemsPerPage){console.log("*********************************** FOUND MAX("+this._itemsPerPage+") CARDS");if(E<0){this._rangeMin=N}else{this._rangeMax=N}console.log("*********************************** range min,max="+this._rangeMin+","+this._rangeMax);break}}}this._showPrevButton=false;console.log("*********************************** Checking for PREV button");for(var O=this._rangeMin-1;O>=0;O--){if(this._isValidCard(O)){console.log("*********************************** Enabling PREV button");this._showPrevButton=true;break}}this._showNextButton=false;console.log("*********************************** Checking for NEXT button");for(var y=this._rangeMax+1;y<this._selectionCards.length;y++){if(this._isValidCard(y)){console.log("*********************************** Enabling NEXT button");this._showNextButton=true;break}}if(E<0){this._returnArray.reverse()}return this._returnArray},afterViewDisplayed:function(){console.log("CardSelectionViewController afterViewDisplayed");if(this._hideCost){this._costBox.setVisible(false)}if(TFUserData.getTutorialState("sellcards")=="start"&&this._className=="sellCards"){var s=new Object();s.title=Localization.getString("tutorial_sell_title_01");s.text=Localization.getString("tutorial_sell_text_01");s.tutorialId="tutorial_sell_title_01";var t=__ngs.r_(__ngs._81).TutorialBubbleView;var r=TFSceneDirector.showTutorialDialog(t,s);r.getView().bubble1.setPosition(-320,-100)}},onRaritySelectionComboBox:function(s){console.log("CardSelectionViewController > onRaritySelectionComboBox > ",s);var v=0;var u=0;do{var r=this.getView().cardList.itemAtIndex(v);if(!r){break}var t=r.checkBox.info;if((t.decks&&t.decks.length>0)||t.xp===undefined){console.log("CardSelectionViewController > onSelectRarity > skipping cardToShow:",v,t.definitionId,JSON.stringify(t.decks),t.xp);v++;continue}var w=TFUserData.getCard(t.id);if(!w){v++;continue}var x=TFCardsManager.getCardDefinition(t.definitionId);if(x.rarity<=s){if(r.checkBox.info.toggleState==0){this.onCheck(r.checkBox);u++}}else{if(r.checkBox.info.toggleState==1){this.onCheck(r.checkBox)}}v++}while(true);console.log("CardSelectionViewController > onSelectRarity > numAdded:",u)},onComboBoxSelection:function(r){console.log("CardSelectionViewController > onComboBoxSelection > ID : "+r);switch(r){case"overall_down":this._cardsToShow=TFUserData.sortCardsOverAll(true,this._cardsToShow);break;case"overall_up":this._cardsToShow=TFUserData.sortCardsOverAll(false,this._cardsToShow);break;case"rarity_down":this._cardsToShow=TFUserData.sortCardsRarity(true,this._cardsToShow);break;case"rarity_up":this._cardsToShow=TFUserData.sortCardsRarity(false,this._cardsToShow);break;case"xp_down":this._cardsToShow=TFUserData.sortCardsXP(true,this._cardsToShow);break;case"xp_up":this._cardsToShow=TFUserData.sortCardsXP(false,this._cardsToShow);break;case"hp_down":this._cardsToShow=TFUserData.sortCardsMelee(true,this._cardsToShow);break;case"hp_up":this._cardsToShow=TFUserData.sortCardsMelee(false,this._cardsToShow);break;case"attack_down":this._cardsToShow=TFUserData.sortCardsRanged(true,this._cardsToShow);break;case"attack_up":this._cardsToShow=TFUserData.sortCardsRanged(false,this._cardsToShow);break;case"defense_down":this._cardsToShow=TFUserData.sortCardsSpecial(true,this._cardsToShow);break;case"defense_up":this._cardsToShow=TFUserData.sortCardsSpecial(false,this._cardsToShow);break;case"name_down":this._cardsToShow=TFUserData.sortCardsName(true,this._cardsToShow);break;case"name_up":this._cardsToShow=TFUserData.sortCardsName(false,this._cardsToShow);break}this.refreshListOnSort()},refreshListOnSort:function(){console.log("CardSelectionViewController refreshListOnSort");var s=this;var t=null;t=s.fetchListItems();s.getView()["cardList"].destroy();s.getView()["cardList"]=new q(s._listWidth,s._listHeight,undefined,undefined,undefined,undefined,s.getView());s.getView()["cardList"].setItemSize(new Core.Size(s._listItemWidth,s._listItemHeight));s.getView()["cardList"].setPosition(s._listPos_x,s._listPos_y);s.getView()["cardList"].setScrollable(false);s.getView().addChild(s.getView()["cardList"]);this.getView()._totalHeight=0;var r=this._listPos_y?this._listPos_y:0;for(var u in t){s.getView()["cardList"].addItem(t[u]);r+=this._listItemHeight}if(this.getView()._totalHeight<r){this.getView()._totalHeight=r}this.getView().nextButton.setPosition(this.getView()._definitions.nextButton.pos_x,this.getView()._totalHeight+30);this.getView().prevButton.setPosition(this.getView()._definitions.prevButton.pos_x,this.getView()._totalHeight+30);this.getView().prevButton.setVisible(this._showPrevButton);this.getView().nextButton.setVisible(this._showNextButton);if(this._showPrevButton||this._showNextButton){this.getView()._totalHeight+=this.getView()._definitions.nextButton.size_y+40+100}}})}};__ngs._5l={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var a=__ngs.r_(__ngs._3y).PopUpController;var c=__ngs.r_(__ngs._5k).CardSelectionViewController;b.FusionSelectionViewController=c.subclass({classname:"FusionSelectionViewController",initialize:function($super,n,m,l,h,g,e,k){$super(n,m,l,h,g,e,k);console.log("FusionSelectionViewController > initialize > className="+m);if(TFSceneDirector.preservingCost){this._costPanel.costLabel.setText(TFSceneDirector.preservingCost)}if(!this._mainCardSelectionView){this._overlayView.doneButton.setVisible(true)}if(TFUserData.getTutorialState("fusion")=="start"){this._fusionTutorialFlag=true}},sortCards:function(){if(TFSceneDirector._materialSelectView){this._cardsToShow=TFUserData.sortCardsOverAll(false,this._cardsToShow);TFSceneDirector._materialSelectView=null}else{if(TFSceneDirector._mainSelectView){this._cardsToShow=TFUserData.sortCardsOverAll(true,this._cardsToShow);TFSceneDirector._mainSelectView=null}}},onDone:function(){console.log("FusionSelectionViewController > onDone");if(this._fusionTutorialFlag){TFAnalytics.reportGameEvent("UPGRADETUTORIAL",{Step:"08_FusionMaterialCardsSelected"})}TFSceneDirector.showFusion("crossfade")},onCheck:function(h){console.log("FusionSelectionViewController > onCheck");var l=0;if(h.info.toggleState==0){if(!TFSceneDirector._selectedFusionCards){TFSceneDirector._selectedFusionCards=new Array()}if(TFSceneDirector._selectedFusionCards.length>=(TFGlobals.fusionCardsMaxCount.value-1)){var k=new Object();k.title=Localization.getString("ui_alert");k.fusionCost=sprintf(Localization.getString("ui_cannotselectmorethan"),TFGlobals.fusionCardsMaxCount.value);k.okButtonText=Localization.getString("ui_upgrade_uc");k.cb=this.onDone.bind(this);TFSceneDirector._showDialog(new a(k));if(TFSceneDirector._selectedFusionCards.length>=TFGlobals.fusionCardsMaxCount.value){h.setSelected(false);h.info.toggleState=0;return}}TFSceneDirector._selectedFusionCards.push(h.info);h.info.toggleState=1}else{if(h.info.toggleState==1){if(TFSceneDirector._selectedFusionCards){for(var g in TFSceneDirector._selectedFusionCards){if(h.info.id==TFSceneDirector._selectedFusionCards[g].id){TFSceneDirector._selectedFusionCards.splice(g,1);h.info.toggleState=0}}}}}h.setSelected(h.info.toggleState);h.setEnabled(true);TFCardsManager.setFusionBaseCard(TFSceneDirector._mainSelectedCard);TFCardsManager.setFusionMaterialCards(TFSceneDirector._selectedFusionCards);var e=TFCardsManager.getFusionCost();TFSceneDirector.preservingCost=e;this._costPanel.costLabel.setText(e||"0");if(e>TFUserData.getCurrency()){this._costPanel.costLabel.setColor(1,0,0)}else{this._costPanel.costLabel.setColor(255,255,255)}},selectButton:function(e){console.log("FusionSelectionViewController > selectButton");if(this._fusionTutorialFlag){TFAnalytics.reportGameEvent("UPGRADETUTORIAL",{Step:"04_SelectedMainCard"})}TFSceneDirector._mainSelectedCard=e.info;TFSceneDirector.showFusion("crossfade")},_isValidCard:function(h){console.log("FusionSelectionViewController > _isValidCard");var g=this._selectionCards[h];var k=TFCardsManager.getCardDefinition(g.definitionId);if(TFUserData._fuseType!=k.type){console.log("*********************************** Card "+h+" ("+g.definitionId+") is "+((k.type==TFGameData.CARD_TYPE.WEAPON)?"WEAPON":"TRANSOFMER")+" type");return false}else{if(!this._mainCardSelectionView&&TFSceneDirector._mainSelectedCard&&(g.id==TFSceneDirector._mainSelectedCard.id)){console.log("*********************************** Card "+h+" ("+g.definitionId+") is already selected as MAIN CARD");return false}else{if(!this._mainCardSelectionView&&(g.decks.length!=0)){console.log("*********************************** Card "+h+" ("+g.definitionId+") is in a PLAYER DECK");return false}else{if(this._mainCardSelectionView&&TFCardsManager.getCardLevel(g)>=k.maxLevel){console.log("*********************************** Card "+h+" ("+g.definitionId+") is already MAX LEVEL");return false}}}}if(this._mainCardSelectionView&&TFSceneDirector._selectedFusionCards){for(var e=0;e<TFSceneDirector._selectedFusionCards.length;++e){if(TFSceneDirector._selectedFusionCards[e].id==g.id){console.log("*********************************** Card "+h+" ("+g.definitionId+") is already selected as FUSION CARD");return false}}}return true},_showCheckboxes:function(e){return !this._mainCardSelectionView},_showSelectButtons:function(e){if(e){return false}return this._mainCardSelectionView},afterViewDisplayed:function(){console.log("FusionSelectionViewController > afterViewDisplayed");if(this._hideCost){this._costBox.setVisible(false)}if(TFUserData.getTutorialState("fusion")=="start"){var h=new Object();var e="";if(this._mainCardSelectionView){h.title=Localization.getString("tutorial_fusion_title_02");h.text=Localization.getString("tutorial_fusion_text_02");h.tutorialId="tutorial_fusion_title_02";e="03_tut2Close"}else{h.title=Localization.getString("tutorial_fusion_title_04");h.text=Localization.getString("tutorial_fusion_text_04");h.tutorialId="tutorial_fusion_title_04";e="07_tut4Close"}h.cb=function(){TFAnalytics.reportGameEvent("UPGRADETUTORIAL",{Step:e})};var k=__ngs.r_(__ngs._81).TutorialBubbleView;var g=TFSceneDirector.showTutorialDialog(k,h);g.getView().bubble1.setPosition(-320,-100)}}})}};__ngs._5m={_c:null,_d:function(){var g={exports:{}};var d=g.exports;this._c=g;var e=__ngs.r_(__ngs._5k).CardSelectionViewController;var h=__ngs.r_(__ngs._ab).FusionSelectCellViewDefinition;var b=__ngs.r_(__ngs._89).CardThumbnailView;var c=__ngs.r_(__ngs._63).TFFormulas;var a=__ngs.r_(__ngs._3y).PopUpController;d.TransformSelectionViewController=e.subclass({classname:"TransformSelectionViewController",initialize:function($super,q,p,o,m,l,k,n){$super(q,p,o,m,l,k,n)},selectButton:function(k){console.log("TransformSelectionViewController > selectButton");if(this._mainCardSelectionView){console.log("TransformSelectionViewController > selectButton > setting _transformCard1Selected, _mainSelectedCard="+JSON.stringify(k.info));TFSceneDirector._mainSelectedCard=k.info;TFSceneDirector._transformCard1Selected=true;TFSceneDirector._transformCard2Selected=false}else{if(TFSceneDirector._mainSelectedCard.decks.length>0&&k.info.decks.length>0){TFSceneDirector._transformCard2Selected=false;TFSceneDirector._selectedFusionCards=undefined;var l=new Object();l.title=Localization.getString("ui_alert");l.text=Localization.getString("ui_thiscardiscurentlyinyourdeck");l.okButtonText=Localization.getString("ui_todeck");l.cb=function(){TFSceneDirector._mainSelectedCard=undefined;TFSceneDirector._transformCard1Selected=false;TFSceneDirector.onTeamButton()}.bind(TFSceneDirector);TFSceneDirector._showDialog(new a(l));return}console.log("TransformSelectionViewController > selectButton > setting _transformCard2Selected, "+JSON.stringify(k.info));TFSceneDirector._transformCard2Selected=true;TFSceneDirector._selectedFusionCards=new Array();TFSceneDirector._selectedFusionCards.push(k.info)}TFSceneDirector.showTransform(this._isTutorial)},_isValidCard:function(n){var m=this._selectionCards[n];var p=TFCardsManager.getCardDefinition(m.definitionId);if((p.cardFormId!=1)&&(p.cardFormId!=2)){console.log("*********************************** Card "+n+" ("+m.definitionId+") is not a ROBOT or ALT FORM");return false}else{if(this._mainCardSelectionView&&(p.cardFormId==2)){console.log("*********************************** Card "+n+" ("+m.definitionId+") is not a ROBOT FORM (selecting main)");return false}else{if(!this._mainCardSelectionView&&TFSceneDirector._transformCard1Selected&&(p.id!=TFSceneDirector._mainSelectedCard.definitionId+1)){console.log("*********************************** Card "+n+" ("+m.definitionId+") is not the ALT form for selected ROBOT form");return false}else{if(this._mainCardSelectionView){var o=true;for(var l in this._selectionCards){if(this._selectionCards[n].definitionId==(this._selectionCards[l].definitionId-1)){o=false;break}}if(o){console.log("*********************************** Card "+n+" ("+this._selectionCards[n].definitionId+") does not have a TRANSFORMABLE pair that is not in PLAYERS DECK");return false}}}}}return true},_showCheckboxes:function(k){return false},_showSelectButtons:function(k){return true},afterViewDisplayed:function(){console.log("TransformSelectionViewController >  afterViewDisplayed");if(this._hideCost){this._costBox.setVisible(false)}if(TFUserData.getTutorialState("transscan")=="start"){var l=new Object();if(this._mainCardSelectionView){l.title=Localization.getString("tutorial_transscan_title_02");l.text=Localization.getString("tutorial_transscan_text_02");l.tutorialId="tutorial_transscan_title_02"}else{l.title=Localization.getString("tutorial_transscan_title_03");l.text=Localization.getString("tutorial_transscan_text_03");l.tutorialId="tutorial_transscan_title_03"}if(this._returnArray.length<1){l.title=Localization.getString("tutorial_transscan_title_05");l.text=Localization.getString("tutorial_transscan_text_05");l.tutorialId="tutorial_transscan_title_05"}var m=__ngs.r_(__ngs._81).TutorialBubbleView;var k=TFSceneDirector.showTutorialDialog(m,l);k.getView().bubble1.setPosition(-320,-100)}}})}};__ngs._5n={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var b=__ngs.r_(__ngs._n).ViewController;var e=__ngs.r_(__ngs._4p).DeckGridView;var a=__ngs.r_(__ngs._49).TFDeckManager;c.EnemyDeckController=b.subclass({classname:"EnemyDeckController",initialize:function($super){var g=e;this.m_currentView=g;this.enemyDeck=TFUserData.getOpponentDeck();console.log("EnemyDeckController > initialize > deck=%s",JSON.stringify(this.enemyDeck));$super();TFCardsManager.loadCardListDetails();this.createView(g);var k={displayed:true,animated:true,timeout:1000};var h={displayed:true,animated:true,timeout:1000};this.getView().grid.setPosition(this.getView().grid._position._x,350);this.setHudDisplayData(k,h)},setBottomHudView:function(g){g.updateHudWithView(null)},destroy:function($super){$super()},onComboSelected:function(g){console.log("EnemyDeckController > onComboSelected > button %s",JSON.stringify(g.info));TFSceneDirector.showUnitDetails(g.info)},onEditSelected:function(g){TFSceneDirector.showUnitEdit(g.info)},onShow:function(g){console.log(" EnemyDeckController > onShow > Action not allowed ")},onCancel:function(){console.log("EnemyDeckController > onCancel > BACK BUTTON PRESSED");var g=TFSceneDirector.back();console.log("EnemyDeckController > onCancel > TFSceneDirector back function returned : "+JSON.stringify(g))},onAutobotMiniDeck:function(){TFSceneDirector.showCardList(null,null,TFGameData.DECK_INDEX.AUTOBOTS)},onDecepticonMiniDeck:function(){TFSceneDirector.showCardList(null,null,TFGameData.DECK_INDEX.DECEPTICONS)},onConfirm:function(){console.log("EnemyDeckController > onConfirm");a.setMainDeck(a.getRecommendedDeck());TFSceneDirector.showCardList()},fetchListItems:function(g){if(g=="grid"){return this.gridItems()}else{return this.listItems()}},gridItems:function(){console.log("EnemyDeckController > gridItems ");var k=[];var l=__ngs.r_(__ngs._ae).DeckGridItemView;var o=this.enemyDeck;var g=0;if(this.enemyDeck.status1){g=this.enemyDeck.status1.length}for(var m=0;m<g;m++){view=new l(this,DeckGridItemViewDefinition);for(var n in this.enemyDeck){var h=o[n];view.draw({id:h[m]["gear"],definitionId:h[m]["gearDefinitionId"]},{id:h[m]["pilot"],definitionId:h[m]["pilotDefinitionId"]},n,m)}k.push(view)}view=new DeckGridBottomView(this,DeckGridBottomViewDefinition);view.confirm.setEnabled(false);view.cancel.setEnabled(true);view.confirm.setVisible(false);view.cancel.setVisible(true);view.recomend.setVisible(false);view.recomend.setEnabled(false);view.autobotDeck.setVisible(false);view.autobotDeck.setEnabled(false);view.decepticonDeck.setVisible(false);view.decepticonDeck.setEnabled(false);view.cancel.setText(Localization.getString("ui_back"));k.push(view);return k}})}};__ngs._5o={_c:null,_d:function(){var g={exports:{}};var c=g.exports;this._c=g;var a=__ngs.r_(__ngs._n).ViewController;var e=__ngs.r_(__ngs._45).AnimationQueue;var d=__ngs.r_(__ngs._af).RBIntroView;var b=__ngs.r_(__ngs._63).TFFormulas;c.RBIntroViewController=a.subclass({classname:"RBIntroViewController",initialize:function($super){$super();this._eventInfo=TFGameData.getEventInfo(TFUserData.curEventId);this.createView(d,function(){var k={displayed:true,animated:true,timeout:1000,mode:"button_only"};var h={displayed:false,animated:true,timeout:1000};this.setHudDisplayData(k,h)}.bind(this))},onRegister:function(k){var m=TFUserData.getLevel();if(!m||(m<(this._eventInfo.minLevel||5))){var h=__ngs.r_(__ngs._3y).PopUpController;var l={};l.text=Localization.getString("ui_leveltoolow");l.buttons="one";l.fontSize=36;l.textOffsetY=-50;TFSceneDirector._showDialog(new PopUpController(l))}else{Server.registerForEvent(this._eventInfo.eventId,this.receiveRegisterInfo.bind(this))}},receiveRegisterInfo:function(k,h){if(k){console.log("RBIntroViewController > receiveRegisterInfo > error="+JSON.stringify(k));TFAnalytics.reportGameEvent("RAIDBOSSBEGIN",{error:JSON.stringify(k)});if(false){TFEventManager.resync();TFSceneDirector.showHome()}TFUtils.showErrorMessages(h);return}console.log("RBIntroViewController > receiveRegisterInfo > response="+JSON.stringify(h));if(h){if(h.success){if(h.gifts&&(h.gifts.length>0)){for(var l in h.gifts){Server.giftingClaimOne(h.gifts[l].id,this.receiveClaimResult.bind(this,h.gifts[l]))}}TFUserData.joinedEvents.push(TFUserData.curEventId);TFAnalytics.reportGameEvent("RAIDBOSSBEGIN",{eventid:TFUserData.curEventId,msg:h.msg||""});if(this._destroying){return}TFSceneDirector.showRBMain("slideleft")}else{TFAnalytics.reportGameEvent("RAIDBOSSBEGIN",{unsuccessful:JSON.stringify(h)})}}else{TFUtils.somethingWentWrongPopup()}},receiveClaimResult:function(l,k,h){console.log("RBIntroViewController > receiveClaimResult > gift="+JSON.stringify(l));if(k){console.log("RBIntroViewController > receiveClaimResult > error="+JSON.stringify(k));return}console.log("RBIntroViewController > receiveClaimResult > response="+JSON.stringify(h));Server.getCurrentUser(this.receiveCurrentUser.bind(this))},receiveCurrentUser:function(k,h){if(k){console.log("RBIntroViewController > receiveCurrentUser > error="+k);return}console.log("RBIntroViewController > receiveCurrentUser > response="+h);if(h){TFUserData.syncFrom(h);TFSceneDirector.getTopHudViewController().update()}else{}},onEventRewards:function(h){TFSceneDirector.showRBEventRewards()},onHelp:function(p){TFAppDelegate._glView.setActive(false);var q=TFSceneDirector.getScreenWidth();var l=TFSceneDirector.getScreenHeight();var k=new UI.ViewGeometry.Rect(0,l,q,l);this._baseView=new UI.View();this._baseView.setFrame(k.array());UI.Window.document.addChild(this._baseView);var o=new UI.ViewGeometry.Rect(0,0,q,l);this._webView=new UI.WebView();this._webView.setBackgroundColor("FF000000");this._webView.setFrame(o.array());this._baseView.addChild(this._webView);var n=new UI.ViewGeometry.Rect(q/32,q/32,q/10,q/10);this._cancelButton=new UI.Button();this._cancelButton.setFrame(n.array());this._cancelButton.setOnClick(this.onHelpDismiss.bind(this));this._cancelButton.setText("X");this._cancelButton.setStyle(new UI.Style({gradient:{corners:"15",gradient:["FFF0 0.0","FFA0 1.0"]},pressedGradient:{corners:"15",gradient:["FF80 0.0","FFC0 1.0"]}}));this._baseView.addChild(this._cancelButton);var m;this._eventInfo=TFGameData.getEventInfo(TFUserData.curEventId);if(this._eventInfo&&this._eventInfo.eventHelpUrl){m=this._eventInfo.eventHelpUrl}if(!m){m="http://transformers-legends.com/events/harvest-of-the-insecticons/"}this._webView.setViewportEnabled(true);this._webView.loadUrl(m);var h=this.createAnimationQueue();h.pushAnimation(300,e.Curve.Linear).tween(e.Interpolate.scalar(l,0),function(r){this._baseView.setFrame(0,r,q,l)}.bind(this));h.pushCallback(function(){setTimeout(function(){this._helpDisplayed=true}.bind(this),1)}.bind(this));h.start();TFSceneDirector._viewControllerStack.push({cb:this.onHelpDismiss.bind(this)});TFSceneDirector._viewControllerStack.push({})},onHelpDismiss:function(){if(this._helpDisplayed!==true){return}this._helpDisplayed=false;this._baseView.removeChild(this._cancelButton);this._cancelButton.destroy();var l=TFSceneDirector.getScreenWidth();var k=TFSceneDirector.getScreenHeight();var h=this.createAnimationQueue();h.pushAnimation(300,e.Curve.Linear).tween(e.Interpolate.scalar(0,k),function(m){this._baseView.setFrame(0,m,l,k)}.bind(this));h.pushCallback(function(){this._webView.destroy();this._baseView.destroy()}.bind(this));h.start();TFSceneDirector._viewControllerStack.pop();TFSceneDirector._viewControllerStack.pop();TFAppDelegate._glView.setActive(true)},onCardSelected:function(l){var o=l.info.cardID;var m={};var n=TFCardsManager.getCardDefinition(o);var k=b.getStatusForLevel(n,1);m.stats=k;m.CardDefinition=o;var h;if(n.type==TFGameData.CARD_TYPE.TRANSFORMER){h=__ngs.r_(__ngs._80).FullScreenCardController}else{h=__ngs.r_(__ngs._8a).FullScreenWeaponCardController}TFSceneDirector._showDialog(new h(m,true))},onToggleFullTimeLeft:function(h){console.log("TOGGLE FULL TIME LEFT");this.getView()._fullTimeLeft=this.getView()._fullTimeLeft?false:true},destroy:function($super){this._destroying=true;$super()}})}};__ngs._5p={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var g=__ngs.r_(__ngs._3x).Social;var a=__ngs.r_(__ngs._n).ViewController;var c=__ngs.r_(__ngs._45).AnimationQueue;var e=__ngs.r_(__ngs._ag).RBMainView;b.RBMainViewController=a.subclass({classname:"RBMainViewController",initialize:function($super){$super();this.createView(e,function(){this._eventDefinition=TFGameData.getEventInfo(TFUserData.curEventId);this._autoUpdateDelay=this._eventDefinition?((this._eventDefinition.mainViewRefresh==="undefined")?0:this._eventDefinition.mainViewRefresh):0;console.log("RBBossDetailViewController > initialize > autoUpdateDelay="+this._autoUpdateDelay);this._numServerResponsesExpected=0;this.autoUpdateEventInfo();var k={displayed:true,animated:true,timeout:1000,mode:"button_only"};var h={displayed:false,animated:true,timeout:1000};this.setHudDisplayData(k,h)}.bind(this))},updateEventInfoNow:function(h){if(this._destroying){return}console.log("RBMainViewController > updateEventInfoNow > updating event info");if(h){TFSceneDirector.disableGlobalTouches("RBMainViewController::updateEventInfoNow::getEventInfo")}this._refreshQueue=this.createAnimationQueue();var k=this.getView().list.refreshButton.icon.getRotation();this._refreshQueue.pushAnimation(TFGameData.REFRESH_ICON_SPIN_DURATION,c.Curve.Linear).tween(c.Interpolate.scalar(k,k+360),function(l){if(this.getView()){this.getView().list.refreshButton.icon.setRotation(l)}}.bind(this));this._refreshQueue.startLooped();this.getView().list.refreshButton.button.setEnabled(false);Server.getEventInfo(TFUserData.curEventId,h,this.receiveEventInfo.bind(this,h));this._numServerResponsesExpected=1},autoUpdateEventInfo:function(){var l=false;var h=0;if(!this._destroying){if(this._autoUpdateDelay>0){var k=Server.getTime();h=this._prevUpdateTime?(this._nextUpdateTime-this._prevUpdateTime):"INITIAL UPDATE";if((this._numServerResponsesExpected==0)&&(!this._nextUpdateTime||(k>this._nextUpdateTime))){l=true}setTimeout(this.autoUpdateEventInfo.bind(this),1000)}else{if(!this._nextUpdateTime){l=true}}if(l){console.log("RBMainViewController > autoUpdateEventInfo > auto updating event info (delay="+(h/1000)+"s)");this.updateEventInfoNow(this._nextUpdateTime?false:true);this._prevUpdateTime=k}}},delayAutoUpdate:function(){var h=Server.getTime();this._nextUpdateTime=h+this._autoUpdateDelay*1000},receiveEventInfo:function(m,k,h){if(m){TFSceneDirector.enableGlobalTouches("RBMainViewController::receiveEventInfo")}if(!this._destroying){var l=Server.getTime();this._nextUpdateTime=l+this._autoUpdateDelay*1000;this._numServerResponsesExpected--;console.log("RBMainViewController > receiveEventInfo > decrementing num server responses expected="+this._numServerResponsesExpected);if(this._numServerResponsesExpected==0){this.refreshComplete()}if(k){if(m){console.log("RBMainViewController > receiveEventInfo > error="+JSON.stringify(k));TFUtils.showErrorMessages(h);if(this.getView(false)){this.getView(false).updateFail()}}return}console.log("RBMainViewController > receiveEventInfo > response="+JSON.stringify(h));if(h){TFUserData.eventPoints=h.eventPoints;TFUserData.userRanking=h.userRanking;this._eventInfo=h;this.getView(false).update(this._eventInfo)}else{TFUtils.somethingWentWrongPopup()}}},receiveRaidBossRewardList:function(l,k,h){if(l){TFSceneDirector.enableGlobalTouches("RBMainViewController::receiveRaidBossRewardList")}if(!this._destroying){this._numServerResponsesExpected--;if(this._numServerResponsesExpected==0){this.refreshComplete()}if(k){if(l){console.log("RBMainViewController > receiveRaidBossRewardList > error="+JSON.stringify(k));TFUtils.showErrorMessages(h)}return}console.log("RBMainViewController > receiveRaidBossRewardList > response="+JSON.stringify(h));if(h){this.getView(false).update(undefined,h)}else{TFUtils.somethingWentWrongPopup()}}},refreshComplete:function(){console.log("RBMainViewController > refreshComplete");this._refreshQueue.destroy();this._refreshQueue=undefined;this.getView().list.refreshButton.button.setEnabled(true)},onForceUpdate:function(){console.log("RBMainViewController > onForceUpdate > force updating event info");this.updateEventInfoNow(true)},onEventRewards:function(h){TFSceneDirector.showRBEventRewards(this._eventInfo)},onHelp:function(p){TFAppDelegate._glView.setActive(false);var q=TFSceneDirector.getScreenWidth();var l=TFSceneDirector.getScreenHeight();var k=new UI.ViewGeometry.Rect(0,l,q,l);this._baseView=new UI.View();this._baseView.setFrame(k.array());UI.Window.document.addChild(this._baseView);var o=new UI.ViewGeometry.Rect(0,0,q,l);this._webView=new UI.WebView();this._webView.setBackgroundColor("FF000000");this._webView.setFrame(o.array());this._baseView.addChild(this._webView);var n=new UI.ViewGeometry.Rect(q/32,q/32,q/10,q/10);this._cancelButton=new UI.Button();this._cancelButton.setFrame(n.array());this._cancelButton.setOnClick(this.onHelpDismiss.bind(this));this._cancelButton.setText("X");this._cancelButton.setStyle(new UI.Style({gradient:{corners:"15",gradient:["FFF0 0.0","FFA0 1.0"]},pressedGradient:{corners:"15",gradient:["FF80 0.0","FFC0 1.0"]}}));this._baseView.addChild(this._cancelButton);var m;this._eventInfo=TFGameData.getEventInfo(TFUserData.curEventId);if(this._eventInfo&&this._eventInfo.eventHelpUrl){m=this._eventInfo.eventHelpUrl}if(!m){m="http://transformers-legends.com/events/harvest-of-the-insecticons/"}this._webView.setViewportEnabled(true);this._webView.loadUrl(m);var h=this.createAnimationQueue();h.pushAnimation(300,c.Curve.Linear).tween(c.Interpolate.scalar(l,0),function(r){this._baseView.setFrame(0,r,q,l)}.bind(this));h.pushCallback(function(){setTimeout(function(){this._helpDisplayed=true}.bind(this),1)}.bind(this));h.start();TFSceneDirector._viewControllerStack.push({cb:this.onHelpDismiss.bind(this)});TFSceneDirector._viewControllerStack.push({})},onHelpDismiss:function(){if(this._helpDisplayed!==true){return}this._helpDisplayed=false;this._baseView.removeChild(this._cancelButton);this._cancelButton.destroy();var l=TFSceneDirector.getScreenWidth();var k=TFSceneDirector.getScreenHeight();var h=this.createAnimationQueue();h.pushAnimation(300,c.Curve.Linear).tween(c.Interpolate.scalar(0,k),function(m){this._baseView.setFrame(0,m,l,k)}.bind(this));h.pushCallback(function(){this._webView.destroy();this._baseView.destroy()}.bind(this));h.start();TFSceneDirector._viewControllerStack.pop();TFSceneDirector._viewControllerStack.pop();TFAppDelegate._glView.setActive(true)},onScan:function(k){var h=TFSceneDirector.getStage();if(h.worldId>0&&h.stageId>0){TFSceneDirector.showMissionSelect(h.worldId,h.stageId)}else{if(h.worldId>0){TFSceneDirector.showStageSelect(h.worldId)}else{TFSceneDirector.showWorldSelect()}}TFSceneDirector.skipTopViewController()},onForceGenerateBoss:function(h){console.log("RBMainViewController > onForceGenerateBoss > generating");Server.generateBoss(this.receiveGenerateBoss.bind(this))},receiveGenerateBoss:function(k,h){if(!this._destroying){if(k){console.log("RBMainViewController > receiveGenerateBoss > error="+JSON.stringify(k));TFUtils.showErrorMessages(h);return}console.log("RBMainViewController > receiveGenerateBoss > response="+JSON.stringify(h));if(h){console.log("RBMainViewController > receiveGenerateBoss > force updating event info");this.updateEventInfoNow(false)}else{TFUtils.somethingWentWrongPopup()}}},onLeaderBoard:function(h){TFSceneDirector.showRBLeaderBoard()},onBossButton:function(h,k){},onBossCollect:function(h,k){TFSceneDirector.disableGlobalTouches("RBMainViewController > onBossCollect > bossInfo="+JSON.stringify(h));k.setEnabled(false);var l=TFGameData.getBossDefinition(TFUserData.curEventId,h.definitionId);TFUtils.collectRaidBossRewards(h.id,l,this.doneCollectRewards.bind(this))},doneCollectRewards:function(h){TFSceneDirector.enableGlobalTouches("RBMainViewController::doneCollectRewards");this.updateEventInfoNow(true)},onBossDismiss:function(h,k){this.onForceUpdate()},onBossAccept:function(h,k){console.log("RBMainViewController > onBossAccept > accepting boss "+h.id+" from "+h.allyGamerTag);Server.acceptHelpRequest(h.allyName,h.id,this.receiveAcceptHelpRequest.bind(this,h.id))},receiveAcceptHelpRequest:function(n,k,h){if(!this._destroying){if(k){console.log("RBMainViewController: > receiveAcceptHelpRequest > error="+JSON.stringify(k));TFUtils.showErrorMessages(h);return}console.log("RBMainViewController > receiveAcceptHelpRequest > response="+JSON.stringify(h));if(h){for(var l in this.getView(false)._bossEntries){var m=this.getView(false)._bossEntries[l];if(m._bossInfo.id==n){m._bossInfo.type=2;m.updateEntry();break}}}else{TFUtils.somethingWentWrongPopup()}}},onBossEngage:function(h,k){console.log("RBMainViewController > onBossFight > showing boss details");Server.getBossInfo(h.id,true,this.receiveBossInfo.bind(this))},receiveBossInfo:function(k,h){if(!this._destroying){if(k){console.log("RBMainViewController > receiveBossInfo > error="+JSON.stringify(k));TFUtils.showErrorMessages(h);return}console.log("RBMainViewController > receiveBossInfo > response="+JSON.stringify(h));if(h){TFSceneDirector.showRBBoss(h,false,false)}else{TFUtils.somethingWentWrongPopup()}}},onSpaceBridge:function(h){TFSceneDirector.showRBStore(undefined,"slideleft")},onSpaceBridgeButtonHighlight:function(h){console.log("RBMainViewController > onSpaceBridgeButtonHighlight > highlighted="+h);if(h){this.getView().list.spaceBridgeBanner.bannerImageL.setColor(0.5,0.5,0.5);this.getView().list.spaceBridgeBanner.bannerImageM.setColor(0.5,0.5,0.5);this.getView().list.spaceBridgeBanner.bannerImageR.setColor(0.5,0.5,0.5);this.getView().list.spaceBridgeBanner.spaceBridgeStaticText1.setColor(0.5*this.getView().list.spaceBridgeBanner._definitions.spaceBridgeStaticText1.color[0]/255,0.5*this.getView().list.spaceBridgeBanner._definitions.spaceBridgeStaticText1.color[1]/255,0.5*this.getView().list.spaceBridgeBanner._definitions.spaceBridgeStaticText1.color[2]/255);this.getView().list.spaceBridgeBanner.spaceBridgeStaticText2.setColor(0.5*this.getView().list.spaceBridgeBanner._definitions.spaceBridgeStaticText2.color[0]/255,0.5*this.getView().list.spaceBridgeBanner._definitions.spaceBridgeStaticText2.color[1]/255,0.5*this.getView().list.spaceBridgeBanner._definitions.spaceBridgeStaticText2.color[2]/255)}else{this.getView().list.spaceBridgeBanner.bannerImageL.setColor(1,1,1);this.getView().list.spaceBridgeBanner.bannerImageM.setColor(1,1,1);this.getView().list.spaceBridgeBanner.bannerImageR.setColor(1,1,1);this.getView().list.spaceBridgeBanner.spaceBridgeStaticText1.setColor(this.getView().list.spaceBridgeBanner._definitions.spaceBridgeStaticText1.color[0]/255,this.getView().list.spaceBridgeBanner._definitions.spaceBridgeStaticText1.color[1]/255,this.getView().list.spaceBridgeBanner._definitions.spaceBridgeStaticText1.color[2]/255);this.getView().list.spaceBridgeBanner.spaceBridgeStaticText2.setColor(this.getView().list.spaceBridgeBanner._definitions.spaceBridgeStaticText2.color[0]/255,this.getView().list.spaceBridgeBanner._definitions.spaceBridgeStaticText2.color[1]/255,this.getView().list.spaceBridgeBanner._definitions.spaceBridgeStaticText2.color[2]/255)}},onToggleFullTimeLeft:function(h){this.getView(false)._fullTimeLeft=this.getView(false)._fullTimeLeft?false:true;console.log("TOGGLE FULL TIME LEFT = "+this.getView()._fullTimeLeft)},onToggleBossFullTimeLeft:function(h){h._fullTimeLeft=h._fullTimeLeft?false:true;console.log("TOGGLE FULL TIME LEFT = "+h._fullTimeLeft)},destroy:function($super){this._destroying=true;if(this._refreshQueue){this._refreshQueue.destroy()}$super()}})}};__ngs._5q={_c:null,_d:function(){var e={exports:{}};var h=e.exports;this._c=e;var c=__ngs.r_(__ngs._n).ViewController;var d=__ngs.r_(__ngs._ah).RBEventRewardsView;var g=__ngs.r_(__ngs._ai).RBEventRankRewardsView;var l=__ngs.r_(__ngs._aj).RBEventRankRewardCellView;var k=__ngs.r_(__ngs._ak).RBEventPointRewardsView;var b=__ngs.r_(__ngs._al).RBEventPointRewardCell;var m=__ngs.r_(__ngs._r).TFCardsManager;var a=__ngs.r_(__ngs._63).TFFormulas;h.RBEventRewardsViewController=c.subclass({classname:"RBEventRewardsViewController",initialize:function($super,n){this._loadsInProgress=0;this._eventInfo=n;this._eventID=TFUserData.curEventId;this._pointsRewards=TFGameData.getEventPointRewards(this._eventID);this._rankRewards=TFGameData.getEventRankingRewards(this._eventID);this._currentViewName="";this._currentView=null;$super();this.createView(d,function(){}.bind(this))},doInitialize:function(n){TFSceneDirector.shiftUIElementUp(this.getView().backgroundImage);TFSceneDirector.shiftUIElementUp(this.getView().backgroundImage2);TFSceneDirector.shiftUIElementUp(this.getView().viewPlaceholder);TFSceneDirector.shiftUIElementUp(this.getView().titleText);TFSceneDirector.shiftUIElementUp(this.getView().rankRewardButton);TFSceneDirector.shiftUIElementUp(this.getView().pointsRewardButton);TFSceneDirector.shiftUIElementUp(this.getView().pointsButtonText);TFSceneDirector.shiftUIElementUp(this.getView().rankButtonText);TFSceneDirector.shiftUIElementUp(this.getView().descText);var p={displayed:true,animated:true,timeout:1000,mode:"button_only"};var o={displayed:false,animated:true,timeout:1000};this.setHudDisplayData(p,o);if(this._eventInfo){this.updateWithEventInfo(this._eventInfo)}else{Server.getEventInfo(TFUserData.curEventId,true,this.receiveEventInfo.bind(this))}this.showRankRewards(n)},receiveEventInfo:function(o,n){if(o){console.log("RBEventRewardsViewController > receiveEventInfo > error="+JSON.stringify(o));TFUtils.showErrorMessages(n);return}console.log("RBEventRewardsViewController > receiveEventInfo > response="+JSON.stringify(n));if(n){this.updateWithEventInfo(n)}},updateWithEventInfo:function(n){if(!this.getView()){return}this._eventInfo=n;points=this._eventInfo.eventPoints;var o=0;if(points>0){o=this._eventInfo.userRanking}this.getView().backgroundImage.rank.setText(""+o);this.getView().backgroundImage.points.setText(""+points+Localization.getString("ui_pt"))},onRankRewardButtonPressed:function(){this.showRankRewards()},onPointsRewardButtonPressed:function(){this.showPointsRewards()},onRankRewardHighlight:function(n){if(n){this.getView().rankButtonText.setColor(220/255,248/255,255/255)}else{this.getView().rankButtonText.setColor(1/255,44/255,83/255)}},onPointsRewardHighlight:function(n){if(n){this.getView().pointsButtonText.setColor(220/255,248/255,255/255)}else{this.getView().pointsButtonText.setColor(1/255,44/255,83/255)}},showRankRewards:function(n){this._showRankRewardsCB=n;this.getView().rankRewardButton.setHighlighted(true);this.getView().pointsRewardButton.setHighlighted(false);this.getView().rankRewardButton.setIgnore(true);this.getView().pointsRewardButton.setIgnore(false);this.getView().titleText.setText(Localization.getString("ui_eventrewards_uc"));if(this._currentViewName=="RANK"){return}this._currentViewName="RANK";var o=new g(this)},showRankRewardsDone:function(n){console.log("RBEventRewardsViewController > showRankRewardsDone");this.getView(false).replaceRewardsView(n);this.getView().backgroundImage2.setPosition(0,400+n.getTotalViewLength());TFSceneDirector.shiftUIElementUp(this.getView().backgroundImage2);this.getView(false)._scrollArea._totalHeight=600+n.getTotalViewLength();if(this._showRankRewardsCB){this._showRankRewardsCB()}},showPointsRewards:function(n){this._showPointRewardsCB=n;this.getView().pointsRewardButton.setHighlighted(true);this.getView().rankRewardButton.setHighlighted(false);this.getView().pointsRewardButton.setIgnore(true);this.getView().rankRewardButton.setIgnore(false);this.getView().titleText.setText(Localization.getString("ui_pointrewards_uc"));if(this._currentViewName=="POINTS"){return}this._currentViewName="POINTS";var o=new k(this)},showPointsRewardsDone:function(n){console.log("RBEventRewardsViewController > showPointsRewardsDone");this.getView(false).replaceRewardsView(n);this.getView().backgroundImage2.setPosition(0,400+n.getTotalViewLength());TFSceneDirector.shiftUIElementUp(this.getView().backgroundImage2);this.getView(false)._scrollArea._totalHeight=600+n.getTotalViewLength();if(this._showPointRewardsCB){this._showPointRewardsCB()}},fetchListItems:function(q,n){var p=[];if(n==undefined){return p}lastRewardRank=1;if(this._currentViewName=="RANK"){this._loadsInProgress=this._rankRewards.length;for(var r=0;r<this._rankRewards.length;++r){this._rankRewards[r].lastRanking=lastRewardRank;var o=new l(this,this._rankRewards[r]);lastRewardRank=this._rankRewards[r].ranking+1;p.push(o);o.addLoadDoneCallback(function(s){this._loadsInProgress--;if(this._loadsInProgress==0){console.log("(DYNAMICJSON) RBEventRewardsViewController > fetchListItems > all rank rewards done loading");s(p)}}.bind(this,n))}}else{if(this._currentViewName=="POINTS"){this._loadsInProgress=this._pointsRewards.length;for(var r in this._pointsRewards){var o=new b(this,this._pointsRewards[r]);p.push(o);o.addLoadDoneCallback(function(s){this._loadsInProgress--;if(this._loadsInProgress==0){console.log("(DYNAMICJSON) RBEventRewardsViewController > fetchListItems > all point rewards done loading");s(p)}}.bind(this,n))}}}return p},onCardSelected:function(p){var t=p.info.id+(this._cardPage*this._maxCardsPerPage);var s=p.info.cardID;var q={};var r=m.getCardDefinition(s);var o=a.getStatusForLevel(r,1);q.stats=o;q.CardDefinition=s;q.cbDismiss=function(){this._blocked=false}.bind(this);var n;if(r.type==TFGameData.CARD_TYPE.TRANSFORMER){n=__ngs.r_(__ngs._80).FullScreenCardController}else{n=__ngs.r_(__ngs._8a).FullScreenWeaponCardController}TFSceneDirector._showDialog(new n(q,true))},onLeaderboard:function(n){TFSceneDirector.showRBLeaderBoard()},destroy:function($super){$super()}})}};__ngs._5r={_c:null,_d:function(){var g={exports:{}};var c=g.exports;this._c=g;var b=__ngs.r_(__ngs._n).ViewController;var a=__ngs.r_(__ngs._am).RBLeaderBoardView;var e=__ngs.r_(__ngs._an).RBLeaderBoardCellView;var h=__ngs.r_(__ngs._o).TFSceneDirector;var d=__ngs.r_(__ngs._a3).UnknownProfileView;c.RBLeaderBoardViewController=b.subclass({classname:"RBLeaderBoardViewController",ENTRIES_PER_PAGE:10,initialize:function($super,k){console.log("RBLeaderBoardViewController > initialize > bossId="+k);$super();this.createView(a,function(){h.stretchUIElementVertically(this.getView().backgroundImage);h.shiftUIElementUp(this.getView().backgroundImage);h.shiftUIElementUp(this.getView().toEventRewardsButton);h.shiftUIElementUp(this.getView().rewardsButtonText);var m={displayed:true,animated:true,timeout:1000,mode:"button_only"};var l={displayed:false,animated:true,timeout:1000};this.setHudDisplayData(m,l);this.goToMyPosition();this.getView().backgroundImage._totalHeight=0}.bind(this))},goToMyPosition:function(){this._index=1;Server.getRankingByIndex(this._index,this._index+this.ENTRIES_PER_PAGE,this.receiveRankingData_1pass.bind(this))},receiveRankingData_1pass:function(k,l){console.log("RBLeaderBoardViewController > receiveRankingData_1pass > error : "+JSON.stringify(k));if(k){TFUtils.showErrorMessages(l,function(){h.showRBMain()});return}console.log("RBLeaderBoardViewController > receiveRankingData_1pass > data : "+JSON.stringify(l));this._myPositionData=l.myPosition;console.log("RBLeaderBoardViewController > receiveRankingData_1pass > player position="+this._myPositionData.position);if(this._myPositionData){if(isNaN(this._myPositionData.position)===true){this._myPositionData.position=1}this._index=Math.max(this._myPositionData.position-Math.floor(this.ENTRIES_PER_PAGE/2),1);Server.getRankingByIndex(this._index,this._index+this.ENTRIES_PER_PAGE,this.receiveRankingData_2pass.bind(this))}},receiveRankingData_2pass:function(k,n){console.log("RBLeaderBoardViewController > receiveRankingData_2pass > error : "+JSON.stringify(k));if(k){TFUtils.showErrorMessages(n,function(){h.showRBMain()});return}console.log("RBLeaderBoardViewController > receiveRankingData_2pass > data : "+JSON.stringify(n));this._leaderboardData=n;this._myPositionData=n.myPosition;if(this._leaderboardData&&this._leaderboardData.rankingList){var m=false;var o=1;for(var l in this._leaderboardData.rankingList){console.log("RBLeaderBoardViewController > receiveRankingData_2pass > ranking item "+l+"="+JSON.stringify(this._leaderboardData.rankingList[l]));if(this._leaderboardData.rankingList[l].name==TFUserData.name){m=true;console.log("RBLeaderBoardViewController > receiveRankingData_2pass > FOUND ME")}o=Math.max(o,this._leaderboardData.rankingList[l].position)}if(m){if(this._leaderboardData.rankingList.length==0){this._index-=this.ENTRIES_PER_PAGE}else{this.insertListItems()}}else{if(this._myPositionData.position<=o){this._index+=this.ENTRIES_PER_PAGE/2;console.log("RBLeaderBoardViewController > receiveRankingData_2pass > player not found - new index="+this._index);Server.getRankingByIndex(this._index,this._index+this.ENTRIES_PER_PAGE,this.receiveRankingData_2pass.bind(this))}}}},receiveRankingData:function(k,m){console.log("RBLeaderBoardViewController > receiveRankingData > error : "+JSON.stringify(k));if(k){TFUtils.showErrorMessages(m,function(){h.showRBMain()});return}console.log("RBLeaderBoardViewController > receiveRankingData > data : "+JSON.stringify(m));this._leaderboardData=m;this._myPositionData=m.myPosition;if(this._leaderboardData&&this._leaderboardData.rankingList){for(var l in this._leaderboardData.rankingList){console.log("RBLeaderBoardViewController > receiveRankingData > ranking item "+l+"="+JSON.stringify(this._leaderboardData.rankingList[l]))}if(this._leaderboardData.rankingList.length==0){this._index-=this.ENTRIES_PER_PAGE}else{this.insertListItems()}}},fetchListItems:function(){return[]},insertListItems:function(){if(!this.getView()||this.getView().classname!="RBLeaderBoardView"){return}var o=this.getView().backgroundImage.playerList.itemAtIndex(0);if(!o){o=new e(this);this.getView().backgroundImage.playerList.addItem(o)}if(this._leaderboardData!=undefined&&this._leaderboardData.rankingList.length>1){this._leaderboardData.rankingList.sort(function(q,p){return q.position>p.position})}for(var n=0;n<this.ENTRIES_PER_PAGE;++n){var l=this.getView().backgroundImage.playerList.itemAtIndex(n+1);if(n<this._leaderboardData.rankingList.length){var m=this._leaderboardData.rankingList[n];console.log("RBLeaderBoardViewController > insertListItems > player "+n+"="+JSON.stringify(m));var k=m.gamerTag.toUpperCase()===TFUserData.getGamerTag().toUpperCase()?true:false;if(l){l.changeData(m,k)}else{l=new e(this,m,(n+1)%2==0,k);this.getView().backgroundImage.playerList.addItem(l);this.getView().backgroundImage._totalHeight+=110}l.setVisible(true)}else{if(l){l.setVisible(false)}}}},toFirstPosition:function(){this._index=1;Server.getRankingByIndex(this._index,this._index+this.ENTRIES_PER_PAGE,this.receiveRankingData.bind(this))},toHigherPositions:function(){this._index=Math.max(this._index-this.ENTRIES_PER_PAGE,1);Server.getRankingByIndex(this._index,this._index+this.ENTRIES_PER_PAGE,this.receiveRankingData.bind(this))},toLowerPositions:function(){this._index+=this.ENTRIES_PER_PAGE;Server.getRankingByIndex(this._index,this._index+this.ENTRIES_PER_PAGE,this.receiveRankingData.bind(this))},toMyPosition:function(){this.goToMyPosition()},toEventRewards:function(){h.showRBEventRewards()},toPlayerProfile:function(k){h.showProfile(k.info.name,d,{},"slideleft")},destroy:function($super){$super()}})}};__ngs._5s={_c:null,_d:function(){var e={exports:{}};var c=e.exports;this._c=e;var b=__ngs.r_(__ngs._n).ViewController;var a=__ngs.r_(__ngs._ao).RBBossBattleLogView;var h=__ngs.r_(__ngs._ap).RBBossBattleLogCellView;var g=__ngs.r_(__ngs._o).TFSceneDirector;var d=__ngs.r_(__ngs._a3).UnknownProfileView;c.RBBossBattleLogViewController=b.subclass({classname:"RBBossBattleLogViewController",initialize:function($super,k){$super();this.createView(a,function(){g.stretchUIElementVertically(this.getView().backgroundImage);g.shiftUIElementUp(this.getView().backgroundImage);var m={displayed:true,animated:true,timeout:1000,mode:"button_only"};var l={displayed:false,animated:true,timeout:1000};this.setHudDisplayData(m,l);console.log("RBBossBattleLogViewController > initialize > history : "+JSON.stringify(k));this._battleHistory=k;this._lastIndex=0;this.insertListItems(0)}.bind(this))},fetchListItems:function(){return[]},insertListItems:function(o){if(o<0){o=0}this._lastIndex=o;end=o+9;var n=this.getView().backgroundImage.playerList.itemAtIndex(0);if(!n){n=new h(this);n.addLoadDoneCallback(function(p){this.getView().backgroundImage.playerList.addItem(p)}.bind(this,n))}this._battleHistory.sort(function(q,p){return p.bossDamage-q.bossDamage});for(var m=o;m<this._battleHistory.length&&m<end;++m){var l=this._battleHistory[m];var k=this.getView().backgroundImage.playerList.itemAtIndex(m+1);if(k){k.changeData(l);k.playerButton.info=l}else{k=new h(this,l,(m+1)%2==0,m+1);k.addLoadDoneCallback(function(p,q){this.getView().backgroundImage.playerList.addItem(p);p.playerButton.info=q}.bind(this,k,l))}}},toFirstPosition:function(){this.insertListItems(0)},toHigherPositions:function(){this.insertListItems(this._lastIndex-10)},toLowerPositions:function(){this.insertListItems(this._lastIndex+10)},toMyPosition:function(){if(this._myPositionData){var k=this._myPositionData.position-5;if(k<1){k=1}var l=k+9;Server.getRanking(k,l,this.receiveRankingData_2pass.bind(this))}else{return}},toPlayerProfile:function(k){g.showProfile(k.info.name,d,{},"slideleft")},destroy:function($super){$super()}})}};__ngs._5t={_c:null,_d:function(){var e={exports:{}};var c=e.exports;this._c=e;var b=__ngs.r_(__ngs._n).ViewController;var d=__ngs.r_(__ngs._45).AnimationQueue;var a=__ngs.r_(__ngs._3y).PopUpController;var g=__ngs.r_(__ngs._aq).RBBossDetailView;c.RBBossDetailViewController=b.subclass({classname:"RBBossDetailViewController",initialize:function($super,h,l,k){console.log("RBBossDetailViewController - bossInfo="+JSON.stringify(h));console.log("RBBossDetailViewController - updateNow="+l+", fromBattle="+k);$super();this._bossInfo=h;this._fromBattle=k;this.createView(g,function(){this._bossDefinition=TFGameData.getBossDefinition(TFUserData.curEventId,this._bossInfo.bossInfo.definitionId);this._eventDefinition=TFGameData.getEventInfo(TFUserData.curEventId);this._autoUpdateDelay=this._eventDefinition?((this._eventDefinition.bossViewRefresh==="undefined")?0:this._eventDefinition.bossViewRefresh):0;console.log("RBBossDetailViewController > initialize > autoUpdateDelay="+this._autoUpdateDelay);this._updateNow=l||false;this.autoUpdateBossInfo();var n={displayed:true,animated:true,timeout:1000,mode:"button_only"};var m={displayed:true,animated:true,timeout:1000};this.setHudDisplayData(n,m)}.bind(this))},setBottomHudView:function(k){var h=__ngs.r_(__ngs._9m).BottomHudOpponentSelectView;k.updateHudWithView(h)},updateBossInfoNow:function(h){if(this._destroying){return}console.log("RBBossDetailViewController > updateBossInfoNow > updating boss info");this._refreshQueue=this.createAnimationQueue();var k=this.getView().refreshButton.icon.getRotation();this._refreshQueue.pushAnimation(TFGameData.REFRESH_ICON_SPIN_DURATION,d.Curve.Linear).tween(d.Interpolate.scalar(k,k+360),function(l){this.getView().refreshButton.icon.setRotation(l)}.bind(this));this._refreshQueue.startLooped();this.getView().refreshButton.button.setEnabled(false);Server.getBossInfo(this._bossInfo.bossInfo.id,h,this.receiveBossInfo.bind(this,h));this._inhibitUpdates=true},autoUpdateBossInfo:function(){console.log("RBBossDetailViewController > autoUpdateBossInfo > updateNow="+this._updateNow);var k=0;var m=this._updateNow?true:false;this._updateNow=false;if(!this._destroying){if(this._autoUpdateDelay>0){var l=Server.getTime();k=this._prevUpdateTime?(this._nextUpdateTime-this._prevUpdateTime):"INITIAL UPDATE";if(!this._inhibitUpdates){if(!this._nextUpdateTime){this._nextUpdateTime=l+this._autoUpdateDelay*1000}else{if(l>this._nextUpdateTime){m=true}}}if(this._bossInfo){if(this._bossInfo.bossInfo.hp==0){return}var l=Server.getServerTime();var h=this._bossInfo.bossInfo.expirationTime;if(l>=h){return}}setTimeout(this.autoUpdateBossInfo.bind(this),1000)}if(m){console.log("RBBossDetailViewController > autoUpdateBossInfo > auto updating boss info (delay="+(k/1000)+"s)");this.updateBossInfoNow(this._nextUpdateTime?false:true);this._prevUpdateTime=l}}},receiveBossInfo:function(m,k,h){if(!this._destroying){var l=Server.getTime();this._nextUpdateTime=l+this._autoUpdateDelay*1000;this._inhibitUpdates=false;if(this._refreshQueue){this._refreshQueue.destroy();this._refreshQueue=undefined}this.getView().refreshButton.button.setEnabled(true);if(k){if(m){console.log("RBBossDetailViewController > receiveBossInfo > error="+JSON.stringify(k));TFUtils.showErrorMessages(h)}return}console.log("RBBossDetailViewController > receiveBossInfo > response="+JSON.stringify(h));if(h){this.getView().update(h)}}},onForceUpdate:function(){console.log("RBBossDetailViewController > onForceUpdate > force updating boss info");this.updateBossInfoNow(true)},onQuickExpire:function(){this._autoUpdateDelay=0;var h=Server.getServerTime()+10*1000;if(h<this._bossInfo.bossInfo.expirationTime){this._bossInfo.bossInfo.expirationTime=h}},onFullEnergy:function(){Server._getRemoteObject().invoke("debugResetEnergy",[],function(h,k){if(k){TFUserData.setExploreEnergy(TFUserData.maxExploreEnergy);TFUserData.setBattleEnergy(TFUserData.maxBattleEnergy);TFUtils.createToast("Full Energy")}})},doneRechargeBattleCube:function(l,k,h){TFSceneDirector.enableGlobalTouches("RBBossDetailViewController::doneRechargeBattleCube");if(k){console.log("RBBossDetailViewController > doneRechargeBattleCube > error="+JSON.stringify(k));TFUtils.showErrorMessages(h);return}console.log("RBBossDetailViewController > doneRechargeBattleCube > response="+JSON.stringify(h));if(h){TFUserData.syncFrom(h);this.doAttack(l)}else{TFUtils.somethingWentWrongPopup()}},doAttack:function(m){TFSceneDirector.disableGlobalTouches("RBBossDetailViewController::doAttack");this.getView().attackButtons.numRecharge.setText("x"+(TFUserData.getItemQuantity(201)-m));var l=[];var k=m-TFUserData.getBattleEnergy();if(k<=0){k=0}else{l.push({id:201,amount:k})}var h=this.createAnimationQueue();h.pushAnimation(100,d.Curve.Linear).pushCallback(function(n,o){TFSceneDirector.enableGlobalTouches("RBBossDetailViewController::doAttack - attacking");TFSceneDirector.showRBBossBattle(n,this._bossInfo.bossInfo,o)}.bind(this,l,m));h.start()},onAttack:function(h){if(!Server.isConnectionAvailable()){TFUtils.showErrorMessages(Localization.getString("ui_pleasecheckconnection"));return}var l=h.numPts;var k={};console.log("RBBossDetailViewController > onAttack > battle energy="+TFUserData.getBattleEnergy());if(l==1){k.text=Localization.getString("ui_attackconfirmdialog1energy");if(TFUserData.getBattleEnergy()<1){k.text+="\n\n"+Localization.getString("ui_attackconfirmrecharge1");k.textOffsetY=-80;if(TFUserData.getItemQuantity(201)<(1-TFUserData.getBattleEnergy())){TFSceneDirector.showOutOfEnergy("raidboss");return}}}else{if(l==2){k.text=Localization.getString("ui_attackconfirmdialog2energy");if(TFUserData.getBattleEnergy()<2){k.text+="\n\n"+Localization.getString("ui_attackconfirmrecharge"+(2-TFUserData.getBattleEnergy()));k.textOffsetY=-80;if(TFUserData.getItemQuantity(201)<(2-TFUserData.getBattleEnergy())){TFSceneDirector.showOutOfEnergy("raidboss");return}}}else{k.text=Localization.getString("ui_attackconfirmdialog3energy");if(TFUserData.getBattleEnergy()<3){k.text+="\n\n"+Localization.getString("ui_attackconfirmrecharge"+(3-TFUserData.getBattleEnergy()));k.textOffsetY=-80;if(TFUserData.getItemQuantity(201)<(3-TFUserData.getBattleEnergy())){TFSceneDirector.showOutOfEnergy("raidboss");return}}}}k.buttons="";k.fontSize=36;k.cb=this.doAttack.bind(this,l);TFSceneDirector._showDialog(new a(k))},onAskForHelp:function(h){if(!this._bossInfo.helpRequested){TFSceneDirector.disableGlobalTouches("RBBossDetailViewController::onAskForHelp");this._bossInfo.helpRequested=true;Server.callForHelp(this._bossInfo.bossInfo.id,this.receiveCallForHelpResponse.bind(this))}},receiveCallForHelpResponse:function(l,k){TFSceneDirector.enableGlobalTouches("RBBossDetailViewController::receiveCallForHelpResponse");if(!this._destroying){if(l){if(l==319){var n={};n.title=Localization.getString("ui_alert");n.text=Localization.getString("ui_bosshasescaped");n.buttons="one";TFSceneDirector._showDialog(new a(n));this.getView().setBossEscaped()}else{console.log("RBBossDetailViewController > receiveCallForHelpResponse > error="+JSON.stringify(l));TFUtils.showErrorMessages(k);this._bossInfo.helpRequested=false}TFAnalytics.reportGameEvent("RAIDHELPREQUEST",{error:JSON.stringify(l)});return}console.log("RBBossDetailViewController > receiveCallForHelpResponse > response="+JSON.stringify(k));if(k){var n={};n.destroyCB=this.updateBossInfoNow.bind(this,true);n.players=[];for(var m in k){n.players.push(k[m])}var h=__ngs.r_(__ngs._ar).RBReinforcementsController;TFSceneDirector._showDialog(new h(n,true));TFAnalytics.reportGameEvent("RAIDHELPREQUEST",{eventid:TFUserData.curEventId,bossid:this._bossInfo.bossInfo.definitionId,clients:n.players.length,instanceid:this._bossInfo.bossInfo.id,epoints:TFUserData.eventPoints})}else{TFUtils.somethingWentWrongPopup()}}},onBossReward:function(h){TFSceneDirector.hideBottomHud(true);TFSceneDirector.showRBBossRewards(this._bossDefinition)},onPlayer:function(h){},onCollectRewards:function(h){TFSceneDirector.disableGlobalTouches("RBBossDetailViewController::onCollectRewards");h.setEnabled(false);TFUtils.collectRaidBossRewards(this._bossInfo.bossInfo.id,this._bossDefinition,this.doneCollectRewards.bind(this))},doneCollectRewards:function(h){TFSceneDirector.showRBMain()},updateBattleEnergy:function(h){this.getView().updateBattleEnergy(h)},onToggleFullTimeLeft:function(){console.log("TOGGLE FULL TIME LEFT");this.getView()._fullTimeLeft=this.getView()._fullTimeLeft?false:true},onBossBattleLog:function(){console.log("RBBossDetailViewController > onBossBattleLog > this._bossInfo : "+JSON.stringify(this._bossInfo));TFSceneDirector.hideBottomHud(true);TFSceneDirector.showRBBossBattleLog(this._bossInfo.history)},destroy:function($super){this._destroying=true;if(this._refreshQueue){this._refreshQueue.destroy()}$super()}})}};__ngs._5u={_c:null,_d:function(){var m={exports:{}};var M=m.exports;this._c=m;var R=__ngs.r_(__ngs._n).ViewController;var v=__ngs.r_(__ngs._45).AnimationQueue;var u=__ngs.r_(__ngs._as).RBBattleView;var l=__ngs.r_(__ngs._s).TFUtils;var s=__ngs.r_(__ngs._48).TFSoundManager;var I=__ngs.r_(__ngs._63).TFFormulas;var S=__ngs.r_(__ngs._r).TFCardsManager;var w=__ngs.r_(__ngs._x).TFManifestManager;var n=__ngs.r_(__ngs._4a).TFImageManager;var q=__ngs.r_(__ngs._3y).PopUpController;var b=__ngs.r_(__ngs._at).FightAnimation;var a=__ngs.r_(__ngs._au).MeleeHit;var L=__ngs.r_(__ngs._av).LaserShot;var B=__ngs.r_(__ngs._aw).HitShake;var r=__ngs.r_(__ngs._ax).MissileShot;var h=__ngs.r_(__ngs._ay).IntroAnimation3D;var D=__ngs.r_(__ngs._az).ExecuteFunction;var U=__ngs.r_(__ngs._b0).SlideCardsIn;var z=__ngs.r_(__ngs._b1).TransformingBonus;var e=__ngs.r_(__ngs._b2).SlideBannerInOut;var A=__ngs.r_(__ngs._b3).HealthBarDamage;var x=__ngs.r_(__ngs._b4).HealthAnimation;var o=__ngs.r_(__ngs._b5).DeathAnimation;var T=__ngs.r_(__ngs._b6).PositionBonus;var d=__ngs.r_(__ngs._b7).MaxLevelBonus;var G=__ngs.r_(__ngs._b8).FocusAbility;var k=__ngs.r_(__ngs._b9).EndAbility;var g=__ngs.r_(__ngs._ba).SuperiorityAbility;var N=__ngs.r_(__ngs._bb).ConvergenceAbility;var H=__ngs.r_(__ngs._bc).CriticalAttackMissile;var Q=__ngs.r_(__ngs._bd).CriticalAttackLaser;var E=__ngs.r_(__ngs._be).DoubleAttack;var p=__ngs.r_(__ngs._bf).CriticalAttackMelee;var K=__ngs.r_(__ngs._bg).MiniCritical;var c=__ngs.r_(__ngs._bh).TripleAttack;var t=__ngs.r_(__ngs._bi).SlideAbilityInOut;var C=__ngs.r_(__ngs._bj).ShowSpecialAttack;var P=__ngs.r_(__ngs._bk).PauseAnimation;var F=__ngs.r_(__ngs._bl).SlideCardsOut;var O=__ngs.r_(__ngs._bm).BattleEnergyBonus;var J=__ngs.r_(__ngs._bn).RaidBossCardsBonus;var y=__ngs.r_(__ngs._89).CardThumbnailView;M.RBBattleViewController=R.subclass({classname:"RBBattleViewController",MUSIC_KEY:"BATTLE_BACK",onBattleCompleted:function(){console.log("RBBattleViewController > onBattleCompleted > called");if(this._battleCompleted){return}this._battleCompleted=true;this._animateBgIn()},changeScreenAfterBattle:function(){console.log("RBBattleViewController > changeScreenAfterBattle > called");if(!Server.isConnectionAvailable()){l.showErrorMessages(Localization.getString("ui_pleasecheckconnection"),this.changeScreenAfterBattle.bind(this));return}Server.getBossInfo(this._bossInfo.id,true,this.receiveBossInfo.bind(this,this._bossInfo.id))},receiveBossInfo:function(X,V,W){if(V){console.log("RBBattleViewController > receiveBossInfo > ERROR : "+JSON.stringify(V));console.log("RBBattleViewController > receiveBossInfo > dump to main event screen");TFSceneDirector.showRBMain();return}console.log("RBBattleViewController > receiveBossInfo > got boss info="+W);s.playMusic();TFSceneDirector.showRBBoss(W,false,true)},initialize:function($super,W,V,X){this._bossInfo=V;this._energy=X;s.playMusic(this.MUSIC_KEY);$super();TFUserData.blockBack=true;this.createView(u,function(){this.getView().opponentHPBar.emptyBar.setColor(84/255,84/255,84/255);this.getView().opponentHPBar.fillBar.setColor(79/255,148/255,205/255);this.getView().opponentHPBar.middleBar.setColor(255/255,0/255,0/255);this.getView().playerHPBar.emptyBar.setColor(84/255,84/255,84/255);this.getView().playerHPBar.fillBar.setColor(79/255,148/255,205/255);this.getView().playerHPBar.middleBar.setColor(255/255,0/255,0/255);TFUserData._battleChanceGuid=undefined;this._bossDefinition=TFGameData.getBossDefinition(TFUserData.curEventId,this._bossInfo.definitionId);var Z={displayed:false,animated:true,timeout:300};var Y={displayed:false,animated:true,timeout:300};this.setHudDisplayData(Z,Y);this._bgAnimationDuration=300;setTimeout(this._animateBgOut.bind(this),300);this.fightAnimation=new b(this.getView());this.fightAnimation_intro=new b(this.getView());this.timerFunctions=[];this.tripleAttackNext=false;this.lastSpecial="";this._setupAllCards();Server.consumeItemsAndFightEventBoss(W,this._bossInfo.id,this._energy,this._fightResponse.bind(this,this._bossInfo.id,this._energy))}.bind(this))},_slideInBars:function(){var V=this.createAnimationQueue();V.pushAnimation(300,v.Curve.EaseIn);V.tween(v.Interpolate.scalar(0,640),function(W){if(!this){return}this.opponentHPBar.setVisible(true);this.opponentName.setVisible(true);this.playerHPBar.setVisible(true);this.playerName.setVisible(true);this.opponentHPBar.setPosition(960-W,this.opponentHPBar.getPosition().getY());this.opponentName.setPosition(660-W,this.opponentName.getPosition().getY());this.playerHPBar.setPosition(-320+W,this.playerHPBar.getPosition().getY());this.playerName.setPosition(-20+W,this.playerName.getPosition().getY())}.bind(this.getView()));V.start()},_fightResponse:function(X,af,ae,aa){this._fightResponseReceived=true;if(!ae){if(!aa){l.showAlert("ERROR","Server returned empty fight response.  Try again.","OK");this.changeScreenAfterBattle();TFAnalytics.reportGameEvent("RAIDBATTLEEND",{error:"Server returned empty fight response.  Try again."});return}console.log("RBBattleViewController > _fightResponse > Full fight data");for(var ab in aa){if(aa.hasOwnProperty(ab)){if(ab=="animations"){for(var Z in aa[ab]){console.log("   animations["+Z+"] : "+JSON.stringify(aa.animations[Z]))}}else{console.log("   "+ab+" : "+JSON.stringify(aa[ab]))}}}if((aa.success!==undefined)&&(aa.success===false)){var ac={};ac.buttons="one";ac.fontSize=36;ac.cb=this.changeScreenAfterBattle.bind(this);if(aa.error&&(aa.error.indexOf("expired")!=-1)){ac.text=Localization.getString("ui_bosshasescaped")}else{if(aa.error&&(aa.error.indexOf("already defeated")!=-1)){ac.text=Localization.getString("ui_bossalreadydefeated")}else{ac.text=Localization.getString("ui_unknowneventbossbattleerror")}}TFSceneDirector._showDialog(new q(ac));return}var V=aa.hp.enemy;if(aa.hp.enemy&&aa.hp.enemy.length>0){V=aa.hp.enemy[0]}var W=aa.hp.player;if(aa.hp.player&&aa.hp.player.length>0){W=0;for(var ab in aa.hp.player){W+=aa.hp.player[ab]}}if(this._bossInfo.type==1){var ad=false;var Y=true}else{if(this._bossInfo.type==2||this._bossInfo.type==3){var ad=true;var Y=false}}TFAnalytics.reportGameEvent("RAIDBATTLEEND",{eventid:TFUserData.curEventId,instanceid:this._bossInfo.id,instanceid1:this._bossInfo.id.slice(0,18),instanceid2:this._bossInfo.id.slice(18),bossid:this._bossInfo.definitionId,bosshp_before:V,bosshp_after:aa.bossInformation?aa.bossInformation.hp:9999999,becost:""+(aa.battleEnergyChange)*(-1),playerwins:""+aa.playerWins,isInvitee:ad,isInitiator:Y,playerHp:W,epoints:TFUserData.eventPoints});if(aa.bossInformation){if(aa.bossInformation.id!=this._bossInfo.id){TFAnalytics.reportGameEvent("RAIDBATTLEBOSSIDMISMATCH",{eventid:TFUserData.curEventId,instanceidGood1:this._bossInfo.id.slice(0,18),instanceidGood2:this._bossInfo.id.slice(18),instanceidBad1:aa.bossInformation.id.slice(0,18),instanceidBad2:aa.bossInformation.id.slice(18)})}}TFUserData.setLastBattleResult(aa);TFUserData.setBattleEnergy(TFUserData.getBattleEnergy()+aa.battleEnergyChange);if(aa.usedItems){TFUserData.decrementItems(aa.usedItems)}this.getView().skipButton.setVisible(true);console.log("RBBattleViewController > _fightResponse > Fight response OK");this._setupBattleData();this._animateInto3d();TFUserData.setLastBattleTimeStamp(Server.getTime())}else{console.log("RBBattleViewController > _fightResponse > error - checking for boss defeated");TFAnalytics.reportGameEvent("RAIDBATTLEEND",{error:"Error trying to fight boss"});Server.getBossInfo(this._bossInfo.id,true,this._checkForBossDefeated.bind(this))}},_checkForBossDefeated:function(V,X){if(V){console.log("RBBattleViewController > _checkForBossDefeated > error="+JSON.stringify(V));TFSceneDirector.onBackButton();return}if(X&&((X.bossInfo.hp==0)||(X.error&&(X.error.indexOf("already defeated")!=-1)))){var W={};W.buttons="one";W.fontSize=36;W.cb=this.changeScreenAfterBattle.bind(this);W.text=Localization.getString("ui_bossalreadydefeated");TFSceneDirector._showDialog(new q(W))}else{console.log("RBBattleViewController > _checkForBossDefeated > something went wrong");TFSceneDirector.onBackButton()}},_setupBattleData:function(){var V=TFUserData.getLastBattleResult();this._playerStartingHP=V.hp.player.slice(0);this._oppStartingHP=[this._bossDefinition.deckPower[0].hp];this._playerCurrentHP=V.hp.player.slice(0);this._oppCurrentHp=V.hp.enemy.slice(0);this._playerTotalStartingHp=this._getPlayerTotalRemainingHp();this._oppTotalStartingHp=this._bossDefinition.deckPower[0].hp;this.getView().opponentHPBar.setProgress(this._oppCurrentHp[0]/this._oppTotalStartingHp*100);this.getView().opponentHPBar.setMiddleProgress(this._oppCurrentHp[0]/this._oppTotalStartingHp*100)},_getPlayerTotalRemainingHp:function(){var V=0;for(var W in this._playerCurrentHP){V+=this._playerCurrentHP[W]}return V},_getOpponentTotalRemainingHp:function(){var V=0;for(var W in this._oppCurrentHp){V+=this._oppCurrentHp[W]}return V},_setupAllCards:function(){this.oppCards=[this.getView().boss];this.playerCards=[this.getView().stat1PlayerMain,this.getView().stat1PlayerLeft,this.getView().stat1PlayerRight,this.getView().stat2PlayerMain,this.getView().stat2PlayerLeft,this.getView().stat2PlayerRight,this.getView().stat3PlayerMain,this.getView().stat3PlayerLeft,this.getView().stat3PlayerRight];var Z="";var W=null;Z=this._bossDefinition.deckPower[0].gearId;var V=this.getView()._definitions.boss.size_x;var Y=this.getView()._definitions.boss.size_y;this.oppCards[0].cardThumbnail=new y(this,Z,V,Y,{anchor:[0.5,0.5],showSpinner:true});this.oppCards[0].addChild(this.oppCards[0].cardThumbnail);this.oppCards[0].damageLayer=new GL2.Sprite();this.oppCards[0].damageLayer.setImage("Content/Images8x/misc/1pxwhite.png",this.oppCards[0]._animation._frames[0]._size,[0.5,0.5],[0,0,1,1]);this.oppCards[0].damageLayer.setAlpha(0);this.oppCards[0].addChild(this.oppCards[0].damageLayer);this.oppCards[0].damageLayer.setColor(0,0,0);for(var X=0;X<9;X++){var Z=TFUserData.getDeckCard(Math.floor(X/3)+1,X%3,TFGameData.CARD_TYPE.TRANSFORMER).definitionId;var V=0;var Y=0;if(X%3==0){V=110;Y=143}else{V=70;Y=91}if(Z%10==3){Z=Z-1}this.playerCards[X].cardThumbnail=new y(this,Z,V,Y,{anchor:[0.5,0.5],showSpinner:true});this.playerCards[X].addChild(this.playerCards[X].cardThumbnail);this.playerCards[X].damageLayer=SpriteFactoryCache.createSpriteWithCachedAnimation("Content/Images8x/misc/1pxwhite.png",this.playerCards[X]._animation._frames[0]._size,[0.5,0.5],[0,0,1,1]);this.playerCards[X].damageLayer.setAlpha(0);this.playerCards[X].addChild(this.playerCards[X].damageLayer);this.playerCards[X].damageLayer.setColor(0,0,0)}this.getView().playerName.setText((""+TFUserData.getGamerTag()).toUpperCase());this.getView().opponentName.setText(Localization.getString(this._bossDefinition.name).toUpperCase())},_animateBgOut:function(){var V=this.createAnimationQueue();V.pushAnimation(this._bgAnimationDuration,v.Curve.EaseOut);V.tween(v.Interpolate.scalar(0,640),function(W){if(this.topBg){this.topBg.setPosition(this.topBg.getPosition().getX(),180-W)}if(this.botBg){this.botBg.setPosition(this.botBg.getPosition().getX(),760+W)}}.bind(this.getView()));V.pushCallback(function(){this._shutterOpen=true;this._slideInBars()}.bind(this));V.start()},_animateBgIn:function(){var V=this.createAnimationQueue();V.pushAnimation(this._bgAnimationDuration,v.Curve.EaseIn);V.tween(v.Interpolate.scalar(0,640),function(W){if(this.topBg){this.topBg.setPosition(this.topBg.getPosition().getX(),-460+W+1)}if(this.botBg){this.botBg.setPosition(this.botBg.getPosition().getX(),1400-W-1)}}.bind(this.getView()));V.pushAnimation(200,v.Curve.EaseIn);V.pushCallback(this.changeScreenAfterBattle.bind(this));V.start()},_animateCardBuffs:function(){var V=this.createAnimationQueue();V.pushAnimation(700,v.Curve.EaseIn);V.tween(v.Interpolate.scalar(0,800),function(W){}.bind(this.getView()));V.pushCallback(this._slideBannerOut.bind(this));V.start()},_animateInto3d:function(){this.fightAnimation_intro.addAnimation(new U(this.playerCards,this.oppCards));var Z=[];var Y=[];var aj=[];var ad=[];var aa="";for(var ae=0;ae<TFGameData._eventConfig.length;++ae){var ag=TFGameData._eventConfig[ae];if(ag.eventId==TFUserData.curEventId){aa=ag}}for(var ae=0;ae<this.playerCards.length;++ae){for(var ac=0;ac<aa.cardBonus.length;++ac){var ah=S.getCardDefinition(TFUserData.getDeckCard(Math.floor(ae/3)+1,ae%3,TFGameData.CARD_TYPE.TRANSFORMER).definitionId);if(aa.cardBonus[ac].id==ah.id){aj.push(this.playerCards[ae]);var ai={};ai.attackBonus=aa.cardBonus[ac].attackBonus;ai.cardPos=ae;ad.push(ai)}}}if(aj.length>0){this.fightAnimation_intro.addAnimation(new e(this.getView().yellowBanner,this.getView().staticTransformingText,this.getView().staticBonusText,Localization.getString("ui_eventspecial_uc"),Localization.getString("ui_bonus_uc")));var V=new J(aj,ad);this.fightAnimation_intro.addAnimation(V);console.log("RBBattleViewController > _animateInto3d > eventCardsData : "+JSON.stringify(ad))}var X=this.playerCards;this.fightAnimation_intro.addAnimation(new e(this.getView().blueBanner,this.getView().staticTransformingText,this.getView().staticBonusText,Localization.getString("ui_battlecube_uc"),Localization.getString("ui_bonus_uc")));this.fightAnimation_intro.addAnimation(new O(X,TFGameData.ENERGY_BONUS[this._energy-1]));this.fightAnimation_intro.addAnimation(new e(this.getView().pinkBanner,this.getView().staticTransformingText,this.getView().staticBonusText,Localization.getString("ui_position_uc"),Localization.getString("ui_bonus_uc")));this.fightAnimation_intro.addAnimation(new T(X));for(var ae=0;ae<this.playerCards.length;++ae){var ah=S.getCardDefinition(TFUserData.getDeckCard(Math.floor(ae/3)+1,ae%3,TFGameData.CARD_TYPE.TRANSFORMER).definitionId);if(ah.id%10==3){console.log("RBBattleViewController > _animateInto3d > Transform Bonus Card found : "+ae);this.playerCards[ae]._deckPos=ae;Z.push(this.playerCards[ae]);Y.push({definitionId:ah.id,tfBonus:ah.tfBonus,cardPos:ae})}}if(Z.length>0){this.fightAnimation_intro.addAnimation(new e(this.getView().blueBanner,this.getView().staticTransformingText,this.getView().staticBonusText,Localization.getString("ui_transscan_uc"),Localization.getString("ui_bonus_uc")));this.fightAnimation_intro.addAnimation(new z(Z,Y))}var ab=[];for(var ae=0;ae<this.playerCards.length;++ae){var af=TFUserData.getDeckCard(Math.floor(ae/3)+1,ae%3,TFGameData.CARD_TYPE.TRANSFORMER).xp;var W=I.getTrasformerLevelFromXP(af);if(S.getCardDefinition(TFUserData.getDeckCard(Math.floor(ae/3)+1,ae%3,TFGameData.CARD_TYPE.TRANSFORMER).definitionId).maxLevel<=W){ab.push(this.playerCards[ae])}}if(ab.length>0){this.fightAnimation_intro.addAnimation(new e(this.getView().yellowBanner,this.getView().staticTransformingText,this.getView().staticBonusText,Localization.getString("ui_maxlevel_uc"),Localization.getString("ui_bonus_uc")));this.fightAnimation_intro.addAnimation(new d(ab))}this.fightAnimation_intro.addAnimation(new h(this.playerCards,this.oppCards,this.getView().background));this.fightAnimation_intro.addAnimation(new D(this._animateBattle.bind(this)));this.fightAnimation_intro.executeAnimation()},_animateBattle:function(){if(!this.getView()){console.log("RBBattleViewController > _animateBattle > Screen destroyed, returning");return}this.fightAnimation.addAnimation(new P(800));for(var aq=0;aq<9;++aq){this.playerCards[aq].damageLayer.setAlpha(0.2);if(this.oppCards[aq]){this.oppCards[aq].damageLayer.setAlpha(0.2)}}var ag=5;var V=150*ag;var Y=TFUserData.getLastBattleResult();var ap=Y.hp.player.slice(0);var aw=Y.hp.enemy.slice(0);console.log("RBBattleViewController > _animateBattle > ResultData : "+JSON.stringify(Y));for(var aq in Y.animations){var ad=Y.animations[aq];console.log("RBBattleViewController > _animateBattle > doing step "+aq);console.log("RBBattleViewController > _animateBattle > Step data : "+JSON.stringify(ad));console.log("RBBattleViewController > _animateBattle > step timer function executing");for(var aj=0;aj<this.timerFunctions.length;++aj){this.timerFunctions[aj](ad)}if(ad.type=="attack"){var ai=[];var W=(ad.damagedUnit[6]-1)*3;var ac=1;if(ad.turn=="player"){ac=Math.floor(ad.attackCardId/3)+1;var ah=this.playerCards[ad.attackCardId];var aa=ah.getPosition();if(this.oppCards.length>1){var ae=[this.oppCards[W],this.oppCards[W+1],this.oppCards[W+2]]}else{var ae=[this.oppCards[W],this.oppCards[W],this.oppCards[W]]}ai=this.playerCards}else{if(ad.turn=="enemy"){ac=Math.floor(Math.random()*2.99+1);var ah=this.oppCards[ad.attackCardId];var aa=ah.getPosition();var ae=[this.playerCards[W],this.playerCards[W+1],this.playerCards[W+2]];ai=this.oppCards}}if(ad.attackTags[0]=="i_minicrit"&&this.lastSpecial!="i_minicrit"){this.lastSpecial="i_minicrit";this.fightAnimation.addAnimation(new C(this.getView().specialAttack,this.getView().specialAttack.specialAttackIcon,this.getView().specialAttack.specialAttackDescription,"Content/Images2x/UI/icon/icon_0_attack_double.png",Localization.getString("ui_minicriticalhit_uc"),ai,ah));this.fightAnimation.addAnimation(new K());var at=function(ax){if(ax.attackTags[0]!="i_minicrit"){this.fightAnimation.addAnimation(new k(ai,ah));this.lastSpecial="";this.timerFunctions.length=0}}.bind(this);this.timerFunctions.push(at)}if(ad.attackTags[0]=="i_criticalhit"){this.fightAnimation.addAnimation(new C(this.getView().specialAttack,this.getView().specialAttack.specialAttackIcon,this.getView().specialAttack.specialAttackDescription,"Content/Images2x/UI/icon/icon_0_attack_triple.png",Localization.getString("ui_criticalhit_uc"),ai,ah));this.tripleAttackNext=true;var at=function(ax){if(ax.attackTags[0]!="i_criticalhit"){this.fightAnimation.addAnimation(new k(ai,ah));this.lastSpecial="";this.timerFunctions.length=0}}.bind(this);this.timerFunctions.push(at)}if(ad.attackTags[0]=="i_doubleattack"&&this.lastSpecial!="i_doubleattack"){this.lastSpecial="i_doubleattack";this.fightAnimation.addAnimation(new C(this.getView().specialAttack,this.getView().specialAttack.specialAttackIcon,this.getView().specialAttack.specialAttackDescription,"Content/Images2x/UI/icon/icon_0_crit_mini.png",Localization.getString("ui_doubleattack_uc"),ai,ah));this.fightAnimation.addAnimation(new E());var at=function(ax){if(ax.attackTags[0]!="i_doubleattack"){this.fightAnimation.addAnimation(new k(ai,ah));this.lastSpecial="";this.timerFunctions.length=0}}.bind(this);this.timerFunctions.push(at)}if(ad.attackTags[0]=="i_tripleattack"&&this.lastSpecial!="i_tripleattack"){this.lastSpecial="i_tripleattack";this.fightAnimation.addAnimation(new C(this.getView().specialAttack,this.getView().specialAttack.specialAttackIcon,this.getView().specialAttack.specialAttackDescription,"Content/Images2x/UI/icon/icon_0_crit_hit.png",Localization.getString("ui_tripleattack_uc"),ai,ah));this.fightAnimation.addAnimation(new c());var at=function(ax){if(ax.attackTags[0]!="i_tripleattack"){this.fightAnimation.addAnimation(new k(ai,ah));this.lastSpecial="";this.timerFunctions.length=0}}.bind(this);this.timerFunctions.push(at)}var ac=Math.floor(ad.attackCardId/3)+1;if(ac==TFGameData.STAT_TYPE.MELEE){var W=(ad.damagedUnit[6]-1)*3;if(!this.tripleAttackNext){this.fightAnimation.addAnimation(new a(ah,ae))}else{this.fightAnimation.addAnimation(new p(ah,ae));this.tripleAttackNext=false}this.fightAnimation.addAnimation(new B(ae))}else{if(ac==TFGameData.STAT_TYPE.RANGE){if(!this.tripleAttackNext){this.fightAnimation.addAnimation(new L(ah,ae,true))}else{this.fightAnimation.addAnimation(new Q(ah,ae,true));this.tripleAttackNext=false}this.fightAnimation.addAnimation(new B(ae))}else{if(ac==TFGameData.STAT_TYPE.SPEED){if(!this.tripleAttackNext){this.fightAnimation.addAnimation(new r(ah,ae))}else{this.fightAnimation.addAnimation(new H(ah,ae));this.tripleAttackNext=false}this.fightAnimation.addAnimation(new B(ae))}}}if(ad.turn=="player"){var af=Math.round(this._getOpponentTotalRemainingHp()/this._oppTotalStartingHp*100);if(Math.random()>0.5&&ad.damagedDealt.length==3){var av=ad.damagedDealt[1];ad.damagedDealt[1]=ad.damagedDealt[2];ad.damagedDealt[2]=av}for(var an in ad.damagedDealt){console.log("BattleViewController > _animateBattle > j : "+an);var ao=ad.damagedDealt[an].cardPosition;var am=ad.damagedDealt[an].remainingHp;var ar=am/this._oppStartingHP[ao]*100;var au=ad.damagedDealt[an].damage;var al=this._oppCurrentHp[ao]/this._oppStartingHP[ao]*100;this._oppCurrentHp[ao]=am;this.fightAnimation.addAnimation(new x(this.oppCards[ao],ar,al,au,this.getView().opponentHPBar,af));if(an<ad.damagedDealt.length-1){this.fightAnimation.addAnimation(new P(60+80*Math.random()))}if(am<=0){this.fightAnimation.addAnimation(new o(this.oppCards[ao]))}}var X=Math.round(this._getOpponentTotalRemainingHp()/this._oppTotalStartingHp*100);this.fightAnimation.addAnimation(new A(this.getView().opponentHPBar,X,af))}else{if(ad.turn=="enemy"){var af=Math.round(this._getPlayerTotalRemainingHp()/this._playerTotalStartingHp*100);if(Math.random()>0.5&&ad.damagedDealt.length==3){var av=ad.damagedDealt[1];ad.damagedDealt[1]=ad.damagedDealt[2];ad.damagedDealt[2]=av}for(var an in ad.damagedDealt){var ao=ad.damagedDealt[an].cardPosition;var am=ad.damagedDealt[an].remainingHp;var au=ad.damagedDealt[an].damage;var ar=am/this._playerStartingHP[ao]*100;var al=this._playerCurrentHP[ao]/this._playerStartingHP[ao]*100;this._playerCurrentHP[ao]=am;this.fightAnimation.addAnimation(new x(this.playerCards[ao],ar,al,au,this.getView().playerHPBar,af));if(an<ad.damagedDealt.length-1){this.fightAnimation.addAnimation(new P(60+80*Math.random()))}if(am<=0){this.fightAnimation.addAnimation(new o(this.playerCards[ao]))}}var X=Math.round(this._getPlayerTotalRemainingHp()/this._playerTotalStartingHp*100);this.fightAnimation.addAnimation(new A(this.getView().playerHPBar,X,af))}}}else{if(ad.type=="ability"){var Z=ad.abilityCardId;if(ad.turn=="enemy"){Z+=9}var ab=this.playerCards.concat(this.oppCards);if(ad.ability=="s_focus"){console.log("RBBattleViewController > _animateBattle > Ability found, adding s_focus effect");this.fightAnimation.addAnimation(new t(this.getView().abilityIcon,this.getView().abilityDescription,"Content/Images8x/UI/icon/icon_0_focus.png",Localization.getString("ui_focusattack_uc")));this.fightAnimation.addAnimation(new G(ab,Z));var at=function(){if(ad.attackTags[0]!="s_focus"){this.fightAnimation.addAnimation(new k());this.lastSpecial="";this.timerFunctions.length=0}}.bind(this);this.timerFunctions.push(at)}else{if(ad.ability=="s_superiority"){this.fightAnimation.addAnimation(new t(this.getView().abilityIcon,this.getView().abilityDescription,"Content/Images8x/UI/icon/icon_0_superiority.png",Localization.getString("ui_superiorityattack_uc")));this.fightAnimation.addAnimation(new g(ab,Z));var at=function(){if(ad.attackTags[0]!="s_superiority"){this.fightAnimation.addAnimation(new k());this.lastSpecial="";this.timerFunctions.length=0}}.bind(this);this.timerFunctions.push(at)}else{if(ad.ability=="s_convergence"){this.fightAnimation.addAnimation(new t(this.getView().abilityIcon,this.getView().abilityDescription,"Content/Images8x/UI/icon/icon_0_convergence.png",Localization.getString("ui_convergenceattack_uc")));this.fightAnimation.addAnimation(new N(ab,Z));var at=function(){if(ad.attackTags[0]!="s_convergence"){this.fightAnimation.addAnimation(new k());this.lastSpecial="";this.timerFunctions.length=0}}.bind(this);this.timerFunctions.push(at)}}}}}}var ak=[];for(var aq=0;aq<this._playerCurrentHP.length;++aq){if(this._playerCurrentHP[aq]>0){ak.push(this.playerCards[aq])}}for(var aq=0;aq<this._oppCurrentHp.length;++aq){if(this._oppCurrentHp[aq]>0){ak.push(this.oppCards[aq])}}this.fightAnimation.addAnimation(new F(ak));this.fightAnimation.addAnimation(new D(this.onBattleCompleted.bind(this)));this.fightAnimation.executeAnimation()},onSkip:function(){TFAnalytics.reportGameEvent("RAIDBATTLESKIP");this._skipped=true;this.resetRunningAnimations();this.fightAnimation_intro.destroy();this.fightAnimation.destroy();this.onBattleCompleted()},destroy:function($super){this.fightAnimation.destroy();this.fightAnimation_intro.destroy();$super();TFUserData.blockBack=false},$preloadBattleCards:function(X){for(var W=0;W<9;W++){var Y=TFUserData.getDeckCard(Math.floor(W/3)+1,W%3,TFGameData.CARD_TYPE.TRANSFORMER).definitionId;var V=l.getCardImagePath(Y);if(!w._dynamicManifestData[n.getCorrectImagePath(V)]){console.log("BattleViewController > $preloadBattleCards > Card : "+Y+" not found, preload failed")}else{w.downloadAsset(n.getCorrectImagePath(V),function(Z){console.log("BattleViewController > $preloadBattleCards > Asset : "+Z+" ready")})}}var Y=X;var V=l.getCardImagePath(Y);if(!w._dynamicManifestData[n.getCorrectImagePath(V)]){console.log("BattleViewController > $preloadBattleCards > Card : "+Y+" not found, preload failed")}else{w.downloadAsset(n.getCorrectImagePath(V),function(Z){console.log("BattleViewController > $preloadBattleCards > Asset : "+Z+" ready")})}}})}};__ngs._5v={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var b=__ngs.r_(__ngs._n).ViewController;var e=__ngs.r_(__ngs._bo).RBBossRewardsView;var a=__ngs.r_(__ngs._bp).RBBossRewardCell;c.RBBossRewardsViewController=b.subclass({classname:"RBBossRewardsViewController",initialize:function($super,g){$super();this._eventID=TFUserData.curEventId;this._bossDef=g;this.createView(e,function(){TFSceneDirector.stretchUIElementVertically(this.getView().bgMidLeft);TFSceneDirector.stretchUIElementVertically(this.getView().bgMidRight);var k={displayed:true,animated:true,timeout:1000,mode:"button_only"};var h={displayed:false,animated:true,timeout:1000};this.setHudDisplayData(k,h)}.bind(this))},fetchListItems:function(){var n=[];var g=["participantsRewards","firstAttackerRewards","finisherRewards","mvpRewards","friendshipBonusRewards"];var l=["ui_rewardClass_participants","ui_rewardClass_firstAttacker","ui_rewardClass_finisher","ui_rewardClass_mvp","ui_rewardClass_friendship"];for(var o in g){var h=this._bossDef[g[o]];for(var m in h){var p={};p.requires=Localization.getString(l[o]);p.data=h[m];var k=new a(this,p);n.push(k)}}return n},destroy:function($super){$super()}})}};__ngs._5w={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var a=__ngs.r_(__ngs._3y).PopUpController;var c=__ngs.r_(__ngs._5k).CardSelectionViewController;b.GashaRewardViewController=c.subclass({classname:"GashaRewardViewController",initialize:function($super,n,m,l,h,g,e,k){$super(n,m,l,h,g,e,k);this._overlayView.continueButton.setVisible(true);TFSceneDirector.shiftUIElementDown(this._overlayView.continueButton);if(TFGameData._mainTutorialFlag){this._overlayView.sellButton.setVisible(false)}},setHudDisplay:function(){if(!TFGameData._mainTutorialFlag){var g={displayed:true,animated:true,timeout:1000};var e={displayed:false,animated:true,timeout:1000};this.setHudDisplayData(g,e)}},_isValidCard:function(e){return true},afterViewDisplayed:function(){console.log("GashaRewardViewController afterViewDisplayed");this.reviewPrize()},onContinue:function(){if(TFGameData._mainTutorialFlag===true||TFUserData.getTutorialState("main")=="space-bridge"){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"23_GASHAREWARDVIEWCONTINUECLICK"});TFSceneDirector.showHome()}else{TFAnalytics.reportGameEvent("GASHA",{Step:"GASHAREWARDVIEWCONTINUECLICK"});TFSceneDirector.onBackButton()}},sellCompletedCallback:function(){TFSceneDirector.onBackButton()},reviewPrize:function(){if(this._currentindex===undefined){this._currentindex=0;this._cancelRewardSequence=false;this.showTransScanMsg=false}else{this._currentindex++}if(this._currentindex>=this._cardsToShow.length||this._cancelRewardSequence){if(!this._cancelRewardSequence){this.lastDialogController.dismissDialog()}if(this._cancelRewardSequence&&!this.showTransScanMsg){for(var g=this._currentindex;g<this._cardsToShow.length;++g){if(TFUserData.isCardTransScannable(this._cardsToShow[this._currentindex])){this.showTransScanMsg=true;break}}}if(TFGameData._mainTutorialFlag==true){var p={};p.title=Localization.getString("tutorial_main_title_03");p.text=Localization.getString("tutorial_main_text_03");p.Id="tutorial_main_title_03";p.cb=function(){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"20_SPACEBRIDGERESULTTUTORIALDISMISS"})};var o=__ngs.r_(__ngs._81).TutorialBubbleView;var k=TFSceneDirector.showTutorialDialog(o,p);k.getView().bubble1.setPosition(-320,-100)}else{if(TFUserData.newCardAsReward){var q={};q.title=Localization.getString("ui_basefull_uc");q.fusionCost=Localization.getString("ui_cardasreward");q.buttons="one";q.cb=null;TFSceneDirector._showDialog(new a(q));TFUserData.newCardAsReward=false}else{if(!TFGameData._justOverflowFlag&&TFUserData.cardsLimbo&&TFUserData.cardsLimbo.length>0){var l=__ngs.r_(__ngs._87).OverLimitCardsController;TFSceneDirector._showDialog(new l());TFGameData._justOverflowFlag=true}else{if(this.showTransScanMsg){var m={};m.title=Localization.getString("ui_transscan_uc");m.fusionCost=Localization.getString("ui_transcanavailable");m.cancelButtonText=Localization.getString("ui_cancel");m.okButtonText=Localization.getString("ui_transscan");m.cb=TFSceneDirector.showTransform.bind(TFSceneDirector);TFSceneDirector._showDialog(new a(m))}}}}return}console.log("********* reviewPrize "+this._currentindex+" *********");var m={};m.usercard=this._cardsToShow[this._currentindex];m.animated=true;m.hideButtons=true;m.cbTap=function(){this._cancelRewardSequence=true;this.lastDialogController.dismissDialog();if(TFGameData._mainTutorialFlag==true){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"19_SPACEBRIDGECARDDISMISS"})}else{TFAnalytics.reportGameEvent("GASHA",{Step:"SPACEBRIDGECARDDISMISS"})}}.bind(this);var e=10;if(this._currentindex==this._cardsToShow.length-1){e=1000}m.cbNext=function(r){console.log("GashaRewardViewController > reviewPrize > cbNext called");setTimeout(this.reviewPrize.bind(this),r)}.bind(this,e);if(!this.showTransScanMsg&&TFUserData.isCardTransScannable(m.usercard)){this.showTransScanMsg=true}var n=__ngs.r_(__ngs._ad).FullScreenCardView;m.forceParallax=n.FORCE_PARALLAX_OFF;var k;var h=TFCardsManager.getCardDefinition(m.usercard.definitionId);if(h.type==TFGameData.CARD_TYPE.TRANSFORMER){k=__ngs.r_(__ngs._80).FullScreenCardController}else{k=__ngs.r_(__ngs._8a).FullScreenWeaponCardController}this.lastDialogController=new k(m,true);TFSceneDirector._showDialog(this.lastDialogController)}})}};__ngs._5x={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var b=__ngs.r_(__ngs._n).ViewController;var e=__ngs.r_(__ngs._bq).RBEpilogueView;var a=__ngs.r_(__ngs._3y).PopUpController;c.RBEpilogueViewController=b.subclass({classname:"RBEpilogueViewController",initialize:function($super,g){console.log("RBEpilogueViewController > initialize > eventId="+g);this._eventId=g;this._eventInfo=TFGameData.getEventInfo(g);$super();this.createView(e,function(){TFUserData.removeUnseenEventFinal(g);var k={displayed:false,animated:true,timeout:1000};var h={displayed:false,animated:true,timeout:1000};this.setHudDisplayData(k,h);this.getView().eventTitle.setText(Localization.getString(this._eventInfo.eventName));this.getView().eventComplete.setText(Localization.getString("ui_completed_uc"))}.bind(this))},onCollectRewards:function(g){Server.seenEventFinal(this._eventId,function(h,k){if(h){console.log("RBEpilogueViewController > onCollectRewards > error="+JSON.stringify(h));return}console.log("RBEpilogueViewController > onCollectRewards > data="+JSON.stringify(k));TFUserData.addGiftsToInbox(k.rewards);Server.getCurrentUser(function(l,m){if(!l){TFUserData.syncFrom(m);NotificationCenter.updateNotifications()}Server.getRankingByIndex(1,2,function(o,q){var n;if(!o&&q.myPosition){n=q.myPosition.position}var p={};if(n){if(TFGameData.getRewardsForEventRank(this._eventId,n)){p.text=sprintf(Localization.getString("ui_accepteventrewards_var"),n)}else{p.text=sprintf(Localization.getString("ui_accepteventrewardsnone_var"),n)}}else{p.text=Localization.getString("ui_accepteventrewardsnorank")}p.buttons="one";p.fontSize=36;p.textOffsetY=-50;p.cb=TFSceneDirector.showHome.bind(TFSceneDirector);TFSceneDirector._showDialog(new a(p))}.bind(this))}.bind(this))}.bind(this))},destroy:function($super){$super()}})}};__ngs._5y={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.RectangularPolygon=GL2.Primitive.subclass({classname:"RectangularPolygon",initialize:function(e,g,d){if(d===undefined){d=new Core.Color(0,0,0)}this._anchor=e;this._width=g[0];this._height=g[1];this._color=d;this._offset={x:-this._anchor[0]*this._width,y:-this._anchor[1]*this._height};var c=[];c.push(new GL2.Primitive.Vertex([0+this._offset.x,0+this._offset.y],[0,0],this._color));c.push(new GL2.Primitive.Vertex([0+this._offset.x,this._height+this._offset.y],[0,0],this._color));c.push(new GL2.Primitive.Vertex([this._width+this._offset.x,this._height+this._offset.y],[0,0],this._color));c.push(new GL2.Primitive.Vertex([this._width+this._offset.x,0+this._offset.y],[0,0],this._color));this.spliceVertexes.apply(this,([0,0]).concat(c));this.setType(GL2.Primitive.Type.TriangleFan)}})}};__ngs._5z={_c:null,_d:function(){var e={exports:{}};var a=e.exports;this._c=e;var g=__ngs.r_(__ngs._g).UI;var h=__ngs.r_(__ngs._s).TFUtils;var d=g.Scale.iPhone;var b=Core.Class.subclass({initialize:function(k,l){this.button=new g.Button({onClick:k.cb,style:b.getButtonStyle()});this.button.setText(Localization.getString(k.title))},$getButtonStyle:function(){if(!b._buttonStyle){b._buttonStyle=new g.Style({gradient:{outerLine:"C0FF 3.0",corners:"7",gradient:["FFF0 0.0","FFA0 1.0"],innerShadow:"8000 2.0 {0,1}",innerLine:"FF80 2.0"},pressedGradient:{outerLine:"FFCCEEFF 3.0",corners:"7",gradient:["FF80 0.0","FFC0 1.0"],innerLine:"FF0082e5 4.0"}})}return b._buttonStyle},$getLabelStyle:function(){if(!b._labelStyle){var k=Core.Capabilities.getAvailableFonts().indexOf("MarkerFelt-Thin")>=0?"MarkerFelt-Thin":"Quikhand";b._labelStyle=new g.Style({textSize:16,textGravity:[0.5,0.5],gradient:{corners:"11 11 11 11",gradient:["50FF 0.0","50FF 1.0"]},selectedGradient:{corners:"11 11 11 11",gradient:["FFFF8000 0.0","FF703300 1.0"]},selectedTextColor:"FF",textFont:k})}return b._labelStyle},addToView:function(k){k.addChild(this.button);return this},setFrame:function(m){var l=m.sliceVertical(-30,d).inset(0,2,5,2,d);m.inset(1,1,1,1,d);if(m.h>m.w){var k=Math.floor((m.h-m.w)/2);l.y-=k;m.inset(k,0)}else{m.inset(0,Math.floor((m.w-m.h)/2))}m.inset(1,1,1,1,d);this.button.setFrame(m);return this}});var c=g.View.subclass({initialize:function(m,k){this.setGradient({gradient:["FF7aa9cc 0.0","FF5c7e99 1.0"]},g.State.Normal);this.topLabel=new g.Label({gradient:{gradient:["90001d33 0.0","C0001d33 1.0"],innerShadow:"FF00 1.0 {0,1}"},textGravity:[0.5,0.5],textSize:21,text:"TF Debug Panel",textColor:"FF",textShadow:"FF00 2.0 {0,-1}"});this.addChild(this.topLabel);this.apis=[];this._minCols=k;for(var l=0;l<m.length;l++){this.apis.push(new b(m[l]).addToView(this))}},apis:null,setFrame:function($super){$super.apply(this,Array.prototype.slice.call(arguments,1));var q=new g.ViewGeometry.Rect(this.getFrame());this.topLabel.setFrame(q.sliceVertical(35,d));q.inset(10);var p=1.5*q.w/q.h;var o=this.apis.length;var k=Math.ceil(Math.sqrt(o/p));var n=Math.ceil(o/k);if(this._minCols&&(n<this._minCols)){n=this._minCols}while((k-1)*n>=o){--k}var m=q.getGrid(k,n,true);for(var l=0;l<this.apis.length;l++){this.apis[l].setFrame(m[l].inset(2))}}});a.TFDebugPanel=Core.MessageListener.singleton({classname:"TFDebugPanel",initialize:function(){var k=__ngs.r_(__ngs._3x).Social;if(k.Common.Config.getServerEnvironment()=="sandbox"){console.log("up up down down left right left right b a start");this._setup()}},_setup:function(){if(Core.Capabilities.getPlatformHW().indexOf("Simulator")!=-1){this._orientationToActivate=Device.OrientationEmitter.Orientation.Portrait}else{if(Core.Capabilities.getDeviceName().indexOf("iPad")!=-1){this._orientationToActivate=Device.OrientationEmitter.Orientation.FaceDown}else{this._orientationToActivate=Device.OrientationEmitter.Orientation.LandscapeRight}}Device.OrientationEmitter.addListener(this,this._onOrientationChange)},_onOrientationChange:function(k){if(k.type==Device.OrientationEmitter.OrientationType.Device&&k.orientation==this._orientationToActivate){this._showPanel()}},_showPanel:function(){if(this._alreadyShowing){return}this._alreadyShowing=true;var l=[{buttons:[{title:"Show FPS",cb:this._showFPS.bind(this)},{title:"Full Energy",cb:this._fullEnergy.bind(this)},{title:"Add AP,BP",cb:this._allyPoints.bind(this,100)},{title:"+5 Medals",cb:this._medals.bind(this,5)},{title:"Get 10 Cards",cb:this._getNCards.bind(this,10)},{title:"Get Toms Cards",cb:this._getTomsCards.bind(this)},{title:"Get All Cards",cb:this._getAllCards.bind(this)},{title:"Level up Card",cb:this._levelUpCard.bind(this)},{title:"Max Level Card",cb:this._maxLevelCard.bind(this)},{title:"Steal Monies",cb:this._getCurrency.bind(this)},{title:"Reset Account",cb:this._resetAccount.bind(this)},{title:"Build #",cb:this._getBuildHash.bind(this)},{title:"Toggle blank locale",cb:this._toggleBlankLocale.bind(this)},{title:"Toggle SFX",cb:this._toggleSFX.bind(this)},{title:"Toggle Music",cb:this._toggleMusic.bind(this)},{title:"Force Update",cb:this._forceUpdate.bind(this)},{title:"Reset Intro Video",cb:this._resetIntro.bind(this)}]},{minCols:4,buttons:[{title:"",cb:this._doNothing.bind(this)},{title:"Level +1",cb:this._levelUp.bind(this,1)},{title:"Level +10",cb:this._levelUp.bind(this,10)},{title:"Level +100",cb:this._levelUp.bind(this,100)},{title:"Level Max",cb:this._levelUp.bind(this,99999)},{title:"Level -1",cb:this._levelDown.bind(this,1)},{title:"Level -10",cb:this._levelDown.bind(this,10)},{title:"Level -100",cb:this._levelDown.bind(this,100)},{title:"Level Min",cb:this._xpChange.bind(this,-TFUserData.getTotalXp()+1)},{title:"XP +1",cb:this._xpChange.bind(this,1)},{title:"XP +10",cb:this._xpChange.bind(this,10)},{title:"XP +100",cb:this._xpChange.bind(this,100)},{title:"XP +1000",cb:this._xpChange.bind(this,1000)},{title:"XP -1",cb:this._xpChange.bind(this,-1)},{title:"XP -10",cb:this._xpChange.bind(this,-10)},{title:"XP -100",cb:this._xpChange.bind(this,-100)},{title:"XP -1000",cb:this._xpChange.bind(this,-1000)}]}];this._bSet=[];for(var k=0;k<l.length;k++){l[k].buttons.splice(0,0,{title:"Reload",cb:this._reload.bind(this)});l[k].buttons.splice(0,0,{title:"Close",cb:this._close.bind(this)});if(k!==0){l[k].buttons.splice(0,0,{title:"<--",cb:this._changePage.bind(this,k-1)})}if(k!=(l.length-1)){l[k].buttons.push({title:"-->",cb:this._changePage.bind(this,k+1)})}var m=new c(l[k].buttons,l[k].minCols);m.setFrame(g.Window.getFrame());this._bSet.push(m)}this._curBSet=this._bSet[0];g.Window.document.addChild(this._curBSet)},_doNothing:function(){},_forceUpdate:function(){TFAppDelegate.triggerConfigUpdate();this._close()},_changePage:function(k){if(this._curBSet){this._curBSet.removeFromParent()}this._curBSet=this._bSet[k];g.Window.document.addChild(this._curBSet)},_reload:function(){h.reload();this._close()},_resetIntro:function(){Storage.FileSystem.deleteFile("5edb0994d60e3667b8bb2d14de3593cb",{},function(k){});h.createToast("Intro video will be played on next restart.")},_toggleBlankLocale:function(){if(!this._activeLocale){this._activeLocale="blank"}else{if(this._activeLocale=="blank"){this._activeLocale="en"}else{this._activeLocale="blank"}}Core.Localization.setLanguage(this._activeLocale);this._close()},_close:function(){if(this._curBSet){this._curBSet.removeFromParent()}for(var k in this._bSet){this._bSet[k].destroy()}this._bSet=undefined;this._alreadyShowing=false;if(TFSceneDirector.getTopHudViewController()){TFSceneDirector.getTopHudViewController().update()}},_showFPS:function(){h.showFPS();this._close()},_fullEnergy:function(){Server._getRemoteObject().invoke("/objects/user","debugResetEnergy",[],function(k,l){if(l){TFUserData.setExploreEnergy(TFUserData.maxExploreEnergy);TFUserData.setBattleEnergy(TFUserData.maxBattleEnergy);h.createToast("Full Energy")}});this._close()},_allyPoints:function(k){if(k===undefined){k=300}Server._getRemoteObject().invoke("/objects/user","addGasha",k,function(l,m){if(m){h.createToast(" "+k+" Ally points added")}});Server._getRemoteObject().invoke("/objects/user","increaseBattlePoints",k,function(l,m){if(m){h.createToast(" "+k+" Battle points added")}});Server._getRemoteObject().invoke("/objects/user","increaseSocialPoints",k,function(l,m){if(m){h.createToast(" "+k+" Social points added")}});this._close()},_medals:function(l){for(var k in TFGameData._medalsJSON){Server._getRemoteObject().invoke("/objects/user","addMedals",[TFGameData._medalsJSON[k].id,l],function(o,m,n){if(n){TFUserData.addMedals(o,l);h.createToast("Medals added")}}.bind(this,TFGameData._medalsJSON[k].id))}this._close()},_getNCards:function(n){var k=[];for(var l in TFGameData._cardsJSON){k.push(TFGameData._cardsJSON[l].id)}var m=[];for(var l=0;l<n;l++){m.push(k[Math.floor(Math.random()*k.length)])}console.log("TFDebugPanel > _getNCards > Awarding "+n+" cards: "+JSON.stringify(m));Server._getRemoteObject().invoke("/objects/user","debugAwardCards",[m],function(o,p){if(p){h.createToast("Cards added. Reload required.")}});this._close()},_getSuperRareCards:function(){Server._getRemoteObject().invoke("/objects/user","debugAwardCards",[[11000831,11000832,11000833,12000841,12000842,12000843,11000851,11000852,11000853,12000861,12000862,12000863,11000871,11000872,11000873,12000881,12000882,12000883,11000891,11000892,11000893,12000901,12000902,12000903,11000911,11000912,11000913,12000921,12000922,12000923,11000931,11000932,11000933,12000941,12000942,12000943,11000951,11000952,11000953,12000961,12000962,12000963,11000971,11000972,11000973,12000981,12000982,12000983,11000991,11000992,11000993,12001001,12001002,12001003]],function(k,l){if(l){h.createToast("New card added")}});this._close()},_levelUpCard:function(){var m=TFCardsManager.getCardLevel(TFUserData._selectedFullScreenCard);var k=TFCardsManager.getCardDefinition(TFUserData._selectedFullScreenCard.definitionId);var l=TFCardsManager._getXPForLevel(m+1,k.type);Server._getRemoteObject().invoke("/Debug/Cards/SetExperience",undefined,{cardId:TFUserData._selectedFullScreenCard.id,newXp:l},function(n,o){if(o){h.createToast("Card level increased");TFUserData._selectedFullScreenCard.xp=l}}.bind(this));this._close()},_maxLevelCard:function(){if(TFUserData._selectedFullScreenCard){var k=TFCardsManager.getCardDefinition(TFUserData._selectedFullScreenCard.definitionId);var l=TFCardsManager._getXPForLevel(k.maxLevel,k.type);Server._getRemoteObject().invoke("/Debug/Cards/SetExperience",undefined,{cardId:TFUserData._selectedFullScreenCard.id,newXp:l},function(m,n){if(n){h.createToast("Card level maxed");TFUserData._selectedFullScreenCard.xp=l}});this._close()}},_getAllCards:function(){var k=[];for(var l in TFGameData._cardsJSON){k.push(TFGameData._cardsJSON[l].id)}Server._getRemoteObject().invoke("/objects/user","debugAwardCards",[k],function(m,n){if(n){h.createToast("Cards added. Restarting.");Core.LocalGameList.runUpdatedGame(Core.Capabilities.getUrl())}});this._close()},_getTomsCards:function(){Server._getRemoteObject().invoke("/objects/user","debugAwardCards",[[11400831,11400832,11400951,11400952,11400971,12400981,12400901,11400891,12400941,11400851,11400852,21400063,22400066,21400067,22400070,21400071,21400073,21400079,22400080,21300049]],function(k,l){if(l){h.createToast("Cards added. Restarting.");Core.LocalGameList.runUpdatedGame(Core.Capabilities.getUrl())}});this._close()},_getCurrency:function(){Server._getRemoteObject().invoke("/objects/user","debugAddCurrency",99999,function(k,l){if(l){h.createToast("Monies stolen successfully")}});this._close()},_resetAccount:function(){Storage.FileSystem.deleteFile("5edb0994d60e3667b8bb2d14de3593cb",{},function(k){});Server._getRemoteObject().invoke("/objects/user","remove",[],function(k,l){if(k&&!l){h.createToast("Account reset. Please wait till we reload...");h.reload()}}.bind(this));Server._getRemoteObject().invoke("/objects/user","remove",[],function(k,l){if(k&&!l){h.createToast("Account reset. Please wait till we reload...");h.reload()}}.bind(this));this._close()},_getBuildHash:function(){h.createToast(" "+Core.Capabilities.getAppReleaseVersion());this._close()},_toggleSFX:function(){var k=__ngs.r_(__ngs._48).TFSoundManager;k.setSoundsEnabled(!k.soundEnabled);h.createToast(k.soundEnabled?"SFX on":"SFX off");this._close()},_toggleMusic:function(){var k=__ngs.r_(__ngs._48).TFSoundManager;k.setMusicEnabled(!k.musicEnabled);h.createToast(k.musicEnabled?"Music on":"Music off");this._close()},_levelUp:function(o){var k=TFUserData.getLevel();var n=undefined;for(var q=k+o;q>k;q--){if(TFGameData._levelsJSON[""+q]){n=q;break}}if(n){h.createToast("Working...");var l=TFUserData.getTotalXp();var p=TFGameData._levelsJSON[""+n].xpCumulative;var m=p-l;Server._getRemoteObject().invoke("/objects/user","increaseExperience",[m],function(r,s){if(s){h.createToast("Level set to "+n);TFUserData.setTotalXp(s.xp,true)}}.bind(this))}else{h.createToast("Already at max level")}},_levelDown:function(o){var k=TFUserData.getLevel();if(k==1){h.createToast("Already at min level")}else{if(o<=0){h.createToast("Improper level amount")}else{var n=undefined;for(var q=k-o;q<k;q++){if(TFGameData._levelsJSON[""+q]){n=q;break}}if(n){h.createToast("Working...");var l=TFUserData.getTotalXp();var p=TFGameData._levelsJSON[""+n].xpCumulative;var m=p-l;Server._getRemoteObject().invoke("/objects/user","increaseExperience",[m],function(r,s){if(s){h.createToast("Level set to "+n);TFUserData.setTotalXp(s.xp,true)}}.bind(this))}else{h.createToast("Already at min level")}}}},_xpChange:function(k){if((TFUserData.getTotalXp()+k)>=1){h.createToast("Working...");Server._getRemoteObject().invoke("/objects/user","increaseExperience",[k],function(l,m){if(m){h.createToast("XP set to "+m.xp);TFUserData.setTotalXp(m.xp,true)}}.bind(this))}else{h.createToast("Already at min XP")}}})}};__ngs._60={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.TFImageCache=Core.Class.singleton({classname:"TFImageCache",initialize:function(){this._staticTextureCache={};this._thumbTextureCache={};this._thumbTextureCacheLRU=[];this._thumbTextureCacheMax=40;this._thumbsLoading={};this._fontTextureCache=[];if(Core.Capabilities.getDeviceName()=="iPad1,1"){this._lowEndDevice=true}else{if(Core.Capabilities.getDeviceName()=="iPod3,1"){this._lowEndDevice=true}else{if(Core.Capabilities.getDeviceName()=="iPod4,1"){this._lowEndDevice=true}}}if(this._lowEndDevice){this._thumbTextureCacheMax=this._thumbTextureCacheMax*0.25}if(!this._lowEndDevice){var d=__ngs.r_(__ngs._7u).GLText;for(var c=0;c<d._optimalFontSizes.length;c++){this.addFontToCache("Content/Fonts/SFElectrotome.ttf",d._optimalFontSizes[c]);this.addFontToCache("Content/Fonts/TransformersMovie.ttf",d._optimalFontSizes[c]);this.addFontToCache("Content/Fonts/text.otf",d._optimalFontSizes[c])}}},addFontToCache:function(e,c){console.log("TFImageCache : Trying to load "+e+" at fontsize of "+c);var d=new GL2.Font(e,{location:GL2.Font.FontLocation.Manifest,size:c,readFontAsync:true},function(h,g){if(h){console.log("TFImageCache : Unable to read font family file: "+h.description)}else{console.log("TFImageCache : The font family "+g.getFontFamily()+" file was read at fontsize of "+g.getFontSize())}});this._fontTextureCache.push(d)},addTextureToCache:function(d,c){if(true){if(this._lowEndDevice){if(c){c()}return}}if(Core.Capabilities.getPlatformOS()=="Android"){if(c){c()}return}if(!this._staticTextureCache){console.log("WARNING: Image cache not initialized before calling addTextureToCache");if(c){c()}return}var h;var g=(d.indexOf("/cardthumbnails/")!=-1)&&(d.indexOf("thumbnail.")!=-1);var e;if(!this._staticTextureCache[d]&&!this._thumbTextureCache[d]){e=new GL2.Texture(d,{readImageAsync:true},this.textureLoaded.bind(this,d));if(g){console.log("Adding texture '"+d+"' to the card thumbnail texture cache");this._thumbTextureCache[d]=e;this._thumbsLoading[d]=[];if(c){this._thumbsLoading[d].push(c)}}else{console.log("Adding texture '"+d+"' to the texture cache");this._staticTextureCache[d]=e}}else{if(this._thumbsLoading[d]){if(c){this._thumbsLoading[d].push(c)}}else{if(c){c()}}}if(g){for(h=0;h<this._thumbTextureCacheLRU.length;h++){if(this._thumbTextureCacheLRU[h]==d){break}}if((h>=this._thumbTextureCacheLRU.length)&&(this._thumbTextureCacheLRU.length>=this._thumbTextureCacheMax)){console.log("Removing texture '"+this._thumbTextureCacheLRU[0]+"' from the card thumbnail texture cache");e=this._thumbTextureCache[this._thumbTextureCacheLRU[0]];e.destroy();this._thumbTextureCache[this._thumbTextureCacheLRU[0]]=undefined;this._thumbTextureCacheLRU.splice(0,1)}else{if(h<this._thumbTextureCacheLRU.length){this._thumbTextureCacheLRU.splice(h,1)}}this._thumbTextureCacheLRU.push(d)}},textureLoaded:function(d){var c;console.log("Texture '"+d+"' loaded");if(this._thumbsLoading[d]){while(this._thumbsLoading[d].length>0){c=this._thumbsLoading[d].pop();c()}}this._thumbsLoading[d]=undefined},dumpImageCache:function(){if(Core.Capabilities.getPlatformOS()=="Android"){return}if(!this._staticTextureCache){console.log("WARNING: Image cache not initialized before calling dumpImageCache");return}console.log("========================");console.log("CARD THUMBNAIL CACHE LRU");console.log("------------------------");for(i=0;i<this._thumbTextureCacheLRU.length;i++){console.log(this._thumbTextureCacheLRU[i])}console.log("========================");console.log("CARD THUMBNAIL CACHE");console.log("------------------------");for(i in this._thumbTextureCache){if(this._thumbTextureCache[i]){console.log(i)}}console.log("========================")}})}};__ngs._61={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=__ngs.r_(__ngs._3x).Social;a.TFEventManager=Core.Class.singleton({classname:"TFEventManager",CHECK_PERIOD:1000,initialize:function(){this._checkForEvent()},_checkForEvent:function(){if(TFGameData.isReady()){this.prevEvent=this.runningEvent;this.runningEvent=TFGameData.getRunningEvent();if(this.runningEvent!==this.prevEvent){if(this.prevEvent){if(TFSceneDirector._currentViewController&&TFSceneDirector._currentViewController.eventEnded){TFSceneDirector._currentViewController.eventEnded(this.prevEvent);TFGameData.eventEnded=this.prevEvent}}if(this.runningEvent){if(TFSceneDirector._currentViewController&&TFSceneDirector._currentViewController.eventStarted){TFSceneDirector._currentViewController.eventStarted(this.runningEvent);TFGameData.eventStarted=this.runningEvent}}}var g=Server.getServerTime();var e;if(this.runningEvent){e=new Date(this.runningEvent.expirationTime)-g}else{var d=TFGameData.getNextEvent();if(d){e=new Date(d.startTime)-g}if(false){if(TFUtils.onDev()){e=1}}}if(e){e+=1000;if(false){if(TFUtils.onDev()){e=10*1000}}}setTimeout(this._checkForEvent.bind(this),3000)}else{setTimeout(this._checkForEvent.bind(this),1000)}},resync:function(){},eventRunning:function(d){if(this.runningEvent&&(this.runningEvent.eventId==d)){return true}return false},cardBonusInRunningEvent:function(g){var e=this.runningEvent;if(e&&e.cardBonus){for(var d in e.cardBonus){if(e.cardBonus[d].id==g){return e.cardBonus[d]}}}},eventVisible:function(){if(this.runningEvent){if(this.eventHidden(this.runningEvent.eventId)){return false}return true}return false},eventHidden:function(d){if(TFUserData.enableEvent===false){return true}var e=TFGameData.getEventInfo(d);if(e.eventType=="raidBoss"){return(e.globalEncounterChance==0)}return false},destroy:function(){}})}};__ngs._62={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var b=__ngs.r_(__ngs._f).GL2;a.TFParticleManager=Core.Class.singleton({classname:"TFParticleManager",initialize:function(){this._emitters=[];this._particleData={exhaust:__ngs.r_(__ngs._br),tf_smoke:__ngs.r_(__ngs._bs),tf_explosion:__ngs.r_(__ngs._bt),powerup:__ngs.r_(__ngs._bu),red_laser:__ngs.r_(__ngs._bv),purple_laser:__ngs.r_(__ngs._bw),missile:__ngs.r_(__ngs._bx),missileTrail:__ngs.r_(__ngs._by),missileExplosion:__ngs.r_(__ngs._bz),purple_explosion:__ngs.r_(__ngs._c0),red_explosion:__ngs.r_(__ngs._c1),sword_slash:__ngs.r_(__ngs._c2),swordSlashSparks:__ngs.r_(__ngs._c3),position_bonus_x2:__ngs.r_(__ngs._c4),tf_contrail:__ngs.r_(__ngs._c5),position_bonus_x3:__ngs.r_(__ngs._c6),sparkle:__ngs.r_(__ngs._c7),maxLevel:__ngs.r_(__ngs._c8),powerupFinish:__ngs.r_(__ngs._c9),"battleEnergyBonus1.2":__ngs.r_(__ngs._ca),battleEnergyBonus3:__ngs.r_(__ngs._cb),battleEnergyBonus5:__ngs.r_(__ngs._cc),eventCardBonus:__ngs.r_(__ngs._cd),fightBGbase:__ngs.r_(__ngs._ce),fightBG1:__ngs.r_(__ngs._cf),fightBG2:__ngs.r_(__ngs._cg),fightBG3:__ngs.r_(__ngs._ch),fightBG4:__ngs.r_(__ngs._ci),fightBG5:__ngs.r_(__ngs._cj),fightBG6:__ngs.r_(__ngs._ck),scanFog:__ngs.r_(__ngs._cl),scanLaser:__ngs.r_(__ngs._cm),scanLine:__ngs.r_(__ngs._cn),cardFusionCenter:__ngs.r_(__ngs._co),cardFusion:__ngs.r_(__ngs._cp)};b.Emitter.prototype.oldDestroy=b.Emitter.prototype.destroy;b.Emitter.prototype.destroy=function(){var e=Array.prototype.slice.call(arguments);var d=__ngs.r_(__ngs._62).TFParticleManager;d.unregister(this);this.oldDestroy.apply(this,e)}},applicationWillTerminate:function(){},applicationWillResignActive:function(){},applicationDidBecomeActive:function(){for(var d in this._emitters){var e=this._emitters[d];this.reinitializeEmitterData(e)}},getParticleJSON:function(e){if(!this._particleData[e]){console.log("Could not find particle json for key : "+e);return}var d=__ngs.r_(__ngs._4a).TFImageManager;return d.patchParticleJSON(this._particleData[e])},reinitializeEmitterData:function(e){var d=e.data;if(d){d.initFromData(this.getParticleJSON(e.name),b.EmitterData.DataFormat.GravityEmitterData,function(g,h){})}},getEmitterData:function(d){var e=new b.EmitterData();e.initFromData(this.getParticleJSON(d),b.EmitterData.DataFormat.GravityEmitterData,function(g,h){});return e},createEmitter:function(d,e){var g=new b.Emitter();g.name=d;if(!e){g.data=this.getEmitterData(d)}else{g.data=e}g.setData(g.data);this._emitters.push(g);return g},unregister:function(e){var d=this._emitters.indexOf(e);if(d>=0){this._emitters.splice(d,1);return true}return false},destroy:function(){}})}};__ngs._63={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.TFFormulas=Core.Class.singleton({classname:"TFFormulas",initialize:function(){console.log("TFFormulas.initialize called.");this._transformerXPprogresion=this._createXPTransformerlist();this._weaponXPprogresion=this._createXPWeaponlist()},destroy:function(){},_createXPTransformerlist:function(){var m=[];var d;var c=TFGameData._levelsGear;if(c){for(d in c){m.push(c[d])}}else{throw"No gear level data";var h=2012.411537/59;var k=4339.975948;var g=0;var l=0;var e=h;for(d=1;d<101;d++){if(d==1){e=0}if(d>1){e=h}if(d==61){g=k}else{g=g+e}l=Math.ceil(l+g);m.push(l)}}return m},_createXPWeaponlist:function(){var d=[];var g;var c=TFGameData._levelsPilot;if(c){for(g in c){d.push(c[g])}}else{throw"No pilot level data";var e=10;var k=0;var n=0;var m=0;var l=0;var h=e;for(g=1;g<17;g++){if(g==1){k=0}if(g==2){k=10}if(g==3){m=10;n=20;k=20}if(g>3){k=m+n;m=n;n=k}l=Math.ceil(l+k);d.push(l)}}return d},getStatusForLevel:function(e,c){var m=e.maxLevel;var n=e.statusMax;var h=e.statusInit;if(c==1){return{status1:h.status1,status2:h.status2,status3:h.status3}}if(c==m){return{status1:n.status1,status2:n.status2,status3:n.status3}}var d={status1:0,status2:0,status3:0};var g=c/m;var k={early:0.4,linear:0,late:-0.4};for(var o in d){var l=(o=="status1")?k.early:((o=="status2")?k.linear:k.late);d[o]=h[o]+((n[o]-h[o])*g*(g+(1-l)*(1-g)));if(e.type==TFGameData.CARD_TYPE.TRANSFORMER){d[o]=Math.floor(d[o]);if(e.event_bonus&&(e.event_bonus>0)){d[o]=d[o]*e.event_bonus}}}return d},getHpAttack:function(e,k,c,m){var h=0;var l=0;var d=0;var g=this.getUnitParams(e,k);if(m===0){multiplier=3}else{multiplier=2}h=Math.floor(g.status1)*multiplier;l=Math.floor(g.status2)*multiplier;d=Math.floor(g.status3);return{hp:h,attack:l,defense:d}},power:function(c){return Math.sqrt(c.attack*9+c.hp*2+c.defense*13)},getUnitParams:function(c,d){return{status1:(c.status1*d.status1),status2:(c.status2*d.status2),status3:(c.status3*d.status3)}},getActivatedParams:function(g,e){var d={status1:g.status1,status2:g.status2,status3:g.status3};for(var c in e){d.status1+=e[c]["status1"];d.status2+=e[c]["status2"];d.status3+=e[c]["status3"]}return d},getTrasformerLevelFromXP:function(c){return this.binarySearch(c,this._transformerXPprogresion)+1},getWeaponLevelFromXP:function(c){return this.binarySearch(c,this._weaponXPprogresion)+1},getTrasformerXPFromLevel:function(c){if(c-1<0||c-1>this._transformerXPprogresion.length){return -1}else{return this._transformerXPprogresion[c-1]}},getWeaponXPFromLevel:function(c){if(c-1<0||c-1>this._weaponXPprogresion.length){return -1}else{return this._weaponXPprogresion[c-1]}},binarySearch:function(h,d){var c=0;var g=d.length-1;var e;while(c<=g){e=Math.floor((c+g)/2);if(d[e]==h){return e}if(d[e]>h){g=e-1}if(d[e]<h){c=e+1}}return g}})}};__ngs._64={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var d=__ngs.r_(__ngs._7l).DialogController;var c=__ngs.r_(__ngs._cq).RBBossRewardsView;a.RBBossRewardsController=d.subclass({classname:"RBBossRewardsController",initialize:function($super,o,e){$super(LevelUpView,e);this._otherData=o;this._callback=null;if(e){this.getView().showShade()}var g=__ngs.r_(__ngs._cr).RBBossRewardsEntryView;this._curY=this.getView()._definitions.bossDefeatedStatic2.pos_y+this.getView()._definitions.bossDefeatedStatic2.size_y;for(var n in this._otherData.rewardClasses){var k=this._otherData.rewardClasses[n];var l=k["class"];for(var m in k.rewards){var h=k.rewards[m];if(h.amount>0){h.className=l;var p=new g(this,h);p.addLoadDoneCallback(function(q){q.setPosition(this.getView()._definitions.bossDefeatedStatic2.pos_x,this._curY);this._curY+=q._definitions.icon.size_y;this.getView().addChild(q)}.bind(this,p));l=undefined}}}}})}};__ngs._65={_c:null,_d:function(){var c={exports:{}};var a=c.exports;this._c=c;var e=__ngs.r_(__ngs._7l).DialogController;var d=__ngs.r_(__ngs._cs).RBEventPointRewardsView;var b=__ngs.r_(__ngs._cr).RBBossRewardsEntryView;a.RBEventPointRewardsController=e.subclass({classname:"RBEventPointRewardsController",initialize:function($super,l,k){this._destroyCB=null;if(l&&l.cbDismiss){this._dismissCB=l.cbDismiss}if(k){this.getView().showShade()}this._otherData={};if(l){this._otherData=l}$super(d);console.log("DialogViewController > createView > RBEventPointRewardsDialogView > otherData="+JSON.stringify(this._otherData));if(this._otherData.eventPoints&&this._otherData.eventPointsTotal){this.getView().eventPointsStatic2.setText(sprintf(Localization.getString("ui_eventPointsRewards2"),""+this._otherData.eventPoints,""+this._otherData.eventPointsTotal))}else{this.getView().eventPointsStatic2.setText(Localization.getString("ui_eventPointsRewards2unknown"))}if(this._otherData.rewardClasses&&(this._otherData.rewardClasses.length>0)){this.getView().eventPointsStatic3.setText(sprintf(Localization.getString("ui_eventPointsRewards3a"),""+this._otherData.eventPointsLevel));this._curY=this.getView()._definitions.eventPointsStatic3.pos_y+this.getView()._definitions.eventPointsStatic3.size_y;for(var h in this._otherData.rewardClasses){var o=this._otherData.rewardClasses[h];console.log("DialogViewController > createView > RBBossRewardsDialogView > rewardClass="+JSON.stringify(o));for(var g in o.rewards){var n=o.rewards[g];if(n.amount>0){console.log("DialogViewController > createView > RBBossRewardsDialogView > reward="+JSON.stringify(n));var m=new b(this,n);m.addLoadDoneCallback(function(p){p.setPosition(this.getView()._definitions.eventPointsStatic3.pos_x,this._curY);this._curY+=p._definitions.icon.size_y;this.getView().addChild(p)}.bind(this,m))}}}}else{if(this._otherData.eventPointsNext){this.getView().eventPointsStatic3.setText(sprintf(Localization.getString("ui_eventPointsRewards3b"),""+this._otherData.eventPointsNext))}else{this.getView().eventPointsStatic3.setText(Localization.getString("ui_eventPointsRewards3unknown"))}}},dismissDialog:function($super){$super()},onOk:function(){if(this._okCB){console.log("RBEventPointRewardsController > onOK > Invoking _okCB");this._okCB()}else{console.log("RBEventPointRewardsController > onOK > _okCB undefined")}this.dismissDialog()},onDismiss:function(g){if(TFGameData._mainTutorialFlag==true&&g.info&&g.info.buttontype=="cancel"){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"POPUPCANCELBUTTON"})}if(this._destroyCB){console.log("RBEventPointRewardsController > onDismiss > invoking destroy CB");this._destroyCB()}else{console.log("RBEventPointRewardsController > onDismiss > _dismissCB undefined")}this.dismissDialog()}})}};__ngs._66={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var b=__ngs.r_(__ngs._ct).FriendRequestNotification;var e=__ngs.r_(__ngs._cu).CheerNotification;var g=__ngs.r_(__ngs._cv).FreePodNotification;var a=__ngs.r_(__ngs._cw).RewardsNotification;c.NotificationFactory=Core.Class.subclass({classname:"NotificationFactory",NotificationTypes:{FRIEND_REQUEST:0,CHEER:1,FREE_POD:2,REWARD:3},initialize:function(){},getClass:function(h){switch(h){case this.NotificationTypes.FRIEND_REQUEST:return b;case this.NotificationTypes.CHEER:return e;case this.NotificationTypes.FREE_POD:return g;case this.NotificationTypes.REWARD:return a}},createNotification:function(h){switch(h){case this.NotificationTypes.FRIEND_REQUEST:return new b();case this.NotificationTypes.CHEER:return new e();case this.NotificationTypes.FREE_POD:return new g();case this.NotificationTypes.REWARD:return a}}})}};__ngs._67={_c:null,_d:function(){var c={exports:{}};var d=c.exports;this._c=c;var g=__ngs.r_(__ngs._5).Core;var b=__ngs.r_(__ngs._4).Device;var m=__ngs.r_(__ngs._3).LocalGameList;var e=__ngs.r_(__ngs._13).XHR;var l=__ngs.r_(__ngs._14).Util;var a=__ngs.r_(__ngs._15).DownloadFile;var h=__ngs.r_(__ngs._d).FileSystem;var k=__ngs.r_(__ngs._cx).Manifest;d.DownloadFileSet=g.MessageListener.subclass({classname:"DownloadFileSet",WRITE_COOLDOWN:3000,MAX_CONCURRENT_REQUESTS:3,initialize:function(){this.mCompletedPaths={};this.mCompletionCallbacks={};this.mConnections=[];this.mPendingItems=[];this.mActiveRequests=[];this._reset()},_sortPendingItems:function(){var o;var n;this.mPendingItems.sort(function(q,p){o=(q.priority!==undefined)?q.priority:0;n=(p.priority!==undefined)?p.priority:0;return n-o});console.log("DownloadFileSet > _sortPendingItems > this.mPendingItems : "+JSON.stringify(this.mPendingItems))},_clearConnections:function(){for(var n in this.mConnections){if(!this.mConnections.hasOwnProperty(n)){continue}this.mConnections[n].abort()}this.mConnections.length=0},_reset:function(){this.mConcurrentRequests=this.MAX_CONCURRENT_REQUESTS;this.mManifest=null;this.mRemoteUrl=null;this.mLocalPath=null;this.mLocalRoot=null;this.mLocalText=null;this.mRemoteText=null;this.mProgressCb=function(){};this.mDoneCb=function(){};this.mPaused=false;this.mValid=false;this._clearConnections();this.mPendingItems.length=0;this.mCompleteBytes=0;this.mTotalBytes=0;this.mSpaceNeeded=0;this.mDownloadArchives=true;this.mActiveRequests.length=0;this.mRetrySchedule=l.RetrySchedule(50,2000);this.mManifestRetrySchedule=this.mRetrySchedule.slice(0);if(this._statusListener){this._statusListener.destroy();this._statusListener=null}this.mLastManifestWrite=0;this.mCheckUpdateOnly=false;this.mCheckUpdateCallback=null;this._priorityDownloadOnly=true},_ensureTrailingSlashes:function(n,p,o){this.mRemoteUrl=n.match(/.*\/$/)?n:n+"/";this.mLocalRoot=(p.match(/.*\/$/)||(!p))?p:p+"/";this._secureContentUrl=((!o)||o.match(/.*\/$/))?o:o+"/"},_readLocalManifest:function(){h.readFile(this.mLocalPath,{},this._onReadLocalManifest.bind(this))},_setRemotePath:function(n){if(this._secureContentUrl){this.mRemotePath=this._secureContentUrl+n}else{this.mRemotePath=this.mRemoteUrl+n}},_parseManifestNames:function(n){if(typeof n==="string"){var o={};o[n]=n;n=o}return n},_notifyFileReady:function(p){if(this.mCompletedPaths[p]===undefined){this.mCompletedPaths[p]=true}var o=this.mCompletionCallbacks[p];if(o){console.log("DownloadFileSet > _notifyFileReady >",p);for(var n=0;n<o.length;n++){o[n](p)}o.length=0;delete this.mCompletionCallbacks[p]}this._writeManifest(null,false)},onNotifyFileReady:function(n,o){if(typeof o!="function"){return}if(this.mCompletedPaths[n]!==undefined){console.log("DownloadFileSet > onNotifyFileReady > file already on disk:",n);o(n)}else{if(this.mCompletionCallbacks[n]===undefined){this.mCompletionCallbacks[n]=[]}this.mCompletionCallbacks[n].push(o);this._incPriorities(n,this.mPendingItems,1);this._incPriorities(n,this.mActiveRequests,1)}},increaseAssetPriority:function(o,n){this._incPriorities(o,this.mPendingItems,n);this._incPriorities(o,this.mActiveRequests,n)},_incPriorities:function(s,n,q){for(var p=0;p<n.length;p++){var r=n[p];if(r.files){for(var o=0;o<r.files.length;o++){if(r.files[o].name==s){if(r.priority==undefined){r.priority=0}r.priority+=q;console.log("DownloadFileSet > onNotifyFileReady > boosting priority to",r.priority,"for",s,"--",r.name);if(n==this.mPendingItems){this._sortPendingItems()}return}}}else{if(r.name==s){if(r.priority==undefined){r.priority=0}r.priority+=q;if(n==this.mPendingItems){this._sortPendingItems()}break}}}},start:function(o,r,p,n,v,q,s){this.mCheckUpdateOnly=false;p=this._parseManifestNames(p);var w=Object.keys(p)[0];var x=p[w];console.log("DownloadFileSet.start(",o,r,x,")");if(!o||!r||o==""||r==""){throw new Error("invalid arguments: "+JSON.stringify(arguments))}this.mManifest=new k();var t=g.Capabilities.getPlatformOS()=="flash";if(q||t){this.mDownloadArchives=false;if(t){console.log("Flash does not yet support archive downloads")}}this._ensureTrailingSlashes(o,r,this._secureContentUrl);this._setRemotePath(x);this.mLocalPath=this.mLocalRoot+w;this.mFailEarly=s;this.mProgressCb=function(y,A){try{n(y,A)}catch(z){NgLogException(z)}};var u=this;this.mDoneCb=function(A,B,y){try{h.writeFile(u.mLocalRoot+"/.nomedia","",{});this.mProgressCb=function(){};this.mDoneCb=function(){};this._setLifecycleListening(false);v(A,B,y)}catch(z){NgLogException(z)}};this._readLocalManifest();this._setLifecycleListening(true);this.mValid=true},setPriorityDownloadOnly:function(n){this._priorityDownloadOnly=n},abort:function(){this.mCompletedPaths={};this.mCompletionCallbacks={};this._reset()},pause:function(){this._clearConnections();this.mPendingItems=this.mPendingItems.concat(this.mActiveRequests);this.mActiveRequests.length=0;this.mPaused=true},resume:function(){if(this.mPaused){this.mPaused=false;this._downloadPendingItems()}},_setLifecycleListening:function(n){if(n&&!this.lifeListening){b.LifecycleEmitter.addListener(this,function(o){switch(o){case b.LifecycleEmitter.Event.Suspend:case b.LifecycleEmitter.Event.Terminate:this._writeManifest(null,true);break}});this.lifeListening=true}else{if(this.lifeListening){b.LifecycleEmitter.removeListener(this);this.lifeListening=false}}},_setConfig:function(n){this._Config=n;this._noJS=n.omitJsUpdate;this._secureContentUrl=n.secureContentUrl},_onReadLocalManifest:function(o,p){if(this.mValid){try{if(!o){this.mLocalText=p}else{this.mLocalText="{}"}this._DownloadFileSet()}catch(n){NgLogException(n);this._processError("Error reading local manifest err: "+o,false)}}},_DownloadFileSet:function(){var n=0;l.OperationWithRetries((function(o,p){var q=new e();var r=this.mConnections.push(q)-1;q.onreadystatechange=(function(){if(q.readyState==4&&this.mValid){delete this.mConnections[r];n=q.status;if(n==200){this.mRemoteText=q.responseText;this._checkItems();if(this.mCheckUpdateOnly){this._checkUpdate()}else{this._evalManifests()}}else{console.log("Download of manifest at "+this.mRemotePath+l.getCacheBustingString()+" failed: "+n+" "+q.responseText);if(n==404){p()}else{o()}}}}).bind(this);q.open("GET",this.mRemotePath+l.getCacheBustingString(),true);q.send()}).bind(this),(function(){this._processError("Failed to download manifest ("+n+")",false)}).bind(this),this.mFailEarly)},_processError:function(o,n){if(n&&this.mManifest){this._writeManifest(null,true)}if(this.mValid){this.mDoneCb(o,null,this.mLocalText?this.mLocalText.length>2:false);this._reset()}},_checkItems:function(){this.mManifest.initWithJsonText(this.mLocalText,true);var n=new k();n.initWithJsonText(this.mRemoteText);this.mManifest.foreach(n,this._compareItems.bind(this));this._sortPendingItems()},_checkUpdate:function(){this.mPendingItems.length=0;this.mCheckUpdateCallback(this.mTotalBytes>0,this.mTotalBytes)},_evalManifests:function(){try{this.mSpaceNeeded=this.mTotalBytes;var n=new k();n.initWithJsonText(this.mRemoteText);if(!n.mArchives){this.mDownloadArchives=false}this._prepareForArchiveDownload(n.mArchives,!this.mDownloadArchives);this.mProgressCb(this.mCompleteBytes,this.mTotalBytes);m.freeSpace(this.mSpaceNeeded,(function(q){if(q){this._processError(q,false);return}var p=this.mPendingItems.length;if(p){console.log("Going to download %d items.",p);if(p<10){console.log("Items: "+JSON.stringify(this.mPendingItems))}}this._downloadPendingItems()}.bind(this)))}catch(o){NgLogException(o);this.mDoneCb("Failed processing manifests!",null)}},_prepareForArchiveDownload:function(z,o){console.log("DownloadFileSet._prepareForArchiveDownload onlyForcedFiles:",o);var w=[];var q={};var s=0;var t=0;var u=this.mPendingItems;var n=[];var y=false;var v;for(var r=0;r<u.length;++r){v=u[r];if(!v.arcn){w.push(v);s+=v.size;continue}var p=v.arcn;var x=z[p];if(!x.files){x.files=[v]}else{x.files.push(v)}if(q[p]){continue}if(o&&!v.arcForce){n.push(v);continue}if(this.mCompletionCallbacks[v.name]&&this.mCompletionCallbacks[v.name].length>0){if(!x.priority){x.priority=0}x.priority+=this.mCompletionCallbacks[v.name].length;y=true}w.push(x);q[p]=true;s+=x.expSize;t+=x.arcSize}for(r=0;r<n.length;++r){v=n[r];if(q[v.arcn]){continue}w.push(v);s+=v.size}this.mPendingItems=w;this.mTotalBytes=s;this.mSpaceNeeded=s+t;if(y){this._sortPendingItems()}},_compareItems:function(u,t,n){var q=t[u];var v=n[u];if(!v){var o=this.mLocalRoot+u;var r=function(w){if(w){console.log("Error deleting "+o+" error: "+w)}};h.deleteFile(o,{},r);if("pending" in q){o=o+".tmp";h.deleteFile(o,{},r)}return -1}var p=this._extensionMatch(u,"js");if(this._noJS&&(p||u=="index.html")){return 0}v.name=u;if(!q||q.hash!=v.hash){this.mTotalBytes+=v.size;var s=this.mCompletionCallbacks[v.name];if(s&&s.length>0){v.priority=s.length}this.mPendingItems.push(v);return 1}this._notifyFileReady(v.name);return 0},_extensionMatch:function(p,o){var n=new RegExp("^.*.("+o+")$","i");return p.match(n)},_downloadPendingItems:function(){if(this.mValid&&!this.mPaused){if(this.mPendingItems.length==0&&this.mActiveRequests.length==0){var n=function(){this._writeConfig(function(){this.mDoneCb(null,this.mManifest);this._reset()}.bind(this))}.bind(this);if(this.mManifest&&this.mManifest.isModified()){this._writeManifest(n,true)}else{h.registerManifest(this.mLocalPath);n()}return}if(this._priorityDownloadOnly){while(this.mPendingItems.length&&this.mActiveRequests.length<this.mConcurrentRequests&&this.mPendingItems[0].priority&&this.mPendingItems[0].priority>0){var o=this.mPendingItems.shift();o.retrySchedule=this.mRetrySchedule.slice(0);this._downloadItem(o)}}else{while(this.mPendingItems.length&&this.mActiveRequests.length<this.mConcurrentRequests){var o=this.mPendingItems.shift();o.retrySchedule=this.mRetrySchedule.slice(0);this._downloadItem(o)}}}},_downloadItem:function(p){this.mActiveRequests.push(p);var n=this.mRemoteUrl+p.name;if(p.mangled){var o=n.lastIndexOf(".");n=n.substr(0,o)+"-"+n.substr(o+1)+".bin"}l.OperationWithRetries((function(r){console.log("Manifest download starting:",p.name,"-=- priority:",p.priority);var q=new a();var s=this.mConnections.push(q)-1;q.start(this.mLocalRoot+p.name,"GET",n+l.getCacheBustingString(),[],this._onDownloadItemComplete.bind(this,p,r,s))}).bind(this),(function(){console.log("Manifest download failed. Too many failed download attempts for "+p.name);this._processError("Could not download file "+p.name,true)}).bind(this),this.mFailEarly)},_removeActiveRequest:function(o){for(var n in this.mActiveRequests){if(o==this.mActiveRequests[n]){this.mActiveRequests.splice(n,1);break}}},_onDownloadItemComplete:function(q,o,s,n,r){try{delete this.mConnections[s];if(n!=200||q.hash!=r){console.log("Download failed.  Retrying "+q.name);console.log("Status: "+n+" manifest hash: "+JSON.stringify(q.hash)+" actual hash: "+JSON.stringify(r));o();return}else{console.log("Download completed: "+q.name)}if(q.files){++this.mConcurrentRequests;this._downloadPendingItems();h.decompressFile(this.mLocalRoot+q.name,this.mLocalRoot,{returnFiles:false},(function(v,u){--this.mConcurrentRequests;h.deleteFile(this.mLocalRoot+"/"+q.name,{});if(v){console.log("Decompress failed.  Retrying "+q.name);o()}else{for(var t=0;t<q.files.length;++t){var w=q.files[t];this.mManifest.mJson[w.name]={size:w.size,hash:w.hash};if(typeof w.encryption!="undefined"){this.mManifest.mJson[w.name].encryption=w.encryption}if(typeof w.is_code!="undefined"){this.mManifest.mJson[w.name].is_code=w.is_code}}this._removeActiveRequest(q);this.mCompleteBytes+=Number(q.expSize);this.mProgressCb(this.mCompleteBytes,this.mTotalBytes);this._downloadPendingItems();for(var t=0;t<q.files.length;++t){var w=q.files[t];this._notifyFileReady(w.name)}}}).bind(this))}else{this.mManifest.mJson[q.name]={size:q.size,hash:q.hash};if(typeof q.encryption!="undefined"){this.mManifest.mJson[q.name].encryption=q.encryption}if(typeof q.is_code!="undefined"){this.mManifest.mJson[q.name].is_code=q.is_code}this._removeActiveRequest(q);this.mCompleteBytes+=Number(q.size);this.mProgressCb(this.mCompleteBytes,this.mTotalBytes);this._downloadPendingItems();this._notifyFileReady(q.name)}}catch(p){NgLogException(p);this._processError("Error after finishing the download of item "+q+". status is "+n,true)}},_writeManifest:function(r,o){var q=Math.abs(g.Time.getRealTime()-this.mLastManifestWrite)<this.WRITE_COOLDOWN;if(!q||o){try{if(this.mManifest){var p=function(){h.registerManifest(this.mLocalPath);if(r){r.apply(this,arguments)}};this.mManifest.write(this.mLocalPath,p.bind(this));this.mLastManifestWrite=g.Time.getRealTime()}}catch(n){NgLogException(n)}}},_writeConfig:function(o){try{if(this._Config){h.writeFile(this.mLocalRoot+g.Capabilities._getConfigFile(),JSON.stringify(this._Config),{},function(p){console.log(p);if(o){o()}})}else{if(o){o()}}}catch(n){NgLogException(n)}}})}};__ngs._68={_c:null,_d:function(){var c={exports:{}};var g=c.exports;this._c=c;var h=__ngs.r_(__ngs._5).Core;var l=__ngs.r_(__ngs._f).GL2;var b=__ngs.r_(__ngs._4).Device;var e=__ngs.r_(__ngs._g).UI;g.HUD=h.MessageListener.subclass({initialize:function(n){this.node=new k(n);this.datasources=[];this.node.setDepth(10000);l.Root.addChild(this.node)},destroy:function(){for(var n=0;n<this.datasources.length;n++){this.datasources[n].destroy()}this.node.destroy()},makeDataSource:function(n,s){var r=null;var q=null;var o=function(t){if(t instanceof Number){return t}return 0};if(s){if(s.listener){r=s.listener}if(s.translator){o=s.translator}if(s.emitter){q=s.emitter}}var p;if(!r){if(q){r=new h.MessageListener();this.datasources.push(r)}else{r={}}}p=function(t){var u=o.apply(r,arguments);this.node.push(n,u)}.bind(this);if(q){q.addListener(r,p)}return p},addStatusText:function(o,n){this.node.addStatusText(o,n)},addHistogram:function(o,n){this.node.addHistogram(o,n)},remove:function(n){this.node.remove(n)}});var d=l.Node.subclass({initialize:function(p,o,q,n){this.setTouchable(false);this.width=o;this.height=q;this.color=[0.5,0.5,0.5];this.alpha=0.75;if(n&&n.background){if(n.background.color){this.color=n.background.color}if(n.background.alpha){this.alpha=n.background.alpha}}this.backdrop=new l.Primitive();this.backdrop.setType(l.Primitive.Type.TriangleFan);this.backdrop.pushVertex(new l.Primitive.Vertex([0,0],[0,0],[0,0,0]));this.backdrop.pushVertex(new l.Primitive.Vertex([o,0],[0,0],[0,0,0]));this.backdrop.pushVertex(new l.Primitive.Vertex([o,q],[0,0],this.color));this.backdrop.pushVertex(new l.Primitive.Vertex([0,q],[0,0],this.color));this.backdrop.setAlpha(this.alpha);this.addChild(this.backdrop)},resize:function(n,o){this.width=n;this.height=o;this.backdrop.setVertex(0,new l.Primitive.Vertex([0,0],[0,0],[0,0,0]));this.backdrop.setVertex(1,new l.Primitive.Vertex([n,0],[0,0],[0,0,0]));this.backdrop.setVertex(2,new l.Primitive.Vertex([n,o],[0,0],this.color));this.backdrop.setVertex(3,new l.Primitive.Vertex([0,o],[0,0],this.color));this.rescale()}});var a=d.subclass({initialize:function(p,o,q,n){this.statusColor=[0.25,1,0.25];this.labelColor=[0.75,0.75,1];this.labelText=new l.Text(p);this.labelText.setHorizontalAlign(l.Text.HorizontalAlign.Left);this.labelText.setOverflowMode(l.Text.OverflowMode.ReduceFontSize);this.labelText.setSize(o,q/2);this.labelText.setAnchor(0,0);this.labelText.setAlpha(1);this.labelText.setColor(this.labelColor);this.labelText.setFontSize(18);this.labelText.setPosition(0,5);this.addChild(this.labelText);this.statusText=new l.Text("");this.statusText.setHorizontalAlign(l.Text.HorizontalAlign.Left);this.statusText.setOverflowMode(l.Text.OverflowMode.ReduceFontSize);this.statusText.setSize(o,q/2);this.statusText.setAnchor(0,0);this.statusText.setAlpha(1);this.statusText.setColor(this.statusColor);this.statusText.setFontSize(18);this.statusText.setPosition(0,q/2);this.addChild(this.statusText);if(n){if(n.label){this.labelColor=n.label}if(n.text){this.textColor=n.text}}},rescale:function(){var n=this.width;var o=this.height/2;this.labelText.setSize(n,o);this.statusText.setSize(n,o);this.statusText.setPosition(0,o)},push:function(n){this.statusText.setText(n)}});var m=d.subclass({initialize:function(p,o,r,n){this.samples=[];this.max=0;this.min=Number.MAX_VALUE;this.mean=0;this.window=1024;this.scale=1;this.minColor=new h.Color(0.25,1,0.25);this.maxColor=new h.Color(1,0.25,0.25);this.meanColor=new h.Color(0.75,0.75,1);this.labelColor=new h.Color(0.75,0.75,1);this.traceColor=new h.Color(1,1,0.5);if(n){if(n.label){this.labelColor=n.label}if(n.minText){this.minColor=n.minText}if(n.maxText){this.maxColor=n.maxText}if(n.meanText){this.meanColor=n.meanText}if(n.trace){this.traceColor=n.trace}}if(this.window&1){this.window++}this.num=0;this.total=0;this.minText=new l.Text("min");this.minText.setHorizontalAlign(l.Text.HorizontalAlign.Left);this.minText.setOverflowMode(l.Text.OverflowMode.ReduceFontSize);this.minText.setSize(o/4,r/2);this.minText.setAnchor(0,0);this.minText.setAlpha(1);this.minText.setColor(this.minColor);this.minText.setFontSize(18);this.minText.setPosition(o/4,5);this.addChild(this.minText);this.maxText=new l.Text("max");this.maxText.setHorizontalAlign(l.Text.HorizontalAlign.Left);this.maxText.setOverflowMode(l.Text.OverflowMode.ReduceFontSize);this.maxText.setSize(o/4,r/2);this.maxText.setAlpha(1);this.maxText.setAnchor(0,0);this.maxText.setColor(this.maxColor);this.maxText.setFontSize(18);this.maxText.setPosition(2*o/4,5);this.addChild(this.maxText);this.meanText=new l.Text("mean");this.meanText.setHorizontalAlign(l.Text.HorizontalAlign.Left);this.meanText.setOverflowMode(l.Text.OverflowMode.ReduceFontSize);this.meanText.setSize(o/4,r/2);this.meanText.setAnchor(0,0);this.meanText.setAlpha(1);this.meanText.setColor(this.meanColor);this.meanText.setFontSize(18);this.meanText.setPosition(3*o/4,5);this.addChild(this.meanText);this.labelText=new l.Text(p);this.labelText.setHorizontalAlign(l.Text.HorizontalAlign.Left);this.labelText.setOverflowMode(l.Text.OverflowMode.ReduceFontSize);this.labelText.setSize(o/4,r/2);this.labelText.setAnchor(0,0);this.labelText.setAlpha(1);this.labelText.setColor(this.labelColor);this.labelText.setFontSize(18);this.labelText.setPosition(0,5);this.addChild(this.labelText);this.graph=new l.Primitive();this.graph.setColor(this.traceColor);this.graph.setPosition(0,r);this.graph.setType(l.Primitive.Type.LineList);this.addChild(this.graph);this.graph.pushVertex(new l.Primitive.Vertex([0,0],[0,0],this.traceColor));for(var q=0;q<this.window*2;q+=2){this.graph.pushVertex(new l.Primitive.Vertex([(q/2)*(this.width/this.window),0],[0,0],this.traceColor));this.graph.pushVertex(new l.Primitive.Vertex([(q/2)*(this.width/this.window),0],[0,0],this.traceColor))}this.graph.pushVertex(new l.Primitive.Vertex([0,0],[0,0],this.traceColor))},push:function(A){var n=false;var w=Number(A);if(this.num>=this.window){this.num=0;this.total=0}if(this.num===0){n=true;this.graph.setVertex(0,new l.Primitive.Vertex([0,0],[0,0],this.traceColor));for(var r=1;r<this.window*2;r+=2){this.graph.setVertex(r,new l.Primitive.Vertex([(r/2)*(this.width/this.window),0],[0,0],this.traceColor));this.graph.setVertex(r+1,new l.Primitive.Vertex([(r/2)*(this.width/this.window),0],[0,0],this.traceColor))}this.graph.setVertex(this.window*2,new l.Primitive.Vertex([0,0],[0,0],this.traceColor))}this.num++;this.total+=w;this.mean=this.total/this.num;this.meanText.setText("mean: "+this.mean.toPrecision(4));if(w<this.min){this.min=w;n=true;this.minText.setText("min: "+this.min.toPrecision(4))}if(w>this.max){this.max=w;n=true;this.maxText.setText("max: "+this.max.toPrecision(4))}if(n){var u=this.scale;this.rescale();for(var q=0;q<this.num*2;q++){var o=this.graph.getVertex(q)._position;var v=o.getY();v=(v/u)*this.scale;o.setY(v);this.graph.setVertex(q,new l.Primitive.Vertex(o,[0,0],this.traceColor))}}var t=(this.num-1)*2;var z=t;if(z){z--}var p=this.graph.getVertex(z)._position;var x=this.num*(this.width/this.window);if(t>0){this.graph.setVertex(t,new l.Primitive.Vertex(p,[0,0],this.traceColor))}else{this.graph.setVertex(t,new l.Primitive.Vertex([x,(A-this.min)*-this.scale],[0,0],this.traceColor))}this.graph.setVertex(t+1,new l.Primitive.Vertex([x,(A-this.min)*-this.scale],[0,0],this.traceColor))},rescale:function(){var n=this.width;var p=this.height;var o=this.max-this.min;if(o===0){o=this.height}this.scale=(this.height/2)/o;this.labelText.setSize(n/4,p/2);this.minText.setSize(n/4,p/2);this.maxText.setSize(n/4,p/2);this.meanText.setSize(n/4,p/2);this.graph.setPosition(0,p)}});var k=l.Node.subclass({initialize:function(n){this.elements={};this.x=n[0];this.y=n[1];this.w=n[2];this.h=n[3];this.num=0;this.setTouchable(false);this.setPosition(this.x,this.y);this.setVisible(true)},destroy:function($super){var n=this._children.slice();while(n.length>0){var o=n.shift();n=n.concat(o._children);o.destroy()}$super()},addHistogram:function(o,n){var q=this.h/(this.num+1);if(q>this.h/4){q=this.h/4}var p=new m(o,this.w,q,n);this._add(o,p)},addStatusText:function(o,n){var q=this.h/(this.num+1);if(q>this.h/4){q=this.h/4}var p=new a(o,this.w,q,n);this._add(o,p)},_add:function(n,o){if(this.elements[n]){delete this.elements[n]}this.num++;this.elements[n]=o;this.addChild(o);this.rescale()},remove:function(n){if(this.elements[n]){delete this.elements[n];this.num--;this.rescale()}},rescale:function(){var q=0;var n=this.h/this.num;for(var p in this.elements){if(this.elements.hasOwnProperty(p)){var o=this.elements[p];o.resize(this.w,this.h/this.num);o.setPosition(0,q);q+=n}}},push:function(o,n){if(this.elements[o]){this.elements[o].push(n)}}})}};__ngs._0={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var e=false;var c={};var g=0;a.NGSetTimeoutRunTimers=function(){if(e){var l=[];var m=new Date().getTime();for(var h in c){if(c.hasOwnProperty(h)&&c[h].shouldExecute(m)){l.push(c[h])}}for(var k in l){if(l.hasOwnProperty(k)){l[k].execute()}}}};if(typeof(setTimeout)!="function"){setTimeout=function(k,h){return 0};clearTimeout=function(h){};setInterval=function(k,h){return 0};clearInterval=function(h){};e=true}NGSetTimeoutOld=setTimeout;NGClearTimeoutOld=clearTimeout;NGSetIntervalOld=setInterval;NGClearIntervalOld=clearInterval;NGSetTimeoutInternal=function(k,h){return NGSetTimeoutOld(k,h)};NGClearTimeoutInternal=function(h){NGClearTimeoutOld(h)};NGSetIntervalInternal=function(k,h){return NGSetIntervalOld(k,h)};NGClearIntervalInternal=function(h){NGClearIntervalOld(h)};setTimeout=function(k,h){return NGSetTimeoutInternal(k,h)};clearTimeout=function(h){NGClearTimeoutInternal(h)};setInterval=function(k,h){return NGSetIntervalInternal(k,h)};clearInterval=function(h){NGClearIntervalInternal(h)};if(e){var d=function(h,k){this.uid=g++;if(g==Infinity){g=0}this.fptr=h;this.interval=k;this.requestedTime=new Date().getTime()+k};d.prototype.shouldExecute=function(h){if(h<this.requestedTime){return false}return true};d.prototype.execute=function(){delete c[this.uid];this.fptr()};NGSetTimeoutInternal=function(h,l){if(l<0||typeof(l)!="number"){l=0}var k=new d(h,l);c[k.uid]=k;return k.uid};NGClearTimeoutInternal=function(h){if(c.hasOwnProperty(h)){delete c[h]}};NGSetIntervalInternal=function(h,l){if(l<0||typeof(l)!="number"){l=0}var k=new d(h,l);k.execute=function(){this.requestedTime=new Date().getTime()+this.interval;this.fptr()};c[k.uid]=k;return k.uid};NGClearIntervalInternal=function(h){NGClearTimeoutInternal(h)}}}};__ngs._1={_c:null,_d:function(){var e={exports:{}};var b=e.exports;this._c=e;var d=__ngs.r_(__ngs._z);var h=__ngs.r_(__ngs._10).Base64;var k=__ngs.r_(__ngs._11);var c={HandleAction:0};var a=d.Class.subclass({classname:"SystemBinding",callbacks:{},callbacksUidGenerator:0,_contResultSets:{},_contResultSetIdxs:{}});var g=d.Class.subclass({classname:"ResultSet",initialize:function(l){this.items=[];this._continueId=l;this.totalLength=Number.MAX_VALUE},getMore:function(l){return a._getMoreContacts(this,l)},closeResultSet:function(){a._closeContactsResultSet(this)}});a._pushContactsCmd=function(n,l,p){var o=a.callbacksUidGenerator++;if(!!!l){l=function(){}}a.callbacks[o]=l;var m={name:n,callbackId:o};if(typeof p!="undefined"){m.continueId=p}m=JSON.stringify(m);NgPushCommand3(NgEntityTypes.NgSystemBinding,c.HandleAction,h.encode(m))};a._closeContactsResultSetfunction=function(m){var l=function(){};a._pushContactsCmd("closecontacts",l,m._continueId)};a._getMoreContacts=function(m,l){if((typeof m._continueId!="undefined")&&(m.items.length<m.totalLength)){a._pushContactsCmd("morecontacts",l,m._continueId);return true}return false};a.getContacts=function(l){a._pushContactsCmd("contacts",l,undefined)};a.getDeviceToken=function(l){var n=a.callbacksUidGenerator++;if(!!!l){l=function(){}}a.callbacks[n]=l;var m={name:"devicetoken",callbackId:n};m=JSON.stringify(m);NgPushCommand3(NgEntityTypes.NgSystemBinding,c.HandleAction,h.encode(m))};a.handleCommand=function(s){var m=NgParseCommand2(s,NgParseInt,NgParseBase64);var p=JSON.parse(m[1]);if(p.name=="callback"){var l=a.callbacks[p.callbackId];if(typeof l=="function"){if(p.callbackname=="contacts"){var r=a._contResultSets[p.continueId];if(typeof r=="undefined"){r=new k.ResultSet(p.continueId);a._contResultSets[p.continueId]=r;a._contResultSetIdxs[p.continueId]=0}var q=p.list.length;while(p.list.length>0){var o=p.list.shift();r.items.push(o)}var n=a._contResultSetIdxs[p.continueId];if((typeof n)!="undefined"){a._contResultSetIdxs[p.continueId]=n+q}if((typeof p.total!="undefined")||(typeof p.rsclosed!="undefined")){if(typeof p.total!="undefined"){r.totalLength=p.total}delete r._continueId;delete a._contResultSets[p.continueId];delete a._contResultSetIdxs[p.continueId]}delete a.callbacks[p.callbackId];if(p.success){l(undefined,r,n,q)}else{l(p.error,r,n,q)}}else{delete a.callbacks[p.callbackId];l(p)}}}};b.SystemBinding=a}};__ngs._2={_c:null,_d:function(){var c={exports:{}};var e=c.exports;this._c=c;var b=__ngs.r_(__ngs._z).Class;var h=__ngs.r_(__ngs._12).MessageListener;var g=__ngs.r_(__ngs._13).XHR;var n=__ngs.r_(__ngs._14).Util;var a=__ngs.r_(__ngs._15).DownloadFile;var l=__ngs.r_(__ngs._d).FileSystem;var o=__ngs.r_(__ngs._3).LocalGameList;var k=__ngs.r_(__ngs._7).Capabilities;var d=true;var m=b.subclass({classname:"Manifest",initialize:function(){this.mNumAdded=0;this.mNumRemoved=0},reset:function(){this.mJson=null;this.mArchives=null},initWithJsonText:function(r,p){try{this.mJson=JSON.parse(r);if(!this.mJson){this.mJson={}}}catch(q){this.mJson={}}if("__archives" in this.mJson){this.mArchives=this.mJson.__archives.files;delete this.mJson.__archives}else{this.mArchives=[]}},foreach:function(q,p){var t=this.mJson;var s=q.mJson;var r;for(r in s){this.handleItem(r,t,s,p)}for(r in t){if(!(r in s)){this.handleItem(r,t,s,p)}}},handleItem:function(r,t,s,p){var q=p(r,t,s);if(q){if(q<0){this.mNumRemoved++;delete t[r]}else{this.mNumAdded++}}},isModified:function(){return(this.mNumAdded>0||this.mNumRemoved>0)},_hasItems:function(){return Object.keys(this.mJson).length>0},write:function(s,r){var p=function(t){if(t){console.log("Error writing manifest! "+t)}if(r){r(t)}};if(this.mJson){var q=JSON.stringify(this.mJson);l._safeWrite(s,q,{},p)}else{r()}}});e.DownloadManifest=h.subclass({classname:"DownloadManifest",MAX_CONCURRENT_REQUESTS:6,initialize:function(){this.mCompletedPaths={};this.mCompletionCallbacks={};this.mConnections=[];this.mPendingItems=[];this.mActiveRequests=[];this.reset();this._progressIsTotal=false},_clearConnections:function(){for(var p in this.mConnections){if(this.mConnections.hasOwnProperty(p)){this.mConnections[p].abort()}}this.mConnections.length=0},_sortPendingItems:function(){var q;var p;this.mPendingItems.sort(function(s,r){q=(s.priority!==undefined)?s.priority:0;p=(r.priority!==undefined)?r.priority:0;return p-q})},reset:function(){this.mConcurrentRequests=this.MAX_CONCURRENT_REQUESTS;this.mManifest=null;this.mRemoteUrl=null;this.mLocalPath=null;this.mLocalRoot=null;this.mLocalText=null;this.mRemoteText=null;this.mProgressCb=function(){};this.mDoneCb=function(){};this.mPaused=false;this.mValid=false;this._clearConnections();this.mPendingItems.length=0;this.mCompleteBytes=0;this.mTotalBytes=0;this.mSpaceNeeded=0;this.mNumRemoteManifestBytes=0;this.mDownloadArchives=true;this.mActiveRequests.length=0;this.mLocalGameList=o;this.mRetrySchedule=n.RetrySchedule(50,2000);this.mManifestRetrySchedule=this.mRetrySchedule.slice(0);if(this._statusListener){this._statusListener.destroy();this._statusListener=null}this.mCheckUpdateOnly=false;this.mCheckUpdateCallback=null;this.mDecompCtxId=0;this.mFlushing=false},_ensureTrailingSlashes:function(p,r,q){this.mRemoteUrl=p.match(/.*\/$/)?p:p+"/";this.mLocalRoot=(r.match(/.*\/$/)||(!r))?r:r+"/";this._secureContentUrl=((!q)||q.match(/.*\/$/))?q:q+"/"},_readLocalManifest:function(){l.readFile(this.mLocalPath,{},this._onReadLocalManifest.bind(this))},_setRemotePath:function(p){if(this._secureContentUrl){this.mRemotePath=this._secureContentUrl+p}else{this.mRemotePath=this.mRemoteUrl+p}},_parseManifestNames:function(p){if(typeof p==="string"){var q={};q[p]=p;p=q}return p},isUpdated:function(r,u,t,p,s){this.mCheckUpdateOnly=true;this.mCheckUpdateCallback=p;this.mDoneCb=(typeof s==="function")?s:function(){};this.mProgressCb=function(w,x){};var v=0;var q=r+"/configuration.json"+n.getCacheBustingString();n.OperationWithRetries((function(w,x){var y=new g();y.onreadystatechange=(function(){if(y.readyState===4&&this.mValid){this.mManifest=new m();var z=null;var E=(y.status===404);if(E||(y.status===200&&y.responseText)){var A;if(!E){A=JSON.parse(y.responseText);z=A.contentUrl}if(!t){t={"webgame.ngmanifest":__ngs.r_(__ngs._16)._int_LGL.getManifestName(A)}}if(!z){z=r}t=this._parseManifestNames(t);var D;var C;for(var B in t){if(t.hasOwnProperty(B)){D=t[B];C=B;break}}this._ensureTrailingSlashes(z,u);this.mLocalPath=this.mLocalRoot+C;this._setRemotePath(D);this._readLocalManifest()}else{v=y.status;w()}}}).bind(this);y.open("GET",q,true);y.send()}).bind(this),(function(){console.log("Exceeded maximum number of manifest download retires, failing");this._processError("Failed to download manifest ("+v+") at "+q,false)}).bind(this),this.mFailEarly);this.mValid=true},useTotalProgress:function(){this._progressIsTotal=true},setOptions:function(p){if(p.incremental){this._incremental=true}if(p.useTotalProgress){this._progressIsTotal=true}},_notifyFileReady:function(s,r){if(this.mCompletedPaths[s]===undefined){this.mCompletedPaths[s]=true}var q=this.mCompletionCallbacks[s];if(q){for(var p=0;p<q.length;p++){q[p](s)}q.length=0;delete this.mCompletionCallbacks[s];if(this._incremental){this._flushManifest()}}},onNotifyFileReady:function(t,u){if(typeof u!=="function"){return}if(this.mCompletedPaths[t]!==undefined){u(t)}else{if(this.mCompletionCallbacks[t]===undefined){this.mCompletionCallbacks[t]=[]}this.mCompletionCallbacks[t].push(u);var s=this.mPendingItems.length;if(!s){console.log("onNotifyFileReady called before mPendingItems populated! Saving "+t);if(!this.prioritizePending){this.prioritizePending=[]}this.prioritizePending.push({path:t,cb:u});return}for(var q=0;q<s;q++){var r=this.mPendingItems[q];if(r.files){for(var p=0;p<r.files.length;p++){if(r.files[p].name===t){if(r.priority===undefined){r.priority=0}r.priority+=1;this._sortPendingItems();break}}}else{if(r.name===t){if(r.priority===undefined){r.priority=0}r.priority=this.mCompletionCallbacks[t].length;this._sortPendingItems();break}}}this._downloadPendingItems()}},start:function(q,u,r,p,y,s,v){this.mCheckUpdateOnly=false;r=this._parseManifestNames(r);var B;var A;for(var z in r){if(r.hasOwnProperty(z)){B=r[z];A=z;break}}console.log("DownloadManifest.start(",q,u,B,")");if(!q||!u||q===""||u===""){throw new Error("invalid arguments: "+JSON.stringify(arguments))}this.mManifest=new m();var w=k.getPlatformOS()==="flash";if(s||w){this.mDownloadArchives=false;if(w){console.log("Flash does not yet support archive downloads")}}this._ensureTrailingSlashes(q,u,this._secureContentUrl);this._setRemotePath(B);this.mLocalPath=this.mLocalRoot+A;this.mCacheKey=this.mLocalPath;this.mFailEarly=v;this.mProgressCb=function(C,E){try{p(C,E)}catch(D){NgLogException(D)}};var x=this;this.mDoneCb=function(E,F,C){try{l._safeWrite(x.mLocalRoot+"/.nomedia","",{});this.mProgressCb=function(){};this.mDoneCb=function(){};this._setLifecycleListening(false);y(E,F,C)}catch(D){NgLogException(D)}};var t=__ngs.r_(__ngs._17).KeyValue;this.kvCache=new t();this.kvCache.registerForKey("manifest");this.kvCache.getItem(this.mCacheKey,{},function(D,F,C){try{if(!D&&F){this.mCacheHeadersIn=JSON.parse(F)}}catch(E){NgLogException(E)}this._readLocalManifest();this._setLifecycleListening(true);this.mValid=true}.bind(this))},abort:function(){this.mCompletedPaths={};this.mCompletionCallbacks={};if(this.mManifest){this._writeManifest()}this.reset();if(this.kvCache){this.kvCache.removeItem(this.mCacheKey,{})}},pause:function(){this._clearConnections();this.mPendingItems=this.mPendingItems.concat(this.mActiveRequests);this.mDecompCtxId++;this.mActiveRequests.length=0;this.mPaused=true},resume:function(){if(this.mPaused){this.mPaused=false;this._downloadPendingItems()}},_setLifecycleListening:function(q){var p=__ngs.r_(__ngs._18).LifecycleEmitter;if(q&&!this.lifeListening){p.addListener(this,function(r){switch(r){case p.Event.Suspend:case p.Event.Terminate:this._writeManifest();break}});this.lifeListening=true}else{if(this.lifeListening){p.removeListener(this);this.lifeListening=false}}},_theQuestion:function(p){return p|!p},_setConfig:function(p){this._Config=p;this._noJS=p.omitJsUpdate;this._secureContentUrl=p.secureContentUrl},_onReadLocalManifest:function(q,r){if(this.mValid){try{if(!q){this.mLocalText=r}else{this.mLocalText="{}";this.mCacheHeadersIn=null}this._downloadManifest()}catch(p){NgLogException(p);this._processError("Error reading local manifest err: "+q,false)}}},_downloadManifest:function(){var p=0;n.OperationWithRetries((function(q,r){var s=new g();var t=this.mConnections.push(s)-1;s.onreadystatechange=(function(){if(s.readyState===4&&this.mValid){delete this.mConnections[t];p=s.status;if(p===200){this.mRemoteText=s.responseText;this.mCacheHeadersOut={};var u=s.getResponseHeader("ETag");if(u){this.mCacheHeadersOut["If-None-Match"]=u}var y=s.getResponseHeader("Last-Modified");if(y){this.mCacheHeadersOut["If-Modified-Since"]=y}this._checkItems();if(this.mCheckUpdateOnly){this._checkUpdate()}else{this._evalManifests()}}else{if(p===304){console.log("304 for manifest at "+this.mRemotePath);var w;try{w=JSON.parse(this.mLocalText);for(var v in w){if(w.hasOwnProperty(v)){this._notifyFileReady(v,true)}}this.mCacheHeadersOut={};var u=s.getResponseHeader("ETag");if(u){this.mCacheHeadersOut["If-None-Match"]=u}var y=s.getResponseHeader("Last-Modified");if(y){this.mCacheHeadersOut["If-Modified-Since"]=y}this.mDoneCb(0,w,true)}catch(x){console.log("Unable to parse: "+this.mLocalText);NgLogException(x);this.kvCache.removeItem(this.mCacheKey,{});this.mCacheHeadersIn=null;this._downloadManifest()}}else{console.log("Download of manifest at "+this.mRemotePath+n.getCacheBustingString()+" failed: "+p+" "+s.responseText);if(p===404){r()}else{q()}}}}}).bind(this);s.open("GET",this.mRemotePath+n.getCacheBustingString(),true);s.send()}).bind(this),(function(){this._processError("Failed to download manifest ("+p+")",false)}).bind(this),this.mFailEarly)},_processError:function(q,p){if(p&&this.mManifest){this._writeManifest()}if(this.mValid){this.mDoneCb(q,null,this.mLocalText?this.mLocalText.length>2:false);this.reset()}},_checkItems:function(){this.mManifest.initWithJsonText(this.mLocalText,true);var p=new m();p.initWithJsonText(this.mRemoteText);this.mManifest.foreach(p,this._compareItems.bind(this));this._sortPendingItems()},_checkUpdate:function(){this.mPendingItems.length=0;this.mCheckUpdateCallback(this.mTotalBytes>0,this.mTotalBytes)},_evalManifests:function(){try{this.mSpaceNeeded=this.mTotalBytes;var p=new m();p.initWithJsonText(this.mRemoteText);if(!p.mArchives){this.mDownloadArchives=false}this._prepareForArchiveDownload(p.mArchives,!this.mDownloadArchives);var q=this._progressIsTotal?this.mNumRemoteManifestBytes:this.mTotalBytes;this.mProgressCb(this.mCompleteBytes,q);this.mLocalGameList.freeSpace(this.mSpaceNeeded,(function(w){if(w){this._processError(w,false);return}var t=this.mPendingItems.length;if(t){console.log("Going to download %d items.",t);if(t<10){console.log("Items: "+JSON.stringify(this.mPendingItems))}if(this.prioritizePending){var s=this.prioritizePending.length;for(var u=0;u<s;++u){var v=this.prioritizePending[u];this.onNotifyFileReady(v.path,v.cb)}}}this._downloadPendingItems()}).bind(this))}catch(r){NgLogException(r);this.mDoneCb("Failed processing manifests!",null)}},_prepareForArchiveDownload:function(B,q){console.log("DownloadManfiest._prepareForArchiveDownload onlyForcedFiles:",q);var y=[];var s={};var u=0;var v=0;var w=this.mPendingItems;var p=[];var A=false;var x;for(var t=0;t<w.length;++t){x=w[t];if(!x.arcn){y.push(x);u+=x.size;continue}var r=x.arcn;var z=B[r];if(z){if(!z.files){z.files=[x]}else{z.files.push(x)}}else{NgLogE("Could not find pending file's archive in manifest archives");continue}if(s[r]){continue}if(q&&!x.arcForce){p.push(x);continue}if(this.mCompletionCallbacks[x.name]&&this.mCompletionCallbacks[x.name].length>0){if(!z.priority){z.priority=0}z.priority+=this.mCompletionCallbacks[x.name].length;A=true}y.push(z);s[r]=true;u+=z.expSize;v+=z.arcSize}for(t=0;t<p.length;++t){x=p[t];if(s[x.arcn]){continue}y.push(x);u+=x.size}this.mPendingItems=y;this.mTotalBytes=u;this.mSpaceNeeded=u+v;if(A){this._sortPendingItems()}},_compareItems:function(w,v,p){var s=v[w];var x=p[w];if(!x){var q=this.mLocalRoot+w;var t=function(y){if(y){console.log("Error deleting "+q+" error: "+y)}};l.deleteFile(q,{},t);if("pending" in s){q=q+".tmp";l.deleteFile(q,{},t)}return -1}var r=this._extensionMatch(w,"js");if(this._noJS&&(r||w==="index.html"||w==="index.json")){this._notifyFileReady(w);return 0}x.name=w;this.mNumRemoteManifestBytes+=x.size;if(!s||s.hash!==x.hash){this.mTotalBytes+=x.size;var u=this.mCompletionCallbacks[x.name];if(u&&u.length>0){x.priority=u.length}this.mPendingItems.push(x);return 1}else{if(this._progressIsTotal){console.log("adding completed bytes");this.mCompleteBytes+=x.size}}this._notifyFileReady(x.name);return 0},_extensionMatch:function(s,q){var r=new RegExp("^.*\\.("+q+")$","i");var p=s.match(r);return p},_downloadPendingItems:function(){if(this.mValid&&!this.mPaused){if(this.mPendingItems.length===0&&this.mActiveRequests.length===0){var p=function(r){if(!r){this.kvCache.setItem(this.mCacheKey,JSON.stringify(this.mCacheHeadersOut),{},function(t,s){if(t!==""){console.log("setItem callback: err="+t);return}})}else{console.log("received error! "+r)}this._writeConfig(function(){this.mDoneCb(null,this.mManifest);this.reset()}.bind(this))}.bind(this);if(this.mManifest&&this.mManifest.isModified()){this._writeManifest(p)}else{l.registerManifest(this.mLocalPath);p()}return}while(this.mPendingItems.length&&this.mActiveRequests.length<this.mConcurrentRequests){if(this._incremental===true){var q=this.mPendingItems[0];if(typeof q.priority==="number"&&q.priority>0){var q=this.mPendingItems.shift();q.retrySchedule=this.mRetrySchedule.slice(0);this._downloadItem(q)}if(this.mCompletionCallbacks&&Object.keys(this.mCompletionCallbacks).length===this.mActiveRequests.length){break}}else{var q=this.mPendingItems.shift();q.retrySchedule=this.mRetrySchedule.slice(0);this._downloadItem(q)}}this._flushManifest()}},_flushManifest:function(){var q=this;var p=function(r){q.mFlushing=false};if(!this.mFlushing&&this.mManifest._hasItems()){this.mFlushing=true;console.log("Manifest download progress, saving manifest state.");this._writeManifest(p)}},_downloadItem:function(r){this.mActiveRequests.push(r);var p=this.mRemoteUrl+r.name;if(r.mangled){var q=p.lastIndexOf(".");p=p.substr(0,q)+"-"+p.substr(q+1)+".bin"}n.OperationWithRetries((function(t){var s=new a();var u=this.mConnections.push(s)-1;if(r.files&&d){s.setOption(a.Option.VerificationHash,a.HashType.MD5,r.hash);s.setOption(a.Option.AutoDecompress,1,this.mLocalRoot)}s.start(this.mLocalRoot+r.name,"GET",p+n.getCacheBustingString(),[],this._onDownloadItemComplete.bind(this,r,t,u))}).bind(this),(function(){console.log("Manifest download failed. Too many failed download attempts for "+r.name);this._processError("Could not download file "+r.name,true)}).bind(this),this.mFailEarly)},_removeActiveRequest:function(q){for(var p in this.mActiveRequests){if(q===this.mActiveRequests[p]){this.mActiveRequests.splice(p,1);break}}},_onDownloadItemComplete:function(z,s,q,t,v,r,p){var A=this.mDecompCtxId;try{delete this.mConnections[q];if(t!==200||z.hash!==v){console.log("Download failed.  Retrying "+z.name);console.log("Status: "+t+" manifest hash: "+JSON.stringify(z.hash)+" actual hash: "+JSON.stringify(v));s();return}var y;if(z.files){this._downloadPendingItems();if(p instanceof Array){for(var u=0;u<z.files.length;++u){var w=z.files[u];this.mManifest.mJson[w.name]={size:w.size,hash:w.hash};if(typeof w.encryption!=="undefined"){this.mManifest.mJson[w.name].encryption=w.encryption}if(typeof w.is_code!=="undefined"){this.mManifest.mJson[w.name].is_code=w.is_code}}this._removeActiveRequest(z);this.mCompleteBytes+=Number(z.expSize);y=this._progressIsTotal?this.mNumRemoteManifestBytes:this.mTotalBytes;this.mProgressCb(this.mCompleteBytes,y);this._downloadPendingItems()}else{++this.mConcurrentRequests;l.decompressFile(this.mLocalRoot+z.name,this.mLocalRoot,{returnFiles:false},(function(D,C){--this.mConcurrentRequests;if(!this.mValid||A!==this.mDecompCtxId){return}l.deleteFile(this.mLocalRoot+"/"+z.name,{});if(D){console.log("Decompress failed.  Retrying "+z.name);s()}else{for(var B=0;B<z.files.length;++B){var E=z.files[B];this.mManifest.mJson[E.name]={size:E.size,hash:E.hash};if(typeof E.encryption!=="undefined"){this.mManifest.mJson[E.name].encryption=E.encryption}if(typeof E.is_code!=="undefined"){this.mManifest.mJson[E.name].is_code=E.is_code}this._notifyFileReady(E.name)}this._removeActiveRequest(z);this.mCompleteBytes+=Number(z.expSize);y=this._progressIsTotal?this.mNumRemoteManifestBytes:this.mTotalBytes;this.mProgressCb(this.mCompleteBytes,y);this._downloadPendingItems()}}).bind(this))}}else{this.mManifest.mJson[z.name]={size:z.size,hash:z.hash};if(typeof z.encryption!=="undefined"){this.mManifest.mJson[z.name].encryption=z.encryption}if(typeof z.is_code!=="undefined"){this.mManifest.mJson[z.name].is_code=z.is_code}this._removeActiveRequest(z);this.mCompleteBytes+=Number(z.size);y=this._progressIsTotal?this.mNumRemoteManifestBytes:this.mTotalBytes;this.mProgressCb(this.mCompleteBytes,y);this._notifyFileReady(z.name);this._downloadPendingItems()}}catch(x){NgLogException(x);this._processError("Error after finishing the download of item "+z+". status is "+t,true)}},_writeManifest:function(r){try{if(this.mManifest){var q=function(){l.registerManifest(this.mLocalPath);if(r){r.apply(this,arguments)}};this.mManifest.write(this.mLocalPath,q.bind(this))}}catch(p){NgLogException(p)}},_writeConfig:function(q){try{if(this._Config){l._safeWrite(this.mLocalRoot+k._getConfigFile(),JSON.stringify(this._Config),{},function(r){console.log(r);if(q){q()}})}else{if(q){q()}}}catch(p){NgLogException(p)}}})}};__ngs._3={_c:null,_d:function(){var b={exports:{}};var e=b.exports;this._c=b;var p=__ngs.r_(__ngs._6).Proc;var a=__ngs.r_(__ngs._z).Class;var k=__ngs.r_(__ngs._12).MessageListener;var c=__ngs.r_(__ngs._19).ObjectRegistry;var m=__ngs.r_(__ngs._7).Capabilities;var h=__ngs.r_(__ngs._10).Base64;var l=__ngs.r_(__ngs._1a).toMD5;var o=__ngs.r_(__ngs._14).Util;var n=__ngs.r_(__ngs._18).LifecycleEmitter;var d=__ngs.r_(__ngs._1b).OrientationEmitter;var g=k.subclass({initialize:function(q){n.addListener(this,this.onLifecycleUpdate);this._listener=q},destroy:function(){n.removeListener(this)},onLifecycleUpdate:function(q){switch(q){case Device.LifecycleEmitter.Event.Resume:this._listener.onResume();break}}});e.LocalGameList=a.singleton({classname:"LocalGameList",initialize:function(){c.register(this);this._createSendGen(this.__objectRegistryId);new g(this);this.mRefCount=1;this.mRefTable=[];this.mSpaceAvailable=0;this.mRequiredAvailableSpace=0;this.mSpaceCB=[];this._getRepoSpaceSendGen();var q=this;var r=__ngs.r_(__ngs._17).KeyValueCache;this.mGameStore=r.global("Core.GameList");this.mActiveGameKey="activeGames";this.onResume()},onResume:function(){this._reloadGameList()},_reloadGameList:function(){this.mGameStore.getItem(this.mActiveGameKey,{},(function(q,s){var r;if(s){r=JSON.parse(s)}else{r=[]}this.mGameList=r;if(typeof this.mListListen=="function"){this.mListListen()}}).bind(this),true)},setListListener:function(q){this.mListListen=q},_classId:302,_updateDoneRecvGen:function(r){if((r.length-r.idx)!==2){NgLogE("Could not parse due to wrong argument count in LocalGameList.updateDone from command: "+r);return false}var s=p.parseInt(r[r.idx++]);if(s===undefined){NgLogE("Could not parse id in LocalGameList.updateDone from command: "+r);return false}var q=p.parseString(r[r.idx++]);if(q===undefined){NgLogE("Could not parse error in LocalGameList.updateDone from command: "+r);return false}return this._updateDoneRecv(s,q)},_repoSpaceRecvGen:function(r){if((r.length-r.idx)!==1){NgLogE("Could not parse due to wrong argument count in LocalGameList.repoSpace from command: "+r);return false}var q=p.parseInt(r[r.idx++]);if(q===undefined){NgLogE("Could not parse space in LocalGameList.repoSpace from command: "+r);return false}return this._repoSpaceRecv(q)},_updateProgressRecvGen:function(t){if((t.length-t.idx)!==4){NgLogE("Could not parse due to wrong argument count in LocalGameList.updateProgress from command: "+t);return false}var r=p.parseString(t[t.idx++]);if(r===undefined){NgLogE("Could not parse url in LocalGameList.updateProgress from command: "+t);return false}var u=p.parseInt(t[t.idx++]);if(u===undefined){NgLogE("Could not parse cur in LocalGameList.updateProgress from command: "+t);return false}var s=p.parseInt(t[t.idx++]);if(s===undefined){NgLogE("Could not parse total in LocalGameList.updateProgress from command: "+t);return false}var q=p.parseBool(t[t.idx++]);if(q===undefined){NgLogE("Could not parse error in LocalGameList.updateProgress from command: "+t);return false}return this._updateProgressRecv(r,u,s,q)},$_createSendGen:function(q){p.appendToCommandString(19857407,[+q])},_updateGameSendGen:function(q,r){p.appendToCommandString(19791874,this,[p.encodeString(q),+r])},_getRepoSpaceSendGen:function(){p.appendToCommandString(19791876,this)},_deleteGameSendGen:function(q){p.appendToCommandString(19791878,this,[p.encodeString(q)])},__setUpdateProgressVisibleSendGen:function(q){p.appendToCommandString(19791879,this,[(q?1:0)])},__setUpdateProgressBoundsSendGen:function(q,t,r,s){p.appendToCommandString(19791880,this,[+q,+t,+r,+s])},_pauseUpdateSendGen:function(q){p.appendToCommandString(19791881,this,[p.encodeString(q)])},_resumeUpdateSendGen:function(q){p.appendToCommandString(19791882,this,[p.encodeString(q)])},_cancelUpdateSendGen:function(q){p.appendToCommandString(19791883,this,[p.encodeString(q)])},_runGameSendGen:function(q){p.appendToCommandString(19791885,this,[p.encodeString(q)])},_finishGameSendGen:function(){p.appendToCommandString(19791886,this)},__forwardExceptionSendGen:function(q){p.appendToCommandString(19791887,this,[p.encodeString(q)])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[302]=this._instance||this;PROC_METHOD_TABLE[19791875]=this.prototype._updateDoneRecvGen;PROC_METHOD_TABLE[19791877]=this.prototype._repoSpaceRecvGen;PROC_METHOD_TABLE[19791884]=this.prototype._updateProgressRecvGen},_setProgressVisible:function(q){this.progressVisible=q;this.__setUpdateProgressVisibleSendGen(q)},_setProgressBounds:function(q){this.__setUpdateProgressBoundsSendGen(q[0],q[1],q[2],q[3])},restartGame:function(){this.runGame(m.getServer()+"/"+m.getGame())},runGame:function(q){console.log("Calling runGame with "+q);if(!q){console.log("Finishing");this._finishGame()}else{this._runGameSendGen(o.NormalizeUrl(q))}},_finishGame:function(){this._finishGameSendGen()},listenUpdates:function(q){this.mUpdateListener=q},stopUpdateListening:function(){delete this.mUpdateListener},pauseUpdate:function(q){this._pauseUpdateSendGen(o.NormalizeUrl(q))},resumeUpdate:function(q){this._resumeUpdateSendGen(o.NormalizeUrl(q))},cancelUpdate:function(q){this._cancelUpdateSendGen(o.NormalizeUrl(q))},updateGame:function(r,q){var s=this.mRefCount;this.mRefTable[this.mRefCount++]=q;this._updateGameSendGen(o.NormalizeUrl(r),s);return s},updateAndRestartCurrentGame:function(){this.runUpdatedGame(m.getUrl());d.setInterfaceOrientation(d.Orientation.Portrait,false)},runUpdatedGame:function(q){if(!q){this._finishGame();return}this.updateGame(q,(function(r){if(r){NgLogE("LGL Error updating game! "+r);o.showFatalErrorDialog()}else{this.runGame(q)}}).bind(this))},_updateProgressRecv:function(r,t,s,q){if(this.mUpdateListener){this.mUpdateListener(r,t,s,q)}},_updateDoneRecv:function(s,r){this._reloadGameList();var q=s&&this.mRefTable[s];if(q){delete this.mRefTable[s];q(r)}this._getRepoSpaceSendGen()},_repoSpaceRecv:function(t){this.mSpaceAvailable=t-7340032;if(this.mRequiredAvailableSpace>this.mSpaceAvailable){var s=__ngs.r_(__ngs._1c).AlertDialog;var q=new s();q.setText(Core.Localization.getString("SD card is full"));q.setChoices([Core.Localization.getString("Exit")]);q.game=this.game;q.onchoice=function(u){q.hide();n.exitProcess()};q.show()}else{for(var r=0;r<this.mSpaceCB.length;++r){this.mSpaceCB[r]()}this.mSpaceCB=[];this.mRequiredAvailableSpace=0}},getGameList:function(){return this.mGameList},updateGameList:function(q){this.mGameList=q},freeSpace:function(r,q){this.mRequiredAvailableSpace+=r;this.mSpaceCB.push(q);console.log("LocalGameList.freeSpace space=",this.mRequiredAvailableSpace);if(this.mSpaceCB.length==1){console.log("LocalGameList.sending request to native");this._getRepoSpaceSendGen()}},deleteGame:function(t){t=o.NormalizeUrl(t);var x=l(t);this._deleteGameSendGen(x);var r=this;var q=function(){NgLogD("LocalGameList finished deleting game from "+r.mActiveGameKey+" for "+x)};if(this.mGameList){var w=this.mGameList;var u=false;var v;var s=[];for(v=0;v<w.length;++v){if(w[v].name==x){u=true}else{s.push(w[v])}}if(u){NgLogD("LocalGameList found and removed "+x);this.mGameList=s}else{NgLogD("LocalGameList failed to find and remove "+x)}}else{NgLogD("LocalGameList cache not warm, can't remove "+x)}},updateAvailable:function(r,q,s){var t=__ngs.r_(__ngs._16)._int_LGL;t.updateAvailable(r,q,s)},_forwardException:function(q){this.__forwardExceptionSendGen(q)}})}};__ngs._4={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;function c(e){this.add=function(h,g){this.__defineGetter__(h,function(){delete this[h];return this[h]=g()})};for(var d in e){if(e.hasOwnProperty(d)){this.add(d,e[d])}}}a.Device=new c({LifecycleEmitter:function(){return __ngs.r_(__ngs._18).LifecycleEmitter},LocationEmitter:function(){return __ngs.r_(__ngs._1d).LocationEmitter},MemoryEmitter:function(){return __ngs.r_(__ngs._1e).MemoryEmitter},MotionEmitter:function(){return __ngs.r_(__ngs._1f).MotionEmitter},NetworkEmitter:function(){return __ngs.r_(__ngs._1g).NetworkEmitter},OrientationEmitter:function(){return __ngs.r_(__ngs._1b).OrientationEmitter},ShakeEmitter:function(){return __ngs.r_(__ngs._1h).ShakeEmitter},KeyEmitter:function(){return __ngs.r_(__ngs._1i).KeyEmitter},PushNotificationEmitter:function(){return __ngs.r_(__ngs._1j).PushNotificationEmitter},InAppPurchaseEmitter:function(){return __ngs.r_(__ngs._1k).InAppPurchaseEmitter},InAppPurchase:function(){return __ngs.r_(__ngs._1l).InAppPurchase},IPCEmitter:function(){return __ngs.r_(__ngs._1m).IPCEmitter},LayoutEmitter:function(){return __ngs.r_(__ngs._1n).LayoutEmitter},LocalNotification:function(){return __ngs.r_(__ngs._1o).LocalNotification},UsageStats:function(){return __ngs.r_(__ngs._1p).UsageStats},NotificationEmitter:function(){return __ngs.r_(__ngs._1q).NotificationEmitter}});a.Device.__defineGetter__("NotificationEmitter",function(){delete this.UsageStats;return this.UsageStats=__ngs.r_(__ngs._1q).NotificationEmitter});a.Device.__defineGetter__("Diagnostics",function(){delete this.Diagnostics;return this.Diagnostics=__ngs.r_(__ngs._1r).Diagnostics})}};__ngs._5={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;function c(e){this.add=function(h,g){this.__defineGetter__(h,function(){delete this[h];return this[h]=g()})};for(var d in e){if(e.hasOwnProperty(d)){this.add(d,e[d])}}}if(typeof $APP_REQUIREPATHMAP!="undefined"){$APP_REQUIREPATHMAP["NGCore/Client/Core.js"]=a}a.Core=new c({Analytics:function(){return __ngs.r_(__ngs._1s).Analytics},Base64:function(){return __ngs.r_(__ngs._10).Base64},Capabilities:function(){return __ngs.r_(__ngs._7).Capabilities},Class:function(){return __ngs.r_(__ngs._z).Class},Color:function(){return __ngs.r_(__ngs._1t).Color},Vector:function(){return __ngs.r_(__ngs._1u).Vector},Point:function(){return __ngs.r_(__ngs._1v).Point},Size:function(){return __ngs.r_(__ngs._1w).Size},Rect:function(){return __ngs.r_(__ngs._1x).Rect},MessageEmitter:function(){return __ngs.r_(__ngs._1y).MessageEmitter},MessageListener:function(){return __ngs.r_(__ngs._12).MessageListener},ObjectRegistry:function(){return __ngs.r_(__ngs._19).ObjectRegistry},Time:function(){return __ngs.r_(__ngs._1z).Time},toMD5:function(){return __ngs.r_(__ngs._1a).toMD5},SHA1:function(){return __ngs.r_(__ngs._20).SHA1},UpdateEmitter:function(){return __ngs.r_(__ngs._21).UpdateEmitter},Proc:function(){return __ngs.r_(__ngs._6).Proc},Logger:function(){return __ngs.r_(__ngs._c).Logger},LocalGameList:function(){return __ngs.r_(__ngs._3).LocalGameList},Localization:function(){return __ngs.r_(__ngs._8).Localization},_LocalGameList:function(){return __ngs.r_(__ngs._22)._LocalGameList},NativeAppLaunch:function(){return __ngs.r_(__ngs._23).NativeAppLaunch},ErrorEmitter:function(){return __ngs.r_(__ngs._e).ErrorEmitter},Diagnostics:function(){return __ngs.r_(__ngs._24).Diagnostics},DiagnosticEmitter:function(){return __ngs.r_(__ngs._25).DiagnosticEmitter},DiagnosticRegistry:function(){return __ngs.r_(__ngs._25).DiagnosticRegistry},Buffer:function(){return __ngs.r_(__ngs._26).Buffer},UTF8:function(){return __ngs.r_(__ngs._27).UTF8},TypeCheck:function(){return __ngs.r_(__ngs._28).TypeCheck}})}};__ngs._6={_c:null,_d:function(){var e={exports:{}};var c=e.exports;this._c=e;var b=__ngs.r_(__ngs._z).Class;var k=__ngs.r_(__ngs._10).Base64;var a=__ngs.r_(__ngs._19).ObjectRegistry;var g="";var d={strPreCat:function(n,p,m){var o;if(n<<16<0){o="";m=p}else{o=","+p.__objectRegistryId}n=":"+(n>>16)+","+(n<<16>>16);switch(m?m.length:0){case 0:g+=n+o+",";break;case 1:g+=n+o+","+m[0];break;case 2:g+=n+o+","+m[0]+","+m[1];break;case 3:g+=n+o+","+m[0]+","+m[1]+","+m[2];break;case 4:g+=n+o+","+m[0]+","+m[1]+","+m[2]+","+m[3];break;case 5:g+=n+o+","+m[0]+","+m[1]+","+m[2]+","+m[3]+","+m[4];break;case 6:g+=n+o+","+m[0]+","+m[1]+","+m[2]+","+m[3]+","+m[4]+","+m[5];break;case 7:g+=n+o+","+m[0]+","+m[1]+","+m[2]+","+m[3]+","+m[4]+","+m[5]+","+m[6];break;case 8:g+=n+o+","+m[0]+","+m[1]+","+m[2]+","+m[3]+","+m[4]+","+m[5]+","+m[6]+","+m[7];break;case 9:g+=n+o+","+m[0]+","+m[1]+","+m[2]+","+m[3]+","+m[4]+","+m[5]+","+m[6]+","+m[7]+","+m[8];break;case 10:g+=n+o+","+m[0]+","+m[1]+","+m[2]+","+m[3]+","+m[4]+","+m[5]+","+m[6]+","+m[7]+","+m[8]+","+m[9];break;case 11:g+=n+o+","+m[0]+","+m[1]+","+m[2]+","+m[3]+","+m[4]+","+m[5]+","+m[6]+","+m[7]+","+m[8]+","+m[9]+","+m[10];break;case 12:g+=n+o+","+m[0]+","+m[1]+","+m[2]+","+m[3]+","+m[4]+","+m[5]+","+m[6]+","+m[7]+","+m[8]+","+m[9]+","+m[10]+","+m[11];break;case 13:g+=n+o+","+m[0]+","+m[1]+","+m[2]+","+m[3]+","+m[4]+","+m[5]+","+m[6]+","+m[7]+","+m[8]+","+m[9]+","+m[10]+","+m[11]+","+m[12];break;default:g+=n+o+","+m[2]+","+m[3]+","+m[4]+","+m[5]+","+m[6]+","+m[7]+","+m[8]+","+m[9]+","+m[10]+","+m[11]+","+m[12];for(var l=13;l<m.length;l++){g+=","+m[l]}}},strMulCat:function(n,p,m){var o;if(n<<16<0){o="";m=p}else{o=","+p.__objectRegistryId}n=":"+(n>>16)+","+(n<<16>>16);switch(m?m.length:0){case 0:g+=n;g+=o;break;case 1:g+=n;g+=o;g+=m[0];break;case 2:g+=n;g+=o;g+=m[0];g+=",";g+=m[1];break;case 3:g+=n;g+=o;g+=m[0];g+=",";g+=m[1];g+=",";g+=m[2];break;case 4:g+=n;g+=o;g+=m[0];g+=",";g+=m[1];g+=",";g+=m[2];g+=",";g+=m[3];break;case 5:g+=n;g+=o;g+=m[0];g+=",";g+=m[1];g+=",";g+=m[2];g+=",";g+=m[3];g+=",";g+=m[4];break;case 6:g+=n;g+=o;g+=m[0];g+=",";g+=m[1];g+=",";g+=m[2];g+=",";g+=m[3];g+=",";g+=m[4];g+=",";g+=m[5];break;case 7:g+=n;g+=o;g+=m[0];g+=",";g+=m[1];g+=",";g+=m[2];g+=",";g+=m[3];g+=",";g+=m[4];g+=",";g+=m[5];g+=",";g+=m[6];break;case 8:g+=n;g+=o;g+=m[0];g+=",";g+=m[1];g+=",";g+=m[2];g+=",";g+=m[3];g+=",";g+=m[4];g+=",";g+=m[5];g+=",";g+=m[6];g+=",";g+=m[7];break;case 9:g+=n;g+=o;g+=m[0];g+=",";g+=m[1];g+=",";g+=m[2];g+=",";g+=m[3];g+=",";g+=m[4];g+=",";g+=m[5];g+=",";g+=m[6];g+=",";g+=m[7];g+=",";g+=m[8];break;case 10:g+=n;g+=o;g+=m[0];g+=",";g+=m[1];g+=",";g+=m[2];g+=",";g+=m[3];g+=",";g+=m[4];g+=",";g+=m[5];g+=",";g+=m[6];g+=",";g+=m[7];g+=",";g+=m[8];g+=",";g+=m[9];break;case 11:g+=n;g+=o;g+=m[0];g+=",";g+=m[1];g+=",";g+=m[2];g+=",";g+=m[3];g+=",";g+=m[4];g+=",";g+=m[5];g+=",";g+=m[6];g+=",";g+=m[7];g+=",";g+=m[8];g+=",";g+=m[9];g+=",";g+=m[10];break;case 12:g+=n;g+=o;g+=m[0];g+=",";g+=m[1];g+=",";g+=m[2];g+=",";g+=m[3];g+=",";g+=m[4];g+=",";g+=m[5];g+=",";g+=m[6];g+=",";g+=m[7];g+=",";g+=m[8];g+=",";g+=m[9];g+=",";g+=m[10];g+=",";g+=m[11];break;case 13:g+=n;g+=o;g+=m[0];g+=",";g+=m[1];g+=",";g+=m[2];g+=",";g+=m[3];g+=",";g+=m[4];g+=",";g+=m[5];g+=",";g+=m[6];g+=",";g+=m[7];g+=",";g+=m[8];g+=",";g+=m[9];g+=",";g+=m[10];g+=",";g+=m[11];g+=",";g+=m[12];break;default:g+=n;g+=o;g+=",";g+=m[0];g+=",";g+=m[1];g+=",";g+=m[2];g+=",";g+=m[3];g+=",";g+=m[4];g+=",";g+=m[5];g+=",";g+=m[6];g+=",";g+=m[7];g+=",";g+=m[8];g+=",";g+=m[9];g+=",";g+=m[10];g+=",";g+=m[11];g+=",";g+=m[12];for(var l=13;l<m.length;l++){g+=",";g+=m[l]}}},strLoop:function(p,s,o){var r;if(p<<16<0){r="";o=s}else{r=","+s.__objectRegistryId}p=":"+(p>>16)+","+(p<<16>>16);var n=p+r;if(o){for(var q=0,m=o.length;q<m;q++){n+=","+o[q]}}g+=n}};var h=c.Proc=b.singleton({classname:"Proc",initialize:function(){var n=typeof $_GETENGINEENV!=="undefined"?$_GETENGINEENV():undefined;var m=typeof n=="object"?n.engine:undefined;if(typeof n=="object"&&typeof n.boundFunctions=="object"){var l=n.boundFunctions;if(l.queueCommand){this.appendToCommandString=l.queueCommand}if(l.queueSubcommand){this.appendSubcommandToCommandString=l.queueSubcommand}if(l.getCommand){this.getCommandString=l.getCommand}if(l.clearCommand){this.clearCommandString=l.clearCommand}if(l.parseInt){this.parseInt=l.parseInt}if(l.parseFloat){this.parseFloat=l.parseFloat}if(l.parseString){this.parseString=l.parseString}if(l.parseObject){this.parseObject=l.parseObject}if(l.parseBinary){this.parseBinary=l.parseBinary}if(l.encodeString){this.encodeString=l.encodeString}if(l.encodeObject){this.encodeObject=l.encodeObject}if(l.encodeBinary){this.encodeBinary=l.encodeBinary}}else{switch(m){case"v8":case"spiderMonkey":this.appendToCommandString=d.strLoop;break;case"webCore":this.appendToCommandString=d.strPreCat;break;default:this.appendToCommandString=d.strLoop}this.appendSubcommandToCommandString=function(o){g+=","+o.join()}}this.clearCommandString()},appendToCommandString:function(l){this.appendToCommandString.apply(this,arguments)},getCommandString:function(){return g},clearCommandString:function(){g=""},encodeString:k.encode,encodeBinary:k.encodeBinary,encodeObject:function(l){return this.encodeString(JSON.stringify(l))},parseBool:function(l){return l==1?true:false},parseInt:function(l){return parseInt(l,10)},parseFloat:parseFloat,parseString:k.decode,parseBinary:k.decodeBinary,parseObject:function(l){return JSON.parse(this.parseString(l))},setPrivileged:function(){this._privileged=true},isPrivileged:function(){return this._privileged?true:false},_classId:355,_classRecvGen:function(q){q.idx=1;var p=parseInt(q[0],10);var o=parseInt(q[1],10);var r=PROC_METHOD_TABLE[p<<16|(o&65535)];if(r){q.idx++;var l=(o<0)?PROC_CLASS_TABLE[p]:a.idToObject(parseInt(q[q.idx++],10));if(l){r.call(l,q)}else{NgLogW("Object instance could not be found for command "+q+" in _classRecvGen")}}else{var n=PROC_DISPATCH_TABLE[p];if(n){try{n(q)}catch(m){NgHandleException(m)}}else{NgLogE("Unknown class id "+p+" in _classRecvGen")}}},$_commandRecvGen:(function(){var l=(function(p){var n=h.parseInt(p[p.idx++],10);if(n>0){var o=h.parseInt(p[p.idx++],10);var m=a.idToObject(o);if(!m){NgLogE("Object instance could not be found for command "+p+". It may have been destroyed this frame.");return}switch(n){default:NgLogE("Unknown instance method id "+n+" in Proc._commandRecvGen from command: "+p);return}}else{switch(n){case -4:h.__loadScriptsCompleteRecv(p);break;default:NgLogE("Unknown static method id "+n+" in Proc._commandRecvGen from command: "+p);return}}});if(typeof(PROC_DISPATCH_TABLE)==="undefined"){PROC_DISPATCH_TABLE={}}PROC_DISPATCH_TABLE[355]=l;return l})(),$__loadScriptsCompleteRecvGen:function(l,m){if((l.length-l.idx)!==2){NgLogE("Could not parse due to wrong argument count in Proc._loadScriptsComplete from command: "+l);return false}m.callbackId=h.parseString(l[l.idx++]);if(m.callbackId===undefined){NgLogE("Could not parse callbackId in Proc._loadScriptsComplete from command: "+l);return false}m.error=h.parseString(l[l.idx++]);if(m.error===undefined){NgLogE("Could not parse error in Proc._loadScriptsComplete from command: "+l);return false}return true},$_setCoreJSVersionSendGen:function(l){this.appendToCommandString(23330815,[+l])},$__loadScriptsSendGen:function(l,m){this.appendToCommandString(23330814,[h.encodeString(l),+m])},$__loadScripts_pushSendGen:function(l){this.appendSubcommandToCommandString([h.encodeString(l)])},$_loadScripts:function(m,n){if(!this._codeAddingCallbacks){this._codeAddingCallbacks={uidGenerator:1}}this._codeAddingCallbacks[++this._codeAddingCallbacks.uidGenerator]=n;this.__loadScriptsSendGen(this._codeAddingCallbacks.uidGenerator,m.length);for(var l=0;l<m.length;l++){this.__loadScripts_pushSendGen(m[l])}},$__loadScriptsCompleteRecv:function(n,m){var l=n&&this._codeAddingCallbacks[n];if(l){l(m);delete this._codeAddingCallbacks[n]}},$load:function(l,m){setTimeout(m.bind(null,require(l)),1)}})}};__ngs._7={_c:null,_d:function(){var c={exports:{}};var g=c.exports;this._c=c;var a=__ngs.r_(__ngs._z).Class;var e=__ngs.r_(__ngs._19).ObjectRegistry;var n=__ngs.r_(__ngs._6).Proc;function d(r,q,p,o,s){if(r instanceof Array){return d.apply(null,r)}return r<<24|q<<18|p<<12|o<<6|s}function h(o){return[o>>24&63,o>>18&63,o>>12&63,o>>6&63,o&63]}function k(o){return d.apply(null,o.split(/\D/))}function m(o){if(typeof o=="number"){o=h(o)}while(o.length&&(0|o[o.length-1])===0){o.pop()}return o.length?o.join("."):"Invalid Version"}var l=g.Capabilities=a.singleton({classname:"Capabilities",_configFile:"configuration.json",_binaryVersion:0,_effectiveVersion:0,initialize:function(){e.register(this);this._createSendGen(this.__objectRegistryId);this._fields={version:"1.10.1.3",buildDate:"20130301",buildHash:"gd7e3ff9"}},_getConfigFile:function(){return this._configFile},_getAccts:function(){return this._fields._accts},compareBinaryVersion:function(p){var o=(arguments.length==1&&typeof p=="string")?k(p):d.apply(null,arguments);return this._binaryVersion-o},meetsBinaryVersion:function(o){return this.compareBinaryVersion(o)>=0},getConfigs:function(){return this._configuration},getSDKVersion:function(){return this._fields.version},getSDKBuildDate:function(){return this._fields.buildDate},getSDKBuildHash:function(){return this._fields.buildHash},getBinaryVersion:function(){return this._fields.binaryVersion},getApplicationVersion:function(){return this._fields.applicationVersion},getApplicationVersionCode:function(){return this._fields.applicationVersionCode},getBinaryBuildDate:function(){return this._fields.binaryBuildDate},getBinaryBuildHash:function(){return this._fields.binaryBuildHash},getUniqueId:function(){return this._fields.advertisingIdentifier||this._fields.uniqueId},_getClusterFID:function(){return this._fields.uniqueId},isAdTrackingEnabled:function(){return this._fields.adTrackEnabled},getLifetimeName:function(){return this._fields.identifierForVendor||this._fields.lifetimeName},_getDeviceIds:function(){return this._fields.deviceIds},getDeviceName:function(){return this._fields.deviceName},getPlatformOS:function(){return this._fields.platformOs},getPlatformOSVersion:function(){return this._fields.platformOsVersion},getPlatformHW:function(){return this._fields.platformHw},getPhysicalMem:function(){return this._fields.physicalMemory},getPhysicalCpus:function(){return this._fields.physicalCpus},getActiveCpus:function(){return this._fields.activeCpus},getLanguage:function(){return this._fields.language},_getBoot:function(){return this._fields.boot},_getBootServer:function(){return this._fields.bootServer},getBootDir:function(){return this._fields.bootDir},getGameDir:function(){return this._fields.gameDir},getProductName:function(){return this._fields.prodName},_getReferrer:function(){return this._fields.referrer},getContentUrl:function(){return this._fields.contentUrl},getBootGame:function(){return this._fields.bootgame},getStartingServer:function(){return this._fields.startingServer},getBundleGame:function(){return this._fields.bundleGame},getBundleServer:function(){return this._fields.bundleServer},getBundleIdentifier:function(){return this._fields.bundleIdentifier},getGame:function(){return this._fields.game},getServer:function(){return this._fields.server},getUrl:function(){return this._fields.url},getScreenWidth:function(){return this._fields.screenWidth},getScreenHeight:function(){return this._fields.screenHeight},getScreenUnits:function(){return this._fields.screenUnits},getScreenPixelUnits:function(){return this._fields.screenPixelUnits},getMaxTextureSize:function(){return b.getMaxTextureSize()},getMaxTextureUnits:function(){return b.getMaxTextureUnits()},getOglExtensions:function(){return b.getExtensions()},getTmpDir:function(){return this._fields.tmpDir},getHasAccel:function(){return this._fields.hasAccel},getHasGyro:function(){return this._fields.hasGyro},getHasTouch:function(){return this._fields.hasTouch},getHasMultiTouch:function(){return this._fields.hasMultiTouch},getHasGps:function(){return this._fields.hasGps},getHasCompass:function(){return this._fields.hasCompass},getHasHwKeyboard:function(){return this._fields.hasHwKeyboard},getHasBackButton:function(){return this._fields.hasBackButton},getHasCamera:function(){return this._fields.hasCamera},getHasWwan:function(){return this._fields.hasWwan},getHasWifi:function(){return this._fields.hasWifi},getCarrier:function(){return this._fields.carrier},getIntentUrl:function(){return this._fields.intentUrl},getIntentAction:function(){return this._fields.intentAction},getStatusBarHeight:function(){return this._fields.statusBarHeight},getLocale:function(){return this._fields.locale},getAvailableFonts:function(){return this._deserializedFonts||(this._deserializedFonts=JSON.parse(this._fields.availableFonts))},getAutorotateDisabled:function(){return this._fields.autorotateDisabled||false},getInstallReferrer:function(){return this._fields.installReferrer},getSocialServer:function(){return this.socialServer},getDistributionName:function(){return this._fields.distributionName},getBinaryDistributionName:function(){return this._fields.binaryDistributionName},getSourceAppID:function(){return this._fields.sourceAppID},getAppSignatures:function(){return this._fields.appSignatures},getAppReleaseVersion:function(){return this._releaseVersion},getSimCountryCode:function(){return this._fields.simCountryCode},getNetworkCountryCode:function(){return this._fields.networkCountryCode},getIsDisaggregated:function(){return this._fields.isDisaggregated},_getLogToFile:function(){return this._fields.logToFile},getUdpAvailable:function(){if(this.getPlatformOS()=="Android"||this.getPlatformOS()=="iPhone OS"){if(this.compareBinaryVersion(1,6,5)>=0){return true}}return false},getTcpAvailable:function(){if(this.compareBinaryVersion(1,6,5)>=0){return true}return false},getSslAvailable:function(){if(this.compareBinaryVersion(1,6,5)>=0){return true}return false},_getPendingNotification:function(){var o=this._fields.pendingNotification;this._fields.pendingNotification=null;if(o){return JSON.parse(o)}return null},_init:function(t){var s=[];NgParseCommandDictionary(t,2,this._fields,s);try{var o=/(https?:\/\/.+?)\/(.*)/.exec(this._fields.url);this._fields.server=o[1];this._fields.game=o[2]}catch(r){NgLogException(r)}if(!this._fields.intentUrl){this._fields.intentUrl=""}if(this._fields._accts){try{this._fields._accts=JSON.parse(this._fields._accts)}catch(r){NgLogE("Unable to parse Accounts! "+this._fields._accts);NgLogException(r)}}try{this._configuration=JSON.parse(this._fields.configJSON);this._fields.contentUrl=this._configuration.contentUrl;this.socialServer=this._configuration.socialServer;this._releaseVersion=this._configuration.releaseVersion}catch(r){NgLogE("Unable to parse config!! ("+this._fields.configJSON+")");NgLogException(r)}try{var q=k((this.getSDKVersion()||"1.0").match(/[\.\d]+$/)[0]);n._setCoreJSVersionSendGen(q);this._binaryVersion=k((this.getBinaryVersion()||"1.0").match(/[\.\d]+$/)[0]);this._effectiveVersion=Math.min(this._binaryVersion,q)}catch(r){NgLogE("Unable to parse version strings!");NgLogException(r)}try{var p;if(this.getPlatformOS()=="Android"){p={AID:this._fields.lifetimeName,TID:this._fields.uniqueId};if(this._fields.installReferrer){p.RID=this._fields.installReferrer}}else{if(this._fields.advertisingIdentifier&&this._fields.identifierForVendor&&!this._fields.identifierForVendor.match("0+-0+-0+-0+-0+")&&!this._fields.advertisingIdentifier.match("0+-0+-0+-0+-0+")){p={IFA:this._fields.advertisingIdentifier,IFV:this._fields.identifierForVendor,UDID:this._fields.uniqueId}}else{p={UDID:this._fields.uniqueId}}}this._fields.deviceIds=p;console.log("dict : deviceIds : "+JSON.stringify(this._getDeviceIds()))}catch(r){NgLogE("dict : Unable to set up device identifiers!!");NgLogException(r)}console.log("dict : JS version : "+this.getSDKVersion());console.log("dict : JS build date : "+this.getSDKBuildDate());console.log("dict : JS build hash : "+this.getSDKBuildHash());console.log("dict : contentUrl : "+this._fields.contentUrl);console.log("dict : socialServer : "+this.socialServer);console.log("dict : releaseVersion : "+this._releaseVersion)},_classId:301,$_createSendGen:function(o){n.appendToCommandString(19791871,[+o])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[301]=this._instance||this}});var b=g.Capabilities.OpenGL=a.singleton({getExtensions:function(){if(!this._extensions&&l._fields.oglExtensions){this._extensions=JSON.parse(l._fields.oglExtensions)}return this._extensions},getMaxTextureSize:function(){return l._fields.oglMaxTextureSize},getMaxTextureUnits:function(){return l._fields.oglMaxTextureUnits},getVendor:function(){return l._fields.oglVendor}})}};__ngs._8={_c:null,_d:function(){var g={exports:{}};var c=g.exports;this._c=g;var a=__ngs.r_(__ngs._7).Capabilities;var b=__ngs.r_(__ngs._1y).MessageEmitter;var d=__ngs.r_(__ngs._d).FileSystem;var e=c.LocalizationEngine=b.subclass({classname:"Localization",directoryPath:null,languageFilePath:null,initialize:function(h){if(!h){h="./Content/Localization/"}NgLogD("Localization : init ("+h+")");this.directoryPath=h;this.setLanguage(a.getLanguage())},setLanguage:function(l){var k=this.languageFilePath=this.directoryPath+l+".json";var h=this;NgLogD("Localization : reading json file "+k);NgLogT("@@@ Localization.setLanguage readFile "+k+" +");d.readFile(k,{},function(m,n){NgLogT("@@@ Localization.setLanguage readFile "+k+" -");if(m===""){NgLogD("Localization : successfully read json file "+k);h.setDictionary(l,JSON.parse(n))}else{NgLogD("Localization: unable to read json file "+k+", use default english setting instead");h.setDictionary(l,null)}})},setDictionary:function(h,k){this._lang=h;this._dictionary=k;this.emit(this._lang)},getString:function(k){if(this._dictionary&&typeof this._dictionary==="object"){var h=this._dictionary[k];if(h&&typeof h!=="undefined"){return h}}return this.unknownString(k)},unknownString:function(h){NgLogD("Localization: ... No localization for "+h+" in "+this._lang);return h}});c.Localization=e.singleton({})}};__ngs._9={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var e=__ngs.r_(__ngs._6).Proc;var a=__ngs.r_(__ngs._z).Class;var d=__ngs.r_(__ngs._29).Diagnostics;b.Device=a.singleton({classname:"Device",initialize:function(){var g=__ngs.r_(__ngs._7).Capabilities;var k=__ngs.r_(__ngs._19).ObjectRegistry;k.register(this);this._createSendGen(this.__objectRegistryId);this._volume=(g.getPlatformOS().toLowerCase()=="flash")?1:undefined;var m=__ngs.r_(__ngs._17).KeyValueCache;var l=m.global("Audio.Device.InitialValues");var h=this;l.getItem("effectsVolume",{},function(n,o){if(n){NgLogW("Audio.Device: failed in getting device volume: "+n);h._volume=1}else{h._volume=parseFloat(o)}});this.resetEffectsRequests={};this.cbIdCounter=1;this.effectCount=0;this.effectList=[];d.pushCollector(this.collectDeviceInfo.bind(this))},getEffectsVolume:function(){return this._volume},setEffectsVolume:function(g){if(g<0){g=0}if(g>1){g=1}this._volume=g;this._setEffectsVolumeSendGen(g);return this},playDetached:function(g){this._playDetachedSendGen(g);return this},resetEffects:function(h){var k=0;var g=__ngs.r_(__ngs._7).Capabilities;if(g.getPlatformOS().toLowerCase()=="android"){if(h){k=this.cbIdCounter++;this.resetEffectsRequests[k]=h}this._resetEffectsSendGen(k)}else{if(typeof(h)=="function"){h()}}return this},_resetEffectsCbRecv:function(h){var g=h&&this.resetEffectsRequests[h];if(g){delete this.resetEffectsRequests[h];g()}else{NgLogE("Audio Device command : No registered cb found..cbId is :"+h);return}},effectCreated:function(g){this.effectCount++;this.effectList.push(g)},effectDestroyed:function(){var g=this.effectList.indexOf(this._path);if(g>=0){this.effectList.splice(g,1)}this.effectCount--},collectDeviceInfo:function(h,g){var k={volume:this._volume};if(d.includeDetails()){k.effects={count:this.effectCount,effectPaths:this.effectList}}else{k.effects={count:this.effectCount}}return k},_setInitialVolume:function(g){this._volume=g},_classId:327,_resetEffectsCbRecvGen:function(h){if((h.length-h.idx)!==1){NgLogE("Could not parse due to wrong argument count in Device.resetEffectsCb from command: "+h);return false}var g=e.parseInt(h[h.idx++]);if(g===undefined){NgLogE("Could not parse callbackId in Device.resetEffectsCb from command: "+h);return false}return this._resetEffectsCbRecv(g)},$_createSendGen:function(g){e.appendToCommandString(21495807,[+g])},_setEffectsVolumeSendGen:function(g){e.appendToCommandString(21430274,this,[+g])},_playDetachedSendGen:function(g){e.appendToCommandString(21430275,this,[e.encodeString(g)])},_resetEffectsSendGen:function(g){e.appendToCommandString(21430276,this,[+g])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[327]=this._instance||this;PROC_METHOD_TABLE[21430277]=this.prototype._resetEffectsCbRecvGen}})}};__ngs._a={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;function c(e){this.add=function(h,g){this.__defineGetter__(h,function(){delete this[h];return this[h]=g()})};for(var d in e){if(e.hasOwnProperty(d)){this.add(d,e[d])}}}a.Storage=new c({KeyValue:function(){return __ngs.r_(__ngs._17).KeyValue},KeyValueCache:function(){return __ngs.r_(__ngs._17).KeyValueCache},FileSystem:function(){return __ngs.r_(__ngs._d).FileSystem},Diagnostics:function(){return __ngs.r_(__ngs._2a).Diagnostics}})}};__ngs._b={_c:null,_d:function(){var d={exports:{}};var g=d.exports;this._c=d;var b=__ngs.r_(__ngs._z).Class;var l=__ngs.r_(__ngs._2b).Commands;var h=__ngs.r_(__ngs._7).Capabilities;var e=__ngs.r_(__ngs._19).ObjectRegistry;var k=__ngs.r_(__ngs._2c).AbstractView;var c=__ngs.r_(__ngs._2d).Element;var a=__ngs.r_(__ngs._2e).Rect;var m=__ngs.r_(__ngs._2f).WindowLayer;l.Window=g.Window=b.singleton({_outerWidth:0,_outerHeight:0,_width:0,_height:0,initialize:function(){if(!this._outerWidth||!this._outerHeight){this.setWidthAndHeight(h.getScreenWidth(),h.getScreenHeight())}if(!this._width||!this._height){this._setWidthAndHeight(h.getScreenWidth(),h.getScreenHeight())}l.instantiate();Device.LayoutEmitter._setWindow(this);NgLogD("window: outer = "+this._outerWidth+"  "+this._outerHeight+" frame = "+this._width+"  "+this._height)},document:m.singleton({type:"document",register:function(){this.__objectRegistryId=0}}),_layers:{},_getLayer:function(n){return this._layers[n]||(this._layers[n]=new m({level:n||0}))},destroyObject:function(n){n.removeFromParent();l.destroy.call(n);e.unregister(n)},handleCommand:function(o){var n=NgParseCommand2(o,NgParseInt,NgParseBase64);this.doCommand(n[1])},setStatusBarHidden:function(n){l.setStatusBarHidden(n);this._outerHeight=h.getScreenHeight()-(n?0:(h.getStatusBarHeight()||0))},doCommand:function(q){var t=typeof q=="string"?JSON.parse(q):q;if(t.name=="callback"){var n=l.takeTemporaryCallback(t.callback_id);if(typeof n=="function"){n(t)}}else{var o=e.idToObject(t.objId);if(o instanceof c){switch(t.name){case"event":o.performEventCallback(t);break;case"update":var p=t.properties||{};for(var r in p){try{var u=o["update"+r.charAt(0).toUpperCase()+r.substr(1)];if(typeof u=="function"){u.apply(o,[p[r]])}else{o["_"+r]=p[r]}}catch(s){}}break;default:o.handleCommand(t)}}else{console.log("Message received for non-element object with id "+t.objId);return}}},log:function(n){NgLogD(n.toString())},getWidth:function(){return this._width},getHeight:function(){return this._height},getOuterWidth:function(){return this._outerWidth},getOuterHeight:function(){return this._outerHeight},getFrame:function(){return new a(0,0,this._width,this._height)}});l.Window.__defineGetter__("outerWidth",function(){return this.getOuterWidth()});l.Window.__defineGetter__("outerHeight",function(){return this.getOuterHeight()});l.Window._setWidthAndHeight=function(o,n){console.log("window: set layout size to: "+o+"  "+n);this._width=o;this._height=n};l.Window.setWidthAndHeight=function(o,n){console.log("window: set outer size to: "+o+"  "+n);this._outerWidth=o;this._outerHeight=n}}};__ngs._c={_c:null,_d:function(){var e={exports:{}};var d=e.exports;this._c=e;var c=__ngs.r_(__ngs._z).Class;var h=__ngs.r_(__ngs._6).Proc;var b=__ngs.r_(__ngs._19).ObjectRegistry;var k=__ngs.r_(__ngs._2g).sprintf;var g=__ngs.r_(__ngs._10).Base64;var a=c.singleton({classname:"Logger",initialize:function(){b.register(this);this._createSendGen(this.__objectRegistryId);timingLog=function(m,l){}},_disable:function(){console.log("Logger : javascript logging disabled");console.log=a.log=function(m,l){};timingLog=function(m,l){}},_enable:function(l){timingLog=function(q,n){var o;if(arguments.length>1){try{var s=[];for(o=0;o<arguments.length;++o){s[o]=arguments[o]}var m=k(s);s.unshift(m);q=s.join(" ")}catch(p){var r=[];for(o=0;o<arguments.length;++o){r[o]=arguments[o]}q=r.join(" ")}}__underscore_SysLog(q)};if(l){return}console.log=a.log=function(q,n){if(arguments.length>1){var o;try{var s=[];for(o=0;o<arguments.length;++o){s[o]=arguments[o]}var m=k(s);s.unshift(m);q=s.join(" ")}catch(p){var r=[];for(o=0;o<arguments.length;++o){r[o]=arguments[o]}q=r.join(" ")}}if(typeof q!=="string"){q=""+q}__underscore_SysLog(q)};console.log("Logger : javascript logging enabled")},log:function(m,l){},_classId:305,$_createSendGen:function(l){h.appendToCommandString(20054015,[+l])},_logSendGen:function(l){h.appendToCommandString(19988482,this,[h.encodeString(l)])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[305]=this._instance||this}});a.instantiate();__underscore_SysLog=function(l){a._logSendGen(l)};if(typeof(_NG_TARGET_FLASH)=="undefined"){console.log=a.log}d.Logger=a}};__ngs._d={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var h=__ngs.r_(__ngs._6).Proc;var b=__ngs.r_(__ngs._z).Class;var a=__ngs.r_(__ngs._7).Capabilities;var g=__ngs.r_(__ngs._2a).Diagnostics;var e=function(l,k){this.code=l;this.description=k;return this};e.prototype={classname:"FileSystemError",toString:function(){return this.className+" "+this.code+": "+this.description}};c.FileSystem=b.singleton({classname:"FileSystem",_options:{blocking:1,binary:2,useBinaryCb:4,returnFiles:256,returnMd5:512},initialize:function(){this.readRequests={};this.writeRequests={};this.statRequests={};this.cbIdCounter=1;var k=__ngs.r_(__ngs._19).ObjectRegistry;k.register(this);this._createSendGen(this.__objectRegistryId);this._readCount=0;this._writeCount=0;this._deleteCount=0;this._renameCount=0;this._decompressCount=0;this._statCount=0;g.pushCollector(this.collectDiagnostics.bind(this))},readFile:function(m,l,k){this.readFileIn(this.Store.Local,m,l,k)},readFileIn:function(l,q,m,k){var p,n=0;this._readCount++;if(typeof(m)!=="object"){NgLogW("FileSystem.readFile/readFileIn(): using deprecated function signature");var o=m;if(typeof(o)=="function"){k=o;o=false}o=o||false;if(k){n=this.cbIdCounter++;this.readRequests[n]=k}p=this._options.blocking;if(o){p|=this._options.binary|this._options.useBinaryCb}this._readFileAsyncSendGen(n,l,q,p)}else{p=0;if(m.blocking){p|=this._options.blocking}if(m.binary){p|=this._options.binary|this._options.useBinaryCb}if(k){n=this.cbIdCounter++;this.readRequests[n]=k}this._readFileAsyncSendGen(n,l,q,p)}},writeFile:function(n,m,l,k){this.writeFileIn(this.Store.Local,n,m,l,k)},_safeWrite:function(p,o,l,k){var n=p+".fstmp"+Math.random();var m=function(q){if(q){k(q)}else{this.renameFile(n,p,l,k)}}.bind(this);this.writeFile(n,o,l,m)},writeFileIn:function(l,r,o,m,k){var n=0;this._writeCount++;if(typeof(m)!=="object"){NgLogW("FileSystem.writeFile/writeFileIn(): using deprecated function signature");var q=m;if(typeof(q)=="function"){k=q;q=false}q=q||false;if(k){n=this.cbIdCounter++;this.writeRequests[n]=k}this._writeFileSendGen(n,l,r,o,q)}else{var p=0;if(m.blocking){p|=this._options.blocking}if(m.binary){p|=this._options.binary}if(k){n=this.cbIdCounter++;this.writeRequests[n]=k}if((p&this._options.binary)!==0&&a.compareBinaryVersion(1,4)>=0){this._writeFileAsyncBinarySendGen(n,l,r,o,p)}else{this._writeFileAsyncSendGen(n,l,r,o,p)}}},deleteFile:function(m,l,k){this.deleteFileIn(this.Store.Local,m,l,k)},deleteFileIn:function(l,p,m,k){var n=0;this._deleteCount++;if(typeof(m)!=="object"){NgLogW("FileSystem.deleteFile/deleteFileIn(): using deprecated function signature");k=m;if(k){n=this.cbIdCounter++;this.writeRequests[n]=k}this._deleteFileSendGen(n,l,p)}else{var o=0;if(m.blocking){o|=this._options.blocking}if(k){n=this.cbIdCounter++;this.writeRequests[n]=k}this._deleteFileAsyncSendGen(n,l,p,o)}},decompressFile:function(n,l,m,k){this.decompressFileIn(this.Store.Local,n,l,m,k)},decompressFileIn:function(m,r,l,n,k){var p=0;this._decompressCount++;if(typeof(n)!=="object"){NgLogW("FileSystem.decompressFile/decompressFileIn(): using deprecated function signature");var o=n;if(k){p=this.cbIdCounter++;this.writeRequests[p]=k}this._decompressFileSendGen(p,m,r,l,o)}else{var q=0;if(n.blocking){q|=this._options.blocking}if(n.returnFiles){q|=this._options.returnFiles}if(k){p=this.cbIdCounter++;this.writeRequests[p]=k}this._decompressFileAsyncSendGen(p,m,r,l,q)}},renameFile:function(n,m,l,k){this.renameFileIn(this.Store.Local,n,m,l,k)},renameFileIn:function(l,q,o,m,k){var n=0;var p=0;this._renameCount++;if(a.compareBinaryVersion(1,4)<0){if(typeof(m)=="function"){k=m}if(k){k("Not supported")}return}if(typeof(m)!=="object"){k=m}else{if(m.blocking){p|=this._options.blocking}}if(k){n=this.cbIdCounter++;this.writeRequests[n]=k}this._renameFileAsyncSendGen(n,l,q,o,p)},unpack:function(l,k){this.stat(l,{},k)},stat:function(m,l,k){this.statIn(this.Store.Local,m,l,k)},statIn:function(l,n,m,k){var o=0;var p=0;this._statCount++;if(a.compareBinaryVersion(1,6)<0){if(typeof(m)=="function"){k=m}if(k){k(new e(this.ErrorCode.Unsupported,"Not Supported"))}return}if(typeof(m)!=="object"){k=m}else{if(m.blocking){p=this._options.blocking}if(m.returnMd5){p|=this._options.returnMd5}}if(k){o=this.cbIdCounter++;this.statRequests[o]=k}this._statAsyncSendGen(o,l,n,p)},registerManifest:function(l,k){if(k){k("")}},_readFileCbRecv:function(m,l,k){this._readFileCbRecvCore(m,l,k)},_readFileBinaryCbRecv:function(m,l,k){this._readFileCbRecvCore(m,l,k)},_readFileCbRecvCore:function(m,n,l){var k=m&&this.readRequests[m];if(k){delete this.readRequests[m];k(l,n)}else{NgLogE("FileSystem.onReadFile: No callback found for id :"+m)}},_writeFileCbRecv:function(m,l){var k=m&&this.writeRequests[m];if(k){delete this.writeRequests[m];k(l)}else{NgLogE("FileSystem onWriteFile : No callback found for id :"+m)}},_deleteFileCbRecv:function(m,l){var k=m&&this.writeRequests[m];if(k){delete this.writeRequests[m];k(l)}else{NgLogE("FileSystem onDeleteFile : No callback found for id :"+m)}},_decompressFileCbRecv:function(m,n,l){var k=m&&this.writeRequests[m];if(k){try{n=JSON.parse(n)}catch(o){NgLogE("FileSystem onDecompressFile : Could not parse response :"+n);l="Could not parse files";n=[]}delete this.writeRequests[m];try{k(l,n)}catch(o){console.log("Error calling back on decompressFile!");NgLogException(o)}}else{NgLogE("FileSystem onDecompressFile : No callback found for id :"+m)}},_renameFileCbRecv:function(m,l){var k=m&&this.writeRequests[m];if(k){delete this.writeRequests[m];k(l)}else{NgLogE("FileSystem onRenameFile : No callback found for id :"+m)}},_statCbRecv:function(m,n,l){var k=m&&this.statRequests[m];if(k){delete this.statRequests[m];k(l?JSON.parse(l):null,n?JSON.parse(n):null)}else{NgLogE("FileSystem onStatFile : No callback found for id :"+m)}},_registerManifestCbRecv:function(m,l){var k=m&&this.registerManifestRequests[m];if(k){delete this.registerManifestRequests[m];k(l)}else{NgLogE(" FileSystem onRegisterManifest : No callback found for id :"+m)}},_readLineRangeFromFile:function(k,r,q,s,l,n,m){if(!a.meetsBinaryVersion("1.8.5")){m("incompatible binary");return}var o,p=0;this._readCount++;if(typeof(r)!=="object"){o=this._options.blocking}else{o=0;if(r.blocking){o|=this._options.blocking}}if(m){p=this.cbIdCounter++;this.readRequests[p]=m}this._readLineRangeFromFileAsyncSendGen(p,this.Store.Local,k,q,s,l,n,o)},Store:{Temp:0,Local:1},ErrorCode:{Unknown:-1,NotFound:-2,Unsupported:-3},_classId:338,_readFileCbRecvGen:function(n){if((n.length-n.idx)!==3){NgLogE("Could not parse due to wrong argument count in FileSystem.readFileCb from command: "+n);return false}var m=h.parseInt(n[n.idx++]);if(m===undefined){NgLogE("Could not parse callbackId in FileSystem.readFileCb from command: "+n);return false}var l=h.parseString(n[n.idx++]);if(l===undefined){NgLogE("Could not parse data in FileSystem.readFileCb from command: "+n);return false}var k=h.parseString(n[n.idx++]);if(k===undefined){NgLogE("Could not parse error in FileSystem.readFileCb from command: "+n);return false}return this._readFileCbRecv(m,l,k)},_writeFileCbRecvGen:function(m){if((m.length-m.idx)!==2){NgLogE("Could not parse due to wrong argument count in FileSystem.writeFileCb from command: "+m);return false}var l=h.parseInt(m[m.idx++]);if(l===undefined){NgLogE("Could not parse callbackId in FileSystem.writeFileCb from command: "+m);return false}var k=h.parseString(m[m.idx++]);if(k===undefined){NgLogE("Could not parse error in FileSystem.writeFileCb from command: "+m);return false}return this._writeFileCbRecv(l,k)},_deleteFileCbRecvGen:function(m){if((m.length-m.idx)!==2){NgLogE("Could not parse due to wrong argument count in FileSystem.deleteFileCb from command: "+m);return false}var l=h.parseInt(m[m.idx++]);if(l===undefined){NgLogE("Could not parse callbackId in FileSystem.deleteFileCb from command: "+m);return false}var k=h.parseString(m[m.idx++]);if(k===undefined){NgLogE("Could not parse error in FileSystem.deleteFileCb from command: "+m);return false}return this._deleteFileCbRecv(l,k)},_decompressFileCbRecvGen:function(n){if((n.length-n.idx)!==3){NgLogE("Could not parse due to wrong argument count in FileSystem.decompressFileCb from command: "+n);return false}var m=h.parseInt(n[n.idx++]);if(m===undefined){NgLogE("Could not parse callbackId in FileSystem.decompressFileCb from command: "+n);return false}var l=h.parseString(n[n.idx++]);if(l===undefined){NgLogE("Could not parse files in FileSystem.decompressFileCb from command: "+n);return false}var k=h.parseString(n[n.idx++]);if(k===undefined){NgLogE("Could not parse error in FileSystem.decompressFileCb from command: "+n);return false}return this._decompressFileCbRecv(m,l,k)},_readFileBinaryCbRecvGen:function(n){if((n.length-n.idx)!==3){NgLogE("Could not parse due to wrong argument count in FileSystem.readFileBinaryCb from command: "+n);return false}var m=h.parseInt(n[n.idx++]);if(m===undefined){NgLogE("Could not parse callbackId in FileSystem.readFileBinaryCb from command: "+n);return false}var l=h.parseBinary(n[n.idx++]);if(l===undefined){NgLogE("Could not parse data in FileSystem.readFileBinaryCb from command: "+n);return false}var k=h.parseString(n[n.idx++]);if(k===undefined){NgLogE("Could not parse error in FileSystem.readFileBinaryCb from command: "+n);return false}return this._readFileBinaryCbRecv(m,l,k)},_renameFileCbRecvGen:function(m){if((m.length-m.idx)!==2){NgLogE("Could not parse due to wrong argument count in FileSystem.renameFileCb from command: "+m);return false}var l=h.parseInt(m[m.idx++]);if(l===undefined){NgLogE("Could not parse callbackId in FileSystem.renameFileCb from command: "+m);return false}var k=h.parseString(m[m.idx++]);if(k===undefined){NgLogE("Could not parse error in FileSystem.renameFileCb from command: "+m);return false}return this._renameFileCbRecv(l,k)},_registerManifestCbRecvGen:function(m){if((m.length-m.idx)!==2){NgLogE("Could not parse due to wrong argument count in FileSystem.registerManifestCb from command: "+m);return false}var l=h.parseInt(m[m.idx++]);if(l===undefined){NgLogE("Could not parse callbackId in FileSystem.registerManifestCb from command: "+m);return false}var k=h.parseString(m[m.idx++]);if(k===undefined){NgLogE("Could not parse error in FileSystem.registerManifestCb from command: "+m);return false}return this._registerManifestCbRecv(l,k)},_statCbRecvGen:function(n){if((n.length-n.idx)!==3){NgLogE("Could not parse due to wrong argument count in FileSystem.statCb from command: "+n);return false}var m=h.parseInt(n[n.idx++]);if(m===undefined){NgLogE("Could not parse callbackId in FileSystem.statCb from command: "+n);return false}var l=h.parseString(n[n.idx++]);if(l===undefined){NgLogE("Could not parse data in FileSystem.statCb from command: "+n);return false}var k=h.parseString(n[n.idx++]);if(k===undefined){NgLogE("Could not parse error in FileSystem.statCb from command: "+n);return false}return this._statCbRecv(m,l,k)},$_createSendGen:function(k){h.appendToCommandString(22216703,[+k])},_readFileSendGen:function(m,k,l,n){h.appendToCommandString(22151170,this,[+m,+k,h.encodeString(l),(n?1:0)])},_writeFileSendGen:function(n,k,l,m,o){h.appendToCommandString(22151171,this,[+n,+k,h.encodeString(l),h.encodeString(m),(o?1:0)])},_deleteFileSendGen:function(m,k,l){h.appendToCommandString(22151172,this,[+m,+k,h.encodeString(l)])},_decompressFileSendGen:function(o,l,m,k,n){h.appendToCommandString(22151173,this,[+o,+l,h.encodeString(m),h.encodeString(k),(n?1:0)])},_readFileAsyncSendGen:function(n,k,l,m){h.appendToCommandString(22151178,this,[+n,+k,h.encodeString(l),+m])},_writeFileAsyncSendGen:function(o,k,l,n,m){h.appendToCommandString(22151179,this,[+o,+k,h.encodeString(l),h.encodeString(n),+m])},_deleteFileAsyncSendGen:function(n,k,l,m){h.appendToCommandString(22151180,this,[+n,+k,h.encodeString(l),+m])},_decompressFileAsyncSendGen:function(o,l,m,k,n){h.appendToCommandString(22151181,this,[+o,+l,h.encodeString(m),h.encodeString(k),+n])},_writeFileAsyncBinarySendGen:function(o,k,l,n,m){h.appendToCommandString(22151183,this,[+o,+k,h.encodeString(l),h.encodeBinary(n),+m])},_renameFileAsyncSendGen:function(n,k,o,m,l){h.appendToCommandString(22151184,this,[+n,+k,h.encodeString(o),h.encodeString(m),+l])},_registerManifestSendGen:function(l,k){h.appendToCommandString(22151186,this,[+l,h.encodeString(k)])},_statAsyncSendGen:function(n,k,m,l){h.appendToCommandString(22151188,this,[+n,+k,h.encodeString(m),+l])},_readLineRangeFromFileAsyncSendGen:function(p,l,m,r,k,o,q,n){h.appendToCommandString(22151190,this,[+p,+l,h.encodeString(m),+r,+k,+o,+q,+n])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[338]=this._instance||this;PROC_METHOD_TABLE[22151174]=this.prototype._readFileCbRecvGen;PROC_METHOD_TABLE[22151175]=this.prototype._writeFileCbRecvGen;PROC_METHOD_TABLE[22151176]=this.prototype._deleteFileCbRecvGen;PROC_METHOD_TABLE[22151177]=this.prototype._decompressFileCbRecvGen;PROC_METHOD_TABLE[22151182]=this.prototype._readFileBinaryCbRecvGen;PROC_METHOD_TABLE[22151185]=this.prototype._renameFileCbRecvGen;PROC_METHOD_TABLE[22151187]=this.prototype._registerManifestCbRecvGen;PROC_METHOD_TABLE[22151189]=this.prototype._statCbRecvGen},collectDiagnostics:function(l,k){var m={readFile:{count:this._readCount},writeFile:{count:this._writeCount},deleteFile:{count:this._deleteCount},renameFile:{count:this._renameCount},decompressFile:{count:this._decompressCount},stat:{count:this._statCount}};return m}})}};__ngs._e={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var a=__ngs.r_(__ngs._1y).MessageEmitter;var b=__ngs.r_(__ngs._19).ObjectRegistry;var e=__ngs.r_(__ngs._6).Proc;c.ErrorEmitter=a.singleton({classname:"ErrorEmitter",initialize:function(){b.register(this);this._createSendGen(this.__objectRegistryId);this._errorReportPostUrl=null},setErrorReportPostUrl:function(g){this._errorReportPostUrl=g},_raiseRecv:function(g){this.emit(g)},_handleUncaughtException:function(g){var h=this;if(this._hasErrorReportUrl()){this._checkUserHasAcceptedSendingErrorReport(function(k){if(k){h._sendErrorReport(g);return}h._checkUserHasAskedForPermission(function(l){if(l){return}h._showErrorReportAskPermissionDialog(function(m){if(m){h._setUserAcceptedSendingErrorReport();h._sendErrorReport(g)}else{h._setAlreadyAsked()}})})})}this.emit(g)},_hasErrorReportUrl:function(){return this._errorReportPostUrl!==null},_checkUserHasAcceptedSendingErrorReport:function(k){var h=__ngs.r_(__ngs._17).KeyValueCache;var g=h.global("ErrorReporter");return g.getItem("userHasAcceptedSendingErrorReport",{},function(l,m){k(l?false:m)})},_checkUserHasAskedForPermission:function(k){var h=__ngs.r_(__ngs._17).KeyValueCache;var g=h.global("ErrorReporter");return g.getItem("userHasAskedForPermission",{},function(l,m){k(l?false:m)})},_setAlreadyAsked:function(){var h=__ngs.r_(__ngs._17).KeyValueCache;var g=h.global("ErrorReporter");g.setItem("userHasAskedForPermission","true",{},function(){})},_setUserAcceptedSendingErrorReport:function(){var h=__ngs.r_(__ngs._17).KeyValueCache;var g=h.global("ErrorReporter");g.setItem("userHasAcceptedSendingErrorReport","true",{},function(){})},_showErrorReportAskPermissionDialog:function(k){var h=__ngs.r_(__ngs._1c).AlertDialog;var g=new h({title:"Application has a problem",text:"Send an error report to the developer?",choices:["No","Yes"]});g.setOnChoice(function(l){g.hide();k(l.choice===1)});g.show()},_sendErrorReport:function(l){var g=this._gatherEnvironmentInfo();var m=JSON.stringify({environment:g,error:l});var k=__ngs.r_(__ngs._13).XHR;var h=new k();h.open("POST",this._errorReportPostUrl,true);h.onreadystatechange=function(){};h.send(m)},_gatherEnvironmentInfo:function(){var g=__ngs.r_(__ngs._7).Capabilities;var h={SDKVersion:g.getSDKVersion(),SDKBuildDate:g.getSDKBuildDate(),SDKBuildHash:g.getSDKBuildHash(),BinaryVersion:g.getBinaryVersion(),BinaryBuildDate:g.getBinaryBuildDate(),DeviceName:g.getDeviceName(),PlatformOS:g.getPlatformOS(),PlatformOsVersion:g.getPlatformOSVersion(),PlatformHW:g.getPlatformHW(),PhysicalMem:g.getPhysicalMem(),PhysicalCpus:g.getPhysicalCpus(),ActiveCpus:g.getActiveCpus(),Language:g.getLanguage(),BootDir:g.getBootDir(),GameDir:g.getGameDir(),ProductName:g.getProductName(),ContentUrl:g.getContentUrl(),BootGame:g.getBootGame(),StartingServer:g.getStartingServer(),BundleGame:g.getBundleGame(),BundleServer:g.getBundleServer(),BundleIdentifier:g.getBundleIdentifier(),Game:g.getGame(),Server:g.getServer(),Url:g.getUrl(),ScreenWidth:g.getScreenWidth(),ScreenHeight:g.getScreenHeight(),ScreenUnits:g.getScreenUnits(),ScreenPixelUnits:g.getScreenPixelUnits(),MaxTextureSize:g.getMaxTextureSize(),MaxTextureUnits:g.getMaxTextureUnits(),OglExtentions:g.getOglExtensions(),HasAccel:g.getHasAccel(),HasGyro:g.getHasGyro(),HasTouch:g.getHasTouch(),HasMultiTouch:g.getHasMultiTouch(),HasGps:g.getHasGps(),HasCompass:g.getHasCompass(),HasHwKeyboard:g.getHasHwKeyboard(),HasBackButton:g.getHasBackButton(),HasCamera:g.getHasCamera(),HasWwan:g.getHasWwan(),HasWifi:g.getHasWifi(),Career:g.getCarrier(),Locale:g.getLocale(),AppReleaseVersion:g.getAppReleaseVersion(),SimCountryCode:g.getSimCountryCode(),NetworkCountryCode:g.getNetworkCountryCode(),UdpAvailable:g.getUdpAvailable(),TcpAvailable:g.getTcpAvailable(),SslAvailable:g.getSslAvailable()};return h},_classId:359,_raiseRecvGen:function(h){if((h.length-h.idx)!==1){NgLogE("Could not parse due to wrong argument count in ErrorEmitter.raise from command: "+h);return false}var g=e.parseString(h[h.idx++]);if(g===undefined){NgLogE("Could not parse errorMessage in ErrorEmitter.raise from command: "+h);return false}return this._raiseRecv(g)},$_createSendGen:function(g){e.appendToCommandString(23592959,[+g])},__load:function(){if(typeof PROC_CLASS_TABLE=="undefined"){PROC_CLASS_TABLE={}}if(typeof PROC_METHOD_TABLE=="undefined"){PROC_METHOD_TABLE={}}PROC_CLASS_TABLE[359]=this._instance||this;PROC_METHOD_TABLE[23527426]=this.prototype._raiseRecvGen}})}};__ngs._f={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;function c(e){this.add=function(h,g){this.__defineGetter__(h,function(){delete this[h];return this[h]=g()})};for(var d in e){if(e.hasOwnProperty(d)){this.add(d,e[d])}}}if(typeof $APP_REQUIREPATHMAP!="undefined"){$APP_REQUIREPATHMAP["NGCore/Client/GL2.js"]=a}a.GL2=new c({Animation:function(){return __ngs.r_(__ngs._2h).Animation},EmitterData:function(){return __ngs.r_(__ngs._2i).EmitterData},Emitter:function(){return __ngs.r_(__ngs._2j).Emitter},Font:function(){return __ngs.r_(__ngs._2k).Font},MotionController:function(){return __ngs.r_(__ngs._2l).MotionController},MotionData:function(){return __ngs.r_(__ngs._2m).MotionData},Node:function(){return __ngs.r_(__ngs._2n).Node},Primitive:function(){return __ngs.r_(__ngs._2o).Primitive},Touch:function(){return __ngs.r_(__ngs._2p).Touch},TouchTarget:function(){return __ngs.r_(__ngs._2q).TouchTarget},Root:function(){return __ngs.r_(__ngs._2r).Root},Sprite:function(){return __ngs.r_(__ngs._2s).Sprite},Text:function(){return __ngs.r_(__ngs._2t).Text},Texture:function(){return __ngs.r_(__ngs._2u).Texture},RenderTarget:function(){return __ngs.r_(__ngs._2v).RenderTarget},Diagnostics:function(){return __ngs.r_(__ngs._2w).Diagnostics},FixedMaterial:function(){return __ngs.r_(__ngs._2x).FixedMaterial},Mesh:function(){return __ngs.r_(__ngs._2y).Mesh}})}};__ngs._g={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var c=function(g){var e=function(h,k,l){return function(){delete h[k];return h[k]=l.call(this)}};for(var d in g){if(typeof g[d]=="function"){this.__defineGetter__(d,e(this,d,g[d]))}else{this[d]=g[d]}}};c.prototype={animate:function(){return this.Commands.animate.apply(this,Array.prototype.slice.call(arguments))},compositeImages:function(e,l,g,k,m){var d=this.Commands.registerTemporaryCallback(m);if(d){this.Commands.doCompositeImages(e,l,g,k,d)}},choosePhoto:function(h,k,e,g,m,l){if(!l||!l.__objectRegistryId){new a.UI.Toast({text:"Photo picker requires an invoking view.",onDisappear:function(){this.destroy()}}).show();return}var d=this.Commands.registerTemporaryCallback(m);if(d){this.Commands.doChoosePhoto(h,k,e,g||{},d,l.__objectRegistryId)}},choosePhotoCamera:function(k,e,g,h,l){var d=this.Commands.registerTemporaryCallback(l);if(d){this.Commands.doChooseCamera(k,e,g,h||{},d)}},takeScreenshot:function(k,e,g,h,l){var d=this.Commands.registerTemporaryCallback(l);if(d){this.Commands.takeScreenshot(k,e,g,h||{},d)}},measureText:function(m,e,l,g,k,n){var d=this.Commands.registerTemporaryCallback(n);if(d!==""){this.Commands.measureText(m,e||-1,l||-1,g,k,d)}},hideKeyboard:function(){this.Commands.hideKeyboard()},sendEmail:function(e,g){var d=this.Commands.registerTemporaryCallback(g);this.Commands.sendEmail(e,d)},sendSMS:function(e,g){var d=this.Commands.registerTemporaryCallback(g);this.Commands.sendSMS(e,d)},sendTweet:function(e,g){var d=this.Commands.registerTemporaryCallback(g);this.Commands.sendTweet(e,d)},getAvailableSharingServices:function(e){var d=this.Commands.registerTemporaryCallback(e);this.Commands.getAvailableSharingServices(d)}};if(typeof $APP_REQUIREPATHMAP!="undefined"){$APP_REQUIREPATHMAP["NGCore/Client/UI.js"]=a}a.UI=new c({Commands:function(){return __ngs.r_(__ngs._2b).Commands},FontStyle:function(){return this.Commands.FontStyle},State:function(){return this.Commands.State},FitMode:function(){return this.Commands.FitMode},Window:function(){return __ngs.r_(__ngs._b).Window},Element:function(){return __ngs.r_(__ngs._2d).Element},ViewGeometry:function(){return __ngs.r_(__ngs._2e).ViewGeometry},Scale:function(){return a.UI.ViewGeometry.Scale},View:function(){return __ngs.r_(__ngs._2z).View},Label:function(){return __ngs.r_(__ngs._30).Label},Image:function(){return __ngs.r_(__ngs._31).Image},Button:function(){return __ngs.r_(__ngs._32).Button},GLView:function(){return __ngs.r_(__ngs._33).GLView},NavController:function(){return __ngs.r_(__ngs._34).NavController},WebView:function(){return __ngs.r_(__ngs._35).WebView},ScrollView:function(){return __ngs.r_(__ngs._36).ScrollView},ListView:function(){return __ngs.r_(__ngs._37).ListView},ListViewSection:function(){return __ngs.r_(__ngs._38).ListViewSection},ListViewItem:function(){return __ngs.r_(__ngs._39).ListViewItem},CellView:function(){return __ngs.r_(__ngs._3a).CellView},CheckBox:function(){return __ngs.r_(__ngs._3b).CheckBox},EditText:function(){return __ngs.r_(__ngs._3c).EditText},EditTextArea:function(){return __ngs.r_(__ngs._3d).EditTextArea},AlertDialog:function(){return __ngs.r_(__ngs._1c).AlertDialog},ProgressDialog:function(){return __ngs.r_(__ngs._3e).ProgressDialog},Toast:function(){return __ngs.r_(__ngs._3f).Toast},Style:function(){return __ngs.r_(__ngs._3g).Style},Spinner:function(){return __ngs.r_(__ngs._3h).Spinner},ProgressBar:function(){return __ngs.r_(__ngs._3i).ProgressBar},Diagnostics:function(){return __ngs.r_(__ngs._3j).Diagnostics},AdView:function(){return __ngs.r_(__ngs._3k).AdView},DocumentView:function(){return __ngs.r_(__ngs._3l).DocumentView},CheckoutView:function(){return __ngs.r_(__ngs._3m).CheckoutView},MapView:function(){return __ngs.r_(__ngs._3n).MapView},MapAnnotation:function(){return __ngs.r_(__ngs._3o).MapAnnotation},_CutSceneView:function(){return __ngs.r_(__ngs._3p).CutSceneView}})}};__ngs._h={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;function c(e){this.add=function(h,g){this.__defineGetter__(h,function(){delete this[h];return this[h]=g()})};for(var d in e){if(e.hasOwnProperty(d)){this.add(d,e[d])}}}a.Network=new c({XHR:function(){return __ngs.r_(__ngs._13).XHR},DownloadFile:function(){return __ngs.r_(__ngs._15).DownloadFile},DownloadManifest:function(){return __ngs.r_(__ngs._2).DownloadManifest},Util:function(){return __ngs.r_(__ngs._14).Util},_int_Util:function(){return __ngs.r_(__ngs._3q)._int_Util},Socket:function(){return __ngs.r_(__ngs._3r).Socket},DNS:function(){return __ngs.r_(__ngs._3s).DNS},Diagnostics:function(){return __ngs.r_(__ngs._3t).Diagnostics},WS:function(){return __ngs.r_(__ngs._3u).WS},URL:function(){return __ngs.r_(__ngs._3v).URL}})}};__ngs._i={_c:null,_d:function(){var b={exports:{}};var M=b.exports;this._c=b;
/*!
 * Copyright 2008 Netflix, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var n=__ngs.r_(__ngs._3w);var m;if((typeof m=="undefined")||(m===null)){m={}}m.setProperties=function x(e,O){if(e!==null&&O!==null){for(var N in O){if(O.hasOwnProperty(N)){e[N]=O[N]}}}return e};m.setProperties(m,{percentEncode:function B(O){if((typeof O=="undefined")||(O===null)){return""}if(O instanceof Array){var P="";for(var N=0;N<O.length;++O){if(P!==""){P+="&"}P+=m.percentEncode(O[N])}return P}O=encodeURIComponent(O);O=O.replace(/\!/g,"%21");O=O.replace(/\*/g,"%2A");O=O.replace(/\'/g,"%27");O=O.replace(/\(/g,"%28");O=O.replace(/\)/g,"%29");return O},decodePercent:function z(e){if(e!==null){e=e.replace(/\+/g," ")}return decodeURIComponent(e)},getParameterList:function t(e){if((typeof e=="undefined")||(e===null)){return[]}if(typeof e!="object"){return m.decodeForm(e+"")}if(e instanceof Array){return e}var N=[];for(var O in e){if(e.hasOwnProperty(O)){N.push([O,e[O]])}}return N},getParameterMap:function G(N){if((typeof N=="undefined")||(N===null)){return{}}if(typeof N!="object"){return m.getParameterMap(m.decodeForm(N+""))}if(N instanceof Array){var P={};for(var O=0;O<N.length;++O){var e=N[O][0];if(P[e]===undefined){P[e]=N[O][1]}}return P}return N},getParameter:function o(N,e){if(N instanceof Array){for(var O=0;O<N.length;++O){if(N[O][0]==e){return N[O][1]}}}else{return m.getParameterMap(N)[e]}return null},formEncode:function w(N){var e="";var P=m.getParameterList(N);for(var Q=0;Q<P.length;++Q){var O=P[Q][1];if((typeof O=="undefined")||O===null){O=""}if(e!==""){e+="&"}e+=m.percentEncode(P[Q][0])+"="+m.percentEncode(O)}return e},decodeForm:function s(P){var R=[];var T=P.split("&");for(var S=0;S<T.length;++S){var e=T[S];if(e===""){continue}var O=e.indexOf("=");var N;var Q;if(O<0){N=m.decodePercent(e);Q=null}else{N=m.decodePercent(e.substring(0,O));Q=m.decodePercent(e.substring(O+1))}R.push([N,Q])}return R},setParameter:function K(O,e,P){var N=O.parameters;if(N instanceof Array){for(var Q=0;Q<N.length;++Q){if(N[Q][0]==e){if(P===undefined){N.splice(Q,1)}else{N[Q][1]=P;P=undefined}}}if(P!==undefined){N.push([e,P])}}else{N=m.getParameterMap(N);N[e]=P;O.parameters=N}},setParameters:function v(O,N){var P=m.getParameterList(N);for(var e=0;e<P.length;++e){m.setParameter(O,P[e][0],P[e][1])}},completeRequest:function r(N,e){if((typeof N.method=="undefined")||N.method===null){N.method="GET"}var O=m.getParameterMap(N.parameters);if((typeof O.oauth_consumer_key=="undefined")||O.oauth_consumer_key===null){m.setParameter(N,"oauth_consumer_key",e.consumerKey||"")}if((typeof O.oauth_token=="undefined")||O.oauth_token===null&&e.token!==null){m.setParameter(N,"oauth_token",e.token)}if((typeof O.oauth_version=="undefined")||O.oauth_version===null){m.setParameter(N,"oauth_version","1.0")}if((typeof O.oauth_timestamp=="undefined")||O.oauth_timestamp===null){m.setParameter(N,"oauth_timestamp",m.timestamp())}if((typeof O.oauth_nonce=="undefined")||O.oauth_nonce===null){m.setParameter(N,"oauth_nonce",m.nonce(6))}m.SignatureMethod.sign(N,e)},setTimestampAndNonce:function F(e){m.setParameter(e,"oauth_timestamp",m.timestamp());m.setParameter(e,"oauth_nonce",m.nonce(6))},addToURL:function l(e,O){var Q=e;if((typeof O!="undefined")&&O!==null){var N=m.formEncode(O);if(N.length>0){var P=e.indexOf("?");if(P<0){Q+="?"}else{Q+="&"}Q+=N}}return Q},getAuthorizationHeader:function p(e,P){var T="OAuth ";if(e){P=P.slice();P.realm=e}var O=0;var Q=m.getParameterList(P);for(var R=0;R<Q.length;++R){var S=Q[R];var N=S[0];if(N.indexOf("oauth_")===0||N.indexOf("realm")===0){T+=(O++===0?"":",")+m.percentEncode(N)+'="'+m.percentEncode(S[1])+'"'}}return T},correctTimestampFromSrc:function L(e){e=e||"oauth_timestamp";return},correctTimestamp:function k(e){m.timeCorrectionMsec=(e*1000)-(new Date()).getTime()},timeCorrectionMsec:0,timestamp:function c(){var e=(new Date()).getTime()+m.timeCorrectionMsec;return Math.floor(e/1000)},nonce:function A(Q){var P=m.nonce.CHARS;var e="";for(var O=0;O<Q;++O){var N=Math.floor(Math.random()*P.length);e+=P.substring(N,N+1)}return e}});m.nonce.CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";m.declareClass=function h(P,e,O){var Q=P[e];P[e]=O;if(O!==null&&Q!==null){for(var N in Q){if(N!="prototype"){O[N]=Q[N]}}}return O};m.declareClass(m,"SignatureMethod",function q(){});m.setProperties(m.SignatureMethod.prototype,{sign:function J(O){var N=m.SignatureMethod.getBaseString(O);var e=this.getSignature(N);m.setParameter(O,"oauth_signature",e);return e},initialize:function a(O,e){var N;if((typeof e.accessorSecret!="undefined")&&e.accessorSecret!==null&&O.length>9&&O.substring(O.length-9)=="-Accessor"){N=e.accessorSecret}else{N=e.consumerSecret}this.key=m.percentEncode(N)+"&"+m.percentEncode(e.tokenSecret)}});m.setProperties(m.SignatureMethod,{sign:function J(O,e){var N=m.getParameterMap(O.parameters).oauth_signature_method;if((typeof N=="undefined")||N===null||N===""){N="HMAC-SHA1";m.setParameter(O,"oauth_signature_method",N)}m.SignatureMethod.newMethod(N,e).sign(O)},newMethod:function g(P,e){var O=m.SignatureMethod.REGISTERED[P];if((typeof O!="undefined")&&(O!==null)){var S=new O();S.initialize(P,e);return S}var R=new Error("signature_method_rejected");var N="";for(var Q in m.SignatureMethod.REGISTERED){if(m.SignatureMethod.REGISTERED.hasOwnProperty(Q)){if(N!==""){N+="&"}N+=m.percentEncode(Q)}}R.oauth_acceptable_signature_methods=N;throw R},REGISTERED:{},registerMethodClass:function D(N,e){for(var O=0;O<N.length;++O){m.SignatureMethod.REGISTERED[N[O]]=e}},makeSubclass:function d(e){var N=m.SignatureMethod;var O=function(){N.call(this)};O.prototype=new N();O.prototype.getSignature=e;O.prototype.constructor=O;return O},getBaseString:function H(Q){var e=Q.action;var R=e.indexOf("?");var P;if(R<0){P=Q.parameters}else{P=m.decodeForm(e.substring(R+1));var O=m.getParameterList(Q.parameters);for(var N=0;N<O.length;++N){P.push(O[N])}}return m.percentEncode(Q.method.toUpperCase())+"&"+m.percentEncode(m.SignatureMethod.normalizeUrl(e))+"&"+m.percentEncode(m.SignatureMethod.normalizeParameters(P))},normalizeUrl:function I(O){var P=m.SignatureMethod.parseUri(O);var e=P.protocol.toLowerCase();var R=P.authority.toLowerCase();var S=(e=="http"&&P.port==80)||(e=="https"&&P.port==443);if(S){var N=R.lastIndexOf(":");if(N>=0){R=R.substring(0,N)}}var Q=P.path;if(!Q){Q="/"}return e+"://"+R+Q},parseUri:function y(Q){var P={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}};var e=P.parser.strict.exec(Q);var O={};var N=14;while(N--){O[P.key[N]]=e[N]||""}return O},normalizeParameters:function u(P){if((typeof P=="undefined")||P===null){return""}var Q=m.getParameterList(P);var S=[];for(var R=0;R<Q.length;++R){var N=Q[R];if(N[0]!="oauth_signature"){S.push([m.percentEncode(N[0])+" "+m.percentEncode(N[1]),N])}}S.sort(function(U,T){if(U[0]<T[0]){return -1}if(U[0]>T[0]){return 1}return 0});var e=[];for(var O=0;O<S.length;++O){e.push(S[O][1])}return m.formEncode(e)}});m.SignatureMethod.registerMethodClass(["PLAINTEXT","PLAINTEXT-Accessor"],m.SignatureMethod.makeSubclass(function C(e){return this.key}));m.SignatureMethod.registerMethodClass(["HMAC-SHA1","HMAC-SHA1-Accessor"],m.SignatureMethod.makeSubclass(function C(N){var e=n.b64_hmac_sha1(this.key,N,"=");return e}));try{m.correctTimestampFromSrc()}catch(E){}if((typeof M!="undefined")&&M){M.OAuth=m}}};__ngs._j={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.TFGlobals={nativeResolution:{x:640,y:960},stats:{status1:"Melee",status2:"Ranged",status3:"Special"},fusionCardsMaxCount:{value:8}}}};__ngs._k={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var h=__ngs.r_(__ngs._3x).Social;var c=__ngs.r_(__ngs._4).Device;var a=__ngs.r_(__ngs._3y).PopUpController;var e=__ngs.r_(__ngs._13).XHR;var g=__ngs.r_(__ngs._i);b.Server=Core.Class.singleton({classname:"Server",exposedClassname:"Server",OAUTH_AUTHENTICATION_FAILURE:401,WRONG_BINARY_VERSION:450,WRONG_CONFIG_VERSION:460,FORCED_RELOAD:470,noRetryStatusCodes:[401,450,460,470,500,666,200,412],FAKE_FIGHT_BOSS_ERROR:0,FAKE_FIGHT_EVENT_BOSS_ERROR:0,initialize:function(){console.log("Server.initialize called.");this._connectionAvailable=true;c.NetworkEmitter.addListener(new Core.MessageListener(),this._checkConnection.bind(this));this._fakeFightBossError=this.FAKE_FIGHT_BOSS_ERROR;this._fakeFightEventBossError=this.FAKE_FIGHT_EVENT_BOSS_ERROR;this.timeSyncRequired=true;this.m_ResumeTime=0;this.m_SuspendTime=0;this.m_SuspendResumeGap=0;this.numNetworkPerformanceAlertsShown=0;this.currConnection=undefined},startNetworkPerformanceMonitor:function(){this.networkPerformanceAlertShown=false;c.NetworkEmitter.setPerformanceThreshold({minRate:40000,duration:10000});this.performanceListener=new Core.MessageListener();c.NetworkEmitter.addPerformanceListener(this.performanceListener,this._onPerformanceAlert.bind(this))},stopNetworkPerformanceMonitor:function(){if(this.performanceListener){c.NetworkEmitter.removePerformanceListener(this.performanceListener);this.performanceListener.destroy();this.performanceListener=undefined}},_onPerformanceAlert:function(k){console.log("Server NetworkEmitter performance alert: "+JSON.stringify(k));if(k.aveRate<40000&&!this.networkPerformanceAlertShown){this.networkPerformanceAlertShown=true;this.numNetworkPerformanceAlertsShown++;this.lastNetworkAlertTime=this.getServerTime();if(this.currConnection==c.NetworkEmitter.Status.Wifi){console.log("Server > _onPerformanceAlert > slow wifi toast shown");TFUtils.createToast(Localization.getString("ui_slowwifi"))}else{console.log("Server > _onPerformanceAlert > slow 3g/4g network shown");TFUtils.createToast(Localization.getString("ui_slownetwork"))}}if(k.aveRate<20000){var l=60000;if(this.numNetworkPerformanceAlertsShown>5){l=300000}if(this.getServerTime()-this.lastNetworkAlertTime>l){this.networkPerformanceAlertShown=false}}},_checkConnection:function(k){this.currConnection=k;console.log("----------------_checkConnection "+k);if(k==c.NetworkEmitter.Status.None){this._connectionAvailable=false}else{if(k==c.NetworkEmitter.Status.Wifi||c.NetworkEmitter.Status.Cellular){this._connectionAvailable=true}}},_onLifecycleChange:function(k){switch(k){case c.LifecycleEmitter.Event.Suspend:this.timeSyncRequired=true;this.m_SuspendTime=(new Date()).getTime();this.m_ResumeTime=this.m_SuspendTime;console.log("Server > _onLifeCycleChange > Suspend > timeSyncRequired = true. suspend time:",this.m_SuspendTime);break;case c.LifecycleEmitter.Event.Resume:this.m_ResumeTime=(new Date()).getTime();this.m_SuspendResumeGap+=(this.m_ResumeTime-this.m_SuspendTime);console.log("Server > _onLifeCycleChange > Resume time:",this.m_ResumeTime," - gap(ms):",this.m_SuspendResumeGap);break;case c.LifecycleEmitter.Event.Terminate:break}},setup:function(){console.log("Server.setup called.");var n=Core.Capabilities.getConfigs();if(Core.Capabilities.getPlatformOS()=="Android"){this._binaryHash="a"}else{if(Core.Capabilities.getPlatformOS()=="iPhone OS"){this._binaryHash="i"}}this._binaryHash+=Core.Capabilities.getBinaryBuildHash();this._gameServerLogin=false;var o=Core.Capabilities.getUrl();console.log("Server > setup > appUrl="+o);if(Core.Capabilities.getGame()=="Transformers"){this.gameEnv="development"}else{if(h.Common.Config.getServerEnvironment()=="sandbox"){var l=o.substring(o.indexOf("sandbox/"));console.log("Server > setup > sandboxName="+l);if(n[l]){this.gameEnv=l}else{this.gameEnv="sandbox"}}else{if(h.Common.Config.getServerEnvironment()=="production"){this.gameEnv="production"}else{console.log("Server.setup Error determining environment for game  : "+Core.Capabilities.getGame());return}}}var m;if(Core.Capabilities.getGame()=="Transformers"){m="default"}else{if(o.indexOf("sandbox/")>=0){m=o.substr(o.lastIndexOf("/")+1)}else{if(o.indexOf("production/prerelease")>=0){m="prerelease"}else{m="live"}}}this.gameServer=n[this.gameEnv].gameServer;console.log("Server.setup Game Server: "+this.gameServer);var p=__ngs.r_(__ngs._l).User;this._remoteCall=__ngs.r_(__ngs._3z).RemoteCall;this._remoteCall.setBinaryVersion(this._binaryHash);this._remoteCall.setJSVersion(Core.Capabilities.getAppReleaseVersion());this._remoteCall.setClientEnvironment(m);this._remoteCall.setMobageId(p.getUserId());this._remoteCall.setMobageGamertag(p.getGamerTag());this._remoteCall.setup(this.gameServer);this.m_session={_id:p.getGamerTag()};var k=__ngs.r_(__ngs._40).RemoteObject;this._remoteObject=new k();this._remoteCall.authenticate(this._onGameServerLogin.bind(this))},_onGameServerLogin:function(l,k){console.log("Server > _onGameServerLogin > loginError : "+JSON.stringify(l)+" loginData : "+JSON.stringify(k));if(l||!k){var m=new UI.AlertDialog();m.setTitle("Game Login");m.setText("Your device is having difficulty connecting to TRANSFORMERS Legends. If the problem persists, please try restarting the app.");m.setChoices(["Exit"]);m.setOnChoice((function(){c.LifecycleEmitter.exitProcess()}).bind(m));m.show();return}TFUserData.syncFrom(k);TFUserData.setTotalXp(k.xp);TFUserData.setLastAndNextFreeGashaDates(k.lastAndNextFreeGashaDates);TFUserData.startExploreEnergyUpdates();TFUserData.startBattleEnergyUpdates();this._gameServerLogin=true;this._remoteCall.setConfigVersion(TFUserData.configVersion);var n=__ngs.r_(__ngs._x).TFManifestManager;n.onGameServerLogin()},isLoggedIn:function(){return this._gameServerLogin},_getRemoteBattleObject:function(k){if(k||this.m_remoteBattle===undefined){var l=__ngs.r_(__ngs._41).RemoteBattle;this.m_remoteBattle=new l(this.m_session)}return this.m_remoteBattle},_getRemoteMissionObject:function(k){if(k||this.m_remoteMission===undefined){var l=__ngs.r_(__ngs._42).RemoteMission;this.m_remoteMission=new l(this.m_session)}return this.m_remoteMission},_getRemoteEventObject:function(k){if(k||this.m_remoteEvent===undefined){var l=__ngs.r_(__ngs._43).RemoteEvent;this.m_remoteEvent=new l(this.m_session)}return this.m_remoteEvent},_getRemoteObject:function(){return this._remoteObject},generalDataRetrieving:function(l,m,k,o){var n=__ngs.r_(__ngs._s).TFUtils;console.log("Server > generalDataRetrieving");if(k!=200){TFAnalytics.reportGameEvent("ERR",{method:o,status:k,error:JSON.stringify(l)});if(k==this.WRONG_BINARY_VERSION){n.handleWrongBinary();return false}else{if(k==this.WRONG_CONFIG_VERSION){n.handleWrongConfigs();return false}else{if(k==this.FORCED_RELOAD){n.forceReload();return false}}}}else{if(m&&m.socialStats){TFUserData.syncFrom(m.socialStats)}if(m&&m.cards){TFUserData.cards=m.cards}if(m&&m.cardsLimbo){TFUserData.cardsLimbo=m.cardsLimbo}}return true},login:function(l,k){this._getRemoteObject().invoke("/objects/session","init",[l,{}],k)},getStats:function(k){TFSceneDirector.showWaitingSpinner("getStats");this._getRemoteObject().invoke("/objects/social","getStats",[],function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},resetWaitingNotifications:function(k){TFSceneDirector.showWaitingSpinner("resetWaitingNotifications");this._getRemoteObject().invoke("/objects/social","resetWaitingNotifications",[],function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},getAllUserFellows:function(k){TFSceneDirector.showWaitingSpinner("getAllUserFellows");this._getRemoteObject().invoke("/objects/social","getAllUserFellows",[],function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},getRandomPlayers:function(l,m,k){TFSceneDirector.showWaitingSpinner("getRandomPlayers");this._getRemoteObject().invoke("/objects/social","getInviteList",[l,m],function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},getAllUsersByName:function(l,m,k){TFSceneDirector.showWaitingSpinner("getAllUsersByName");this._getRemoteObject().invoke("/objects/social","getInviteList",[3,m],function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},getMobageFriends:function(k){TFSceneDirector.showWaitingSpinner("getMobageFriends");this._getRemoteObject().invoke("/objects/social","getMobageFriends",[],function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},sendInvite:function(l,k){TFSceneDirector.showWaitingSpinner("sendInvite");this._getRemoteObject().invoke("/objects/social","sendInvites",[[l]],function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},getInvites:function(k){TFSceneDirector.showWaitingSpinner("getInvites");this._getRemoteObject().invoke("/objects/social","getCurrentInvites",[],function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},acceptInvite:function(l,k){TFSceneDirector.showWaitingSpinner("acceptInvite");this._getRemoteObject().invoke("/objects/social","acceptInvites",[l],function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},cancelInvite:function(l,k){TFSceneDirector.showWaitingSpinner("cancelInvite");this._getRemoteObject().invoke("/objects/social","cancelInvites",[[l]],function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},cancelAllInvites:function(k){TFSceneDirector.showWaitingSpinner("cancelAllInvites");this._getRemoteObject().invoke("/objects/social","cancelAllInvites",[],function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},cheerPlayer:function(l,k){TFSceneDirector.showWaitingSpinner("cheerPlayer");this._getRemoteObject().invoke("/objects/social","sendGreets",[l],function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},acceptCheers:function(l,k){TFSceneDirector.showWaitingSpinner("acceptCheers");this._getRemoteObject().invoke("/objects/social","acceptGreets",[l],function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},removeFellows:function(l,k){TFSceneDirector.showWaitingSpinner("removeFellows");this._getRemoteObject().invoke("/objects/social","removeFellows",[[l]],function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},rejectInvite:function(l,k){TFSceneDirector.showWaitingSpinner("rejectInvite");this._getRemoteObject().invoke("/objects/social","rejectInvites",[[l]],function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},getPlayerProfile:function(l,k){TFSceneDirector.showWaitingSpinner("getPlayerInfo");this._getRemoteObject().invoke("/objects/social","getFriendInformation",[l],function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},sendMessages:function(n,m,k,l){this._getRemoteObject().invoke("/objects/social","sendMessages",[n,m],function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},setInitialPack:function(l,k){TFSceneDirector.showWaitingSpinner("setInitialPack",1500);this._getRemoteObject().invoke("/Deck/SetInitialPack",undefined,[l],function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},setMainDeck:function(l,k){this._getRemoteObject().invoke("/Deck/setDeck",undefined,[TFGameData.DECK_INDEX.MAIN,l],function(){k.apply(this,this.formatResponse(arguments))}.bind(this))},setAutobotsDeck:function(l,k){this._getRemoteObject().invoke("/Deck/setDeck",undefined,[TFGameData.DECK_INDEX.AUTOBOTS,l],function(){k.apply(this,this.formatResponse(arguments))}.bind(this))},setDecepticonsDeck:function(l,k){this._getRemoteObject().invoke("/Deck/setDeck",undefined,[TFGameData.DECK_INDEX.DECEPTICONS,l],function(){k.apply(this,this.formatResponse(arguments))}.bind(this))},getDeck:function(l,k){TFSceneDirector.showWaitingSpinner("getDeck");this._getRemoteObject().invoke("/objects/deck","getDeck",[l],function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},fuse:function(m,l,k){TFSceneDirector.showWaitingSpinner("fuse","noTimeOut");this._getRemoteObject().invoke("/Cards/upgradeFusionCards",undefined,{baseCardId:m,fuseCardIds:l},function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},fusionSpecial:function(l,m,k){errorsToAllow=[149];TFSceneDirector.showWaitingSpinner("fusionSpecial","noTimeOut");this._getRemoteObject().invoke("/Cards/transScanFusion",undefined,{cardsToFuse:l,newCardDefinitionId:m},function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments,errorsToAllow))}.bind(this))},sellMultiple:function(l,m,k){TFSceneDirector.showWaitingSpinner("sellMultiple");if(!m){m="normDeck"}this._getRemoteObject().invoke("/objects/card","sellMultiple",[l,m],function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},getCurrentUser:function(k){this._getRemoteObject().invoke("/objects/user","get",[],function(){k.apply(this,this.formatResponse(arguments))}.bind(this))},getCardsHistory:function(l,k){this._getRemoteObject().invoke("/objects/user","getCardsHistory",[],function(){k.apply(this,this.formatResponse(arguments))}.bind(this))},getAllUserCards:function(k){TFSceneDirector.showWaitingSpinner("getAllUserCards");this._getRemoteObject().invoke("/objects/user","getAllCards",[],function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},setMiniTutorialState:function(l,m,k){this._getRemoteObject().invoke("/objects/user","setMiniTutorialState",[l,m],function(){k.apply(this,this.formatResponse(arguments))}.bind(this))},getMiniTutorialStates:function(k){this._getRemoteObject().invoke("/objects/user","getMiniTutorialStates",[],function(){k.apply(this,this.formatResponse(arguments))})},purchaseItem:function(l,k){TFSceneDirector.showWaitingSpinner("purchaseItem");this._getRemoteObject().invoke("/Item/Purchase",undefined,{transactionId:l},function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},useItem:function(l,k){TFSceneDirector.showWaitingSpinner("useItem");this._getRemoteObject().invoke("/Item/Use",undefined,[l],function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},giftingClaimOne:function(l,k){TFSceneDirector.showWaitingSpinner("giftingClaimOne");this._getRemoteObject().invoke("/objects/gift","claimOne",[l],function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},giftingClaimAll:function(l,k){TFSceneDirector.showWaitingSpinner("giftingClaimAll");this._getRemoteObject().invoke("/objects/gift","claim",[l],function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},requestCards:function(m,n,o,k,l){TFSceneDirector.showWaitingSpinner("requestCards");this._getRemoteObject().invoke("/objects/gasha","requestCards",[m,n,o],function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},spinGacha:function(l,k){TFSceneDirector.showWaitingSpinner("requestCards");this._getRemoteObject().invoke("/Gacha/Spin",undefined,{gachaId:l},function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},closePremiumSpaceBridgeTransaction:function(l,k){TFSceneDirector.showWaitingSpinner("requestCards");this._getRemoteObject().invoke("/Gacha/Purchase",undefined,{transactionId:l},function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},getBattleEnemies:function(m,k){TFSceneDirector.showWaitingSpinner("getBattleEnemies");var l=this._getRemoteBattleObject();l.requestEnemies(m,function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},fight:function(n,l,k){errorsToAllow=[318,188];TFSceneDirector.showWaitingSpinner("fight");if(this._fakeFightBossError){this._fakeFightBossError--;TFSceneDirector.dismisWaitingSpinner();setTimeout(this.checkForEndOfEvent.bind(this,[null,{isError:true,details:{code:188,msg:"card 52 not found"}}],k,errorsToAllow),10)}else{this._fakeFightBossError=this.FAKE_FIGHT_BOSS_ERROR;var m=this._getRemoteBattleObject();m.fight(n,l,function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments,errorsToAllow))}.bind(this))}},fightBoss:function(m,n,p,l,k){TFSceneDirector.showWaitingSpinner("fightBoss");var o=this._getRemoteBattleObject();o.fightBoss(m,n,p,l,function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},getEnemyDeck:function(m,k){TFSceneDirector.showWaitingSpinner("getEnemyDeck");var l=this._getRemoteBattleObject();l.requestEnemyDeck(m,function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},completeRound:function(l,k,m){TFSceneDirector.showWaitingSpinner("completeRound");var n=this._getRemoteMissionObject(m);n.roundCompleted(l,function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},popAward:function(n,m,k,l){var o=this._getRemoteMissionObject(l);o.popAward(n,m,function(){k.apply(this,this.formatResponse(arguments))}.bind(this))},getLuckyChance:function(l,n,k,m){TFSceneDirector.showWaitingSpinner("getLuckyChance");var o=this._getRemoteMissionObject(m);o.getLuckyChance(l,n,function(){TFSceneDirector.dismisWaitingSpinner();k.apply(this,this.formatResponse(arguments))}.bind(this))},registerForEvent:function(m,k,l){TFSceneDirector.showWaitingSpinner("registerForEvent");console.log("Server::registerForEvent > "+m);var n=this._getRemoteEventObject(l);n.register(m,function(){TFSceneDirector.dismisWaitingSpinner();this.checkForEndOfEvent(arguments,k)}.bind(this))},getEventInfo:function(m,o,k,l){console.log("Server::getEventInfo");var n=this._getRemoteEventObject(l);if(o){TFSceneDirector.showWaitingSpinner("getEventInfo");n.getEventInfo(m,function(){TFSceneDirector.dismisWaitingSpinner();this.checkForEndOfEvent(arguments,k)}.bind(this))}else{n.getEventInfo(m,function(){this.checkForEndOfEvent(arguments,k)}.bind(this))}},eventActive:function(m,k,l){console.log("Server::eventActive");var n=this._getRemoteEventObject(l);TFSceneDirector.showWaitingSpinner("eventActive");n.getEventInfo(m,function(){TFSceneDirector.dismisWaitingSpinner();this.receiveEventInfo(arguments,k)}.bind(this))},receiveEventInfo:function(l,k){if(l[1]&&l[1].isError&&l[1].details&&l[1].details.msg&&(l[1].details.msg.indexOf("event has expired")!=-1)){k(false,l[0],l[1])}k(true,l[0],l[1])},getRaidBossRewardList:function(n,k,l){console.log("Server::getRaidBossRewardList");var m=this._getRemoteEventObject(l);if(n){TFSceneDirector.showWaitingSpinner("getRaidBossRewardList");m.getRaidBossRewardList(function(){TFSceneDirector.dismisWaitingSpinner();this.checkForEndOfEvent(arguments,k)}.bind(this))}else{m.getRaidBossRewardList(function(){this.checkForEndOfEvent(arguments,k)}.bind(this))}},getBossInfo:function(o,n,k,l){console.log("Server::getBossInfo bossId="+o);var m=this._getRemoteEventObject(l);if(n){TFSceneDirector.showWaitingSpinner("getBossInfo");m.getBossInfo(o,function(){TFSceneDirector.dismisWaitingSpinner();this.checkForEndOfEvent(arguments,k)}.bind(this))}else{m.getBossInfo(o,function(){this.checkForEndOfEvent(arguments,k)}.bind(this))}},generateBoss:function(k,l){TFSceneDirector.showWaitingSpinner("generateBoss");console.log("Server::generateBoss");var m=this._getRemoteEventObject(l);m.generateBoss(function(){TFSceneDirector.dismisWaitingSpinner();this.checkForEndOfEvent(arguments,k)}.bind(this))},fightEventBoss:function(n,p,k,l,o){o=[318,188];TFSceneDirector.showWaitingSpinner("fightEventBoss");console.log("Server::fightEventBoss bossId="+n+", bp="+p);if(this._fakeFightEventBossError){this._fakeFightEventBossError--;TFSceneDirector.dismisWaitingSpinner();setTimeout(this.checkForEndOfEvent.bind(this,[null,{isError:true,details:{code:188,msg:"card 52 not found"}}],k,o),10)}else{this._fakeFightEventBossError=this.FAKE_FIGHT_EVENT_BOSS_ERROR;var m=this._getRemoteEventObject(l);m.fightBoss(n,p,function(){TFSceneDirector.dismisWaitingSpinner();this.checkForEndOfEvent(arguments,k,o)}.bind(this))}},consumeItemsAndFightEventBoss:function(m,o,q,k,l,p){p=[318,188];TFSceneDirector.showWaitingSpinner("fightEventBoss");console.log("Server > consumeItemsAndFightEventBoss > itemsToUse="+JSON.stringify(m)+", bossId="+o+", battlePoints="+q);if(this._fakeFightEventBossError){this._fakeFightEventBossError--;TFSceneDirector.dismisWaitingSpinner();setTimeout(this.checkForEndOfEvent.bind(this,[null,{isError:true,details:{code:188,msg:"card 52 not found"}}],k,p),10)}else{this._fakeFightEventBossError=this.FAKE_FIGHT_EVENT_BOSS_ERROR;var n=this._getRemoteEventObject(l);n.consumeItemsAndFightEventBoss(m,o,q,function(){TFSceneDirector.dismisWaitingSpinner();this.checkForEndOfEvent(arguments,k,p)}.bind(this))}},callForHelp:function(n,k,l){errorsToAllow=[319];TFSceneDirector.showWaitingSpinner("callForHelp");console.log("Server::callForHelp");var m=this._getRemoteEventObject(l);m.callForHelp(n,function(){TFSceneDirector.dismisWaitingSpinner();this.checkForEndOfEvent(arguments,k,errorsToAllow)}.bind(this))},acceptHelpRequest:function(m,o,k,l){TFSceneDirector.showWaitingSpinner("acceptHelpRequest");console.log("Server::acceptHelpRequest");var n=this._getRemoteEventObject(l);n.acceptHelpRequest(m,o,function(){TFSceneDirector.dismisWaitingSpinner();this.checkForEndOfEvent(arguments,k)}.bind(this))},getHelpRequests:function(k,l){console.log("Server::getHelpRequests");var m=this._getRemoteEventObject(l);m.getHelpRequests(function(){this.checkForEndOfEvent(arguments,k)}.bind(this))},getBossDamageLeaderboard:function(n,k,l){TFSceneDirector.showWaitingSpinner("getBossDamageLeaderboard");console.log("Server > getBossDamageLeaderboard");var m=this._getRemoteEventObject(l);m.getBossDamageLeaderboard(n,function(){TFSceneDirector.dismisWaitingSpinner();this.checkForEndOfEvent(arguments,k)}.bind(this))},getPlayerInfo:function(m,k,l){TFSceneDirector.showWaitingSpinner("getPlayerInfo");console.log("Server > getPlayerInfo");var n=this._getRemoteEventObject(l);n.getPlayerInfo(m,function(){TFSceneDirector.dismisWaitingSpinner();this.checkForEndOfEvent(arguments,k)}.bind(this))},getRaidBossRewards:function(n,k,l){TFSceneDirector.showWaitingSpinner("getRaidBossRewards");console.log("Server > getRaidBossRewards");var m=this._getRemoteEventObject(l);m.getRaidBossRewards(n,function(){TFSceneDirector.dismisWaitingSpinner();this.checkForEndOfEvent(arguments,k)}.bind(this))},getRanking:function(n,l,k,m){TFSceneDirector.showWaitingSpinner("getRanking");console.log("Server > getRanking");var o=this._getRemoteEventObject(m);o.getRanking(n,l,function(){TFSceneDirector.dismisWaitingSpinner();this.checkForEndOfEvent(arguments,k)}.bind(this))},getRankingByIndex:function(n,l,k,m){TFSceneDirector.showWaitingSpinner("getRankingByIndex");console.log("Server > getRankingByIndex");var o=this._getRemoteEventObject(m);o.getRankingByIndex(n,l,function(){TFSceneDirector.dismisWaitingSpinner();this.checkForEndOfEvent(arguments,k)}.bind(this))},getDailyRanking:function(n,l,k,m){TFSceneDirector.showWaitingSpinner("getDailyRanking");console.log("Server > getDailyRanking");var o=this._getRemoteEventObject(m);o.getDailyRanking(n,l,function(){TFSceneDirector.dismisWaitingSpinner();this.checkForEndOfEvent(arguments,k)}.bind(this))},seenEventFinal:function(l,k){TFSceneDirector.showWaitingSpinner("seenEventFinal");var m=this._getRemoteEventObject();m.seenEventFinal(l,function(){TFSceneDirector.dismisWaitingSpinner();this.checkForEndOfEvent(arguments,k)}.bind(this))},checkForEndOfEvent:function(l,k,n){console.log("Server > checkForEndOfEvent > arguments_="+JSON.stringify(l));console.log("Server > checkForEndOfEvent > errorsToAllow="+JSON.stringify(n));if(l[1]&&l[1].isError&&l[1].details&&l[1].details.msg&&(typeof l[1].details.msg==="string")&&(l[1].details.msg.indexOf("event has expired")!=-1)){if(!this._endOfEventEncountered){this._endOfEventEncountered=true;TFSceneDirector.clearGlobalTouches();var m={};m.text=Localization.getString("ui_eventjustcompleted");m.buttons="one";m.fontSize=36;m.cb=TFSceneDirector.showHome.bind(TFSceneDirector);TFSceneDirector._showDialog(new a(m))}}else{k.apply(this,this.formatResponse(l,n))}},setUpServerTime:function(k){var m=new Date(k);this.m_ReceivedServerTime=m.getTime();var l=new Date();this.m_CheckpointTime=l.getTime();this.timeSyncRequired=false;this.m_ResumeTime=0;this.m_SuspendTime=0;this.m_SuspendResumeGap=0;console.log("Server > setUpServerTime >",k)},getServerTime:function(){var k=new Date();if(!this.timeSyncRequired){return((k.getTime()-this.m_CheckpointTime)+this.m_ReceivedServerTime)}else{if(this.m_SuspendTime==this.m_ResumeTime){console.log("Server > getServerTime > handling race condition (resume time not set yet)");return((this.m_SuspendTime-this.m_SuspendResumeGap-this.m_CheckpointTime)+this.m_ReceivedServerTime)}else{return((k.getTime()-this.m_SuspendResumeGap-this.m_CheckpointTime)+this.m_ReceivedServerTime)}}},getTime:function(){return this.getServerTime()},formatResponse:function(k,p){console.log("Server > formatResponse > arguments_="+JSON.stringify(k));console.log("Server > formatResponse > errorsToAllow="+JSON.stringify(p));var o=k;if(k[1]!=undefined&&k[1].isError){var r=k[1].details.code;o[0]=r;o[1]=k[1].details.msg;console.log("Server > formatResponse > found error : "+JSON.stringify(o));var s="en_error_"+r;var q=Localization.getString(s);if(q!=s){o[1]=q}var l=false;if(p&&(Object.prototype.toString.call(p)==="[object Array]")){for(var m in p){if(p[m]==r){console.log("Server > formatResponse > allowing error "+r);l=true;break}}}if(!l){var n=__ngs.r_(__ngs._s).TFUtils;n.showErrorMessages(o[1],TFSceneDirector.showHome.bind(TFSceneDirector))}return o}if((k[0]==null||k[0]==undefined)){return o}if(k[0]=="IOError"){o[1]=Localization.getString("ui_pleasecheckconnection")}else{if(this._connectionAvailable==false){o[1]=Localization.getString("ui_pleasecheckconnection")}else{o[1]=Localization.getString("ui_ooops")}}return o},isConnectionAvailable:function(){return this._connectionAvailable},destroy:function(){}})}};__ngs._l={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.User=Core.Class.singleton({classname:"User",m_gamerTag:null,m_userId:null,m_user:null,m_rank:null,initialize:function(){console.log("User.initialize called.");this.m_maxExploreEnergy=null;this.m_exploreEnergy=null;this.m_maxBattleEnergy=null;this.m_battleEnergy=null},setup:function(d){console.log("User.setup called.");this._cb=d;var c=__ngs.r_(__ngs._3x).Social;c.Common.People.getCurrentUser(["age","id","nickname","displayName","thumbnailUrl"],this._getCurrentUserCallback.bind(this))},_getCurrentUserCallback:function(d,c){console.log("User._getCurrentUserCallback called.");if(d||!c){console.log("User._getCurrentUserCallback Error, cannot retrieve used data! error=%s",JSON.stringify(d));this._cb(false)}else{var e=false;var g=false;console.log("User._getCurrentUserCallback User obtained. user=%s",JSON.stringify(c));this.m_user=c;this.m_userId=c.id;if(this.m_gamerTag!==null&&this.m_gamerTag!=c.nickname){e=true}this.m_gamerTag=c.nickname;if(this.m_rank!==null&&this.m_rank!=c.grade){g=true}this.m_rank=c.grade;this._cb(true,e,g)}},getUser:function(){if(!this.m_user){console.log("User.getUser The user is not defined!")}return this.m_user},getRank:function(){if(!this.m_user){console.log("User.getRank The user is not defined!")}return this.m_rank},getGamerTag:function(){var c="unknown";if(this.m_user&&this.m_gamerTag){c=this.m_gamerTag}console.log("User.getGamerTag return. gamerTag="+c);return c},getUserId:function(){var c=12345;if(this.m_user&&this.m_userId){c=this.m_userId}console.log("User.getUserId return. userId="+c);return c}})}};__ngs._m={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;var e=__ngs.r_(__ngs._5).Core;var c=__ngs.r_(__ngs._a).Storage;var d=__ngs.r_(__ngs._3x).Social;a.TFGameData=e.Class.singleton({STAT_TYPE:{SPEED:3,RANGE:2,MELEE:1},CARD_TYPE:{TRANSFORMER:1,WEAPON:2},DECK_RANK:{COMMANDER:0,LEFT_WING:1,RIGHT_WING:2},DECK_INDEX:{MAIN:1,AUTOBOTS:2,DECEPTICONS:3},REWARD_TYPE:{EVENTBOSS:10,BATTLECHANCE:5,ENEMYCHANCE:4,LUCKYCHANCE:3,CARD:2,GOLD:1},RARITY:{COMMON:1,UNCOMMON:2,RARE:3,SUPERRARE:4},GIFT_TYPE:{COINS:10,GASHA_POINTS:20,ITEM:30,INVENTORY_SPACE:40,MEDALS:50,FELLOWS:60,CARDS:70},FACTION:{AUTOBOTS:1,DECEPTICONS:2,AUTOBOTSTRING:"autobots",DECEPTICONSTRING:"decepticons",AUTOBOTSSKILLICON:"Content/Images8x/UI/Skills/Skill_FactionAutobotBonus.png",DECEPTICONSSKILLICON:"Content/Images8x/UI/Skills/Skill_FactionDecepticonBonus.png"},SKILLICON:{s_focus:"Content/Images8x/UI/icon/icon_0_focus.png",s_superiority:"Content/Images8x/UI/icon/icon_0_superiority.png",s_convergence:"Content/Images8x/UI/icon/icon_0_convergence.png",i_doubleattack:"Content/Images8x/UI/icon/icon_0_attack_double.png",i_tripleattack:"Content/Images8x/UI/icon/icon_0_attack_triple.png",i_minicrit:"Content/Images8x/UI/icon/icon_0_crit_mini.png",i_criticalhit:"Content/Images8x/UI/icon/icon_0_crit_hit.png"},NOTIFICATION_SETS:{DEFAULT:0,SOCIAL:1},TOUCH_SPECIAL_TYPE:{TRAP:0,LIST:1},ENERGY_BONUS:[1.2,3,5],REFRESH_ICON_SPIN_DURATION:1000,initialize:function(){this._numberOfFilesLoading=0;this._fileLoadingFinished=false;this._lastlog=false},startReading:function(){this._numberOfFilesLoading=0;this._fileLoadingFinished=false;this._lastlog=false;this._fileLoadingStarted=true;this._loadJsonFromFile("Content/AnimationData/devConfig.json",this._devConfigLoaded.bind(this));this._loadJsonFromFile("./Data/levels.json",this._onLevelsLoaded.bind(this));this._loadJsonFromFile("./Data/missions.json",this._onMissionsLoaded.bind(this));this._loadJsonFromFile("./Data/cards.json",this._onCardsLoaded.bind(this));this._loadJsonFromFile("./Data/config.json",this._onConfigLoaded.bind(this));this._loadJsonFromFile("./Data/lucky.json",this._onLuckyLoaded.bind(this));this._loadJsonFromFile("./Data/itemPacks.json",this._onItemPacksLoaded.bind(this));this._loadJsonFromFile("./Data/items.json",this._onItemsLoaded.bind(this));this._loadJsonFromFile("./Data/medals.json",this._onMedalsLoaded.bind(this));this._loadJsonFromFile("./Data/gashaPacks.json",this._onGashaPacksLoaded.bind(this));this._loadJsonFromFile("./Data/achievements.json",this._onAchievementsLoaded.bind(this));this._loadJsonFromFile("./Data/enemyChance.json",this._onEnemyChanceLoaded.bind(this));this._loadJsonFromFile("./Data/starterPacks.json",this._onStarterPacksLoaded.bind(this));this._loadJsonFromFile("./Data/levelsGear.json",this._onLevelsGearLoaded.bind(this));this._loadJsonFromFile("./Data/levelsPilots.json",this._onLevelsPilotLoaded.bind(this));this._loadJsonFromFile("./Data/eventConfig.json",this._onEventConfigLoaded.bind(this));this._loadJsonFromFile("./Data/raidBossEvent_bossDefinitions.json",this._onRBBossDefinitionsLoaded.bind(this));this._loadJsonFromFile("./Data/raidBossEvent_eventPointsRewards.json",this._onRBEventPointsRewardsLoaded.bind(this));this._loadJsonFromFile("./Data/raidBossEvent_eventRankingRewards.json",this._onRBEventRankingRewardsLoaded.bind(this));this._loadJsonFromFile("./Data/gachaStore.json",this._onStoreConfigLoaded.bind(this));this._setupTransformFrameAnimation();this._missionBackIndex={}},_setupTransformFrameAnimation:function(k,l){this.transformFrameAnimation=__ngs.r_(__ngs._44);for(var h=1;h<=10;h++){this.transformFrameAnimation.motions["tfc_"+h].source[0].scaleX=4;this.transformFrameAnimation.motions["tfc_"+h].source[0].scaleY=4;for(var g in this.transformFrameAnimation.motions["tfc_"+h].KeyFrame){if(this.transformFrameAnimation.motions["tfc_"+h].KeyFrame[g].scaleX){var n=this.transformFrameAnimation.motions["tfc_"+h].KeyFrame[g].scaleX*4;this.transformFrameAnimation.motions["tfc_"+h].KeyFrame[g].scaleX=n}if(this.transformFrameAnimation.motions["tfc_"+h].KeyFrame[g].scaleY){var m=this.transformFrameAnimation.motions["tfc_"+h].KeyFrame[g].scaleY*4;this.transformFrameAnimation.motions["tfc_"+h].KeyFrame[g].scaleY=m}}}this.transformFrameAnimation.motions.tfc_6_1.source[0].scaleX=4;this.transformFrameAnimation.motions.tfc_6_1.source[0].scaleY=4;for(var g in this.transformFrameAnimation.motions.tfc_6_1.KeyFrame){if(this.transformFrameAnimation.motions.tfc_6_1.KeyFrame[g].scaleX){var n=this.transformFrameAnimation.motions["tfc_"+h].KeyFrame[g].scaleX*4;this.transformFrameAnimation.motions.tfc_6_1.KeyFrame[g].scaleX=n}if(this.transformFrameAnimation.motions.tfc_6_1.KeyFrame[g].scaleY){var m=this.transformFrameAnimation.motions.tfc_6_1.KeyFrame[g].scaleY*4;this.transformFrameAnimation.motions.tfc_6_1.KeyFrame[g].scaleY=m}}},exitGame:function(k,g){var h=new UI.AlertDialog();h.setTitle(g);h.setText(e.Localization.getString(k));h.setChoices([e.Localization.getString("ui_exitgame")]);h.setOnChoice((function(){Device.LifecycleEmitter.exitProcess()}).bind(h));h.show()},_onRBEventRankingRewardsLoaded:function(g,h){if(g||h===null){this.exitGame("raidBossEvent_eventRankingRewards json not loaded")}this._RBEventRankingRewards=h},_onRBEventPointsRewardsLoaded:function(g,h){if(g||h===null){this.exitGame("raidBossEvent_eventPointsRewards json not loaded")}this._RBEventPointRewards=h},_onRBBossDefinitionsLoaded:function(g,h){if(g||h===null){return}this._RBBossDefinitions=h},_onRBBossEncounterChanceLoaded:function(g,h){if(g||h===null){this.exitGame("raidBossEvent_bossEncounterChance json not loaded")}this._RBBossEncounterChance=h},_onEventConfigLoaded:function(g,h){if(g||h===null){this.exitGame("EventConfig json not loaded")}this._eventConfig=h},_onLevelsGearLoaded:function(g,h){if(g||h===null){this.exitGame("LevelsGear json not loaded")}this._levelsGear=h},_onLevelsPilotLoaded:function(g,h){if(g||h===null){this.exitGame("LevelsPilot json not loaded")}this._levelsPilot=h},_onEnemyChanceLoaded:function(g,h){if(g||h==null){this.exitGame("EnemyChance json not loaded")}this._enemyChanceJSON=h},_devConfigLoaded:function(g,h){this._devConfigJSON=h},_onMissionsLoaded:function(k,n){if(k||n==null){this.exitGame("missions.json not loaded")}this._missionsJSON=n;for(var h in n.worlds){for(var l in n.worlds[h].stages){for(var g in n.worlds[h].stages[l].missions){this._missionBackIndex[n.worlds[h].stages[l].missions[g].id]={worldId:n.worlds[h].id,stageId:n.worlds[h].stages[l].id}}}}},_onCardsLoaded:function(g,h){if(g||h==null){this.exitGame("cards.json not loaded")}this._cardsJSON=h},_onLevelsLoaded:function(g,h){if(g||h==null){this.exitGame("levels.json not loaded")}this._levelsJSON=h},_onLuckyLoaded:function(g,h){if(g||h==null){this.exitGame("lucky.json not loaded")}this._luckyJSON=h},_onConfigLoaded:function(g,h){if(g||h==null){this.exitGame("config.json not loaded")}this._configJSON=h},_onItemPacksLoaded:function(g,h){if(g||h==null){this.exitGame("itempacks.json not loaded")}this._itemPacksJSON=h},_onItemsLoaded:function(g,h){if(g||h==null){this.exitGame("items.json not loaded")}this._itemsJSON=h},_onMedalsLoaded:function(g,h){if(g||h==null){this.exitGame("medals.json not loaded")}this._medalsJSON=h},_onGashaPacksLoaded:function(g,h){if(g||h==null){this.exitGame("gashapacks.json not loaded")}this._gashaPacksJSON=h},_onAchievementsLoaded:function(g,h){if(g||h==null){this.exitGame()}this._achievementsJSON=h},_onStarterPacksLoaded:function(g,h){if(g||h==null){this.exitGame("startetpacks.json not loaded")}this._starterPacksJSON=h},_onStoreConfigLoaded:function(g,h){if(g||h==null){this.exitGame("store configs not loaded "+g)}this._storeConfigsJSON=h},isReady:function(){if(this._fileLoadingFinished===true&&!this._lastlog){this._lastlog=true}return this._fileLoadingFinished},_loadJsonFromFile:function(h,g){this._numberOfFilesLoading++;c.FileSystem.readFile(h,{binary:true},function(k,m){this._numberOfFilesLoading--;if(k){g(k);return}var l;try{l=JSON.parse(m)}catch(n){g(n.toString());return}g(undefined,l);if(this._numberOfFilesLoading===0){this._fileLoadingFinished=true}}.bind(this))},getLuckyChanceWithId:function(g){return this._luckyJSON[""+g]},getEnemyWithId:function(h){for(var g in this._enemyChanceJSON){if(this._enemyChanceJSON[g].id==h){return this._enemyChanceJSON[g]}}},numberOfWorlds:function(){return this._missionsJSON.worlds.length},getWorlds:function(){return this._missionsJSON.worlds},getWorld:function(h){var k;for(var g in this._missionsJSON.worlds){if(this._missionsJSON.worlds[g].id==h){k=this._missionsJSON.worlds[g];break}}return k},getCorrectDeckForWorld:function(h){var g;if(this.getWorld(h).faction==this.FACTION.AUTOBOTSTRING){g=this.DECK_INDEX.AUTOBOTS}else{g=this.DECK_INDEX.DECEPTICONS}return g},getWorldName:function(g){return this.getWorld(g).worldName},getStagesForWorld:function(g){return this.getWorld(g).stages},getStage:function(g,l){var m=this.getStagesForWorld(g);var h;for(var k in m){if(m[k].id==l){h=m[k];break}}return h},getBossForStage:function(g,h){return this.getStage(g,h).boss},getMissionsForStage:function(g,h){return this.getStage(g,h).missions},getStageIdForMission:function(g){return this._missionBackIndex[g].stageId},getWorldIdForMission:function(g){return this._missionBackIndex[g].worldId},getMission:function(h){var k=this._missionBackIndex[h].worldId;var n=this._missionBackIndex[h].stageId;var l=this.getMissionsForStage(k,n);var o;for(var g in l){if(l[g].id==h){o=l[g];break}}return o},getEnergyPerRound:function(g){return this.getMission(g).energyPerRound},getXpReward:function(g){return this.getMission(g).xpReward},getCardRewardsForMission:function(g){var o=this.getMission(g).rewards;var m=[];for(var l in o){if(o[l].type==this.REWARD_TYPE.CARD){if(m.indexOf(o[l].value)<0){m.push(o[l].value)}}if(o[l].type==this.REWARD_TYPE.LUCKYCHANCE&&o[l].rate){var n=this.getLuckyChanceWithId(o[l].value);for(var k in n.cards){if(m.indexOf(n.cards[k].id)<0){m.push(n.cards[k].id)}}}if(o[l].type==this.REWARD_TYPE.ENEMYCHANCE&&o[l].rate){var h=this.getEnemyWithId(o[l].value);if(m.indexOf(h.pilotId)<0){m.push(h.pilotId)}}}return m},getTotalRoundsForMission:function(g){return this.getMission(g).numberOfRounds},getInventoryItem:function(k){var g;for(var h in this._inventoryJSON){if(this._inventoryJSON[h].sku==k){g=this._inventoryJSON[h];break}}return g},getItemDesc:function(h){for(var g in this._itemsJSON){if(this._itemsJSON[g].id==h){return this._itemsJSON[g]}}},getItemList:function(k){if(k===undefined){k=0}var h=[];for(var g in this._itemsJSON){if(this._itemsJSON[g].enabled){h.push(this._itemsJSON[g])}}return h.slice(k*15,k*15+16)},getFuzzyMisionId:function(g){return""+g},_getMedalInfo:function(h){for(var g in this._medalsJSON){if(this._medalsJSON[g].id==h){return this._medalsJSON[g]}}},getMedalImagePath:function(h){var g=this._getMedalInfo(h);if(g){return"Content/Images8x/UI/StoreItems/"+g.inventoryImage}},isEventMedal:function(h){var g=this._getMedalInfo(h);if(g){return g.event}},getEventInfo:function(h){for(var g in this._eventConfig){if(this._eventConfig[g].eventId==h){return this._eventConfig[g]}}},getRunningEvent:function(){var l,m,g;var k=Server.getServerTime();for(var h in this._eventConfig){l=this._eventConfig[h];m=new Date(l.startTime);g=new Date(l.expirationTime);if((k>m)&&(k<g)){if(false){if(TFUtils.onDev()){if(this._alternate){this._alternate=false;return undefined}else{this._alternate=true}}}return l}}return undefined},getNextEvent:function(){var m;var k=Server.getServerTime();var g;var l;for(var h in this._eventConfig){m=new Date(this._eventConfig[h].startTime);if(m>k){if(!l||(m<g)){l=this._eventConfig[h];g=new Date(l.startTime)}}}return l},getLastEvent:function(){var m;var l=Server.getServerTime();var h;var g;for(var k in this._eventConfig){m=new Date(this._eventConfig[k].startTime);if(m<l){if(!g||(m<h)){g=this._eventConfig[k];h=new Date(g.startTime)}}}return g},getEventTopReward:function(l){var k=undefined;if(this._RBEventRankingRewards.rankingRewards[l]){var g=undefined;for(var h in this._RBEventRankingRewards.rankingRewards[l]){if(!k||(this._RBEventRankingRewards.rankingRewards[l][h].ranking<k.ranking)){k=this._RBEventRankingRewards.rankingRewards[l][h]}}}return k},getBossDefinition:function(k,l){if(this._RBBossDefinitions.bossDefinitions[k]){for(var g in this._RBBossDefinitions.bossDefinitions[k]){var h=this._RBBossDefinitions.bossDefinitions[k][g];if(h.id==l){return h}}}},getPointsToNextReward:function(k,h){var l=0;if(this._RBEventPointRewards.pointsRewards[k]){for(var g in this._RBEventPointRewards.pointsRewards[k]){if(!l){if(this._RBEventPointRewards.pointsRewards[k][g].eventPoints>h){l=this._RBEventPointRewards.pointsRewards[k][g].eventPoints}}else{if(this._RBEventPointRewards.pointsRewards[k][g].ranking<l){l=this._RBEventPointRewards.pointsRewards[k][g].eventPoints}}}}return l},getEventPointsForLevel:function(g,h){if(this._RBEventPointRewards.pointsRewards){if(this._RBEventPointRewards.pointsRewards[g]){if(this._RBEventPointRewards.pointsRewards[g][h]){return this._RBEventPointRewards.pointsRewards[g][h].eventPoints}}}},getEventPointRewards:function(g){if(this._RBEventPointRewards.pointsRewards){return this._RBEventPointRewards.pointsRewards[g]}},getEventRankingRewards:function(g){if(this._RBEventRankingRewards.rankingRewards){return this._RBEventRankingRewards.rankingRewards[g]}},getRewardsForEventRank:function(h,m){var l=this.getEventRankingRewards(h);var k;if(l){for(var g in l){if(!k||(l[g].ranking>k)){k=l[g].ranking}}}if(k&&(m<=k)){return true}return false},getStoreData:function(g){return this._storeConfigsJSON[g]},dummy:undefined})}};__ngs._n={_c:null,_d:function(){var d={exports:{}};var b=d.exports;this._c=d;var a=__ngs.r_(__ngs._45).AnimationManager;var c=__ngs.r_(__ngs._45).AnimationQueue;b.ViewController=Core.MessageListener.subclass({classname:"ViewController",initialize:function(){console.log("(DYNAMICJSON) ViewController("+this.classname+") > initialize");this._animMgr=new a();this._nonWorkingAreaCoverVisibility=[false,false,false,false];this._controllerIsLoaded=false;this._loadingCallbacks=[]},createView:function(g,e){console.log("(DYNAMICJSON) ViewController("+this.classname+") > createView");this._createViewCallback=e;this.beforeViewCreated();this._view=new g(this);return this._view},controllerIsLoaded:function(){console.log("(DYNAMICJSON) ViewController("+this.classname+") > controllerIsLoaded > _controllerIsLoaded="+this._controllerIsLoaded);return this._controllerIsLoaded},addViewsDoneLoadingCallback:function(e){this._loadingCallbacks.push(e)},onViewsDoneLoading:function(e){console.log("(DYNAMICJSON) ViewController("+this.classname+") > onViewsDoneLoading");this._controllerIsLoaded=true;if(this._createViewCallback){console.log("(DYNAMICJSON) ViewController("+this.classname+") > onViewsDoneLoading > invoking createViewCallback");this._view=e;var g=this._createViewCallback;this._createViewCallback=undefined;g()}for(var h in this._loadingCallbacks){console.log("(DYNAMICJSON) ViewController("+this.classname+") > onViewsDoneLoading > invoking loadingCallbacks["+h+"]");setTimeout(this._loadingCallbacks[h],10)}this._loadingCallbacks=[]},getView:function(e){if(this._view){if(e==false||!this._view._scrollArea){return this._view}else{if(this._view._scrollArea){return this._view._scrollArea}}}},beforeViewCreated:function(){NgLogD("&&&&&&&&&&&&&&&&&&&&&&&&&&&&*****beforename==="+this.classname);if(this.classname!="DialogViewController"&&this.classname!="BottomHudViewController"){TFSceneDirector.dismissTutorialDialog()}if(TFSceneDirector._topHudViewController){TFSceneDirector._topHudViewController.update()}},afterViewDisplayed:function(){},getNonWorkingAreaCoverVisibility:function(){return this._nonWorkingAreaCoverVisibility},setNonWorkingAreaCoverVisibility:function(e){this._nonWorkingAreaCoverVisibility=e},setHudDisplayData:function(g,e){this._topHudData=g;this._bottomHudData=e},getTopHudDisplayData:function(){return this._topHudData},getBottomHudDisplayData:function(){return this._bottomHudData},setViewStartPositionY:function(e){this._startPosY=e},getViewStartPositionY:function(){return this._startPosY},getAnimationManager:function(){return this._animMgr},createAnimationQueue:function(){return new c(this._animMgr)},resetRunningAnimations:function(){this._animMgr.destroy();this._animMgr=new a()},destroy:function($super){if(this._animMgr){this._animMgr.destroy()}if(this._view){this._view.destroy()}this._view=undefined;$super()},setBottomHudView:function(g){var e=__ngs.r_(__ngs._46).BottomHudView;g.updateHudWithView(e)},setLeftButton:function(e){e.useLeftButtonAsHomeButton()},onResume:function(){}})}};__ngs._o={_c:null,_d:function(){var a={exports:{}};var d=a.exports;this._c=a;var k=__ngs.r_(__ngs._45).AnimationManager;var b=__ngs.r_(__ngs._45).AnimationQueue;var m=__ngs.r_(__ngs._47).UpdateStacker;var g=__ngs.r_(__ngs._48).TFSoundManager;var e=__ngs.r_(__ngs._49).TFDeckManager;var l=__ngs.r_(__ngs._4a).TFImageManager;var c=__ngs.r_(__ngs._4b).UILoader;var h=__ngs.r_(__ngs._4c).TFUpdateEmitter;d.TFSceneDirector=Core.MessageListener.singleton({classname:"TFSceneDirector",MUSIC_KEY_HOME:"MAIN_MENU_BACK",LAYER_DEPTH:{CURRENTVIEW:1,ANIMATINGVIEW:1,COVER:2,TOPHUD:3,BOTHUD:3,LOADING:4,DIALOG:5,TUTORIAL:6,FADE:7},initialize:function(){this._byPassTutorial=false;this._workingArea=this.getWorkingArea();console.log("TFSceneDirector > initialize > workingArea="+JSON.stringify(this._workingArea));console.log("TFSceneDirector > initialize > screen w,h="+this.getScreenWidth()+","+this.getScreenHeight());this._currentViewController=undefined;this._animatingViewController=undefined;this._viewControllerStack=[];this._appBackground=new GL2.Sprite();this._appBackground.setImage("./Content/Images8x/misc/1pxwhite.png",[this.getScreenWidth(),this.getScreenHeight()],[0,0]);this._appBackground.setColor(0,0,0);this._workingAreaBackground=new GL2.Sprite();this._workingAreaBackground.setImage("./Content/Images8x/misc/1pxwhite.png",[this._workingArea.width,this._workingArea.height],[0,0]);this._workingAreaBackground.setPosition(this._workingArea.offsetX,this._workingArea.offsetY);GL2.Root.addChild(this._appBackground);this._node=new GL2.Node();GL2.Root.addChild(this._node);this._node.setVisible(false);this._viewLayer=new GL2.Node();this._viewLayer.setDepth(this.LAYER_DEPTH.CURRENTVIEW);this._viewLayer.setScale(this._workingArea.scaleX,this._workingArea.scaleY);this._viewLayer.setPosition(this._workingArea.offsetX,this._workingArea.offsetY);this._node.addChild(this._viewLayer);this._animatingViewLayer=new GL2.Node();this._animatingViewLayer.setDepth(this.LAYER_DEPTH.ANIMATINGVIEW);this._animatingViewLayer.setScale(this._workingArea.scaleX,this._workingArea.scaleY);this._animatingViewLayer.setPosition(this._workingArea.offsetX,this._workingArea.offsetY);this._node.addChild(this._animatingViewLayer);this._introPlaying=true;var o=__ngs.r_(__ngs._4d).SplashScreenViewController;this.pushViewController(new o());this._nonWorkingAreaCover=new GL2.Node();this._nonWorkingAreaCoverLeft=new GL2.Sprite();this._nonWorkingAreaCoverLeft.setAnimation(SpriteFactoryCache.getAnimation("./Content/Images8x/misc/1pxwhite.png",[this._workingArea.offsetX,this._workingArea.height],[0,0]));this._nonWorkingAreaCoverLeft.setPosition(0,0);this._nonWorkingAreaCoverLeft.setColor(0,0,0);this._nonWorkingAreaCoverRight=new GL2.Sprite();this._nonWorkingAreaCoverRight.setAnimation(SpriteFactoryCache.getAnimation("./Content/Images8x/misc/1pxwhite.png",[this._workingArea.offsetX+10,this._workingArea.height],[0,0]));this._nonWorkingAreaCoverRight.setPosition(this._workingArea.width+this._workingArea.offsetX,0);this._nonWorkingAreaCoverRight.setColor(0,0,0);this._nonWorkingAreaCoverTop=new GL2.Sprite();this._nonWorkingAreaCoverTop.setAnimation(SpriteFactoryCache.getAnimation("./Content/Images8x/misc/1pxwhite.png",[this._workingArea.width,this._workingArea.offsetY],[0,0]));this._nonWorkingAreaCoverTop.setPosition(0,0);this._nonWorkingAreaCoverTop.setColor(0,0,0);this._nonWorkingAreaCoverBottom=new GL2.Sprite();this._nonWorkingAreaCoverBottom.setAnimation(SpriteFactoryCache.getAnimation("./Content/Images8x/misc/1pxwhite.png",[this._workingArea.width,this._workingArea.offsetY],[0,0]));this._nonWorkingAreaCoverBottom.setPosition(0,this._workingArea.height+this._workingArea.offsetY);this._nonWorkingAreaCoverBottom.setColor(0,0,0);this._nonWorkingAreaCover.addChild(this._nonWorkingAreaCoverTop);this._nonWorkingAreaCover.addChild(this._nonWorkingAreaCoverBottom);this._nonWorkingAreaCover.addChild(this._nonWorkingAreaCoverLeft);this._nonWorkingAreaCover.addChild(this._nonWorkingAreaCoverRight);this._nonWorkingAreaCover.setDepth(this.LAYER_DEPTH.COVER);this._node.addChild(this._nonWorkingAreaCover);this._dialogLayer=new GL2.Node();this._dialogLayer.setDepth(this.LAYER_DEPTH.DIALOG);this._dialogLayer.setScale([this._workingArea.scaleX,this._workingArea.scaleY]);this._dialogLayer.setPosition(this.getScreenWidth()/2,this.getScreenHeight()/2);this._tutorialLayer=new GL2.Node();this._tutorialLayer.setDepth(this.LAYER_DEPTH.TUTORIAL);this._tutorialLayer.setScale([this._workingArea.scaleX,this._workingArea.scaleY]);this._tutorialLayer.setPosition(this.getScreenWidth()/2,this.getScreenHeight()/2);var n=__ngs.r_(__ngs._4e).GLButton;this._shade2=new n(undefined,"./Content/Images8x/misc/1pxwhite.png");this._shade2.setFeedback(false);this._shade2.setAnchor(new Core.Point(0.5,0.5));this._shade2.setSize(new Core.Size(this.getScreenWidth()/this._workingArea.scaleX,this.getScreenHeight()/this._workingArea.scaleY));this._shade2.setImageColor(0,0,0);this._shade2.setAlpha(0.5);this._shade2.setRandomSound(true);this._tutorialLayer.addChild(this._shade2);this._globalTouchTarget=new GL2.TouchTarget();this._globalTouchTarget.getTouchEmitter().addListener(new Core.MessageListener(),this._onGlobalTouch.bind(this));this._globalTouchTarget.setPosition(0,0);this._globalTouchTarget.setSize(this.getScreenWidth(),this.getScreenHeight());GL2.Root.addChild(this._globalTouchTarget);TFSceneDirector.missionScrollPos={};this._currentDialogController=null},loadGame:function(){if(this._introPlaying||!this.allClearFlag){return}g.instantiate();TFUserData.setInitialTutorialStates();if(TFUserData.getTutorialState("main")=="start"&&!this._byPassTutorial){TFGameData._mainTutorialFlag=true;if(TFUserData.getCards().length>1){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"TUTORIALSTARTATLEADERSELECTION"});var n=__ngs.r_(__ngs._4f).TutorialChooseViewController;TFSceneDirector.pushViewController(new n())}else{TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"00_TUTORIALSTARTING"});var r=__ngs.r_(__ngs._4g).SideSelectionViewController;this.pushViewController(new r())}}else{if(TFUserData.getTutorialState("main")=="space-bridge"&&!this._byPassTutorial){TFGameData._mainTutorialFlag=true;TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"TUTORIALSTARTATSPACEBRIDGE"});if(!TFGameData._selectedFaction){if(TFUserData.sideSelected=="Autobot"){TFGameData._selectedFaction=TFGameData.FACTION.AUTOBOTS}else{if(TFUserData.sideSelected=="Decepticon"){TFGameData._selectedFaction=TFGameData.FACTION.DECEPTICONS}}}var o=new Object();o.newCards=TFUserData.getCardsOfFaction(TFGameData._selectedFaction);var u=__ngs.r_(__ngs._4h).GashaViewController;TFSceneDirector.pushViewController(new u(o))}else{if(this._byPassTutorial&&TFUserData.getTutorialState("main")=="start"){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"B_BYPASSTUTORIAL"});TFUserData.setNewTutorialState("main","end");TFGameData._mainTutorialFlag=false;Server.setInitialPack(""+1,function(){TFAnalytics.reportGameEvent("MAINTUTORIAL",{Step:"B03_SETINITIALDECK"});Server.getAllUserCards(function(w,x){if(!w){TFUserData.syncFrom(x);this.getTopHudViewController().update();e.setMainDeck(e.getRecommendedDeck(),function(){e.setAutobotsDeck(e.getRecommendedDeck(TFGameData.FACTION.AUTOBOTS),function(){e.setDecepticonsDeck(e.getRecommendedDeck(TFGameData.FACTION.DECEPTICONS))})})}else{TFUtils.showErrorMessages(x)}}.bind(this))}.bind(this));e.checkDecks(function(){this.showLanding()}.bind(this))}else{e.checkDecks(function(){this.showLanding()}.bind(this))}}}this._topHudLayer=new GL2.Node();this._topHudLayer.setDepth(this.LAYER_DEPTH.TOPHUD);this._topHudLayer.setScale(this._workingArea.scaleX,this._workingArea.scaleY);this._topHudLayer.setPosition(this._workingArea.offsetX,0);var q=__ngs.r_(__ngs._4i).TopHudViewController;this._topHudViewController=new q();this._topHudLayer.addChild(this._topHudViewController.getView());this._topHudVisible=true;this._topHudHeight=200;this.hideTopHud(false);this._node.addChild(this._topHudLayer);this._bottomHudLayer=new GL2.Node();this._bottomHudLayer.setDepth(this.LAYER_DEPTH.BOTHUD);this._bottomHudLayer.setScale(this._workingArea.scaleX,this._workingArea.scaleY);this._bottomHudLayer.setPosition(this._workingArea.offsetX,this.getScreenHeight());var t=__ngs.r_(__ngs._4j).BottomHudViewController;this._bottomHudViewController=new t();this._bottomHudLayer.addChild(this._bottomHudViewController.getView());this._bottomHudVisible=true;this._bottomHudHeight=200;this.hideBottomHud(false);this._node.addChild(this._bottomHudLayer);this.setStage({worldId:-1,stageId:-1});for(var p in TFUserData.missionsState){var v=TFUserData.missionsState[p];console.log("stage onMissionNav %s ",JSON.stringify(v));if(v.progress<1){this.setStage(v);break}}this._fadeLayerBG=new UI.View();var s=new UI.ViewGeometry.Rect(0,0,this.getScreenWidth(),this.getScreenHeight());this._fadeLayerBG.setFrame(s.array());this._fadeLayerBG.setBackgroundColor("00000000");this._fadeLayerBG.setTouchable(false);UI.Window.document.addChild(this._fadeLayerBG);this._fadeLayer=new UI.View();this._fadeLayer.setFrame(s.array());this._fadeLayerColor="FFFFFF";this._fadeLayer.setBackgroundColor("00FFFFFF");this._fadeLayer.setTouchable(false);UI.Window.document.addChild(this._fadeLayer);this.am=new k();this.backBlocked=null;this.doneLoad=true},getScreenWidth:function(){return UI.Window._width},getScreenHeight:function(){return UI.Window._height},getWorkingArea:function(){var n;n={offsetX:0,offsetY:0,scaleX:this.getScreenWidth()/TFGlobals.nativeResolution.x,scaleY:this.getScreenHeight()/TFGlobals.nativeResolution.y};n.scaleX=Math.min(n.scaleX,n.scaleY);n.scaleY=n.scaleX;n.width=n.scaleX*TFGlobals.nativeResolution.x;n.height=n.scaleY*TFGlobals.nativeResolution.y;n.offsetX=Math.floor((this.getScreenWidth()-n.width)/2);n.offsetY=Math.floor((this.getScreenHeight()-n.height)/2);n.screenWidth=1/n.scaleX*this.getScreenWidth();n.screenHeight=1/n.scaleY*this.getScreenHeight();return n},fadeIn:function(p,o){this._fadeLayer.setTouchable(false);var n=new b(this.am);n.pushAnimation(1500,b.Curve.EaseOut);n.tween(b.Interpolate.scalar(1,0),this.setFadeLayerAlpha.bind(this));if(o){n.pushCallback(o)}var q=this.getHexRGBColor(p);this._fadeLayerColor=q;this._fadeLayer.setBackgroundColor("FF"+q);n.start()},fadeOut:function(p,o){this._fadeLayer.setTouchable(true);var n=new b(this.am);n.pushAnimation(1500,b.Curve.EaseIn);n.tween(b.Interpolate.scalar(0,1),this.setFadeLayerAlpha.bind(this));if(o){n.pushCallback(o)}var q=this.getHexRGBColor(p);this._fadeLayerColor=q;this._fadeLayer.setBackgroundColor("00"+q);n.start()},setFadeLayerAlpha:function(n){var o=Math.floor(n*255).toString(16);if(o.length<2){o="0"+o}this._fadeLayer.setBackgroundColor(o+this._fadeLayerColor);this._fadeLayerBG.setBackgroundColor(o+"000000")},getHexRGBColor:function(n){if(n.length!=3){console.log(this,"Incorrect color array. Returning black");return"000000"}var p=Math.floor(n[0]*255).toString(16);if(p.length<2){p="0"+p}var o=Math.floor(n[1]*255).toString(16);if(o.length<2){o="0"+o}var q=Math.floor(n[2]*255).toString(16);if(q.length<2){q="0"+q}return(p+o+q).toUpperCase()},showTopHud:function(M,E){E=E||"full";if(TFUserData.getTutorialState("main")!="end"){console.log("(TOPHUD) In tutorial - do nothing");return}var N=this._topHudViewController.getView().lgButtonPanel.icon;var P=this._viewControllerStack[this._viewControllerStack.length-1];var z;if(P){if(P.classname=="HomeViewController"){console.log("(TOPHUD) On home screen - selecting team icon");z=N.info.asset_team}else{var o=this._viewControllerStack.length-2;var I=this._viewControllerStack[o];while(I&&I.skip){o=o-1;I=this._viewControllerStack[o]}if(I&&(I.classname=="HomeViewController")){console.log("(TOPHUD) Previous view is home screen - selecting home icon");z=N.info.asset_home}else{if(!I){console.log("(TOPHUD) No previous view - selecting home icon");z=N.info.asset_home}else{console.log("(TOPHUD) Default - selecting back icon");z=N.info.asset_back}}}}else{z=N.info.asset_home}console.log("(TOPHUD) Changing back button asset: "+z);TFUtils.changeImageOnSprite(this._topHudViewController.getView().smButtonPanel.icon,z);setTimeout(TFUtils.changeImageOnSprite.bind(this,this._topHudViewController.getView().lgButtonPanel.icon,z),10);if(this._topHudVisible&&(this._topHudMode===E)){console.log("(TOPHUD) Top hud already visible and with same mode '"+E+"' - do nothing");return}console.log("(TOPHUD) Top hud mode changing to '"+E+"' (prev='"+this._topHudMode+"'), animated="+M);var F=1;var n=250*F;var p=new Core.Point(this._topHudLayer.getPosition().getX(),-this._topHudHeight);var s=new Core.Point(0,-20);var O=new Core.Point(0,0);var B=new Core.Point(0,5);var H=new Core.Point(0,10);var v=this._topHudViewController.getView().mainPanel.getPosition();var q=this._topHudViewController.getView().mainPanel.getPosition();var J=this._topHudViewController.getView().cardPanel.getPosition();var K=this._topHudViewController.getView().cardPanel.getPosition();var y=new Core.Point(J.getX(),J.getY()+B.getY());var G=this._topHudViewController.getView().smButtonPanel.getPosition();var L=this._topHudViewController.getView().smButtonPanel.getPosition();var A=new Core.Point(G.getX(),G.getY()+B.getY());var r=undefined;if((this._topHudMode==="full")&&(E==="no_card_counts")){J.setY(O.getY());K.setY(p.getY());r=b.Curve.EaseIn}else{if((this._topHudMode==="no_card_counts")&&(E==="full")){J.setY(p.getY());K.setY(O.getY());r=b.Curve.EaseOut}else{if((this._topHudMode==="full")&&(E==="button_only")){v.setY(O.getY());q.setY(p.getY());J.setY(O.getY());K.setY(p.getY());G.setY(p.getY());L.setY(O.getY());r=b.Curve.EaseIn}else{if((this._topHudMode==="button_only")&&(E==="full")){v.setY(p.getY());q.setY(O.getY());J.setY(p.getY());K.setY(O.getY());G.setY(O.getY());L.setY(p.getY());r=b.Curve.EaseOut;q.setX(O.getX())}else{if((this._topHudMode==="no_card_counts")&&(E==="button_only")){v.setY(O.getY());q.setY(p.getY());G.setY(p.getY());L.setY(O.getY());r=b.Curve.EaseIn}else{if((this._topHudMode==="button_only")&&(E==="no_card_counts")){v.setY(p.getY());q.setY(O.getY());G.setY(O.getY());L.setY(p.getY());r=b.Curve.EaseOut;q.setX(O.getX())}}}}}}if(this._topHudVisible){if((v!==undefined)&&(q!==undefined)){if(M){var C=new b(this.am);if(r==b.Curve.EaseIn){C.pushAnimation(n,r);C.tween(b.Interpolate.point(v,q),function(R){this._topHudViewController.getView().mainPanel.setPosition(R.getX(),R.getY());this._topHudViewController.getView().lgButtonPanel.setPosition(R.getX(),R.getY())}.bind(this))}else{C.pushAnimation(n,r);C.tween(b.Interpolate.point(v,H),function(R){this._topHudViewController.getView().mainPanel.setPosition(R.getX(),R.getY());this._topHudViewController.getView().lgButtonPanel.setPosition(R.getX(),R.getY())}.bind(this));C.pushAnimation(n,b.Curve.EaseInOut);C.tween(b.Interpolate.point(H,q),function(R){this._topHudViewController.getView().mainPanel.setPosition(R.getX(),R.getY());this._topHudViewController.getView().lgButtonPanel.setPosition(R.getX(),R.getY())}.bind(this))}C.start()}else{this._topHudViewController.getView().mainPanel.setPosition(q);this._topHudViewController.getView().lgButtonPanel.setPosition(q)}}if((J!==undefined)&&(K!==undefined)){if(M){var w=new b(this.am);if(r==b.Curve.EaseIn){w.pushAnimation(n,r);w.tween(b.Interpolate.point(J,K),function(R){this._topHudViewController.getView().cardPanel.setPosition(R.getX(),R.getY())}.bind(this))}else{w.pushAnimation(n,r);w.tween(b.Interpolate.point(J,y),function(R){this._topHudViewController.getView().cardPanel.setPosition(R.getX(),R.getY())}.bind(this));w.pushAnimation(n,b.Curve.EaseInOut);w.tween(b.Interpolate.point(y,K),function(R){this._topHudViewController.getView().cardPanel.setPosition(R.getX(),R.getY())}.bind(this))}w.start()}else{this._topHudViewController.getView().cardPanel.setPosition(K)}}if((G!==undefined)&&(L!==undefined)){if(M){var Q=new b(this.am);if(r==b.Curve.EaseOut){Q.pushAnimation(n,r);Q.tween(b.Interpolate.point(G,L),function(R){this._topHudViewController.getView().smButtonPanel.setPosition(R.getX(),R.getY())}.bind(this))}else{Q.pushAnimation(n,r);Q.tween(b.Interpolate.point(G,A),function(R){this._topHudViewController.getView().smButtonPanel.setPosition(R.getX(),R.getY())}.bind(this));Q.pushAnimation(n,b.Curve.EaseInOut);Q.tween(b.Interpolate.point(A,L),function(R){this._topHudViewController.getView().smButtonPanel.setPosition(R.getX(),R.getY())}.bind(this))}Q.start()}else{this._topHudViewController.getView().smButtonPanel.setPosition(L)}}}else{this._topHudVisible=true;this._topHudViewController.getView().mainPanel.setPosition(p);this._topHudViewController.getView().cardPanel.setPosition(p);this._topHudViewController.getView().lgButtonPanel.setPosition(p);this._topHudViewController.getView().smButtonPanel.setPosition(this._topHudViewController.getView().smButtonPanel.getPosition().getX(),p.getY());if((E==="full")||(E==="no_card_counts")){this._topHudViewController.getView().mainPanel.setPosition(O);this._topHudViewController.getView().lgButtonPanel.setPosition(O)}else{this._topHudViewController.getView().smButtonPanel.setPosition(this._topHudViewController.getView().smButtonPanel.getPosition().getX(),O.getY())}if(M){var D=new b(this.am);var u=new Core.Point(this._topHudLayer.getPosition().getX(),-this._topHudHeight*this._workingArea.scaleY);var x=new Core.Point(this._topHudLayer.getPosition().getX(),10*this._workingArea.scaleY);var t=new Core.Point(this._topHudLayer.getPosition().getX(),0);D.pushAnimation(n,b.Curve.EaseOut);D.tween(b.Interpolate.point(u,x),function(R){this._topHudLayer.setPosition(R.getX(),R.getY())}.bind(this));D.pushAnimation(n,b.Curve.EaseIn);D.tween(b.Interpolate.point(x,t),function(R){this._topHudLayer.setPosition(R.getX(),R.getY())}.bind(this));D.start();if(E==="full"){this._topHudViewController.getView().cardPanel.setPosition(s);var w=new b(this.am);w.pushAnimation(n,b.Curve.Linear);w.pushAnimation(n*0.5,b.Curve.EaseOut);w.tween(b.Interpolate.point(s,B),function(R){this._topHudViewController.getView().cardPanel.setPosition(R.getX(),R.getY())}.bind(this));w.pushAnimation(n*0.5,b.Curve.EaseIn);w.tween(b.Interpolate.point(B,O),function(R){this._topHudViewController.getView().cardPanel.setPosition(R.getX(),R.getY())}.bind(this));w.start()}}else{this._topHudViewController.getView().cardPanel.setPosition(O);this._topHudLayer.setPosition(this._topHudLayer.getPosition().getX(),0)}}this._topHudMode=E},hideTopHud:function(p){console.log("hideTopHud");if(this._topHudVisible){this._topHudVisible=false;var o=new Core.Point(this._topHudLayer.getPosition().getX(),-this._topHudHeight*this._workingArea.scaleY);if(p){var q=250;var n=new b(this.am);n.pushAnimation(q,b.Curve.EaseIn);var r=new Core.Point(this._topHudLayer.getPosition().getX(),0);n.tween(b.Interpolate.point(r,o),function(s){this._topHudLayer.setPosition(s.getX(),s.getY())}.bind(this));n.start()}else{this._topHudLayer.setPosition(o)}}},showBottomHud:function(p){if(TFUserData.getTutorialState("main")!="end"){return}if(this._bottomHudVisible){return}this._bottomHudVisible=true;var o=new Core.Point(this._bottomHudLayer.getPosition().getX(),this.getScreenHeight());if(p){var q=250;var n=new b(this.am);n.pushAnimation(q,b.Curve.Linear);var r=new Core.Point(this._bottomHudLayer.getPosition().getX(),this.getScreenHeight()+this._bottomHudHeight*this._workingArea.scaleY);n.tween(b.Interpolate.point(r,o),function(s){if(this._bottomHudVisible){this._bottomHudLayer.setPosition(s.getX(),s.getY())}}.bind(this));n.start()}else{this._bottomHudLayer.setPosition(o)}console.log("showBottomHud")},hideBottomHud:function(p){if(!this._bottomHudVisible){return}this._bottomHudVisible=false;h.releaseElements("BottomHudViewController");var o=new Core.Point(this._bottomHudLayer.getPosition().getX(),this.getScreenHeight()+this._bottomHudHeight*this._workingArea.scaleY);if(p){var q=250;var n=new b(this.am);n.pushAnimation(q,b.Curve.Linear);var r=new Core.Point(this._bottomHudLayer.getPosition().getX(),this.getScreenHeight());n.tween(b.Interpolate.point(r,o),function(s){if(!this._bottomHudVisible){this._bottomHudLayer.setPosition(s.getX(),s.getY())}}.bind(this));n.start()}else{this._bottomHudLayer.setPosition(o)}console.log("hideBottomHud")},bottomHudVisible:function(){return this._bottomHudVisible},showTutorialDialog:function(p,o,q){var n=__ngs.r_(__ngs._4k).TutorialDialogViewController;if(!this._tutorialDialogViewController){this._tutorialDialogViewController=new n(p,o)}else{this._tutorialDialogViewController.createView(p,o)}if(TFGameData._configJSON&&TFGameData._configJSON.tutorial_flags){if(TFGameData._configJSON.tutorial_flags[o.tutorialId]==false){this._shade2.setVisible(false)}else{this._tutorialLayer.addChild(this._tutorialDialogViewController.getView())}}else{this._tutorialLayer.addChild(this._tutorialDialogViewController.getView())}this._node.addChild(this._tutorialLayer);return this._tutorialDialogViewController},showTutorialDialogNoBack:function(p,o,q){var n=this.showTutorialDialog(p,o,q);this._shade2.setVisible(false);return n},showTutorialDialogTransparentBack:function(p,o,q){var n=this.showTutorialDialog(p,o,q);this._shade2.setAlpha(0.1);return n},addChildTutorialLayer:function(n){this._tutorialChild=n;this._tutorialLayer.addChild(n)},_showDialog:function(n){if(this._currentDialogController){this._currentDialogController.dismissDialog()}this._currentDialogController=n;this._dialogLayer.addChild(n.getView());this._node.addChild(this._dialogLayer)},dismissTutorialDialog:function(){if(this._tutorialLayer&&this._tutorialLayer.getParent()){this._shade2.setVisible(true);this._shade2.setAlpha(0.7);this._node.removeChild(this._tutorialLayer);if(this._tutorialChild){this._tutorialLayer.removeChild(this._tutorialChild);this._tutorialChild=null}}if(this._tutorialDialogViewController&&this._tutorialDialogViewController.getView()){this._tutorialDialogViewController.resetRunningAnimations();this._tutorialDialogViewController.getView().destroy();this._tutorialDialogViewController._view=undefined;if(this._tutorialDialogViewController._destroyCB){this._tutorialDialogViewController._destroyCB();this._tutorialDialogViewController._destroyCB=undefined}}},showMissionSelect:function(n,p,q){g.playMusic(this.MUSIC_KEY_HOME);console.log("stage onMissionNav setting "+n+" "+p);this.setStage({stageId:p,worldId:n});var o=__ngs.r_(__ngs._4l).MissionSelectViewController;this.transitionToViewController(new o(n,p),this.showMissionSelect.bind(this,n,p),q,"MissionNav")},showStageSelect:function(o,p){var n=__ngs.r_(__ngs._4m).StageSelectViewController;this.transitionToViewController(new n(o),this.showStageSelect.bind(this,o),p,"MissionNav")},showWorldSelect:function(o){var n=__ngs.r_(__ngs._4n).WorldSelectViewController;this.transitionToViewController(new n(),this.showWorldSelect.bind(this),o,"MissionNav")},showCardList:function(o,p,n,t,u,s){console.log("<<showing list of cards");var q=__ngs.r_(__ngs._4o).DeckViewController;var r=__ngs.r_(__ngs._4p).DeckGridView;this.transitionToViewController(new q(o||r,p,n,t,s),this.showCardList.bind(this,o,p,n,t),u,"BottomHudNav")},showUnitDetails:function(p,o,q){console.log("TFSceneDirector.showUnitDetails unit: "+JSON.stringify(p));var n=__ngs.r_(__ngs._4q).UnitDetailViewController;this.transitionToViewController(new n(p,o),this.showUnitDetails.bind(this,p,o),q,"skip")},showUnitEdit:function(p,n,q){console.log("TFSceneDirector.showUnitEdit unit: "+JSON.stringify(p));var o=__ngs.r_(__ngs._4r).UnitEditViewController;this.transitionToViewController(new o(p,n),this.showUnitEdit.bind(this,p,n),q,"skip")},showUnitBonus:function(p,n,o,q){var r=__ngs.r_(__ngs._4s).UnitBonusViewController;this.transitionToViewController(new r(p,n,o),this.showUnitBonus.bind(this,p,n,o),q)},showDoItMission:function(n,p){var o=__ngs.r_(__ngs._4t).MissionExploreViewController;this.transitionToViewController(new o(n),this.showDoItMission.bind(this,n),p,"skip")},showStore:function(o,q){var n=__ngs.r_(__ngs._4u).StoreViewController;var p=__ngs.r_(__ngs._4v).StoreGashaView;var o=o||p;this.transitionToViewController(new n(o),this.showStore.bind(this,o),q,"NavStoreInventory")},showItemStore:function(p,q){var o=__ngs.r_(__ngs._4w).StoreItemViewController;var n=__ngs.r_(__ngs._4x).StoreItemView;var p=p||n;this.transitionToViewController(new o(p),this.showStore.bind(this,p),q,"skip")},showRBStore:function(o,q){var n=__ngs.r_(__ngs._4y).RBStoreViewController;var p=__ngs.r_(__ngs._4z).RBStoreGashaView;var o=o||p;this.transitionToViewController(new n(o),this.showRBStore.bind(this),q,"NavStoreInventory")},showGiftInbox:function(o){var n=__ngs.r_(__ngs._50).GiftInboxViewController;this.transitionToViewController(new n(),this.showGiftInbox.bind(this),o,"skip")},showCollection:function(o){var n=__ngs.r_(__ngs._51).CollectionViewController;this.transitionToViewController(new n(),this.showCollection.bind(this),o,"BottomHudNav")},showInventory:function(o){var n=__ngs.r_(__ngs._52).InventoryViewController;this.transitionToViewController(new n(),this.showInventory.bind(this),o,"NavStoreInventory")},showFreshFusion:function(n){this._transformCard1Selected=false;this._transformCard2Selected=false;this._mainSelectedCard=null;this._selectedFusionCards=null;this.showFusion(n)},showFusion:function(o){var n=__ngs.r_(__ngs._53).FusionViewController;this.transitionToViewController(new n(),this.showFusion.bind(this),o,"BottomHudNav")},showProfile:function(o,n,p,q){var r=__ngs.r_(__ngs._54).ProfileViewController;this.transitionToViewController(new r(o,n,p),this.showProfile.bind(this,o,n,p),q)},showFreshTransform:function(n,o){this._transformCard1Selected=false;this._transformCard2Selected=false;this._mainSelectedCard=null;this._selectedFusionCards=null;this.showTransform(n,o)},showTransform:function(n,o){var p=__ngs.r_(__ngs._55).TransformViewController;this.transitionToViewController(new p(n),this.showTransform.bind(this,n),o,"BottomHudNav")},showHome:function(n,p){this._resetViewControllerStack();g.playMusic(this.MUSIC_KEY_HOME);var o=__ngs.r_(__ngs._56).HomeViewController;this.transitionToViewController(new o(n),this.showHome.bind(this,n),p)},showAchievements:function(o,p){this._resetViewControllerStack();var n=__ngs.r_(__ngs._57).AchievementsViewController;this.transitionToViewController(new n(o),this.showAchievements.bind(this,o),p)},showOutOfEnergy:function(o,p){var n=__ngs.r_(__ngs._58).OutOfEnergyViewController;this.transitionToViewController(new n(o),this.showOutOfEnergy.bind(this),p,"skip")},showOpponents:function(o){var n=__ngs.r_(__ngs._59).OpponentSelectViewController;this.transitionToViewController(new n(),this.showOpponents.bind(this),o)},showConfirmBattle:function(o){var n=__ngs.r_(__ngs._5a).ConfirmBattleViewController;this.transitionToViewController(new n(),this.showConfirmBattle.bind(this),o,"skip")},showLanding:function(n){this._viewControllerStack=[];var o=__ngs.r_(__ngs._5b).LandingViewController;this.transitionToViewController(new o(),this.showLanding.bind(this),n)},showFriends:function(n){var o=__ngs.r_(__ngs._5c).FriendsViewController;this.transitionToViewController(new o(),this.showFriends.bind(this),n)},showSearchFriends:function(o){var n=__ngs.r_(__ngs._5d).SearchFriendsViewController;this.transitionToViewController(new n(),this.showSearchFriends.bind(this),o)},showPendingInvites:function(o){var n=__ngs.r_(__ngs._5e).PendingInvitesViewController;this.transitionToViewController(new n(),this.showPendingInvites.bind(this),o)},showSearchFriendsResults:function(p,q,o){var n=__ngs.r_(__ngs._5f).SearchFriendsResultViewController;this.transitionToViewController(new n(p,q),this.showSearchFriendsResults.bind(this,p,q),o)},showSearchFriendsByNameResults:function(q,r,n,p){var o=__ngs.r_(__ngs._5f).SearchFriendsResultViewController;this.transitionToViewController(new o(q,r,n),this.showSearchFriendsByNameResults.bind(this,q,r,n),p)},showBattleResults:function(o){var n=__ngs.r_(__ngs._5g).BattleResultViewController;this.transitionToViewController(new n(),this.showBattleResults.bind(this),o,"skip")},showBossResults:function(q,o,n,r){var p=__ngs.r_(__ngs._5h).BossResultViewController;this.transitionToViewController(new p(q,o,n),this.showBossResults.bind(this,q,o,n),r,"skip")},showRequests:function(o,p){var n=__ngs.r_(__ngs._5i).RequestFriendsViewController;this.transitionToViewController(new n(o),this.showRequests.bind(this,o),p,"skip")},showGreets:function(o){var n=__ngs.r_(__ngs._5j).GreetsViewController;this.transitionToViewController(new n(),this.showGreets.bind(this),o)},showSellCards:function(r){var o=__ngs.r_(__ngs._5k).CardSelectionViewController;var q=new Array();for(var p in TFUserData.cards){q.push(TFUserData.cards[p])}for(var n in TFUserData.cardsLimbo){q.push(TFUserData.cardsLimbo[n])}this.transitionToViewController(new o(true,"sellCards",null,null,q),this.showSellCards.bind(this),r,"BottomHudNav")},showVaultCards:function(o){var n=__ngs.r_(__ngs._5k).CardSelectionViewController;this.transitionToViewController(new n(true,"sellCards",null,null,TFUserData.cardsLimbo,true,"viewVault"),this.showSellCards.bind(this),o,"BottomHudNav")},showFusionCards:function(n,r,q,o,s){var p=__ngs.r_(__ngs._5l).FusionSelectionViewController;this.transitionToViewController(new p(n,r,q,o),this.showFusionCards.bind(this,n,r,q,o),s)},showTransformCards:function(n,r,q,p,s){var o=__ngs.r_(__ngs._5m).TransformSelectionViewController;this.transitionToViewController(new o(n,r,q,p),this.showTransformCards.bind(this,n,r,q,p),s)},showEnemyDeck:function(n){var o=__ngs.r_(__ngs._5n).EnemyDeckController;this.transitionToViewController(new o(),this.showEnemyDeck.bind(this),n)},showRBIntro:function(o){this._resetViewControllerStack();var n=__ngs.r_(__ngs._5o).RBIntroViewController;this.transitionToViewController(new n(),this.showRBIntro.bind(this),o)},showRBMain:function(o){this._resetViewControllerStack();var n=__ngs.r_(__ngs._5p).RBMainViewController;this.transitionToViewController(new n(),this.showRBMain.bind(this),o)},showRBEventRewards:function(o,p){var n=__ngs.r_(__ngs._5q).RBEventRewardsViewController;this.transitionToViewController(new n(o),this.showRBEventRewards.bind(this),p)},showRBLeaderBoard:function(o){var n=__ngs.r_(__ngs._5r).RBLeaderBoardViewController;this.transitionToViewController(new n(),this.showRBLeaderBoard.bind(this),o)},showRBBossBattleLog:function(o,p){var n=__ngs.r_(__ngs._5s).RBBossBattleLogViewController;this.transitionToViewController(new n(o),this.showRBBossBattleLog.bind(this,o),p)},showRBBoss:function(n,q,p,r){var o=__ngs.r_(__ngs._5t).RBBossDetailViewController;this.transitionToViewController(new o(n,q,p),Server.getBossInfo.bind(Server,n.bossInfo.id,true,this.receiveBossInfoAndShowRBBoss.bind(this,n)),r)},receiveBossInfoAndShowRBBoss:function(p,o,n){if(o){console.log("TFSceneDirector > receiveBossInfo > error="+JSON.stringify(o));TFUtils.showErrorMessages(n);this.showRBMain();return}console.log("TFSceneDirector > receiveBossInfo > response="+JSON.stringify(n));if(n){this.showRBBoss(n,false,false)}else{TFUtils.somethingWentWrongPopup()}},showRBBossById:function(o,n,p){console.log("TFSceneDirector > showRBBossById > bossId="+JSON.stringify(o));Server.getBossInfo(o,true,this.receiveBossInfo.bind(this,o,n,p))},receiveBossInfo:function(q,n,r,p,o){if(p){console.log("TFSceneDirector > receiveBossInfo > ERROR : "+JSON.stringify(p));console.log("TFSceneDirector > receiveBossInfo > giving up - calling the fail callback");n();return}console.log("TFSceneDirector > receiveBossInfo > Received bossInfo="+JSON.stringify(o));TFSceneDirector.showRBBoss(o,false,r)},showRBBossBattle:function(p,t,q,s){var o=__ngs.r_(__ngs._5u).RBBattleViewController;var r=new o(p,t,q);var n=TFGameData.getBossDefinition(TFUserData.curEventId,t.definitionId);r.preloadBattleCards(n.deckPower[0].gearId);this.transitionToViewController(r,this.showRBBossBattle.bind(this,p,t,q),s,"skip")},showRBBossRewards:function(o,p){var n=__ngs.r_(__ngs._5v).RBBossRewardsViewController;this.transitionToViewController(new n(o),this.showRBBossRewards.bind(this,o),p)},showGachaRewards:function(p,o){var n=__ngs.r_(__ngs._5w).GashaRewardViewController;this.transitionToViewController(new n(true,"gachaRewards",null,null,p),this.showGachaRewards.bind(this,p),o,"skip")},showRBEpilogue:function(o,p){var n=__ngs.r_(__ngs._5x).RBEpilogueViewController;this.transitionToViewController(new n(o),this.showRBEpilogue.bind(this,o),p,"skip")},transitionToViewController:function(n,p,s,v){v=v||n.classname;var w={cb:p,classname:n.classname,group:v};console.log("(VIEWSTACK) Transitioning to viewController: classname="+w.classname+", transition="+s+", group="+v);var t;if(w.group!="skip"){for(t=0;t<this._viewControllerStack.length;t++){if(this._viewControllerStack[t].group===w.group){console.log("(VIEWSTACK) Found duplicate view controller group="+v+" (old class="+this._viewControllerStack[t].classname+", new class="+w.classname+")");if(this._viewControllerStack[t].skip){w.skip=true}while(this._viewControllerStack.length>t){this._viewControllerStack.pop()}break}}}var q=undefined;if(s=="slideleft"){q="slideright"}else{if(s=="slideright"){q="slideleft"}}if(q){var o=(this._viewControllerStack.length>0)?this._viewControllerStack[this._viewControllerStack.length-1]:undefined;if(o&&!o.transition){console.log("(VIEWSTACK) Replacing previous transition for class="+o.classname+", newTransition="+q);o.transition=q}else{if(o){console.log("(VIEWSTACK) Previous entry for class '"+o.classname+"' already has a transition '"+o.transition+"', not replacing with '"+q+"'")}else{console.log("(VIEWSTACK) Stack empty - saving without transition")}}}if(v==="skip"){console.log("(VIEWSTACK) Setting 'skip' on view controller: class="+w.classname);w.skip=true}console.log("(VIEWSTACK) Pushing view controller return data: class='"+w.classname+"', transition='"+s+"', newStackObj="+JSON.stringify(w));this._viewControllerStack.push(w);console.log("(VIEWSTACK) New viewControllerStack:");for(var r=0;r<this._viewControllerStack.length;r++){var u=this._viewControllerStack[r];console.log("(VIEWSTACK)    "+u.classname+", "+u.transition+", "+u.group+", skip="+u.skip)}this.pushViewController(n,s)},skipTopViewController:function(){if(this._viewControllerStack&&(this._viewControllerStack.length>0)){this._viewControllerStack[this._viewControllerStack.length-1].skip=true}},pushViewController:function(n,t){if(!n||this._animatingViewController){return}if(!n.controllerIsLoaded()){console.log("(DYNAMICJSON) TFSceneDirector > pushViewController > view controller not done loading - setting callback");n.addViewsDoneLoadingCallback(this.pushViewController.bind(this,n,t));return}if(this.transitioning===true){return}this.transitioning=true;this.disableGlobalTouches("pushViewController ["+n.classname+"]");console.log("+++++++++++ pushViewController "+n.classname+" with transition `"+t+"`");var u=null;if(this._currentViewController){u=this._currentViewController.classname}TFAnalytics.reportNavigation(u,n.classname);this._animatingViewController=n;var p=this._animatingViewController.getView(false);var o=new Core.Point(this._workingArea.offsetX,this._workingArea.offsetY);var r;var q=1;var s=new b(this.am);if(t=="slideleft"){o=new Core.Point(this.getScreenWidth()+this._workingArea.offsetX,this._workingArea.offsetY);r=new Core.Point(this._workingArea.offsetX,this._workingArea.offsetY);s.pushAnimation(300,b.Curve.Linear);s.pushAnimation(250,b.Curve.EaseOut);s.tween(b.Interpolate.point(o,r),function(x){this._animatingViewLayer.setPosition(x.getX(),x.getY());this._viewLayer.setPosition(x.getX()-this.getScreenWidth(),x.getY());var w=this._animatingViewLayer.localToScreen(new Core.Point(-this._workingArea.offsetX,-this._workingArea.offsetY));this._animatingViewLayer.setClipRect(new Core.Rect(w.getX(),w.getY(),this.getScreenWidth(),this.getScreenHeight()));w=this._viewLayer.localToScreen(new Core.Point(-this._workingArea.offsetX,-this._workingArea.offsetY));this._viewLayer.setClipRect(new Core.Rect(w.getX(),w.getY(),this.getScreenWidth(),this.getScreenHeight()))}.bind(this))}else{if(t=="slideright"){o=new Core.Point(-this.getScreenWidth()-this._workingArea.offsetX,this._workingArea.offsetY);r=new Core.Point(this._workingArea.offsetX,this._workingArea.offsetY);s.pushAnimation(300,b.Curve.Linear);s.pushAnimation(250,b.Curve.EaseOut);s.tween(b.Interpolate.point(o,r),function(x){this._animatingViewLayer.setPosition(x.getX(),x.getY());this._viewLayer.setPosition(x.getX()+this.getScreenWidth(),x.getY());var w=this._animatingViewLayer.localToScreen(new Core.Point(-this._workingArea.offsetX,-this._workingArea.offsetY));this._animatingViewLayer.setClipRect(new Core.Rect(w.getX(),w.getY(),this.getScreenWidth(),this.getScreenHeight()));w=this._viewLayer.localToScreen(new Core.Point(-this._workingArea.offsetX,-this._workingArea.offsetY));this._viewLayer.setClipRect(new Core.Rect(w.getX(),w.getY(),this.getScreenWidth(),this.getScreenHeight()))}.bind(this))}else{if(t=="slidedown"){o=new Core.Point(this._workingArea.offsetX,-this.getScreenHeight()-this._workingArea.offsetY);r=new Core.Point(this._workingArea.offsetX,this._workingArea.offsetY);s.pushAnimation(300,b.Curve.Linear);s.pushAnimation(250,b.Curve.EaseOut);s.tween(b.Interpolate.point(o,r),function(x){this._animatingViewLayer.setPosition(x.getX(),x.getY());this._viewLayer.setPosition(x.getX(),x.getY()+this.getScreenHeight());var w=this._animatingViewLayer.localToScreen(new Core.Point(-this._workingArea.offsetX,-this._workingArea.offsetY));this._animatingViewLayer.setClipRect(new Core.Rect(w.getX(),w.getY(),this.getScreenWidth(),this.getScreenHeight()));w=this._viewLayer.localToScreen(new Core.Point(-this._workingArea.offsetX,-this._workingArea.offsetY));this._viewLayer.setClipRect(new Core.Rect(w.getX(),w.getY(),this.getScreenWidth(),this.getScreenHeight()))}.bind(this))}else{if(t=="slideup"){o=new Core.Point(this._workingArea.offsetX,this.getScreenHeight()+this._workingArea.offsetY);r=new Core.Point(this._workingArea.offsetX,this._workingArea.offsetY);s.pushAnimation(300,b.Curve.Linear);s.pushAnimation(250,b.Curve.EaseOut);s.tween(b.Interpolate.point(o,r),function(x){this._animatingViewLayer.setPosition(x.getX(),x.getY());this._viewLayer.setPosition(x.getX(),x.getY()-this.getScreenHeight());var w=this._animatingViewLayer.localToScreen(new Core.Point(-this._workingArea.offsetX,-this._workingArea.offsetY));this._animatingViewLayer.setClipRect(new Core.Rect(w.getX(),w.getY(),this.getScreenWidth(),this.getScreenHeight()));w=this._viewLayer.localToScreen(new Core.Point(-this._workingArea.offsetX,-this._workingArea.offsetY));this._viewLayer.setClipRect(new Core.Rect(w.getX(),w.getY(),this.getScreenWidth(),this.getScreenHeight()))}.bind(this))}else{if(t=="crossfade"){q=0;s.pushAnimation(300,b.Curve.Linear);s.pushAnimation(200,b.Curve.EaseInOut);s.tween(b.Interpolate.scalar(0,1),function(w){this._animatingViewLayer.setAlpha(w);this._viewLayer.setAlpha(1-w)}.bind(this))}else{if(t=="blackfade"){q=0;s.pushAnimation(300,b.Curve.Linear);s.pushAnimation(125,b.Curve.EaseIn);s.tween(b.Interpolate.scalar(0,1),function(w){this._viewLayer.setAlpha(1-w)}.bind(this));s.pushAnimation(125,b.Curve.EaseOut);s.tween(b.Interpolate.scalar(0,1),function(w){this._animatingViewLayer.setAlpha(w)}.bind(this))}else{}}}}}}this._animatingViewLayer.setPosition(o.getX(),o.getY());this._animatingViewLayer.setAlpha(q);this._animatingViewLayer.addChild(p);this._animatingViewLayer.setClipRectEnabled(true);var v=this._animatingViewLayer.localToScreen(new Core.Point(-this._workingArea.offsetX,-this._workingArea.offsetY));this._animatingViewLayer.setClipRect(new Core.Rect(v.getX(),v.getY(),this.getScreenWidth(),this.getScreenHeight()));this._viewLayer.setClipRectEnabled(true);v=this._viewLayer.localToScreen(new Core.Point(-this._workingArea.offsetX,-this._workingArea.offsetY));this._viewLayer.setClipRect(new Core.Rect(v.getX(),v.getY(),this.getScreenWidth(),this.getScreenHeight()));s.pushCallback(function(){this._replaceCurrentViewController(this._animatingViewController);this._animatingViewController.afterViewDisplayed();this._animatingViewController=undefined;this.updateHud(this._currentViewController)}.bind(this));s.pushCallback(function(){this.transitioning=false;this.clearGlobalTouches()}.bind(this));s.pushCallback(this._sceneTransitionDone.bind(this));this._sceneTransitionStart();setTimeout(s.start.bind(s),10)},_sceneTransitionStart:function(){if(this._currentViewController&&this._currentViewController.onSceneTransitionStart){this._currentViewController.onSceneTransitionStart()}},_sceneTransitionDone:function(){if(this._currentViewController.onSceneTransitionDone){this._currentViewController.onSceneTransitionDone()}},_resetViewControllerStack:function(){console.log("(VIEWSTACK) Clearing view controller return data");this._viewControllerStack=[]},_replaceCurrentViewController:function(p){if(!p){return}console.log("+++++++++++ _replaceCurrentViewController "+p.classname);this._setNonWorkingArea(p);this._viewLayer.setClipRectEnabled(false);this._destroyCurrentViewController();var n=p.getView(false);if(p.getViewStartPositionY()!==undefined){var o=p.getViewStartPositionY();if(Core.Capabilities.getPlatformOS()=="iPhone OS"){o=o+50}n.setPosition(0,o)}this._viewLayer.addChild(n);this._viewLayer.setPosition(this._workingArea.offsetX,this._workingArea.offsetY);this._viewLayer.setAlpha(1);p.getView(false).updateClipping();this._currentViewController=p},_setNonWorkingArea:function(o){var n=o.getNonWorkingAreaCoverVisibility();this._nonWorkingAreaCoverLeft.setVisible(n[0]);this._nonWorkingAreaCoverTop.setVisible(n[1]);this._nonWorkingAreaCoverRight.setVisible(n[2]);this._nonWorkingAreaCoverBottom.setVisible(n[3])},onTeamButton:function(n){this.showCardList(undefined,undefined,undefined,undefined,"slideright")},onBackButton:function(){if(this._animatingViewController){return}if(this.backBlocked){console.log("Back blocked by "+this.backBlocked.reason);return}console.log("(VIEWSTACK) Back button pressed");var q;if(this._viewControllerStack.length>1){this._viewControllerStack.pop();q=this._viewControllerStack[this._viewControllerStack.length-1];while(q&&q.skip){console.log("(VIEWSTACK) Skipping stack entry due to 'skip': classname="+q.classname);this._viewControllerStack.pop();q=this._viewControllerStack[this._viewControllerStack.length-1]}}else{if((this._viewControllerStack.length==1)&&(this._viewControllerStack[this._viewControllerStack.length-1].classname=="HomeViewController")){q={cb:this.showCardList.bind(this,undefined,undefined,undefined,undefined),classname:"DeckViewController",group:"BottomHudNav",transition:"slideright"}}else{q={cb:this.showHome.bind(this,0),classname:"HomeViewController",group:"HomeViewController"}}}console.log("(VIEWSTACK) New viewControllerStack (AFTER POP):");for(var o=0;o<this._viewControllerStack.length;o++){console.log("(VIEWSTACK)    "+this._viewControllerStack[o].classname+", "+this._viewControllerStack[o].transition)}var p=undefined;var n=undefined;if(q){console.log("(VIEWSTACK) Found previous viewControllerStack entry: classname="+q.classname+", transition="+q.transition);n=q.cb;p=q.transition}else{console.log("(VIEWSTACK) No previous viewControllerStack entry - going to home");n=this.showHome.bind(this,0)}n(p)},updateHud:function(o){if(!o){o=this._currentViewController}if(this._topHudViewController&&o.classname!="MissionExploreViewController"){this._topHudViewController.update();this._topHudViewController.updateHudForViewController(o);var p=o.getTopHudDisplayData();if(p!==undefined){if(this._topHudTimeout){clearTimeout(this._topHudTimeout)}if(p.displayed===true){this._topHudTimeout=setTimeout(function(){TFSceneDirector.showTopHud(p.animated,p.mode)},p.timeout)}else{this._topHudTimeout=setTimeout(function(){TFSceneDirector.hideTopHud(p.animated)},p.timeout)}}}if(this._bottomHudViewController){this._bottomHudLayer.removeChild(this._bottomHudViewController.getView());this._bottomHudViewController.updateHudForViewController(o);this._bottomHudLayer.addChild(this._bottomHudViewController.getView());this.setStage(this._currentStage);var n=o.getBottomHudDisplayData();if(n!==undefined){if(this._bottomHudTimeout){clearTimeout(this._bottomHudTimeout)}if(n.displayed===true){this._bottomHudTimeout=setTimeout(function(){TFSceneDirector.showBottomHud(n.animated)},n.timeout);if(o.getView()&&o.getView()._totalHeight&&o.heightAdjusted!=true){o.heightAdjusted=true;o.getView()._totalHeight+=100}}else{this._bottomHudTimeout=setTimeout(function(){TFSceneDirector.hideBottomHud(n.animated)},n.timeout)}}}},popViewController:function(){},getMainViewController:function(){return this._currentViewController},getTopHudViewController:function(){return this._topHudViewController},getBottomHudViewController:function(){return this._bottomHudViewController},setStage:function(n){this._currentStage=n;this._bottomHudViewController.setStage(n)},getStage:function(){return this._currentStage},showWaitingSpinner:function(n,o){this._showSpinner=true;var p=2000;if(o){p=0}setTimeout(function(q){if(TFSceneDirector._showSpinner===true){TFSceneDirector._showWaitingSpinner(q)}},p)},createModalLayerForSpinner:function(){this._modal=new GL2.Node();this._touch_target=new GL2.TouchTarget();this._touch_target.setSize(this.getScreenWidth(),this.getScreenHeight());this._touch_target._touchEmitter.addListener(this,function(p){if(p.getAction()==p.Action.Start){return true}});var n=__ngs.r_(__ngs._5y).RectangularPolygon;var o=new n([0,0],[this.getScreenWidth(),this.getScreenHeight()]);o.setAlpha(0.7);this._spinnershade=o},createModalLayerForDownloadSpinner:function(){this._modalDownload=new GL2.Node();this._modalDownload.setDepth(this.LAYER_DEPTH.LOADING);this._downloadSpinnerBackground=new GL2.Sprite();this._downloadSpinnerBackground.setImage("Content/Images8x/misc/1pxclear.png",[this.getScreenWidth(),this.getScreenHeight()],[0.5,0.5],[0,0,1,1]);this._downloadSpinnerBackground.setPosition(this.getScreenWidth()/2,this.getScreenHeight()/2);this._touchDownload=new GL2.TouchTarget();this._touchDownload.setSize(this.getScreenWidth(),this.getScreenHeight());this._touchDownload._touchEmitter.addListener(this,function(p){if(p.getAction()==p.Action.Start){return true}});var n=__ngs.r_(__ngs._5y).RectangularPolygon;var o=new n([0,0],[this.getScreenWidth(),this.getScreenHeight()]);o.setAlpha(0.7);this._spinnershadeDownload=o},_showWaitingSpinner:function(n){if(this._mcSpinner){this._mcSpinner.stop()}console.log("TFSceneDirector.showWaitingSpinner");this._spinnerStart=new Date();if(!n){n="No task defined"}this._spinnerTask=n;TFAnalytics.reportGameEvent("LOADTASKSTART",{task:this._spinnerTask});if(this._modal===undefined){this.createModalLayerForSpinner()}if(!this._mc){if(!this._spinerAnim){this._spinerAnim=new GL2.Node()}if(!this._decep){this._decep=new GL2.Sprite()}if(!this._auto){this._auto=new GL2.Sprite()}this._spinerAnim.setPosition(this.getScreenWidth()/2,this.getScreenHeight()/2);this._spinnershade.addChild(this._spinerAnim);this._spinerAnim.addChild(this._auto);this._spinerAnim.addChild(this._decep);this._modal.addChild(this._spinnershade);this._modal.addChild(this._touch_target);md=new GL2.MotionData();md.initFromJSONFile("Content/AnimationData/spinner_anim.json",GL2.MotionData.DataFormat.FlashClassicTween,function(q,r){if(q){console.log("SPINNER error :"+JSON.stringify(q))}else{mc=new GL2.MotionController(r);syncFlags=GL2.MotionController.SyncFlags.Scale;mc.bind("decepticon",this._decep,syncFlags);mc.bind("autobot",this._auto,syncFlags);mc.syncFrames("autobot",[30,-1],GL2.MotionController.SyncFlags.Position,function(s,t){this._removeSpinnerIfDismissed()}.bind(this));this._mc=mc;mc.play(GL2.MotionController.PlayMode.Loop)}}.bind(this));var p=__ngs.r_(__ngs._3x).Social;if(p.Common.Config.getServerEnvironment()=="sandbox"){this.debugText=new GL2.Text("Debug text initialized");this.debugText.setHorizontalAlign(GL2.Text.HorizontalAlign.Left);this.debugText.setOverflowMode(GL2.Text.OverflowMode.ReduceFontSize);this.debugText.setAnchor(0,0);this.debugText.setAlpha(1);this.debugText.setFontSize(18);this._modal.addChild(this.debugText)}}else{if(this._mc){this._mc.play(GL2.MotionController.PlayMode.Loop)}}var o=[100,141.5];this._auto.setRotation(0);this._decep.setRotation(0);this._auto.setScale(1,1);this._decep.setScale(1,1);this._auto.setImage("Content/Images8x/UI/17_tutorial/tutorial_faction_autobot.png",o,[0.5,0.5],[0,0,1,1]);this._decep.setImage("Content/Images8x/UI/17_tutorial/tutorial_faction_decepticon.png",o,[0.5,0.5],[0,0,1,1]);this._decep.setScale(0,1);GL2.Root.addChild(this._modal)},_removeSpinnerIfDismissed:function(){if(this._showSpinner==false){var n=new Date();if(this._spinnerTask){TFAnalytics.reportGameEvent("LOADTASKEND",{task:this._spinnerTask,timetaken:(n-this._spinnerStart)})}if(this._modal!==undefined&&this._modal.getParent()!==null){this._modal.getParent().removeChild(this._modal);if(this._mc){this._mc.stop()}}this._spinnerTask=false}},dismisWaitingSpinner:function(){this._showSpinner=false},_animText:function(s){if(!s||!this._modalDownload){return}var n={name:"downloadSpinnerText",pos_x:0,pos_y:0,size_x:400,size_y:200,font_size:30,anchor_x:0.5,anchor_y:0.5,horizontalAlign:"center",color:[255,255,255],dropShadowVisible:true,dropShadowPosition:[2,2],dropShadowColor:[0,0,0],fontType:"Content/Fonts/SFElectrotome.ttf",visible:true,text:"",alpha:0.8,depth:10000};this._downloadSpinnerText=c._createLabel(n);this._modalDownload.addChild(this._downloadSpinnerText);this._downloadSpinnerText.setPosition(this.getScreenWidth()/2,this.getScreenHeight()*3/4);this._textAnimationQueueLoop=new b(this.am);for(var p=1;p<5;++p){var r="";for(var o=0;o<p%4;++o){r+="."}this._textAnimationQueueLoop.pushAnimation(500,b.Curve.Linear);this._textAnimationQueueLoop.pushCallback(function(t){this.setText(t)}.bind(this._downloadSpinnerText,s+r))}this._textAnimationQueue=new b(this.am);for(var p=0;p<=s.length;++p){var q=s.substring(0,p);this._textAnimationQueue.pushAnimation(30,b.Curve.Linear);this._textAnimationQueue.pushCallback(function(t){this.setText(t)}.bind(this._downloadSpinnerText,q))}this._textAnimationQueue.pushAnimation(50,b.Curve.Linear);this._textAnimationQueue.pushCallback(function(){this._textAnimationQueueLoop.startLooped()}.bind(this));this._textAnimationQueue.start()},showDownloadSpinner:function(o,q){this._spinnerStartDownload=new Date();if(!o){o="No task defined"}this._downloadSpinnerTask=o;TFAnalytics.reportGameEvent("DOWNLOADTASKSTART",{task:this._downloadSpinnerTask});var p=[75*1.5,75*1.5];var n=[116*1.5,48*1.5];if(this._modalDownload===undefined){this.createModalLayerForDownloadSpinner()}this._animText(q);if(!this._mcSpinner){if(!this._downloadSpinnerAnim){this._downloadSpinnerAnim=new GL2.Node()}if(!this._downloadSpinnerBack){this._downloadSpinnerBack=new GL2.Sprite()}if(!this._downloadSpinnerWheel){this._downloadSpinnerWheel=new GL2.Sprite()}this._downloadSpinnerAnim.setPosition(this.getScreenWidth()/2,this.getScreenHeight()/2);this._spinnershadeDownload.addChild(this._downloadSpinnerBackground);this._spinnershadeDownload.addChild(this._downloadSpinnerAnim);this._downloadSpinnerAnim.addChild(this._downloadSpinnerWheel);this._downloadSpinnerAnim.addChild(this._downloadSpinnerBack);this._modalDownload.addChild(this._spinnershadeDownload);this._modalDownload.addChild(this._touchDownload);md=new GL2.MotionData();md.initFromJSONFile("Content/AnimationData/card_spinner_anim.json",GL2.MotionData.DataFormat.FlashClassicTween,function(r,s){if(r){console.log("SPINNER error :"+JSON.stringify(r))}else{mc=new GL2.MotionController(s);syncFlags=GL2.MotionController.SyncFlags.Rotation;mc.bind("spinner",this._downloadSpinnerWheel,syncFlags);this._mcSpinner=mc;mc.play(GL2.MotionController.PlayMode.Loop)}}.bind(this))}else{if(this._mcSpinner){this._mcSpinner.play(GL2.MotionController.PlayMode.Loop)}}this._downloadSpinnerWheel.setRotation(0);this._downloadSpinnerBack.setRotation(0);this._downloadSpinnerWheel.setScale(1,1);this._downloadSpinnerBack.setScale(1,1);this._downloadSpinnerBack.setImage("Content/Images8x/UI/card_frames/loading_graphic.png",n,[0.5,0.5],[0,0,1,1]);this._downloadSpinnerWheel.setImage("Content/Images8x/UI/card_frames/loading_spinner.png",p,[0.5,0.5],[0,0,1,1]);this._node.addChild(this._modalDownload);if(this._modal){this._modal.setAlpha(0)}},setDownloadSpinnerBackground:function(o,n){TFUtils.changeImageOnSprite(this._downloadSpinnerBackground,o);if(n){var p=[Math.max(1,this.getScreenHeight()/this.getScreenWidth()),Math.max(1,this.getScreenWidth()/this.getScreenHeight())];console.log("TFSceneDirector > setDownloadSpinnerBackground > Setting scale to "+JSON.stringify(p));this._downloadSpinnerBackground.setScale(p)}else{this._downloadSpinnerBackground.setScale([1,1])}this._spinnershadeDownload.setAlpha(1)},resetDownloadSpinnerBackground:function(){TFUtils.changeImageOnSprite(this._downloadSpinnerBackground,"Content/Images8x/misc/1pxclear.png");this._spinnershadeDownload.setAlpha(0.7)},destroyDownloadSpinner:function(){if(this._modal){this._modal.setAlpha(1)}var n=new Date();if(this._downloadSpinnerTask){TFAnalytics.reportGameEvent("DOWNLOADTASKEND",{task:this._downloadSpinnerTask,timetaken:(n-this._downloadSpinnerStart)})}if(this._modalDownload!==undefined&&this._modalDownload.getParent()!==null){this._modalDownload.getParent().removeChild(this._modalDownload);if(this._mcSpinner){this._mcSpinner.stop()}}if(this._textAnimationQueue){this._textAnimationQueue.destroy()}if(this._textAnimationQueueLoop){this._textAnimationQueueLoop.destroy()}if(this._downloadSpinnerText&&this._downloadSpinnerText.__objectRegistryId){this._downloadSpinnerText.destroy();this._downloadSpinnerText=null}this.resetDownloadSpinnerBackground()},_destroyCurrentViewController:function(){if(!this._currentViewController){return}console.log("DESTROYING CONTROLLER > "+this._currentViewController);console.log("TFSceneDirector > _destroyCurrentViewController > view to remove="+this._currentViewController.getView(false));this._viewLayer.removeChild(this._currentViewController.getView(false));this._currentViewController.destroy();this._currentViewController=undefined},_onGlobalTouch:function(n){switch(n.getAction()){case GL2.Touch.Action.Start:console.log("global touch received : "+JSON.stringify(n));if(this._disableGlobalTouches&&(this._disableGlobalTouches>0)){console.log("(GLOBALTOUCHES) Global touches disabled - discarding");return true}break}},disableGlobalTouches:function(n){if(!this._disableGlobalTouches){this._disableGlobalTouches=0}this._disableGlobalTouches++;console.log("(GLOBALTOUCHES) Disabling global touches ("+this._disableGlobalTouches+", reason="+n+")")},enableGlobalTouches:function(n){if(this._disableGlobalTouches<=0){console.log("(GLOBALTOUCHES) Called TFSceneDirector::enableGlobalTouches, but disable count is zero, reason: "+n);this._disableGlobalTouches=0;return}this._disableGlobalTouches--;console.log("(GLOBALTOUCHES) Enabling global touches ("+this._disableGlobalTouches+", reason="+n+")")},clearGlobalTouches:function(){console.log("(GLOBALTOUCHES) Clearing global touches");this._disableGlobalTouches=0},animateTap:function(n){console.log("Animating tap at: "+n.getX()+","+n.getY());this._tap.setPosition(n.getX(),n.getY());this._tap.setVisible(true);this._tap.setAlpha(1);this._tap.setScale(2,2)},back:function(){console.log("BACK -> ",this._viewControllerStack.length);if(this.backBlocked){console.log("Back blocked by "+this.backBlocked.reason);return true}if(TFGameData._mainTutorialFlag===true||TFUserData.getTutorialState("main")!="end"){console.log("Back blocked during the main tutorial ");return}TFSceneDirector.dismisWaitingSpinner();var o=false;if(this._viewControllerStack.length>1){this._viewControllerStack.pop();if(this._currentDialogController){this._currentDialogController.dismissDialog()}var r=this._viewControllerStack[this._viewControllerStack.length-1];while(r&&r.skip){console.log("(VIEWSTACK) Skipping stack entry due to 'skip': classname="+r.classname);this._viewControllerStack.pop();r=this._viewControllerStack[this._viewControllerStack.length-1]}console.log("(VIEWSTACK) New viewControllerStack (AFTER POP):");for(var p=0;p<this._viewControllerStack.length;p++){console.log("(VIEWSTACK)    "+this._viewControllerStack[p].classname+", "+this._viewControllerStack[p].transition)}if(r){console.log("(VIEWSTACK) Found previous viewControllerStack entry: classname="+r.classname+", transition="+r.transition);var n=r.cb;var q=r.transition;n(q);o=true}else{console.log("(VIEWSTACK) No previous viewControllerStack entry - show quit dialog");o=false}}return o},disableBack:function(n){this.backBlocked={blocked:true,reason:n}},enableBack:function(){this.backBlocked=null},getCurrentScreen:function(){var n="ENTER";if(this._currentViewController!==undefined){n=this._currentViewController.classname}return n},getSplashViewController:function(){var n=null;if(this._currentViewController!==undefined&&this._currentViewController.classname=="SplashScreenViewController"){n=this._currentViewController}return n},shiftUIElementUp:function(n){n.setPosition(n.getPosition().getX(),n.getPosition().getY()-this.getWorkingArea().offsetY/this.getWorkingArea().scaleY)},shiftUIElementDown:function(n){n.setPosition(n.getPosition().getX(),n.getPosition().getY()+this.getWorkingArea().offsetY/this.getWorkingArea().scaleY)},shiftUIElementLeft:function(n){n.setPosition(n.getPosition().getX()-3-this.getWorkingArea().offsetX/this.getWorkingArea().scaleX,n.getPosition().getY())},shiftUIElementRight:function(n){n.setPosition(n.getPosition().getX()+3+this.getWorkingArea().offsetX/this.getWorkingArea().scaleX,n.getPosition().getY())},stretchUIElementVertically:function(p,o){var n=1;var q=1+(((this.getWorkingArea().offsetY*2)/this.getWorkingArea().scaleY)/TFGlobals.nativeResolution.y);console.log("Stretching background vertically by "+q+" (extra space="+(this.getWorkingArea().offsetY*2)+")");if(o){n=q}p.setScale(p.getScale().getX()*n,p.getScale().getY()*q)},stretchUIElementHorizontally:function(p,o){var q=1;var n=1+(((this.getWorkingArea().offsetX*2)/this.getWorkingArea().scaleX)/TFGlobals.nativeResolution.x);console.log("Stretching node horizontally by "+n+" (extra space="+(this.getWorkingArea().offsetX*2)+")");if(o){q=n}p.setScale(p.getScale().getX()*n,p.getScale().getY()*q)},shakeView:function(n){var p=10*(Math.random()>0.5?1:-1);var o=10*(Math.random()>0.5?1:-1);var q=40;n.createAnimationQueue().pushAnimation(q,b.Curve.Linear).tween(b.Interpolate.scalar(0,1),function(r){this.setPosition(this.getPosition().getX()+p,this.getPosition().getY()+o)}.bind(n.getView())).pushAnimation(q,b.Curve.Linear).tween(b.Interpolate.scalar(0,1),function(r){this.setPosition(this.getPosition().getX()-p,this.getPosition().getY()-o)}.bind(n.getView())).pushAnimation(q,b.Curve.Linear).tween(b.Interpolate.scalar(0,1),function(r){this.setPosition(this.getPosition().getX()+p,this.getPosition().getY()-o)}.bind(n.getView())).pushAnimation(q,b.Curve.Linear).tween(b.Interpolate.scalar(0,1),function(r){this.setPosition(this.getPosition().getX()-p,this.getPosition().getY()+o)}.bind(n.getView())).pushAnimation(q,b.Curve.Linear).tween(b.Interpolate.scalar(0,1),function(r){this.setPosition(this.getPosition().getX()+p,this.getPosition().getY()-o)}.bind(n.getView())).pushAnimation(q,b.Curve.Linear).tween(b.Interpolate.scalar(0,1),function(r){this.setPosition(this.getPosition().getX()-p,this.getPosition().getY()+o)}.bind(n.getView())).pushAnimation(q,b.Curve.Linear).tween(b.Interpolate.scalar(0,1),function(r){this.setPosition(this.getPosition().getX()-p,this.getPosition().getY()-o)}.bind(n.getView())).pushAnimation(q,b.Curve.Linear).tween(b.Interpolate.scalar(0,1),function(r){this.setPosition(this.getPosition().getX()+p,this.getPosition().getY()+o)}.bind(n.getView())).pushCallback(function(){this.setPosition(0,0)}.bind(n.getView())).start()}})}};__ngs._p={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.TFAppDelegate=Core.MessageListener.singleton({classname:"TFAppDelegate",initialize:function(){this._glViewIsReady=false;this._updateLocalization();this._doneItAlready=false;TFAnalytics.reportGameEvent("LOADGAMESTART1",{},{},true);this._startTime=new Date();var m=__ngs.r_(__ngs._4a).TFImageManager;m.instantiate();var d=__ngs.r_(__ngs._g).UI;var e=new d.GLView();e.onload=function(){this._glViewIsReady=true;TFManifestManager.initialize(e.getOGLExtensions());TFSceneDirector.instantiate()}.bind(this);e.setAttribute("frame",[0,0,d.Window._width,d.Window._height]);e.setAttribute("active",true);this._glView=e;var c=__ngs.r_(__ngs._4).Device;c.LifecycleEmitter.addListener(new Core.MessageListener(),this._onLifecycleChange.bind(this));c.KeyEmitter.addListener(new Core.MessageListener(),this._onKeyPressed.bind(this));Core.UpdateEmitter.addListener(this,this._onUpdate.bind(this));var l=__ngs.r_(__ngs._l).User;l.instantiate();TFAnalytics.instantiate();l.setup(function(r){if(r){Server.setup()}else{this._fullscreenView=new d.View();this._fullscreenImage=new d.Image();this._fullscreenView.setFrame(d.Window.getFrame());this._fullscreenImage.setFrame(d.Window.getFrame());this._fullscreenImage.setBackgroundColor("FF000000");this._fullscreenImage.setImage("Content/Images2x/UI/BG/bg_mission_planet.jpg");this._fullscreenImage.setImageFit(d.Commands.FitMode.Stretch);this._fullscreenView.addChild(this._fullscreenImage);d.Window.document.addChild(this._fullscreenView);var q=new d.AlertDialog();q.setTitle(Localization.getString("Mobage Login"));q.setText(Localization.getString("Your device is having difficulty connecting to TRANSFORMERS Legends. If the problem persists, please try restarting the app."));q.setChoices([Localization.getString("Exit")]);q.setOnChoice((function(){c.LifecycleEmitter.exitProcess()}).bind(q));q.show()}});var p=__ngs.r_(__ngs._5z).TFDebugPanel;if(typeof(p)!="undefined"){p.instantiate()}var k=__ngs.r_(__ngs._s).TFUtils;k.instantiate();var h=__ngs.r_(__ngs._4b).UILoader;h.instantiate();var o=__ngs.r_(__ngs._47).UpdateStacker;o.instantiate();var g=__ngs.r_(__ngs._60).TFImageCache;g.instantiate();var n=__ngs.r_(__ngs._61).TFEventManager;n.instantiate()},_onKeyPressed:function(d){var c=true;console.log("_onKeyPressed  ",JSON.stringify(d));if(d.code===Device.KeyEmitter.Keycode.back){console.log("_onKeyPressed BACK -> ");if(!TFUserData.blockBack){c=TFSceneDirector.back()}}return c},_onLifecycleChange:function(c){switch(c){case Device.LifecycleEmitter.Event.Suspend:this.applicationWillResignActive();break;case Device.LifecycleEmitter.Event.Resume:this.applicationDidBecomeActive();break;case Device.LifecycleEmitter.Event.Terminate:this.applicationWillTerminate();break}},_updateLocalization:function(){Core.Localization.directoryPath="Data/";var c=Core.Capabilities.getLanguage();var d=__ngs.r_(__ngs._3x).Social;if(d.Common.Config.getServerEnvironment()!="sandbox"){c="en"}Storage.FileSystem.stat(Core.Localization.directoryPath+c+".json",{},function(g,e){if(g){console.log("[LOCALIZATION] An error occurred while retrieving file "+Core.Localization.directoryPath+c+".json Defaulting to english");Core.Localization.setLanguage("en")}else{console.log("[LOCALIZATION] Retrieved file information: "+c);Core.Localization.setLanguage(c)}})},_onUpdate:function(d){if(Server.isLoggedIn()&&!this._startReported){TFAnalytics.reportGameEvent("LOADGAMESTART2",{newuser:TFUserData.newUser()});this._startReported=true}if(TFGameData.isReady()&&Server.isLoggedIn()&&TFManifestManager.isDone()&&this._glViewIsReady===true&&TFSceneDirector._introPlaying===false){this._updateLocalization();Core.Localization.addListener(this,function(){Core.Localization.removeListener(this);TFUserData.refresh();TFSceneDirector.allClearFlag=true;TFSceneDirector.loadGame()}.bind(this));Core.UpdateEmitter.removeListener(this);var c=new Date();TFAnalytics.reportGameEvent("LOADGAMEEND",{newuser:TFUserData.newUser(),timetake:(c.valueOf()-this._startTime.valueOf())});Server.startNetworkPerformanceMonitor()}},applicationWillTerminate:function(){console.log("<<TFAppDelegate: applicationWillTerminate");var c=__ngs.r_(__ngs._62).TFParticleManager;c.applicationWillTerminate()},applicationWillResignActive:function(){if(this._doneItAlready===true){return}this._doneItAlready=true;TFUserData.clearEnergyTimeouts();Server._onLifecycleChange(Device.LifecycleEmitter.Event.Suspend);Device.OrientationEmitter.setInterfaceOrientation(Device.OrientationEmitter.Orientation.Portrait);console.log("<<TFAppDelegate: applicationWillResignActive");TFNotificationsManager.setupNotifications();var c=__ngs.r_(__ngs._62).TFParticleManager;c.applicationWillResignActive();Server.stopNetworkPerformanceMonitor()},applicationDidBecomeActive:function(){console.log("<<TFAppDelegate: applicationDidBecomeActive");this._doneItAlready=false;Server._onLifecycleChange(Device.LifecycleEmitter.Event.Resume);if(TFSceneDirector&&TFSceneDirector.doneLoad===true){if(Server.isConnectionAvailable()){Server.getCurrentUser(this.reloadInfoUser.bind(this));Server.startNetworkPerformanceMonitor()}var c=__ngs.r_(__ngs._62).TFParticleManager;c.applicationDidBecomeActive();TFSceneDirector.getMainViewController().onResume();TFSceneDirector.updateHud();User.setup(TFUserData.syncUser.bind(TFUserData))}Device.OrientationEmitter.removeListener(this);Device.OrientationEmitter.addListener(this,function(d){if(d.type==Device.OrientationEmitter.OrientationType.Interface&&d.orientation==Device.OrientationEmitter.Orientation.Portrait){setTimeout(function(){if(TFSceneDirector&&TFSceneDirector.doneLoad===true){TFSceneDirector.updateHud()}},1)}Device.OrientationEmitter.removeListener(this)});Device.OrientationEmitter.setInterfaceOrientation(Device.OrientationEmitter.Orientation.Portrait);TFNotificationsManager.clearNotifications()},_checkConnection:function(c){if(c==Device.NetworkEmitter.Status.None){TFUtils.showAlert("Error","No network","OK")}},reloadInfoUser:function(d,c){if(d){console.log("TFAppDelegate.reloadInfoUser Error, cannot retrieve used data! error=%s",JSON.stringify(d))}else{if(c){console.log("TFAppDelegate > reloadInfoUser > User info reloaded");TFUserData.syncFrom(c);TFUserData.setLastAndNextFreeGashaDates(c.lastAndNextFreeGashaDates);TFUserData.startExploreEnergyUpdates();TFUserData.startBattleEnergyUpdates();NotificationCenter.updateNotifications()}}},triggerConfigUpdate:function(){TFUtils.showReloadDataDialog();TFManifestManager.onGameServerLogin();Core.UpdateEmitter.addListener(this,this._appUpdate.bind(this))},_appUpdate:function(){if(TFGameData.isReady()&&TFManifestManager.isDone()){Core.UpdateEmitter.removeListener(this);if(Server.isConnectionAvailable()){Server.getCurrentUser(this.reloadInfoUser.bind(this))}TFCardsManager.loadCardListDetails();var c=__ngs.r_(__ngs._49).TFDeckManager;c.resetHash();TFSceneDirector.showHome();TFUtils.hideReloadDataDialog()}}})}};__ngs._q={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.TFUserData=Core.Class.singleton({classname:"TFUserData",tempUnit:null,tempDeck:null,initialize:function(){this.maxFellows=10;this.fellowsCount=0;this.pendingFellowsCount=0;this.waitingFellowsCount=0;this.greetsCount=0;this.bossCounter=0;this.lastBattleTimeStamp=0;this.blockBack=false;this.onDeckCardSelected=false;this.shownTransScanMsgs=[]},refresh:function(){this.setTotalXp(this.xp)},isWorldUnlocked:function(c){var e=TFGameData.getWorld(c);if(e.tutorial){if(e.preReqWorldId.indexOf(0)!=-1){if(this.isWorldCompleted(e.id)==false){if(this.sideSelected=="Autobot"&&e.faction==TFGameData.FACTION.AUTOBOTSTRING){return true}if(this.sideSelected=="Decepticon"&&e.faction==TFGameData.FACTION.DECEPTICONSTRING){return true}}}return false}else{if(e.preReqWorldId.indexOf(0)!=-1){return true}}for(var d in e.preReqWorldId){if(this.isWorldCompleted(e.preReqWorldId[d])){return true}}return false},clearEnergyTimeouts:function(){if(this.exploreEnergyTimeout){console.log("TFUserData: cancelling active explore energy update timeout");clearTimeout(this.exploreEnergyTimeout);this.exploreEnergyTimeout=undefined}if(this.battleEnergyTimeout){console.log("TFUserData: cancelling active battle energy update timeout");clearTimeout(this.battleEnergyTimeout);this.battleEnergyTimeout=undefined}},startExploreEnergyUpdates:function(){var e=new Date(this.lastExploreEnergyUpdate);var c=new Date(this.serverTime);var d=c.getTime()-e.getTime();this._updateExploreEnergy(d)},_updateExploreEnergy:function(g){if(TFGameData.isReady()){var e=TFGameData._configJSON.exploreEnergyPeriod*60*1000;if(g>e){var c=Math.floor(g/e);this.setExploreEnergy(this.getExploreEnergy()+TFGameData._configJSON.exploreEnergyRate*c)}var d=e-g;while(d<0){d+=e}console.log("TFUserData: Will add next explore energy after "+d/1000+" seconds");this.exploreEnergyTimeout=setTimeout(function(){this.setExploreEnergy(this.getExploreEnergy()+TFGameData._configJSON.exploreEnergyRate);this._updateExploreEnergy(0)}.bind(this),d)}else{this.exploreEnergyTimeout=setTimeout(this._updateExploreEnergy.bind(this,g+1000),1000)}},startBattleEnergyUpdates:function(){var e=new Date(this.lastBattleEnergyUpdate);var c=new Date(this.serverTime);var d=c.getTime()-e.getTime();this._updateBattleEnergy(d)},_updateBattleEnergy:function(g){if(TFGameData.isReady()){var e=TFGameData._configJSON.battleEnergyPeriod*60*1000;if(g>e){var c=Math.floor(g/e);this.battleEnergy+=TFGameData._configJSON.battleEnergyRate*c;this.battleEnergy=Math.min(this.battleEnergy,this.maxBattleEnergy)}var d=e-g;while(d<0){d+=e}console.log("TFUserData: Will add next battle energy after "+d/1000+" seconds");this.battleEnergyTimeout=setTimeout(function(){this.battleEnergy+=TFGameData._configJSON.battleEnergyRate;this.battleEnergy=Math.min(this.battleEnergy,this.maxBattleEnergy);this._updateBattleEnergy(0)}.bind(this),d)}else{this.battleEnergyTimeout=setTimeout(this._updateBattleEnergy.bind(this,g+1000),1000)}},isStageComplete:function(c,d){return this.isStageBossComplete(d)},isStageBossComplete:function(c){return this.completedStages.indexOf(c)!=-1?true:false},isStageBossUnlocked:function(d,g){var e=TFGameData.getMissionsForStage(d,g);for(var c in e){if(!this.isMissionComplete(e[c].id)){console.log("this mission is not complete "+e[c].id);return false}}return true},isStageUnlocked:function(c,e){var d=TFGameData.getStage(c,e);if(d.preReqStageId===0){return true}return this.isStageBossComplete(d.preReqStageId)},_getMissionState:function(c){for(var d in this.missionsState){if(this.missionsState[d].missionId==c){return this.missionsState[d]}}},hasSeenMission:function(c){var d=false;if(this._getMissionState(c)){d=true}return d},isMissionUnlocked:function(c){var e=TFGameData.getMission(c);if(e.preReqType==1&&e.preReqMissionId===0){return true}var d=this._getMissionState(c);if(d){return true}if(e.preReqType==1){var g=TFUserData._getMissionState(e.preReqMissionId);if(g&&g.progress==1){return true}}return false},isWorldCompleted:function(c){var e=TFGameData.getStagesForWorld(c);for(var d in e){if(!this.isStageBossComplete(e[d].id)){return false}}return true},isMissionComplete:function(c){var d=this._getMissionState(c);if(d&&d.progress==1){return true}return false},getCards:function(){return this.cards},getCardsInLimbo:function(){return this.cardsLimbo},getCardsOfFaction:function(d){var e=new Array();for(var c in this.cards){var g=TFCardsManager.getCardDefinition(this.cards[c].definitionId);if(g.factionId==d&&g.type==TFGameData.CARD_TYPE.TRANSFORMER){e.push(this.cards[c])}}return e},sortCards:function(c){if(!c){c=this.cards}c.sort(function(e,d){var h=TFCardsManager.getCardDefinition(e.definitionId);var g=TFCardsManager.getCardDefinition(d.definitionId);if(g.rarity==h.rarity){return d.xp-e.xp}else{return g.rarity-h.rarity}});return c},sortCardsName:function(d,c){if(!c){c=this.cards}c.sort(function(g,e){var k=TFCardsManager.getCardDefinition(g.definitionId);var h=TFCardsManager.getCardDefinition(e.definitionId);if(Localization.getString(h.name).toUpperCase()==Localization.getString(k.name).toUpperCase()){if(k.cardFormId==h.cardFormId){return e.xp-g.xp}else{if(k.cardFormId==3){return -1}else{if(h.cardFormId==3){return 1}else{return k.cardFormId-h.cardFormId}}}}else{if(d){return(Localization.getString(h.name).toUpperCase()<Localization.getString(k.name).toUpperCase())?-1:1}else{return(Localization.getString(k.name).toUpperCase()<Localization.getString(h.name).toUpperCase())?-1:1}}});return c},sortCardsOverAll:function(d,c){if(!c){c=this.cards}c.sort(function(h,e){var m=TFCardsManager.getCardStatus(h);var l=TFCardsManager.getCardStatus(e);var k=m.status2*m.status1/(200-Math.sqrt(m.status3));var g=l.status2*l.status1/(200-Math.sqrt(l.status3));if(d){return g-k}else{return k-g}});return c},sortCardsRarity:function(d,c){if(!c){c=this.cards}c.sort(function(g,e){var k=TFCardsManager.getCardDefinition(g.definitionId);var h=TFCardsManager.getCardDefinition(e.definitionId);if(h.rarity==k.rarity){if(d){return e.xp-g.xp}else{return g.xp-e.xp}}else{if(d){return h.rarity-k.rarity}else{return k.rarity-h.rarity}}});return c},sortCardsRanged:function(d,c){if(!c){c=this.cards}c.sort(function(g,e){var k=TFCardsManager.getCardStatus(g);var h=TFCardsManager.getCardStatus(e);if(d){return h.status2-k.status2}else{return k.status2-h.status2}});return c},sortCardsMelee:function(d,c){if(!c){c=this.cards}c.sort(function(g,e){var k=TFCardsManager.getCardStatus(g);var h=TFCardsManager.getCardStatus(e);if(d){return h.status1-k.status1}else{return k.status1-h.status1}});return c},sortCardsSpecial:function(g,e){if(!e){e=this.cards}for(var d=0;d<e.length;++d){var c=TFCardsManager.getCardStatus(e[d])}e.sort(function(k,h){var m=TFCardsManager.getCardStatus(k);var l=TFCardsManager.getCardStatus(h);if(g){return l.status3-m.status3}else{return m.status3-l.status3}});for(var d=0;d<e.length;++d){var c=TFCardsManager.getCardStatus(e[d])}return e},sortCardsXP:function(d,c){if(!c){c=this.cards}c.sort(function(g,e){if(d){return e.xp-g.xp}else{return g.xp-e.xp}});return c},isCardTransScannable:function(e){var g=undefined;if(e.inLimbo){g=this.getLimboCard(e.id)}else{g=this.getCard(e.id)}if(g){if(this.shownTransScanMsgs.indexOf(g.definitionId)!=-1){console.log("TFUserData > isCardTransScannable (msg already shown)",g.definitionId);return false}var h=TFCardsManager.getCardDefinition(g.definitionId);var d=-1;if(h.type==TFGameData.CARD_TYPE.WEAPON){return false}switch(h.cardFormId){case 1:d=g.definitionId+1;break;case 2:d=g.definitionId-1;break;default:return false}this.shownTransScanMsgs.push(g.definitionId);this.shownTransScanMsgs.push(d);console.log("TFUserData > isCardTransScannable seeking:",g.definitionId,d);for(var c in this.cards){if(this.cards[c].definitionId==d){return true}}}return false},getCard:function(e){var d=null;for(var c in this.cards){if(this.cards[c].id==e){d=this.cards[c];break}}return d},getLimboCard:function(e){var d=null;for(var c in this.cardsLimbo){d=this.cardsLimbo[c];if(d.id==e){break}}return d},getRandomTransformerCard:function(){return this.getDeckCard(Math.ceil(Math.random()*3),Math.floor(Math.random()*3),TFGameData.CARD_TYPE.TRANSFORMER)},getRandomCard:function(){return this.cards[Math.floor(Math.random()*this.cards.length)]},getLevelProgress:function(){return this._levelProgress},getLevel:function(){return this._level},getTotalXp:function(){return this.xp},getCurrency:function(){return this.currency},getAttackPower:function(){if(!TFGameData.isReady()){return"Data not ready yet."}else{var c=__ngs.r_(__ngs._49).TFDeckManager;return c.getAttackPower()}},addNewLimboCard:function(c){this.cardsInLimbo++;this.cardsLimbo.push(c)},addNewCard:function(c){console.log("TFUserData > addNewCard > called");if(TFCardsManager.getCardDefinition(c.definitionId).type==TFGameData.CARD_TYPE.TRANSFORMER){this.gearCardsCount++}else{this.pilotCardsCount++}this.lastCard=c;this.lastCard.isNew=TFCardsManager.isNew(c.definitionId);if(!c.xp){c.xp=0;this.cards.push(c);return}for(var d in this.cards){if(this.cards[d].xp<c.xp){this.cards.splice(d,0,c);break}}TFCardsManager.validateCardHistory(c.definitionId)},addNewTransformerCard:function(c){this.gearCardsCount++;this.lastCard=c;this.lastCard.isNew=TFCardsManager.isNew(c.definitionId);if(!c.xp){c.xp=0;this.cards.push(c);return}for(var d in this.cards){if(this.cards[d].xp<c.xp){this.cards.splice(d,0,c);break}}},removeCard:function(d){for(var c in this.cards){if(this.cards[c].id==d){if(TFCardsManager.getCardDefinition(this.cards[c].definitionId).type==TFGameData.CARD_TYPE.TRANSFORMER){this.gearCardsCount--}else{this.pilotCardsCount--}this.cards.splice(c,1)}}},setTotalCurrency:function(c){this.currency=c},setLastAndNextFreeGashaDates:function(c){if(c){this.lastFreeGasha=c.lastFreeGashaDate;this.nextFreeGasha=c.nextFreeGashaDate;this.freeGashaEligable=c.isEligable}},setTotalXp:function(h,e){console.log("TFUserData > setTotalXp > newXp="+h);if(h===undefined||h===null){return false}if((h<this.xp)&&!e){return false}if(!TFGameData._levelsJSON){return false}this.xp=h;var g=1;var d;while(TFGameData._levelsJSON[g+1]&&this.xp>=TFGameData._levelsJSON[g+1].xpCumulative){g++}if(this._level<g){console.log("TFUserData.setTotalXp player has leveled up from "+this._level+" to "+g);d=TFGameData._levelsJSON[g];this._levelUp=true;if((this._level<10)&&(g>=10)){this._askToRate=true}}this._level=g;var c=this.xp-TFGameData._levelsJSON[this._level].xpCumulative;if(TFGameData._levelsJSON[this._level+1]==undefined){this._levelProgress=0}else{this._levelProgress=c/TFGameData._levelsJSON[this._level+1].xpRequired}this._levelUp=d;return d},getLevelUp:function(){return this._levelUp},clearLevelUp:function(){this._levelUp=false},getAskToRate:function(){return this._askToRate},clearAskToRate:function(){this._askToRate=false},getExploreEnergy:function(){return this.exploreEnergy},getMaxExploreEnergy:function(){return this.maxExploreEnergy},getBattleEnergy:function(){return this.battleEnergy},getMaxBattleEnergy:function(){return this.maxBattleEnergy},setBattleEnergy:function(c){console.log("TFUserData.setBattleEnergy called. this.battleEnergy="+this.battleEnergy+", newValue="+c);var d=this.battleEnergy;if(c<0){this.battleEnergy=0}else{this.battleEnergy=c}TFSceneDirector.updateHud();if(TFSceneDirector._currentViewController&&TFSceneDirector._currentViewController.updateBattleEnergy){TFSceneDirector._currentViewController.updateBattleEnergy(c)}},setExploreEnergy:function(c){console.log("TFUserData.setExploreEnergy called. this.exploreEnergy="+this.exploreEnergy+", newValue="+c);var d=this.exploreEnergy;if(c<0){this.exploreEnergy=0}else{this.exploreEnergy=c}if(this.exploreEnergy>this.maxExploreEnergy){this.exploreEnergy=this.maxExploreEnergy}},setExploreMaxEnergy:function(c){console.log("TFUserData.setExploreMaxEnergy called. this.maxExploreEnergy="+this.maxExploreEnergy+", newValue="+c);this.maxExploreEnergy=c},getCardsEarnedForMission:function(c){var d=this._getMissionState(c);if(!d){return[]}return d.cardRewards},getStageProgress:function(c,k){var e=TFGameData.getMissionsForStage(c,k);var d;var g=0;for(var h in e){d=this._getMissionState(e[h].id);if(d){g+=d.progress/e.length}}return g},getRoundsCompletedForMission:function(c){var d=this._getMissionState(c);if(!d){return 0}return d.roundNumber},setMissionState:function(c,g){var e;for(var d in this.missionsState){if(this.missionsState[d].missionId==c){e=this.missionsState[d];this.missionsState[d]=g}}if(!e){this.missionsState.push(g)}},setLastReward:function(c){this._lastReward=c},getLastReward:function(){return this._lastReward},syncFrom:function(d){for(var c in d){console.log("TFUserData.syncFrom "+c+" : "+JSON.stringify(d[c]));if(c=="serverTime"){Server.setUpServerTime(d[c])}else{if(TFGameData._selectedFaction&&c=="sideSelected"&&d[c]===""){if(TFGameData._selectedFaction==1){d[c]="Autobot"}else{if(TFGameData._selectedFaction==2){d[c]="Decepticon"}}}}this[c]=d[c]}NotificationCenter.updateNotifications()},setOpponentDeck:function(c){this.opponentDeck=c},getOpponentDeck:function(){return this.opponentDeck},setSelectedOpponent:function(c){this.selectedOpponent=this.enemies[c]},getSelectedOpponent:function(){return this.selectedOpponent},getDeckCard:function(g,h,c,e){if(e===undefined){e=TFGameData.DECK_INDEX.MAIN}var d="status"+g;c=(c==TFGameData.CARD_TYPE.TRANSFORMER)?"gear":"pilot";return this.getCard(this.decks[e][d][h][c])},setLastBattleResult:function(c){this.lastBattleResults=c},getLastBattleResult:function(){return this.lastBattleResults},updateGasha:function(){var c=Server.getServerTime();var d=(new Date(this.nextFreeGasha)).valueOf();if(d<c){this.freeGashaEligable=true}else{this.freeGashaEligable=false}},isMaxLevel:function(){return(TFGameData._levelsJSON[this._level+1]==undefined)},isFreeGashaReady:function(){this.updateGasha();console.log("***#####* isFreeGashaReady "+this.freeGashaEligable);return TFUserData.freeGashaEligable},isBattleGashaReady:function(){var c=false;if(this.battlePoints>=300){c=true}return c},isAllyGashaReady:function(){var c=false;if(this.gashaPoints>=300){c=true}return c},existElementInboxGift:function(){var c=this.getInboxList();if(c===undefined){return false}if(c.length<=0){return false}return true},isMedalGashaReady:function(e){var c=false;if(e!==undefined&&this.medals.length>0){for(var d in this.medals){if(this.medals[d].id==e&&this.medals[d].amount>0){c=true;break}}}else{if(e===undefined&&this.medals.length>0){c=true}}return c},getTutorialState:function(c){if(this._tutorialStatesArray){if(this._tutorialStatesArray[c]){NgLogD("*********return====state==="+this._tutorialStatesArray[c]);return this._tutorialStatesArray[c]}}else{this._tutorialStatesArray=new Array();var e=null;if(this.tutorialStates){for(var d in this.tutorialStates){if(this.tutorialStates[d].tutorial){this._tutorialStatesArray[this.tutorialStates[d].tutorial]=this.tutorialStates[d].state;if(this.tutorialStates[d].tutorial==c){e=this.tutorialStates[d].state}}}}return e}if(c==="homescreen"){return"end"}return null},setInitialTutorialStates:function(){this._tutorialStatesArray=new Array();if(this.tutorialStates){for(var c in this.tutorialStates){if(this.tutorialStates[c].tutorial){this._tutorialStatesArray[this.tutorialStates[c].tutorial]=this.tutorialStates[c].state}}}},setNewTutorialState:function(d,e,c){if(!d||!e){return}if(!this._tutorialStatesArray){this._tutorialStatesArray=new Array()}this._tutorialStatesArray[d]=e;if(!c){c=function(){}}Server.setMiniTutorialState(d,e,c,false)},isGashaReady:function(e){var c=false;var d=TFGameData._gashaPacksJSON[""+e.id][0];if((d.currency.indexOf("medal_")!=-1)||(d.currency.indexOf("Medal")!=-1)){c=this.isMedalGashaReady(d.currency)}else{switch(d.currency){case"socialPoints":if(TFUserData.gashaPoints>=d.value){c=true}break;case"mobacoins":c=true;break;case"battlePoints":if(TFUserData.battlePoints>=d.value){c=true}break;default:if(d.sku.length>0){c=true}break}}return c},gashaAmount:function(g){console.log("TFUserData > gashaAmount > gasha="+JSON.stringify(g));var c=0;var e=TFGameData._gashaPacksJSON[g.id][0];var d;if((e.currency.indexOf("medal_")!=-1)||(e.currency.indexOf("Medal")!=-1)){c=TFUserData.getMedalQuantity(e.currency);console.log("TFUserData > gashaAmount > Medal count for "+e.currency+"="+c)}else{switch(e.currency){case"socialPoints":c=this.gashaPoints/e.value;break;case"battlePoints":c=TFUserData.battlePoints/e.value;break}}return c},searchMedal:function(g){var e;var c=TFGameData._gashaPacksJSON;for(var d in c){if(c[d][0].currency==g){e=c[d][0];break}}return e},searchItem:function(g){var e;var c=TFGameData._itemsJSON;for(var d in c){if(c[d].id==g){e=c[d];break}}return e},getGiftDetails:function(c){var h;var g;var e=Number((c.type));switch(e){case 10:h=c;h._desc=Localization.getString("ui_credits");h._amount=c.amount;h._img="Content/Images8x/UI/icon/icon_currency.png";break;case 20:h=c;h._desc=Localization.getString("ui_allypoints");h._amount=c.amount;h._img="Content/Images8x/UI/StoreItems/Gacha_friendPoints.png";break;case 30:g=this.searchItem(c.value);if(g){h=c;h._desc=Localization.getString(g.name);h._amount=c.amount;h._img="Content/Images8x/UI/StoreItems/"+g.image}break;case 50:g=this.searchMedal(c.value);if(g){h=c;h._desc=Localization.getString(g.name);h._amount=c.amount;h._img=TFGameData.getMedalImagePath(c.value);console.log("TFUserData.getGiftDetails "+c._desc+"*"+g.name+"*")}else{console.log("TFUserData.getGiftDetails unkown Medal"+c.value)}break;case 70:var d=TFCardsManager.getCardDefinition(c.value);if(d){console.log("TFUserData.getGiftDetails got CARD"+c.value);h=c;h._desc=Localization.getString(d.name);h._amount=c.amount;h._img=TFUtils.getCardImagePath(c.value)}else{console.log("TFUserData.getGiftDetails unkown CARD"+c.value)}break}return h},addGiftsToInbox:function(d){console.log("TFUserData > addGiftsToInbox > newGifts="+JSON.stringify(d));if(d){for(var g in d){var c=d[g];var h=false;for(var e in this.gifts){if(this.gifts[e].id==c.id){h=true;break}}if(!h){console.log("TFUserData > addGiftsToInbox > adding gift "+JSON.stringify(c));this.gifts.push(c);if(c.type==70){this.newCardAsReward=true}}}}},getInboxList:function(){var d=this.gifts;var e=[];for(var h in d){console.log("TFUserData.getInboxList  item "+JSON.stringify(d[h]));var c=this.getGiftDetails(d[h]);if(c){e.push(c)}}return e},getFriendPoints:function(){return this.gashaPoints},getBattlePoints:function(){return this.battlePoints},setBattlePoints:function(c){this.battlePoints=c;TFSceneDirector.updateHud()},getTotalTransformerCards:function(){return this.gearCardsCount},getTotalWeaponCards:function(){return this.pilotCardsCount},getLimboSize:function(){return this.cardsInLimbo},getLimboTTL:function(){if(this.limboDate===null){return"infty"}var c=new Date();return this.limboDate-c.valueOf()},getClass:function(){return this.sideSelected},getFriendsCount:function(){return this.fellowsCount},getCreationData:function(){var c=new Date(this.registrationTimeStamp);return c.toUTCString()},getCurrentMissionId:function(){var c;if(!this._currentMission){for(var d in this.missionsState){if(this.missionsState[d].progress<1){c=this.missionsState[d].missionId}}}else{c=this._currentMission}return c},newUser:function(){var c="NEW";if(this.getTutorialState("main")=="end"){c="RETURN"}return c},getRank:function(){return User.getRank()},getMissionProgressFuzzy:function(c){var d="LT25";var g=this._getMissionState(c);var e=0;if(g){e=g.progress}if(e==1){d="COMPLETE"}else{if(e>=75){d="LT100"}else{if(e>=50){d="LT75"}else{if(e>=25){d="LT50"}}}}return d},getItemQuantity:function(e){var c=0;for(var d in TFUserData.items){if(TFUserData.items[d].id==e){c+=TFUserData.items[d].amount;break}}return c},decrementItems:function(c){for(var d=0;d<c.length;++d){for(var e in TFUserData.items){if(TFUserData.items[e].id==c[d].id){console.log("TFUserData > decrementItems > decrementing",c[d].amount,"of item",c[d].id);TFUserData.items[e].amount-=c[d].amount;break}}}},getMedalQuantity:function(e){var c=0;for(var d in this.medals){if(this.medals[d].id==e){c=this.medals[d].amount;break}}return c},addMedals:function(e,d){for(var c in this.medals){if(this.medals[c].id==e){this.medals[c].amount+=d;break}}},addMedals:function(e,d){for(var c in this.medals){if(this.medals[c].id==e){this.medals[c].amount+=d;break}}},getLastBattleTimeStamp:function(){if(this.lastBattleTimeStamp&&this.lastBattleTimeStamp!==0){return this.lastBattleTimeStamp}else{if(this.lastBattleDate){return(new Date(this.lastBattleDate).getTime())}else{return 0}}},setLastBattleTimeStamp:function(c){this.lastBattleTimeStamp=c},sortFriendsByAlphabetical:function(e,g){var d=[];for(var c in e){d.push(e[c])}for(var c in d){element=d[c];console.log("element name (antes) : "+element.playerName.getText().toLowerCase())}d.sort(function(k,h){var m=k.playerName.getText().toLowerCase();var l=h.playerName.getText().toLowerCase();console.log("nameA : "+m+", nameB : "+l);if(m>l){return g?-1:1}else{if(m<l){return g?1:-1}else{return 0}}});for(var c in d){element=d[c];console.log("element name (despues) : "+element.playerName.getText().toLowerCase())}return d},sortFriendsByLevel:function(e,g){var d=[];for(var c in e){d.push(e[c])}for(var c in d){element=d[c];console.log("element level (antes) : "+element.playerName.getText().toLowerCase()+" / LEVEL "+element.playerLevel.getText())}d.sort(function(l,h){var m=l.playerLevel.getText().substring(6);var k=h.playerLevel.getText().substring(6);console.log("levelA : "+m+", levelB : "+k);if(g){return k-m}else{return m-k}});for(var c in d){element=d[c];console.log("element level (despues) : "+element.playerName.getText().toLowerCase()+" / LEVEL "+element.playerLevel.getText())}return d},sortFriendsByLastActionTimestamp:function(e,g){var d=[];for(var c in e){d.push(e[c])}for(var c in d){element=d[c];console.log("element level (antes) : "+element.playerName.getText().toLowerCase()+" / LLG "+element.playerLastActionTimestamp.getText())}d.sort(function(l,k){var h=l.playerLastActionTimestamp.getText();var m=k.playerLastActionTimestamp.getText();console.log("llgA : "+h+", llgB : "+m);if(g){return m-h}else{return h-m}});for(var c in d){element=d[c];console.log("element level (despues) : "+element.playerName.getText().toLowerCase()+" / LLG "+element.playerLastActionTimestamp.getText())}return d},sortFriendsByCheeredTime:function(e,g){var d=[];for(var c in e){d.push(e[c])}for(var c in d){element=d[c];console.log("element level (antes) : "+element.playerName.getText().toLowerCase()+" / LC "+element.playerLastCheer.getText())}d.sort(function(k,h){var m=k.playerLastCheer.getText();var l=h.playerLastCheer.getText();console.log("lcA : "+m+", lcB : "+l);if(g){return l-m}else{return m-l}});for(var c in d){element=d[c];console.log("element level (despues) : "+element.playerName.getText().toLowerCase()+" / LC "+element.playerLastCheer.getText())}return d},updateBattleWin:function(c){if(c===true){this.stats.wins++;this.battlesWonInRow++;if(this.battlesWonInRow>this.mostBattlesWonInRow){this.mostBattlesWonInRow=this.battlesWonInRow}}else{this.stats.losses++;this.battlesWonInRow=0;if(this.selectedOpponent){this.selectedOpponent.wins++}}},hasJoinedEvent:function(d){if(!d){return false}if(this.joinedEvents){for(var c in this.joinedEvents){if(this.joinedEvents[c].eventId==d){return true}}}return false},getUnseenEventFinal:function(){var c=[];if(this.joinedEvents){for(var d in this.joinedEvents){if(!this.joinedEvents[d].seenFinal){console.log("TFUserData > getUnseenEventFinal > unseen event="+this.joinedEvents[d].eventId);c.push(this.joinedEvents[d].eventId)}}}console.log("TFUserData > getUnseenEventFinal > unseenEvents="+JSON.stringify(c));return c},hasSeenEventFinal:function(){var c=[];if(this.joinedEvents){for(var d in this.joinedEvents){if(!this.joinedEvents[d].seenFinal){console.log("TFUserData > hasSeenEventFinal > unseen event="+this.joinedEvents[d].eventId);c.push(this.joinedEvents[d].eventId)}}}console.log("TFUserData > hasSeenEventFinal > unseenEvents="+JSON.stringify(this.unseenEvents));return c},removeUnseenEventFinal:function(d){console.log("TFUserData > removeUnseenEventFinal > OLD joinedEvents="+JSON.stringify(this.joinedEvents));if(this.joinedEvents){for(var c in this.joinedEvents){if((this.joinedEvents[c].eventId==d)&&!this.joinedEvents[c].seenFinal){this.joinedEvents[c].seenFinal=true;break}}}console.log("TFUserData > removeUnseenEventFinal > NEW joinedEvents="+JSON.stringify(this.joinedEvents))},getEventPurchases:function(d){if(this.joinedEvents){for(var c in this.joinedEvents){if(this.joinedEvents[c].eventId==d){return this.joinedEvents[c].purchases}}}},syncUser:function(d,e,c){if(d!==true){return}if(e===true){TFSceneDirector.updateHud()}if(c===true){}},getGamerTag:function(){return User.getGamerTag()},destroy:function($super){$super()}})}};__ngs._r={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var a=__ngs.r_(__ngs._63).TFFormulas;var d=__ngs.r_(__ngs._61).TFEventManager;b.TFCardsManager=Core.Class.singleton({classname:"TFCardsManager",m_cardsDetailList:null,m_dictionaryDetailList:null,initialize:function(){console.log("TFCardsManager.initialize called.");this.m_fusionItemId=1;this.m_fusionItemMaxNumber=30;a.instantiate();this.loadCardListDetails();this._diagnostic()},_diagnostic:function(){return;var g=this.getSkillsFromUnit(11000031,2100003);var e=this.getCardStatus({id:1,definitionId:2100003,xp:0});console.log("TFCardsManager._diagnostic "+JSON.stringify(g));console.log("TFCardsManager._diagnostic "+JSON.stringify(a.getActivatedParams(e,g)))},loadCardListDetails:function(){if(!this.m_dictionaryDetailList||(this.m_dictionaryDetailList&&this.m_dictionaryDetailList.length<1)){this.m_cardsDetailList=TFGameData._cardsJSON;this.m_dictionaryDetailList={};var g;var h=this.m_cardsDetailList.length;for(g=0;g<h;g++){var e=this.m_cardsDetailList[g];this.m_dictionaryDetailList[e.id]=e}}},getCardDefinition:function(e){if(this.m_dictionaryDetailList!==undefined){return this.m_dictionaryDetailList[e]}return null},getCardType:function(g){var e=this.getCardDefinition(g);if(e===null){return null}return e.type},getCardDefinitionsArray:function(){var h,g,e,k;k=[];h=Object.keys(this.m_dictionaryDetailList);e=h.length;for(g=0;g<e;g++){k.push(this.m_dictionaryDetailList[h[g]])}return k},getCardDefinitionDictionary:function(){return this.m_dictionaryDetailList},getPlayerHistoryCardList:function(e){return this.m_playerCardHistory},isNew:function(g){var e=true;var k=Object.keys(TFUserData.cardsHistory);for(var h in TFUserData.cardsHistory){if(Object.keys(TFUserData.cardsHistory[h])==g){e=false;break}}return e},_syncPlayerCardListCallback:function(e,g,h){console.log("TFCardsManager._syncPlayerCardListCallback called. error=%s, data=%s",JSON.stringify(g),JSON.stringify(h));if(g){console.log("TFCardsManager._syncPlayerCardListCallback Error: %s",JSON.stringify(g));TFUtils.showErrorMessages(h);e&&e(false,null);return}if(!h){console.log("TFCardsManager._syncPlayerCardListCallback Error. No data received! data=%s",JSON.stringify(h));e&&e(false,null);return}this.m_playerCardList=h.cards;e&&e(true,this.m_playerCardList.cards)},syncPlayerCardList:function(e,g){console.log("TFCardsManager.syncPlayerCardList called.");Server.getAllUserCards(this._syncPlayerCardListCallback.bind(this,e))},initWithData:function(){this.m_playerCardHistory=TFUserData.cards;console.log("TFCardsManager.loaded with data. "+JSON.stringify(this.m_playerCardHistory))},getNumCards:function(){return this.m_playerCardHistory.length},getListOfCards:function(){return this.m_playerCardHistory},getPlayerCardList:function(g,e){console.log("TFCardsManager.getPlayerCardList called. sortBy=%s",JSON.stringify(g));if(e==undefined){e=this.m_playerCardList.clone()}else{e=e.clone()}if(g!=undefined&&e&&e.length>1){console.log("TFCardsManager.getPlayerCardList Sorting data. sortBy=%s",JSON.stringify(g));e.compareValue=function(k){var h=TFCardsManager.getCardDefinition(k.definitionId);if(h){return h[g.value]}else{console.log("TFCardsManager.getPlayerCardList.compareValue Error, card not found! definitionId=%d",k.definitionId);return this.DEFAULT_SORT_VALUE}};e.inverted=g.invert;quickSort(e)}return e},getPlayerCardById:function(h){console.log("TFCardsManager.getPlayerCardById called. id=%d",h);var g,e;e=null;for(g=0;g<this.m_playerCardList.length;g++){e=this.m_playerCardList[g];if(e.id==h){break}}return e},getPlayerCardDictionary:function(h,n,l){console.log("TFCardsManager.getPlayerCardDictionary called. dictionaryKey=%s, sortBy=%s",JSON.stringify(h),JSON.stringify(n));var o=this.getPlayerCardList(n,l);if(o){var m,e,k,g;m={};e=o.length;for(k=0;k<e;k++){g=o[k];m[g[h]]=g}var p={list:o,dictionary:m};return p}return null},getSortOptions:function(){return this.m_sortOptions.clone()},getRarityOptions:function(){return this.m_rarityOptions.clone()},loadCardImage:function(l,k,e){var g=this.getCardDefinition(l);var h=g.id+"_"+k+".jpg";console.log("TFCardsManager.loadCardImage imageURL=%s.",h);var m=function(n){e(n)}.bind(this,h);ResourceManager.preLoadResource(h,m)},loadSpecialCardImages:function(q,r,m){var p=3;var o=["","",""];var e=function(u,s){console.log("TFCardsManager.loadSpecialCardImages.onImageLoaded called: "+u+", pos: "+s);p--;o[s]=u;if(p>0){return}console.log("TFCardsManager.loadSpecialCardImages.onImageLoaded ready");for(var t=0;t<o.length;++t){if(o[t]==null){m(null);return}}m(o)};var k=this.getCardDefinition(q);if(k.rarity!=RARITY.superRare){m(o);return}var g=function(t,s){e(t,s)};var n=k.id+"_"+r+".jpg";var l=k.id+"_1_"+r+".jpg";var h=k.id+"_2_"+r+".jpg";console.log("TFCardsManager.loadSpecialCardImages imageURL1=%s.",n);console.log("TFCardsManager.loadSpecialCardImages imageURL2=%s.",l);console.log("TFCardsManager.loadSpecialCardImages imageURL3=%s.",h);ResourceManager.preLoadResource(n,g.bind(this,n,0),g.bind(this,null,0));ResourceManager.preLoadResource(l,g.bind(this,l,1),g.bind(this,null,1));ResourceManager.preLoadResource(h,g.bind(this,h,2),g.bind(this,null,2))},getAreaOfInterestSquare:function(h){var g=this.getCardDefinition(h);var k=g.offset;var e={_x:0.1,_y:0.2,_width:0.9,_height:0.8};return e},getAreaOfInterestWide:function(h){var g=this.getCardDefinition(h);var k=g.offset;var e={_x:0,_y:(0.15)};return e},updatePlayerCard:function(k,h){console.log("TFCardsManager.updatePlayerCard: "+k);for(var g=this.m_playerCardList.length-1;g>=0;--g){if(this.m_playerCardList[g].id==k){for(var e in h){this.m_playerCardList[g][e]=h[e]}}}},addPlayerCard:function(e){this.m_playerCardList.push(e);var g=e.definitionId;this.validateCardHistory(g);console.log("GashaManager.addPlayerCard m_playerCardList: "+JSON.stringify(this.m_playerCardList))},removePlayerCards:function(g){console.log("TFCardsManager.removePlayerCards: "+JSON.stringify(g));for(var e=this.m_playerCardList.length-1;e>=0;--e){if(g.indexOf(this.m_playerCardList[e].id)!=-1){this.m_playerCardList.splice(e,1)}}},getFilteredLimboCards:function(g){var e,h,m,o,n,k;e=TFUserData.getCardsInLimbo();h=[];if(!g||Object.keys(g)===0){return e}var p=e.length;for(m=0;m<p;m++){o=e[m];k=0;for(var l in g){if(o[l]!==undefined){if(o[l]==g[l]){k++;continue}}else{n=this.getCardDefinition(o.definitionId);if(n[l]!==undefined){if(n[l]==g[l]){k++}}}}if(k==Object.keys(g).length){h.push(o)}}return h},getFilteredPlayerCards:function(g){var e,h,m,o,n,k;e=TFUserData.getCards();h=[];if(!g||Object.keys(g)===0){return e}var p=e.length;for(m=0;m<p;m++){o=e[m];k=0;for(var l in g){if(o[l]!==undefined){if(o[l]==g[l]){k++;continue}}else{n=this.getCardDefinition(o.definitionId);if(n[l]!==undefined){if(n[l]==g[l]){k++}}}}if(k==Object.keys(g).length){h.push(o)}}return h},getFilteredDefinitionsCards:function(m){var e,h,k,l,n;e=this.m_cardsDetailList.clone();h=[];if(!m||Object.keys(m)===0){return e}for(k=0;k<e.length;k++){l=e[k];n=0;for(var g in m){if(l[g]!==undefined){if(l[g]==m[g]){n++}}}if(n==Object.keys(m).length){h.push(l)}}return h},getFilteredCards:function(l,g){var e,m,k;if(g){e=this.getCardDefinitionsArray()}else{e=this.m_playerCardList.clone()}if(!l||Object.keys(l)===0){return e}for(var h in l){for(k=e.length-1;k>=0;--k){if(g){m=e[k].id}else{m=e[k].definitionId}cardInfo=this.getCardDefinition(m);if(!cardInfo){}if(cardInfo[h]!==undefined){if(!(cardInfo[h]==l[h])){e.splice(k,1)}}else{if(e[k][h]!==undefined){if(!(e[k][h]==l[h])){e.splice(k,1)}}else{e.splice(k,1)}}}}return e},getFilteredCards_Advanced:function(m){var e,l,h,k,n,g;e=this.m_playerCardList.clone();for(l=0;l<m.length;++l){h=m[l].parameter;g=m[l].operator;for(k=e.length-1;k>=0;--k){n=e[k].id;cardInfo=this.getCardDefinition(n);switch(g){case"<":if(cardInfo[h]!=undefined){if(!(cardInfo[h]<m[h])){e.splice(l,1)}}else{if(e[l][h]!=undefined){if(!(e[l][h]<m[h])){e.splice(l,1)}}else{e.splice(l,1)}}break;case"<=":if(cardInfo[h]!=undefined){if(!(cardInfo[h]<=m[h])){e.splice(l,1)}}else{if(e[l][h]!=undefined){if(!(e[l][h]<=m[h])){e.splice(l,1)}}else{e.splice(l,1)}}break;case"==":if(cardInfo[h]!=undefined){if(!(cardInfo[h]==m[h])){e.splice(l,1)}}else{if(e[l][h]!=undefined){if(!(e[l][h]==m[h])){e.splice(l,1)}}else{e.splice(l,1)}}break;case">=":if(cardInfo[h]!=undefined){if(!(cardInfo[h]>=m[h])){e.splice(l,1)}}else{if(e[l][h]!=undefined){if(!(e[l][h]>=m[h])){e.splice(l,1)}}else{e.splice(l,1)}}break;case">":if(cardInfo[h]!=undefined){if(!(cardInfo[h]>m[h])){e.splice(l,1)}}else{if(e[l][h]!=undefined){if(!(e[l][h]>m[h])){e.splice(l,1)}}else{e.splice(l,1)}}break}}}return e},getCardTypes:function(){return[GEAR,PILOT]},getFusionRecommendedCard:function(e){var g=2;var h;var l=this.m_playerCardList.length;for(h=0;h<l;h++){var k=this.m_playerCardList[h];var m=this.getCardDefinition(k.definitionId);if(m.type==e){return k.id}}console.log("TFCardsManager.getFusionRecommendedCard cardType=%s, cardInstanceId=%d",e,g);return g},setFusionBaseCard:function(e){this.m_fusionBaseCard=e;return true},setFusionMaterialCards:function(e){this.m_fusionMaterialCards=e;return true},setFusionItemNumber:function(e){if(this.m_fusionItemNumber<=this.m_fusionItemMaxNumber){this.m_fusionItemNumber=e;return true}return false},removeFusionMaterialCard:function(g){var e=this.m_fusionMaterialCards.indexOf(g);if(e!=-1){this.m_fusionMaterialCards.splice(e,1);return true}return false},getFusionBaseCard:function(){return this.m_fusionBaseCard},getFusionMaterialCards:function(){return this.m_fusionMaterialCards.clone()},getMaxMaterialCardsNumber:function(){return this.m_maxMaterialCardsNumber},getFusionItemNumber:function(){return this.m_fusionItemNumber},getFusionItemMaxNumber:function(){return this.m_fusionItemMaxNumber},getFusionItemId:function(){return this.m_fusionItemId},clearFusion:function(){console.log("CardFusionBaseSelection.clearFusion called.");this.m_fusionMaterialCards.length=0;this.m_fusionMaterialCards=[];this.m_fusionBaseCard=null;this.m_fusionItemNumber=0},_getFusionCostById:function(l){var k=this.getCardDefinition(l.definitionId);var h=0;var g=0;if(k.type==1){h=k.statusMax.status1+k.statusMax.status2+k.statusMax.status3;g=h*0.15}else{if(k.type==2){var e=[480,720,960,1440,1920];var m=this.getCardLevel(l);g=m*e[k.rarity-1]}}g=Math.floor(g/10)*10;return g},getFusionCost:function(e){var n=0;if(!e){if(this.m_fusionMaterialCards!=undefined){NgLogD("*****************************defnID==="+this.m_fusionBaseCard.definitionId);var h=this.getCardDefinition(this.m_fusionBaseCard.definitionId);var g;var l=this.m_fusionMaterialCards.length;var m=null;if(h.type==1||h.type==2){for(g=0;g<l;g++){n=n+this._getFusionCostById(this.m_fusionMaterialCards[g])}}}}else{var k=ItemManager.getItemDefinition(this.m_fusionItemId);n=k.evolveCost*this.m_fusionItemNumber}return n},getXpPercentage:function(m){var g=this.getCardDefinition(m.definitionId);if(!m.xp){if(m.usercard&&(m.usercard.xp||m.usercard.xp==0)){m.xp=m.usercard.xp}}var n=this.getCardLevel(m);if(n==g.maxLevel){return 1}var h=this._getXPForLevel(n,g.type);var l=this._getXPForLevel((n+1),g.type);var k=m.xp-h;var e=k/(l-h);return e},isMaxedOut:function(g){var e=false;if(this.getXpPercentage(g)==1){e=true}return e},_getXPForLevel:function(g,e){if(e==TFGameData.CARD_TYPE.TRANSFORMER){return a.getTrasformerXPFromLevel(g)}else{if(e==TFGameData.CARD_TYPE.WEAPON){return a.getWeaponXPFromLevel(g)}}return -1},getCardLevel:function(h){var e=this.getCardDefinition(h.definitionId);var g=h.xp;g=g?g:0;var k=1;if(e.type==TFGameData.CARD_TYPE.TRANSFORMER){k=a.getTrasformerLevelFromXP(g)}else{if(e.type==TFGameData.CARD_TYPE.WEAPON){k=a.getWeaponLevelFromXP(g)}}if(k>e.maxLevel){k=e.maxLevel}return k},getTransformerClass:function(e){switch(e){case 1:return"Assault";case 2:return"Command";case 3:return"Infiltration";case 4:return"Spec-Ops"}},getCardStatus_with_Definition_XP:function(e,h){var g={definitionId:e,xp:h};return this.getCardStatus(g)},getCardStatus:function(k){var l=TFUtils.GetCloneOfObject(k);l.xp=l.xp?l.xp:0;var g=this.getCardDefinition(l.definitionId);var m=this.getCardLevel(l);var e=a.getStatusForLevel(g,m);if(l.bonus){e.status1+=l.bonus.status1;e.status2+=l.bonus.status2;e.status3+=l.bonus.status3}var h=d.cardBonusInRunningEvent(l.definitionId);if(h){if(h.hpBonus){e.status1*=h.hpBonus/100}if(h.attackBonus){e.status2*=h.attackBonus/100}if(h.defenseBonus){e.status3*=h.defenseBonus/100}}return e},getSkillsFromUnit:function(h,g){var e=this.getActivatedSkillsFromUnit(h,g);return e.bonuses},getActivatedSkillsFromUnit:function(l,h){var n=this.getCardDefinition(h);var g=this.getCardDefinition(l);var m={faction:false,speciality:false,_class:false,specific:false};var e=[];var k=n.bonuses;if(g.factionId==n.factionId){e.push({status1:k.faction,status2:k.faction,status3:k.faction});m.faction=true}if(g.speciality==n.speciality){e.push({status1:k.speciality,status2:k.speciality,status3:k.speciality});m.speciality=true}if(g.classId==n.affinity[0]||g.classId==n.affinity[1]){e.push({status1:k.affinity,status2:k.affinity,status3:k.affinity});m._class=true}if(n.tfLink.indexOf(g.id)>-1){e.push({status1:k.perfect,status2:k.perfect,status3:k.perfect});m.specific=true}return{bonuses:e,active:m,factionId:g.factionId,transforming:g.transformable,abilities:n.abilities}},getUnitStatus_with_Definition_XP:function(l,h,g,m){var n=this.getCardStatus_with_Definition_XP(h,m);var k=this.getCardStatus_with_Definition_XP(l,g);var e=this._calculateUnitStatus(k,n);return e},getUnitStatus:function(k,g){var l=this.getCardStatus(g);var h=this.getCardStatus(k);var e=a.getUnitStatus(l,h);return e},getUnitStatusWithSkill_with_Definition_XP:function(k,g,e,l){var m=this.getCardStatus_with_Definition_XP(g,l);var h=this.getCardStatus_with_Definition_XP(k,e);return this._calculateUnitStatusWithSkill(k,g,h,m)},getUnitStatusWithSkill:function(k,g){var l=this.getWeaponActivatedStatus(k,g);var h=this.getCardStatus(k);var e=a.getUnitParams(h,l);return e},getWeaponActivatedStatus:function(k,g){var l=this.getCardStatus(g);var h=this.getCardStatus(k);var e=this.getSkillsFromUnit(k.definitionId,g.definitionId);return a.getActivatedParams(l,e)},getUnitPower:function(m,k,g,e){var n=this.getCardStatus(k);var l=this.getCardStatus(m);var h=this.getSkillsFromUnit(m.definitionId,k.definitionId);var o=a.getActivatedParams(n,h);return a.getHpAttack(l,o,g,e)},getUnitPowerWithId:function(l,g,h,e){var k=this.getPlayerCardById(g);var m=this.getPlayerCardById(l);return this.getUnitPower(m,k,h,e)},getCardSellingPrice:function(g){var e=this.getCardDefinition(g.definitionId);return e.initialSellingPrice},getCardMaxSellingPrice:function(e){return e.initialSellingPrice},getCardName:function(e){if(this.m_dictionaryDetailList!==undefined){return this.m_dictionaryDetailList[e].name}return null},getCountFromHistory:function(h){var l=0;if(h===undefined){l=TFUserData.cardsHistory.length}else{var e;for(var g in TFUserData.cardsHistory){var k=TFUserData.cardsHistory[g];e=this.m_dictionaryDetailList[(Object.keys(k)[0])];if(e.type==h){l++}}}console.log("THE COUNT IS: "+l);return l},validateCardHistory:function(e){if(this.isNew){TFUserData.cardsHistory.push({cardDefId:Server.getServerTime()})}},getRandomPlayerCard:function(g){var k=TFCardsManager.getFilteredPlayerCards({type:g});var h=Math.floor(Math.random()*k.length);var e=k[h].definitionId;console.log("GashaManager.getRandomPlayerCard result: "+e);return e},getAllCards:function(){return TFGameData._cardsJSON},getHistoryCards:function(){return TFUserData.cardsHistory},getAllCardsClon:function(){return JSON.parse(JSON.stringify(TFGameData._cardsJSON))},getHistoryCardsClon:function(){return JSON.parse(JSON.stringify(TFUserData.cardsHistory))},getPlayerTransformerCards:function(){var e=this.getFilteredPlayerCards({type:TFGameData.CARD_TYPE.TRANSFORMER});return e},getPlayerWeaponCards:function(){var e=this.getFilteredPlayerCards({type:TFGameData.CARD_TYPE.WEAPON});return e},getPlayerTransformerCardsClon:function(){var e=this.getFilteredPlayerCards({type:TFGameData.CARD_TYPE.TRANSFORMER});return JSON.parse(JSON.stringify(e))},getPlayerWeaponCardsClon:function(){var e=this.getFilteredPlayerCards({type:TFGameData.CARD_TYPE.WEAPON});return JSON.parse(JSON.stringify(e))},getTransformerCardsIdFromDeck:function(l){var h=TFUserData.decks[l];var n=[];if(!h){return n}for(var e in h){var g=h[e];for(var k in g){var m=g[k].gear;n.push(m)}}return n},getWeaponCardsIdFromDeck:function(l){var h=TFUserData.decks[l];var m=[];if(!h){return m}for(var e in h){var g=h[e];for(var k in g){var n=g[k].pilot;m.push(n)}}return m},getPlayerTransformerCardsId:function(){var g=[];var k=this.getFilteredPlayerCards({type:TFGameData.CARD_TYPE.TRANSFORMER});for(var e in k){var h=k[e].id;g.push(h)}return g},getPlayerWeaponCardsId:function(){var g=[];var k=this.getFilteredPlayerCards({type:TFGameData.CARD_TYPE.WEAPON});for(var e in k){var h=k[e].id;g.push(h)}return g},getComplementTransformersCardList:function(){var e=this.getPlayerTransformerCardsId();var g=this.getTransformerCardsIdFromDeck();for(var m in g){var l=g[m];for(var k in e){var h=e[k];if(l==h){index=e.indexOf(h);if(index!=-1){e.splice(index,1)}break}}}return e},changeCardInDeck:function(q,e,g,o,r){if(g!=TFGameData.CARD_TYPE.TRANSFORMER&&g!=TFGameData.CARD_TYPE.WEAPON){return}if(o!=TFGameData.STAT_TYPE.MELEE&&o!=TFGameData.STAT_TYPE.RANGE&&o!=TFGameData.STAT_TYPE.SPEED){return}if(r!=TFGameData.DECK_RANK.COMMANDER&&r!=TFGameData.DECK_RANK.LEFT_WING&&r!=TFGameData.DECK_RANK.RIGHT_WING){return}var n=null;var m=null;var p=null;var u=null;if(o==TFGameData.STAT_TYPE.MELEE){n=q.status1;p="status1"}else{if(o==TFGameData.STAT_TYPE.RANGE){n=q.status2;p="status2"}else{n=q.status3;p="status3"}}if(r==TFGameData.DECK_RANK.COMMANDER){m=n[0];u=0}else{if(r==TFGameData.DECK_RANK.LEFT_WING){m=n[1];u=1}else{m=n[2];u=2}}var t=null;if(g==TFGameData.CARD_TYPE.TRANSFORMER){t=m.gear;m.gear=e}else{t=m.pilot;m.pilot=e}for(var l in q){var s=q[l];for(var h in s){var k=s[h];if(p!=l||u!=h){if(g==TFGameData.CARD_TYPE.TRANSFORMER&&k.gear==e){k.gear=t}else{if(g==TFGameData.CARD_TYPE.WEAPON&&k.pilot==e){k.pilot=t}}}}}return q},checkEvolutionCard:function(o){var n;var m=this.getCardDefinition(o);if(m.tfMatch&&m.tfMatch.length>0){var h=this.getCardDefinition(m.tfMatch[0]);if(h.evolution&&h.evolution.length>0){for(var g in h.evolution){var l=h.evolution[g];for(var e in l){if(l[e]!=o){n=TFCardsManager.getCardDefinition(l[e]);n._bonus=h.tfBonus;break}}}}}return n},getBonusFromUnit:function(l,w){var g=this.getCardDefinition(w);var r=this.getCardDefinition(l);var s;var e;var B;var v;var o;var q;var p;var h;var t;if(r){s=r.maxLevelBonus;e=r.tfBonus;if(!e){p=this.checkEvolutionCard(l);e=p._bonus}t=r.transformable}if(g){B=g.bonuses.faction;v=g.bonuses.affinity;o=g.bonuses.speciality;q=(g.bonuses.perfect==0)?undefined:g.bonuses.perfect;h=[];var x=Object.keys(g.abilities);for(var y in x){var A=x[y];var C=Localization.getString(x[y]);var z=Localization.getString(x[y]+"_description");var u=g.abilities[A];if(C&&u){var m="initial";if(A.substr(0,1)=="s"){m="battle"}h.push({type:m,name:C,value:u,desc:z})}}}var n={maxLevel:s,changeForm:e,faction:B,_class:v,speciality:o,character:q,abilities:h,transforming:t};return n},isInLimbo:function(e){return !this.isInBase(e)},isInBase:function(e){return(e.xp!==undefined)},getOverflowIndex:function(e){if(TFUserData.cardsLimbo){for(var g=0;g<TFUserData.cardsLimbo.length;g++){if(e.id==TFUserData.cardsLimbo[g].id){return g+1}}}return null}})}};__ngs._s={_c:null,_d:function(){var d={exports:{}};var c=d.exports;this._c=d;var b=__ngs.r_(__ngs._3y).PopUpController;var h=__ngs.r_(__ngs._x).TFManifestManager;var a=__ngs.r_(__ngs._4a).TFImageManager;var g=__ngs.r_(__ngs._o).TFSceneDirector;function e(){return(function(){return this}).call(null)}c.TFUtils=Core.MessageListener.singleton({classname:"TFUtils",DEBUG_REDIRECTED_TOUCHES:false,initialize:function(){this._renderTargets=[];this._movies=[];this._totalTime=0;Core.UpdateEmitter.addListener(this,this._onUpdate.bind(this));var k=e();this._originalLogException=k.NgLogException;k.NgLogException=this._logException.bind(this)},_logException:function(l){this._originalLogException(l,true);if(!l._isAssert){var n=__ngs.r_(__ngs._3x).Social;if(n.Common.Config.getServerEnvironment()=="sandbox"){this.showAlert("EXCEPTION",l.message+" from line "+l.line,"OK");console.log("EXCEPTION: "+l.message+" from line "+l.line)}if(l.stack){var m=l.stack.replace(/(\/(\w)+)+\/.ngmoco\/[0-9a-f]+\//g,"/mnt/sdcard/.ngmoco/");m=m.replace(/\n/g,"");var k=Core.SHA1.hex_sha1(m);TFAnalytics.reportGameEvent("ERR",{shasum:k,err:m})}}},openMobageUserProfile:function(l){console.log("Trying to open profile of id: "+l);var k=__ngs.r_(__ngs._3x).Social;k.Common.Service.openUserProfile(l,function(m){if(m){console.log("Error while trying to open User Profile screen: "+JSON.stringify(m));switch(m.errorCode){case 401:break;case 404:break;default:break}}else{console.log("Opened the User Profile screen :"+l)}})},downloadAvatars:function(n,k,l){var m=__ngs.r_(__ngs._3x).Social;m.Common.People.getUsers(n,["thumbnailUrl"],function(r,u){if(r){console.log("Could not fetch avatar links. Error:"+JSON.stringify(r))}else{for(var s=0;s<u.length;s++){if(u[s]){console.log("User "+JSON.stringify(u[s]));var o=u[s].nickname;var q=u[s].thumbnailUrl;var p;if(q.indexOf("graph.facebook.com")>0){p="./Content/Avatars/"+o+".jpg"}else{p="./Content/Avatars/"+o+".png"}l.imageFile=p;l.playerButton.id=u[s].id;var t=new Network.DownloadFile();t.start(p,"GET",q,[{item:"From",content:"user@example.com"}],function(v,x,w){console.log("Downloaded "+p+". Status code: "+v+", MD5: "+x);console.log("Response headers: "+JSON.stringify(w));if(k){k(l)}})}}}}.bind(this))},addMovie:function(k){this._movies.push(k)},addRenderTarget:function(k){this._renderTargets.push(k)},forceReload:function(){this._forceReload=true;this.showReloadDataDialog()},reload:function(){if(this._reloading){return}this._reloading=true;for(var l in this._renderTargets){try{if(this._renderTargets[l]&&this._renderTargets[l].destroy){this._renderTargets[l].destroy()}}catch(m){}}for(var k in this._movies){try{if(this._movies[k]&&this._movies[k]._cleanup){this._movies[k]._cleanup()}}catch(m){}}Core.LocalGameList.runUpdatedGame(Core.Capabilities.getUrl())},_onUpdate:function(l){var k=l;this._ticks++;this._totalTime+=k;if(this._totalTime>=1000){var m=Math.floor(this._ticks*1000/this._totalTime);if(this._fpsText){this._fpsText.setText("FPS:"+m)}this._ticks=0;this._totalTime=0}if(this._reloadDialog&&this._forceReload===true){this._reloadDialog.timeLeft-=l;this._updateReloadDialog()}},showFPS:function(){if(this._fpsText){return}var k=new GL2.Text();k.setColor(1,0,0);k.setDepth(9999);k.setAnchor(-1,-1);GL2.Root.addChild(k);this._fpsText=k},hideFPS:function(){GL2.Root.removeChild(this._fpsText);this._fpsText.destroy();this._fpsText=undefined},showAlert:function(n,l,k){var m=new UI.AlertDialog();if(n){m.setTitle(n)}if(l){m.setText(l)}if(k){m.setChoices([k])}m.setOnChoice((function(){this.hide();this.destroy()}).bind(m));m.show()},createToast:function(l){var k=new UI.Toast();k.setText(l);k.setOnDisappear(function(){this.destroy()}.bind(k));k.show()},getImagePath:function(k){return("./Content/Images8x/"+k)},getCardImagePath:function(l){var k=__ngs.r_(__ngs._r).TFCardsManager;cardDef=k.getCardDefinition(l);if(!cardDef){return"Content/Images8x/misc/1pxclear.png"}if(cardDef.transformable){return("./Content/Images8x/cardthumbnails/"+cardDef.evolution[0][0]+"/thumbnail.jpg")}else{return("./Content/Images8x/cardthumbnails/"+l+"/thumbnail.jpg")}},getCardFullImagePath:function(l){var k=__ngs.r_(__ngs._r).TFCardsManager;cardDef=k.getCardDefinition(l);if(cardDef.transformable){return("./Content/Images8x/flatcards/"+cardDef.evolution[0][0]+"/image.jpg")}else{return("./Content/Images8x/flatcards/"+l+"/image.jpg")}},GetCloneOfObject:function(k){var l={};if(typeof(k)=="object"){for(var m in k){if((typeof(k[m])=="object")&&(k[m] instanceof Array)){l[m]=this.GetCloneOfArray(k[m])}else{if(typeof(k[m])=="object"){l[m]=this.GetCloneOfObject(k[m])}else{l[m]=k[m]}}}}return l},setRemoteImageOnSprite:function(l,m,k){this.changeImageOnSprite(l,"Content/Images8x/misc/1pxclear.png");if(!h._dynamicManifestData[a.getCorrectImagePath(m)]){console.log("TFUtils > setRemoteImageOnSprite > "+a.getCorrectImagePath(m)+" not found on manifest, trying without downloading anything.");if(m.indexOf("/cards/")>=0){m=m.replace("/cards/","/local_cards/");console.log("TFUtils > setRemoteImageOnSprite > local version of card found!")}this.changeImageOnSprite(l,m);if(k){k()}return}if(l){l.__spriteRequested=m}h.downloadAsset(a.getCorrectImagePath(m),function(n,o){console.log("TFUtils > setRemoteImageOnSprite > callback called, setting sprite : "+o);if(a.getCorrectImagePath(n.__spriteRequested)==o){this.changeImageOnSprite(n,o)}if(k){k()}}.bind(this,l))},changeImageOnSprite:function(n,o,m,k,l){if(!n){return}if(!n._animation||(m&&k&&l)){console.log("TFUtils > changeImageOnSprite > sprite without animation, using setImage without params.");if(!(m&&k&&l)){n.setImage(o)}else{n.setImage(o,m,k,l)}return}try{var q=n._animation.getFrame(0);if(Math.abs(q.getUVs().getMinX())<=1&&Math.abs(q.getUVs().getMaxX())<=1&&Math.abs(q.getUVs().getMinY())<=1&&Math.abs(q.getUVs().getMaxY())<=1){console.log("TFUtils > changeImageOnSprite > imageName : "+o);n.setImage(o,q.getSize(),q.getAnchor(),q.getUVs())}else{n.setRepeatableImage(o,q.getSize(),q.getAnchor(),q.getUVs())}}catch(p){throw Error("Could not find sprite image at path:\n"+o)}},GetCloneOfArray:function(k){var m=[];if(!k){return m}for(var l=0;l<k.length;l++){if(typeof(k[l])=="object"){m.push(this.GetCloneOfObject(k[l]))}else{m.push(k[l])}}return m},getRarityName:function(k){var l={1:"Common",2:"UnCommon",3:"Rare",4:"Super Rare"};if(l[k]){return l[k]}},timeToHuman:function(k,t){if(t===undefined){t=false}var r="";var o=86400;var m=3600;var u=60;var n=k%o;var s=0;if(n!=k){s=Math.floor(k/o);k-=(o*s)}if(s>0){r+=s+Localization.getString("ui_days_abbrev")+" "}n=k%m;var p="00";if(n!=k){p=Math.floor(k/m);k-=(m*p)}if(p!="00"){r+=p+Localization.getString("ui_hours_abbrev")+" "}else{if(r!=""){r+="0"+Localization.getString("ui_hours_abbrev")+" "}}n%=u;var l="00";if(n!=k){l=Math.floor(k/u);k-=(u*l)}if(l!="00"){r+=l+Localization.getString("ui_minutes_abbrev")+" "}else{if(r!=""){r+="0"+Localization.getString("ui_minutes_abbrev")+" "}}if(t){var q=Math.floor(k);r+=q+Localization.getString("ui_seconds_abbrev")+" "}return r},timeToHumanShort:function(k){var q="";var o=86400;var m=3600;var s=60;var n=k%o;var r=0;if(n!=k){r=Math.floor(k/o);k-=(o*r)}if(r>0){q+=r+Localization.getString("ui_days_abbrev")+" "}n=k%m;var p="00";if(n!=k){p=Math.floor(k/m);k-=(m*p)}if(p!="00"){q+=p+":"}n%=s;var l="00";if(n!=k){l=Math.floor(k/s);k-=(s*l)}if(l!="00"){q+=l}return q},timeToHumanLarge:function(k){var q=" ";var o=86400;var m=3600;var s=60;var n=k%o;var r=0;if(n!=k){r=Math.floor(k/o);k-=(o*r)}if(r>0){q+=r+" ";if(r>1){q+=Core.Localization.getString("ui_days")}else{q+=Core.Localization.getString("ui_day")}q+=" "}n=k%m;var p="00";if(n!=k){p=Math.floor(k/m);k-=(m*p)}if(p!="00"){q+=p+" ";if(p>1){q+=Core.Localization.getString("ui_hours")}else{q+=Core.Localization.getString("ui_hour")}q+=" "}n%=s;var l="00";if(n!=k){l=Math.floor(k/s);k-=(s*l)}if(l!="00"){q+=l+" ";if(l>1){q+=Core.Localization.getString("ui_minutes")}else{q+=Core.Localization.getString("ui_minute")}q+=" ";return q}},timeToHumanTwoElement:function(k){var q="";var n=86400;var m=3600;var s=60;if(k<m){var l=Math.floor(k/s);var p=Math.floor(k-l*s);q+=l+Localization.getString("ui_minutes_abbrev")+" "+p+Localization.getString("ui_seconds_abbrev")}else{if(k<n){var o=Math.floor(k/m);var l=Math.floor((k-o*m)/s);q+=o+Localization.getString("ui_hours_abbrev")+" "+l+Localization.getString("ui_minutes_abbrev")}else{var r=Math.floor(k/n);var o=Math.floor((k-r*n)/m);q+=r+Localization.getString("ui_days_abbrev")+" "+o+Localization.getString("ui_hours_abbrev")}}return q},_updateReloadDialog:function(){if(this._reloadDialog.timeLeft<0){this._reloadDialog.timeLeft=0;this.reload()}var k=this._reloadDialog.timeLeft!=0?Math.floor(this._reloadDialog.timeLeft/1000):"";this._reloadDialog.setText(Core.Localization.getString("ui_getdata")+"\n\n"+Core.Localization.getString("ui_relaunching")+" "+k)},handleWrongBinary:function(){TFAnalytics.reportGameEvent("WRONG BINARY");var l,o,k,n;if(Core.Capabilities.getPlatformOS()=="Android"){if(TFGameData&&TFGameData._configJSON&&TFGameData._configJSON.androidGooglePlayUrl){l=TFGameData._configJSON.androidGooglePlayUrl}if(!l){l="market://details?id=com.mobage.ww.a926.Transformers_Android"}o=Core.Localization.getString("ui_headtogoogleplay");if(o=="ui_headtogoogleplay"){o="Download the newest update from Google Play"}k=Core.Localization.getString("ui_googleplay");if(k=="ui_googleplay"){k="Google Play"}}else{if(Core.Capabilities.getPlatformOS()=="iPhone OS"){if(TFGameData&&TFGameData._configJSON&&TFGameData._configJSON.iosAppStoreUrl){l=TFGameData._configJSON.iosAppStoreUrl}if(!l){l="http://phobos.apple.com/WebObjects/MZStore.woa/wa/viewSoftware?id=569744738"}o=Core.Localization.getString("ui_headtoappstore");if(o=="ui_headtoappstore"){o="Download the newest update from App Store"}k=Core.Localization.getString("ui_gotoappstore");if(k=="ui_gotoappstore"){k="App Store"}}}n=Core.Localization.getString("ui_newupdateavail");if(n=="ui_newupdateavail"){n="New Update Available"}var m=new UI.AlertDialog();m.setTitle(n);m.setText(o);m.setChoices([k]);m.setOnChoice((function(){Device.IPCEmitter.launch(l,function(p){console.log("wrongBinaryVersionMessage: Error launching URL: "+l)});Device.LifecycleEmitter.exitProcess()}).bind(m));m.show()},handleWrongConfigs:function(){this.forceReload()},showReloadDataDialog:function(){this._fullscreenView=new UI.View();this._fullscreenImage=new UI.Image();this._fullscreenView.setFrame(UI.Window.getFrame());this._fullscreenImage.setFrame(UI.Window.getFrame());this._fullscreenImage.setBackgroundColor("FF000000");this._fullscreenImage.setImage("Content/Images2x/UI/BG/bg_mission_planet.jpg");this._fullscreenImage.setImageFit(UI.Commands.FitMode.Stretch);this._fullscreenView.addChild(this._fullscreenImage);UI.Window.document.addChild(this._fullscreenView);this._reloadDialog=new UI.ProgressDialog();this._reloadDialog.setTitle(Core.Localization.getString("ui_beingupdated"));this._reloadDialog.timeLeft=5500;this._reloadDialog.show()},hideReloadDataDialog:function(){if(this._reloadDialog){this._reloadDialog.hide();this._reloadDialog.destroy();UI.Window.document.removeChild(this._fullscreenView);this._fullscreenView.destroy();this._fullscreenImage.destroy();this._fullscreenView=undefined;this._fullscreenImage=undefined;this._reloadDialog=undefined}},rateGame:function(){TFAnalytics.reportGameEvent("FEEDBACK");console.log("TFUtils.rateGame called");var k;if(Core.Capabilities.getPlatformOS()=="Android"){if(TFGameData&&TFGameData._configJSON&&TFGameData._configJSON.androidGooglePlayReviewUrl){k=TFGameData._configJSON.androidGooglePlayReviewUrl}if(!k){k="market://details?id=com.mobage.ww.a926.Transformers_Android"}}else{if(Core.Capabilities.getPlatformOS()=="iPhone OS"){if(TFGameData&&TFGameData._configJSON&&TFGameData._configJSON.iosAppStoreReviewUrl){k=TFGameData._configJSON.iosAppStoreReviewUrl}if(!k){k="https://userpub.itunes.apple.com/WebObjects/MZUserPublishing.woa/wa/addUserReview?id=569744738&type=Purple+Software"}}}if(k){console.log("TFUtils.rateGame: marketUrl "+k);Device.IPCEmitter.launch(k,function(l){console.log("RateGame: Device.IPCEmitter failed: "+JSON.stringify(l))})}},getArrowImage:function(){return"Content/Images8x/UI/17_tutorial/arrow.png"},showErrorMessages:function(n,k,l){var m={};m.text=Localization.getString(n);m.fusionCost="";m.buttons="one";if(l){m.okButtonText=l.okButtonText}if(k){m.cb=k}g._showDialog(new b(m))},showErrorMessagesWithChoice:function(n,k,l){var m={};m.text=Localization.getString(n);m.fusionCost="";if(l){m.cancelButtonText=l.cancelButtonText;m.okButtonText=l.okButtonText}if(k){m.cb=k}g._showDialog(new b(m))},removeJsonOffsets:function(l){for(var k in l){if(l[k].offsetX){l[k].x=l[k].x+l[k].offsetX}if(l[k].offsetY){l[k].y=l[k].y+l[k].offsetY}}},onDev:function(){return(Core.Capabilities.getGame()=="Transformers")?true:false},collectRaidBossRewards:function(m,l,k){console.log("TFUtils > collectRaidBossRewards > bossId="+m+", bossDefinition="+JSON.stringify(l));Server.getRaidBossRewards(m,this._receiveRaidBossRewards.bind(this,l,k))},_receiveRaidBossRewards:function(p,k,m,l){console.log("TFUtils > _receiveRaidBossRewards > bossDefinition="+JSON.stringify(p));g.enableGlobalTouches("TFUtils::_receiveRaidBossRewards");if(m){console.log("TFUtils > _receiveRaidBossRewards > error="+JSON.stringify(m));TFUtils.showErrorMessages(l);k(false);return}console.log("TFUtils > _receiveRaidBossRewards > response="+JSON.stringify(l));if(l){for(var n in l){if(l.hasOwnProperty(n)){console.log("   "+n+" : "+JSON.stringify(l[n]))}}var o={};o.destroyCB=this._checkForEventPointRewards.bind(this,l,p,k);o.rewardClasses=l.battleRewards;var q=__ngs.r_(__ngs._64).RBBossRewardsController;g._showDialog(new q(o,true))}else{k(false)}},_checkForEventPointRewards:function(q,o,k){console.log("TFUtils > _checkForEventPointRewards > data="+JSON.stringify(q));if(q&&q.eventPointRewards){var p;for(var m in q.eventPointRewards){var r=q.eventPointRewards[m];if(!p||(r.rewards[0].levelReceived<p)){p=r.rewards[0].levelReceived}}console.log("TFUtils > checkForEventPointRewards > next lowest rank="+p);var n={};if(o){n.eventPoints=o.eventPoints;n.eventPointsTotal=TFUserData.eventPoints+n.eventPoints;n.eventPointsNext=TFGameData.getPointsToNextReward(TFUserData.curEventId,n.eventPointsTotal)-n.eventPointsTotal}if(p){q.hadRewards=true;n.rewardClasses=[];for(var m=0;m<q.eventPointRewards.length;m++){if(q.eventPointRewards[m].rewards[0].levelReceived==p){n.rewardClasses.push(q.eventPointRewards[m]);q.eventPointRewards.splice(m,1);m--}}console.log("TFUtils > checkForEventPointRewards > rewardClasses="+JSON.stringify(n.rewardClasses));n.eventPointsLevel=TFGameData.getEventPointsForLevel(TFUserData.curEventId,p-1);n.destroyCB=this._checkForEventPointRewards.bind(this,q,o,k);var l=__ngs.r_(__ngs._65).RBEventPointRewardsController;g._showDialog(new l(n,true))}else{if(q.hadRewards){console.log("TFUtils > _checkForEventPointRewards > done showing awards");Server.getCurrentUser(this._receiveCurrentUser.bind(this,k))}else{console.log("TFUtils > _checkForEventPointRewards > no awards to show");n.destroyCB=Server.getCurrentUser.bind(Server,false,this._receiveCurrentUser.bind(this,k));var l=__ngs.r_(__ngs._65).RBEventPointRewardsController;g._showDialog(new l(n,true))}}}else{console.log("TFUtils > _checkForEventPointRewards > no data or data.eventPointRewards");Server.getCurrentUser(this._receiveCurrentUser.bind(this,k))}},_receiveCurrentUser:function(k,m,l){if(m){console.log("TFUtils > _receiveCurrentUser > error="+JSON.stringify(m));k(false);return}console.log("TFUtils > _receiveCurrentUser > response="+JSON.stringify(l));if(l){TFUserData.syncFrom(l);g.getTopHudViewController().update();k(true)}else{k(false)}},somethingWentWrongPopup:function(){var k={};k.text="ui_somethingwentwrong";k.textOffsetY=-80;k.buttons="one";k.fontSize=36;g._showDialog(new b(k))},dumpObject:function(n,l,k){k=k||"";k+="   ";for(var m in n){if(n.hasOwnProperty(m)){console.log(k+m+" : "+JSON.stringify(n[m]));if(l&&(typeof n[m]==="object")){this.dumpObject(n[m],l,k)}}}},inspect:function(l,k){if(k===undefined){k=1}var n="";var q="";for(var m=0;m<k;m++){q+="  "}for(var r in l){var o=typeof(l[r]);var s="";var p=true;if(o==="object"){s="\n"+inspect(l[r],k+1);p=false}else{if(o==="function"){s="function "+r+"()"}else{s=l[r]}}n+=q+r+": "+s;if(p){n+="\n"}}return n}})}};__ngs._t={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.SpriteFactoryCache=Core.Class.singleton({classname:"SpriteFactoryCache",initialize:function(){},getAnimation:function(h,e,c,d,g){e=(e instanceof Core.Size)?e:new Core.Size(e);c=(c instanceof Core.Point)?c:new Core.Point(c||[0,0]);d=(d instanceof Core.Rect)?d:new Core.Rect(d||[0,0,1,1]);var k=new GL2.Animation();k.setWrapMode(GL2.Animation.WrapMode.WrapUV);k.setFilteringEnabled(true&&g);k.pushFrame(new GL2.Animation.Frame(h,0,e,c,d));return k},getAnimationWithFrames:function(k,g,c,o,n,d,l){o=(o instanceof Core.Size)?o:new Core.Size(o);n=(n instanceof Core.Point)?n:new Core.Point(n||[0,0]);var m;if(!l||!(l[0] instanceof Core.Rect)){l=[];for(m=0;m<g;m++){l[m]=new Core.Rect([m/g,0,1/g,1])}}var h=new GL2.Animation();for(m=0;m<g;m++){var e=new GL2.Animation.Frame(k,c,o,n,l[m]);h.pushFrame(e)}h.setFilteringEnabled(true&&d);return h},getAnimationWithFramesMultiTexture:function(m,c,e,l){c=(c instanceof Core.Point)?c:new Core.Point(c||[0,0]);var g="";var h=new GL2.Animation();for(var d in l){g=l[d].imageurl;var k=new GL2.Animation.Frame(g,m,l[d].imagesize,c,l[d].uvs);h.pushFrame(k)}h.setFilteringEnabled(true&&e);return h},createSpriteWithCachedAnimation:function(k,g,c,e,h){var d=new GL2.Sprite();d.setImage(k,g,c,e);return d}})}};__ngs._u={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var a=__ngs.r_(__ngs._66).NotificationFactory;b.NotificationCenter=Core.Class.singleton({classname:"NotificationCenter",initialize:function(){this.m_notificationFactory=new a();this.m_notificationSets=[];for(var d in TFGameData.NOTIFICATION_SETS){this.m_notificationSets.push([])}this.cleanUpNotifications();this.m_remoteOperations=0},forceUpdate:function(d){this.remoteOperations(d)},remoteOperations:function(d){this.continueUpdating()},continueUpdating:function(d){this.m_remoteOperations++;if(this.m_remoteOperations==1){this.updateNotifications();if(d){d()}this.m_remoteOperations=0}},updateNotifications:function(){if(!TFGameData.isReady()||!TFSceneDirector.allClearFlag){return}console.log("NotificationCenter > updateNotifications ");this.cleanUpNotifications();this.retrieveNotifications()},retrieveNotifications:function(){console.log("NotificationCenter > retrieveNotifications");for(var h in a.NotificationTypes){var e=this.m_notificationFactory.getClass(a.NotificationTypes[h]);var d=e.getNotifications();for(var g=0;g<d.length;g++){if(!this.hasNotification(d[g])){if(d[g].isImportant()){this.m_notificationSets[e.getNotificationSet()].splice(0,0,d[g])}else{this.m_notificationSets[e.getNotificationSet()].push(d[g])}}else{d[g].destroy()}}}},cleanUpNotifications:function(){for(var e in TFGameData.NOTIFICATION_SETS){for(var d=0;d<this.m_notificationSets[TFGameData.NOTIFICATION_SETS[e]].length;++d){if(!this.m_notificationSets[TFGameData.NOTIFICATION_SETS[e]][d].isValid()){this.m_notificationSets[TFGameData.NOTIFICATION_SETS[e]][d].destroy();this.m_notificationSets[TFGameData.NOTIFICATION_SETS[e]].splice(d,1)}}}},getNotificationSet:function(g){var d=[];for(var e=0;e<this.m_notificationSets[g].length;++e){d.push(this.m_notificationSets[g][e])}return d},getTotalNotificationsNumber:function(){var d=0;for(var e=0;e<this.m_notificationSets.length;++e){d+=this.m_notificationSets[e].length}return d},getSetNotificationsNumber:function(d){return this.m_notificationSets[d].length},hasNotification:function(g){for(var e=0;e<this.m_notificationSets.length;++e){for(var d=0;d<this.m_notificationSets[e].length;++d){if(this.m_notificationSets[e][d].equalsTo(g)){return true}}}return false},releaseNotifications:function(){for(var e=0;e<this.m_notificationSets.length;++e){for(var d=0;d<this.m_notificationSets[e].length;++d){if(this.m_notificationSets[e][d].getParent()!=null){this.m_notificationSets[e][d].getParent().removeChild(this.m_notificationSets[e][d])}}}}})}};__ngs._v={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.TFNotificationsManager=Core.Class.singleton({classname:"TFNotificationsManager",COLLAPSE_KEY:{DEFAULT:"transformersLegends"},initialize:function(){console.log("TFNotificationsManager","initialize")},destroy:function(){console.log("TFNotificationsManager","destroy")},setupNotifications:function(){console.log("TFNotificationsManager > setupNotifications");if(!(TFGameData.isReady()&&Server.isLoggedIn())){console.log("TFNotificationsManager > setupNotifications > game not ready, skipping setup");return}Device.NotificationEmitter.cancelAllScheduled();this.setupGasha();this.setupFullBattleEnergy();this.setupFullExploreEnergy()},setupGasha:function(){if(!TFUserData.isFreeGashaReady()){var d=Server.getServerTime();var e;if(TFUserData.nextFreeGasha){e=(new Date(TFUserData.nextFreeGasha)).valueOf()}else{return}var c=(e-d)/1000;this.scheduleNotification({message:Localization.getString("ui_tfreadysb")},c)}},setupFullBattleEnergy:function(){if(TFGameData.isReady()){var c=TFGameData._configJSON.battleEnergyPeriod*60;var d=TFUserData.maxBattleEnergy-TFUserData.battleEnergy;if(d>0){this.scheduleNotification({message:Localization.getString("ui_battlecubesfull")},d*c);console.log("TFNotificationsManager > setupFullBattleEnergy > diff*rate : "+(d*c))}}else{setTimeout(this.setupFullBattleEnergy.bind(this),1000)}},setupFullExploreEnergy:function(){var c=TFGameData._configJSON.exploreEnergyPeriod*60;var d=TFUserData.maxExploreEnergy-TFUserData.exploreEnergy;if(d>0){this.scheduleNotification({message:Localization.getString("ui_energonfull")},d*c)}},scheduleNotification:function(g,c){console.log(this,"Setup notfication message: "+g.message+" Delay "+c+" Seconds");if(g===undefined){g={}}if(g.collapseKey===undefined){g.collapseKey=this.COLLAPSE_KEY.DEFAULT}if(g.style===undefined){g.style="normal"}if(g.iconUrl===undefined){g.iconUrl=""}if(g.sound===undefined){g.sound="default"}if(isNaN(c)){console.log("Delay in seconds is NaN");return}if(c<900){c=900}var e=(new Date()).getTime();var d=e/1000+c;Device.NotificationEmitter.scheduleLocal(g,d,function(h,k){if(h){console.log("TFNotificationsManager > scheduleNotification > Couldn't schedule the notification. Error: %s, code: %d",h.description,h.code)}else{console.log("TFNotificationsManager > scheduleNotification > Notification with message: %s, scheduled with systemId: %s at: %s",k.payload.message,k.id,d)}})},clearNotifications:function(){console.log("TFNotificationsManager > clearNotifications");Device.NotificationEmitter.getAllScheduled(function(c){console.log("TFNotificationsManager > clearNotifications > previously scheduled notifications : "+JSON.stringify(c))});Device.NotificationEmitter.cancelAllScheduled();Device.NotificationEmitter.getAllScheduled(function(c){console.log("TFNotificationsManager > clearNotifications > scheduled notifications : "+JSON.stringify(c))})}})}};__ngs._w={_c:null,_d:function(){var b={exports:{}};var a=b.exports;this._c=b;a.TFAnalytics=Core.MessageListener.singleton({classname:"TFAnalytics",initialize:function(){this.reporting=true},setReporting:function(c){this.reporting=c},reportTag:function(c){if(!this.reporting){return}console.log("[TFANALYTICS] reportTag",c);c=c.replace(/[^A-Za-z0-9]+/g,"");Core.Analytics._getPipe()._queueMessage({evcl:"TAG",evid:c})},reportGameEvent:function(c,h,d,g){if(!this.reporting){return}if(!h){h={}}console.log("[TFANALYTICS] reportGameEvent",c,JSON.stringify(h));var e={};if(!g){e=this._formatPlayerState(d)}Core.Analytics.reportGameEvent(c,h,e)},reportPlayerStateChange:function(c,g,d){if(!this.reporting){return}if(!g){console.log("[TFANALYTICS] reportPlayerStateChange. Invalid deltas passed.");return}console.log("[TFANALYTICS] reportPlayerStateChange",c);var e=this._formatPlayerState(d,g);Core.Analytics.reportPlayerStateChange(c,g,e)},reportSocialEvent:function(c,d,e){if(!this.reporting){return}console.log("[TFANALYTICS] reportSocialEvent",c);if(!e){e={}}Core.Analytics.reportSocialEvent(c,d,e)},reportFunnelStage:function(c,d,e){if(!this.reporting){return}console.log("[TFANALYTICS] reportFunnelStage",c,d,e);if(e){Core.Analytics.reportFunnelStage(c,d,e)}else{Core.Analytics.reportFunnelStage(c,d)}},reportNavigation:function(d,c){if(!this.reporting){return}if(!d){d="ENTER"}if(!c){c="EXIT"}console.log("[TFANALYTICS] reportNavigation","{ from: "+d+", to: "+c+" }");Core.Analytics.reportNavigation(d,c)},_formatPlayerState:function(d,e){plst={level:TFUserData.getLevel(),lvl:TFUserData.getLevel(),xp:TFUserData.getTotalXp(),igc:TFUserData.getCurrency(),curre:TFUserData.getExploreEnergy(),maxe:TFUserData.getMaxExploreEnergy(),currbe:TFUserData.getBattleEnergy(),maxbe:TFUserData.getMaxBattleEnergy(),attack:TFUserData.getAttackPower(),fp:TFUserData.getFriendPoints(),bp:TFUserData.getBattlePoints(),wbronzemedal:TFUserData.getMedalQuantity("medal_1"),tbronzemedal:TFUserData.getMedalQuantity("medal_2"),totaltranscards:TFUserData.getTotalTransformerCards(),totalweaponcards:TFUserData.getTotalWeaponCards(),limbosize:TFUserData.getLimboSize(),limbottl:TFUserData.getLimboTTL(),gamescreen:TFSceneDirector.getCurrentScreen(),"class":TFUserData.getClass(),frcnt:TFUserData.getFriendsCount(),createdat:TFUserData.getCreationData(),missionid:TFUserData.getCurrentMissionId(),minibepotion:TFUserData.getItemQuantity(201),bepotion:TFUserData.getItemQuantity(202),miniepotion:TFUserData.getItemQuantity(101),epotion:TFUserData.getItemQuantity(102),rank:TFUserData.getRank(),rejuvpotion:TFUserData.getItemQuantity(301),transmetalauto:TFUserData.getItemQuantity(401),transmetalautoenhanced:TFUserData.getItemQuantity(402),transmetaldecep:TFUserData.getItemQuantity(501),transmetaldecepenhance:TFUserData.getItemQuantity(502),transmetal:TFUserData.getItemQuantity(601),weaponfusionmat:TFUserData.getItemQuantity(701)};for(var c in plst){plst[c]=this.safeString(plst[c])}return plst},safeString:function(c){return c?c+"":"0"}})}};__ngs._x={_c:null,_d:function(){var c={exports:{}};var b=c.exports;this._c=c;var a=__ngs.r_(__ngs._3y).PopUpController;b.TFManifestManager=Core.Class.singleton({classname:"TFManifestManager",initialize:function(d){console.log("TFManifestManager > initialize called."+d);this._oglExtensions=d;this._eventDownloadDone=false;this._mandatoryDownloadDone=false;this._configDownloadDone=false;this._configDownloadPercent=0;this._mandatoryDownloadPercent=0;this._dynamicDownloadDisabled=false;this._dynamicRequestPending=0;this._dynamicManifestData={};this._downloadMandatoryManifests();this._pendingOperations=[];this._pendingID=0},destroy:function(){},onGameServerLogin:function(){this._eventDownloadDone=false;this._configDownloadDone=false;this._downloadConfigs()},_downloadConfigs:function(){this._configManifest="webgame.client.data.ngmanifest";this._configUrl="http://werule-cdn.ngmoco.com/dlccontent/transformers/"+TFUserData.configVersion+"/";console.log("TFManifestManager > _downloadConfigs > Downloading config manifest from url "+this._configUrl);var d=new Network.DownloadManifest();this._startTime=new Date();d.start(this._configUrl,"./",this._configManifest,function(k,h){console.log("TFManifestManager > _downloadConfigs > Config manifest downloading"+k+" "+h);var e=Math.floor((parseFloat(k)/parseFloat(h))*100);var g=new Date();TFAnalytics.reportGameEvent("LOADGAMEPROG",{newuser:TFUserData.newUser(),pctload:e,timetaken:(g-this._startTime)})}.bind(this),function(g){if(g){TFAnalytics.reportGameEvent("MANIFESTFAIL",{error:g,manifestUrl:this._configUrl});console.log("TFManifestManager > _downloadConfigs > Manifest downloader failed to download "+this._configUrl+" with "+g+", retry or restart the game");var e={};e.title=(Localization.getString("ui_updatefailed")=="ui_updatefailed"?"Update Failed":Localization.getString("ui_updatefailed"));e.fusionCost=(Localization.getString("ui_updatenodownload")=="ui_updatenodownload"?"Update could not be downloaded. Please check your connection or try again later.":Localization.getString("ui_updatenodownload"));e.okButtonText=(Localization.getString("ui_retry")=="ui_retry"?"Retry":Localization.getString("ui_retry"));e.cancelButtonText=(Localization.getString("ui_exit")=="ui_exit"?"Exit":Localization.getString("ui_exit"));e.cb=this._downloadConfigs.bind(this);e.cb2=Device.LifecycleEmitter.exitProcess.bind(Device.LifecycleEmitter);TFSceneDirector._showDialog(new a(e))}else{console.log(" TFManifestManager > _downloadConfigs > "+this._configManifest+" manifest download complete");this._downloadEventManifests()}}.bind(this),false,true)},_downloadMandatoryManifests:function(){this._localManifestName="webgame.2x.ngmanifest";this._manifestUrl=Core.Capabilities.getContentUrl();console.log("TFManifestManager > _downloadMandatoryManifests > Downloading config manifest from url "+this._manifestUrl);var d=__ngs.r_(__ngs._67).DownloadFileSet;this._dynamicDownloader=new d();this._dynamicDownloader.start(this._manifestUrl,"./",this._localManifestName,function(o,n){if(this._dynamicManifestData){this._dynamicManifestData=JSON.parse(this._dynamicDownloader.mRemoteText)}console.log(this._localManifestName+" manifest downloading"+o+" "+n);var l=Math.floor((parseFloat(o)/parseFloat(n))*100);if(this._dynamicDownloadDisabled){var m=TFSceneDirector.getSplashViewController();if(m&&m.setProgress){m.setProgress(l)}}}.bind(this),function(m){if(m){TFAnalytics.reportGameEvent("MANIFESTFAIL",{error:m,manifestUrl:this._manifestUrl});console.log("TFManifestManager > _downloadMandatoryManifests > Manifest downloader failed to download "+this._manifestUrl+" with "+m+", retry or restart the game");var l={};l.title=(Localization.getString("ui_updatefailed")=="ui_updatefailed"?"Update Failed":Localization.getString("ui_updatefailed"));l.fusionCost=(Localization.getString("ui_updatenodownload")=="ui_updatenodownload"?"Update could not be downloaded. Please check your connection or try again later.":Localization.getString("ui_updatenodownload"));l.okButtonText=(Localization.getString("ui_retry")=="ui_retry"?"Retry":Localization.getString("ui_retry"));l.cancelButtonText=(Localization.getString("ui_exit")=="ui_exit"?"Exit":Localization.getString("ui_exit"));l.cb=this._downloadMandatoryManifests.bind(this);l.cb2=Device.LifecycleEmitter.exitProcess.bind(Device.LifecycleEmitter);TFSceneDirector._showDialog(new a(l))}else{console.log("TFManifestManager > _downloadMandatoryManifests > "+this._localManifestName+" manifest download complete");this._mandatoryDownloadDone=true}}.bind(this),false,true);this._dynamicDownloader.setPriorityDownloadOnly(!this._dynamicDownloadDisabled);if(this._pendingOperations){console.log("TFManifestManager > _downloadMandatoryManifests > Retrying pending operations if any");var h=[];for(var e=0;e<this._pendingOperations.length;++e){if(this._pendingOperations[e]){var g=this._pendingOperations[e].asset;var k=this._pendingOperations[e].onDownloadCallback;this._pendingOperations[e]=null;h.push({asset:g,onDownloadCallback:k})}}if(h.length<1){if(!this._dynamicDownloadDisabled){this._dynamicDownloader.pause()}}for(var e=0;e<h.length;++e){if(h[e]){this.downloadAsset(h[e].asset,h[e].onDownloadCallback)}}}else{if(!this._dynamicDownloadDisabled){this._dynamicDownloader.pause()}}},_downloadEventManifests:function(){this._localManifestName="webgame.event.ngmanifest";this._manifestUrl=Core.Capabilities.getContentUrl();console.log("Downloading event manifest from url "+this._manifestUrl);var d=new Network.DownloadManifest();d.start(this._manifestUrl,"./",this._localManifestName,function(k,h){console.log(this._localManifestName+" manifest downloading"+k+" "+h);var e=Math.floor((parseFloat(k)/parseFloat(h))*100);var g=TFSceneDirector.getSplashViewController();if(g&&g.setProgress){g.setProgress(e)}}.bind(this),function(g){if(g){TFAnalytics.reportGameEvent("MANIFESTFAIL",{error:g,manifestUrl:this._manifestUrl});console.log("Manifest downloader failed to download "+this._manifestUrl+" with "+g+", retry or restart the game");var e={};e.title=Localization.getString("Update Failed");e.fusionCost=Localization.getString("Update could not be downloaded. Please check your connection or try again later.");e.okButtonText=Localization.getString("Retry");e.cancelButtonText=Localization.getString("Exit");e.cb=this._downloadEventManifests.bind(this);e.cb2=Device.LifecycleEmitter.exitProcess.bind(Device.LifecycleEmitter);TFSceneDirector._showDialog(new a(e))}else{console.log(this._localManifestName+" manifest download complete");this._configDownloadDone=true;this._eventDownloadDone=true;TFGameData.startReading()}}.bind(this),false,true)},downloadAsset:function(e,d){if(this.isFileDownloaded(e)){d(e);return}if(!this._dynamicManifestData[e]){console.log("TFManifestManager > downloadAsset > "+e+" not found on manifest, not downloading anything.");d(e);return}console.log("TFManifestManager > downloadAsset > Attempting download for "+e);this._dynamicRequestPending++;console.log("TFManifestManager > downloadAsset > ++ pending downloads : "+this._dynamicRequestPending);var g=this._pendingID++;this._pendingOperations[g]={asset:e,onDownloadCallback:d};this._dynamicDownloader.onNotifyFileReady(e,function(h,k){this._dynamicRequestPending--;console.log("TFManifestManager > downloadAsset > -- pending downloads : "+this._dynamicRequestPending);this.checkManifestPause();if(this._dynamicRequestPending<0){console.log("TFManifestManager > downloadAsset > Error in pending count : "+this._dynamicRequestPending);this._dynamicRequestPending=0}this._preDownloadSuccessfulCB(h)}.bind(this,g));this._dynamicDownloader.resume();console.log("TFManifestManager > downloadAsset > Resuming download of manifest")},increaseAssetPriority:function(e,d){this._dynamicDownloader.increaseAssetPriority(e,d)},_preDownloadSuccessfulCB:function(d){if(this._pendingOperations[d]){this._pendingOperations[d].onDownloadCallback(this._pendingOperations[d].asset);this._pendingOperations[d]=null}},checkManifestPause:function(){if(this._dynamicRequestPending==0){this._pendingID=0;if(!this._dynamicDownloadDisabled){this._dynamicDownloader.pause()}console.log("TFManifestManager > downloadAsset > Pausing download of manifest")}},isDone:function(){if(this._dynamicDownloadDisabled){return this._configDownloadDone&&this._mandatoryDownloadDone}return this._configDownloadDone},isFileDownloaded:function(d){return(this._dynamicDownloader.mCompletedPaths[d]==true)},isFileLocal:function(d){return(!this._dynamicManifestData[d])},isFileDownloadedOrLocal:function(d){return(this.isFileDownloaded(d)||this.isFileLocal(d))}})}};__ngs._y={_c:null,_d:function(){var e={exports:{}};var b=e.exports;this._c=e;var h=__ngs.r_(__ngs._5).Core;var d=__ngs.r_(__ngs._f).GL2;var c=__ngs.r_(__ngs._4).Device;var g=__ngs.r_(__ngs._g).UI;var a=__ngs.r_(__ngs._68).HUD;b.DebugControl=h.MessageListener.subclass({initialize:function(k){this.buttons=[];this.hud=null;this.textsize=24;this.bheight=this.textsize+16;this.padding=this.textsize/2;this.xoffset=this.padding;this.yoffset=this.padding;this.w=c.LayoutEmitter.getWidth();this.h=c.LayoutEmitter.getHeight();this.view=k;this.hudhooks=[];this.hudhooks.push(function(n){n.addHistogram("fps");n.makeDataSource("fps",{emitter:h.Diagnostics,translator:function(p){var o=p.fps;if(o){return o}return 0}});h.Diagnostics.setInterval(5);n.addHistogram("rss MB");var m=n.makeDataSource("rss MB",{translator:function(p){var o=p.residentSize;if(o){return o/1048576}return 0}});c.MemoryEmitter.addSummaryStatisticsListener(n,m);c.MemoryEmitter.setSummaryStatisticsInterval(100);n.addHistogram("jsvm MB");n.makeDataSource("jsvm MB",{emitter:h.Diagnostics,translator:function(p){var o=p.jsvm_size;if(o){return o/1048576}return 0}})});c.LayoutEmitter.addListener(this,this._onLayout);this.addButton("hud",function(){console.log("toggling hud");if(this.hud){this.hud.destroy();this.hud=null}else{this._make_hud()}}.bind(this));var l=false;this.addButton("reload",function(){if(l){return}l=true;g.Window.document.addChild(new g.Spinner({frame:new g.ViewGeometry.Rect(g.Window.getFrame()).inset(10)}));k.destroy();h.LocalGameList.updateAndRestartCurrentGame()});this.addButton("exit",function(){console.log("exiting");c.LifecycleEmitter.exitProcess()});this.layoutButtons()},addButton:function(k,m){var l=new g.Button({text:k,textSize:this.textsize,textColor:"FFFFFFFF",disabledText:k,disabledTextColor:"FFFFFFFF",textShadow:"33000000 1.0 {0.0,-2.0}",textGravity:g.ViewGeometry.Gravity.Center,gradient:{corners:"8 8 8 8",outerLine:"00 1.5",gradient:["FF9bd6f4 0.0","FF0077BC 1.0"]},highlightedGradient:{corners:"8 8 8 8",outerLine:"00 1.5",gradient:["FF0077BC 0.0","FF9bd6f4 1.0"]},disabledGradient:{corners:"0 8 8 8",gradient:["FF55 0.0","FF00 1.0"]},onClick:m});this.buttons.push(l);g.Window.document.addChild(l)},layoutButtons:function(){var l=this.buttons.length;for(var n=0;n<l;n++){var m=this.buttons[n];var o=m.getText().length*this.textsize;var k=this.xoffset;this.xoffset+=o+this.padding;if(this.xoffset>this.w){k=this.padding;this.xoffset=k+this.padding+o;this.yoffset+=this.padding+this.bheight}m.setFrame(k,this.yoffset,o,this.bheight)}},customizeHUD:function(k){this.hudhooks.push(k);if(this.hud){this.hud.destroy();this._make_hud()}},_onLayout:function(){this.xoffset=this.padding;this.yoffset=this.padding;this.w=c.LayoutEmitter.getWidth();this.h=c.LayoutEmitter.getHeight();this.layoutButtons();if(this.hud){this.hud.destroy();this._make_hud()}},_make_hud:function(){var k=this.yoffset+this.bheight+this.padding;this.hud=new a([0,k,this.w,this.h-k]);for(f in this.hudhooks){if(this.hudhooks.hasOwnProperty(f)){var l=this.hudhooks[f];l(this.hud)}}}})}};(function(){if(!Function.prototype.hasOwnProperty("bind")){var a=Array.prototype.slice;Function.prototype.bind=function(c){var d=this;if(arguments.length>1){var b=a.call(arguments,1);return function(){if(arguments.length){var e=b.concat(a.call(arguments));return d.apply(c,e)}else{return d.apply(c,b)}}}else{return function(){if(arguments.length){return d.apply(c,arguments)}else{return d.call(c)}}}}}})();(function(){if(!Array.prototype.hasOwnProperty("indexOf")){Array.prototype.indexOf=function(c){var a=this.length;for(var b=0;b<this.length;++b){if(c===this[b]){return b}}return -1}}})();var $APP_REQUIREPATHMAP={};function userGameInit(){console.log("ngCore calling main()");main()}var NGSetTimeoutRunTimers=__ngs.r_(__ngs._0).NGSetTimeoutRunTimers;var SystemBinding=__ngs.r_(__ngs._1).SystemBinding;var Downloader=__ngs.r_(__ngs._2).Downloader;var LocalGameList=__ngs.r_(__ngs._3).LocalGameList;var Device=__ngs.r_(__ngs._4).Device;var Core=__ngs.r_(__ngs._5).Core;var Proc=__ngs.r_(__ngs._6).Proc;var Capabilities=__ngs.r_(__ngs._7).Capabilities;var Localization=__ngs.r_(__ngs._8).Localization;var Audio_Device=__ngs.r_(__ngs._9).Device;var Storage=__ngs.r_(__ngs._a).Storage;var NgProcID={PersistProc:-1,GameProc:-2};var gNgShutdownPending=false;var gNgEngineEntities;var gNgAddedEngineEntities;var gNgRemovedEngineEntities;var gNgUpdateEngineEntities;var gNgTouchEngineEntities;var gNgKeyPressEngineEntities;function NgEngineInitPrivate(){NgLogInit();NgApplication.getInstance().restart();gNgEngineEntities=[];gNgAddedEngineEntities=[];gNgRemovedEngineEntities=[];gNgUpdateEngineEntities=[];gNgTouchEngineEntities=[];gNgKeyPressEngineEntities=[]}function NgEngineProcessEntityAddRemove(){var a,b;for(a in gNgAddedEngineEntities){b=gNgAddedEngineEntities[a];if(b.mIsUpdatable){gNgUpdateEngineEntities[b.mId]=b}}gNgAddedEngineEntities=[];for(a in gNgRemovedEngineEntities){b=gNgRemovedEngineEntities[a];if(b.mIsUpdatable){delete gNgUpdateEngineEntities[b.mId]}}gNgRemovedEngineEntities=[]}function NgHandleException(a){if(Core.Proc.isPrivileged()){NgLogException(a)}else{NgLogException(a);var b=JSON.stringify(a);Core.LocalGameList._forwardException(b)}}function NgEngineInit(a){NgLogD("NgEngineInit beg");try{NgEngineInitPrivate();NgLogD("KeyValue Storage initializing...");Storage.KeyValueCache.init();NgLogD("KeyValue Storage initialized...");Core.Time.instantiate();NgLogD("Instantiate the Localization context (singleton), depends on Capabilities");Localization.instantiate()}catch(b){try{NgHandleException(b)}catch(c){console.log("ERROR! NgEngineInit NgHandleException exception!")}}NgLogD("NgEngineInit end");return NgEngineUpdate(a)}function NgPreInit(a){NgLogD("Localization NgPreInit beg");return update(a)}function NgGameInit(a){NgLogD("NgGameInit beg");Core.Analytics.instantiate();try{userGameInit()}catch(b){NgHandleException(b)}NgLogD("NgGameInit end");return update(a)}function update(a){return NgEngineUpdate(a)}var NGSetTimeoutRunTimers=__ngs.r_(__ngs._0).NGSetTimeoutRunTimers;var setTimeoutOrig=setTimeout;setTimeout=function(a,b){return setTimeoutOrig(function(){try{a()}catch(c){NgHandleException(c)}},b)};var setIntervalOrig=setInterval;setInterval=function(a,b){return setIntervalOrig(function(){try{a()}catch(c){NgHandleException(c)}},b)};var NgEngineUpdate=(function(){var a=__ngs.r_(__ngs._5).Core;return function(c){var g;try{NGSetTimeoutRunTimers();if(typeof c==="function"){c()}else{if(c.length){NgEngineProcessEntityAddRemove();var b=c.split(":");for(g=0;g<b.length;++g){var l=b[g];if(0===l.length){continue}switch(parseInt(l)){case NgEntityTypes.App:NgApplication.getInstance().handleCommand(l);break;case NgEntityTypes.NgFileSys:NgApplication.getInstance().getFileSys().handleCommand(l);break;case NgEntityTypes.Storage:NgLogD("Command for storage is "+l);Storage.getInstanceForCommand(l).handleCommand(l);break;case NgEntityTypes.NgUI:var h=__ngs.r_(__ngs._b).Window;h.handleCommand(l);break;case NgEntityTypes.NgSystemBinding:SystemBinding.handleCommand(l);break;case 3117:console.log("got leet response");if(typeof(_WifiDiagCallback)!="undefined"){_WifiDiagCallback(l)}break;default:a.Proc._classRecvGen(l.split(","));break}}}}if(gNgShutdownPending){gNgShutdownPending=false}else{NgEngineProcessEntityAddRemove();for(g in gNgUpdateEngineEntities){var d=gNgUpdateEngineEntities[g];if(!d.mRegistered){continue}d.onUpdate()}}}catch(e){NgHandleException(e)}var k=a.Proc.getCommandString()+NgFlushCommandsToString();a.Proc.clearCommandString();return k}})();var Capabilities=__ngs.r_(__ngs._7).Capabilities;var Logger=__ngs.r_(__ngs._c).Logger;var NgApplicationCommands={Caps:0,Debug:1,FrameTime:2,FrameRate:3,Start:4,DeviceOrientation:10,SetOrientation:11,BackPress:12,OnBackPressed:13,LaunchExternalNativeApp:15,ExitSystemProcess:16};var NgApplicationOrientation={Portrait:0,PortraitUpsideDown:1,LandscapeLeft:2,LandscapeRight:3,FaceUp:4,FaceDown:5};function NgApplication(){this.mFileSys=Storage.FileSystem;this.mFrameTime=0;this.mObservers=[]}NgApplication.sInstance=null;NgApplication.getInstance=function(){if(NgApplication.sInstance===null){NgApplication.sInstance=new NgApplication()}return NgApplication.sInstance};NgApplication.prototype={mFileSys:null,mObservers:[],mFrameTime:0,restart:function(){},handleCommand:function(b){var a=NgPeekCommandId(b);switch(a){case NgApplicationCommands.FrameTime:this.parseFrameTime(b);break;case NgApplicationCommands.Start:this.onApplicationStart();break;case NgApplicationCommands.OnBackPressed:this.onApplicationBackPressed();break;default:NgLogE("NgApplication command unknown: "+b);break}},getFileSys:function(){return this.mFileSys},ngLog:function(b,a){NgPushCommand4(NgEntityTypes.App,NgApplicationCommands.Debug,Core.Base64.encode(a),b)},parseFrameTime:function(c){var a=NgParseCommand2(c,parseInt,parseFloat);var b=a[1];if(this.mFrameDelta===undefined){this.mFrameDelta=0}else{this.mFrameDelta=b-this.mFrameTime}this.mFrameTime=b},getFrameTime:function(){return this.mFrameTime},getFrameDelta:function(){return this.mFrameDelta},setFrameRate:function(a){NgPushCommand3(NgEntityTypes.App,NgApplicationCommands.FrameRate,a)},setOrientation:function(a){NgPushCommand3(NgEntityTypes.App,NgApplicationCommands.SetOrientation,a)},registerObserver:function(a){a.index=this.mObservers.push(a)},unregisterObserver:function(a){if(a.index){delete this.mObservers[a.index-1]}},onApplicationStart:function(){for(var a in this.mObservers){this.mObservers[a].onApplicationStart()}},onApplicationReceivedCustomMessage:function(b){for(var a in this.mObservers){this.mObservers[a].onApplicationReceivedCustomMessage(b)}},onApplicationBackPressed:function(){var b=false;for(var a in this.mObservers){if(this.mObservers[a].onApplicationBackPressed()){b=true;break}}if(!b){NgPushCommand2(NgEntityTypes.App,NgApplicationCommands.BackPress)}},exitSystemProcess:function(){NgLogD("pushing exit command");NgPushCommand2(NgEntityTypes.App,NgApplicationCommands.BackPress);NgLogD("pushed exit command")}};function NgApplicationObserver(){}NgApplicationObserver.prototype={index:0,onApplicationStart:function(){},onApplicationReceivedCustomMessage:function(a){},onApplicationDeviceOrientation:function(a){},onApplicationBackPressed:function(){return false}};var NgEntityTypes={App:1,NgTouchEvent:2,NgKeyPressEvent:3,Accel:4,NgTextInputBox2D:5,Animation:6,Sound:7,NgEngineEntity:8,NgDrawableEntity2D:9,NgCanvas2D:10,NgCamera2D:11,NgSprite2D:12,NgText2D:13,NgWebView2D:14,NgGroup2D:16,NgPhysics2D:17,NgPrimitive2D:18,NgFileSys:19,Gyro:22,NgUI:23,Storage:24,NgSystemBinding:25,NgCustomMessage:50,LoadApp:100};var NgEngineEntityCommandIDs={SetNativeTouchType:1};function NgEngineEntity(){this.mId=0;this.mTouchPriority=0;this.mKeyPressPriority=0;this.mIsTouchable=false;this.mIsKeyable=false;this.mIsUpdatable=false;this.mNativeTouchType=NgEngineEntity.NativeTouchType.Enable;this.mRegistered=false}NgEngineEntity.NativeTouchType={None:0,Enable:1,EnableBounds:2};NgEngineEntity.engineCurrentId=1;NgEngineEntity.newEngineId=function(){return NgEngineEntity.engineCurrentId++};NgEngineEntity.deleteEngineId=function(){};NgEngineEntity.prototype.newEntity=function(){};NgEngineEntity.prototype.deleteEntity=function(){};NgEngineEntity.prototype.onTouch=function(a){return false};NgEngineEntity.prototype.onNativeTouch=function(a){};NgEngineEntity.prototype.onKeyPress=function(a){return false};NgEngineEntity.prototype.onUpdate=function(){};NgEngineEntity.prototype.register=function(){this.mParents=[];if(this.mId>=0){this.mId=NgEngineEntity.newEngineId()}this.mRegistered=true;gNgEngineEntities[this.mId]=this;gNgAddedEngineEntities[this.mId]=this;this.newEntity()};NgEngineEntity.prototype.unregister=function(){var a=this.mParents.concat([]);for(var b in a){NgLogD("Removing child "+this.mId+" from parent Group "+a[b].mId+" because the Entity was unregistered");a[b].removeChild(this)}this.mRegistered=false;delete gNgEngineEntities[this.mId];gNgRemovedEngineEntities[this.mId]=this;this.deleteEntity();if(this.mId>=0){NgEngineEntity.deleteEngineId(this.mId)}};NgEngineEntity.prototype.toggleUpdatable=function(){if(this.mIsUpdatable){delete gNgUpdateEngineEntities[this.mId]}else{gNgUpdateEngineEntities[this.mId]=this}this.mIsUpdatable=!this.mIsUpdatable};NgEngineEntity.prototype.setNativeTouchType=function(a){this.mNativeTouchType=a;NgPushCommand4(NgEntityTypes.NgDrawableEntity2D,NgEngineEntityCommandIDs.SetNativeTouchType,this.mId,this.mNativeTouchType)};var Core=__ngs.r_(__ngs._5).Core;var gNgCommandStrings=[];var gNgCommandString="";var gNgCommandMode=2;function NgQueueCommandText(a){switch(gNgCommandMode){case 0:case 1:gNgCommandStrings.push(a);break;case 2:gNgCommandString+=a;break}}function NgFlushCommandsToString(){var c="";switch(gNgCommandMode){case 0:for(var b=0,a=gNgCommandStrings.length;b<a;++b){c+=gNgCommandStrings[b]}break;case 1:c=String.prototype.concat.apply(gNgCommandStrings);break}switch(gNgCommandMode){case 0:case 1:gNgCommandStrings=[];break;case 2:c=gNgCommandString;gNgCommandString="";break}return c}function NgParseString(a){return a}function NgParseBase64(a){if(a){return Core.Base64.decode(a)}else{return""}}function NgParseBool(a){return parseInt(a)?true:false}function NgParseInt(a){return parseInt(a,10)}function NgKVArrayToCmd(b){var a="";var d=0;for(var c in b){var e=b[c];a+=","+c+","+Core.Base64.encode(e);++d}return d+a}function NgPushCommand1(a){gNgCommandString+=":"+a}function NgPushCommand2(b,a){gNgCommandString+=":"+b+","+a}function NgPushCommand3(c,b,a){gNgCommandString+=":"+c+","+b+","+a}function NgPushCommand4(d,c,b,a){gNgCommandString+=":"+d+","+c+","+b+","+a}function NgPushCommand5(d,c,b,a,e){gNgCommandString+=":"+d+","+c+","+b+","+a+","+e}function NgPushCommand6(d,c,b,a,g,e){gNgCommandString+=":"+d+","+c+","+b+","+a+","+g+","+e}function NgPushCommand7(d,c,b,a,h,g,e){gNgCommandString+=":"+d+","+c+","+b+","+a+","+h+","+g+","+e}function NgPushCommand8(d,c,b,a,k,h,g,e){gNgCommandString+=":"+d+","+c+","+b+","+a+","+k+","+h+","+g+","+e}function NgPushCommand9(l,k,h,g,e,d,c,b,a){gNgCommandString+=":"+l+","+k+","+h+","+g+","+e+","+d+","+c+","+b+","+a}function NgPushCommandN(){var a=arguments;var d=a.length;var c=":";if(d>0){c+=a[0];for(var b=1;b<d;++b){c+=","+a[b]}}gNgCommandString+=c}function NgPeekCommandId(b){var a=b.split(",",2);if(a.length==2){return parseInt(a[1])}else{return null}}function NgPeekClassAndCommandId(b){var a=b.split(",",2);if(a.length==2){a[0]=parseInt(a[0]);a[1]=parseInt(a[1]);return a}else{return null}}function NgParseCommandToStrings(a){return a.split(",")}function NgParseCommand1(d,b){var c=[];var a=d.split(",");c[0]=b(a[1]);return c}function NgParseCommand2(e,c,b){var d=[];var a=e.split(",");d[0]=c(a[1]);d[1]=b(a[2]);return d}function NgParseCommand3(g,d,c,b){var e=[];var a=g.split(",");e[0]=d(a[1]);e[1]=c(a[2]);e[2]=b(a[3]);return e}function NgParseCommand4(g,d,c,b,h){var e=[];var a=g.split(",");e[0]=d(a[1]);e[1]=c(a[2]);e[2]=b(a[3]);e[3]=h(a[4]);return e}function NgParseCommand5(h,d,c,b,k,g){var e=[];var a=h.split(",");e[0]=d(a[1]);e[1]=c(a[2]);e[2]=b(a[3]);e[3]=k(a[4]);e[4]=g(a[5]);return e}function NgParseCommandN(g){var d=[];var b=arguments;var e=b.length;var a=g.split(",");for(var c=1;c<e;++c){d[c-1]=b[c](a[c])}return d}function NgParseCommandDictionary(a,h,o,d){var m=true;var l=a.split(",");var g=l.length;var k;if(d){for(k=0;k<h;++k){d[k]=l[k]}}for(k=h;k<g;){var n=l[k++];var b=l[k++];var c=l[k++];var e=true;switch(n){case"i":c=parseInt(c);break;case"f":c=parseFloat(c);break;case"s":break;case"S":c=Core.Base64.decode(c);break;case"b":c=parseInt(c)?true:false;break;default:m=false;e=false;break}if(e){o[b]=c;NgLogD("dict: "+b+" : "+o[b])}else{NgLogD("dict: could not process "+n)}}return m}var Capabilities=__ngs.r_(__ngs._7).Capabilities;var FileSystem=__ngs.r_(__ngs._d).FileSystem;var gNgTrace=null;var NgDebugModes={BrowserTrace:{},NgCommand:{},NgCommandDocLoc:{}};var NgLogLevel={Verbose:5,Debug:4,Info:3,Warning:2,Error:1};var NgLogStr=["","e","w","i","d","v"];function NgSetDebugDefaultDestination(){if(typeof navigator=="undefined"){return NgDebugModes.NgCommand}var a=navigator.userAgent.toLowerCase();if(!((a.indexOf("iphone")>=0)||(a.indexOf("ipad")>=0))){return NgDebugModes.BrowserTrace}else{return NgDebugModes.NgCommand}}var gNgDebugMode=NgSetDebugDefaultDestination();function NgLogInit(){if(gNgDebugMode==NgDebugModes.BrowserTrace){gNgTrace=document.getElementById("trace")}}var NgDoVerboseLog=function(a){NgLog(NgLogLevel.Verbose,a)};var NgDoDebugLog=function(a){NgLog(NgLogLevel.Debug,a)};var NgDoInfoLog=function(a){NgLog(NgLogLevel.Info,a)};var NgDoWarningLog=function(a){NgLog(NgLogLevel.Warning,a)};var NgDoErrorLog=function(a){NgLog(NgLogLevel.Error,a)};var NgDoTimingLog=function(a){timingLog(a)};var NgNoLog=function(){};var NgLogV=NgDoVerboseLog;var NgLogD=NgDoDebugLog;var NgLogI=NgDoInfoLog;var NgLogW=NgDoWarningLog;var NgLogE=NgDoErrorLog;var NgLogT=NgDoTimingLog;function NgLogSetLevel(a){switch(a){case NgLogLevel.Debug:NgLogV=NgNoLog;NgLogD=NgDoDebugLog;NgLogI=NgDoInfoLog;NgLogW=NgDoWarningLog;NgLogE=NgDoErrorLog;NgLogT=NgDoTimingLog;break;case NgLogLevel.Info:NgLogV=NgNoLog;NgLogD=NgNoLog;NgLogI=NgDoInfoLog;NgLogW=NgDoWarningLog;NgLogE=NgDoErrorLog;NgLogT=NgDoTimingLog;break;case NgLogLevel.Warning:NgLogV=NgNoLog;NgLogD=NgNoLog;NgLogI=NgNoLog;NgLogW=NgDoWarningLog;NgLogE=NgDoErrorLog;NgLogT=NgDoTimingLog;break;case NgLogLevel.Error:NgLogV=NgNoLog;NgLogD=NgNoLog;NgLogI=NgNoLog;NgLogW=NgNoLog;NgLogE=NgDoErrorLog;NgLogT=NgDoTimingLog;break;default:case NgLogLevel.Verbose:NgLogV=NgDoVerboseLog;NgLogD=NgDoDebugLog;NgLogI=NgDoInfoLog;NgLogW=NgDoWarningLog;NgLogE=NgDoErrorLog;NgLogT=NgDoTimingLog;break}}NgLogSetLevel(NgLogLevel.Verbose);var useConsole=((typeof console!="undefined")&&(typeof console.log=="function"));function NgLog(b,a){console.log(NgLogStr[b]+": "+a)}function _exceptionNameDemangleHelper(c,b){try{var a=exception_demangle_require(c[b]);return a}catch(d){}return""}var NgLogException=(function(){var b=function(m,l,n){NgLogV(n);return l(m)};var d=function(t,o,p,r,s,n){p=p||"";r=r||"";s=s||"";n=+(n||0);if(parseInt(n,10)<=1){NgLogV("Line breaks in source may have been removed, source dump not shown");return o(t)}if(r===""||p===""||n<=0){var l="source dump error: Could not read '"+r+"' at "+n+"\n";return b(t,o,l)}var q=8;var u=n-q-1;var m=n+q-1;if(u<0){u=0}FileSystem._readLineRangeFromFile(p,{},u,0,m,-1,function(C,x){if(C){return b(t,o,"source dump error: "+C+"\n")}if(!x||x.length===0){return b(t,o,"source dump error: no data found in line range "+u+" to "+m+"\n")}var B=new Array(50).join("*");var z="".concat(B+"\n","File: "+r+"\n",s?"Function: "+s+"\n":"","Line: "+n+"\n","\n");var D=x.split("\n");var A=D[D.length-1];if(!A||A.length===0){D.length--}u++;for(var y=0;y<D.length;++y){var w=u+y;var v=D[y];z=z.concat(w,w===n?"> ":": ",v,"\n")}z+=B+"\n";o(t,z)})};function e(n,m){var l=n.stack||"";var o=/^([^\(\s]*)\(.*\)@([^:]*\/([^\/]+\.[^\.:]*)):(\d+)$/m.exec(l);n.stackWithParams=n.stack;n.stack=n.toString()+"\n"+n.stack.replace(/([^\(\s]*)\(.*\)@([^:]*\/([^\/]+\.[^\.:]*)):(\d+)/g,"\t at $1 ($2:$4)");if(o){return d(n,m,o[3],o[2],o[1],o[4])}else{return m(n)}}function c(t,n){var l=t.sourceURL||"";var p=".js";var r=l.lastIndexOf(p);if(r<0){return n(t)}r=r+p.length;var q="/";var m=l.lastIndexOf(q,r);var u=m<0?0:m+q.length;var o=l.substring(u,r);var s=l.substring(0,r);return d(t,n,o,s,t.sourceURL,t.line)}function h(n,m){var l=n.stack||"";var o=/^\s*at\s+([^\(\/]*)\s?\(?([^:]*\/([^\/]+\.js)):(\d+):\d+\)?\s*$/m.exec(l);if(o){return d(n,m,o[3],o[2],o[1],o[4])}else{return m(n)}}function k(n,m){var l=n.stack||"";var o=/^\s*at\s+([^\(\/]*)\s?\(?([^\?]*\/([^\/]+\.js)\?h=[^:]*):(\d+):\d+\)?\s*$/m.exec(l);if(o){return d(n,m,o[3],o[2],o[1],o[4])}else{return m(n)}}function a(r){var t=r.stacklevel;if(r.stack&&t&&t>0){var s=/^[^\(\s]*\(.*\)@[^:]*\/[^\/]+\.[^\.:]*:\d+$/;var p=/^\s*at\s+[^\(\/]*\s?\(?[^:]*\/[^\/]+\.js:\d+:\d+\)?\s*$/;var o=r.stack.split("\n");for(var q=0,n=o.length;q<n;++q){var m=o[q];if((m.match(s)||m.match(p))&&(q+t)<n){o.splice(q,t);r.stack=o.join("\n");break}}}}function g(p,o){var m;if(!p){m="NgLogException called with nil exception.\n";p={toString:function(){return m}}}else{if(p.stack){m=p.stack;if(m.charAt(m.length-1)!=="\n"){m+="\n"}}else{m=p.toString()+"\n[NO STACK TRACE AVAILABLE]\n"}}var r="";var s="";var q="\n\nEXCEPTION: "+m;if(Capabilities.getPlatformOS().match(/android/i)){NgLogE(q);s+=q;r+="\n"}else{r+=q}for(var t in ["sourceFile","sourceURL","fileName"]){if(p[t]){r+=_exceptionNameDemangleHelper(p,t)+"\n";break}}if(p.relatedFile){r+="\trelated to file: "+_exceptionNameDemangleHelper(p,"relatedFile")+"\n"}r+=o||"";if(typeof p==="object"){for(var l in p){if(l!=="stack"){r+="PROPERTY: "+l+" VALUE: ["+p[l]+"]\n"}}r+="\n"}NgLogE(r);s+=r;if(!Core.Proc.isPrivileged()){var n=__ngs.r_(__ngs._e).ErrorEmitter;n._handleUncaughtException(s)}}return function(m){var n=Capabilities.getPlatformOS();var l=function(p,o){o(p,"")};a(m);if(n.match(/iphone/i)){if(m.stack){l=e}else{l=c}}else{if(n.match(/android/i)){l=h}else{if(n.match(/flash/i)){l=k}else{l=h}}}l(m,g)}})();var _180OverPi=180/Math.PI;var _piOver180=Math.PI/180;var clamp=function(b,c,a){return Math.max(Math.min(b,a),c)};function CGRectContainsPoint(b,a){return a.getX()>=b.getMinX()&&a.getX()<=b.getMaxX()&&a.getY()>=b.getMinY()&&a.getY()<=b.getMaxY()}function CGPointEqualToPoint(b,a){return b.getX()==a.getX()&&b.getY()==a.getY()}function createBB(a){var b=a.getAnimation().getFrame(0);return createBBBase(a.getPosition(),b.getSize(),b.getAnchor(),a.getScale())}function createBBBase(a,c,b,d){b=b||new Core.Point();d=d||new Core.Point(1,1);var c=new Core.Size(c.getWidth()*d.getX(),c.getHeight()*d.getY());var a=new Core.Point(a.getX()-c.getWidth()*b.getX(),a.getY()-c.getHeight()*b.getY());if(c.getWidth()<0){a.setX(a.getX()+c.getWidth());c.setWidth(-c.getWidth())}if(c.getHeight()<0){a.setY(a.getY()+c.getHeight());c.setHeight(-c.getHeight())}return new Core.Rect(a,c)}var sprintf=(function(){function a(d){return Object.prototype.toString.call(d).slice(8,-1).toLowerCase()}function b(e,g){for(var d=[];g>0;d[--g]=e){}return d.join("")}var c=function(){if(!c.cache.hasOwnProperty(arguments[0])){c.cache[arguments[0]]=c.parse(arguments[0])}return c.format.call(null,c.cache[arguments[0]],arguments)};c.format=function(o,n){var s=1,q=o.length,h="",t,d=[],l,g,m,e,p,r;for(l=0;l<q;l++){h=a(o[l]);if(h==="string"){d.push(o[l])}else{if(h==="array"){m=o[l];if(m[2]){t=n[s];for(g=0;g<m[2].length;g++){if(!t.hasOwnProperty(m[2][g])){console.log(sprintf('[sprintf] property "%s" does not exist',m[2][g]))}t=t[m[2][g]]}}else{if(m[1]){t=n[m[1]]}else{t=n[s++]}}if(/[^s]/.test(m[8])&&(a(t)!="number")){console.log(sprintf("[sprintf] expecting number but found %s",a(t)))}switch(m[8]){case"b":t=t.toString(2);break;case"c":t=String.fromCharCode(t);break;case"d":t=parseInt(t,10);break;case"e":t=m[7]?t.toExponential(m[7]):t.toExponential();break;case"f":t=m[7]?parseFloat(t).toFixed(m[7]):parseFloat(t);break;case"o":t=t.toString(8);break;case"s":t=((t=String(t))&&m[7]?t.substring(0,m[7]):t);break;case"u":t=Math.abs(t);break;case"x":t=t.toString(16);break;case"X":t=t.toString(16).toUpperCase();break}t=(/[def]/.test(m[8])&&m[3]&&t>=0?"+"+t:t);p=m[4]?m[4]=="0"?"0":m[4].charAt(1):" ";r=m[6]-String(t).length;e=m[6]?b(p,r):"";d.push(m[5]?t+e:e+t)}}}return d.join("")};c.cache={};c.parse=function(d){var h=d;var h=h.replace(/%(\d?\$?)@/g,"%$1s");var h=h.replace(/%(\d?\$?)i/g,"%$1d");var k=[],m=[],l=0;while(h){if((k=/^[^\x25]+/.exec(h))!==null){m.push(k[0])}else{if((k=/^\x25{2}/.exec(h))!==null){m.push("%")}else{if((k=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(h))!==null){if(k[2]){l|=1;var n=[],g=k[2],e=[];if((e=/^([a-z_][a-z_\d]*)/i.exec(g))!==null){n.push(e[1]);while((g=g.substring(e[0].length))!==""){if((e=/^\.([a-z_][a-z_\d]*)/i.exec(g))!==null){n.push(e[1])}else{if((e=/^\[(\d+)\]/.exec(g))!==null){n.push(e[1])}else{console.log("[sprintf] huh?")}}}}else{console.log("[sprintf] huh?")}k[2]=n}else{l|=2}if(l===3){console.log("[sprintf] mixing positional and named placeholders is not (yet) supported")}m.push(k)}else{console.log("[sprintf] huh?")}}}h=h.substring(k[0].length)}return m};return c})();"use strict";var Core=__ngs.r_(__ngs._5).Core;var Localization=Core.Localization;var GL2=__ngs.r_(__ngs._f).GL2;var UI=__ngs.r_(__ngs._g).UI;var Network=__ngs.r_(__ngs._h).Network;var Storage=__ngs.r_(__ngs._a).Storage;var OAuth=__ngs.r_(__ngs._i).OAuth;var TFGlobals=__ngs.r_(__ngs._j).TFGlobals;var Server=__ngs.r_(__ngs._k).Server;var User=__ngs.r_(__ngs._l).User;var TFGameData=__ngs.r_(__ngs._m).TFGameData;var ViewController=__ngs.r_(__ngs._n).ViewController;var TFSceneDirector=__ngs.r_(__ngs._o).TFSceneDirector;var TFAppDelegate=__ngs.r_(__ngs._p).TFAppDelegate;var TFUserData=__ngs.r_(__ngs._q).TFUserData;var TFCardsManager=__ngs.r_(__ngs._r).TFCardsManager;var TFUtils=__ngs.r_(__ngs._s).TFUtils;var SpriteFactoryCache=__ngs.r_(__ngs._t).SpriteFactoryCache;var NotificationCenter=__ngs.r_(__ngs._u).NotificationCenter;var TFNotificationsManager=__ngs.r_(__ngs._v).TFNotificationsManager;var TFAnalytics=__ngs.r_(__ngs._w).TFAnalytics;var TFManifestManager=__ngs.r_(__ngs._x).TFManifestManager;var DebugControl=__ngs.r_(__ngs._y).DebugControl;var LayoutListener=Core.MessageListener.subclass({initialize:function(){console.log("LayoutListener.initialize(TF)");Device.LayoutEmitter.addListener(this,this.onUpdate,-1)},onUpdate:function(a){console.log("LayoutListener.onUpdate(TF): %s, %d,  UI.Window._height: %d,  UI.Window._width: %d",JSON.stringify(a),Device.OrientationEmitter.getInterfaceOrientation(),UI.Window._height,UI.Window._width);UI.Window._height=a.height;UI.Window._width=a.width;if(UI.Window._height>UI.Window._width){startApp();Device.LayoutEmitter.removeListener(this)}}});function addInterfaceOrientationChanger(){if(Core.Capabilities.getDeviceName().indexOf("iPad")==-1){return}var a=new Core.MessageListener();Device.OrientationEmitter.addListener(a,function(b){if(b.type==Device.OrientationEmitter.OrientationType.Device){if(b.orientation==Device.OrientationEmitter.Orientation.Portrait||b.orientation==Device.OrientationEmitter.Orientation.PortraitUpsideDown){Device.OrientationEmitter.setInterfaceOrientation(b.orientation,false)}}})}function startApp(){console.log("<<Transformer.startApp: called");addInterfaceOrientationChanger();TFAppDelegate.instantiate()}function main(){if(Device.OrientationEmitter.getInterfaceOrientation()!=Device.OrientationEmitter.Orientation.Portrait&&Device.OrientationEmitter.getInterfaceOrientation()!=Device.OrientationEmitter.Orientation.PortraitUpsideDown){console.log("<<Transformers.main: setting interface orientation to Portrait");new LayoutListener();Device.OrientationEmitter.setInterfaceOrientation(Device.OrientationEmitter.Orientation.Portrait);console.log("<<Transformers.main: setting interface orientation to Portrait2")}else{console.log("<<Transformers.main: interface already on Portrait orientation");startApp()}};